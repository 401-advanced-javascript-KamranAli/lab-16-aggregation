(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[187],{1041:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(2);var g=a.n(b);var _=a(13);var y=a.n(_);var k=a(38);var O=a(527);var C=a(579);var E=a(923);var S=a(1317);var w=a(2012);var I=a(300);var j=a(155);var T=a(200);var A=a(1989);var N=20;var M=10;var P={msg:v["b"].object.isRequired,className:v["b"].string,blocksContainerContext:v["b"].oneOf(Object(b["values"])(j["a"])),expandInlineImgsPref:v["b"].bool,expandNonMediaAttachmentsPref:v["b"].bool,featureRichTextRendering:v["b"].bool,viewContext:v["b"].string};var R={className:void 0,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,featureRichTextRendering:false,viewContext:void 0,blocksContainerContext:j["a"].message_attachment};var x=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r=this.props.viewContext;var i={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(O["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:a,viewContext:r})};return h.a.createElement("div",null,h.a.createElement(E["a"],i,t),h.a.createElement(S["a"],n()({},i,{render:function e(a,r){return h.a.createElement(w["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.expandInlineImgsPref,n=t.expandNonMediaAttachmentsPref,i=t.blocksContainerContext,s=t.featureRichTextRendering;var o=Object(C["c"])(a,r,n,false,s);if(!a||!o||!o.length)return null;var l=N;var c=Object(b["map"])(o,function(e,t){var r=e.id||t+1;e.blocks&&(l=M);return h.a.createElement(A["a"],{msg:a,attachment:e,key:r,blocksContainerContext:i})});var u=c.splice(l);var d=y()("c-message_kit__attachments",this.props.className);return h.a.createElement("div",{className:d},c,this.renderAttachmentsOverLimitMaybe(u,l))}}]);return t}(m["PureComponent"]);x.displayName="MessageKitAttachments";x.defaultProps=R;var D=function e(t){return{expandInlineImgsPref:Object(k["h"])(t,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(k["h"])(t,"expand_non_media_attachments"),featureRichTextRendering:Object(T["b"])(t)}};t["a"]=Object(I["b"])(Object(f["connect"])(D)(x))},1042:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(13);var f=a.n(v);var b=a(2070);var g=a(371);var _=a(3552);var y=a.n(_);var k={className:m["b"].string,reactionKey:m["b"].string};var O={className:void 0,reactionKey:null};var C=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.reactionKey;var n=f()("c-message_kit__reaction_bar",a);return p.a.createElement(b["a"],{className:n,reactionKey:r})}}]);return t}(d["PureComponent"]);C.displayName="MessageReactionBar";C.defaultProps=O;var E=function e(t,a){var r=a.msg;if(!r)return null;var n=Object(g["b"])(r);return{reactionKey:n}};t["a"]=Object(h["connect"])(E)(C)},1052:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(2);var v=a(0);var f=a(6);var b=a(1328);var g=a(16);var _=a(61);var y=a(9);var k=a(1968);var O=a(44);var C=a(189);var E=a(456);var S=a(116);var w=a(449);var I=a(54);var j=a(27);var T=a(3);var A=a.n(T);var N=a(28);function M(e,t){var a=Object(N["getTeamProfileFields"])(t);if(Object(h["isEmpty"])(a))return[];var r=Object(g["getMemberProfileFields"])(e);if(Object(h["isEmpty"])(r))return[];var n=[];a.forEach(function(e){if(e.is_hidden)return;var t=r[e.id];if(!t||!t.value)return;n.push(A()({},e,{alt:t.alt,value:t.value}))});return n}var P=a(1598);function R(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}var x=a(48);var D=a.n(x);var F=a(284);var L=a(232);var B=a(4785);var U=a(13);var q=a.n(U);var W=a(1376);var H=a(3103);var G={children:v["b"].node,label:v["b"].string.isRequired,value:v["b"].node};var V={children:void 0,value:void 0};function K(e){var t=e.children,a=e.label,r=e.value;var n=Object(d["useContext"])(W["a"]);if(!a)return null;return p.a.createElement("div",{className:q()("p-member_profile_field",{"p-member_profile_field--keyboard":n})},p.a.createElement("div",{className:"p-member_profile_field__primary"},p.a.createElement("div",{className:"p-member_profile_field__label"},a),p.a.createElement("div",{className:"p-member_profile_field__value"},r)),t&&p.a.createElement("div",{className:"p-member_profile_field__secondary"},t))}K.displayName="MemberProfileField";K.defaultProps=V;var z=K;var Q=new f["b"]("member_profile");var Y={member:v["b"].object};var J={member:void 0};function X(e){var t=e.member;var a=Object(B["a"])(false,2e3),r=D()(a,2),n=r[0],i=r[1];var s=Object(L["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;var l=void 0;var c=void 0;if(n){c="success";l=Q.t("Copied!")}else l=Q.t("Copy");var u=Object(g["getMemberEmail"])(t);return p.a.createElement(z,{label:Q.t("Email address"),value:p.a.createElement(O["a"],{href:"mailto:"+u},u)},Object(F["canWriteText"])()&&p.a.createElement(I["c"],{status:c,tip:l,zIndex:"above_fs"},p.a.createElement(j["d"],{"aria-label":Q.t("Copy Email Address"),onClick:function e(){Object(F["writeText"])(u);i(true)},icon:"all-files",type:"outline"})))}X.displayName="MemberEmailField";X.defaultProps=J;var Z=X;var $=a(542);var ee=a(38);var te=a(1658);var ae=new f["b"]("member_profile");function re(e,t){return Object($["a"])(Date.now(),{timeZone:Object(g["getMemberTimezone"])(e),timeZoneOffset:Object(g["getMemberTimezoneOffset"])(e),do24hrTime:t})}var ne={member:v["b"].object,time24:v["b"].bool};var ie={member:void 0,time24:false};function se(e){var t=e.member,a=e.time24;var r=Object(d["useState"])(),n=D()(r,2),i=n[0],s=n[1];Object(te["a"])(function(){s(re(t,a))});return p.a.createElement(z,{label:ae.t("Local time"),value:i})}se.displayName="MemberLocalTimeField";se.defaultProps=ie;function oe(e){return{time24:Object(ee["h"])(e,"time24")}}var le=Object(m["connect"])(oe)(se);var ce=a(251);var ue=a(86);var de=a(59);var pe=a(414);var me=a(21);var he=a(152);var ve=new f["b"]("member_profile");var fe={channels:v["b"].arrayOf(v["b"].object.isRequired)};var be={channels:void 0};function ge(e){var t=e.channels;var a=Object(L["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(h["filter"])(t,de["b"]);if(Object(h["isEmpty"])(n))return ve.t("None");return p.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return p.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},p.a.createElement(O["a"],{href:Object(pe["a"])({channelId:e.id})},p.a.createElement(he["a"],{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:true}})))}))}ge.displayName="ChannelList";ge.defaultProps=be;function _e(e,t){var a=t.channelIds;var r=Object(h["map"])(a,function(t){return Object(me["e"])(e,t)});return{channels:r}}var ye=Object(m["connect"])(_e)(ge);function ke(e){var t=e.fetchMemberProfileExtras,a=e.member;var r=Object(d["useState"])(false),n=D()(r,2),i=n[0],s=n[1];var o=Object(d["useState"])([]),l=D()(o,2),c=l[0],u=l[1];Object(d["useEffect"])(function(){var e=void 0;Object(g["isRestricted"])(a)?e=["channels"]:Object(g["isExternal"])(a)&&(e=["shared_channels"]);if(!e)return;s(true);t({keys:e,userId:a.id,reason:"useProfileExtras"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(e.channels||e.shared_channels)}).finally(function(){s(false)})},[t,a]);return{extras:c,isLoading:i}}var Oe=new f["b"]("member_profile");var Ce={fetchMemberProfileExtras:v["b"].func,member:v["b"].object};var Ee={fetchMemberProfileExtras:h["noop"],member:void 0};function Se(e){var t=e.fetchMemberProfileExtras,a=e.member;var r=ke(t,a),n=r.extras,i=r.isLoading;var s=Object(L["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;return p.a.createElement(z,{label:Oe.t("Shared Channels"),value:i?p.a.createElement(ue["a"],{size:"small",inline:true}):p.a.createElement(ye,{channelIds:n})})}Se.displayName="MemberSharedChannelsField";Se.defaultProps=Ee;var we={fetchMemberProfileExtras:function e(){return ce["f"].apply(void 0,arguments)}};var Ie=Object(m["connect"])(null,we)(Se);var je=a(176);var Te=a(832);var Ae=a(25);var Ne=a(35);var Me=new f["b"]("member_profile");var Pe={teams:v["b"].arrayOf(v["b"].object.isRequired)};var Re={teams:void 0};function xe(e){var t=e.teams;var a=Object(L["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(h["filter"])(t,de["b"]);if(Object(h["isEmpty"])(n))return Me.t("None");return p.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return p.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(N["getTeamDisplayName"])(e))}))}xe.displayName="TeamList";xe.defaultProps=Re;function De(e,t){var a=t.teamIds;var r=Object(h["map"])(a,function(t){return Object(Ne["j"])(e,t)});return{teams:r}}var Fe=Object(m["connect"])(De)(xe);var Le=new f["b"]("member_profile");function Be(e,t){var a=Object(d["useState"])(false),r=D()(a,2),n=r[0],i=r[1];Object(d["useEffect"])(function(){if(Object(h["isEmpty"])(t))return;i(true);e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(function(){return i(false)})},[e,t]);return{isLoading:n}}var Ue={fetchAndUpsertTeamsFromAPI:v["b"].func,sharedTeamIds:v["b"].arrayOf(v["b"].string.isRequired)};var qe={fetchAndUpsertTeamsFromAPI:h["noop"],sharedTeamIds:void 0};function We(e){var t=e.fetchAndUpsertTeamsFromAPI,a=e.sharedTeamIds;var r=Be(t,a),n=r.isLoading;var i=Object(L["a"])(),s=i.featureModernProfileFlexpane;if(!s)return null;var o=n?p.a.createElement(ue["a"],{size:"small",inline:true}):p.a.createElement(Fe,{teamIds:a});return p.a.createElement(z,{label:Le.t("Shared Workspaces"),value:o})}We.displayName="MemberSharedWorkspacesField";We.defaultProps=qe;var He=p.a.memo(We,function(e,t){return Object(je["a"])(t,e,2)});function Ge(e,t){var a=t.member;var r=Object(Ae["b"])(e);return{sharedTeamIds:Object(g["getMemberWorkspacesInCommon"])(a,r)}}var Ve={fetchAndUpsertTeamsFromAPI:function e(){return Te["b"].apply(void 0,arguments)}};var Ke=Object(m["connect"])(Ge,Ve)(He);var ze=new f["b"]("member_profile");var Qe={member:v["b"].object};var Ye={member:void 0};function Je(e){var t=e.member;var a=Object(L["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(g["getMemberGuestInvitedBy"])(t);if(!n)return null;return p.a.createElement(z,{key:"invited_by",label:ze.t("Invited By"),value:p.a.createElement(E["a"],{id:n})})}Je.displayName="MemberGuestInvitedByField";Je.defaultProps=Ye;var Xe=Je;var Ze=a(196);var $e=a(209);var et=new f["b"]("member_profile");var tt={member:v["b"].object};var at={member:void 0};function rt(e){var t=e.member;var a=Object(L["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(g["getMemberGuestExpirationTs"])(t);if(!n)return null;return p.a.createElement(z,{label:et.t("Member Until"),value:et.t("{date} at {time}",{date:Object(Ze["a"])(n),time:Object($e["a"])(n)})})}rt.displayName="MemberGuestUntilField";rt.defaultProps=at;var nt=rt;var it=new f["b"]("member_profile");var st={currentMember:v["b"].object,fetchMemberProfileExtras:v["b"].func,member:v["b"].object,team:v["b"].object};var ot={currentMember:void 0,fetchMemberProfileExtras:h["noop"],member:void 0,team:void 0};function lt(e){var t=e.currentMember,a=e.fetchMemberProfileExtras,r=e.member,n=e.team;var i=ke({fetchMemberProfileExtras:a,member:r}),s=i.extras,o=i.isLoading;var l=Object(L["a"])(),c=l.featureModernProfileFlexpane;if(!c)return null;var u=o?p.a.createElement(ue["a"],{size:"small",inline:true}):p.a.createElement(ye,{channelIds:s});return p.a.createElement(z,{key:"channels",label:it.t("Channels"),value:u},Object(g["isRestricted"])(r)&&Object(g["isAdmin"])(t)&&p.a.createElement(I["c"],{tip:it.t("Manage")},p.a.createElement(j["d"],{"aria-label":it.t("Manage Guest Channels"),href:Object(N["getTeamUrl"])(n)+"admin?#restricted",icon:"filters",type:"outline"})))}lt.displayName="MemberGuestChannelsField";lt.defaultProps=ot;function ct(e){return{currentMember:Object(Ae["b"])(e)}}var ut={fetchMemberProfileExtras:function e(){return ce["f"].apply(void 0,arguments)}};var dt=Object(m["connect"])(ct,ut)(lt);a.d(t,"a",function(){return pt});var pt={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"};var mt=new f["b"]("member_profile");var ht={hasStatus:v["b"].bool,isEnterprise:v["b"].bool,member:v["b"].object,onClick:v["b"].func,openCustomStatusDialog:v["b"].func,prefDisplayEmailAddresses:v["b"].bool,team:v["b"].object,types:v["b"].arrayOf(v["b"].oneOf(Object.values(pt)).isRequired).isRequired,featureModernProfileFlexpane:v["b"].bool.isRequired};var vt={hasStatus:false,isEnterprise:false,member:void 0,onClick:h["noop"],openCustomStatusDialog:h["noop"],prefDisplayEmailAddresses:false,team:void 0};var ft=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getProfileLinkHTML",value:function e(t,a){return p.a.createElement(C["a"],{href:t,onClick:this.props.onClick,target:"_blank",title:t},a||t)}},{key:"getProfileUserFieldHTML",value:function e(t){var a=t.split(/\s*,\s*/);var r=a.map(function(e){return p.a.createElement(E["a"],{id:e})});return Object(f["i"])(r,{noConj:true,react:true})}},{key:"getVisibleTeamProfileFieldsForMember",value:function e(){var t=this;var a=this.props,r=a.member,n=a.team;var i=M(r,n).map(function(e){var a=void 0;var r=void 0;if("date"===e.type){a=Object(b["a"])(e.value);r=e.value}else if("user"===e.type)r=t.getProfileUserFieldHTML(e.value);else if("link"===e.type)r=t.getProfileLinkHTML(e.value,e.alt||e.label);else if(R(e)){var n="skype:"+e.value+"?call";r=t.getProfileLinkHTML(n,e.value)}else{a=e.alt;r=e.value}return{alt:a,id:e.id,label:e.label,value:r}});return i}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureModernProfileFlexpane,n=a.hasStatus,i=a.isEnterprise,s=a.member,o=a.onClick,l=a.prefDisplayEmailAddresses,c=a.team,u=a.types;if(!r)return null;var d=[];u.forEach(function(e){if(e===pt.EMAIL&&(l||Object(g["isSelf"])(s))){var a=Object(g["getMemberEmail"])(s);Object(P["a"])(a)&&d.push(p.a.createElement(Z,{key:"email",member:s}))}else if(e===pt.PHONE){var r=Object(g["getMemberPhone"])(s);Object(P["a"])(r)&&d.push(p.a.createElement(z,{key:"phone",label:mt.t("Phone number"),value:p.a.createElement(C["a"],{href:"tel:"+r,onClick:o},r)}))}else if(e===pt.STATUS){var u=void 0;if(n){var m=p.a.createElement(w["b"],{animated:true,className:"p-member_profile_field__status",memberId:s.id,tooltip:false});u=Object(g["isSelf"])(s)?p.a.createElement(I["c"],{tip:mt.t("Edit")},p.a.createElement(S["a"],{onClick:function e(){o();t.props.openCustomStatusDialog()}},m,p.a.createElement(w["a"],{className:"p-member_profile_field__status_expiration",memberId:s.id}))):m}else Object(g["isSelf"])(s)&&(u=p.a.createElement(O["a"],{onClick:function e(){o();t.props.openCustomStatusDialog()}},mt.t("Set a status")));u&&d.push(p.a.createElement(z,{key:"status",label:mt.t("Status"),value:u},Object(g["isSelf"])(s)&&p.a.createElement(I["c"],{tip:mt.t("Edit"),zIndex:"above_fs"},p.a.createElement(j["d"],{"aria-label":mt.t("Edit Custom Status"),onClick:function e(){o();t.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(e!==pt.TIME||Object(g["isSlackbot"])(s))if(e===pt.NAME){var h=Object(g["getMemberProfileFieldDisplayName"])(s);Object(P["a"])(h)&&d.push(p.a.createElement(z,{key:"name",label:mt.t("Display name"),value:h}))}else if(e===pt.CUSTOM){var v=t.getVisibleTeamProfileFieldsForMember();v.forEach(function(e){if(!Object(P["a"])(e.value))return;d.push(p.a.createElement(z,{key:e.id,label:e.label,value:e.alt||e.value}))})}else e===pt.SHARED_CHANNELS?Object(g["isExternal"])(s)&&d.push(p.a.createElement(Ie,{key:pt.SHARED_CHANNELS,member:s})):e===pt.SHARED_WORKSPACES?i&&d.push(p.a.createElement(Ke,{key:pt.SHARED_WORKSPACES,member:s})):e===pt.GUEST&&Object(g["isRestricted"])(s)&&d.push(p.a.createElement(Xe,{key:"guest-invited",member:s}),p.a.createElement(nt,{key:"guest-until",member:s}),p.a.createElement(dt,{key:"guest-channels",member:s,team:c}));else d.push(p.a.createElement(le,{key:"time",member:s}))});return p.a.createElement("div",null,d)}}]);return t}(d["Component"]);ft.displayName="MemberProfileFields";ft.defaultProps=vt;function bt(e,t){var a=t.member;return{hasStatus:Object(g["hasCustomStatusSet"])(a),isEnterprise:Object(y["pageNeedsEnterprise"])(e),prefDisplayEmailAddresses:Object(_["a"])(e,"display_email_addresses"),featureModernProfileFlexpane:Object(y["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var gt={openCustomStatusDialog:function e(){return k["a"].apply(void 0,arguments)}};var _t=t["b"]=Object(m["connect"])(bt,gt)(ft)},1069:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(13);var v=a.n(h);var f=["top","bottom","left","right","top-right","bottom-right","top-left","bottom-left"];var b={children:d["b"].node.isRequired,coachmarkAnchorClassNames:d["b"].string,coachmarkElement:d["b"].node,orientation:d["b"].oneOf(f).isRequired,style:d["b"].object};var g={coachmarkElement:void 0,coachmarkAnchorClassNames:void 0,style:{}};var _=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.anchorRef=m.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){this.forceUpdate()}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.coachmarkAnchorClassNames,n=t.coachmarkElement,i=t.orientation,s=t.style;var o=v()("c-coachmark-anchor",r);return m.a.createElement("div",{id:"c-coachmark-anchor",ref:this.anchorRef,className:o,style:s},a,n&&m.a.cloneElement(n,{anchorElement:this.anchorRef.current,orientation:i}))}}]);return t}(p["PureComponent"]);_.displayName="CoachmarkAnchor";_.defaultProps=g;t["b"]=_},1073:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a(12);var h=a(2);var v=a(22);var f=function e(t,a){return t+"-"+a};var b={add:function e(t,a,r){this.sections||(this.sections={});var n=f(t,a);if(this.sections[n])return;this.sections[n]=r},remove:function e(t,a){if(!this.sections)return;var r=f(t,a);if(!this.sections[r])return;this.sections[r]=null;delete this.sections[r]},get:function e(t,a){if(!this.sections)return;return this.sections[f(t,a)]}};var g=b;var _={teamId:d["b"].string.isRequired,order:d["b"].number.isRequired,component:d["b"].object.isRequired,children:d["b"].node};var y={children:null};var k=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.component,i=r.focus,s=r.blur;var o=Object(h["isFunction"])(i)&&Object(h["isFunction"])(s);if(o)return l()(a);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.teamId,r=t.order,n=t.component;g.add(a,r,n)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.teamId,r=t.order;g.remove(a,r)}},{key:"render",value:function e(){return this.props.children}}]);return t}(p["PureComponent"]);k.displayName="FocusableSection";k.defaultProps=y;var O=function e(t){return{teamId:Object(v["b"])(t)}};var C=Object(m["connect"])(O)(k);a.d(t,"a",function(){return C});a.d(t,"b",function(){return g})},1168:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(2);var v=a.n(h);var f=a(13);var b=a.n(f);var g=a(109);var _=a(27);var y=a(23);var k=a(54);var O=a(1787);var C=a.n(O);var E={className:d["b"].string,iconType:d["b"].string,label:d["b"].node.isRequired,tooltipPosition:d["b"].string,onClick:d["b"].func,ariaHasPopup:d["b"].bool,"data-qa":d["b"].string,btnRef:d["b"].object};var S={className:"",onClick:v.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0,btnRef:null};var w=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=b()("c-message_actions__button",this.props.className);return m.a.createElement(k["c"],{tip:this.props.label,position:this.props.tooltipPosition,delay:k["b"]},m.a.createElement(_["c"],{className:t,onClick:this.props.onClick,"aria-label":this.props.label,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef},m.a.createElement(y["b"],{type:this.props.iconType})))}}]);return t}(p["PureComponent"]);w.displayName="MessageActionButton";w.defaultProps=S;t["a"]=Object(g["pure"])(w)},1192:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(122);var c=a(442);var u=a(1534);var d=a(94);var p=a(577);var m=a(3);var h=a.n(m);var v=a(2);var f=a.n(v);var b=a(14);var g=a(63);var _=a(1072);var y=a(338);var k=a(899);var O=a(38);var C=a(129);var E=a(21);var S=a(11);var w=a(233);var I=a(460);var j=a(236);var T=a(25);var A=a(9);var N=a(756);var M=a(82);var P=a(242);var R=a(235);var x=a(39);var D=a(409);var F=a(548);var L=a(17);var B=a(32);var U=a(811);var q=a(765);var W=Object(L["b"])("Ensure channels with drafts exist in our model",function(e,t){var a=t();var r=Object(b["a"])({state:a,label:"DRAFTS"});var n=Object(B["a"])()?Object(U["a"])(a):Object(q["e"])();if(Object(v["isEmpty"])(n)){r.info("There are no channels with drafts");return}r.info("Ensuring we have channel objects for all channels with drafts");n.forEach(function(e){Object(E["e"])(a,e)})});W.meta={name:"ensureDraftChannelObjects",key:"actionsEnsureDraftChannelObjectsEnsureDraftChannelObjects",description:"Ensure channels with drafts exist in our model"};W.propTypes=null;var H=W;var G=a(22);var V=a(851);var K=a(200);var z=a(219);var Q=a(816);var Y=a(575);var J=a(421);var X=a(427);var Z=a(176);var $=a(817);var ee=a(26);var te=a.n(ee);var ae=a(213);var re=a(15);var ne=a(35);var ie=a(28);var se=Object(re["b"])(function(e){var t=Object(ne["d"])(e);if(!Object(ie["isPaidTeam"])(t))return"alphabetical";return Object(O["h"])(e,"channel_sort")});se.meta={name:"getChannelSortPref",key:"prefsStoreUserDerivedSelectorsGetChannelSortPrefGetChannelSortPref"};var oe=se;var le=a(4500);var ce=a(68);var ue=a(16);var de=a(4789);var pe=a(6);var me=a(852);var he=a(57);var ve=["drafts","starred","sharedChannels","channels","orgWideChannels","ims","apps"];var fe={drafts:{channelsOrdered:[],hasHeading:true},starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var be=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"];var ge=f.a.invert(be);var _e={default:be.map(function(){return[]}),muted:be.map(function(){return[]}),suggested:be.map(function(){return[]})};var ye=function e(t){return t&&t.has_draft};var ke=function e(t){var a=t.channel,r=t.members,n=t.isCurrentlySelected,i=t.isMuted,s=t.shouldHideReadChannels,o=t.shouldHideReadChannelsUnlessStarred,l=t.featureReactMessages,c=t.hasDraft,u=t.teamId,d=t.isSuggested,p=t.showAppDmSuggestions;if(Object(S["isFromAnotherTeam"])(a))return false;if(Object(S["isUnknownOrNonExistent"])(a))return false;if(n)return true;if(Object(S["isArchived"])(a))return false;if(Object(S["isImAndIsMemberDeleted"])(a,r[Object(S["getMemberIdFromIm"])(a)]))return false;if(!Object(S["isMemberOfChannel"])(a)&&!d)return false;if((Object(S["isIm"])(a)||Object(S["isMpim"])(a))&&!Object(S["isOpen"])(a)&&Object(S["isRead"])(a)&&!c)return false;var m={members:r,selfTeamIds:{teamId:u},dangerouslyOverrideCreateSelectorSanityCheck:true};if(Object(S["isIm"])(a)){var h=[Object(S["getMemberIdFromIm"])(a)];h[0]||Object(b["a"])({teamId:u}).error("SIDEBAR-SECTIONS","IM "+a.id+" is missing its associated user");if(!Object(ue["haveMembersForIds"])(m,h)){u&&Object(T["h"])(m,h);return false}}if(Object(S["isMpim"])(a)){var v=Object(S["getMemberIdsFromMpim"])(a);v&&v.length||Object(b["a"])({teamId:u}).error("SIDEBAR-SECTIONS","MPIM "+a.id+" is missing its associated members");if(!Object(ue["haveMembersForIds"])(m,v)){u&&Object(T["h"])(m,v);return false}}if(o&&Object(S["isStarred"])(a))return true;if(c)return true;if(i&&Object(S["shouldShowWithoutUnreads"])(a)&&!l)return true;if(p&&s&&Object(S["isAppChannel"])(a,r)&&Object(S["isStarred"])(a)&&Object(S["isRead"])(a))return false;if(p&&Object(S["isAppChannel"])(a,r))return true;if((o||s)&&Object(S["isRead"])(a))return false;return true};var Oe={};var Ce={};var Ee={};var Se=function e(t){var a=t.channel,r=t.isApp,n=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels,l=t.draftChannelIds,c=t.featureChannelSidebarDraftsSection,u=t.currentlySelectedId,d=t.teamId;var p=Object(o["d"])(d);if(c&&(f.a.includes(l,a.id)||ye(a))&&(Object(A["isFeatureEnabled"])(p,"feature_announce_only_websocket")||Object(ce["s"])(p,a.id))){u!==a.id||f.a.includes(Ce[d],a.id)||Oe[d]||(Ee[d]=a.id);Ee[d]&&u!==Ee[d]&&delete Ee[d];if(a.id!==Ee[d])return"drafts"}if(Object(S["isStarred"])(a))return"starred";if(Object(S["isSharedPublicOrPrivateChannel"])(a)&&i)return"sharedChannels";if(Object(S["isOrgGlobalSharedPublicOrPrivateChannel"])(a)&&!Object(S["isPrivateChannel"])(a)&&s)return"orgWideChannels";if(r&&n)return"apps";if(Object(S["isIm"])(a)||Object(S["isMpim"])(a))return"ims";return"channels"};var we=function e(t){var a=t.channel,r=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(S["isSlackbot"])(a))return ge.slackbot;if(Object(S["isUserId"])(a,r))return ge.you;if(Object(S["isIm"])(a)||Object(S["isMpim"])(a))return s?ge.imsMentions:ge.ims;if(n&&Object(S["isPrivateChannel"])(a))return s?ge.privateMentions:ge.private;if(i&&Object(S["isSharedPublicOrPrivateChannel"])(a))return s?ge.sharedMentions:ge.shared;return s?ge.defaultMentions:ge.default};var Ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,r=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.featureReactMessages,l=t.draftChannelIds,c=t.teamId,u=t.suggestedChannelIds,d=t.showAppDmSuggestions;var p="hide_read_channels"===s;var m="hide_read_channels_unless_starred"===s;var h=[];var v=false;var f=false;var b=false;var g=Object.keys(a);for(var _=0;_<g.length;_+=1){var y=a[g[_]];var k=-1!==l.indexOf(y.id);Object(B["a"])()||(k=ye(y));var O=ke({channel:y,members:i,isCurrentlySelected:r===y.id,isMuted:!!n[y.id],shouldHideReadChannels:p,shouldHideReadChannelsUnlessStarred:m,featureReactMessages:o,hasDraft:k,teamId:c,isSuggested:-1!==u.indexOf(y.id),showAppDmSuggestions:d});O&&h.push(y);v||(v=Object(S["isSharedPublicOrPrivateChannel"])(y)&&(Object(S["isMemberOfChannel"])(y)||r===y.id));f||(f=Object(S["isOrgGlobalSharedPublicOrPrivateChannel"])(y)&&!Object(S["isPrivateChannel"])(y));b||(b=Object(S["isStarred"])(y))}return{channelsVisible:h,belongsToOrPreviewingAnySharedChannels:v,belongsToAnyOrgChannels:f,hasAStarredChannel:b}};var je=Object(me["a"])(Ie,2);var Te=function e(t){var a=t.channelsSorted,r=t.belongsToOrPreviewingAnySharedChannels,n=t.members,i=t.mutedChannels,s=t.draftChannelIds,o=t.channelDrafts,l=t.composerDrafts,c=t.suggestedChannelIds,u=t.currentUserId,d=t.currentlySelectedId,p=t.teamId,m=t.sortPref,v=t.isAppSpaceEnabled,b=t.shouldSeparateSharedChannels,g=t.shouldSeparateOrgWideChannels,_=t.shouldSeparatePrivateChannels,y=t.dismissedAppMembers,k=t.featureChannelSidebarDraftsSection,O=t.featureReactMessages,C=t.featureSilenceAppDMs,E=t.featureComposeFlow,w=t.showAppDmSuggestions;var I={};var j=[];var T=ve.concat();T.forEach(function(e){I[e]=h()({},fe[e]);I[e].channelsOrdered=f.a.cloneDeep(_e)});var A=[];var N=[];a.forEach(function(e){Object(S["isIm"])(e)&&A.push(Object(S["getMemberIdFromIm"])(e));var t=Object(S["isAppChannel"])(e,n);var a=Se({channel:e,isApp:t,isAppSpaceEnabled:v,shouldSeparateSharedChannels:b,shouldSeparateOrgWideChannels:g,draftChannelIds:s,featureChannelSidebarDraftsSection:k,currentlySelectedId:d,teamId:p});t&&j.push(e);var r=!!i[e.id];var o=Object(S["getBadgeCountWithMuted"])(e,r,O,C,Object(S["isAppChannel"])({channel:e,members:n}));var l=o>0;var h=we({channel:e,currentUserId:u,shouldSeparatePrivateChannels:_,shouldSeparateSharedChannels:b,shouldBumpMention:"priority"===m&&l});var f=void 0;f=-1!==c.indexOf(e.id)?"suggested":r?"muted":"default";var y=I[a].channelsOrdered[f][h];y.push(e.id);Object(B["a"])()||ye(e)&&N.push(e.id)});var M={};c.forEach(function(e,t){M[e]=t});I.channels.channelsOrdered.suggested.forEach(function(e){e.sort(function(e,t){return M[e]>M[t]?1:-1})});Ce[p]=[].concat(te()(s),N);var P=f.a.mapValues(I,function(e){return h()({},e,{channelsOrdered:f.a.flatten([].concat(te()(e.channelsOrdered.default),te()(e.channelsOrdered.muted),te()(e.channelsOrdered.suggested)))})});if(E&&(!f.a.isEmpty(l)||!f.a.isEmpty(o))){var R=[];f.a.forEach(o,function(e,t){var a=Object(le["a"])(t),r=a.threadTs;r&&R.push({id:"thread_draft-"+t,lastEditedTs:e.lastEditedTs})});f.a.forEach(P.drafts.channelsOrdered,function(e){e!==Ee[p]&&R.push({id:e,lastEditedTs:o[e]&&o[e].lastEditedTs})});f.a.forEach(l,function(e){R.push({id:"drafts-"+e.id,lastEditedTs:e.lastEditedTs})});var x=Object(de["i"])(R);P.drafts.channelsOrdered=x.map(function(e){return e.id})}if(!k||P.drafts.channelsOrdered.length<1){delete P.drafts;f.a.remove(T,function(e){return"drafts"===e})}if(P.starred.channelsOrdered.length<1){delete P.starred;f.a.remove(T,function(e){return"starred"===e})}if(!b||!r){delete P.sharedChannels;f.a.remove(T,function(e){return"sharedChannels"===e})}if(!g||P.orgWideChannels.channelsOrdered.length<1){delete P.orgWideChannels;f.a.remove(T,function(e){return"orgWideChannels"===e})}if(v)w&&(P.apps={hasHeading:true,channelsOrdered:[],membersOrdered:Ae({members:n,appChannels:j,flatSidebarSections:P,dismissedAppMembers:y})});else{delete P.apps;f.a.remove(T,function(e){return"apps"===e})}return{sidebarSectionsOrdered:T,sidebarSections:P,idsNeedingPresenceSubscription:A}};function Ae(e){var t=e.members,a=e.appChannels,r=e.flatSidebarSections,n=e.dismissedAppMembers,i=e.maxSuggestionsCount,s=void 0===i?10:i;var o=f.a.keyBy(a,S["getMemberIdFromIm"]);var l=a.reduce(function(e,t){r.starred&&-1!==r.starred.channelsOrdered.indexOf(t.id)||e.push(t.id);return e},[]);var c=[];var u=s-l.length;if(u>0){var d=Object.values(t).reduce(function(e,t){var a=t.is_bot,r=t.id;!a||o[r]||n[r]||Object(ue["isDeleted"])(t)||e.push(t);return e},[]);d.sort(function(e,t){return Object(pe["r"])(e.name,t.name)});c=d.map(function(e){return e.id}).slice(0,u)}return l.concat(c)}var Ne=Object(me["a"])(Te,3);var Me=function e(t){return Object(O["h"])(t,"sidebar_behavior")};var Pe=function e(t){return Object(O["h"])(t,"separate_private_channels")};var Re=function e(t){return!Object(A["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")&&Object(O["h"])(t,"separate_shared_channels")};var xe=function e(t){return Object(O["h"])(t,"ent_org_wide_channels_sidebar")};var De=function e(t){return Object(A["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section")};var Fe=function e(t){var a=Object(G["b"])(t);var r=Object(E["b"])(t);var n=Object(w["getMutedChannels"])(t);var i=Object(T["a"])(t);var s=Object(U["a"])(t);var o=Object(U["c"])(t);var l=Object(U["e"])(t);var c=Object(S["getSuggestedChannels"])(t);var u=Object(M["a"])(t);var p=Object(A["getCurrentUserId"])(t);var m=Me(t);var h=Pe(t);var v=Re(t);var f=xe(t);var b=Object(O["d"])(t);var g=Object(ae["isAppSpaceEnabled"])(t);var _=Object(A["shouldUseReactMessages"])(t);var y=Object(A["shouldSilenceAppDMs"])(t);var k=De(t);var C=Object(de["d"])(t);var I="variant"===Object(d["getGroupForUser"])(t,"show_more_apps_in_sidebar_new_and_free");void 0===Oe[a]?Oe[a]=true:Oe[a]&&(Oe[a]=false);var j=je({channels:r,currentlySelectedId:u,mutedChannels:n,members:i,sidebarBehaviorPref:m,featureReactMessages:_,draftChannelIds:s,teamId:a,suggestedChannelIds:c,showAppDmSuggestions:I}),N=j.channelsVisible,P=j.belongsToOrPreviewingAnySharedChannels;var R={};N.forEach(function(e){if(!e||!e.id)return;R[e.id]=Object(S["getDisplayNameForChannel"])(t,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})});var x=function e(t,a){return Object(pe["r"])(t&&R[t.id],a&&R[a.id])};var D=function e(t,a){var r=t.priority||-1;var n=a.priority||-1;if(r===n)return x(t,a);return n-r};var F=function e(t){if("priority"===t)return D;return x};var L=oe(t);var B=N.sort(F(L));return Ne({channelsSorted:B,belongsToOrPreviewingAnySharedChannels:P,members:i,mutedChannels:n,draftChannelIds:s,channelDrafts:o,composerDrafts:l,suggestedChannelIds:c,currentUserId:p,currentlySelectedId:u,teamId:a,sortPref:L,isAppSpaceEnabled:g,shouldSeparateSharedChannels:v,shouldSeparateOrgWideChannels:f,shouldSeparatePrivateChannels:h,dismissedAppMembers:b,featureChannelSidebarDraftsSection:k,featureReactMessages:_,featureSilenceAppDMs:y,featureComposeFlow:C,showAppDmSuggestions:I})};var Le=Fe;Object(he["exportToGlobalDebugger"])("channelSidebar",{getDraftChannelToWithhold:function e(){return Ee}});var Be=a(163);var Ue=a(151);var qe=12;var We=18;var He=26;var Ge=52;var Ve=36;var Ke={id:null,type:"topPadding",height:qe,key:null};var ze={id:null,type:"spacer",height:We,key:null};var Qe={id:"Vquick_switcher",type:"quickswitcherButton",height:Ge,key:"Vquick_switcher"};var Ye={id:"Vall_threads",type:"allThreadsLink",height:He,key:"Vall_threads"};var Je={id:"Vsearch",type:"searchLink",height:He,key:"Vsearch"};var Xe={id:null,type:"sectionHeading",name:"",height:He};var Ze={id:null,type:"folderHeading",name:"",height:He};var $e={id:null,type:"channel",index:null,height:He};var et=h()({},$e,{type:"composer_draft"});var tt=h()({},$e,{type:"thread_draft"});var at={id:null,type:"appDmSuggestion",index:null,height:He};var rt={id:null,type:"addAChannelLink",dim:false,height:He,key:"addAChannelLink"};var nt={id:null,type:"invitePeopleLink",dim:false,height:He,key:"invitePeopleLink"};var it={id:null,type:"installAppsLink",dim:false,height:He,key:"installAppsLink"};var st={id:null,type:"appSuggestionLinks",dim:false,height:He,key:"appSuggestionLinks"};var ot={id:null,type:"upgradeSlackCTA",height:He,key:"upgradeSlackCTA"};var lt=h()({},ot,{height:Ve});var ct={id:null,type:"emptyState",index:null,height:He,key:null};var ut=Object(Be["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackCTA},function(e){return e&&e.upgradeSlackCTAVersion},function(e){return e&&e.hasThreadsLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";var l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];var c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[];var d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};var p=arguments.length>12&&void 0!==arguments[12]&&arguments[12];var m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[];var f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[];var b=[];var g={};var _=0;e?b.push(h()({},Qe,{scrollTop:_,scrollBottom:_+=Qe.height})):b.push(h()({},Ke,{scrollTop:_,scrollBottom:_+=Ke.height,key:"top-padding"}));var y=f.find(function(e){return"Pwelcome"===e.id});y&&b.push({id:y.id,key:y.id,type:"pageLink",height:He,scrollTop:_,scrollBottom:_+=He});var k=f.find(function(e){return"Phome"===e.id});k&&b.push({id:k.id,key:k.id,type:"pageLink",height:He,scrollTop:_,scrollBottom:_+=He});t&&b.push({id:"Punreads",type:"pageLink",height:He,scrollTop:_,scrollBottom:_+=He,key:"Punreads"});l&&b.push(h()({},Ye,{scrollTop:_,scrollBottom:_+=Ye.height}));a&&b.push(h()({},Je,{scrollTop:_,scrollBottom:_+=Je.height}));f.filter(function(e){return-1===["Punreads","Pwelcome","Phome","Pcomposer","Pdrafts"].indexOf(e.id)}).forEach(function(e){b.push({id:e.id,key:e.id,type:"pageLink",height:He,scrollTop:_,scrollBottom:_+=He})});var O=0;p&&m.forEach(function(e){"folderHeading"!==Object(v["last"])(b).type&&b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-"+e.name}));b.push(h()({},Ze,{id:e.name,name:e.name,key:"folder-"+e.name}));e.channelIds.forEach(function(t){var a=false;u.forEach(function(e){var r=d[e]||{};var n=r.channelsOrdered||[];a=a||n.filter(function(e){return e===t}).length>0});if(!a)return;if(!e.isCollapsed){b.push(h()({},$e,{id:t,index:O,scrollTop:_,scrollBottom:_+=$e.height,sectionName:e.name,key:t}));O+=1}g[t]=true})});u.forEach(function(e){var t=d[e]||{};var a=t.channelsOrdered||[];("sectionHeading"!==Object(v["last"])(b).type||a.length>0)&&b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"sectionHeading-spacer-"+e}));t.hasHeading&&b.push(h()({},Xe,{name:e,scrollTop:_,scrollBottom:_+=Xe.height,sectionName:e,key:"sectionHeading-"+e}));c&&t.hasHeading&&0===a.length&&b.push(h()({},ct,{name:e,scrollTop:_,scrollBottom:_+=ct.height,key:"emptyState-"+e}));t.channelsOrdered.forEach(function(t){if(g[t])return;var a=void 0;var r=void 0;var n=void 0;if(Object(v["startsWith"])(t,"drafts-")){r=et;a=t.replace(/^drafts-/,"")}else if(Object(v["startsWith"])(t,"thread_draft-")){r=tt;a=t.replace(/^thread_draft-/,"");var i=Object(le["a"])(a),s=i.channelId,o=i.threadTs;n={channelId:s,threadTs:o}}else{r=$e;a=t}b.push(h()({},r,{id:a,index:O,scrollTop:_,scrollBottom:_+=r.height,sectionName:e,key:a,params:n}));O+=1});if("channels"===e&&r){b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-addAChannelLink"}));b.push(h()({},rt,{dim:true,height:rt.height,scrollTop:_,scrollBottom:_+=rt.height}))}if("ims"===e&&n){b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-invite-people"}));b.push(h()({},nt,{dim:"dim"===n,height:nt.height,scrollTop:_,scrollBottom:_+=nt.height}))}if("apps"===e){t.membersOrdered&&t.membersOrdered.forEach(function(t){var a=Object(Ue["a"])(t)?at:$e;b.push(h()({},a,{id:t,index:O,scrollTop:_,scrollBottom:_+=a.height,sectionName:e,key:t}));O+=1});t.membersOrdered&&t.membersOrdered.length>0&&b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-apps"}));if(Number.isFinite(i)&&i>0){var s=i*st.height;b.push(h()({},st,{height:s,scrollTop:_,scrollBottom:_+=s}))}b.push(h()({},it,{height:it.height,scrollTop:_,scrollBottom:_+=it.height}))}});if(s&&o){b.push(h()({},ct,{scrollTop:_,scrollBottom:_+=ct.height,key:"upgrade-slack-cta-empty-state-1"}));var C="button"===o?lt:ot;b.push(h()({},C,{height:C.height,scrollTop:_,scrollBottom:_+=C.height}));b.push(h()({},ct,{scrollTop:_,scrollBottom:_+=ct.height,key:"upgrade-slack-cta-empty-state-2"}))}b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-footer-1"}));b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height,key:"spacer-footer-2"}));return{rows:b,rowsMap:Object(v["keyBy"])(b,"id"),rowIds:Object(v["map"])(b,"id")}});var dt=ut;var pt=a(1324);var mt=new pe["b"]("channel_sidebar");var ht=function e(t,a){var r=Object(y["getAppSuggestionPrompt"])(t,a);return Object(pt["d"])(r)};var vt=function e(t,a){var r=Object(y["getAppSuggestionPrompt"])(t,a);return Object(pt["a"])(r)};var ft=function e(t,a){var r=Object(A["isFeatureEnabled"])(t,"feature_app_prompts_connect_refactor");var n=Object(y["getAppSuggestionPrompt"])(t,a);var i=Object(pt["c"])(n);var s=Object(pt["e"])(n);var o=ht(t,a);var l=Object(ne["d"])(t);if(!i||!s)return{};var c="";var u=Object(pt["b"])(n)||"";if(r&&!o&&u){c=u;c.startsWith("/")&&(c=Object(ie["getTeamUrl"])(l,c))}else"ocal"!==a||o?"dropbox"!==a||o||(c="https://www.dropbox.com/landing/dropbox_slack"):c=Object(ie["getTeamUrl"])(l,"/interop/ocalapp/install");return{appId:i,isInstall:o,href:c||Object(ie["getTeamUrl"])(l,"/apps/"+i),text:o?mt.t("Install {name}",{name:s}):mt.t("Connect {name}",{name:s}),label:mt.t("Dismiss {name} suggestion",{name:s}),dismissKey:o?a+"_install_prompt_dismissed":a+"_connect_prompt_dismissed",clogUiElement:o?"app_install_prompt":"app_connect_prompt"}};var bt=function e(t){return Object(y["getEnabledAppSuggestionPromptsKeyList"])(t).length};var gt=a(45);function _t(e){var t=Object(ne["d"])(e);var a=Object(T["b"])(e);var r=Object(ue["getMemberEmail"])(a);var n=Object(gt["isAppStoreBuild"])();var i=Object(ie["isOnFreePlan"])(t);var s=Object(ue["isAdmin"])(a);var o=!/@(gmail|yahoo|aol)\.com$/.exec(r)&&!/\.edu$/.exec(r);return!n&&i&&o&&s}var yt=a(5);var kt=a.n(yt);var Ot=a(4);var Ct=a.n(Ot);var Et=a(7);var St=a.n(Et);var wt=a(8);var It=a.n(wt);var jt=a(0);var Tt=a(13);var At=a.n(Tt);var Nt=a(55);var Mt=a(210);var Pt=a(1536);var Rt=a(486);var xt=a(496);var Dt=a(187);var Ft=a(651);var Lt=a(223);var Bt=a(515);var Ut=a(1692);var qt=a(33);var Wt=a(102);var Ht=a(23);var Gt=a(27);var Vt=a(85);var Kt=a(299);var zt=a(3141);var Qt=new pe["b"]("coachmarks");var Yt=150;var Jt=-500;var Xt={children:jt["b"].element,className:jt["b"].string,position:jt["b"].string,delay:jt["b"].number,content:jt["b"].oneOfType([jt["b"].node,jt["b"].func]),zIndex:jt["b"].oneOf(["above_fs","fs","menu","below_menu"]),onContinue:jt["b"].func,onShow:jt["b"].func,onSkip:jt["b"].func,hasCloseButton:jt["b"].bool,hasSkipLink:jt["b"].bool,hasSkipButton:jt["b"].bool,skipButtonText:jt["b"].string,continueButtonText:jt["b"].string,skipLinkPre:jt["b"].string,skipLinkText:jt["b"].string,title:jt["b"].node,shouldShow:jt["b"].oneOfType([jt["b"].func,jt["b"].bool])};var Zt={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:v["noop"],onShow:v["noop"],onSkip:v["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:false};var $t=function(e){It()(t,e);function t(){kt()(this,t);var e=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.containClickEvents=e.containClickEvents.bind(e);e.onResize=Object(v["debounce"])(e.measureContentsAndSetState.bind(e),Yt,{maxWait:Yt});return e}Ct()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"containClickEvents",value:function e(t){t.stopPropagation()}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(Vt["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var a=Object(v["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(a){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return n.a.createElement(Gt["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":Qt.t("Close")},n.a.createElement(Ht["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return n.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return n.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre||Qt.t("Done?");var a=this.props.skipLinkText||Qt.t("Click here to skip");return n.a.createElement("div",{className:"p-coachmark__skip_link"},n.a.createElement("span",null,t),t&&" ",n.a.createElement(Gt["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},a))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return n.a.createElement(Gt["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":At()("p-coachmark__footer","margin_top_100");var a=this.props.continueButtonText||Qt.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return n.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),n.a.createElement(Gt["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},a))}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,l=s.contentsRect;var c=At()("p-coachmark","p-coachmark--"+r,this.props.className);var u=o&&n.a.createElement(Kt["a"],{isOpen:o,position:r,targetBounds:l,allowanceX:Jt,allowanceY:Jt,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},n.a.createElement("div",{className:c,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},n.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return n.a.cloneElement(a,{ref:this.setCoachmarkedContentRef},[].concat(te()(n.a.Children.toArray(a.props.children)),[u]))}}]);return t}(r["PureComponent"]);$t.displayName="DeprecatedCoachmark";$t.defaultProps=Zt;var ea=$t;var ta=ea;var aa=a(781);var ra=a(1912);var na=new pe["b"]("channel_sidebar");var ia={coachmarkState:jt["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:jt["b"].func,setUserPrefByApi:jt["b"].func,maybeShowQuickSwitcher:jt["b"].func,clogger:jt["b"].object.isRequired,openFromQuickSwitcherCmd:jt["b"].func,historyNavigationEnabled:jt["b"].bool,useHistoryNavigation:jt["b"].bool};var sa={coachmarkState:void 0,setJumperCoachmarkState:v["noop"],setUserPrefByApi:v["noop"],maybeShowQuickSwitcher:v["noop"],openFromQuickSwitcherCmd:v["noop"],historyNavigationEnabled:false,useHistoryNavigation:false};var oa=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.hideCoachmark=a.hideCoachmark.bind(a);a.hideButton=a.hideButton.bind(a);a.onShowContinue=a.onShowContinue.bind(a);a.onShowSkip=a.onShowSkip.bind(a);a.onHideContinue=a.onHideContinue.bind(a);a.onHideSkip=a.onHideSkip.bind(a);a.onButtonClick=a.onButtonClick.bind(a);return a}Ct()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){this.props.openFromQuickSwitcherCmd({key:"button"})}},{key:"onPrimaryAction",value:function e(){this.onButtonClick()}},{key:"hasPrimaryAction",value:function e(){return true}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[n];r.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var a={SHOW:{title:na.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,a=e.key;if("sparkles"===t)return n.a.createElement(Wt["b"],{key:a,text:":sparkles:",emojiSize:Wt["a"].MEDIUM});return null}),content:na.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(qt["isMac"])()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:na.t("Hide the sidebar button"),continueButtonText:na.t("OK")},HIDE:{title:na.t("You\u2019re a pro at keyboard shortcuts"),content:na.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(qt["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:na.t("No thanks, I like the button"),continueButtonText:na.t("Hide Button")}};var r={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return n.a.createElement(ta,h()({},r,a.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return n.a.createElement(ta,h()({},r,a.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=this.props,a=t.historyNavigationEnabled,r=t.useHistoryNavigation;var i=n.a.createElement(Gt["c"],{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":na.t("Open the Quick Switcher to jump to a conversation.")},n.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},n.a.createElement(Ht["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),na.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!r&&n.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(qt["isMac"])()?"\u2318K":"Ctrl+K"));return a?i:this.maybeRenderCoachmark(i)}}]);return t}(r["Component"]);oa.displayName="QuickswitcherButton";oa.defaultProps=sa;var la=function e(t){return{coachmarkState:Object(y["getJumperCoachmarkState"])(t),clogger:Object(x["a"])({state:t}),historyNavigationEnabled:Object(Q["a"])(t),useHistoryNavigation:Object(Q["b"])(t)}};var ca=function e(t){return{setJumperCoachmarkState:function e(){return t(y["setJumperCoachmarkState"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(C["d"].apply(void 0,arguments))},maybeShowQuickSwitcher:function e(){return t(Ut["a"].apply(void 0,arguments))},openFromQuickSwitcherCmd:function e(){return t(aa["h"].apply(void 0,arguments))}}};var ua=Object(i["connect"])(la,ca)(oa);var da=a(1406);var pa=a(1323);var ma=a(1057);var ha={iconType:jt["b"].string.isRequired,onClick:jt["b"].func.isRequired,isDisabled:jt["b"].bool.isRequired,tooltip:jt["b"].string,ariaLabel:jt["b"].string,className:jt["b"].string};var va={tooltip:void 0,ariaLabel:void 0,className:void 0};var fa=function e(t){var a=t.iconType,r=t.onClick,i=t.isDisabled,s=t.tooltip,o=t.ariaLabel,l=t.className;var c=At()("p-channel_sidebar__history_button",l,{"p-channel_sidebar__history_button--disabled":i});return n.a.createElement(ma["c"],{tip:s,position:"bottom",delay:ma["a"]},n.a.createElement(Gt["c"],{className:c,onClick:r,"aria-label":o,"aria-disabled":i,tabIndex:i?-1:void 0},n.a.createElement(Ht["b"],{type:a})))};fa.displayName="HistoryButton";fa.defaultProps=va;var ba=fa;var ga=new pe["b"]("navigation");var _a={primaryView:jt["b"].string.isRequired,triggerNavigateBack:jt["b"].func.isRequired,triggerNavigateForward:jt["b"].func.isRequired,historyNavigationEnabled:jt["b"].bool};var ya={historyNavigationEnabled:false};var ka=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);a.onForwardClick=a.onForwardClick.bind(a);return a}Ct()(t,[{key:"componentDidMount",value:function e(){Object(pa["c"])()}},{key:"componentDidUpdate",value:function e(t){if(this.props.primaryView===t.primaryView)return;Object(pa["c"])()}},{key:"onBackClick",value:function e(){this.props.triggerNavigateBack({fromKeyboardShortcut:false})}},{key:"onForwardClick",value:function e(){this.props.triggerNavigateForward({fromKeyboardShortcut:false})}},{key:"render",value:function e(){var t=this.props.historyNavigationEnabled;if(!t)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement(ba,{onClick:this.onBackClick,tooltip:ga.t("Previous conversation"),ariaLabel:ga.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:Object(pa["a"])()}),n.a.createElement(ba,{onClick:this.onForwardClick,tooltip:ga.t("Next conversation"),ariaLabel:ga.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:Object(pa["b"])()}))}}]);return t}(r["Component"]);ka.displayName="History";ka.defaultProps=ya;var Oa=function e(t){return{historyNavigationEnabled:Object(Q["a"])(t),primaryView:Object(M["a"])(t)}};var Ca=function e(t){return{triggerNavigateForward:function e(a){return t(Object(da["b"])(a))},triggerNavigateBack:function e(a){return t(Object(da["a"])(a))}}};var Ea=Object(i["connect"])(Oa,Ca,null,{pure:false})(ka);var Sa={useHistoryNavigation:jt["b"].bool};var wa={useHistoryNavigation:false};var Ia=function e(t){return n.a.createElement("div",{className:"p-channel_sidebar__navigation_bar"},n.a.createElement(ua,null),t.useHistoryNavigation&&n.a.createElement(Ea,null))};Ia.displayName="NavigationBar";Ia.defaultProps=wa;var ja=Ia;var Ta=a(31);var Aa=a(4647);var Na=a(853);var Ma=a(1034);var Pa=a(1049);var Ra=a(656);var xa=a(810);var Da=a(1206);var Fa=a(1193);var La=a(1194);var Ba=a(48);var Ua=a.n(Ba);var qa=a(189);var Wa=a(280);var Ha=a(296);var Ga=a(54);var Va=a(1570);var Ka=a(234);var za={children:jt["b"].node.isRequired,getTemplate:jt["b"].func.isRequired,overrideDefaultMenu:jt["b"].bool};var Qa={overrideDefaultMenu:false};var Ya=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDesktopContextMenu=a.onDesktopContextMenu.bind(a);return a}Ct()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this.props,a=t.getTemplate,r=t.overrideDefaultMenu;var n=a().map(function(e){return h()({},e,{id:Object(Ka["a"])()})});Object(gt["showContextMenu"])(n,r)}},{key:"render",value:function e(){var t=this;if(!Object(B["a"])()){Object(b["b"])().error("Context menus are only supported in Sonic");return this.props.children}if(gt["isDesktop"]){var a=n.a.Children.map(this.props.children,function(e){return n.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu})});return a[0]}return this.props.children}}]);return t}(r["PureComponent"]);Ya.displayName="ContextMenuTrigger";var Ja=Ya;Ya.defaultProps=Qa;var Xa=a(18);var Za={};function $a(e,t){var a=Za[e.teamId];if(!a){a={};Za[e.teamId]=a}return function(){var r=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});if(!a[r]){a[r]=true;e.track.apply(e,arguments)}}}var er=Object(v["memoize"])($a);var tr={clearCache:function e(){Object.keys(Za).forEach(function(e){Za[e]={}})}};var ar=new pe["b"]("channel_sidebar");var rr={id:jt["b"].string.isRequired,appId:jt["b"].string.isRequired,startImByMemberId:jt["b"].func,name:jt["b"].string.isRequired,teamDomain:jt["b"].string.isRequired,dismissInstalledAppDmSuggestion:jt["b"].func,featureShowInstalledAppDmSuggestions:jt["b"].bool,featureSidebarContextMenu:jt["b"].bool.isRequired,clogger:jt["b"].object};var nr={selectItem:v["noop"],dismissInstalledAppDmSuggestion:v["noop"],featureShowInstalledAppDmSuggestions:false,clogger:{track:v["noop"]}};var ir=function e(t){var a=t.eventId,r=t.payload;return a+"-"+r.contexts.ui_context.action+"-"+r.contexts.core.app_id};var sr=function e(t){var a=t.action,r=t.appId;return{contexts:{ui_context:{action:a},core:{app_id:r}}}};function or(e){var t=e.id,a=e.name,i=e.appId,s=e.teamDomain,o=e.startImByMemberId,l=e.dismissInstalledAppDmSuggestion,c=e.featureShowInstalledAppDmSuggestions,u=e.featureSidebarContextMenu,d=e.clogger;Object(r["useEffect"])(function(){var e=er(d,ir);e(Xa["l"].APP_SIDEBAR,sr({action:Xa["w"].IMPRESSION,appId:i}))});var p=Object(r["useState"])(false),m=Ua()(p,2),h=m[0],v=m[1];var f=Object(r["useCallback"])(function(e){e.preventDefault();d.track(Xa["l"].APP_SIDEBAR,sr({action:Xa["w"].CLICK,appId:i}));o({memberId:t})},[d,i,o,t]);var b=Object(r["useCallback"])(function(){return l({memberId:t,appId:i})},[i,l,t]);var g=Object(r["useCallback"])(function(){return c?[{label:ar.t("Dismiss app"),click:b}]:[]},[c,b]);var _=Object(r["useCallback"])(function(e){e.target.offsetWidth<e.target.scrollWidth&&v(true)},[v]);if(!c)return null;var y=n.a.createElement(Gt["c"],{onClick:b,className:"p-channel_sidebar__close","aria-label":ar.t("Dismiss app")},n.a.createElement(Ht["a"],{type:"times-circle-medium"}));var k=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(qa["a"],{href:Object(S["constructAbsoluteChannelPermalink"])({channelId:t,teamDomain:s}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--im p-channel_sidebar__channel--suggested",onClick:f,"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-id":t,draggable:false,"data-drag-type":"channel","data-drag-id":t},n.a.createElement(Wa["a"],{memberId:t,enablePresenceSubscriptions:false,inline:false}),n.a.createElement(Ga["c"],{delay:Ga["a"],position:"top-left",tip:a,tipClassName:At()({hidden:!h})},n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:_},a))),y);if(u)return n.a.createElement(Ja,{getTemplate:g},k);return k}or.defaultProps=nr;var lr=function e(t,a){var r=a.id;var n=false;var i=Object(T["e"])(t,r,n);return{featureShowInstalledAppDmSuggestions:Object(A["isFeatureEnabled"])(t,"feature_show_installed_app_dm_suggestions"),featureSidebarContextMenu:Object(A["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),teamDomain:Object(ne["d"])(t).domain,name:Object(ue["getPrefCompliantMemberNameById"])(t,r),appId:Object(ue["getAppIdFromMember"])(i),clogger:Object(x["a"])({state:t})}};var cr=function e(t){return Object(Ha["bindActionCreators"])({dismissInstalledAppDmSuggestion:Va["a"],startImByMemberId:l["startImByMemberId"]},t)};var ur=Object(i["connect"])(lr,cr)(or);var dr=a(3400);var pr=a(284);var mr=Object(L["b"])("Copy channel name",function(e,t,a){var r=t();var n=Object(E["e"])(r,a);var i=Object(S["getDisplayNameForChannel"])(r,n);Object(pr["writeText"])(i)});mr.meta={name:"copyChannelNameById",key:"actionsCopyChannelNameByIdCopyChannelNameById",description:"Copy channel name"};mr.propTypes=jt["b"].string.isRequired;var hr=mr;var vr=a(205);var fr=Object(L["b"])("Dismiss suggested channel from channels list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;e(Object(vr["d"])({ids:[r]}));var n=Object(O["f"])(t()).split(",");var i=n.indexOf(r);if(-1!==i){n.splice(i,1);e(Object(C["d"])({pref:"newxp_suggested_channels",value:n.join(",")}))}});fr.meta={name:"dismissSuggestedChannel",key:"actionsDismissSuggestedChannelDismissSuggestedChannel",description:"Dismiss suggested channel from channels list"};fr.propTypes={channelId:jt["b"].string.isRequired};var br=fr;var gr=a(1349);var _r=a(911);var yr=Object(L["b"])("Updates the muted_channels pref from the current list of muted channels",function(e,t){var a=t();var r=Object.keys(Object(w["getMutedChannels"])(a)).join(",");return e(Object(C["d"])({pref:"muted_channels",value:r,reason:"update-muted-channels"}))});yr.meta={name:"updateMutedChannelsPref",key:"actionsMuteUnmuteChannelUpdateMutedChannelsPref",description:"Updates the muted_channels pref from the current list of muted channels"};yr.propTypes=null;var kr=function e(t,a){if(!a||!t)return false;var r=Object(S["isIm"])(a)&&!Object(A["isFeatureEnabled"])(t,"feature_all_dm_mute");var n=Object(S["isImWithApp"])(t,a)&&!Object(A["isFeatureEnabled"])(t,"feature_all_dm_mute_bots");return r||n};var Or=Object(L["b"])("Mute a channel given a channelId",function(e,t,a){var r=t();var n=Object(b["a"])({state:r,label:"CHANNEL-MUTE"});var i=Object(E["e"])(r,a);if(!i)return Promise.reject(new Error("Channel does not exist"));if(kr(r,i))return Promise.reject(new Error("Channel is an IM"));if(Object(w["isChannelMutedById"])(r,a))return Promise.reject(new Error("Channel is already muted"));n.info("Muting channel "+a);e(Object(w["setMutedChannel"])({id:a,muted:true}));return e(yr()).catch(function(){n.error("CHANNEL-MUTE","Muting channel "+a+" failed, could not set pref");e(Object(w["setMutedChannel"])({id:a,muted:false}))})});Or.meta={name:"muteChannelById",key:"actionsMuteUnmuteChannelMuteChannelById",description:"Mute a channel given a channelId"};Or.propTypes=jt["b"].string.isRequired;var Cr=Object(L["b"])("Unmute a channel given a channelId",function(e,t,a){var r=t();var n=Object(b["a"])({state:r,label:"CHANNEL-MUTE"});var i=Object(E["e"])(r,a);if(!i)return Promise.reject(new Error("Channel does not exist"));if(kr(r,i))return Promise.reject(new Error("Channel is an IM"));if(!Object(w["isChannelMutedById"])(r,a))return Promise.reject(new Error("Channel is already unmuted"));n.info("Unmuting channel "+a);e(Object(w["setMutedChannel"])({id:a,muted:false}));return e(yr()).catch(function(){n.error("CHANNEL-MUTE","Unmuting channel "+a+" failed, could not set pref");e(Object(w["setMutedChannel"])({id:a,muted:true}))})});Cr.meta={name:"unmuteChannelById",key:"actionsMuteUnmuteChannelUnmuteChannelById",description:"Unmute a channel given a channelId"};Cr.propTypes=jt["b"].string.isRequired;var Er=a(607);var Sr=a(292);var wr=a(900);var Ir=a(512);var jr=a(449);var Tr=a(1367);var Ar=a(253);var Nr=a(1457);var Mr=a(831);var Pr="CHANNEL-SIDEBAR";var Rr={LOG_LABEL:Pr};var xr=new pe["b"]("channel_sidebar");var Dr={isChannel:jt["b"].bool,isPendingShared:jt["b"].bool,isShared:jt["b"].bool,isOrgShared:jt["b"].bool,type:jt["b"].oneOf(["channel","private","im","mpim"]),isSlackbot:jt["b"].bool,isYou:jt["b"].bool,isMuted:jt["b"].bool,isSuggested:jt["b"].bool,hasUnreads:jt["b"].bool,hasDraft:jt["b"].bool,isArchived:jt["b"].bool,isFrozen:jt["b"].bool,sharedTeamIds:jt["b"].arrayOf(jt["b"].string),displayName:jt["b"].string,teamDomain:jt["b"].string.isRequired,isSelected:jt["b"].bool,unreadCount:jt["b"].number,badgeCount:jt["b"].number,userCount:jt["b"].number,userId:jt["b"].string,userActive:jt["b"].bool,id:jt["b"].string.isRequired,priority:jt["b"].number,selectItem:jt["b"].func,closeIM:jt["b"].func,dismissSuggestedChannel:jt["b"].func,isTyping:jt["b"].bool,isStarred:jt["b"].bool,members:jt["b"].arrayOf(jt["b"].string),memberPresences:jt["b"].arrayOf(jt["b"].string),onContextMenu:jt["b"].func,featureSidebarContextMenu:jt["b"].bool.isRequired,index:jt["b"].number.isRequired,sidebarFoldersIsEnabled:jt["b"].bool,onDragStart:jt["b"].func,onDragEnd:jt["b"].func,onDrop:jt["b"].func,onDragOver:jt["b"].func,featureSonicPresenceManager:jt["b"].bool,featureCopyChannelName:jt["b"].bool,featureComposeFlow:jt["b"].bool,clogger:jt["b"].object.isRequired,canPostInChannel:jt["b"].bool,featureAnnounceOnly:jt["b"].bool,deleteChannelDraftWithUndo:jt["b"].func,maybeLeaveChannel:jt["b"].func,muteChannelById:jt["b"].func,unmuteChannelById:jt["b"].func,updateStar:jt["b"].func,copyChannelNameById:jt["b"].func,onItemSelected:jt["b"].func};var Fr={isChannel:true,isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,isSuggested:false,hasUnreads:false,hasDraft:false,isArchived:false,isFrozen:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:f.a.noop,closeIM:f.a.noop,dismissSuggestedChannel:f.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:f.a.noop,sidebarFoldersIsEnabled:false,onDragStart:f.a.noop,onDragEnd:f.a.noop,onDrop:f.a.noop,onDragOver:f.a.noop,featureSonicPresenceManager:false,featureCopyChannelName:false,featureComposeFlow:false,clogger:{},canPostInChannel:true,featureAnnounceOnly:false,deleteChannelDraftWithUndo:f.a.noop,maybeLeaveChannel:f.a.noop,muteChannelById:f.a.noop,unmuteChannelById:f.a.noop,updateStar:f.a.noop,copyChannelNameById:f.a.noop,onItemSelected:f.a.noop};var Lr=Object(b["b"])();var Br=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.closeIM=a.closeIM.bind(a);a.closeSuggestedChannel=a.closeSuggestedChannel.bind(a);a.handleMouseEnter=a.handleMouseEnter.bind(a);a.getContextMenuTemplate=a.getContextMenuTemplate.bind(a);a.linkRef=n.a.createRef();a.state={isTruncated:false};return a}Ct()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"handleMouseEnter",value:function e(t){t.target.offsetWidth<t.target.scrollWidth&&this.setState(function(){return{isTruncated:true}})}},{key:"onClick",value:function e(t){t.preventDefault();Lr.action(Pr,"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"onPrimaryAction",value:function e(t){this.onClick(t)}},{key:"hasPrimaryAction",value:function e(){return true}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();Lr.action(Pr,"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"closeSuggestedChannel",value:function e(t){var a=this.props,r=a.id,n=a.index,i=a.isSelected,s=a.clogger,o=a.dismissSuggestedChannel;t.preventDefault();t.stopPropagation();Lr.action(Pr,"Closed suggested channel "+r);o({channelId:r});s.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:r[0],item_id:r,index:n,is_selected:i})}},{key:"clogClick",value:function e(){var t=this.props,a=t.id,r=t.index,n=t.isMuted,i=t.isSuggested,s=t.isStarred,o=t.hasUnreads,l=t.isArchived,c=t.isFrozen,u=t.isSelected,d=t.badgeCount,p=t.clogger;p.track("SIDEBAR_ITEM_CLICK",{item_type:a[0],item_id:a,index:r,is_muted:n,is_suggested:i,is_starred:s,has_unreads:o,is_archived:l,is_frozen:c,is_selected:u,badge_count:d})}},{key:"shouldShowPresence",value:function e(){var t=this.props,a=t.featureComposeFlow,r=t.type,n=t.isSlackbot,i=t.isSelected,s=t.hasDraft,o=t.isTyping,l=t.isArchived,c=t.isFrozen;if("im"!==r)return false;if(n)return false;if(!a&&s&&!i)return false;if(o&&!i)return false;if(l&&!c)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,a=t.type,r=t.hasUnreads,n=t.isSuggested,i=t.hasDraft;if("im"!==a&&"mpim"!==a&&!n)return false;if(r)return false;if(i)return false;return true}},{key:"shouldShowDraftDelete",value:function e(){var t=this.props,a=t.featureComposeFlow,r=t.hasDraft;return a&&r}},{key:"shouldShowDraftIcon",value:function e(){var t=this.props,a=t.featureComposeFlow,r=t.hasDraft,n=t.isSelected,i=t.canPostInChannel;return!a&&r&&i&&!n}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,a=t.isShared,r=t.type;return a&&!("im"===r||"mpim"===r)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,a=t.isOrgShared,r=t.type;return a&&!("im"===r||"mpim"===r)}},{key:"buildName",value:function e(){var t=this.props,a=t.displayName,r=t.type;if("im"===r)return this.buildImName();if("mpim"===r)return this.buildMpimName();return this.renderName(a)}},{key:"buildImName",value:function e(){var t=this.props,a=t.userId,r=t.isYou;return this.renderName(n.a.createElement(n.a.Fragment,null,n.a.createElement(jr["b"],{memberId:a}),n.a.createElement(Ar["a"],{id:a}),r&&n.a.createElement("span",{className:"p-channel_sidebar__you_label"},xr.t("(you)"))))}},{key:"buildMpimName",value:function e(){var t=this.props,a=t.type,r=t.members,i=t.memberPresences;if("mpim"!==a||!r||!i)return null;var s=f.a.flatMap(r,function(e,t){return[n.a.createElement(Ar["a"],{id:e,key:e}),t<r.length-1?", ":null]});return this.renderName(s)}},{key:"buildAriaLabel",value:function e(){var t=this.props,a=t.type,r=t.displayName,n=t.isShared,i=t.isOrgShared,s=t.isYou,o=t.isMuted,l=t.isSuggested,c=t.hasUnreads,u=t.hasDraft,d=t.isArchived,p=t.unreadCount,m=t.badgeCount,h=t.isSelected,v=t.userActive,f=t.isTyping,b=t.canPostInChannel,g=t.featureAnnounceOnly;return Object(Nr["a"])({type:a,displayName:r,isShared:n,isOrgShared:i,isYou:s,isMuted:o,isSuggested:l,hasUnreads:c,hasDraft:u,isArchived:d,unreadCount:p,badgeCount:m,isSelected:h,userActive:v,isTyping:f,canPost:b,featureAnnounceOnly:g})}},{key:"getContextMenuTemplate",value:function e(){var t=new pe["b"]("menu");var a=this.props,r=a.id,n=a.displayName,i=a.isChannel,s=a.isStarred,o=a.isMuted,l=a.canMute,c=a.canLeave,u=a.maybeLeaveChannel,d=a.updateStar,p=a.muteChannelById,m=a.unmuteChannelById,h=a.copyChannelNameById,v=a.featureCopyChannelName;var f=void 0;var b=void 0;var g=void 0;var _=void 0;var y=void 0;var k=void 0;if(i){f=t.t("Star Channel");b=t.t("Unstar Channel");g=t.t("Mute {channel}",{channel:"#"+n});_=t.t("Unmute {channel}",{channel:"#"+n});y=t.t("Leave {channel}",{channel:"#"+n});v&&(k=t.t("Copy Channel Name"))}else{f=t.t("Star Conversation");b=t.t("Unstar Conversation");g=t.t("Mute Conversation");_=t.t("Unmute Conversation");y=t.t("Leave Conversation")}var O=[{label:s?b:f,click:function e(){return d(!s,{channel:r})}}];c&&O.push({label:y,click:function e(){return u({channelId:r})}});l&&O.push({label:o?_:g,click:function e(){return o?m(r):p(r)}});k&&O.push({label:k,click:function e(){return h(r)}});return O}},{key:"renderName",value:function e(t){var a=this.props,r=a.type,i=a.userActive,s=a.displayName;var o=this.state.isTruncated;return n.a.createElement(Ga["c"],{delay:Ga["a"],position:"top-left",tip:t,tipClassName:At()({hidden:!o})},n.a.createElement("span",{dir:"auto",className:At()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":"im"===r&&!i}),"data-qa":"channel_sidebar_name_"+s.toString().replace(/ /g,"-").toLowerCase(),onMouseEnter:this.handleMouseEnter},t))}},{key:"renderPresence",value:function e(t){return n.a.createElement(Wa["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(Nt["a"])(),inline:false})}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.type,i=t.isChannel,s=t.isPendingShared,o=t.isSlackbot,l=t.isYou,c=t.isMuted,u=t.isSuggested,d=t.hasUnreads,p=t.isArchived,m=t.isFrozen,v=t.badgeCount,f=t.isSelected,b=t.userCount,g=t.displayName,_=t.userId,y=t.priority,k=t.isTyping,O=t.isStarred,C=t.sharedTeamIds,E=t.onContextMenu,w=t.teamDomain,I=t.featureSidebarContextMenu,j=t.deleteChannelDraftWithUndo;var T=At()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===r,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===r,"p-channel_sidebar__channel--im":"im"===r,"p-channel_sidebar__channel--im-slackbot":o,"p-channel_sidebar__channel--im-you":l,"p-channel_sidebar__channel--selected":f,"p-channel_sidebar__channel--muted":c,"p-channel_sidebar__channel--suggested":u,"p-channel_sidebar__channel--unread":d&&!p,"p-channel_sidebar__channel--draft":this.shouldShowDraftIcon(),"p-channel_sidebar__channel--archived":p&&(!m||i),"p-channel_sidebar__channel--typing":k&&!f});var A=n.a.createElement(Mr["b"],{count:v,className:"p-channel_sidebar__badge"});var N={"data-user-count":b};var M=this.shouldShowPresence()&&this.renderPresence(_);var P=this.buildName();var R=this.shouldShowExternalSharedIcon()&&n.a.createElement(Tr["a"],{tooltip:true,sharedTeamIds:C,className:"p-channel_sidebar__icon",pending:s});var x=n.a.createElement(qa["a"],h()({href:Object(S["constructAbsoluteChannelPermalink"])({channelId:a,teamDomain:w}),ref:this.linkRef,className:T,onClick:this.onClick,onContextMenu:E},N,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":f,"data-qa-channel-sidebar-channel-id":a,"data-qa-channel-sidebar-channel-type":r,"data-qa-channel-sidebar-is-starred":O,"data-qa-channel-sidebar-is-you":l,"data-qa-channel-sidebar-priority":y,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":a,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),M,P,A,R);if(this.shouldShowClose()){var D=xr.t("Close Direct Message with {name}",{name:g});u&&(D=xr.t("Dismiss suggested channel"));var F=n.a.createElement(Gt["c"],{onClick:u?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","aria-label":D},n.a.createElement(Ht["a"],{type:"times-circle-medium"}));x=n.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},x,F)}else this.shouldShowDraftDelete()&&(x=n.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},x,n.a.createElement(Gt["c"],{className:"p-channel_sidebar__close",onClick:function e(){return j({channelId:a})}},n.a.createElement(Ht["b"],{className:"p-channel_sidebar__delete_icon",type:"trash"}))));if(I)return n.a.createElement(Ja,{getTemplate:this.getContextMenuTemplate},x);return x}}]);return t}(Ir["a"]);Br.displayName="Channel";Br.propTypes=Dr;Br.defaultProps=Fr;var Ur=Br;var qr={closeIM:l["closeChannelApi"],dismissSuggestedChannel:br,maybeLeaveChannel:gr["a"],muteChannelById:Or,unmuteChannelById:Cr,updateStar:_r["a"],copyChannelNameById:function e(){return hr.apply(void 0,arguments)},deleteChannelDraftWithUndo:dr["a"]};var Wr=function e(t,a){var r=a.id;var n=Object(E["e"])(t,r);if(!n)return{id:r,featureSidebarContextMenu:Object(A["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var i=Object(S["isMpim"])(n)?Math.min(Math.max(f.a.get(n,"members.length",1)-1,2),9):0;var s=Object(S["getChannelType"])(n);var o="im"===s&&Object(O["h"])(t,"show_typing")&&Object(Er["getTyperIdsInChannel"])(t,r).length>0;var l="im"!==s||"active"===Object(Sr["getPresenceByMemberId"])(t,Object(S["getMemberIdFromIm"])(n));var c=Object(A["getCurrentUserId"])(t);var u="mpim"===s&&Object(S["getMemberIdsFromMpim"])(n)&&f.a.filter(Object(S["getMemberIdsFromMpim"])(n),function(e){return e!==c});var d="mpim"===s&&u&&f.a.map(u,function(e){return Object(Sr["getPresenceByMemberId"])(t,e)});var p=Object(A["isFeatureEnabled"])(t,"feature_all_dm_mute")?Object(S["isMemberOfChannel"])(n)&&!Object(S["isImWithApp"])(t,n):!Object(S["isMpim"])(n)&&!Object(S["isIm"])(n)||Object(S["isPrivateChannel"])(n);var m=!Object(S["isMpim"])(n)&&!Object(S["isIm"])(n);var h=Object(S["isMemberOfChannel"])(n)||Object(S["isPrivateChannel"])(n);var v=Object(S["getDisplayNameForChannel"])(t,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var b=Object(ne["d"])(t).domain;var g=Object(S["getPendingAndConnectedTeamIds"])(t,n);return{isSelected:Object(M["a"])(t)===r,isPendingShared:Object(S["isPendingExternallySharedChannel"])(n),isShared:Object(S["isExternallySharedChannel"])(n),isOrgShared:Object(S["isOrgShared"])(n),isSlackbot:Object(S["isSlackbot"])(n),isYou:Object(S["isYou"])(c,n),isMuted:Object(w["isChannelMutedById"])(t,r),isSuggested:!Object(S["isMemberOfChannel"])(n)&&Object(S["isSuggestedChannel"])(t,n),hasUnreads:!!Object(S["getUnreadCount"])(n),hasDraft:Object(S["getHasDraft"])(t,r),isArchived:Object(S["isArchived"])(n),isFrozen:Object(S["isFrozen"])(n),sharedTeamIds:g.length?g:wr["a"],displayName:v,unreadCount:Object(S["getUnreadCount"])(n),badgeCount:Object(E["d"])(t,n),userCount:i,userId:Object(S["getMemberIdFromIm"])(n)||n.user_id,userActive:l,type:s,id:r,isTyping:o,isStarred:Object(S["isStarred"])(n),canPostInChannel:Object(ce["s"])(t,n.id),featureAnnounceOnly:Object(A["isFeatureEnabled"])(t,"feature_announce_only"),members:u||null,memberPresences:d||null,priority:n.priority,isPrivateChannel:Object(S["isPrivateChannel"])(n),isMemberOfChannel:S["isMemberOfChannel"],canMute:p,canLeave:h,isChannel:m,teamDomain:b,featureSidebarContextMenu:Object(A["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureCopyChannelName:Object(A["isFeatureEnabled"])(t,"feature_copy_channel_name"),featureSonicPresenceManager:Object(A["isFeatureEnabled"])(t,"feature_sonic_presence_manager"),featureComposeFlow:Object(de["d"])(t),clogger:Object(x["a"])({state:t})}};var Hr=Object(i["connect"])(Wr,qr,null,{withRef:true})(Ur);var Gr=a(4763);var Vr=a(541);var Kr=a(4780);var zr=a(116);var Qr=new pe["b"]("channel_sidebar");var Yr={dispatch:jt["b"].func,draft:jt["b"].object.isRequired,featureComposeFlow:jt["b"].bool,isSelected:jt["b"].bool,onItemSelected:jt["b"].func,selectItem:jt["b"].func};var Jr={dispatch:v["noop"],featureComposeFlow:false,isSelected:false,onItemSelected:v["noop"],selectItem:v["noop"]};function Xr(e){var t=e.dispatch,a=e.draft,i=e.featureComposeFlow,s=e.isSelected,o=e.onItemSelected,l=e.selectItem;var c=Object(r["useRef"])();Object(r["useEffect"])(function(){o(c.current)},[s,o]);var u=Object(r["useMemo"])(function(){if(!i)return"";if(Object(v["isEmpty"])(a))return"("+Qr.t("unknown")+")";var e=Object(Vr["a"])({contents:a.ops});if(e)return n.a.createElement(n.a.Fragment,null,Object(pe["e"])(i),n.a.createElement("span",{className:"p-channel_sidebar__name"},e),Object(pe["d"])(i));return"("+Qr.t("New message")+")"},[a,i]);return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(zr["a"],{className:At()("p-channel_sidebar__channel","p-channel_sidebar__channel--composer_draft",{"p-channel_sidebar__channel--selected":s}),onClick:function e(){l("Pcomposer",{routeParams:{draftId:Object(Gr["b"])(a.id)}})},ref:c},u),n.a.createElement(zr["a"],{className:"p-channel_sidebar__close",onClick:function e(){return t(Object(dr["b"])({draftId:a.id}))}},n.a.createElement(Ht["b"],{className:"p-channel_sidebar__delete_icon",type:"trash"})))}Xr.displayName="Draft";Xr.defaultProps=Jr;function Zr(e,t){var a=t.id;var r=Object(M["a"])(e);var n=Object(Kr["a"])(e);return{draft:Object(U["d"])(e,a),featureComposeFlow:Object(de["d"])(e),isSelected:"Pcomposer"===r&&n===a}}var $r=Object(i["connect"])(Zr)(Xr);var en=a(1838);var tn={channel:jt["b"].object,channelId:jt["b"].string.isRequired,dispatch:jt["b"].func,onItemSelected:jt["b"].func,threadTs:jt["b"].string.isRequired};var an={channel:void 0,dispatch:v["noop"],onItemSelected:v["noop"]};function rn(e){var t=e.channel,a=e.channelId,i=e.dispatch,s=e.onItemSelected,o=e.threadTs;var l=Object(r["useRef"])();Object(r["useEffect"])(function(){s(l.current)},[s]);return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(zr["a"],{className:"p-channel_sidebar__channel",onClick:function e(){i(Object(en["a"])({channelId:a,threadTs:o}))},ref:l},n.a.createElement("span",{className:"p-channel_sidebar__name"},Object(S["getDisplayName"])(t)),n.a.createElement(Ht["b"],{className:"p-channel_sidebar__icon p-channel_sidebar__reply_icon",type:"small-reply"})),n.a.createElement(zr["a"],{className:"p-channel_sidebar__close",onClick:function e(){i(Object(dr["a"])({channelId:a,threadTs:o}))}},n.a.createElement(Ht["b"],{className:"p-channel_sidebar__delete_icon",type:"trash"})))}rn.displayName="ThreadDraft";rn.defaultProps=an;function nn(e,t){var a=t.channelId;return{channel:Object(E["e"])(e,a)}}var sn=Object(i["connect"])(nn)(rn);var on=a(2004);var ln=new pe["b"]("channel_sidebar");var cn={id:jt["b"].string.isRequired,label:jt["b"].string.isRequired,icon:jt["b"].string,labelUnread:jt["b"].string,hasUnreads:jt["b"].bool,badgeCount:jt["b"].number,isSelected:jt["b"].bool,selectItem:jt["b"].func,isDim:jt["b"].bool,qaLabel:jt["b"].string,disabledInSonic:jt["b"].bool,onItemSelected:jt["b"].func,onClick:jt["b"].func};var un={isSelected:false,labelUnread:"",hasUnreads:false,badgeCount:0,icon:void 0,selectItem:f.a.noop,isDim:false,qaLabel:"",disabledInSonic:false,onItemSelected:f.a.noop,onClick:f.a.noop};var dn=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.linkRef=n.a.createRef();a.state={};return a}Ct()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function e(t){Object(b["b"])().action(Pr,"Selected "+this.props.id);this.props.selectItem(this.props.id,t);"function"===typeof this.props.onClick&&this.props.onClick()}},{key:"onPrimaryAction",value:function e(t){this.onClick(t)}},{key:"hasPrimaryAction",value:function e(){return this.props.selectItem!==f.a.noop||this.props.onClick!==f.a.noop}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.label,i=t.labelUnread,s=t.icon,o=t.hasUnreads,l=t.badgeCount,c=t.isSelected,u=t.isDim,d=t.qaLabel,p=t.disabledInSonic;var m=At()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===a,"p-channel_sidebar__link--all-threads":"Vall_threads"===a,"p-channel_sidebar__link--search":"Vsearch"===a,"p-channel_sidebar__link--invites":"Vinvites"===a,"p-channel_sidebar__link--add-channel":"Vadd_channel"===a,"p-channel_sidebar__link--selected":c,"p-channel_sidebar__link--unread":o,"p-channel_sidebar__link--dim":u});var h=o&&i?i:r;var v=n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name_"+d.toLowerCase()},h);var b=f.a.filter([c?ln.t("selected"):null,o&&!l?ln.t("has unreads"):null,l?ln.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:l}):null],f.a.identity);var g=h+(b.length?" ("+b.join(", ")+")":"");var _=n.a.createElement(Mr["b"],{count:l,className:"p-channel_sidebar__badge"});var y=s&&n.a.createElement(Ht["b"],{type:s,size:"inherit",className:"p-channel_sidebar__link__icon"});var k=n.a.createElement(Gt["c"],{className:m,onClick:this.onClick,"aria-label":g,"data-sidebar-link-id":a,"data-qa-channel-sidebar-link-id":a,ref:this.linkRef},y,v,_);if(p)return n.a.createElement(on["a"],null,k);return k}}]);return t}(r["PureComponent"]);dn.displayName="Link";dn.defaultProps=un;var pn=dn;var mn=new pe["b"]("channel_sidebar");var hn="Vall_threads";var vn=function e(t){return{id:hn,label:mn.t("Threads"),labelUnread:mn.t("Threads"),hasUnreads:Object(A["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(j["hasUnreadThreads"])(t):Object(I["hasUnreadThreads"])(t),badgeCount:Object(A["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(j["getThreadsMentionCount"])(t):Object(I["getThreadsMentionCount"])(t),isSelected:Object(M["a"])(t)===hn}};var fn=Object(i["connect"])(vn,null,null,{withRef:true})(pn);var bn=fn;var gn=new pe["b"]("channel_sidebar");var _n="Vsearch";var yn=function e(t){var a="";Object(A["isFeatureEnabled"])(t,"feature_primary_search")&&Object(Y["a"])(t)&&(a=gn.t("Search Results"));return{id:_n,label:a,isSelected:Object(M["a"])(t)===_n}};var kn=Object(i["connect"])(yn)(pn);var On=kn;var Cn=a(813);var En=new pe["b"]("channel_sidebar");var Sn={label:jt["b"].string.isRequired,isDim:jt["b"].bool,qaLabel:jt["b"].string,clogger:jt["b"].object.isRequired,openChannelBrowser:jt["b"].func.isRequired,featureNewxp2798:jt["b"].bool.isRequired,onClickClose:jt["b"].func};var wn={isDim:false,qaLabel:"",onClickClose:v["noop"]};var In=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onItemSelect=a.onItemSelect.bind(a);return a}Ct()(t,[{key:"onItemSelect",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}});this.props.openChannelBrowser()}},{key:"render",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.isDim,s=t.onClickClose;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(pn,{key:"Vadd_channel",id:"Vadd_channel",isDim:i,qaLabel:r,label:a,selectItem:this.onItemSelect}),n.a.createElement(zr["a"],{onClick:s,className:"p-channel_sidebar__close","aria-label":this.props.featureNewxp2798?En.t("Hide Add Channel button"):null},n.a.createElement(Ht["b"],{type:"times-circle-medium"})))}}]);return t}(n.a.Component);In.displayName="AddChannelLink";var jn=function e(t){return{clogger:Object(x["a"])({state:t}),featureNewxp2798:Object(A["isFeatureEnabled"])(t,"feature_newxp_2798")}};var Tn={openChannelBrowser:function e(){return Cn["a"].apply(void 0,arguments)}};In.defaultProps=wn;var An=Object(i["connect"])(jn,Tn)(In);var Nn=a(37);var Mn=a.n(Nn);var Pn=a(1312);var Rn={id:jt["b"].string.isRequired,views:jt["b"].shape({label:jt["b"].func.isRequired,sidebar:jt["b"].shape({icon:jt["b"].string.isRequired,isBold:jt["b"].func,badgeCount:jt["b"].func,getCloseLinkLabel:jt["b"].func})}).isRequired,isBold:jt["b"].bool,badgeCount:jt["b"].number,isSelected:jt["b"].bool,isCloseButtonVisible:jt["b"].bool,onClickClose:jt["b"].func,selectItem:jt["b"].func};var xn={isBold:false,badgeCount:void 0,isSelected:false,isCloseButtonVisible:false,onClickClose:v["noop"],selectItem:v["noop"]};var Dn=function(e){It()(t,e);function t(){kt()(this,t);return St()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}Ct()(t,[{key:"onPrimaryAction",value:function e(){this.props.selectItem&&this.props.selectItem(this.props.id)}},{key:"hasPrimaryAction",value:function e(){return this.props.selectItem&&this.props.selectItem!==v["noop"]}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.views,i=t.isBold,s=t.isCloseButtonVisible,o=t.onClickClose,l=t.badgeCount,c=Mn()(t,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount"]);var u=Object(v["isFunction"])(r.label)&&r.label();var d=r.sidebar||{},p=d.icon,m=d.getCloseLinkLabel;var f=n.a.createElement(pn,h()({},c,{id:a,label:u,icon:p,hasUnreads:i,badgeCount:l,qaLabel:"page_"+a}));if(!s)return f;var b=n.a.createElement(zr["a"],{onClick:o,className:"p-channel_sidebar__close","aria-label":Object(v["isFunction"])(m)?m():""},n.a.createElement(Ht["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},f,b)}}]);return t}(r["PureComponent"]);Dn.displayName="PageLink";Dn.defaultProps=xn;var Fn=function e(t,a){var r=a.id;var n=Object(Pn["a"])(r);var i=n.sidebar||{};return{id:r,views:n,isBold:Object(v["isFunction"])(i.isBold)&&i.isBold(t),badgeCount:Object(v["isFunction"])(i.badgeCount)?i.badgeCount(t):void 0,isSelected:Object(M["a"])(t)===r,isCloseButtonVisible:Object(v["isFunction"])(i.onClickClose)}};var Ln=function e(t,a){var r=a.id;var n=Object(Pn["a"])(r);var i=n.sidebar||{};return{onClickClose:Object(v["isFunction"])(i.onClickClose)?function(){i.onClickClose(t)}:null,onClick:Object(v["isFunction"])(i.onClick)?function(){i.onClick(t)}:null}};var Bn=Object(i["connect"])(Fn,Ln,null,{withRef:true})(Dn);var Un=a(109);var qn=new pe["b"]("channel_sidebar");var Wn=function e(t){var a=t.selectItem,r=t.dim,i=t.label,s=t.qaLabel,o=t.showClose,l=t.onClickClose;var c=i||qn.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"});var u=n.a.createElement(pn,{key:"Vinvites",id:"Vinvites",label:c,selectItem:a,isDim:r,qaLabel:s});if(!o)return u;var d=n.a.createElement(zr["a"],{onClick:l,className:"p-channel_sidebar__close","aria-label":qn.t("Hide Invite People button")},n.a.createElement(Ht["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},u,d)};Wn.displayName="InvitePeopleLink";Wn.defaultProps={selectItem:f.a.noop,dim:true,label:void 0,qaLabel:"",showClose:false,onClickClose:f.a.noop};var Hn=Object(Un["pure"])(Wn);var Gn=Object(L["b"])("Dismiss Add Apps link in sidebar",function(e){e(Object(C["d"])({pref:"add_apps_prompt_dismissed",value:true}))});Gn.meta={name:"dismissInstallAppsPrompt",key:"actionsDismissInstallAppsPromptDismissInstallAppsPrompt",description:"Dismiss Add Apps link in sidebar"};var Vn=Gn;var Kn=a(822);var zn=a(1082);var Qn=a(1200);var Yn=a(4771);var Jn=new pe["b"]("channel_sidebar");var Xn={isEnterprise:jt["b"].bool,isPaidTeam:jt["b"].bool,clogger:jt["b"].object.isRequired,appLinkImpression:jt["b"].bool,setAppLinkImpressionClogged:jt["b"].func,hideAppLinkPrompt:jt["b"].func,dismissInstallAppsPrompt:jt["b"].func,isAppLinkDismissed:jt["b"].bool,openAppsBrowserModal:jt["b"].func,openAppLauncherView:jt["b"].func,clogAppLauncherOpen:jt["b"].func,appSuggestionsCount:jt["b"].number,featureM11nAppsBrowser:jt["b"].bool,featureMoreAppsCopy:jt["b"].bool,featureAppLauncher:jt["b"].bool};var Zn={isEnterprise:false,isPaidTeam:false,appLinkImpression:false,setAppLinkImpressionClogged:f.a.noop,hideAppLinkPrompt:f.a.noop,dismissInstallAppsPrompt:f.a.noop,isAppLinkDismissed:false,openAppsBrowserModal:f.a.noop,openAppLauncherView:f.a.noop,clogAppLauncherOpen:f.a.noop,appSuggestionsCount:0,featureM11nAppsBrowser:false,featureMoreAppsCopy:false,featureAppLauncher:false};var $n=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleAppsBrowserClick=a.handleAppsBrowserClick.bind(a);a.dismissLink=a.dismissLink.bind(a);return a}Ct()(t,[{key:"componentDidMount",value:function e(){if(!this.props.appLinkImpression&&this.willVisibleRender()){this.clogEvent("impression");this.props.setAppLinkImpressionClogged()}}},{key:"clogEvent",value:function e(t){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:t,ui_element:"ADD_APPS"}}})}},{key:"handleAppsBrowserClick",value:function e(){this.clogEvent("click");var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");if(this.props.featureM11nAppsBrowser)if(this.props.featureAppLauncher){this.props.openAppLauncherView();this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_ADD_APPS_CTA"})}else this.props.openAppsBrowserModal();else Object(p["a"])()}},{key:"dismissLink",value:function e(){this.props.hideAppLinkPrompt();this.clogEvent("decline");this.props.dismissInstallAppsPrompt()}},{key:"willVisibleRender",value:function e(){if(this.props.isEnterprise||this.props.isPaidTeam)return false;if(this.props.isAppLinkDismissed)return false;return true}},{key:"render",value:function e(){if(!this.willVisibleRender())return null;var t=this.props,a=t.featureMoreAppsCopy,r=t.appSuggestionsCount;var i=a?Jn.t("Add more apps"):"";a||(i=new pe["b"]("team_creation").t("Add more apps"));var s=r>1?i:Jn.t("Add apps");var o=Jn.t('Dismiss "Add apps" prompt');return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Gt["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link"},"+ ",s),n.a.createElement(Gt["c"],{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":o,"data-qa":"add_apps_dismiss_link"},n.a.createElement(Ht["b"],{type:"times-circle-medium"})))}}]);return t}(r["Component"]);$n.displayName="InstallAppsLink";$n.defaultProps=Zn;var ei=function e(t){return{setAppLinkImpressionClogged:function e(){return t(y["setAppLinkImpressionClogged"].apply(void 0,arguments))},hideAppLinkPrompt:function e(){return t(y["hideAppLinkPrompt"].apply(void 0,arguments))},dismissInstallAppsPrompt:function e(){return t(Vn.apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(Qn["a"].apply(void 0,arguments))},openAppLauncherView:function e(){return t(Yn["a"].apply(void 0,arguments))},clogAppLauncherOpen:function e(){return t(zn["a"].apply(void 0,arguments))}}};function ti(e){return{isEnterprise:!f.a.isEmpty(Object(ne["h"])(e)),isPaidTeam:Object(ie["isPaidTeam"])(Object(ne["d"])(e)),clogger:Object(x["a"])({state:e}),appLinkImpression:Object(y["getAppLinkImpressionClogged"])(e),appSuggestionsCount:(Object(y["getEnabledAppSuggestionPromptsKeyList"])(e)||[]).length,isAppLinkDismissed:Object(O["h"])(e,"add_apps_prompt_dismissed")||Object(y["getAppLinkIsHidden"])(e),featureM11nAppsBrowser:Object(A["isFeatureEnabled"])(e,"feature_m11n_apps_browser"),featureMoreAppsCopy:Object(A["isFeatureEnabled"])(e,"feature_more_apps_copy"),featureAppLauncher:Object(Kn["l"])(e)}}var ai=Object(i["connect"])(ti,ei)($n);var ri=a(229);var ni=a(44);var ii={appKey:jt["b"].string.isRequired,appId:jt["b"].string.isRequired,isInstall:jt["b"].bool.isRequired,dismissKey:jt["b"].string.isRequired,href:jt["b"].string.isRequired,text:jt["b"].string.isRequired,label:jt["b"].string.isRequired,clogUiElement:jt["b"].string.isRequired,clogger:jt["b"].object.isRequired,appSuggestionImpressions:jt["b"].object.isRequired,setUserPrefByApi:jt["b"].func,hideAppSuggestion:jt["b"].func,setAppSuggestionImpressionClogged:jt["b"].func,onboardingRoleApps:jt["b"].string};var si={setUserPrefByApi:v["noop"],hideAppSuggestion:v["noop"],setAppSuggestionImpressionClogged:v["noop"],onboardingRoleApps:""};function oi(e){var t=e.appKey,a=e.appId,i=e.isInstall,s=e.setUserPrefByApi,o=e.hideAppSuggestion,l=e.dismissKey,c=e.href,u=e.text,d=e.label,p=e.clogUiElement,m=e.clogger,h=e.appSuggestionImpressions,v=e.setAppSuggestionImpressionClogged,f=e.onboardingRoleApps;var b=Object(r["useCallback"])(function(e){m.track(Xa["l"].APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:p},core:{app_id:a}}})},[a,m,p]);Object(r["useEffect"])(function(){if(!h[t]){v(t);b("impression")}},[h,v,b,t]);var g=Object(r["useCallback"])(function(){o(t);i||s({pref:l,value:true});b("click")},[t,o,i,b,s,l]);var _=Object(r["useCallback"])(function(){o(t);var e=(f||"").split(",");if(e.includes(a)){e.splice(e.indexOf(a),1);s({pref:"onboarding_role_apps",value:e.join(",")})}s({pref:l,value:true});b("decline")},[f,a,o,t,s,l,b]);return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(ni["a"],{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:c,onClick:g},n.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",u)),n.a.createElement(Gt["c"],{"data-qa":"app_suggestion_prompt_dismiss",onClick:_,className:"p-channel_sidebar__close","aria-label":d},n.a.createElement(Ht["b"],{type:"times-circle-medium"})))}oi.displayName="AppSuggestionLink";oi.defaultProps=si;var li=function e(t){return{setUserPrefByApi:function e(){return t(C["d"].apply(void 0,arguments))},hideAppSuggestion:function e(){return t(y["hideAppSuggestion"].apply(void 0,arguments))},setAppSuggestionImpressionClogged:function e(){return t(y["setAppSuggestionImpressionClogged"].apply(void 0,arguments))}}};var ci=function e(t,a){var r=a.appKey;return h()({},ft(t,r),{clogger:Object(x["a"])({state:t}),onboardingRoleApps:Object(O["h"])(t,"onboarding_role_apps"),appSuggestionImpressions:Object(y["getAppSuggestionImpressionsClogged"])(t)})};var ui=Object(i["connect"])(ci,li)(oi);var di={displayedAppSuggestionsList:jt["b"].arrayOf(jt["b"].shape({appKey:jt["b"].string.isRequired,appName:jt["b"].string.isRequired}))};var pi={displayedAppSuggestionsList:[]};var mi=function e(t,a){var r=t.appName;var n=a.appName;return Object(ri["a"])(r,n)};function hi(e){var t=e.displayedAppSuggestionsList;return n.a.createElement(r["Fragment"],null,t.sort(mi).map(function(e){var t=e.appKey;return n.a.createElement(ui,{appKey:t,key:t})}))}hi.displayName="AppSuggestionLinks";hi.defaultProps=pi;var vi=function e(t){return{displayedAppSuggestionsList:Object(y["getEnabledAppSuggestionPromptsKeyList"])(t)}};var fi=Object(i["connect"])(vi)(hi);var bi=a(818);var gi=a(1069);var _i=new pe["b"]("channel_browser_coachmark");var yi={label:jt["b"].string.isRequired,qaLabel:jt["b"].string,iconClass:jt["b"].string,tooltip:jt["b"].node,headerAriaLabel:jt["b"].string,tooltipClassName:jt["b"].string,tooltipArrowOffset:jt["b"].number,onLabelClick:jt["b"].func,showPlus:jt["b"].bool,plusTooltip:jt["b"].node,plusAriaLabel:jt["b"].string,onPlusClick:jt["b"].func,seenChannelBrowserCoachmark:jt["b"].bool,hasRecentlySharedAChannel:jt["b"].bool,setUserPrefByApi:jt["b"].func,openChannelBrowser:jt["b"].func,featureChannelIsRemoveCreateSharedChannel:jt["b"].bool,isSelected:jt["b"].bool,secondaryContent:jt["b"].node,clogger:jt["b"].object};var ki={qaLabel:"",iconClass:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:v["noop"],showPlus:false,plusTooltip:null,plusAriaLabel:"",onPlusClick:v["noop"],seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:v["noop"],openChannelBrowser:v["noop"],featureChannelIsRemoveCreateSharedChannel:false,isSelected:false,secondaryContent:void 0,clogger:{track:v["noop"]}};var Oi=Object(b["b"])();var Ci=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLabelClick=a.onLabelClick.bind(a);a.onPlusClick=a.onPlusClick.bind(a);a.setTooltipRef=a.setTooltipRef.bind(a);a.setPlusTooltipRef=a.setPlusTooltipRef.bind(a);return a}Ct()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();Oi.action(Pr,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();Oi.action(Pr,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip();this.props.clogger.track(Xa["l"].SIDEBAR_PLUS_CLICK,{label:this.props.qaLabel})}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return n.a.createElement(Ht["b"],{size:"inherit",type:t})}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,a=t.showPlus,r=t.plusTooltip,i=t.plusAriaLabel,s=t.qaLabel;if(!a)return null;var o=this.props.onPlusClick===this.props.onLabelClick;var l=o?"-1":void 0;var c=o?"true":void 0;var u=n.a.createElement(Gt["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":i,tabIndex:l,"data-qa":"channel_sidebar__plus__"+s});var d=r?n.a.createElement(Ga["c"],{tip:r,position:"top",ref:this.setPlusTooltipRef,delay:Ga["a"]},u):u;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":c},d)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var a=this;var r=this.props,i=r.seenChannelBrowserCoachmark,s=r.hasRecentlySharedAChannel,o=r.qaLabel,l=r.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==o&&!l||"channels"!==o&&l||i||!s)return t;var c=function e(){a.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var u=function e(){c();a.props.openChannelBrowser()};var d=n.a.createElement(bi["a"],{secondaryCallToActionText:_i.t("Close"),primaryCallToActionText:_i.t("Show Me"),title:_i.t("View and manage shared channels"),content:_i.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:true,onClickSecondaryButton:c,onClickPrimaryButton:u,orientation:"right",closeCoachmark:c},n.a.createElement("h3",{className:"margin_bottom_50"},_i.t("View and manage shared channels")),n.a.createElement("p",null,_i.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return n.a.createElement("div",null,n.a.createElement(gi["b"],{orientation:"right",coachmarkElement:d},t))}},{key:"render",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.tooltip,s=t.headerAriaLabel,o=t.tooltipClassName,l=t.tooltipArrowOffset,c=t.onLabelClick,u=t.isSelected,d=t.secondaryContent;var p=void 0;var m=c!==v["noop"];p=m?n.a.createElement(Gt["c"],{className:At()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":s},this.renderIconMaybe()," ",a):n.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",a);var h=i?n.a.createElement(Ga["c"],{tip:i,tipClassName:o,position:"top-left",tipArrowOffset:l,ref:this.setTooltipRef,delay:Ga["a"]},this.renderSharedChannelsCoachmarkMaybe(p)):p;var f=m?n.a.createElement("h2",{className:"offscreen"},a):null;var b=this.props.onPlusClick!==this.props.onLabelClick;var g=b?"group":void 0;var _=b?a:void 0;return n.a.createElement("div",{className:At()("p-channel_sidebar__section_heading",{"p-channel_sidebar__section_heading--selected":u}),"data-qa-channel-sidebar-section-heading":r,"data-qa":r,role:g,"aria-label":_},f,h,this.renderPlusButtonMaybe(),d)}}]);return t}(n.a.PureComponent);Ci.displayName="SectionHeading";Ci.defaultProps=ki;var Ei=function e(t){return{seenChannelBrowserCoachmark:Object(O["h"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(O["h"])(t,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(A["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel"),clogger:Object(x["a"])({state:t})}};var Si={setUserPrefByApi:function e(){return C["d"].apply(void 0,arguments)},openChannelBrowser:function e(){return Cn["a"].apply(void 0,arguments)}};var wi=Object(i["connect"])(Ei,Si)(Ci);var Ii=new pe["b"]("channel_sidebar");var ji={featureChannelSidebarDraftsSection:jt["b"].bool,featureComposeFlow:jt["b"].bool,isSelected:jt["b"].bool,numDrafts:jt["b"].number,selectItem:jt["b"].func,setUserPrefByApi:jt["b"].func,showDraftsSectionCoachmark:jt["b"].bool,scrollToTopOfChannelList:jt["b"].func};var Ti={featureChannelSidebarDraftsSection:false,featureComposeFlow:false,isSelected:false,numDrafts:void 0,selectItem:v["noop"],setUserPrefByApi:v["noop"],showDraftsSectionCoachmark:false,scrollToTopOfChannelList:v["noop"]};var Ai=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={showCoachmark:e.showDraftsSectionCoachmark};a.markCoachmarkSeen=a.markCoachmarkSeen.bind(a);a.onShow=a.onShow.bind(a);return a}Ct()(t,[{key:"componentDidMount",value:function e(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}},{key:"onShow",value:function e(){if(!this.state.showCoachmark)return;this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:true})}},{key:"markCoachmarkSeen",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"render",value:function e(){var t=this.props,a=t.featureChannelSidebarDraftsSection,r=t.featureComposeFlow,i=t.isSelected,s=t.numDrafts,o=t.selectItem;var l=this.state.showCoachmark;if(!a)return null;var c={};if(r){var u=Ii.t("Browse drafts");c.onLabelClick=function(){return o("Pdrafts")};c.headerAriaLabel=u;c.tooltip=u;c.tooltipArrowOffset=32;c.isSelected=i;c.secondaryContent=n.a.createElement("span",{className:"p-channel_sidebar__section_heading_secondary_content"},s)}var d=n.a.createElement(wi,h()({},c,{label:Ii.t("Drafts"),qaLabel:"drafts"}));if(l){this.onShow();var p=Ii.t("Pick up where you left off");var m=Ii.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send.");var v=n.a.createElement(bi["a"],{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:Ii.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:true,"data-qa":"drafts-coachmark"},n.a.createElement("h3",{className:"margin_bottom_50"},p),n.a.createElement("p",null,m));return n.a.createElement(gi["b"],{orientation:"right",coachmarkElement:v},n.a.createElement("div",null,d))}return d}}]);return t}(r["Component"]);Ai.displayName="DraftsHeading";Ai.defaultProps=Ti;var Ni=function e(t){return{featureChannelSidebarDraftsSection:Object(A["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section"),featureComposeFlow:Object(de["d"])(t),isSelected:"Pdrafts"===Object(M["a"])(t),numDrafts:Object(U["f"])(t),showDraftsSectionCoachmark:!Object(O["h"])(t,"seen_drafts_section_coachmark")}};var Mi=function e(t){return{setUserPrefByApi:function e(a){return t(Object(C["d"])(a))}}};var Pi=Object(i["connect"])(Ni,Mi)(Ai);var Ri=new pe["b"]("channel_sidebar");var xi="plans?ui_step="+Xa["A"].SIDEBAR+"&ui_element="+Xa["z"].PRICING_LINK+"&entry_point=channel_sidebar_upgrade_cta";var Di={team:jt["b"].object.isRequired,clogger:jt["b"].object.isRequired,inButtonExperiment:jt["b"].bool.isRequired};var Fi=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}Ct()(t,[{key:"componentDidMount",value:function e(){this.clog(Xa["w"].IMPRESSION)}},{key:"onClick",value:function e(){this.clog(Xa["w"].CLICK);Object(ie["openAuthenticatedUrlInBrowser"])(this.props.team,xi)}},{key:"clog",value:function e(t){var a=this.props.inButtonExperiment;this.props.clogger.track(Xa["l"].GROWTH_PRICING,{contexts:{ui_context:{step:Xa["A"].SIDEBAR,action:t,ui_properties:{element_type:a?Xa["k"].BUTTON:Xa["k"].LINK,element_name:a?"upgrade_button":"upgrade_link"}}}})}},{key:"render",value:function e(){var t=n.a.createElement("span",{className:"p-channel_sidebar__name"},Ri.t("Upgrade"));return this.props.inButtonExperiment?n.a.createElement("div",{className:"p-channel_sidebar__upgrade_slack_button_container"},n.a.createElement(Gt["d"],{type:"outline",className:"p-channel_sidebar__upgrade_slack_button","data-qa":"upgrade-slack-cta",onClick:this.onClick},t)):n.a.createElement(ni["a"],{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack","data-qa":"upgrade-slack-cta",onClick:this.onClick,href:xi},t)}}]);return t}(r["PureComponent"]);Fi.displayName="UpgradeSlackCTA";function Li(e){return{team:Object(ne["d"])(e),clogger:Object(x["a"])({state:e}),inButtonExperiment:"treatment"===Object(d["getGroupForUser"])(e,"sidebar_upgrade_button")}}var Bi=Object(i["connect"])(Li)(Fi);var Ui=new pe["b"]("channel_sidebar");var qi=function e(t){return n.a.createElement(wi,h()({},t,{label:Ui.t("Starred"),qaLabel:"starred"}))};qi.displayName="StarredHeading";var Wi=Object(Un["pure"])(qi);var Hi=a(231);var Gi=a(1060);var Vi=a(1418);var Ki=a(1059);var zi=a(293);var Qi=new pe["b"]("channel_sidebar");var Yi={canOpenChannelBrowser:jt["b"].bool,showPlus:jt["b"].bool,openSharedChannelCreationOrRequestModal:jt["b"].func,openChannelCreateModal:jt["b"].func,openChannelBrowser:jt["b"].func.isRequired,canUserRequestSharedChannel:jt["b"].bool,canUserCreateSharedChannel:jt["b"].bool,featureSonicDmBrowser:jt["b"].bool,openDmBrowserModal:jt["b"].func,clogger:jt["b"].object};var Ji={canOpenChannelBrowser:true,showPlus:false,openSharedChannelCreationOrRequestModal:v["noop"],openChannelCreateModal:v["noop"],canUserRequestSharedChannel:false,canUserCreateSharedChannel:false,featureSonicDmBrowser:false,openDmBrowserModal:v["noop"],clogger:{}};var Xi=function e(){return Object(p["c"])({element:"shared_channels_channel_sidebar_plus_btn"})};var Zi=function e(t){var a=t.canOpenChannelBrowser,r=t.showPlus,i=t.canUserRequestSharedChannel,s=t.canUserCreateSharedChannel,o=t.featureSonicDmBrowser,l=t.clogger;var c=void 0;a&&(c=Qi.t("Browse all shared channels"));var u=a?function(){return t.openChannelBrowser({initialFilter:"shared"})}:v["noop"];var d=void 0;var p=i&&!s&&o;d=Object(B["a"])()?t.openSharedChannelCreationOrRequestModal:p?t.openDmBrowserModal.bind(null,{adminMode:zi["a"].createChannel,showOpenTransition:true}):Xi;var m=function e(){l.track(Xa["l"].CHANNEL_CREATE_FLOW,{contexts:{family:"channel",ui_context:{step:Xa["A"].CHANNEL_CREATE_MODAL,action:Xa["w"].CLICK,entry_point:"shared_channel_sidebar",ui_properties:{element_type:Xa["k"].BUTTON,element_name:"shared_channel_plus"}}}});return d.apply(void 0,arguments)};return n.a.createElement(wi,h()({},t,{onLabelClick:u,tooltip:c,headerAriaLabel:Qi.t("Browse all shared channels"),tooltipArrowOffset:50,label:Qi.t("Shared Channels"),qaLabel:"shared_channels",showPlus:r,plusTooltip:Qi.t("Create a shared channel"),onPlusClick:m}))};Zi.displayName="SharedChannelsHeading";Zi.defaultProps=Ji;var $i=function e(t){return{canOpenChannelBrowser:!Object(ue["isUltraRestricted"])(Object(T["b"])(t)),featureSonicEscCreation:Object(A["isFeatureEnabled"])(t,"feature_sonic_esc_creation"),showPlus:rs(t),canUserRequestSharedChannel:Object(ce["Q"])(t),canUserCreateSharedChannel:Object(ce["I"])(t),featureSonicDmBrowser:Object(A["isFeatureEnabled"])(t,"feature_sonic_dm_browser"),clogger:Object(x["a"])({state:t})}};var es={openSharedChannelCreationOrRequestModal:function e(){return Gi["a"].apply(void 0,arguments)},openChannelBrowser:function e(){return Cn["a"].apply(void 0,arguments)},openDmBrowserModal:function e(){return Ki["a"].apply(void 0,arguments)},openChannelCreateModal:function e(){return Vi["a"].apply(void 0,arguments)}};var ts=Object(Un["pure"])(Zi);var as=Object(i["connect"])($i,es)(ts);function rs(e){var t=!Object(A["isFeatureEnabled"])(e,"feature_shared_channels_block_large_orgs");var a=Object(T["b"])(e);if(Object(Hi["e"])(e)&&t)return Object(ue["canManageExternalSharedChannels"])(e,{blockAllForNoOne:true});if(Object(ue["isUltraRestricted"])(a)||Object(ue["isRestricted"])(a))return false;return Object(ce["Q"])(e)}var ns=a(137);var is=a(895);var ss=new pe["b"]("coachmarks");var os={currentMember:jt["b"].object,firstListedChannel:jt["b"].string,inSinglePublicChannel:jt["b"].bool,inSinglePrivateChannel:jt["b"].bool,setAboutChannelsCoachmarkIsVisible:jt["b"].func.isRequired,anchorElement:jt["b"].instanceOf(Element)};var ls={currentMember:v["noop"],firstListedChannel:null,inSinglePublicChannel:false,inSinglePrivateChannel:false,anchorElement:null};var cs=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClose=a.onClose.bind(a);a.renderCoachmarkContent=a.renderCoachmarkContent.bind(a);return a}Ct()(t,[{key:"onClose",value:function e(t){t.preventDefault();this.props.setAboutChannelsCoachmarkIsVisible(false)}},{key:"renderCoachmarkContent",value:function e(){var t=this.props,a=t.currentMember,r=t.inSinglePublicChannel,i=t.inSinglePrivateChannel,s=t.firstListedChannel;var o="";o=Object(ue["isAdmin"])(a)?ss.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(ue["isRestricted"])(a)?r?ss.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:n.a.createElement("strong",null,s),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):i?ss.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:n.a.createElement("strong",null,s),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):ss.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):ss.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).");return o}},{key:"render",value:function e(){var t=this.props.anchorElement;return n.a.createElement(bi["a"],{anchorElement:t,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:ss.t("Got it!"),isOpen:true},n.a.createElement("h3",{className:"margin_bottom_50"},ss.t("Messaging happens in channels")),n.a.createElement("p",null,this.renderCoachmarkContent()))}}]);return t}(r["Component"]);cs.displayName="ChannelHeadingCoachmark";cs.defaultProps=ls;var us=function e(t){var a=Object(E["u"])(t);var r=a.filter(S["isPrivateChannel"]);var n=a.filter(S["isPublicChannel"]);return{currentMember:Object(T["b"])(t),inSinglePrivateChannel:1===a.length&&1===r.length,inSinglePublicChannel:1===a.length&&1===n.length,firstListedChannel:a.length?a[0].name:""}};var ds={setAboutChannelsCoachmarkIsVisible:function e(){return y["setAboutChannelsCoachmarkIsVisible"].apply(void 0,arguments)}};var ps=Object(i["connect"])(us,ds)(cs);var ms=new pe["b"]("channel_sidebar");var hs={showPlus:jt["b"].bool,canOpenChannelBrowser:jt["b"].bool,wasRecentlyOnline:jt["b"].bool.isRequired,featureOfflineMode:jt["b"].bool.isRequired,aboutChannelsCoachmarkIsVisible:jt["b"].bool.isRequired,openChannelBrowser:jt["b"].func.isRequired};var vs={showPlus:true,canOpenChannelBrowser:true};var fs=function e(t){var a=t.featureOfflineMode,r=t.showPlus,i=t.canOpenChannelBrowser,s=t.wasRecentlyOnline,o=t.aboutChannelsCoachmarkIsVisible;var l=ms.t("Create a channel");a&&!s&&(l=n.a.createElement(is["a"],{tooltipLabel:ms.t("Create a channel")}));var c=void 0;var u=void 0;if(i){c=t.openChannelBrowser;u=ms.t("Browse all channels")}var d=n.a.createElement(wi,h()({},t,{onLabelClick:c,label:ms.t("Channels"),qaLabel:"channels",tooltip:u,headerAriaLabel:ms.t("Browse all channels"),tooltipArrowOffset:30,showPlus:r,plusTooltip:l,plusAriaLabel:ms.t("Create a channel")}));if(o)return n.a.createElement(gi["b"],{orientation:"right",coachmarkElement:n.a.createElement(ps,null)},d);return d};fs.defaultProps=vs;var bs=function e(t){return{showPlus:Object(ce["H"])(t)||Object(ce["G"])(t),canOpenChannelBrowser:!Object(ue["isUltraRestricted"])(Object(T["b"])(t)),featureOfflineMode:Object(A["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(ns["h"])(t),aboutChannelsCoachmarkIsVisible:Object(y["getAboutChannelsCoachmarkIsVisible"])(t)}};var gs={openChannelBrowser:function e(){return Cn["a"].apply(void 0,arguments)}};var _s=Object(i["connect"])(bs,gs)(fs);var ys=a(118);var ks={name:jt["b"].string,setIsRenaming:jt["b"].func,saveFolderData:jt["b"].func,renameFolder:jt["b"].func,toggleFolderCollapse:jt["b"].func,setFolderCollapse:jt["b"].func,badgeCount:jt["b"].number,hasUnreads:jt["b"].bool,isCollapsed:jt["b"].bool,isRenaming:jt["b"].bool,onDragStart:jt["b"].func,onDragEnd:jt["b"].func,onDrop:jt["b"].func,onDragOver:jt["b"].func};var Os={name:"",setIsRenaming:f.a.noop,saveFolderData:f.a.noop,renameFolder:f.a.noop,toggleFolderCollapse:f.a.noop,setFolderCollapse:f.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:f.a.noop,onDragEnd:f.a.noop,onDrop:f.a.noop,onDragOver:f.a.noop};var Cs=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleFolderCollapse=a.toggleFolderCollapse.bind(a);a.renameFolder=a.renameFolder.bind(a);a.showRenameBox=a.showRenameBox.bind(a);a.setRenamingLabel=a.setRenamingLabel.bind(a);a.setInputRef=a.setInputRef.bind(a);a.onBlur=a.onBlur.bind(a);a.state={renamingLabel:a.props.name,hasTyped:false};return a}Ct()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var a=this.props.name;var r=t.target.value;this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var a=t.target.value;this.setState(function(){return{renamingLabel:a,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var a=this.props.name;var r=void 0;"Enter"===t.key&&(r=t.target.value);"Escape"===t.key&&(r=this.props.name);if(void 0!==r){this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":n.a.createElement(Gt["c"],{className:At()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var a="";var r=void 0;r=this.props.isRenaming?n.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):f.a.includes(this.props.name,"<")?n.a.createElement(Gt["c"],{className:At()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a},this.props.name):n.a.createElement(Gt["c"],{className:At()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a},n.a.createElement(ys["a"],{text:this.props.name,noJumbomoji:true,noHighlights:true}));var i=this.props.isCollapsed?n.a.createElement(Gt["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},n.a.createElement(Mr["b"],{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return n.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},n.a.createElement("h2",{className:"offscreen"},this.props.name),r,i,t)}}]);return t}(n.a.PureComponent);Cs.displayName="FolderHeading";Cs.defaultProps=Os;var Es=function e(t,a){var r=a.name;var n=Object(k["getFolderByName"])(t,r);var i=n?f.a.map(n.channelIds,function(e){return Object(E["e"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var l=i.length>0?f.a.sum(f.a.map(i,function(e){return Object(E["d"])(t,e)})):0;var c=i.length>0&&!!f.a.find(i,function(e){return Object(S["isUnread"])(e)&&!Object(w["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:c,badgeCount:l}};var Ss={toggleFolderCollapse:k["toggleFolderCollapse"],setFolderCollapse:k["setFolderCollapse"],saveFolderData:k["saveFolderData"],renameFolder:k["renameFolder"],setIsRenaming:k["setIsRenaming"]};var ws=Object(i["connect"])(Es,Ss)(Cs);var Is=new pe["b"]("channel_sidebar");var js={orgName:jt["b"].string.isRequired};var Ts=function e(t){return n.a.createElement(wi,h()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:Is.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:Is.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};Ts.displayName="OrgWideChannelsHeading";var As=Object(Un["pure"])(Ts);var Ns=function e(t){var a=Object(ne["f"])(t);return{orgName:a}};var Ms=Object(i["connect"])(Ns)(As);var Ps=new pe["b"]("channel_sidebar");var Rs=function e(t){return n.a.createElement(wi,{label:Ps.t("Direct Messages"),qaLabel:"ims",tooltip:Ps.t("Open a direct message"),headerAriaLabel:Ps.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:Ps.t("Open a direct message"),plusAriaLabel:Ps.t("Open a direct message"),onLabelClick:function e(){return t.openDmBrowserModal()},onPlusClick:function e(){return t.openDmBrowserModal()}})};Rs.displayName="DirectMessagesHeading";Rs.defaultProps={openDmBrowserModal:v["noop"]};var xs={openDmBrowserModal:function e(){return Ki["a"].apply(void 0,arguments)}};var Ds=Object(i["connect"])(null,xs)(Rs);var Fs=new pe["b"]("sonic_pilot");function Ls(e){var t=e.children,a=e.featureSonicPlaceholderLabels;if(!a)return t;if(Object(B["a"])())return n.a.createElement(n.a.Fragment,null,t,n.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},Fs.t("Coming soon")));return t}var Bs=function e(t){return{featureSonicPlaceholderLabels:Object(A["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};var Us=Object(i["connect"])(Bs)(Ls);var qs=new pe["b"]("channel_sidebar");var Ws=function e(t){var a=t.featureM11nAppsBrowser?qs.t("Browse Apps"):n.a.createElement(Us,null,qs.t("Browse apps"));var r=t.featureM11nAppsBrowser?t.openAppsBrowserModal:p["a"];return n.a.createElement(wi,h()({},t,{onLabelClick:t.featureAppLauncher?v["noop"]:r,onPlusClick:t.featureAppLauncher?v["noop"]:r,label:t.featureAppLauncher?qs.t("Recent Apps"):qs.t("Apps"),qaLabel:"apps",tooltip:t.featureAppLauncher?"":a,headerAriaLabel:qs.t("Browse apps"),tooltipArrowOffset:16,showPlus:!t.featureAppLauncher,plusTooltip:t.featureAppLauncher?"":a,plusAriaLabel:qs.t("Browse apps")}))};Ws.displayName="AppsHeading";Ws.defaultProps={featureM11nAppsBrowser:false,featureAppLauncher:false};var Hs=Ws;var Gs=function e(t){return{featureM11nAppsBrowser:Object(A["isFeatureEnabled"])(t,"feature_m11n_apps_browser"),featureAppLauncher:Object(Kn["l"])(t)}};var Vs=function e(t){return Object(Ha["bindActionCreators"])({openAppsBrowserModal:Qn["a"]},t)};var Ks=Object(i["connect"])(Gs,Vs)(Ws);var zs={},Qs=zs.getLastTeamSwitchTimestamp;var Ys={},Js=Ys.getFocusedWorkspace;var Xs=new pe["b"]("channel_sidebar");var Zs={rows:jt["b"].arrayOf(jt["b"].shape({type:jt["b"].string,scrollBottom:jt["b"].number,key:jt["b"].string})).isRequired,onItemSelect:jt["b"].func,onInviteClick:jt["b"].func,onCreateChannelClick:jt["b"].func,onCreateSharedChannelClick:jt["b"].func,onResize:jt["b"].func,onScroll:jt["b"].func,sidebarFoldersIsEnabled:jt["b"].bool,onDragStart:jt["b"].func,onDragEnd:jt["b"].func,onDrop:jt["b"].func,onDragOver:jt["b"].func,onCreateFolder:jt["b"].func,telemeter:jt["b"].object.isRequired,logger:jt["b"].object,clogger:jt["b"].object,shouldTrackTTFMP:jt["b"].bool,bootType:jt["b"].oneOf(["warm","cold"]),setHideInviteButton:jt["b"].func,setHideAddChannelButton:jt["b"].func,teamId:jt["b"].string,featureSeeMoreChannels:jt["b"].bool,removeFromSectionNavigation:jt["b"].func,addToSectionNavigation:jt["b"].func,userAttentionIsOnChat:jt["b"].bool,composerVisible:jt["b"].bool,featureSidebarVirtualized:jt["b"].bool};var $s={onItemSelect:f.a.noop,onInviteClick:f.a.noop,onCreateChannelClick:f.a.noop,onCreateSharedChannelClick:f.a.noop,onResize:f.a.noop,onScroll:f.a.noop,sidebarFoldersIsEnabled:false,onDragStart:f.a.noop,onDragEnd:f.a.noop,onDrop:f.a.noop,onDragOver:f.a.noop,onCreateFolder:f.a.noop,shouldTrackTTFMP:true,logger:null,clogger:null,bootType:null,setHideInviteButton:f.a.noop,setHideAddChannelButton:f.a.noop,teamId:null,featureSeeMoreChannels:false,removeFromSectionNavigation:f.a.noop,addToSectionNavigation:f.a.noop,userAttentionIsOnChat:false,composerVisible:false,featureSidebarVirtualized:false};var eo=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Ta["a"])(a,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","setListRef","onResize","onScroll","onItemClick","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","onKeyboardNavigableListItemClick","renderRow","renderRowWithWrapper","setRowRefByKey","renderVirtualizedRowWithWrapper","isRowFocusable","onItemSelected","scrollToTopOfChannelList","focus"]);a.currentScrollTop=0;a.height=0;a.keyboardNavigableListRef=n.a.createRef();a.rowRefByKey={};return a}Ct()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!f.a.get(window,"performance.timing.fetchStart"))return;var a=this.props.shouldTrackTTFMP;if(a&&Object(B["a"])()){var r=Object(o["e"])();a=Object(Pa["shouldLogAppBootMetrics"])(r);a&&Object(o["a"])(Object(Pa["setShouldLogAppBootMetrics"])(false))}var n=Promise.resolve();Object(qt["isSSB"])()&&Object(gt["legacyHasDeviceStorage"])()&&(n=Object(gt["getItem"])("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(a=false)}));(qt["isDev"]||qt["isQa"]||qt["isJsPath"])&&(a=false);var i=Object(Ra["d"])();var s=Object(qt["isReload"])()?"_reload":"";var l=Date.now()-(window.performance.timing.fetchStart+i);var c=Object(B["a"])()?"ttfmp_sonic_"+this.props.bootType+s:"ttfmp_legacy"+s;n.then(function(){if(a){t.shouldLogFirstMeaningfulPaint=false;Object(qt["isSSB"])()&&Object(gt["legacyHasDeviceStorage"])()&&Object(gt["setItem"])("shouldLogFirstMeaningfulPaint","false");t.props.logger.info("PERF","First meaningful paint: "+l+"ms");t.props.telemeter.store(c,l)}});this.clogInvitePeopleButton()}},{key:"componentDidUpdate",value:function e(t){if(Object(B["a"])()){var a=Object(o["e"])();var r=Js(a);if(Object(Pa["shouldLogTeamSwitchMetrics"])(a)&&r===this.props.teamId){var n=Qs();var i=Date.now()-n;this.props.telemeter.store("team_switch_sonic",i);Object(o["a"])(Object(Pa["setShouldLogTeamSwitchMetrics"])(false))}}this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights();var s={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Fa["a"])(s)&&this.props.addToSectionNavigation();Object(La["a"])(s)&&this.props.removeFromSectionNavigation()}},{key:"onResize",value:function e(t){var a=t.height;this.resetCurrentScrollTopMaybe(a);this.height=a;this.props.onResize({height:a})}},{key:"onScroll",value:function e(t,a){var r=a.scrollTop;this.currentScrollTop=r;this.List&&this.List.Grid.handleScrollEvent({scrollTop:r});this.props.onScroll&&this.props.onScroll(r)}},{key:"onItemClick",value:function e(t,a){t.preventDefault();this.props.onItemSelect(a)}},{key:"onKeyboardNavigableListItemClick",value:function e(t){t.nativeEvent.preventDefault();var a=t.id;var r=this.getRowRefFromKey(a);r&&r.onPrimaryAction&&r.onPrimaryAction(t.nativeEvent)}},{key:"onInviteClick",value:function e(t,a){this.props.onInviteClick(a)}},{key:"onInviteCloseClick",value:function e(){this.props.setHideInviteButton()}},{key:"onAddChannelCloseClick",value:function e(){this.props.setHideAddChannelButton()}},{key:"onItemSelected",value:function e(t){this.selectedItemRef=t}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"setRowRefByKey",value:function e(t,a){this.rowRefByKey[t]=a}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"getRowRefFromKey",value:function e(t){var a=this.rowRefByKey[t];if(a&&a.getWrappedInstance)return a.getWrappedInstance();return a}},{key:"focus",value:function e(){this.selectedItemRef&&this.selectedItemRef.focus()}},{key:"clogInvitePeopleButton",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(a)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var a=this;var r=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(Na["a"])({fromValue:this.currentScrollTop,toValue:r,duration:200,easing:"easeOutQuad",onTick:function e(t){var r=t.value,n=t.nextTick;a.jumpToOffset(r);n()}})}},{key:"scrollToTopOfChannelList",value:function e(){this.jumpToOffset(0)}},{key:"jumpToOffset",value:function e(t){this.Scrollbar&&this.Scrollbar.scrollTop(t);this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.scrollToOffset(t)}},{key:"isRowFocusable",value:function e(t){var a=t.index;var r=this.props.rows[a].key;var n=this.getRowRefFromKey(r);if(n&&n.hasPrimaryAction)return n.hasPrimaryAction();return false}},{key:"renderVirtualizedRowWithWrapper",value:function e(t){var a=this.props.rows[t];return n.a.createElement("div",{style:{height:a.height}},this.renderRow(a))}},{key:"renderRowWithWrapper",value:function e(t){var a=t.height,r=t.type,i=t.key;var s={quickswitcherButton:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackCTA:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[r];return n.a.createElement("div",{key:i,style:{height:a},role:s},this.renderRow(t))}},{key:"renderRow",value:function e(t){var a=this;var r=this.props,i=r.onItemSelect,s=r.featureSeeMoreChannels;var o=function e(r){return a.setRowRefByKey(t.key,r)};switch(t.type){case"quickswitcherButton":return n.a.createElement(ua,{ref:o});case"allThreadsLink":return n.a.createElement(bn,{ref:o,qaLabel:"all_thread_link",selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return n.a.createElement(On,{selectItem:i});case"pageLink":return n.a.createElement(Bn,{ref:o,id:t.id,selectItem:i,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t);case"composer_draft":return this.renderDraft(t);case"thread_draft":return this.renderThreadDraft(t);case"appDmSuggestion":return this.renderAppDmSuggestion(t.id,t.index);case"addAChannelLink":return n.a.createElement(An,{isDim:t.dim,qaLabel:"add_channel",label:s?Xs.t("See more channels"):Xs.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return n.a.createElement(Hn,{selectItem:this.onInviteClick,dim:t.dim,qaLabel:"invite_people",label:Xs.t("Invite people"),showClose:true,onClickClose:this.onInviteCloseClick});case"installAppsLink":return n.a.createElement(ai,null);case"appSuggestionLinks":return n.a.createElement(fi,null);case"upgradeSlackCTA":return n.a.createElement(Bi,null);case"spacer":return null;case"topPadding":return null;case"emptyState":return null;default:Object(b["b"])().warn("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var a=this.props,r=a.onCreateChannelClick,i=a.onCreateSharedChannelClick;switch(t){case"drafts":return n.a.createElement(Pi,{selectItem:this.props.onItemSelect,scrollToTopOfChannelList:this.scrollToTopOfChannelList});case"starred":if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(wi,{label:Xs.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return n.a.createElement(Wi,null);case"sharedChannels":return n.a.createElement(as,{onPlusClick:i});case"channels":return n.a.createElement(_s,{onPlusClick:r});case"orgWideChannels":return n.a.createElement(Ms,null);case"ims":return n.a.createElement(Ds,null);case"apps":return n.a.createElement(Ks,null);default:return null}}},{key:"renderFolderHeading",value:function e(t){return n.a.createElement(ws,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderAppDmSuggestion",value:function e(t,a){return n.a.createElement(ur,{id:t,index:a})}},{key:"renderChannel",value:function e(t){var a=this;var r=t.id,i=t.index;var s=function e(r){return a.setRowRefByKey(t.key,r)};if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(Hr,{ref:s,key:r,id:r,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:i,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var o=n.a.createElement(Hr,{ref:s,key:r,id:r,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:i});return o}},{key:"renderDraft",value:function e(t){var a=this;var r=t.key,i=t.id;return n.a.createElement($r,{id:i,key:i,onItemSelected:this.onItemSelected,ref:function e(t){return a.setRowRefByKey(r,t)},selectItem:this.props.onItemSelect})}},{key:"renderThreadDraft",value:function e(t){var a=this;var r=t.id,i=t.params,s=void 0===i?{}:i;var o=s.channelId,l=s.threadTs;return n.a.createElement(sn,{channelId:o,threadTs:l,key:r,onItemSelected:this.onItemSelected,ref:function e(r){return a.setRowRefByKey(t.key,r)}})}},{key:"render",value:function e(){var t=this;var a=this.props.featureSidebarVirtualized;var r=this.props.rows.map(function(e){return e.key});return n.a.createElement(Aa["a"],{onResize:this.onResize},function(e){var i=e.width,s=e.height;return a?n.a.createElement(Da["a"],{ref:t.keyboardNavigableListRef,width:i,height:s,className:"p-channel_sidebar__static_list",keys:r,rowRenderer:t.renderVirtualizedRowWithWrapper,ariaLabel:Xs.t("Channels and direct messages"),onScroll:t.onScroll,onItemClick:t.onKeyboardNavigableListItemClick,isFocusableItem:t.isRowFocusable,pageHeight:s-26}):n.a.createElement(Ma["a"],{width:i,height:s,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},n.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Xs.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(n.a.PureComponent);eo.displayName="ChannelList";eo.defaultProps=$s;var to=Object(B["a"])()?Object(xa["a"])(eo,"ChannelList",{index:2}):eo;var ao=to;var ro=new pe["b"]("channel_sidebar");var no={isShowing:jt["b"].bool.isRequired,linkedId:jt["b"].oneOfType([jt["b"].string,jt["b"].bool]),isMention:jt["b"].bool,position:jt["b"].oneOf(["top","bottom"]),ensureRowInView:jt["b"].func};var io={linkedId:null,isMention:false,position:"top",ensureRowInView:f.a.noop};var so=function(e){It()(t,e);function t(){kt()(this,t);var e=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}Ct()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.linkedId,n=a.ensureRowInView;t.preventDefault();r&&n(r)}},{key:"render",value:function e(){var t=this.props,a=t.isShowing,r=t.position,i=t.isMention,s=t.linkedId;if(!a)return null;var o=At()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===r,"p-channel_sidebar__banner--bottom":"bottom"===r});var l="top"===r?"up":"down";var c=i?ro.t("Unread Mentions"):ro.t("More Unreads");return n.a.createElement(Gt["c"],{className:o,onClick:this.onClick,"data-qa-linked-id":s},c,n.a.createElement(Ht["b"],{type:"arrow_"+l,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(n.a.PureComponent);so.displayName="UnreadBanner";so.defaultProps=io;var oo=so;var lo=a(4751);var co=new pe["b"]("composer");var uo={featureComposeFlow:jt["b"].bool,openComposerPage:jt["b"].func};var po={featureComposeFlow:false,openComposerPage:v["noop"]};var mo=function e(t){if(!t.featureComposeFlow)return null;return n.a.createElement(Gt["c"],{onClick:t.openComposerPage,className:"p-channel_sidebar__compose_button"},n.a.createElement(Ht["b"],{type:"plus-thick",className:"p-channel_sidebar__compose_button_icon"}),co.t("Compose"))};mo.displayName="ComposeButton";mo.defaultProps=po;var ho=function e(t){return{featureComposeFlow:Object(de["d"])(t)}};var vo=function e(t){return{openComposerPage:function e(){return t(lo["a"].apply(void 0,arguments))}}};var fo=Object(i["connect"])(ho,vo)(mo);var bo=a(1831);var go=new pe["b"]("channel_sidebar");var _o="react_channel_sidebar_update";var yo=Object(z["a"])(1);var ko=2;var Oo=10;var Co=24;var Eo={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var So={isBooted:jt["b"].bool,selectedItemId:jt["b"].string,unreadIds:jt["b"].arrayOf(jt["b"].string),mutedMentionIds:jt["b"].arrayOf(jt["b"].string),mentionIds:jt["b"].arrayOf(jt["b"].string),rows:jt["b"].arrayOf(jt["b"].object),rowsMap:jt["b"].object,rowIds:jt["b"].arrayOf(jt["b"].string),idsNeedingPresenceSubscription:jt["b"].arrayOf(jt["b"].string),onItemSelect:jt["b"].func,onInviteClick:jt["b"].func,onCreateChannelClick:jt["b"].func,jumperCoachmarkState:jt["b"].string,historyNavigationEnabled:jt["b"].bool,useHistoryNavigation:jt["b"].bool,featureClassicNav:jt["b"].bool,sidebarFoldersIsEnabled:jt["b"].bool,initializeFolderData:jt["b"].func,initializeAppSuggestionLinksData:jt["b"].func,createFolder:jt["b"].func,ensureDraftChannelObjects:jt["b"].func,dragFolderOrChannel:jt["b"].func,ariaLandmarkLabel:jt["b"].string,featureSonicPresenceManager:jt["b"].bool,featureSonicInputs:jt["b"].bool,telemeter:jt["b"].object,logger:jt["b"].object,isWindowFocused:jt["b"].bool,bootType:jt["b"].oneOf(["warm","cold"]),teamId:jt["b"].string,clogger:jt["b"].object,suggestedChannelsMap:jt["b"].object,setHideInviteButton:jt["b"].func,setHideAddChannelButton:jt["b"].func,featureSeeMoreChannels:jt["b"].bool,userAttentionIsOnChat:jt["b"].bool,composerVisible:jt["b"].bool,featureSidebarVirtualized:jt["b"].bool};var wo={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:f.a.noop,onInviteClick:f.a.noop,onCreateChannelClick:f.a.noop,jumperCoachmarkState:null,historyNavigationEnabled:false,useHistoryNavigation:false,featureClassicNav:false,sidebarFoldersIsEnabled:false,ensureDraftChannelObjects:void 0,initializeFolderData:f.a.noop,initializeAppSuggestionLinksData:f.a.noop,createFolder:f.a.noop,dragFolderOrChannel:f.a.noop,ariaLandmarkLabel:null,featureSonicPresenceManager:false,featureSonicInputs:false,telemeter:null,isWindowFocused:false,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:f.a.noop,setHideAddChannelButton:f.a.noop,featureSeeMoreChannels:false,userAttentionIsOnChat:false,composerVisible:false,featureSidebarVirtualized:false};var Io=function(e){It()(t,e);function t(e){kt()(this,t);var a=St()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.ensureRowInView=a.ensureRowInView.bind(a);a.onResize=a.onResize.bind(a);a.onScroll=a.onScroll.bind(a);a.onItemSelect=a.onItemSelect.bind(a);a.onDragStart=a.onDragStart.bind(a);a.onDragEnd=a.onDragEnd.bind(a);a.onDragOver=a.onDragOver.bind(a);a.onDrop=a.onDrop.bind(a);a.onCreateFolder=a.onCreateFolder.bind(a);if(!Object(B["a"])()){a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onFocusWithin=a.onFocusWithin.bind(a)}a.state=h()({},a.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasInitializedAppSuggestionLinksData:false});Object(B["a"])()||(a.state.hasKeyboardFocus=Eo.NOT_FOCUSED);a.presenceList=Object(Pt["a"])(a.props.idsNeedingPresenceSubscription);a.commands=[{keys:["option+up"],handler:a.gotoNext.bind(a,"up",false)},{keys:["option+down"],handler:a.gotoNext.bind(a,"down",false)},{keys:["option+shift+up"],handler:a.gotoNext.bind(a,"up",true)},{keys:["option+shift+down"],handler:a.gotoNext.bind(a,"down",true)}];a.pendingEnsureRowInView=false;a.shouldTrackTTFMP=true;a.isSuggestedChannelsClogSent=false;a.hasInitializedDraftsData=false;return a}Ct()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Lt["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();this.shouldTrackTTFMP=this.props.isWindowFocused}},{key:"componentWillReceiveProps",value:function e(t){var a=this;this.shouldTrackTTFMP=this.shouldTrackTTFMP&&t.isWindowFocused;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(Nt["a"])()&&!Object(Z["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var r="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var n=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(r||n)&&this.ChannelList&&this.ChannelList.jumpToOffset(0);this.setState(function(e){var r=h()({},e,a.getUnreadRows(t));a.ChannelList&&a.ChannelList.resetCurrentScrollTopMaybe(r.listHeight,t.rows);return h()({},r,a.getBannerState(r))})}},{key:"componentWillUpdate",value:function e(t){yo&&t.telemeter.mark(_o+"_mark")}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.selectedItemId,n=a.isBooted,i=a.jumperCoachmarkState,s=a.rows,o=a.suggestedChannelsMap,l=a.clogger,c=a.telemeter;var u="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var d=t.selectedItemId!==r;var p=n&&!t.isBooted;u||!d&&!p||this.ensureRowInView(r);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();yo&&c.measureAndClear(_o+"_mark",_o);if(!this.isSuggestedChannelsClogSent&&Object.keys(o).length){var m=s.filter(function(e){return"channel"===e.type&&o[e.id]}).length;if(m&&l.track){this.isSuggestedChannelsClogSent=true;l.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:m})}}}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.dataTransfer;a.effectAllowed="move";a.dropEffect="move";var r=t.target;while(r&&!r.attributes["data-drag-type"])r=r.parentNode;var n={src:{type:r.attributes["data-drag-type"].value,id:r.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;this.setState(function(e){return{dragData:h()({},e.dragData,{dest:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var a=this;var r=t.height;this.setState(function(e){var t=h()({},e,{listHeight:r});return h()({},t,a.getBannerState(t))},function(){false!==a.pendingEnsureRowInView&&a.ensureRowInView(a.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent,r=t.target,n=t.currentTarget;if(a&&"mousedown"===a.type)return;var i=r===n?Eo.CONTAINER_FOCUSED:Eo.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:Eo.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:Eo.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.routeParams;return this.props.onItemSelect(t,{routeParams:r})}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.rowsMap,r=t.unreadIds,n=t.mentionIds;return{firstUnread:a[f.a.first(r)],lastUnread:a[f.a.last(r)],firstMention:a[f.a.first(n)],lastMention:a[f.a.last(n)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.firstMention,r=t.firstUnread,n=t.lastMention,i=t.lastUnread,s=t.listHeight;var o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var l=!!(r&&r.scrollBottom-Oo<=o);var c=!!(i&&i.scrollTop+Oo>=o+s);var u=!!(a&&a.scrollBottom-Oo-(l?Co:0)<=o);var d=!!(n&&n.scrollTop+Oo+(c?Co:0)>=o+s);return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:l,scrolledAboveLastMention:d,scrolledAboveLastUnread:c}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return h()({},e,{hasInitializedFolderData:true})})}}},{key:"maybeLoadDraftsData",value:function e(){if(this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData){this.props.ensureDraftChannelObjects();this.hasInitializedDraftsData=true}}},{key:"maybeLoadAppSuggestionLinksData",value:function e(){if(!this.state.hasInitializedAppSuggestionLinksData&&this.props.initializeAppSuggestionLinksData!==f.a.noop){this.props.initializeAppSuggestionLinksData();this.setState(function(){return{hasInitializedAppSuggestionLinksData:true}})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var a=this.props,r=a.rows,n=a.rowsMap,i=a.rowIds;var s=n[t];if(!s)return;var o=this.ChannelList.currentScrollTop;var l=this.state.listHeight;if(0===l){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var c=Math.max(i.indexOf(t)-ko,0);var u=r[c].scrollTop;if(u<o){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+ko,r.length-1);var p=r[d].scrollBottom-l;p>o&&this.ChannelList.scrollToTarget(p)}},{key:"gotoNext",value:function e(t,a,r){var n=this;var i=this.props,s=i.rows,o=i.rowIds,l=i.selectedItemId,c=i.featureSonicInputs,u=i.userAttentionIsOnChat;if(Object(B["a"])()){if(!u)return}else if(!Object(Dt["f"])())return;if(c){var d=Object(Mt["b"])(document.activeElement);if(d){if(!d.isEmpty()){if("up"===t&&(!d.isCursorAtBeginning||!d.isCursorAtBeginning()))return;if("down"===t&&(!d.isCursorAtEnd||!d.isCursorAtEnd()))return}}else if(Object(Bt["a"])(document.activeElement))return}else{var p=Object(Rt["c"])();var m=Object(xt["e"])(p);if(Object(xt["f"])(p)&&m>0){if(Object(xt["h"])(p))return;var v=Object(xt["b"])(p).start;if("up"===t&&0!==v)return;if("down"===t&&v!==m)return}}var b=o.indexOf(l);var g=f.a.filter(f.a.filter(f.a.map(s,function(e,t){return h()({},e,{index:t})}),function(e){return"channel"===e.type}),function(e){return!a||f.a.indexOf(n.props.unreadIds,e.id)>=0||f.a.indexOf(n.props.mutedMentionIds,e.id)>=0});if(0===g.length)return;var _=void 0;_="down"===t?f.a.find(g,function(e){return e.index>b}):f.a.findLast(g,function(e){return e.index<b});void 0===_&&(_="down"===t?f.a.first(g):f.a.last(g));this.props.onItemSelect(_.id);r&&r.preventDefault()}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===Eo.CONTAINER_FOCUSED)return n.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,a=t.rows,r=t.onInviteClick,i=t.onCreateChannelClick,s=t.selectedItemId,o=t.historyNavigationEnabled,l=t.useHistoryNavigation,c=t.featureClassicNav,u=t.sidebarFoldersIsEnabled,d=t.ariaLandmarkLabel,p=t.telemeter,m=t.logger,v=t.bootType,f=t.teamId,b=t.featureSeeMoreChannels,g=t.featureSidebarVirtualized,_=t.clogger,y=t.userAttentionIsOnChat,k=t.composerVisible;var O=this.state,C=O.scrolledBelowFirstMention,E=O.scrolledBelowFirstUnread,S=O.scrolledAboveLastMention,w=O.scrolledAboveLastUnread,I=O.firstMention,j=O.firstUnread,T=O.lastMention,A=O.lastUnread;var N=!Object(B["a"])()&&this.state.hasKeyboardFocus!==Eo.NOT_FOCUSED;var M=Object(B["a"])()||this.state.hasKeyboardFocus!==Eo.CONTAINER_FOCUSED?null:"-1";var P=At()("p-channel_sidebar",{focusablesection:!Object(B["a"])()&&N,"p-channel_sidebar--classic_nav":c});var R=Object(B["a"])()?{}:{"data-is-focusable-section":true,tabIndex:M};var x=n.a.createElement("nav",h()({className:P,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":s,"aria-labelledby":d},R),n.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},go.t("Channel Sidebar")),n.a.createElement(bo["a"],null),o&&n.a.createElement(ja,{useHistoryNavigation:l}),n.a.createElement("div",{className:"p-channel_sidebar__list"},n.a.createElement(oo,{position:"top",isShowing:C||E,isMention:C,linkedId:C&&I.id||E&&j.id,ensureRowInView:this.ensureRowInView}),n.a.createElement(ao,{rows:a,onItemSelect:this.onItemSelect,onInviteClick:r,onCreateChannelClick:i,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:u,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:p,logger:m,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:v,teamId:f,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureSeeMoreChannels:b,featureSidebarVirtualized:g,clogger:_,userAttentionIsOnChat:y,composerVisible:k}),n.a.createElement(oo,{position:"bottom",isShowing:S||w,isMention:S,linkedId:S&&T.id||w&&A.id,ensureRowInView:this.ensureRowInView})),n.a.createElement(fo,null),Object(B["a"])()?null:this.renderFocusOutline());return Object(B["a"])()?x:n.a.createElement(Ft["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},x)}}]);return t}(r["PureComponent"]);Io.displayName="ChannelSidebar";Io.defaultProps=wo;var jo=Io;var To=10;var Ao="react_channel_sidebar_selector_factory";var No=Object(z["a"])(1);var Mo=function e(t,a){return No&&Object(g["c"])({state:a}).mark(t+"_mark")};var Po=function e(t,a){return No&&Object(g["c"])({state:a}).measureAndClear(t+"_mark",t)};var Ro=function e(t){if(Object($["e"])(t))return false;if(Object(O["h"])(t,"add_channel_prompt_dismissed"))return false;var a=Object(T["m"])(t);if(a)return false;var r=!!Object(O["f"])(t);if(r)return true;var n=Object(E["b"])(t)||{};var i=Object.keys(n);var s=0;for(var o=0;o<i.length;o++){Object(S["isUserInChannel"])(n[i[o]])&&(s+=1);if(s>To)return false}return true};var xo=function e(t){if(!Object(D["canUserSeeInviteModal"])(t))return false;var a=f.a.size(f.a.filter(Object(T["a"])(t),function(e){return!e.is_slackbot}));if(Object(O["h"])(t,"channel_sidebar_hide_invite"))return false;if(a>=2)return"dim";return true};var Do=function e(t){return!Object($["e"])(t)};var Fo=function e(t){var a=Object(Q["a"])(t);var r=Le(t),n=r.sidebarSections,i=r.sidebarSectionsOrdered,s=r.idsNeedingPresenceSubscription;var o="enabled"===Object(d["getGroupForUser"])(t,"folders_sidebar")&&Object(O["h"])(t,"folders_enabled");var l=o?Object(k["getFolders"])(t):[];var c=_t(t);var u=c&&"treatment"===Object(d["getGroupForUser"])(t,"sidebar_upgrade_button")?"button":"link";var p=dt({hasQuickswitcherButton:!a&&Object(O["h"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(O["h"])(t,"enable_unread_view"),hasAddAChannelLink:Ro(t),hasInvitePeopleLink:xo(t),hasSearchLink:Object(Y["a"])(t),appSuggestionsCount:bt(t),hasUpgradeSlackCTA:c,upgradeSlackCTAVersion:u,hasThreadsLink:Do(t),sidebarSectionsOrdered:i,sidebarSections:n,sidebarFoldersIsEnabled:o,sidebarFolders:l,pages:Object(X["a"])().filter(function(e){return Object(X["d"])(t,e)})||[]}),m=p.rows,h=p.rowsMap,v=p.rowIds;return{rows:m,rowsMap:h,rowIds:v,idsNeedingPresenceSubscription:s}};var Lo=function e(t){var a=void 0;var r=void 0;var n=void 0;var i=void 0;var s=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var p=void 0;var m=void 0;var v=void 0;var T=void 0;var D=void 0;var L=void 0;var U=void 0;return function(e,q){Mo(Ao,e);var W=Object(_["isFullyBooted"])(e);var z=Object(b["a"])({state:e});var Y=Object(x["a"])({state:e});var X=Object(g["c"])({state:e});var $=Object(R["isWindowFocused"])(e);var ee=Object(R["getBootType"])(e);if(!W)return{isBooted:W,isWindowFocused:$};var te=Object(M["a"])(e);var ae=q.onItemSelect;var re=Fo(e),ne=re.rows,ie=re.rowsMap,se=re.rowIds,oe=re.idsNeedingPresenceSubscription;var le=bt(e);var ce=[];var ue=[];var de=[];if(Object(A["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){Object(j["getThreadsMentionCount"])(e)&&ue.push("Vall_threads");Object(j["hasUnreadThreads"])(e)&&ce.push("Vall_threads")}else{Object(I["getThreadsMentionCount"])(e)&&ue.push("Vall_threads");Object(I["hasUnreadThreads"])(e)&&ce.push("Vall_threads")}var pe=se.length;for(var me=0;me<pe;me++){var he=se[me];var ve=Object(E["x"])(e,he);var fe=Object(w["isChannelMutedById"])(e,he);!fe&&Object(E["y"])(e,he)&&ce.push(he);!fe&&ve&&ue.push(he);fe&&ve&&de.push(he)}var be=Object(J["e"])(e);var ge=(Object(K["a"])(e)||"composer_toolbar"===Object(d["getGroupForUser"])(e,"composer_toolbar"))&&Object(V["isComposerVisible"])(e);var _e=Object(y["getJumperCoachmarkState"])(e);var ye=Object(O["h"])(e,"sidebar_behavior");var ke="enabled"===Object(d["getGroupForUser"])(e,"folders_sidebar")&&Object(O["h"])(e,"folders_enabled");var Oe=Object(Q["a"])(e);var Ce=Object(Q["b"])(e);var Ee=Object(A["isFeatureEnabled"])(e,"feature_sonic_inputs");var Se=Object(A["isFeatureEnabled"])(e,"feature_classic_nav");var we=Object(A["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var Ie=Object(A["isFeatureEnabled"])(e,"feature_degraded_send");var je=Object(A["isFeatureEnabled"])(e,"feature_see_more_channels");var Te=Object(A["isFeatureEnabled"])(e,"feature_sidebar_virtualized");var Ae=f.a.some(ne,function(e){return"addAChannelLink"===e.type});var Ne=Object(G["b"])(e);var Me=Object(S["getSuggestedChannels"])(e);var Pe=Me.join(",");if(te===r&&Object(Z["a"])(ce,n)&&Object(Z["a"])(ue,i)&&Object(Z["a"])(de,s)&&Object(Z["a"])(se,o)&&_e===l&&ye===c&&ke===u&&Se===p&&Object(Z["a"])(q,m)&&Ae===v&&Pe===T&&be===D&&ge===L&&le===U)return a;var Re=h()({},q,{isBooted:W,rows:ne,rowsMap:ie,rowIds:se,selectedItemId:te,unreadIds:ce,mentionIds:ue,mutedMentionIds:de,userAttentionIsOnChat:be,composerVisible:ge,jumperCoachmarkState:_e,historyNavigationEnabled:Oe,useHistoryNavigation:Ce,featureClassicNav:Se,idsNeedingPresenceSubscription:oe,featureSonicPresenceManager:we,featureSonicInputs:Ee,featureSeeMoreChannels:je,sidebarFoldersIsEnabled:ke,featureSidebarVirtualized:Te,ensureDraftChannelObjects:function e(){return t(H())},initializeFolderData:function e(){return t(Object(k["initializeFolderData"])())},initializeAppSuggestionLinksData:function e(){return t(Object(y["initializeAppSuggestionLinksData"])())},dragFolderOrChannel:function e(a){var r=a.src,n=a.dest;t(Object(k["dragFolderOrChannel"])({src:r,dest:n}));t(Object(k["saveFolderData"])())},createFolder:function e(){return t(Object(k["createFolder"])())},setHideInviteButton:function e(){Y.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});Y.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});return t(Object(C["d"])({pref:"channel_sidebar_hide_invite",value:true}))},setHideAddChannelButton:function e(){return t(Object(C["d"])({pref:"add_channel_prompt_dismissed",value:true}))},onItemSelect:function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.routeParams;z.info("CHANNEL-SIDEBAR","onItemSelect",a);Ie&&te===a&&t(Object(F["a"])({channelId:a}));if(Object(B["a"])()){t(Object(P["a"])({id:a,routeParams:n}));t(Object(N["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}else ae&&ae(a).then(function(){t(Object(N["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}).catch(f.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:z,clogger:Y,telemeter:X,isWindowFocused:$,bootType:ee,teamId:Ne,suggestedChannelsMap:Me.reduce(function(e,t){e[t]=t;return e},{})});a=Re;r=te;n=ce;i=ue;s=de;o=se;l=_e;c=ye;u=ke;p=Se;m=q;v=Ae;T=Pe;D=be;L=ge;U=le;Po(Ao,e);return Re}};var Bo={withRef:true};var Uo=Object(i["connectAdvanced"])(Lo,Bo)(jo);var qo=Uo;var Wo=a(886);var Ho=a(1281);var Go=a(161);var Vo="react_channel_sidebar_display_item";var Ko=Object(z["a"])(1);var zo=function e(t,a,r){var n=Object(g["c"])({state:a()});Ko&&n.mark(Vo+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:r})).catch(function(e){Object(Wo["c"])("beep");Object(b["a"])({getState:a}).error(e,"displayModelOrViewById errored",{subtype:"displayModelOrViewById_beep"});throw e}).finally(function(){Ko&&n.measureAndClear(Vo+"_mark",Vo)})};var Qo=function e(t,a,r){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(o["f"])(t);var m=c.getState();var h=Object(d["getGroupForUser"])(m,"speedy_sidebar_boot");"experiment"===h&&c.dispatch(Object(l["bulkAddChannels"])({channels:Object(u["a"])()}));var v=function e(t){return zo(c.dispatch,c.getState,t)};var f=Object(x["a"])({state:m});var b=function e(){f.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}});c.dispatch(Object(Ho["a"])({source:"channel_sidebar"}))};Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(Go["a"],null,n.a.createElement(qo,{onItemSelect:v,onCreateChannelClick:p["b"],onInviteClick:b,ref:r}))),a)};var Yo=Qo;var Jo=a(46);Object(Jo["a"])("interop.mountChannelSidebar",Yo)},1193:function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e){var t=e.prevUserAttentionIsOnChat,a=e.prevComposerVisible,r=e.currentUserAttentionIsOnChat,n=e.currentComposerVisible;if(!t&&r&&!n)return true;if(a&&!n&&r)return true;return false}},1194:function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e){var t=e.prevUserAttentionIsOnChat,a=e.prevComposerVisible,r=e.currentUserAttentionIsOnChat,n=e.currentComposerVisible;if(!r&&t)return true;if(!a&&n)return true;return false}},1198:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(0);var v=a(13);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(329);var y=a(371);var k=a(42);var O=a(20);var C=a(300);var E=a(2095);var S=a(918);var w=a(3626);var I=a.n(w);var j={msg:h["b"].object.isRequired,className:h["b"].string,children:h["b"].node,itemId:h["b"].string,position:h["b"].oneOf(["default","inside","above"]),show:h["b"].bool,showComment:h["b"].bool,showShare:h["b"].bool,showReact:h["b"].bool,showJump:h["b"].bool,showStar:h["b"].bool,showMoreActions:h["b"].bool,jumpOrigin:h["b"].string,messageContainerType:h["b"].oneOf(Object(b["values"])(O["MESSAGE_CONTAINERS"])),viewContext:h["b"].string,hover:h["b"].bool,setHover:h["b"].func,isEditing:h["b"].bool,maybeStartEditingMessage:h["b"].func,renderOffscreen:h["b"].bool,clogLinkClick:h["b"].func,clogThreadEvent:h["b"].func};var T={className:void 0,children:void 0,position:"default",itemId:void 0,show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:b["noop"],isEditing:false,maybeStartEditingMessage:b["noop"],renderOffscreen:false,clogLinkClick:b["noop"],clogThreadEvent:b["noop"]};var A=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuOpen=a.onMenuOpen.bind(a);a.onMenuClose=a.onMenuClose.bind(a);a.startEditing=a.startEditing.bind(a);a.renderActions=a.renderActions.bind(a);return a}s()(t,[{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"startEditing",value:function e(){var t=this.props,a=t.msg,r=t.viewContext;this.props.maybeStartEditingMessage({channelId:Object(k["getMessageChannelId"])(a),ts:Object(k["getMessageTs"])(a),viewContext:r,scroll:true})}},{key:"renderActions",value:function e(){var t=this.props,a=t.msg,r=t.hover,n=t.show,i=t.showComment,s=t.showShare,o=t.showReact,l=t.showJump,c=t.showStar,u=t.showMoreActions,d=t.jumpOrigin,m=t.messageContainerType,h=t.isEditing,v=t.renderOffscreen,f=t.clogLinkClick,b=t.clogThreadEvent,g=t.itemId;if(false===n)return null;if(void 0===n&&!r&&!v)return null;if(h)return null;if(Object(k["isEKMAccessDeniedMessage"])(a)||Object(k["isDLPTombstoneMessage"])(a))return null;if(a.isEKMError)return null;var _=a.ts,O=a.thread_ts,C=a.channel,S=a.file,w=a.comment,I=a.subtype;return p.a.createElement(E["a"],{ts:_,threadTs:O,channelId:C,reactionKey:Object(y["b"])(a),isStarred:Object(k["isStarred"])(a,S,w),isReply:Object(k["isReply"])(a),isEphemeral:Object(k["isEphemeral"])(a),subtype:I,comment:a.comment&&a.comment.id,fileIds:a.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:s,showReact:o,showJump:l,showStar:c,showMoreActions:u,jumpOrigin:d,editHandler:this.startEditing,messageContainerType:m,renderOffscreen:v&&!r&&!n,clogLinkClick:f,clogThreadEvent:b,itemId:g})}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position;var n=f()("c-message_kit__actions","c-message_kit__actions--"+r,this.props.className);return p.a.createElement("div",{className:n,style:{position:"relative"}},a,this.renderActions())}}]);return t}(d["PureComponent"]);A.displayName="MessageActions";A.defaultProps=T;var N=function e(t,a){var r=a.msg,n=a.viewContext;var i=Object(k["getMessageChannelId"])(r);var s=Object(k["getMessageTs"])(r);var o=!!Object(_["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});return{isEditing:o}};var M={maybeStartEditingMessage:function e(){return _["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(C["b"])(Object(S["b"])(Object(m["connect"])(N,M)(A)))},1199:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var r=a(6);var n=a(197);var i=a(44);var s=a(0);var o=a(1);var l=a.n(o);var c=new r["b"]("search");function u(e){var t=e.onClick,a=e.short,r=e.className;return l.a.createElement(n["a"],{enabled:["feature_tinyspeck","feature_search_feedback"]},l.a.createElement("span",{className:r},a?"":c.t("Something off?")+" ",l.a.createElement(i["a"],{onClick:t},c.t("Give feedback"))))}u.displayName="FeedbackLink";u.defaultProps={className:"",short:false}},1200:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(0);var l=a(1);var c=a.n(l);var u=a(17);var d=a(41);var p=a(22);var m=a(35);var h=a(33);var v=a(45);var f=a(28);var b=a(39);var g=a(18);var _=a(12);var y=a(369);var k=a(161);var O=a(5);var C=a.n(O);var E=a(4);var S=a.n(E);var w=a(7);var I=a.n(w);var j=a(8);var T=a.n(j);var A=a(2);var N=a(296);var M=a(6);var P=a(82);var R=a(1082);var x=a(27);var D=a(152);var F=a(4719);var L=a(10);var B=a.n(L);var U=a(13);var q=a.n(U);var W=a(38);var H=a(822);var G=a(591);var V=a(2002);var K=a(557);var z=a(1689);var Q=a(1190);var Y=a(283);var J=a(551);var X=a(1038);var Z=a(86);var $=a(1828);var ee=a(9);var te=a(44);var ae=a(2003);var re=new M["b"]("apps_browser");var ne={isInternetExplorer:o["b"].bool,isFirefoxAndWindows:o["b"].bool,isFirefoxAndMac:o["b"].bool,isMacSsbBuild:o["b"].bool,clogger:o["b"].object.isRequired,installedApps:o["b"].array,isShowingDefaultAppCategories:o["b"].bool,featureM11nAppsBrowser:o["b"].bool,hasSeenAppSpaceTutorial:o["b"].bool};var ie={isInternetExplorer:false,isFirefoxAndMac:false,isFirefoxAndWindows:false,isMacSsbBuild:false,installedApps:[],isShowingDefaultAppCategories:true,featureM11nAppsBrowser:false,hasSeenAppSpaceTutorial:false};var se=function(e){T()(t,e);function t(e){C()(this,t);var a=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.limitMeterClogId="";a.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;a.appLimitMeterClogPayload={};a.cloggedLimitMeterImpression=false;a.showLimitMeter=false;a.handleAppLimitMeterClickClog=a.handleAppLimitMeterClickClog.bind(a);return a}S()(t,[{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"render",value:function e(){var t=this;var a=10;var r=this.props.installedApps.length;var n=this.props,i=n.isFirefoxAndWindows,s=n.isFirefoxAndMac,o=n.isInternetExplorer,l=n.clogger,u=n.featureM11nAppsBrowser,d=n.isShowingDefaultAppCategories;if(!r||r>a||!d)return null;var p="num_of_apps="+r;var m=!!r;var h="limit-meter-"+G["b"];this.showLimitMeter=m;if(!this.showLimitMeter)return null;this.firstSelectableAppIndex=0;var v=void 0;var f=void 0;var b=void 0;var g=void 0;var _=void 0;var y=q()("p-apps_browser__app_limit_meter",{is_ff_and_mac:s});if(r<6){v=re.t("Add apps to get things done");b="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";this.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";g="link_app_directory";f=re.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(te["a"],{href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}else if(r<10){v=re.t("Upgrade for unlimited apps");b="/pricing?ui_step=280&ui_element=5";this.LimitMeterClogId="GROWTH_PRICING";g="pricing_link";_=q()({hidden:this.props.isMacSsbBuild});f=re.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:r},function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(te["a"],{className:_,href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}else{v=re.t("Upgrade to add more apps");b="/pricing?ui_step=280&ui_element=5";this.LimitMeterClogId="GROWTH_PRICING";g="pricing_link";_=q()({hidden:this.props.isMacSsbBuild});f=re.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(te["a"],{className:_,href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}this.appLimitMeterClogPayload={num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:g}}};if(!this.cloggedLimitMeterImpression){if("GROWTH_PRICING"===this.LimitMeterClogId){l.track(this.LimitMeterClogId,this.appLimitMeterClogPayload);l.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}else{l.track(this.LimitMeterClogId,this.appLimitMeterClogPayload);l.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}this.cloggedLimitMeterImpression=true}return c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:h},c.a.createElement("div",{className:y,"data-qa":"apps_browser_app_limit_meter"},c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},c.a.createElement("b",null,v)),c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},f),c.a.createElement(ae["a"],{apps:this.props.installedApps,isFirefoxAndWindows:i,isFirefoxAndMac:s,isInternetExplorer:o,featureM11nAppsBrowser:u})))}}]);return t}(l["Component"]);se.displayName="AppLimitMeterContainer";se.defaultProps=ie;var oe=function e(t){var a=Object(h["getBrowser"])();return{installedApps:Object(H["d"])(t),isInternetExplorer:"ie"===a,isFirefoxAndWindows:"firefox"===a&&Object(h["isWindows"])(),isFirefoxAndMac:"firefox"===a&&Object(h["isMac"])(),isMacSsbBuild:Object(v["isAppStoreBuild"])(),clogger:Object(b["a"])({state:t}),featureM11nAppsBrowser:Object(ee["isFeatureEnabled"])(t,"feature_m11n_apps_browser")}};var le=Object(_["connect"])(oe,null)(se);var ce=new M["b"]("apps_browser");var ue={clogger:o["b"].object.isRequired,channelId:o["b"].string,team:o["b"].object.isRequired,hasSeenAppSpaceTutorial:o["b"].bool,addAppToChannelByMemberId:o["b"].func,addAppsVariant:o["b"].bool.isRequired,loadMoreApps:o["b"].func,searchInput:o["b"].string.isRequired,results:o["b"].array.isRequired,keys:o["b"].array.isRequired,isShowingDefaultAppCategories:o["b"].bool.isRequired,nextCursor:o["b"].string,openAboutApp:o["b"].func,openAppsTutorialModal:o["b"].func,closeModal:o["b"].func,getChannelMembershipInfoForUsers:o["b"].func,clientTheme:o["b"].string};var de={addAppToChannelByMemberId:A["noop"],hasSeenAppSpaceTutorial:false,channelId:void 0,nextCursor:void 0,loadMoreApps:A["noop"],openAboutApp:A["noop"],openAppsTutorialModal:A["noop"],closeModal:A["noop"],getChannelMembershipInfoForUsers:A["noop"],clientTheme:"light"};var pe=function e(){return{name:ce.t("What are apps?"),short_description:ce.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}};var me=function(e){T()(t,e);function t(e){C()(this,t);var a=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.isPaginating=false;a.renderRow=a.renderRow.bind(a);a.isFocusableItem=a.isFocusableItem.bind(a);a.paginate=a.paginate.bind(a);a.handleItemClick=a.handleItemClick.bind(a);return a}S()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.results,n=a.addAppsVariant;if(r!==t.results&&n){var i=r.reduce(function(e,t){"app"===t.type&&t.bot_user_id&&e.push(t.bot_user_id);return e},[]);this.props.getChannelMembershipInfoForUsers({channelId:this.props.channelId,userIds:i})}}},{key:"paginate",value:function e(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"shouldPaginate",value:function e(){return!!this.props.nextCursor}},{key:"loadMoreApps",value:function e(){var t=this;if(this.isPaginating)return;this.isPaginating=true;this.props.loadMoreApps().then(function(){t.isPaginating=false})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props.results[a]||{},n=r.type;return n===G["c"].APP||n===G["c"].APP_LIMIT_METER||n===G["c"].APP_TUTORIAL}},{key:"handleItemClick",value:function e(t){var a=t.currentTarget.children[0].dataset;a.app_id&&this.selectApp(a)}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"selectApp",value:function e(t){var a=this.props,r=a.clogger,i=a.channelId;var s={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.props.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===t.app_id){var o=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/pricing?ui_step=280&ui_element=5");r.track("GROWTH_PRICING",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps");r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added){this.props.closeModal();this.props.addAppToChannelByMemberId({memberId:t.bot_user_id,channelId:i})}else if("true"===t.is_installed){this.openAboutApp(t);r.track("APP_INDEX_VIEW_CLICK",s)}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");r.track("APP_INDEX_INSTALL_CLICK",s);r.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",n()({},s,{contexts:n()({},s.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"renderRow",value:function e(t,a){var r=a.key;var n=this.props.results;var i=n[t];switch(i.type){case G["c"].LOADING:return c.a.createElement("div",{style:{height:62}},c.a.createElement(Z["a"],{size:"jumbo"}));case G["c"].APP_LIMIT_METER:var s=this.props,o=s.isShowingDefaultAppCategories,l=s.hasSeenAppSpaceTutorial;var u={isShowingDefaultAppCategories:o,hasSeenAppSpaceTutorial:l};return c.a.createElement(le,u);case G["c"].CATEGORY:var d=i.display_name;return c.a.createElement("div",{className:q()("p-apps_browser__category_header",{margin_top_150:!(0===t)}),"data-category_header":"true","data-qa":"apps_browser__category_header"},d);case G["c"].APP_TUTORIAL:return c.a.createElement($["a"],{key:r,addAppsVariant:this.props.addAppsVariant,app:pe(),className:"p-apps_browser__app p-apps_browser__app--tutorial","data-app_index":t});case G["c"].APP:return c.a.createElement($["a"],{key:r,addAppsVariant:this.props.addAppsVariant,channelId:this.props.channelId,app:i,className:"p-apps_browser__app","data-app_index":t});default:return c.a.createElement(c.a.Fragment,null)}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.clientTheme,n=a.results,i=a.keys,s=a.searchInput;if(!n.length&&s)return c.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},ce.t("There are no apps matching"),"\xa0",c.a.createElement("strong",null,s));var o=q()("p-apps_browser__list_container",B()({"p-apps_browser__list_container--loading":0===i.length},"p-apps_browser__list_container--loading--"+r,0===i.length&&"light"!==r));return c.a.createElement(X["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return c.a.createElement("div",{className:o,"data-qa":"apps_browser__results_list",ref:n},c.a.createElement(J["a"],{width:a,height:Math.floor(r),keys:i,rowRenderer:t.renderRow,onItemClick:t.handleItemClick,loadPost:t.paginate,loadAround:t.paginate,isFocusableItem:t.isFocusableItem,hideHiddenStopTabs:true}))})}}]);return t}(l["Component"]);me.displayName="AppsBrowserResults";me.defaultProps=de;var he=function e(t){return{clogger:Object(b["a"])({state:t}),hasSeenAppSpaceTutorial:Object(W["h"])(t,"seen_app_space_tutorial"),searchInput:Object(H["k"])(t),results:Object(H["j"])(t),keys:Object(H["g"])(t),nextCursor:Object(H["h"])(t),isShowingDefaultAppCategories:Object(H["f"])(t),clientTheme:Object(K["getClientTheme"])(t)}};var ve=function e(t){return Object(N["bindActionCreators"])({openAboutApp:Q["b"],openAppsTutorialModal:z["a"],closeModal:d["closeModal"],getChannelMembershipInfoForUsers:Y["getChannelMembershipInfoForUsers"],loadMoreApps:R["d"],addAppToChannelByMemberId:V["a"]},t)};var fe=Object(_["connect"])(he,ve)(me);var be=a(2469);var ge=new M["b"]("apps_browser");var _e={clogger:o["b"].object.isRequired,channelId:o["b"].string,addAppsVariant:o["b"].bool,team:o["b"].object,fetchDefaultApps:o["b"].func,resetSearch:o["b"].func};var ye={channelId:void 0,addAppsVariant:false,team:void 0,fetchDefaultApps:A["noop"],resetSearch:A["noop"]};var ke=function(e){T()(t,e);function t(e){C()(this,t);var a=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleAppDirectoryButtonClick=a.handleAppDirectoryButtonClick.bind(a);a.renderHeader=a.renderHeader.bind(a);return a}S()(t,[{key:"componentDidMount",value:function e(){this.props.fetchDefaultApps()}},{key:"componentWillUnmount",value:function e(){this.props.resetSearch()}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"renderHeader",value:function e(){var t=this.props,a=t.addAppsVariant,r=t.channelId;var n=void 0;n=a&&r?c.a.createElement("h2",{className:"overflow_hidden"},ge.rt("Add apps to {channelName}",{channelName:c.a.createElement(D["a"],{channelId:r,inline:true,className:"overflow_ellipsis"})})):c.a.createElement("h2",null,ge.t("Browse Apps"));return c.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},n,c.a.createElement(x["d"],{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},ge.t("View App Directory")))}},{key:"render",value:function e(){var t=this.props,a=t.addAppsVariant,r=t.channelId,n=t.team;var i={addAppsVariant:a,channelId:r,team:n};return c.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},c.a.createElement("div",{className:"p-apps_browser__filter_container"},this.renderHeader(),c.a.createElement(F["a"],null)),c.a.createElement(fe,i))}}]);return t}(l["Component"]);ke.displayName="AppsBrowser";ke.defaultProps=ye;var Oe=function e(t){var a=Object(m["d"])(t);return{channelId:Object(P["a"])(t),team:a,clogger:Object(b["a"])({state:t})}};var Ce=function e(t){return Object(N["bindActionCreators"])({fetchDefaultApps:R["b"],resetSearch:R["e"]},t)};var Ee=Object(_["connect"])(Oe,Ce)(ke);var Se=a(21);var we=a(11);var Ie=a(116);var je=a(23);var Te=new M["b"]("apps_browser");function Ae(e){var t=e.tutorialSeen,a=e.openAppsTutorial,r=e.clogger;var n=Object(l["useCallback"])(function(){r.track("APP_INDEX_MANAGE_CLICK",null);r.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[r]);return c.a.createElement("div",{className:"p-apps_browser_links"},c.a.createElement(Ie["a"],{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:n,"data-qa":"apps_browser_manage_apps"},c.a.createElement(je["b"],{type:"cog-o",inline:true,className:"p-apps_browser_links__link_icon"}),Te.t("Manage apps...")),t&&c.a.createElement(Ie["a"],{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:a},c.a.createElement(je["b"],{type:"lightbulb-o",inline:true,className:"p-apps_browser_links__link_icon"}),Te.t("What are apps?")))}Ae.displayName="AppsBrowserHeaderLinks";var Ne="seen_app_space_tutorial";var Me=function e(t){return{tutorialSeen:Object(W["h"])(t,Ne),clogger:Object(b["a"])({state:t})}};var Pe=function e(t){return Object(N["bindActionCreators"])({openAppsTutorial:z["a"]},t)};var Re=Object(_["connect"])(Me,Pe)(Ae);var xe=new M["b"]("apps_browser");function De(e){var t=e.addAppsVariant,a=e.channelName;var r=t&&a?xe.t("Add apps to {channelName}",{channelName:a}):xe.t("Browse Apps");return c.a.createElement(y["a"],{showGoButton:false,showCancelButton:false,contentLabel:r,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},c.a.createElement(Re,null),c.a.createElement(k["a"],null,c.a.createElement("div",{className:"p-apps_browser_container"},c.a.createElement(Ee,e))))}De.displayName="AppsBrowserModal";De.defaultProps={addAppsVariant:false,channelName:""};var Fe=function e(t){var a=Object(P["a"])(t);if(!a)return{};var r=Object(Se["e"])(t,a);return{channelName:Object(we["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})}};var Le=Object(_["connect"])(Fe)(De);var Be=a(4771);var Ue=Object(u["b"])("Opens the apps browser modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.referringEventId,i=a.referringUiContext,o=a.channelId,l=s()(a,["referringEventId","referringUiContext","channelId"]);var u=Object(H["l"])(t());!l.addAppsVariant&&u&&e(Object(Be["a"])());var _=Object(b["a"])({getState:t});_.track(g["l"].APP_INDEX_OPEN,null);l.addAppsVariant&&r&&_.track(g["l"].APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:g["w"].IMPRESSION},referring_ui_context:i,core:{channel_id:o}},referring_event_id:r});var y=Object(p["b"])(t());var k=Object(m["j"])(t(),y);var O=Object(f["isEnterpriseTeam"])(k);var C=Object(f["isPaidTeam"])(k);var E=Object(h["getBrowser"])();var S={isUnpaid:!C&&!O,isInternetExplorer:"ie"===E,isFirefoxAndWindows:"firefox"===E&&Object(h["isWindows"])(),isFirefoxAndMac:"firefox"===E&&Object(h["isMac"])(),isMacSsbBuild:Object(v["isAppStoreBuild"])()};e(Object(d["openModal"])({element:c.a.createElement(Le,n()({},l,S))}))});Ue.meta={name:"openAppsBrowserModal",key:"actionsOpenAppsBrowserModalOpenAppsBrowserModal",description:"Opens the apps browser modal"};Ue.propTypes={addAppsVariant:o["b"].bool,eventId:o["b"].number,uiContext:o["b"].object,channelId:o["b"].string};var qe=t["a"]=Ue},1202:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(23);var v=a(54);var f=a(27);var b=a(2);var g=a(31);var _=a(13);var y=a.n(_);var k=a(95);var O=a(3133);var C={title:m["b"].oneOfType([m["b"].string,m["b"].object]),titleClass:m["b"].string,description:m["b"].node,className:m["b"].string,descriptionAlerts:m["b"].array};var E={title:"",titleClass:"",description:null,className:"",descriptionAlerts:null};var S=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,a=t.titleClass,r=t.className;var n=y()(r,a);return p.a.createElement("h4",{className:n},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return p.a.createElement("span",{className:"sk_foreground_max"},this.props.description)}},{key:"renderAlert",value:function e(){if(!this.props.descriptionAlerts)return null;return p.a.createElement(k["a"],{className:"p-ent_settings_item_header__alert",type:"inline",level:"default",align:"left"},this.props.descriptionAlerts.map(function(e){return p.a.createElement("p",{key:e},e)}))}},{key:"render",value:function e(){return p.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription(),this.renderAlert())}}]);return t}(d["PureComponent"]);S.displayName="SettingsItemHeader";S.defaultProps=E;var w=S;var I=a(6);var j=a(3135);var T=new I["b"]("enterprise_settings");var A={editOnly:m["b"].bool,toggleOnly:m["b"].bool,enabled:m["b"].bool,onEnable:m["b"].func,onDisable:m["b"].func,onEdit:m["b"].func.isRequired,editButtonText:m["b"].string};var N={editOnly:false,toggleOnly:false,enabled:false,onEnable:b["noop"],onDisable:b["noop"],editButtonText:""};var M=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEnable=a.onEnable.bind(a);a.onDisable=a.onDisable.bind(a);a.onEdit=a.onEdit.bind(a);return a}s()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=T.t("Enable");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=T.t("Disable");var a=T.t("Edit");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"danger",size:"small",onClick:this.onDisable},t),!this.props.toggleOnly&&p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},a))}},{key:"renderEdit",value:function e(){var t=this.props.editButtonText||T.t("Edit");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},t))}},{key:"renderButtonControls",value:function e(){var t=this.props,a=t.editOnly,r=t.enabled;if(a)return this.renderEdit();return r?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(d["PureComponent"]);M.displayName="SettingsItemButtonControl";M.defaultProps=N;var P=M;var R=a(3137);var x={label:m["b"].string.isRequired,state:m["b"].oneOfType([m["b"].string,m["b"].object]).isRequired,type:m["b"].PropTypes.oneOf(["button"]),description:m["b"].node,onClick:m["b"].func,control:m["b"].object.isRequired,readonly:m["b"].bool,noButton:m["b"].bool,readonlyTooltip:m["b"].string,descriptionAlerts:m["b"].array};var D={description:null,onClick:b["noop"],readonly:false,readonlyTooltip:"",noButton:false,descriptionAlerts:null,type:"button"};var F=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(a,["onReadonlyButtonClick","onReadonlyButtonFocus","onReadonlyButtonBlur"]);a.readonlyTooltipRef=p.a.createRef();return a}s()(t,[{key:"onReadonlyButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onReadonlyButtonFocus",value:function e(){Object(b["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.showTip()}},{key:"onReadonlyButtonBlur",value:function e(){Object(b["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.hideTip()}},{key:"chooseOnClickHandler",value:function e(){return this.props.readonly?function(e){e.preventDefault();e.stopPropagation()}:this.props.onClick}},{key:"renderLabel",value:function e(){return p.a.createElement(w,{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,a=t.state,r=t.description,n=t.descriptionAlerts;return p.a.createElement(w,{title:a,description:r,className:"bold",descriptionAlerts:n})}},{key:"renderButtonControl",value:function e(){if(this.props.noButton)return p.a.createElement(f["c"],{"aria-disabled":"true"});if(this.props.readonly){var t=p.a.createElement(f["c"],{"aria-disabled":"true","aria-label":this.props.readonlyTooltip,className:"c-button--focus-visible p-ent_settings_item__readonly_control",onClick:this.onReadonlyButtonClick,onFocus:this.onReadonlyButtonFocus,onBlur:this.onReadonlyButtonBlur},p.a.createElement(h["b"],{type:"eye-filled",size:"inherit",inline:true})," Read only");if(this.props.readonlyTooltip)return p.a.createElement(v["c"],{tip:this.props.readonlyTooltip,position:"top",ref:this.readonlyTooltipRef},t);return t}var a=this.props.control,r=a.editOnly,n=a.toggleOnly,i=a.editButtonText,s=a.enabled,o=a.onEnable,l=a.onDisable,c=a.onEdit;return p.a.createElement(P,{editOnly:r,enabled:s,onEnable:o,onDisable:l,onEdit:c,editButtonText:i,toggleOnly:n})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return p.a.createElement("div",{"data-qa":"ent-settings-item",className:y()("p-ent_settings_item",{"p-ent_settings_item--readonly":this.props.readonly}),onClick:this.chooseOnClickHandler(),role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(d["PureComponent"]);F.displayName="SettingsItem";F.defaultProps=D;var L=t["a"]=F},1209:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"d",function(){return d});a.d(t,"c",function(){return p});a.d(t,"b",function(){return m});var r=a(40);var n=a.n(r);var i=a(135);var s=a(827);var o=a(169);var l=a(6);var c=new l["b"]("do_not_disturb");var u=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.currentTime,o=void 0===r?n()().unix():r;var l=Object(i["a"])(o);var c=Object(i["a"])(t);var u=Math.ceil(Object(s["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"days").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var m=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.do24hrTime,i=void 0!==r&&r,s=a.today,l=void 0===s?n()().format("YYYY-MM-DD"):s,u=a.tomorrow,d=void 0===u?n()().add(1,"day").format("YYYY-MM-DD"):u;if(!t)return"";var p=Object(o["p"])(t,{do24hrTime:i});var m=Object(o["m"])(t,{omitTime:true});if(m===l)return c.t("Notifications paused until {time}",{time:p});if(m===d)return c.t("Notifications paused until tomorrow at {time}",{time:p});return c.t("Notifications paused until {expires}",{expires:Object(o["d"])(t,"{status_expiration}",{do24hrTime:i})})}},1210:function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(137);var s={children:r["b"].node,isOnline:r["b"].bool};var o={children:null,isOnline:null};var l=function e(t){var a=t.isOnline,r=t.children;return a?r:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isOnline:Object(i["c"])(t)}};var u=Object(n["connect"])(c)(l);var d={children:r["b"].node,isOnline:r["b"].bool};var p={children:null,isOnline:null};var m=function e(t){var a=t.isOnline,r=t.children;return a?null:r};m.propTypes=d;m.defaultProps=p;var h=function e(t){return{isOnline:Object(i["c"])(t)}};var v=Object(n["connect"])(h)(m);var f=a(1428);a.d(t,"b",function(){return u});a.d(t,"a",function(){return v})},1213:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"g",function(){return d});a.d(t,"e",function(){return p});a.d(t,"f",function(){return m});a.d(t,"d",function(){return h});a.d(t,"c",function(){return v});a.d(t,"b",function(){return b});var r=a(2);var n=a.n(r);var i={"en-us":["en-US","English"],"es-es":["es","Spanish"],"fr-fr":["fr","French"],"de-de":["de","German"],"ja-jp":["ja","Japanese"]};var s=function e(){return new Promise(function(e){var t=void 0;var a=function a(){if(window.$zopim&&window.zE&&window.zE.hide){clearInterval(t);window.zE.hide();e()}};t=setInterval(a,500);a()})};var o=function e(t){window.$zopim&&window.$zopim(function(){window.$zopim.livechat.addTags(t)})};var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.name,r=t.email;window.zE.identify({name:a,email:r})};var c=function e(t){var a=i[t]||i["en-us"];var r=a[0];var n=a[1];window.zE.setLocale(r);o(n)};var u=function e(){window.zE.show();window.zE.activate();window.zE.hide();window.zE.show()};var d=function e(){window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.show()})};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onHide(t)})};var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onShow(t)})};var h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatStart(t)})};var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatEnd(t)})};var f=function e(){window.$zopim&&window.$zopim(function(){if(!window.$zopim.livechat.isChatting()){h(d);window.$zopim.livechat.sendVisitorPath({url:"https://slack.com",title:"Slack"});window.$zopim.livechat.sendVisitorPath()}})};var b=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s().then(function(){l(t);c(a);r.autoOpenOnChatStart&&f();u();return Promise.resolve(true)}).catch(function(){return Promise.resolve(false)})}},1216:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(2);var l=a(547);var c=a(63);var u=a(24);var d=Object(u["b"])("TS.debug_widget.isVisible");var p=Object(u["b"])("TS.debug_widget.setFrameRate");a.d(t,"f",function(){return k});a.d(t,"h",function(){return O});a.d(t,"j",function(){return C});a.d(t,"d",function(){return E});a.d(t,"b",function(){return S});a.d(t,"c",function(){return w});a.d(t,"g",function(){return I});a.d(t,"i",function(){return j});a.d(t,"e",function(){return T});a.d(t,"a",function(){return A});var m=100;var h=1e3;var v=300;var f=1e3;var b=500;var g=60;var _=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var a=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(a>h){this.beachballs+=1;this.beachballsTotal+=1}else if(a>m){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===v){var r=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/r);this.fpsIndex=0;d()&&p(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){var t=Object(c["a"])();t.count("stutters",this.stutters);t.count("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var a=Object(o["min"])(this.frameRates);var r=void 0;var n=this.frameRates.sort();var i=Math.floor(n.length/2);r=n.length%2===1?n[i]:(n[i-1]+n[i])/2;t.store("fps_min",a);t.store("fps_median",r)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(a<1)return;var r=Math.max(g-t,0);this.histJankyWindows[r]=(this.histJankyWindows[r]||0)+a}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>b*this.nextJankyWindowSampleIntervalNumber;var a=Math.floor(this.durationMs/b);var r=a-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=f){this.recordJankyWindows(0,r-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,r>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=a+1;this.framesInPreviousJankyWindowSample=r>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var a=t-this.lastRafHandlerTimeForPRQMetrics;var r=Object(l["d"])(Math.round(a,0),2);this.histFrameRenderTime[r]=(this.histFrameRenderTime[r]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=a;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var k=y().startClientStats.bind(_.instance);var O=y().stopClientStats.bind(_.instance);var C=y().storeClientStats.bind(_.instance);var E=y().isEnabledForClientStats.bind(_.instance);var S=y().getTotalBeachballCount.bind(_.instance);var w=y().getTotalStutterCount.bind(_.instance);var I=y().startPRQMetrics.bind(_.instance);var j=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var A=y().getPRQMetrics.bind(_.instance)},1269:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(2);var g=a(31);var _=a(16);var y=a(6);var k=a(223);var O=a(239);var C=a(211);var E=a(23);var S=a(37);var w=a.n(S);var I=a(26);var j=a.n(I);var T=a(13);var A=a.n(T);var N=a(1356);var M=a(512);var P=a(168);var R=a(27);var x=a(1363);var D=a(1607);var F={default:"default",short:"short"};var L=new y["b"]("form");var B={autoSelectFirstOption:v["b"].bool,className:v["b"].string,displayValue:v["b"].string,id:v["b"].string,isLoading:v["b"].bool,labelId:v["b"].string,membersOnly:v["b"].bool,name:v["b"].string,onChange:v["b"].func,onClearButtonClick:v["b"].func.isRequired,onClose:v["b"].func,onFilterInputChange:v["b"].func,onOptionHighlighted:v["b"].func,onOutsideClick:v["b"].func,onOpen:v["b"].func,onScroll:v["b"].func,optionClassName:v["b"].string,optionGroups:v["b"].array,options:v["b"].array,optionsListOffsetBottom:v["b"].number,optionsListOffsetTop:v["b"].number,optionsListWidth:v["b"].number,optionsRowHeight:v["b"].number,pillarClassName:v["b"].string,placeholder:v["b"].string,selectedOption:v["b"].object,selectedValueClassName:v["b"].string,type:v["b"].oneOf(Object(b["values"])(F)),useFullWidthOptions:v["b"].bool,usePlaceholderOption:v["b"].bool,wrapperClassName:v["b"].string,value:v["b"].string};var U={className:null,displayValue:void 0,id:"select-"+Object(P["d"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:b["noop"],onClose:b["noop"],onFilterInputChange:b["noop"],onOptionHighlighted:b["noop"],onOutsideClick:b["noop"],onOpen:b["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:F.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var q=function(e){p()(t,e);function t(e){s()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.preventFocusAndBlur=false;a.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(g["a"])(a,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return a}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props,n=r.onClose,i=r.onOpen,s=r.selectedOption;var o=this.state,l=o.isOpen,c=o.selectedOptionValue;if(s){var u=Object(C["h"])(s)?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!a.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);a.isOpen&&n()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var a=t.target===this.filterInput;a?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;if(!a)return;var r=this.getSelectedOptionDisplayValue({value:a});this.setSelectedOptionValue(r);this.props.onChange(a);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,a=t.selectedOption,r=t.membersOnly;var n=this.getFilterQuery();var i=r?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||a)return i();return[]}},{key:"getPlaceholder",value:function e(){return this.props.placeholder||L.t("Choose an option\u2026")}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,a=t.optionGroups,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOptionGroup()].concat(j()(a));return a}},{key:"getFilteredOptions",value:function e(){var t=this.props,a=t.options,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOption()].concat(j()(a));return a}},{key:"getFilterQuery",value:function e(){return Object(b["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,a=t.optionsListOffsetBottom,r=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(N["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-s;var c=s+i.height;var u=i.bottom;var d=i.top;var p=n||i.width;return{bottom:u,offsetBottom:a,offsetTop:r,relativeBottom:c,relativeLeft:o,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.getPlaceholder(),value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.props,n=r.optionGroups,i=r.options;var s=n?Object(b["flatMap"])(n,"options"):i;var o=Object(b["find"])(s,{value:a});return Object(b["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var a=this;return function(e){a[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var a=t.label.toLowerCase();var r=this.getFilterQuery().toLowerCase();return-1!==a.indexOf(r)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new k["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var a={isOpen:Object(b["isUndefined"])(t)?!e.isOpen:t};a.isOpen||(a.filterQuery="");return a})}},{key:"renderFilterInput",value:function e(){var t=this.state,a=t.filterQuery,r=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};i.value=r&&!a?r:r||!n||a?a:n;return h.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,a=t.autoSelectFirstOption,r=t.id,n=t.isLoading,i=t.membersOnly,s=t.optionClassName,o=t.optionsRowHeight,l=t.pillarClassName,c=t.useFullWidthOptions,u=t.value,d=t.onScroll,p=t.onOptionHighlighted;var m=i?240:400;var v=Object(P["a"])(r,this.state.selectedOptionValue);return h.a.createElement(x["a"],{"aria-activedescendant":v,autoSelectFirstOption:a,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:n,maxListHeight:m,onOptionSelected:this.onOptionSelected,optionClassName:s,onScroll:d,optionGroups:i?null:this.maybeShowOptions(),options:i?this.maybeShowOptions():null,optionsRowHeight:o,pillarClassName:l,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:u,onActiveOptionUpdated:p})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var a=L.rt('No workspaces found matching <span class="sk_primary_foreground bold">{query}</span>.',{query:t});var r=L.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return h.a.createElement("div",{className:"p-workspace_search__no-results-message"},h.a.createElement("p",{className:"margin_0"},a),h.a.createElement("p",{className:"margin_0"},r))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var a=t?L.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>.'):L.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>, or search for a <span class="sk_primary_foreground bold">specific workspace</span>.');return h.a.createElement("div",{className:"p-workspace_search__no-results-message"},h.a.createElement("p",{className:"margin_0"},a))}},{key:"render",value:function e(){var t=this.props,a=t.autoSelectFirstOption,r=t.className,i=t.displayValue,s=t.isLoading,o=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,m=t.onFilterInputChange,v=t.onOutsideClick,f=t.onOpen,b=t.onOptionHighlighted,g=t.onScroll,_=t.optionClassName,y=t.options,k=t.optionsListOffsetBottom,O=t.optionsListOffsetTop,C=t.optionsListWidth,E=t.optionsRowHeight,S=t.optionGroups,I=t.pillarClassName,j=t.placeholder,T=t.selectedOption,N=t.selectedValueClassName,M=t.type,P=t.useFullWidthOptions,x=t.usePlaceholderOption,D=t.wrapperClassName,F=w()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=A()("c-input_select__wrapper",D);var U=A()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===M},r);var q=A()("p-workspace_search__clear-button",{hidden:!L&&!i});return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},h.a.createElement("div",n()({},F,{"aria-labelledby":o,className:U,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),h.a.createElement(R["c"],{className:q,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}]);return t}(M["a"]);q.displayName="WorkspaceSearchSelect";q.propTypes=B;q.defaultProps=U;var W=q;var H=a(450);var G=a(2329);var V={item:v["b"].object,type:v["b"].oneOf(["member","workspace"]),featureReactMessages:v["b"].bool.isRequired,featureReactMemberProfileCard:v["b"].bool.isRequired};var K={item:{},type:"member"};var z=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(a,["maybeRenderTitle","maybeRenderEmail"]);return a}l()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var a=t.item,r=t.type;var n=this.props,i=n.featureReactMemberProfileCard,s=n.featureReactMessages;return h.a.createElement(H["a"],{entityType:r,dimension:36,entityData:a,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var a=t.item,r=t.type;var n=Object(b["get"])(a,"profile");var i=n.real_name,s=n.email,o=n.title;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var a=t.item,r=t.type;var n=a.name,i=a.description;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.item,r=t.type;return"member"===r?this.renderItemAsMember({item:a,type:r}):this.renderItemAsWorkspace({item:a,type:r})}}]);return t}(m["PureComponent"]);z.displayName="WorkspaceSearchOptionsListItem";var Q=z;z.defaultProps=K;var Y=a(2331);var J=new y["b"]("workspace_directory");var X={className:v["b"].string,containerIdSelector:v["b"].string,fetchDirectoryWorkspaces:v["b"].func.isRequired,fetchMembers:v["b"].func.isRequired,membersOnly:v["b"].bool,onClearInput:v["b"].func,onOptionsListOpened:v["b"].func,onOptionsListClosed:v["b"].func,prepopulatedOption:v["b"].object,triggerAction:v["b"].func};var Z={className:"",containerIdSelector:"",membersOnly:true,onClearInput:b["noop"],onOptionsListClosed:b["noop"],onOptionsListOpened:b["noop"],prepopulatedOption:void 0,triggerAction:b["noop"]};var $=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(g["a"])(a,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);a.select=null;a.debouncedOnFilterInputChange=Object(b["debounce"])(a.onFilterInputChange,100);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.prepopulatedOption,r=t.membersOnly;Object(b["isEmpty"])(a)||this.setPrepopulatedOptionData(a);this.getOptionsFetcher();r||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var a=this.props.prepopulatedOption;var r=t.prepopulatedOption;Object(b["isEmpty"])(a)||a===r||this.setPrepopulatedOptionData(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var a=this.props.membersOnly;var r=this.state,n=r.currentOptionsData,i=r.currentSearchQuery;var s=void 0;var o=void 0;var l=void 0;if(t===C["b"]){s={id:C["b"],displayValue:i};l=n}else if(a){s=Object(b["find"])(n,{id:t});o=Object(_["getMemberRealName"])(s);l=[s]}else{s=Object(b["find"])(Object(b["flatten"])(Object(b["values"])(n)),{id:t});var c=Object(C["h"])(s);o=c?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");l=c?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===C["b"]?i:o,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var a=this.props,r=a.triggerAction,n=a.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&r({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var a=!Object(b["isEmpty"])(t);this.setIsAnOptionHighlighted(a)}},{key:"onScroll",value:function e(t){var a=200;var r=this.state,n=r.currentSearchQuery,i=r.currentOptionsData,s=void 0===i?[]:i,o=r.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<a;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,a=t.selectedOptionData,r=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!r||n)return;var i=Object(b["get"])(this.select,"filterInput.value",r);if(!a){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:C["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var a=t.optionData,r=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s=void 0;s=r?a:Object(b["unionBy"])(i,a,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var a=t.memberOptionData,r=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d=void 0;var p=!o&&!c||i?i:o+c;d=n?{members:a,workspaces:r}:{members:Object(b["unionBy"])(Object(b["get"])(u,"members"),a,"id"),workspaces:Object(b["unionBy"])(Object(b["get"])(u,"workspaces"),r,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:o,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var a=J.t("Search for a teammate");var r=J.t("Search");return t?a:r}},{key:"getOptionsFetcher",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.forceNewSearch,n=void 0!==r&&r,i=a.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"initKeyCommands",value:function e(){var t=new k["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(r).then(function(e){var t=e.items,r=void 0===t?[]:t,o=e.next_cursor_mark,l=e.num_found;if(!r.length&&"*"!==o)return;a.setNextCursorMark(o);a.setCurrentOptionsData({optionData:r,isNewSearch:n||s!==i,totalResultsCount:l})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;var l=[o(r),this.props.fetchDirectoryWorkspaces(r)];return Promise.all(l).then(function(e){var t=e[0],r=t.items,o=void 0===r?[]:r,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,m=u.next_cursor_mark,h=u.num_found;var v=void 0;if(!o.length&&"*"!==l&&!p.length&&"*"!==m)return;o.length&&!p.length?a.setNextCursorMark(l):p.length&&!o.length&&a.setNextCursorMark(m);o.length&&!p.length?v=c:p.length&&!o.length&&(v=h);a.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:p,isNewSearch:n||s!==i,totalResultsCount:v,memberResultsCount:c,workspaceResultsCount:h})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var a=this.state.selectedOptionData;var r=Object(C["h"])(a)?"member":"workspace";t({selectedOptionData:a,type:r})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var a=this;var r=this.props.membersOnly;var n=[];if(r)n=Object(b["map"])(t,function(e){return a.formatMemberOptionData(e)});else{var i=t.members,s=t.workspaces;var o=Object(b["get"])(i,"length",0);var l=Object(b["get"])(s,"length",0);if(o){var c={label:this.formatMemberOptionsGroupsHeader(),options:[]};var u=l>0?Object(b["slice"])(i,0,4):i;c.options=Object(b["map"])(u,function(e){return a.formatMemberOptionData(e)});n.push(c)}if(l){var d={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};d.options=Object(b["map"])(s,function(e){return a.formatWorkspaceOptionData(e)});n.push(d)}}return n}},{key:"formatMemberOptionData",value:function e(t){var a=Object(_["getMemberRealName"])(t);var r=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:r,displayValue:a}}},{key:"formatWorkspaceOptionData",value:function e(t){var a=Object(b["get"])(t,"name");var r=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:r,displayValue:a}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,a=t.memberResultsCount,r=t.selectedOptionData;var n=r?1:a;return J.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var a=this.state,r=a.currentSearchQuery,n=a.workspaceResultsCount,i=a.selectedOptionData;var s=Object(b["get"])(t,"displayValue","")?Object(b["get"])(t,"displayValue",""):r;var o=i?1:n;var l=Object(C["c"])()?50:150;var c=Object(b["get"])(s,"length",0)>l?s.slice(0,l)+"...":s;return J.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(y["q"])(c),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},h.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},h.a.createElement(E["b"],{type:"search"})),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},J.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(y["q"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var a=t.item,r=t.type;return h.a.createElement(Q,{item:a,type:r,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,a=t.containerIdSelector,r=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(a),m=p.bottom,v=void 0===m?0:m,f=p.top,g=void 0===f?0:f;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:r,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-v,optionsListOffsetTop:g,optionsRowHeight:48,placeholder:this.getPlaceHolderText(r),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};r?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(b["get"])(u,"id")===C["b"]){_.selectedOption=u;_.displayValue=Object(b["get"])(u,"displayValue")}else{var y=Object(C["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(b["get"])(y,"displayValue")}return h.a.createElement("div",{className:"position_relative"},h.a.createElement(W,n()({},_,{ref:this.setSelectRef})))}}]);return t}(m["Component"]);$.displayName="WorkspaceSearch";$.defaultProps=Z;var ee={fetchMembers:O["t"],fetchDirectoryWorkspaces:O["k"]};var te=Object(f["connect"])(null,ee,null,{withRef:true})($);var ae=t["a"]=te},1289:function(e,t,a){"use strict";a.d(t,"b",function(){return Z});a.d(t,"c",function(){return $});var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(0);var h=a(1);var v=a.n(h);var f=a(12);var b=a(2406);var g=a(2);var _=a.n(g);var y=a(31);var k=a(13);var O=a.n(k);var C=a(14);var E=a(197);var S=a(144);var w=a(9);var I=a(35);var j=a(239);var T=a(16);var A=a(6);var N=a(287);var M=a(39);var P=a(23);var R=a(44);var x=a(27);var D=a(162);var F=a(450);var L=a(1269);var B=a(86);var U=a(1586);var q=a(858);var W=a(211);var H=a(1909);var G=a.n(H);var V=new A["b"]("grid_onboarding");var K={orgName:m["b"].string,selectedMember:m["b"].object.isRequired,featureZeroWorkspaceOnboarding:m["b"].bool.isRequired,fetchDirectoryWorkspaces:m["b"].func.isRequired,scrollElement:m["b"].any,enqueueToast:m["b"].func,onFooterClick:m["b"].func,clogger:m["b"].object.isRequired};var z={orgName:"",scrollElement:window,enqueueToast:g["noop"],onFooterClick:g["noop"]};var Q=24;var Y=1200;var J=Object(C["b"])();function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(g["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function Z(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&a}function $(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&!a}function ee(e){if(!e)return"";return{oneJoinableWorkspace:V.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:V.t("Join the workspace that seems right for your role to get started."),noAccess:V.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:V.t("Try searching for someone else on your team."),onApiError:V.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return v.a.createElement(R["a"],{onClick:function e(){return Object(N["b"])({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:true})},target:"_self",key:a},t);return{text:t}})}}var te=function e(t){var a=t.workspaces,r=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";var o=ee(s);if(i)return o.onApiError;var l=X(a).length;if(1===l)return o.oneJoinableWorkspace;if(l>1)return o.moreThanOneJoinableWorkspaces;if(r)return o.noAccess;if(n)return o.noWorkspaces;return""};var ae=function e(t){var a=t.noAccessToWorkspaces,r=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";if(s)return V.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(A["q"])(n)});if(a)return V.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(A["q"])(n)});if(r)return V.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(A["q"])(n)});return V.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(A["q"])(n),numWorkspaces:i})};var re=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};a.resultsList=null;a.searchBar=null;a.userHasNoAccessToWorkspaces=false;a.memberHasNoWorkspaces=false;a.noWorkspacesToDisplay=false;a.doRenderSearchAgainButton=false;Object(y["a"])(a,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return a}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeFetchNextPage(a);this.maybeTriggerNewSearch(a);this.maybeUpdateMemberRealName(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(W["c"])();var a=this.state.isMobileView!==t;(t||a)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:a,scrollHeight:r})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var a=t.selectedOptionData;a&&this.setSelectedMember(a)}},{key:"onButtonActionReject",value:function e(t){var a=t.node;a&&this.setToastText(a)}},{key:"onButtonActionResolve",value:function e(t){var a=t.node,r=t.i,n=t.workspace;Object(g["isNumber"])(r)&&n&&this.setWorkspaceByIndex({index:r,workspace:n});a&&this.setToastText(a)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var a=t.workspaces,r=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:a,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var a=t.index,r=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(a>=t.length){J.warn("SearchResultsScreen: Out of bounds index "+a+" passed into setWorkspaceByIndex");return e}t[a]=r;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:v.a.createElement(D["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var a=Object(T["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(a)}}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:r});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=this.state,r=a.nextCursorMark,n=a.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:r,id:Object(g["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var a=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});r||Object(W["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(g["get"])(e,"num_found",0),clogger:t.props.clogger})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);J.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<Y}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return v.a.createElement("div",{className:"p-grid_onboarding_results__search"},v.a.createElement(L["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,r=a.totalWorkspaces,n=a.selectedMember,i=a.hasApiError;var s=Object(T["getMemberRealName"])(n);var o=ae({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:r,memberRealName:s,hasApiError:i,featureZeroWorkspaceOnboarding:t});var l=O()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return v.a.createElement("div",{className:l},v.a.createElement("span",{className:"p-grid_onboarding__results_heading"},v.a.createElement(F["a"],{entityType:"member",dimension:Q,entityData:n,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),o))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,r=a.workspaces,n=a.hasApiError;var i=te({workspaces:r,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n});var s=O()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return v.a.createElement("div",{className:s},i)}},{key:"renderWorkspaceCard",value:function e(t){var a=this;var r=this.state,i=r.workspaces,s=r.totalWorkspaces;var o=O()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===s-1});return v.a.createElement(U["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:o,onActionResolve:function e(r){return a.onButtonActionResolve(n()({},r,{i:t}))},onActionReject:function e(r){return a.onButtonActionReject(n()({},r,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var a=this.props.scrollElement;return v.a.createElement(b["a"],{scrollElement:a,onScroll:this.onScroll},function(e){var r=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return v.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},v.a.createElement(q["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:a,onScroll:i,height:r,isScrolling:n,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function e(){return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},v.a.createElement(x["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},V.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var a=O()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement(R["a"],{onClick:this.onFooterClick,className:a},V.t("View all {orgName} workspaces",{orgName:t}),v.a.createElement(P["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return v.a.createElement("div",{className:"p-grid_onboarding__spinner"},v.a.createElement(B["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,a=t.loadingWorkspaces,r=t.selectedMember;var n=a&&this.memberHasNoWorkspaces;if(n||!r)return this.renderInfiniteSpinner();return v.a.createElement(v.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),a&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!a&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,a=t.totalWorkspaces,r=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=Z({totalWorkspaces:a,onWorkspaces:r});this.memberHasNoWorkspaces=$({totalWorkspaces:a,onWorkspaces:r});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(h["Component"]);re.displayName="SearchResultsScreen";re.defaultProps=z;var ne=function e(t,a){var r=a.selectedMember,n=a.workspaces;var i=Object(I["f"])(t);var s=Object(M["a"])({state:t});return{selectedMember:r,workspaces:n,orgName:i,clogger:s,featureZeroWorkspaceOnboarding:Object(w["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(w["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var ie={enqueueToast:S["enqueueToast"],fetchDirectoryWorkspaces:j["k"]};t["a"]=Object(f["connect"])(ne,ie)(re)},1298:function(e,t,a){"use strict";a.d(t,"d",function(){return x});a.d(t,"c",function(){return D});a.d(t,"a",function(){return B});var r=a(10);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(5);var u=a.n(c);var d=a(4);var p=a.n(d);var m=a(7);var h=a.n(m);var v=a(8);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(2);var k=a.n(y);var O=a(13);var C=a.n(O);var E=a(123);var S=a(44);var w=a(367);var I=a(1136);var j=a(492);var T=a(1057);var A=a(645);var N=a(833);var M=a(6);var P=a(3130);var R=a.n(P);var x=b["b"].shape({selectionElementId:b["b"].string,previewText:b["b"].string,isSelected:b["b"].bool});var D=b["b"].shape({id:b["b"].string.isRequired,label:b["b"].node.isRequired,isPrimary:b["b"].bool,isDanger:b["b"].bool,disabled:b["b"].bool,appliesToCount:b["b"].number});var F={availableCount:b["b"].number.isRequired,selectedCount:b["b"].number.isRequired,items:b["b"].arrayOf(x).isRequired,actions:b["b"].arrayOf(D).isRequired,titleFormatter:b["b"].func,showingSelection:b["b"].bool,onToggleShowingSelection:b["b"].func,onToggleSelect:b["b"].func,onAction:b["b"].func,"data-qa":b["b"].string,position:b["b"].string};var L={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var B=76;var U=3;var q=new M["b"]("selection_bar");var W=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCheckboxChange=a.onCheckboxChange.bind(a);a.onShowClick=a.onShowClick.bind(a);a.renderActionMenu=a.renderActionMenu.bind(a);a.getDefaultTitle=a.getDefaultTitle.bind(a);return a}p()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,a=t.selectedCount,r=t.availableCount,n=t.onToggleSelect;n(r!==a)}},{key:"onShowClick",value:function e(){var t=this.props,a=t.showingSelection,r=t.onToggleShowingSelection;r(!a)}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){return q.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getPreviewText",value:function e(t,a){var r=null;(t.length>0||a>0)&&(r=a>0?q.rt("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(M["i"])(t,{noConj:true,noEscape:true}).join(""),moreItemsCount:a}):q.rt("{previewSelectionItems}.",{previewSelectionItems:Object(M["i"])(t,{noEscape:true}).join("")}));return r}},{key:"getItemListProps",value:function e(t,a){return Object(y["reduce"])(t,function(e,t,a){var r=0===a?"":" ";e.ariaControls+=""+r+t.selectionElementId;if(t.isSelected&&e.previewItems.length<U){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:a})}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=void 0;var r=Object(y["findIndex"])(t,{isPrimary:true});r=-1!==r?r:0;var n=l()({},t[r],{isPrimary:true});var i=t.length>=3;if(t.length<=1)a={primaryAction:n,isMenu:i};else if(2===t.length){var o=0===r?t[1]:t[0];a={primaryAction:n,secondaryAction:o,isMenu:i}}else{var c=[].concat(s()(t.slice(0,r)),s()(t.slice(r+1)));a={primaryAction:n,menuActions:c,isMenu:i}}return a}},{key:"renderActionLabel",value:function e(t){var a=t.label,r=t.appliesToCount;return r&&r>0?q.t("{action} ({count})",{action:a,count:r}):a}},{key:"renderActionButton",value:function e(t){var a=this;var r=t.id,n=t.isPrimary,i=t.isDanger,s=t.disabled;var o=w["b"].outline;i?o=w["b"].danger:n&&(o=w["b"].primary);return _.a.createElement(w["c"],{key:r,type:o,className:n?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+r),disabled:s,onClick:function e(){return a.props.onAction(r)}},this.renderActionLabel(t))}},{key:"renderActionMenuButton",value:function e(){var t=q.rt("More {chevronDownIcon}",{chevronDownIcon:_.a.createElement(N["a"],{type:"chevron-down",inline:true})});return _.a.createElement(I["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},_.a.createElement(w["c"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:w["b"].outline},t))}},{key:"renderActionMenu",value:function e(t){var a=this;var r=this.getActionProps(this.props.actions),n=r.menuActions;if(!n||0===n.length)return null;return _.a.createElement(A["a"],t,n.map(function(e){return _.a.createElement(j["a"],{key:e.id,label:a.renderActionLabel(e),disabled:e.disabled,"data-qa":a.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return a.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"render",value:function e(){var t;var a=this.props,r=a.availableCount,i=a.selectedCount,s=a.items,o=a.titleFormatter,l=a.showingSelection,c=a.actions,u=a.position;var d=r===i;var p=!d&&i>0;var m=this.getItemListProps(s,i),h=m.ariaControls,v=m.previewItems,f=m.moreItemsCount;var b=this.getPreviewText(v,f);var g=o||this.getDefaultTitle;var y=this.getActionProps(c),k=y.primaryAction,O=y.secondaryAction,w=y.isMenu;var I="c-selection_bar--position_"+u;var j=(t={},n()(t,I,!!u),n()(t,"c-selection_bar--position_relative","relative"===u),n()(t,"c-selection_bar--slide_up",i>0),t);var A=p||0===i?q.t("Select all"):q.t("Deselect all");var N=l?q.t("Show all"):q.t("Show selection");return _.a.createElement("div",{className:C()("c-selection_bar",j)},_.a.createElement("div",{className:"c-selection_bar__checkbox"},_.a.createElement(T["c"],{tip:A},_.a.createElement("div",null,_.a.createElement(E["a"],{className:"c-selection_bar__checkbox_input","aria-label":b,"data-qa":this.getDataQAAttr("checkbox"),checked:d,indeterminate:p,"aria-controls":h,onChange:this.onCheckboxChange})))),_.a.createElement("div",{className:"c-selection_bar__body"},_.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},g(i)),_.a.createElement("div",null,_.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},b),_.a.createElement(S["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},N))),_.a.createElement("div",{className:"c-selection_bar__actions"},w&&this.renderActionMenuButton(),O&&this.renderActionButton(O),k&&this.renderActionButton(k)))}}]);return t}(g["PureComponent"]);W.displayName="BaseSelectionBar";W.defaultProps=L;t["b"]=W},1303:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(23);var o=a(192);var l=a(6);var c=a(2470);var u=a.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,a=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-large_offline_indicator"},n.a.createElement("p",{className:"p-large_offline_indicator__headline"},n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",d.t("No connection")),n.a.createElement("p",{className:"p-large_offline_indicator__caption"},a||d.t("Go online to get the latest messages.")))}p.displayName="LargeOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},1304:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(17);var s=a(0);var o=a(62);var l=a(2011);var c=a(2082);var u=a(329);var d=a(9);var p=a(855);var m=a(1473);var h=Object(i["b"])("build message summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,i=a.ts,s=a.isFirstUnreadMsg,o=a.isFirstMsgForDay,h=a.isLastMsgForDay,v=a.previousMessageTs,f=a.day,b=a.rollup,g=a.hasFocus,_=a.viewContext;var y=t();var k=Object(p["isScreenReaderEnabled"])(y);var O=!!Object(u["getMessageEditData"])(y,{channelId:r,ts:i});if(O)return;if(!(k||g))return;var C=Object(c["a"])(y,{channelId:r,ts:i,previousMessageTs:v,rollup:b,hasFocus:g});var E=f||{ts:parseInt(Object(m["a"])(i),10),isFirstDay:false,isLastDay:false};return Object(l["a"])(n()({},C,{featureA11yMessageSummary:Object(d["isFeatureEnabled"])(y,"feature_a11y_message_summary"),viewContext:_,isFirstUnreadMsg:s,isFirstMsgForDay:o,isLastMsgForDay:h,day:E}))});h.meta={name:"makeMessageSummary",key:"actionsMakeMessageSummaryMakeMessageSummary",description:"build message summary for aria labels"};h.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired,isFirstUnreadMsg:s["b"].bool,isFirstMsgForDay:s["b"].bool,isLastMsgForDay:s["b"].bool,previousMessageTs:s["b"].string,day:s["b"].object,rollup:o["a"].Rollup(),hasFocus:s["b"].bool,viewContext:s["b"].string};t["a"]=h},1305:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(9);var v=a(0);var f=a(14);var b={msg:v["b"].object.isRequired,children:v["b"].node,featureTinyspeck:v["b"].bool,logger:v["b"].object.isRequired};var g={children:null,featureTinyspeck:false};var _=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={error:false};return a}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.setState(function(){return{error:true}});var r=t?t.message:"";var n=t?t.stack:"";var i=this.props.msg,s=i.ts,o=i.channel,l=i.subtype;this.props.logger.error("Message Kit componentDidCatch: "+l+" "+s+" in "+o+", "+r);n&&this.props.logger.error(n);a&&a.componentStack&&this.props.logger.error(a.componentStack)}},{key:"render",value:function e(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var t=this.props.msg,a=t.ts,r=t.channel;return p.a.createElement("div",{className:"sk_raspberry_red_bg sk_inverted_foreground padding_100 padding_bottom_25"},p.a.createElement("p",null,p.a.createElement("strong",null,"Message ",a," in ",r," failed to render."," ")),p.a.createElement("p",null,"Please go to #escal-messages and,"," ",p.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),p.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]);return t}(d["Component"]);_.displayName="MessageErrorBoundary";_.defaultProps=g;var y=_;var k=function e(t){return{featureTinyspeck:Object(h["isFeatureEnabled"])(t,"feature_tinyspeck"),logger:Object(f["a"])({state:t})}};t["a"]=Object(m["connect"])(k)(_)},1306:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(13);var v=a.n(h);var f=a(2);var b=a.n(f);var g=a(62);var _=a(1065);var y=a(1067);var k=a(1467);var O={file:g["a"].File().isRequired,clogLinkClick:m["b"].func,className:m["b"].string,fullWidth:m["b"].bool,onClick:m["b"].func,showActions:m["b"].bool,useRowAction:m["b"].bool,includeRootDownloadAction:m["b"].bool,includeRootStarAction:m["b"].bool,"data-qa":m["b"].string};var C={clogLinkClick:f["noop"],className:null,fullWidth:false,onClick:f["noop"],showActions:true,useRowAction:false,includeRootDownloadAction:true,includeRootStarAction:false,"data-qa":void 0};var E=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.clogLinkClick,n=t.fullWidth,i=t.showActions,s=t.includeRootDownloadAction,o=t.includeRootStarAction,l=t.useRowAction,c=t["data-qa"];var u=v()("p-contextual_file",this.props.className);return p.a.createElement(_["a"],{file:a,className:u,fullWidth:n,clogLinkClick:r,showActions:i,useRowAction:l,includeRootDownloadAction:s,includeRootStarAction:o,"data-qa":c},p.a.createElement(y["a"],{file:a,onClick:this.onClick},p.a.createElement(k["a"],{file:a})))}}]);return t}(d["PureComponent"]);E.displayName="ContextualFile";E.defaultProps=C;t["a"]=E},1307:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(0);var b=a(13);var g=a.n(b);var _=a(2);var y=a.n(_);var k=a(21);var O=a(422);var C=a(9);var E=a(411);var S=a(82);var w=a(242);var I=a(165);var j=a(97);var T=a(42);var A=a(11);var N=a(1830);var M=a(2018);var P=a(2021);var R=a(23);var x=a(44);var D=a(1137);var F=a(2022);var L=a(917);var B=a(3630);var U=a.n(B);var q={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var W={msg:f["b"].object.isRequired,className:f["b"].string,children:f["b"].node,showPinned:f["b"].bool,showStarred:f["b"].bool,showBroadcast:f["b"].bool,theme:f["b"].oneOf(["light","dense"]),sliHighlight:f["b"].object,currentUserId:f["b"].string,primaryView:f["b"].string,isSelfIm:f["b"].bool,isSlackbotIm:f["b"].bool,dispatch:f["b"].func,setBackground:f["b"].func};var H={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:false,isSlackbotIm:false,dispatch:_["noop"],setBackground:_["noop"]};var G=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBroadcastClick=a.onBroadcastClick.bind(a);a.renderHighlight=a.renderHighlight.bind(a);a.renderStarButton=a.renderStarButton.bind(a);a.renderBroadcast=a.renderBroadcast.bind(a);a.onStarClick=a.onStarClick.bind(a);a.labelText=null;a.primaryLabelType=null;return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onStarClick",value:function e(){var t=this.props.dispatch;t(Object(j["k"])())}},{key:"onBroadcastClick",value:function e(t){var a=this.props,r=a.dispatch,n=a.msg,i=a.primaryView;t.preventDefault();if(i===n.channel){r(Object(I["c"])({ts:n.ts,highlight:true}));return}r(Object(w["a"])({id:n.channel,startTs:n.ts}))}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight,n=t.showPinned,i=t.showStarred,s=t.showBroadcast;var o=Object(T["getMessagePinnedInfo"])(a);return Object(N["a"])({isPinned:n&&!!o,isEphemeral:Object(T["isEphemeral"])(a),isStarred:i&&Object(T["isStarred"])(a),isBroadcast:s&&Object(T["isThreadBroadcast"])(a),subtype:a.subtype,sliHighlight:!!r})}},{key:"renderPinnedBy",value:function e(t){return h.a.createElement(D["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return h.a.createElement(x["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},a)}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return h.a.createElement(x["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},a)}},{key:"renderLabelText",value:function e(t){var a=this.props,r=a.msg,i=a.currentUserId,s=a.isSelfIm,o=a.isSlackbotIm;var l=Object(T["getMessagePinnedInfo"])(r);var c=l&&l.pinnedBy;var u=Object(P["a"])(n()({},t,{isSelfIm:s,isSlackbotIm:o,currentUserId:i,pinnedBy:c,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:true}));if(!u)return null;return h.a.createElement("span",{className:"c-message_kit__labels__text"},u)}},{key:"renderLabelIcon",value:function e(t){var a=q[t];if(!a)return null;return h.a.createElement("div",{className:"c-message_kit__labels__icon"},h.a.createElement(R["b"],{type:a,size:"inherit"}))}},{key:"renderHighlight",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight;var n=a.channel,i=a.ts;if(!Object(O["shouldShowHighlightsLabel"])(r))return null;return h.a.createElement(F["a"],{sliHighlight:r,channelId:n,ts:i})}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme;var n=this.getLabelTypes();var i=Object(M["a"])(n);var s=this.renderLabelIcon(i);var o=this.renderLabelText(n);this.labelText=o;this.primaryLabelType=i;if(!o)return a;var l=g()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+i,"c-message_kit__labels--"+r);return h.a.createElement("div",{className:l},h.a.createElement("div",{className:"c-message_kit__labels__label"},s,o),a)}}]);return t}(m["PureComponent"]);G.displayName="MessageLabels";G.defaultProps=H;var V=function e(t,a){var r=a.msg;if(!r)return null;var n=r.channel,i=r.ts;var s=Object(C["getCurrentUserId"])(t);var o=Object(k["e"])(t,n);var l=Object(S["a"])(t);var c=Object(O["getMessageMetaData"])(t,{channelId:n,ts:i}),u=c.sliHighlight;var d=Object(A["isSlackbot"])(o);var p=Object(A["isYou"])(s,o);return{theme:Object(E["a"])(t),currentUserId:s,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p}};t["a"]=Object(L["b"])(Object(v["connect"])(V)(G))},1308:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(0);var v=a(13);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(42);var y=a(329);var k=a(300);var O=a(2069);var C=a(917);var E=a(3632);var S=a.n(E);var w={msg:h["b"].object.isRequired,className:h["b"].string,children:h["b"].node,isEditing:h["b"].bool,setBackground:h["b"].func,viewContext:h["b"].string};var I={className:void 0,children:void 0,isEditing:false,setBackground:b["noop"],viewContext:void 0};var j=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,a=t.isEditing,e=t.setBackground;e({editing:a})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.isEditing,n=t.children,i=t.viewContext;if(!r)return n;var s=a.channel,o=a.ts;var l=f()(this.props.className,"c-message_kit__edit");return p.a.createElement("div",{className:l},p.a.createElement(O["a"],{channelId:s,ts:o,messageContainerType:i}))}}]);return t}(d["PureComponent"]);j.displayName="MessageEdit";j.defaultProps=I;var T=function e(t,a){var r=a.msg,n=a.viewContext;var i=Object(_["getMessageChannelId"])(r);var s=Object(_["getMessageTs"])(r);var o=!!Object(y["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});return{isEditing:o}};t["a"]=Object(C["b"])(Object(k["b"])(Object(m["connect"])(T)(j)))},1309:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(0);var v=a(13);var f=a.n(v);var b=a(411);var g=a(3634);var _=a.n(g);var y={children:h["b"].node,className:h["b"].string,theme:h["b"].oneOf(["light","dense"])};var k={className:void 0,children:void 0,theme:"light"};var O=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme;if("light"===r)return a;var n=f()("c-message_kit__indent",this.props.className);return p.a.createElement("div",{className:n},a)}}]);return t}(d["Component"]);O.displayName="MessageIndent";O.defaultProps=k;t["a"]=Object(m["connect"])(function(e){return{theme:Object(b["a"])(e)}})(O)},1312:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(9);var s=a(460);var o=a(236);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(13);var b=a.n(f);var g=a(12);var _=a(2);var y=a(6);var k=a(32);var O=a(39);var C=a(332);var E=a(764);var S=a(928);var w=a(18);var I=a(817);var j=a(2006);var T=a(358);var A=a(3517);var N=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.title,r=t.subtitle,i=t.shouldShowExperimentVariant,s=t.shouldShowExperimentVariant2;var o=b()("welcome-row__title",{margin_bottom_50:!!r,margin_bottom_75:!r,newxp3100_v1_a:i});return n.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},a?n.a.createElement("div",{className:o},n.a.createElement("h3",{className:s?"reset":""},a)):null,r?n.a.createElement("div",{className:"margin_bottom_75"},n.a.createElement("p",null,r)):null,n.a.createElement("div",null,this.props.children))}}]);return t}(r["Component"]);N.displayName="WelcomeRow";var M=N;var P=a(10);var R=a.n(P);var x=a(813);var D=a(21);var F=new y["b"]("welcome_place");var L=function(){return n.a.createElement("svg",{id:"join_channel","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35.74 23.77",role:"img"},n.a.createElement("title",null,F.t("An illustration of a pair of eyes",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"})),n.a.createElement("ellipse",{cx:"9.51",cy:"11.89",rx:"8.38",ry:"10.76",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M13.82,18.71c-1.74,0-3.15-1.81-3.15-4a5,5,0,0,1,.52-2.22,4.27,4.27,0,0,0-.81-.09c-2.73,0-5,2.85-5,6.35s2.22,6.35,5,6.35,4.95-2.84,4.95-6.35v-.49A2.68,2.68,0,0,1,13.82,18.71Z",transform:"translate(-0.13 -6.82)"}),n.a.createElement("ellipse",{cx:"26.25",cy:"11.89",rx:"8.37",ry:"10.76",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M30.57,18.71c-1.74,0-3.15-1.81-3.15-4a5,5,0,0,1,.52-2.22,4.27,4.27,0,0,0-.81-.09c-2.73,0-5,2.85-5,6.35s2.22,6.35,5,6.35,5-2.84,5-6.35v-.49A2.68,2.68,0,0,1,30.57,18.71Z",transform:"translate(-0.13 -6.82)"}))};var B=a(23);var U=a(27);var q=a(103);var W=a(3521);var H=a(3);var G=a.n(H);var V=n.a.createContext({});function K(){return function(e){var t=function(t){v()(a,t);function a(){c()(this,a);var t=m()(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments));t.renderWithConsumer=function(a){var r=a.addElementToVisibilityLogging,i=a.removeElementFromVisibilityLogging;return n.a.createElement(e,G()({addElementToVisibilityLogging:r,removeElementFromVisibilityLogging:i},t.props))};return t}d()(a,[{key:"render",value:function e(){return n.a.createElement(V.Consumer,null,this.renderWithConsumer)}}]);return a}(r["Component"]);t.displayName="WithVisibilityLogger";t.displayName="WithVisibilityLogger("+(e.displayName||"Component")+")";return t}}var z=function e(t){var a=t.isFlexpaneOpen,i=t.clogger,s=t.pageViewingSessionId,o=t.addElementToVisibilityLogging,l=t.removeElementFromVisibilityLogging,c=t.workflowTask,u=c.subtype,d=c.state,p=t.onButtonClicked,m=t.bodyCopy,h=t.tipCopy,v=t.buttonCopy,f=t.illustration,g=t.clogElementName,_=t.experimentsAndTreatmentGroups,y=t.featureNewxp3100V1;var k=Object(r["useRef"])(null);Object(r["useEffect"])(function(){o({element:k.current,uiContext:{ui_element:w["z"]["WELCOME_PLACE_ACTION_"+u.toUpperCase()],ui_properties:{element_value:d,element_type:w["k"].BUTTON,element_name:g}}});return function(){l(k.current)}});var O=function e(){if(d===T["c"].Completed)return;p();i.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"]["WELCOME_PLACE_ACTION_"+u.toUpperCase()],ui_properties:{element_value:d,element_type:w["k"].BUTTON,element_name:g}},welcome_place:{welcome_session_id:s}}})};var C="completed"===d;var E=_.exp3100v1treatmentA;var S=u===T["d"].SendMessage&&E&&y&&!C;var I=b()("c-workflow-item-card",{complete:C,flexpaneOpen:a,sendMessageVariantStyle:S});var j=void 0;j=S?null:C?null:f;var A=C?n.a.createElement("div",{className:C?"cta--complete":""},n.a.createElement(B["b"],{type:"check-small-bold"}),v):n.a.createElement(U["d"],{disabled:C,type:S?"primary":"outline-primary",size:"medium",onClick:O},v);return S?n.a.createElement("div",{className:I,ref:k},n.a.createElement("div",{className:"c-workflow-item-card__section"},n.a.createElement("div",{className:"c-workflow-item-card__illustration"},j)),n.a.createElement("div",{className:"c-workflow-item-card__section"},n.a.createElement("p",{className:h?"":"margin_bottom_50"},m),h?n.a.createElement("p",{className:"margin_bottom_50"},h):null,A)):n.a.createElement("div",{className:I,ref:k},n.a.createElement("div",{className:"c-workflow-item-card__section"},n.a.createElement("div",{className:"c-workflow-item-card__illustration"},j),n.a.createElement("div",null,n.a.createElement("p",null,m),h&&n.a.createElement("p",null,h))),n.a.createElement("div",{className:"c-workflow-item-card__section"},A))};function Q(e){return{isFlexpaneOpen:Object(q["i"])(e),clogger:Object(O["a"])({state:e}),pageViewingSessionId:Object(C["j"])(e),featureNewxp3100V1:Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1"),experimentsAndTreatmentGroups:{exp3100v1treatmentA:Object(C["k"])(e,{experiment:"newxp_3100_1",treatment:"treatment_a"})}}}var Y=Object(g["connect"])(Q)(K()(z));var J=function e(t,a,r){return t[a][r]};var X=new y["b"]("welcome_place");var Z=function e(t){var a;var r=t.userHasAvailableChannels,i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id;var c={body:X.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:X.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null};var u={body:n.a.createElement("b",null,X.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:X.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:X.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})};var d=(a={},R()(a,T["c"].Pending,c),R()(a,T["c"].InProgress,c),R()(a,T["c"].Completed,u),a);var p=o===T["c"].Completed||r?J(d,o,"button"):X.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"});var m=J(d,o,"body");var h=J(d,o,"tip");var v=function e(){r?t.updateActionStateAndReload({userTaskId:l,state:T["c"].InProgress}):t.updateActionStateAndReload({userTaskId:l,state:T["c"].Completed});t.openChannelBrowser()};return n.a.createElement(Y,{workflowTask:i,onButtonClicked:v,illustration:n.a.createElement(L,null),buttonCopy:p,bodyCopy:m,tipCopy:h})};var $={updateActionStateAndReload:E["f"],openChannelBrowser:x["a"]};function ee(e){return{userHasAvailableChannels:Object(D["q"])(e).length>Object(D["r"])(e).length}}var te=Object(g["connect"])(ee,$)(Z);var ae=a(22);var re=a(11);var ne=a(14);var ie=new y["b"]("welcome_place");var se=function(){return n.a.createElement("svg",{id:"send_message","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35.73 35.41",role:"img"},n.a.createElement("title",null,ie.t("An illustration of a waving hand",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"})),n.a.createElement("path",{d:"M17.8,24.26,10,16.44a2,2,0,0,1-.08-2.83l.08-.08h0a2.06,2.06,0,0,1,2.91,0l5.39,5.39",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M20.71,21.34l-9.55-9.55a2.06,2.06,0,0,1,0-2.91h0a2.06,2.06,0,0,1,2.91,0l9.56,9.56",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M17.8,24.26,13,19.48a2.06,2.06,0,0,0-2.91,2.92h0L19.66,32a8.24,8.24,0,0,0,14-7.25s-1-7.22.63-10.08-1.48-4.73-3.18-3-2.56,5.88-2.56,5.88l-10-10a2.06,2.06,0,1,0-2.91,2.92L21,15.77",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M9.24,27.81a4.21,4.21,0,0,1-2.33-1.35,4.28,4.28,0,0,1-1.36-2.33",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M7.18,32.25A8.12,8.12,0,0,1,3.53,30a8.12,8.12,0,0,1-2.26-3.65",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M26.72,9.32A4.21,4.21,0,0,0,25.37,7,4.28,4.28,0,0,0,23,5.63",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M30.89,7.23a8,8,0,0,0-2.25-3.66A8.13,8.13,0,0,0,25,1.32",transform:"translate(-0.14 -0.2)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}))};var oe=a(456);var le=new y["b"]("welcome_place");var ce=function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{body:a?le.rt("<b>You\u2019re in Slack \u2014 now let your team know it</b> with a quick message to the group in the #{onboardingChannelName} channel.",{onboardingChannelName:t,note:"Body copy for a larger, more prominent action card (sending a message in a channel) in the Get Started page."}):"",button:a?le.rt("Say Hello",{note:"Button copy for an action card (sending a message in a channel) in the Get Started page."}):"",tip:null}};var ue=function e(t){return{body:le.rt("<b>Post a quick hello</b> in the #{generalChannelName} channel to let your team know you\u2019re here.",{generalChannelName:t,note:"Incomplete state copy for second action step. Most important info should be bolded."}),button:le.rt("Send a Message",{note:"Button label for incomplete state of second step."}),tip:null}};var de=function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{body:a?le.rt("<b>Say hello to one of your teammates</b> (like {memberName}) and let them know you\u2019re here.",{note:"Body copy for an action card (sending a message to inviter) in the Get Started page.",memberName:n.a.createElement(oe["a"],{id:t})}):"",button:a?le.rt("Send a Message",{note:"Button copy for an action card (sending a message) in the Get Started page."}):"",tip:null}};var pe=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{body:t?le.rt("<b>Say hello to one of your teammates</b> and let them know you\u2019re here.",{note:"Body copy for an action card (sending a message to someone) in the Get Started page."}):"",button:t?le.rt("Send a Message",{note:"Button copy for an action card (messaging a teammate) in the Get Started page."}):"",tip:null}};var me=function e(){return{body:le.rt("<b>Sent a message</b>",{note:"Completed state copy, bolded, no punctuation"}),button:le.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:le.rt("Tip: The channel name will appear <b>bolded</b> in the sidebar if there are any new messages.",{note:"Completed state body copy conveying a tip about how unread activity is shown in the UI. Use bolding on the word that indicates \u201cbold\u201d."})}};var he=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.onClick=function(){var t=e.props.workflowTask;var a=t.user_task_id;e.props.updateActionStateAndReload({userTaskId:a,state:T["c"].InProgress});e.props.startSendMessageWorkflowItem()};return e}d()(t,[{key:"componentDidMount",value:function e(){this.props.sentErrorLog&&this.props.markErrorLogSent()}},{key:"render",value:function e(){var t;var a=this.props,r=a.canPostInGeneralChannel,i=a.channelName,s=a.workflowTask,o=a.workflowTask,l=o.state,c=o.subtype,u=a.featureNewxp3100V1,d=a.featureNewxp3112,p=a.shouldShowVariant,m=a.forceFail;var h=i;var v=i;var f=void 0;var b=me();if(d){var g="";f=g?de(g):pe()}else f=u&&p?ce(h):ue(v);var _=(t={},R()(t,T["c"].Pending,f),R()(t,T["c"].InProgress,f),R()(t,T["c"].Completed,b),t);var y=(r||p)&&!m;return y?n.a.createElement(Y,{workflowTask:s,onButtonClicked:this.onClick,illustration:p?null:n.a.createElement(se,null),buttonCopy:J(_,l,"button"),bodyCopy:J(_,l,"body"),tipCopy:J(_,l,"tip"),subtype:c}):null}}]);return t}(r["Component"]);he.displayName="SendMessageItemCard";var ve={updateActionStateAndReload:E["f"],startSendMessageWorkflowItem:E["e"],markErrorLogSent:S["c"]};function fe(e){var t=Object(ae["b"])(e);var a=Object(D["j"])(e);var r=Object(C["g"])(e);var n=Object(D["e"])(e,r);var s=Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1");var o="newxp_3100_1"===Object(C["a"])(e);var l="treatment_a"===Object(C["b"])(e);var c=o&&l;var u=false;var d=void 0;var p=false;var m="";var h=Object(C["d"])(e);if(s&&c){d=Object(re["getDisplayName"])(n);if(!d){c=false;m="No tractor channel, falling back to #general"}}if(!d){d=Object(re["getDisplayName"])(a);if(!d){u=true;m="tractor -> general fallback failed, missing general ID"}}if(!h&&m){Object(ne["a"])({teamId:t}).error("WELCOME_PLACE",m,new Error(m));p=true}return{featureNewxp3100V1:s,featureNewxp3112:Object(i["isFeatureEnabled"])(e,"feature_newxp_3112"),canPostInGeneralChannel:!Object(re["isReadOnly"])(e,a),channelName:d,shouldShowVariant:c,forceFail:u,sentErrorLog:p}}var be=Object(g["connect"])(fe,ve)(he);var ge=a(35);var _e=new y["b"]("welcome_place");var ye=function e(t){var a;var i=t.currentTeam.name,s=t.workflowTask,o=t.workflowTask,l=o.state,c=o.user_task_id;Object(r["useEffect"])(function(){l!==T["c"].Completed&&t.updateActionStateAndReload({userTaskId:c,state:T["c"].Completed})});var u={body:_e.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:_e.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var d={body:_e.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:_e.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var p=(a={},R()(a,T["c"].Pending,u),R()(a,T["c"].InProgress,u),R()(a,T["c"].Completed,d),a);var m=J(p,l,"button");var h=J(p,l,"body");var v=J(p,l,"tip");return n.a.createElement(Y,{workflowTask:s,onButtonClicked:_["noop"],buttonCopy:m,bodyCopy:h,tipCopy:v})};var ke={updateActionStateAndReload:E["f"]};function Oe(e){return{currentTeam:Object(ge["d"])(e)||{name:""}}}var Ce=Object(g["connect"])(Oe,ke)(ye);var Ee=a(1078);var Se=a(294);var we=new y["b"]("welcome_place");var Ie=function(){return n.a.createElement("svg",{id:"enable_notifications","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25.22 35.61",role:"img"},n.a.createElement("title",null,we.t("An illustration of a ringing bell",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"})),n.a.createElement("path",{d:"M29,28.19l-2.17-2.36c.51-7.65-3-10.61-4.4-11.5V14a4.5,4.5,0,0,0-9,0h0v.33C12,15.22,8.51,18.18,9,25.83L6.93,28.19a1.71,1.71,0,0,0,1.26,2.86H14a3.94,3.94,0,0,0,7.86,0h5.83A1.7,1.7,0,0,0,29,28.19Z",transform:"translate(-5.36 -0.23)",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"3.74",y1:"25.6",x2:"21.43",y2:"25.6",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"8.66",y1:"30.82",x2:"16.52",y2:"30.82",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"12.59",y1:"5.12",x2:"12.59",y2:"1.13",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"5.24",y1:"7.01",x2:"2.42",y2:"4.2",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"19.98",y1:"6.97",x2:"22.8",y2:"4.16",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}))};var je=new y["b"]("welcome_place");var Te=function e(t){var a;var i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id;var c=Object(Se["n"])();Object(r["useEffect"])(function(){o!==T["c"].Completed&&Object(Se["f"])()&&t.updateActionStateAndReload({userTaskId:l,state:T["c"].Completed})});var u={body:je.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:je.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null};var d={body:"denied"===c?je.rt("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.",{note:"Completed state copy, bolded, no punctuation",fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}):n.a.createElement("b",null,je.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:je.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var p=(a={},R()(a,T["c"].Pending,u),R()(a,T["c"].InProgress,u),R()(a,T["c"].Completed,d),a);var m="default"===c;var h=m?T["c"].InProgress:o;var v=J(p,h,"button");var f=J(p,h,"body");var b=J(p,h,"tip");var g=function e(){t.updateActionStateAndReload({userTaskId:l,state:T["c"].InProgress});t.promptForPermissionAndSetPref().then(function(){t.updateActionStateAndReload({userTaskId:l,state:T["c"].Completed})})};return"na"!==c?n.a.createElement(Y,{workflowTask:G()({},i,{state:m?T["c"].InProgress:i.state}),onButtonClicked:g,illustration:n.a.createElement(Ie,null),buttonCopy:v,bodyCopy:f,tipCopy:b}):null};var Ae={updateActionStateAndReload:E["f"],promptForPermissionAndSetPref:Ee["c"]};function Ne(e){return{currentTeam:Object(ge["d"])(e)||{name:""}}}var Me=Object(g["connect"])(Ne,Ae)(Te);var Pe=a(28);var Re=a(33);var xe=new y["b"]("welcome_place");var De=function(e){var t=e.featureNewxp3100,a=e.fileManagementType;if(a===T["a"].Gdrive)return n.a.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve"},n.a.createElement("title",null,t?xe.t("An illustration of the Google Drive logo",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("g",null,n.a.createElement("path",{d:"M33,22.1L27.9,31H9.6l5.2-8.9H33z M12.3,5.9l5.2,8.9L8.1,31L3,22.1L12.3,5.9z M23.9,5L33,20.7H22.7L13.6,5\n\t\tH23.9z"})));if(a===T["a"].OneDrive)return n.a.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve"},n.a.createElement("title",null,t?xe.t("An illustration of the OneDrive logo",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("g",null,n.a.createElement("path",{d:"M7.1,24c0-2.8,1.9-4.9,5.1-5.6c0.8-3.7,3.7-6.1,7.3-6.1c2.6,0,4.5,1.3,5.5,2.8c0.7-0.4,1.5-0.5,2.5-0.5\n\t\tc-0.4-3.9-3.9-6.9-7.8-6.9c-2.8,0-5.2,1.7-6.5,4c-0.9-0.5-1.9-0.8-2.9-0.8c-3.3,0-5.9,2.8-5.9,6.1c0,0.2,0,0.4,0.1,0.6\n\t\tc-2.6,0.4-4.3,2.2-4.3,4.9c0,2.5,2.3,4.8,4.7,4.8h3.2C7.3,26.2,7.1,25,7.1,24z M32.5,21.2c2,0.3,3.4,1.8,3.4,4c0,1.8-1,3.1-3.4,3.1\n\t\tH13.3c-3.7,0-5-1.8-5-4.4c0-2.5,1.6-4.1,4.8-4.5c0.5-3.6,2.8-5.9,6.4-5.9c2.7,0,4.3,1.6,5.2,2.9c0.9-0.4,1.8-0.7,2.7-0.7\n\t\tC30.3,15.7,32.7,18,32.5,21.2z"})));return n.a.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve"},n.a.createElement("title",null,t?xe.t("An illustration of a puzzle piece that depicts the App Browser",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("g",null,n.a.createElement("path",{d:"M31.4,35.1H10.3c-2,0-3.6-1.6-3.6-3.6v-6.5c-0.6,0.1-1.2,0-1.8-0.1c-1.5-0.3-2.8-1.2-3.6-2.5\n\t\tc-0.8-1.3-1.1-2.8-0.8-4.3c0.1-0.3,0.1-0.6,0.2-0.9c0.9-2.5,3.4-3.9,5.9-3.7V10c0-1,0.4-1.9,1-2.5c0.7-0.7,1.6-1,2.5-1c0,0,0,0,0,0\n\t\th5c0-0.1,0-0.3,0-0.4c0-0.6,0.1-1.2,0.3-1.8c0.5-1.5,1.5-2.6,2.9-3.3c1.4-0.7,2.9-0.8,4.4-0.3c1.5,0.5,2.6,1.5,3.3,2.9\n\t\tc0.5,0.9,0.7,1.9,0.6,3h5.1c1.9,0,3.5,1.6,3.5,3.6v21.1C35.5,33.3,33.6,35.1,31.4,35.1z M7.9,22.6c0.2,0,0.4,0.1,0.6,0.2\n\t\tC8.8,23,9,23.4,9,23.7v7.9c0,0.8,0.6,1.4,1.4,1.4h21.1c1,0,1.9-0.8,1.9-1.9V10c0-0.7-0.6-1.4-1.4-1.4h-6.4c-0.4,0-0.7-0.2-0.9-0.5\n\t\tc-0.2-0.3-0.3-0.7-0.1-1c0.3-0.9,0.2-1.9-0.2-2.7S23.2,3,22.3,2.7C20.4,2,18.4,3,17.7,4.9c-0.1,0.4-0.2,0.7-0.2,1.1\n\t\tc0,0.4,0.1,0.8,0.2,1.1c0.1,0.3,0.1,0.7-0.1,1c-0.2,0.3-0.5,0.5-0.9,0.5h-6.4c-0.4,0-0.7,0.1-1,0.4C9.1,9.3,9,9.6,9,10v5\n\t\tc0,0.4-0.2,0.7-0.5,0.9c-0.3,0.2-0.7,0.3-1,0.1c-1.8-0.7-3.9,0.2-4.6,2.1c-0.1,0.2-0.1,0.3-0.2,0.5c-0.2,0.9,0,1.9,0.5,2.7\n\t\tc0.5,0.8,1.3,1.3,2.2,1.5c0.7,0.1,1.4,0.1,2-0.2C7.6,22.7,7.7,22.6,7.9,22.6z"}),n.a.createElement("path",{d:"M21,27.3c-0.6,0-1.1-0.5-1.1-1.1V15.9c0-0.6,0.5-1.1,1.1-1.1s1.1,0.5,1.1,1.1v10.3C22,26.8,21.6,27.3,21,27.3z\n\t\t"}),n.a.createElement("path",{d:"M26.3,21.9H16c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h10.3c0.6,0,1.1,0.5,1.1,1.1S26.9,21.9,26.3,21.9z"})))};var Fe=new y["b"]("welcome_place");var Le=R()({},T["a"].Gdrive,{name:"Google Drive",appId:Re["isDev"]?"A061CBSHF":"A6NL8MJ6Q"});var Be=Re["isDev"]?"/apps/category/At06175UHW-file-management":"/apps/category/At0EFRCDPW-file-management";var Ue="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome";var qe=function e(t){var a;var r=t.workflowTask,i=t.workflowTask,s=i.state,o=i.user_task_id,l=t.featureNewxp3100,c=t.team,u=t.fileManagementType,d=t.fileManagementAuthUrl,p=t.isFileManagementAppInstalledOnTeam;var m=void 0;var h=void 0;var v=Le[u];if(v){var f=v.name;m={body:l?Fe.rt("<b>Connect to {fileManagementAppName}</b> to easily share and collaborate on files with your team.",{fileManagementAppName:f,note:"Incomplete state copy for file management step. Most important info should be bolded. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive"}):null,button:l?Fe.rt("Connect to {fileManagementAppName}",{fileManagementAppName:f,note:"Button label for incomplete state of file management step. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive."}):null,tip:null};h={body:l?n.a.createElement("b",null,Fe.rt("Connected to {fileManagementAppName}",{fileManagementAppName:f,note:"Completed state copy, bolded, no punctuation"})):null,button:l?Fe.rt("Completed",{note:"Button label for completed state of all tasks."}):null,tip:l?Fe.rt("Tip: To share or collaborate on {fileManagementAppName} files without leaving Slack, click on the <b>paperclip icon</b> next to the message field.",{fileManagementAppName:f,note:'Completed state body copy conveying a tip about how to use the file management integration in Slack; use bolding on the words "paperclip icon". fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive.'}):null}}else{m={body:l?Fe.rt("<b>Connect your file management tools</b> to easily share and collaborate on files with your team.",{note:"Incomplete state copy for file management step when user is not associated with a GSuite/Office 365 enterprise suite. Most important info should be bolded."}):null,button:l?Fe.rt("Browse Apps",{note:"Button label for incomplete state of file management step. Links to file management section of the App Directory."}):null,tip:null};h={body:l?n.a.createElement("b",null,Fe.rt("Browsed the App Directory",{note:"Completed state copy, bolded, no punctuation"})):null,button:l?Fe.rt("Completed",{note:"Button label for completed state of all tasks."}):null,tip:null}}var b=(a={},R()(a,T["c"].Pending,m),R()(a,T["c"].InProgress,m),R()(a,T["c"].Completed,h),a);var g=J(b,s,"button");var _=J(b,s,"body");var y=J(b,s,"tip");var k=function e(){if(v){d&&p?window.open(d):t.openAuthenticatedUrlInBrowser(c,"apps/"+v.appId+"?"+Ue);t.updateActionStateAndReload({userTaskId:o,state:T["c"].InProgress})}else{t.openAuthenticatedUrlInBrowser(c,Be+"?"+Ue);t.updateActionStateAndReload({userTaskId:o,state:T["c"].Completed})}};return n.a.createElement(Y,{workflowTask:r,onButtonClicked:k,illustration:n.a.createElement(De,{featureNewxp3100:l,fileManagementType:u}),buttonCopy:g,bodyCopy:_,tipCopy:y,clogElementName:u})};var We={updateActionStateAndReload:E["f"],openAuthenticatedUrlInBrowser:Pe["openAuthenticatedUrlInBrowser"]};function He(e){var t=Object(C["c"])(e),a=t.auth_url,r=t.type,n=t.is_installed_on_team;return{featureNewxp3100:Object(i["isFeatureEnabled"])(e,"feature_newxp_3100"),team:Object(ge["d"])(e),fileManagementAuthUrl:a,fileManagementType:r,isFileManagementAppInstalledOnTeam:n}}var Ge=Object(g["connect"])(He,We)(qe);var Ve=a(64);var Ke=a.n(Ve);function ze(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!==typeof e)throw new Error("String required for capitalization; type "+("undefined"===typeof e?"undefined":Ke()(e))+" given");var a=e.slice(1);t&&(a=a.toLowerCase());return""+e.charAt(0).toUpperCase()+a}var Qe=new y["b"]("welcome_place");var Ye=function(e){var t=e.featureNewxp3100;return n.a.createElement("svg",{version:"1.1",id:"download_desktop_app",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve"},n.a.createElement("title",null,t?Qe.t("An illustration of a download tray, used to represent the Slack client download action",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("g",null,n.a.createElement("g",null,n.a.createElement("line",{style:{fill:"none",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10},x1:"18",y1:"10.5",x2:"18",y2:"24.4"}),n.a.createElement("polyline",{style:{fill:"none",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10},points:"24.2,19.2 18,25.4 11.8,19.2 \t\t"})),n.a.createElement("polyline",{style:{fill:"none",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10},points:"4.6,24.9 4.6,32.2 31.4,32.2 31.4,24.9 \t"})))};var Je=new y["b"]("welcome_place");var Xe="https://slack.com/get";var Ze="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome";var $e=function e(t){var a;var i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id,c=t.featureNewxp3100;Object(r["useEffect"])(function(){Object(Re["isSSB"])()&&o!==T["c"].Completed&&t.updateActionStateAndReload({userTaskId:l,state:T["c"].Completed})});var u=Object(Re["getOperatingSystem"])();var d={body:c?Je.rt("<b>Download the desktop app</b> to get back to Slack swiftly",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}):null,button:c?Je.rt("Get Slack for {operatingSystem}",{note:"Button label for pending state of the desktop app download card. operatingSystem refers to the current operating system that the user is on (Mac, Windows, or Linux).",operatingSystem:ze(u)}):null,tip:null};var p={body:c?Je.rt("<b>Downloaded the desktop app</b>",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}):null,button:Je.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var m=(a={},R()(a,T["c"].Pending,d),R()(a,T["c"].InProgress,d),R()(a,T["c"].Completed,p),a);var h=J(m,o,"button");var v=J(m,o,"body");var f=J(m,o,"tip");var b=function e(){o===T["c"].Pending&&t.updateActionStateAndReload({userTaskId:l,state:T["c"].InProgress});window.open(Xe+"?"+Ze)};return n.a.createElement(Y,{workflowTask:i,onButtonClicked:b,illustration:n.a.createElement(Ye,{featureNewxp3100:c}),buttonCopy:h,bodyCopy:v,tipCopy:f})};var et={updateActionStateAndReload:E["f"]};function tt(e){return{featureNewxp3100:Object(i["isFeatureEnabled"])(e,"feature_newxp_3100")}}var at=Object(g["connect"])(tt,et)($e);var rt=new y["b"]("welcome_place");var nt=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.workflowItems,r=t.experiment,i=t.treatment,s=t.featureNewxp3100V1;var o="newxp_3100_1"===r;var l="treatment_a"===i;var c=o&&l;var u=rt.t("What to do next",{note:"Title for a module with tasks / action steps."});var d=rt.t("It\u2019s helpful to do these things first, so you can get connected and on the same page with your team.",{note:"Subtitle for \u201cWhat to do next\u201d module. Should convey confidence and authority without being pushy."});var p=s?rt.t("Welcome! Here's what to do next.",{note:"Title for a module with tasks / action steps in the Get Started page."}):u;var m=s?"":d;var h=a.sort(function(e,t){if("completed"===e.state){if("completed"===t.state)return 0;return 1}if("completed"===t.state)return-1;return 0});return n.a.createElement(M,{title:c?p:u,subtitle:c?m:d,shouldShowExperimentVariant:c},n.a.createElement("div",{className:"c-workflow-item-container"},h.map(function(e){var t=e.subtype;var a=null;t===T["d"].SeeWelcomePlace?a=n.a.createElement(Ce,{key:"workflow_item_card_"+t,workflowTask:e}):t===T["d"].JoinChannel?a=n.a.createElement(te,{key:"workflow_item_card_"+t,workflowTask:e}):t===T["d"].SendMessage?a=n.a.createElement(be,{key:"workflow_item_card_"+t,workflowTask:e}):t===T["d"].EnableNotifications?a=n.a.createElement(Me,{key:"workflow_item_card_"+t,workflowTask:e}):t===T["d"].AddAppFileManagement?a=n.a.createElement(Ge,{key:"workflow_item_card_"+t,workflowTask:e}):t===T["d"].DownloadDesktopApp&&(a=n.a.createElement(at,{key:"workflow_item_card_"+t,workflowTask:e}));return a})))}}]);return t}(r["Component"]);nt.displayName="WorkflowItemContainer";function it(e){return{experiment:Object(C["a"])(e),treatment:Object(C["b"])(e),featureNewxp3100V1:Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1")}}var st=Object(g["connect"])(it)(nt);var ot=a(3523);var lt=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.hasNoPadding,i=t.hasNoBorder,s=t.hasNoBackground;var o=b()("welcome-card extra-rounded overflow_hidden",a,{padding_125:!r,bordered:!i,sk_white_bg:!s});return n.a.createElement("div",{className:o},this.props.children)}}]);return t}(r["Component"]);lt.displayName="WelcomeCard";var ct=lt;var ut=a(3525);var dt=new y["b"]("welcome_place");var pt=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showPlayer=function(){var e=a.state.showPlayer;var t=a.props,r=t.clogger,n=t.pageViewingSessionId;a.setState(function(){return{showPlayer:!e}});r.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:w["k"].VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:n}}})};a.containerRef=n.a.createRef();a.state={showPlayer:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:w["z"].WELCOME_PLACE_VIDEO}})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.state.showPlayer;var a=this.props,i=a.youtubeEmbedUrl,s=a.className,o=a.experimentsAndTreatmentGroups,l=a.featureNewxp3100V1,c=a.isFlexpaneOpen;var u=b()("video-player__title-card video-player__content",{"player-is-active":t});var d=b()("video-player__iframe__container video-player__content",{"player-is-active":t});var p=o.exp3100v1treatmentA;var m=p&&l;var h=b()("video-player",{newxp3100_v1_a:m,flexpaneOpen:c});var v=i+"&modestbranding=1&rel=0";var f=m?n.a.createElement("div",{className:"video-player__copy"},l?dt.rt("<p><b>An intro to Slack channels</b></p>",{notes:"Title for \u201cteam chat and channels\u201d video module in the Get Started page. "}):null,l?dt.rt("<p>Slack helps you organize all your work in channels, so your team can connect, communicate, and get work done more quickly.</p>",{note:"Body copy for \u201cteam chat and channels\u201d video module in the Get Started page."}):null):null;var g=m?null:n.a.createElement(r["Fragment"],null,n.a.createElement("h1",{className:"sk_white_always margin_bottom_50"},dt.rt("Welcome to Slack!")),n.a.createElement("p",{className:"sk_white_always margin_bottom_75"},dt.t("Slack helps your team communicate, connect, and do your best work together.")),n.a.createElement(U["d"],{onClick:this.showPlayer},dt.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"})));var _=m?{onClick:this.showPlayer,role:"button"}:{};return n.a.createElement(ct,{className:s,hasNoPadding:true,hasNoBorder:true,hasNoBackground:true},n.a.createElement("link",{rel:"preload",href:v+"&autoplay=1",as:"document"}),n.a.createElement("div",{className:h,ref:this.containerRef},n.a.createElement("div",{className:"video-player__container"},n.a.createElement("div",G()({className:u,role:"region"},_),g),n.a.createElement("div",{className:d},n.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:v+(t?"&autoplay=1":""),frameBorder:"0",allowFullScreen:true,title:dt.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})}))),f))}}]);return t}(r["Component"]);pt.displayName="VideoCard";function mt(e){var t=Object(O["a"])({state:e});return{clogger:t,pageViewingSessionId:Object(C["j"])(e),isFlexpaneOpen:Object(q["i"])(e),featureNewxp3100V1:Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1"),experimentsAndTreatmentGroups:{exp3100v1treatmentA:Object(C["k"])(e,{experiment:"newxp_3100_1",treatment:"treatment_a"})}}}var ht={};var vt=Object(g["connect"])(mt,ht)(K()(pt));var ft=a(44);var bt=a(97);var gt=a(25);var _t=a(122);var yt=a(373);var kt=a(54);var Ot=a(191);var Ct=a(1591);var Et=new y["b"]("welcome_place");var St=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.startIm=function(){var t=e.props,a=t.member,r=t.clogger,n=t.idx,i=t.pageViewingSessionId;e.props.startImByMemberId({memberId:a.id});r.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:a.id,element_index:n,element_type:w["k"].BUTTON}},welcome_place:{welcome_session_id:i}}})};return e}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.member,i=t.type,s=t.channels,o=t.teamDomain,l=t.featureJiraNewxp2372;if(!l)return null;var c=a.profile;var u=i?n.a.createElement("p",{className:"member-card__content"},Et.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null;var d=1===s.length?Et.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):Et.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"});var p=s.map(function(e,t){var a=Object(re["constructAbsoluteChannelPermalink"])({channelId:e,teamDomain:o});return n.a.createElement(r["Fragment"],{key:"fragment-"+e},n.a.createElement(ft["a"],{key:"link-"+e,href:a,className:"no_wrap"},n.a.createElement(yt["a"],{key:"entity-"+e,channelId:e})),t+1===s.length?".":", ")});return n.a.createElement(ct,{className:"member-card-container flex_one",hasNoPadding:true},n.a.createElement("div",{className:"member-card"},n.a.createElement(kt["c"],{tip:Et.rt("Message {name}",{name:c.real_name}),position:"top"},n.a.createElement(ft["a"],{onClick:this.startIm,className:"member-card__top-link"},n.a.createElement("div",{className:"member-card__top"},n.a.createElement(Ot["a"],{size:56,isInteractive:false,imageUrl:c.image_72,imageUrl2x:c.image_192,className:"member-card__avatar"}),n.a.createElement("div",{className:"flex_one"},n.a.createElement(Ct["a"],{member:a,className:"member-card__name"}),u)))),n.a.createElement("div",{className:"member-card__bottom"},n.a.createElement("p",{className:"member-card__content"},d,p))))}}]);return t}(r["Component"]);St.displayName="MemberCard";function wt(e,t){var a=t.id;var r=Object(gt["e"])(e,a);var n=Object(Pe["getTeamDomain"])(Object(ge["j"])(e,r.team_id));var s=Object(O["a"])({state:e});return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),teamDomain:n,member:r,clogger:s,pageViewingSessionId:Object(C["j"])(e)}}var It={startImByMemberId:_t["startImByMemberId"]};var jt=Object(g["connect"])(wt,It)(St);var Tt=a(3527);var At=new y["b"]("welcome_place");var Nt=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showMoreUsers=function(){var e=a.props,t=e.clogger,r=e.pageViewingSessionId;a.setState(function(){return{showMore:true}});t.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:w["k"].LINK}},welcome_place:{welcome_session_id:r}}})};a.showMemberDirectory=function(){var e=a.props,t=e.clogger,r=e.pageViewingSessionId;t.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:w["k"].LINK}},welcome_place:{welcome_session_id:r}}});a.props.showMemberDirectory()};a.containerRef=n.a.createRef();a.state={showMore:false,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:w["z"].WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this;var a=this.props,i=a.className,s=a.featureJiraNewxp2372;var o=this.state,l=o.initialUsersCards,c=o.additionalUserCards,u=o.suggestOrgChart,d=o.showMore;var p=function e(){var a=d&&u?At.t("View directory"):At.t("Show more");if(c.length){var r=t.showMoreUsers;if(d&&!u)return null;d&&u&&(r=t.showMemberDirectory);return n.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},n.a.createElement(ft["a"],{onClick:r},a),n.a.createElement(B["b"],{type:"chevron-down"}))}return null};return s?n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:b()("member-card-grid",i,{"member-card-grid-1":1===l.length,"member-card-grid-2":2===l.length}),ref:this.containerRef},l.map(function(e,t){return n.a.createElement(jt,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})}),d&&c.map(function(e,t){return n.a.createElement(jt,{id:e.id,idx:t+l.length,key:e.id,channels:e.channels})})),p()):null}}],[{key:"getDerivedStateFromProps",value:function e(t){var a=Object(_["chunk"])(t.userCards,6);var r=a.shift()||[];var n=[];a.length&&(n=Object(_["chunk"])(Object(_["flatten"])(a),12));var i=n.shift()||[];var s=!!n.length;return{initialUsersCards:r,additionalUserCards:i,suggestOrgChart:s}}}]);return t}(r["Component"]);Nt.displayName="MemberRow";function Mt(e){var t=Object(O["a"])({state:e});return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),clogger:t,pageViewingSessionId:Object(C["j"])(e)}}function Pt(e){return{showMemberDirectory:function t(){e(Object(bt["i"])())}}}var Rt=Object(g["connect"])(Mt,Pt)(K()(Nt));var xt=a(2059);var Dt=a(53);var Ft=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogLinkClick=function(e){var t=e.url,r=e.index,n=e.query,i=e.articleId;a.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:w["k"].LINK,element_value:i.toString(),element_index:r},article_url:t,search_terms:n,locale:Object(Dt["a"])()},welcome_place:{welcome_session_id:a.props.pageViewingSessionId}}})};a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:w["z"].WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.props.defaultArticlesData;return n.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},n.a.createElement(xt["a"],{defaultArticlesData:t,onOpenLink:this.clogLinkClick,noTopMargin:true}))}}]);return t}(r["Component"]);Ft.displayName="HelpSearchCard";function Lt(e){return{clogger:Object(O["a"])({state:e}),pageViewingSessionId:Object(C["j"])(e)}}var Bt=Object(g["connect"])(Lt)(K()(Ft));var Ut=a(3529);var qt=a(4478);var Wt=.8;var Ht=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.elementsForLogging=[];a.addElementForLogging=function(e){a.elementsForLogging.push(e);requestAnimationFrame(function(){a.props.scrollContainerEl&&a.checkElementsForClogging(a.props.scrollContainerEl)})};a.removeElementFromLogging=function(e){if(!e)return;var t=Object(_["findIndex"])(a.elementsForLogging,function(t){return t.element===e});-1!==t&&a.elementsForLogging.splice(t,1)};a.onScrollListenerDebounced=Object(_["debounce"])(function(e){a.checkElementsForClogging(e.target)},1e3);return a}d()(t,[{key:"componentDidMount",value:function e(){this.setupEventListeners()}},{key:"componentDidUpdate",value:function e(t){var a=this;if(t.scrollContainerEl!==this.props.scrollContainerEl){t.scrollContainerEl&&t.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced);this.setupEventListeners();requestAnimationFrame(function(){a.props.scrollContainerEl&&a.checkElementsForClogging(a.props.scrollContainerEl)})}}},{key:"componentWillUnmount",value:function e(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}},{key:"checkElementsForClogging",value:function e(t){var a=this;var r=t.getClientRects()[0];if(!r)return;this.elementsForLogging.slice().forEach(function(e){var t=e.element,n=e.uiContext,i=e.visibilityRatio;if(!t)return;var s=t.getClientRects()[0];if(!s)return;var o=i||Wt;var l=s.top<r.top&&s.bottom>r.bottom;var c=s.top>r.top&&s.bottom<r.bottom;var u=0;l||c?u=1:s.top<r.top&&s.bottom>r.top&&s.bottom<r.bottom?u=(s.bottom-r.top)/(s.bottom-s.top):s.bottom>r.bottom&&s.top>r.top&&s.top<r.bottom&&(u=(r.bottom-s.top)/(s.bottom-s.top));if(u>=o){a.removeElementFromLogging(t);a.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:G()({},n,{action:w["w"].IMPRESSION}),welcome_place:{welcome_session_id:a.props.pageViewingSessionId}}})}})}},{key:"setupEventListeners",value:function e(){if(!this.props.scrollContainerEl)return;this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}},{key:"render",value:function e(){return n.a.createElement(V.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}}]);return t}(r["Component"]);Ht.displayName="VisibilityLoggerProviderBase";var Gt=Object(g["connect"])(function(e){return{clogger:Object(O["a"])({state:e}),pageViewingSessionId:Object(C["j"])(e)}})(Ht);var Vt=new y["b"]("welcome_place");var Kt=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isOnboarding,r=t.completeOnboarding,n=t.pageEntryPoint,i=t.pageViewingSessionId;a&&r();this.props.maybeRefreshWelcomePlaceData();this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].IMPRESSION,ui_element:w["z"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:i,entry_point:T["b"][n||"direct"]}}});this.props.setPageEntryPoint("direct")}},{key:"componentWillUnmount",value:function e(){var t=this.props.pageViewingSessionId;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].EXIT_VIEW,ui_element:w["z"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:t}}});this.props.regeneratePageViewingSessionId()}},{key:"render",value:function e(){var t=this.props,a=t.items,r=t.experimentsAndTreatmentGroups,i=t.featureNewxp3100V1;var s=r.exp3100v1treatmentA;var o=s&&i;return n.a.createElement(Gt,{scrollContainerEl:this.containerRef.current},n.a.createElement("div",{ref:this.containerRef,className:b()("p-welcome-place overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(k["a"])(),"welcome-place-page-container--border-inset":!Object(k["a"])(),"welcome-place-page-container--height-fix":Object(k["a"])(),full_height:!Object(k["a"])(),newxp3100_v1_a:o}),"data-qa":"welcome-place-page-container"},a.map(function(e,t){switch(e.type){case"video":return n.a.createElement(M,{key:""+e.type+t,title:i?Vt.t("Learn more about Slack",{note:"Title for the new section in the Get Started page that includes the intro to channels video and the Help Center search bar."}):""},n.a.createElement(vt,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return n.a.createElement(st,{key:""+e.type+t,workflowItems:e.content.workflow.tasks});case"user_cards":return n.a.createElement(M,{key:""+e.type+t,title:Vt.t("See who else is here"),subtitle:Vt.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},n.a.createElement(Rt,{userCards:e.content.user_cards}));case"help_center_search":return n.a.createElement(M,{key:""+e.type+t,shouldShowExperimentVariant:o,shouldShowExperimentVariant2:true,title:i?Vt.t("Have a question? We\u2019re here to help.",{note:"Title for the Help Center search bar in the Get Started page."}):Vt.t("Have a question?")},n.a.createElement(Bt,{defaultArticlesData:Object(_["get"])(e,"content.help_center_search.articles",null)}));default:return null}})))}}]);return t}(r["Component"]);Kt.displayName="WelcomePlace";function zt(e){return{items:Object(C["h"])(e),isOnboarding:!!Object(I["f"])(e),clogger:Object(O["a"])({state:e}),pageEntryPoint:Object(C["i"])(e),pageViewingSessionId:Object(C["j"])(e),experiment:Object(C["a"])(e),treatment:Object(C["b"])(e),featureNewxp3100V1:Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1"),experimentsAndTreatmentGroups:{exp3100v1treatmentA:Object(C["k"])(e,{experiment:"newxp_3100_1",treatment:"treatment_a"})}}}function Qt(e){return{completeOnboarding:function t(){e(Object(j["a"])())},maybeRefreshWelcomePlaceData:function t(){e(Object(E["d"])())},setPageEntryPoint:function t(){e(S["f"].apply(void 0,arguments))},regeneratePageViewingSessionId:function t(){e(Object(S["d"])())}}}var Yt=Object(g["connect"])(zt,Qt)(Kt);var Jt=a(31);var Xt=a(0);var Zt=a(141);var $t=a(73);var ea=a(15);var ta=Object(ea["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount});ta.meta={name:"getNewUnreadMsgCount",key:"unreadsViewStoreSelectorsGetNewUnreadMsgCount"};var aa=Object(ea["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId});aa.meta={name:"getRefreshId",key:"unreadsViewStoreSelectorsGetRefreshId"};var ra=Object(ea["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey});ra.meta={name:"getFocusRequestedThreadKey",key:"unreadsViewStoreSelectorsGetFocusRequestedThreadKey"};var na=a(920);var ia=a(924);var sa=a(557);var oa=a(137);var la=a(1458);var ca=a(1465);var ua=a(1428);var da=a(1668);var pa=a(2007);var ma=a(2008);var ha=a(300);var va=a(1669);var fa=a(1303);var ba=a(1327);var ga=a(20);var _a=a(498);var ya=a(38);var ka=a(156);var Oa=a(421);var Ca=a(187);var Ea=a(515);var Sa=a(134);var wa=a(223);var Ia=a(2050);var ja=a(357);var Ta=a(233);function Aa(e){var t=void 0;var a=void 0;var r=void 0;if(Object(i["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){t=Object(o["getCountsPerChannel"])(e);a=Object(_["keys"])(t);r=Object(o["hasCountsPerChannelChanged"])(e)}else{a=Object(ja["g"])();a=a.filter(function(t){return!Object(Ta["isChannelMutedById"])(e,t)});r=Object(ja["h"])();t={};a.forEach(function(a){var r=Object(D["e"])(e,a);t[r.id]={unreadCnt:Object(re["getUnreadCount"])(r),unreadHighlightCnt:Object(re["getUnreadHighlightCount"])(r)}})}return{countsPerChannel:t,unreadChannelIds:a,unreadChannelsAreKnown:r}}var Na=Aa;var Ma=new y["b"]("all_unreads");var Pa={visible:Xt["b"].bool.isRequired,showUndo:Xt["b"].bool.isRequired,teamId:Xt["b"].string.isRequired,preferredSkinTone:Xt["b"].string.isRequired,emojiMode:Xt["b"].string.isRequired,undoMarkAllRead:Xt["b"].func.isRequired,totalUnreads:Xt["b"].number.isRequired,refreshAllUnreads:Xt["b"].func.isRequired,userAttentionIsOnChat:Xt["b"].bool.isRequired};var Ra=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUndo=a.onUndo.bind(a);a.onRefresh=a.onRefresh.bind(a);a.onEnter=a.onEnter.bind(a);a.generateMessage();a.state={allowRefreshButton:e.visible};a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new wa["a"];this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function e(t){var a=this;t.visible&&!this.props.visible?this.generateMessage():!t.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){a.setState(function(){return{allowRefreshButton:true}})},1e3))}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.buttonDelayTimer);this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function e(t){var a=this.props.visible;var r=Object(k["a"])()?this.props.userAttentionIsOnChat:Object(Ca["f"])();if(!a||!r)return;if(!this.shouldShowNewButton())return;var n=t.target;if(Object(Ea["a"])(n))return;var i="BODY"===n.nodeName;var s=this.containerRef.current&&this.containerRef.current.contains(n);(i||s)&&this.onRefresh()}},{key:"onRefresh",value:function e(){this.props.refreshAllUnreads();this.setState(function(){return{allowRefreshButton:false}})}},{key:"onUndo",value:function e(){this.props.undoMarkAllRead();this.setState(function(){return{allowRefreshButton:false}})}},{key:"generateMessage",value:function e(){var t=this.props,a=t.teamId,r=t.preferredSkinTone,n=t.emojiMode;this.message=Object(Ia["a"])({locale:Object(_a["a"])({teamId:a}),preferredSkinTone:r,emojiMode:n});var i=new Image;i.src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function e(){var t=this.state.allowRefreshButton;var a=this.props.totalUnreads;return t&&a>0}},{key:"render",value:function e(){var t=this.props,a=t.visible,r=t.showUndo,i=t.totalUnreads;if(!a)return null;var s=this.shouldShowNewButton();var o=b()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":s});var l=function e(t){var a=t.tag,r=t.text;if("enter-icon"===a)return n.a.createElement(B["b"],{type:"enter",size:"inherit"});return n.a.createElement("b",null,r)};return n.a.createElement("div",{className:o,ref:this.containerRef},n.a.createElement("div",{className:"p-unreads_view__empty__message"},n.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),n.a.createElement("div",null,this.message.lineOne,n.a.createElement("br",null),this.message.lineTwo)),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U["d"],{onClick:this.onRefresh},Ma.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:i})),n.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(Re["isMac"])()?Ma.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,l):Ma.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,l))),r&&n.a.createElement("div",{className:"p-unreads_view__empty__undo"},n.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},Ma.t("You marked all your channels read."),n.a.createElement(Sa["a"],{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},Ma.t("Undo")))))}}]);return t}(r["Component"]);Ra.displayName="EmptyState";function xa(e){var t=Na(e),a=t.countsPerChannel;var r=Object(_["sum"])(Object(_["map"])(a,"unreadCnt"));return{teamId:Object(ae["b"])(e),preferredSkinTone:Object(ya["h"])(e,"preferred_skin_tone")||"1",emojiMode:Object(ka["h"])(e,{forceDisplay:true}),totalUnreads:r,userAttentionIsOnChat:Object(Oa["e"])(e)}}var Da=Object(g["connect"])(xa)(Ra);var Fa=a(26);var La=a.n(Fa);var Ba=a(4647);var Ua=a(411);var qa=a(424);var Wa=a(1304);var Ha=a(448);var Ga=a(413);var Va=a(30);var Ka=a(386);var za=a(34);var Qa=Object(Va["a"])("Expand a channel in All Unreads",function(e,t,a){var r=Object(ya["g"])(t());if(!r.includes(a))return;var n=Object(_["without"])(r,a);e(Object(Ka["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(za["b"])({method:"unread.expand",args:{channel:a},reason:"all_unreads_expand"}))});Qa.meta={name:"expandChannel",key:"fetchersUnreadsApiExpandChannel",description:"Expand a channel in All Unreads"};Qa.propTypes=Xt["b"].string.isRequired;var Ya=Object(Va["a"])("Collapse a channel in All Unreads",function(e,t,a){var r=Object(ya["g"])(t());if(r.includes(a))return;var n=[].concat(La()(r),[a]);e(Object(Ka["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(za["b"])({method:"unread.collapse",args:{channel:a},reason:"all_unreads_collapse"}))});Ya.meta={name:"collapseChannel",key:"fetchersUnreadsApiCollapseChannel",description:"Collapse a channel in All Unreads"};Ya.propTypes=Xt["b"].string.isRequired;var Ja=a(105);var Xa=a(1474);var Za=a(891);var $a=a(1320);var er=a(1706);var tr=a(1670);var ar=a(1073);var rr=a(1401);var nr=a(810);var ir=a(94);var sr=a(851);var or=a(200);var lr=a(1193);var cr=a(1194);var ur=a(42);var dr=a(1473);var pr=a(1135);var mr=a(1419);function hr(e,t){var a=[];var r=[];var n=[];var i=true;Object(_["forEach"])(e,function(e){var s=e.channelId,o=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,m=e.messages,h=e.lastRead,v=e.initialLastRead,f=e.markedMsgCount,b=e.collapsed;var g=u.filter(function(e){var a=m[e];if(Object(ur["isHidden"])(a))return false;if(Object(ur["isJoinLeave"])(a)&&!Object(ur["isInviteForCurrentUser"])(a,t))return false;if(Object(ur["isTempMsg"])(a))return false;return true});var y=g.filter(function(e){return e>l&&e<=c});var k=g.filter(function(e){return e>c});var O=y.length&&!b;var C=!Object(pr["a"])(y[0]);var E=h>l&&Object(_["find"])(y,function(e){var a=m[e];return Object(ur["isMessageUnread"])(a,h,t)});a.push("header-"+s);n.push({key:"header-"+s,index:r.length});r.push({type:"header",channelId:s,channelType:o,end:c,initialLastRead:v,markedMsgCount:f,messageCount:y.length,messageCountAfterLatest:k.length,messageCountIsExact:p,collapsed:b});if(O&&!C){a.push("spacer-top-"+s);r.push({type:"spacer"})}if(O){var S=y.map(function(e){return m[e]});var w=Object(mr["a"])(S),I=w.rollups;y.forEach(function(e,t){var n=y[t-1];var i=e===E;var o=n&&Object(dr["a"])(n);var l=Object(dr["a"])(e);if(C&&o!==l){a.push("day-divider-"+s+"-"+l);r.push({type:"day-divider",dayTs:l,unread:i})}else if(i){a.push("unread-divider-"+s);r.push({type:"unread-divider"})}a.push("message-"+s+"-"+e);r.push({type:"message",channelId:s,ts:e,prevTs:n,isFirstMessage:0===t,rollup:I[e]})})}if(!p&&!b){var j=d||l;a.push("loading-"+s+"-"+j);r.push({type:"loading",channelId:s,oldest:j});i=false;return false}if(O)if(k.length){a.push("show-newer-"+s);r.push({type:"show-newer",channelId:s,count:k.length})}else{a.push("spacer-bottom-"+s);r.push({type:"spacer",isBottom:true})}return true});if(i){a.push("footer");r.push({type:"footer"})}return{keys:a,rows:r,stickyItems:n}}var vr=a(17);var fr=new y["b"]("all_unreads");var br=Object(vr["b"])("Build an aria-label for an All Unreads header row",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.messageCount,i=a.messageCountAfterLatest,s=a.markedMsgCount,o=a.messageCountIsExact,l=a.collapsed;var c=t();var u=Object(re["getDisplayNameForChannel"])(c,Object(D["e"])(c,r));var d=n>0;var p=i>0;var m=s>0;var h=void 0;h=d||!m||p?!d&&p||l?o?fr.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+n}):fr.t("New messages"):o?fr.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):fr.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):fr.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:s});return u+" ("+h+")"});br.meta={name:"makeHeaderLabel",key:"componentsUnreadsViewUtilityMakeHeaderLabelMakeHeaderLabel",description:"Build an aria-label for an All Unreads header row"};br.propTypes={channelId:Xt["b"].string.isRequired,messageCount:Xt["b"].number,messageCountAfterLatest:Xt["b"].number,markedMsgCount:Xt["b"].number,messageCountIsExact:Xt["b"].bool,collapsed:Xt["b"].bool};var gr=br;var _r=a(242);var yr=a(152);var kr=a(420);var Or=new y["b"]("all_unreads");var Cr={messageCount:Xt["b"].number,messageCountIsExact:Xt["b"].bool,selected:Xt["b"].bool.isRequired,markRead:Xt["b"].func.isRequired};var Er={messageCount:0,messageCountIsExact:true};var Sr=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getMessageCountText",value:function e(){var t=this.props,a=t.messageCountIsExact,r=t.messageCount;if(!r)return"";if(a)return Or.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:r});return Or.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:r})}},{key:"renderButton",value:function e(t){return n.a.createElement(U["d"],{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},t)}},{key:"renderContent",value:function e(){var t=this;var a=this.props.selected;if(a)return Or.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,function(e){var a=e.text,r=e.tag;if("button"===r)return t.renderButton(a);if("key"===r)return n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},a);return null});var r=Or.t("Mark as Read");return this.renderButton(r)}},{key:"render",value:function e(){var t=b()("p-unreads_view__header__kb_instructions_container");return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),n.a.createElement("span",{className:t},this.renderContent()))}}]);return t}(r["PureComponent"]);Sr.displayName="HeaderDefault";Sr.defaultProps=Er;var wr=Sr;var Ir=new y["b"]("all_unreads");var jr={channelId:Xt["b"].string.isRequired,channelType:Xt["b"].string.isRequired,latest:Xt["b"].string.isRequired,initialLastRead:Xt["b"].string.isRequired,collapsed:Xt["b"].bool.isRequired,messageCount:Xt["b"].number,messageCountIsExact:Xt["b"].bool,messageCountAfterLatest:Xt["b"].number,markedMsgCount:Xt["b"].number,totalUnreadCount:Xt["b"].number,markChannelLastRead:Xt["b"].func.isRequired,showNewerMessages:Xt["b"].func.isRequired,setPrimaryView:Xt["b"].func.isRequired,toggleCollapse:Xt["b"].func.isRequired,selected:Xt["b"].bool.isRequired,clogLinkClick:Xt["b"].func.isRequired};var Tr={messageCount:0,messageCountIsExact:true,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var Ar=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]);return a}d()(t,[{key:"markRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"undoMarkRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"showNew",value:function e(){this.props.showNewerMessages(this.props.channelId,true)}},{key:"openChannel",value:function e(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"toggleCollapse",value:function e(){this.props.toggleCollapse(this.props.channelId)}},{key:"renderUndo",value:function e(){var t=this.props.markedMsgCount;var a=void 0;t&&(a=Ir.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:t}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},a),n.a.createElement(Sa["a"],{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},Ir.t("Undo")))}},{key:"renderNewMsgs",value:function e(t){var a=this.props,r=a.messageCountAfterLatest,i=a.messageCountIsExact,s=a.messageCount;var o=void 0;o=i?Ir.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:r+s}):Ir.t("New messages");return n.a.createElement(Sa["a"],{onClick:t,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},o," ",n.a.createElement(B["b"],{inline:true,size:"inherit",type:"circle-fill"}))}},{key:"renderDefault",value:function e(){var t=Object(_["pick"])(this.props,["messageCount","messageCountIsExact","selected"]);return n.a.createElement(wr,G()({},t,{markRead:this.markRead}))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.markedMsgCount,i=t.messageCount,s=t.messageCountAfterLatest,o=t.collapsed;var l=i>0;var c=s>0;var u=r>0;var d={EXPANDED:0,COLLAPSED:1,UNDO:2,SHOW_NEW:3};var p=d.EXPANDED;l||!u||c?!l&&c?p=d.SHOW_NEW:o&&(p=d.COLLAPSED):p=d.UNDO;var m=b()("p-unreads_view__header",{"p-unreads_view__header--was_marked":p===d.UNDO||p===d.SHOW_NEW,"p-unreads_view__header--collapsed":p===d.COLLAPSED});var h=o?"caret-right":"caret-down";var v=p===d.EXPANDED||p===d.COLLAPSED;var f=p===d.EXPANDED;return n.a.createElement("div",{className:m},n.a.createElement(Sa["a"],{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},n.a.createElement(yr["a"],{channelId:a,className:"p-unreads_view__header__channel_name"})),v&&n.a.createElement(kr["a"],{icon:h,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":f}),p===d.UNDO&&this.renderUndo(),p===d.SHOW_NEW&&this.renderNewMsgs(this.showNew),p===d.COLLAPSED&&this.renderNewMsgs(this.toggleCollapse),p===d.EXPANDED&&this.renderDefault())}}]);return t}(r["Component"]);Ar.displayName="Header";Ar.defaultProps=Tr;var Nr={setPrimaryView:function e(){return _r["a"].apply(void 0,arguments)}};var Mr=Object(g["connect"])(null,Nr)(Ar);var Pr=a(62);var Rr=a(155);var xr=a(1041);var Dr=a(650);var Fr=a(552);var Lr=a(562);var Br=a(531);var Ur=a(563);var qr=a(603);var Wr=a(1671);var Hr=a(1042);var Gr=a(2013);var Vr=a(3554);function Kr(e){var t=e.msg;if(!Object(ur["isThreadBroadcast"])(t))return null;return n.a.createElement(Gr["a"],{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel})}Kr.displayName="BroadcastFooter";var zr=a(2078);var Qr={msg:Xt["b"].object.isRequired,className:Xt["b"].string,dispatchShowThreadIfThreadable:Xt["b"].func};var Yr={dispatchShowThreadIfThreadable:_["noop"],className:void 0};var Jr=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.dispatchShowThreadIfThreadable;var i=b()("c-message_kit__thread_replies",this.props.className);var s=a.channel;var o=a.thread_ts;var l=a.replies;var c=a.reply_count;var u=a.reply_users;var d=a.reply_users_count;var p=a.latest_reply;if(!s||!c)return null;return n.a.createElement(zr["a"],{channelId:s,threadTs:o,replies:l,replyCount:c,replyUsers:u,replyUsersCount:d,latestReply:p,showThreadIfThreadable:r,className:i})}}]);return t}(r["PureComponent"]);Jr.displayName="ThreadReplies";Jr.defaultProps=Yr;var Xr=function e(t){return{dispatchShowThreadIfThreadable:function e(){return t(qa["showThreadIfThreadable"].apply(void 0,arguments))}}};var Zr=Object(g["connect"])(null,Xr)(Jr);var $r=a(1305);var en=a(917);var tn=a(918);var an=a(1198);var rn=a(915);var nn=a(4801);var sn=a(3628);var on={msg:Xt["b"].object,children:Xt["b"].node,theme:Xt["b"].oneOf(["light","dense"])};var ln={msg:Xt["b"].object,children:null,theme:"light"};var cn=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.children,i=t.theme;if(!Object(ur["isThreadBroadcast"])(a))return r;var s=b()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===i});return n.a.createElement("div",{className:s},r,n.a.createElement(nn["a"],{ts:a.ts,threadTs:a.thread_ts,channelId:a.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]);return t}(r["PureComponent"]);cn.displayName="BroadcastPreamble";cn.defaultProps=ln;var un=Object(g["connect"])(function(e){return{theme:Object(Ua["a"])(e)}})(cn);var dn=a(1071);var pn=a(1307);var mn=a(1308);var hn=a(1309);var vn=new y["b"]("message_kit");var fn={msg:Xt["b"].object.isRequired,theme:Xt["b"].oneOf(["light","dense"]),adjacent:Xt["b"].bool,focused:Xt["b"].bool,renderActionsOffscreen:Xt["b"].bool,actionsPosition:Xt["b"].oneOf(["above","inside","default"]),onBackgroundClick:Xt["b"].func,rollup:Pr["a"].Rollup()};var bn={theme:"light",adjacent:false,focused:false,renderActionsOffscreen:false,actionsPosition:void 0,onBackgroundClick:_["noop"],rollup:null};var gn=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleBackgroundClick=a.handleBackgroundClick.bind(a);return a}d()(t,[{key:"getMessageBody",value:function e(t){var a=this.props,r=a.adjacent,i=a.rollup;return n.a.createElement(n.a.Fragment,null,!r&&n.a.createElement(un,{msg:t},n.a.createElement(Lr["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Br["a"],{msg:t,clickable:true},vn.t("Open in channel")),n.a.createElement("br",null)),n.a.createElement(Ur["a"],{msg:t,rollup:i}),n.a.createElement(qr["a"],{msg:t,blocksContainerContext:Rr["a"].all_unreads}),n.a.createElement(Fr["b"],{msg:t}),n.a.createElement(xr["a"],{msg:t}),n.a.createElement(Hr["a"],{msg:t}),n.a.createElement(Zr,{msg:t,className:"p-unreads_view__thread_replies"}),n.a.createElement(Kr,{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){var a=this.props,r=a.adjacent,i=a.rollup;return n.a.createElement(hn["a"],null,!r&&n.a.createElement(un,{msg:t},n.a.createElement(Lr["a"],{msg:t,className:"p-unreads_view_sender--compact"}),"\xa0"),n.a.createElement(Ur["a"],{msg:t,rollup:i}),n.a.createElement(Wr["a"],{msg:t,blocksContainerContext:Rr["a"].all_unreads}),n.a.createElement(Fr["b"],{msg:t}),n.a.createElement(xr["a"],{msg:t}),n.a.createElement(Hr["a"],{msg:t}),n.a.createElement(Zr,{msg:t,className:"p-unreads_view__thread_replies"}))}},{key:"getCompactGutter",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent;var s="light"===r;var o=b()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":s,"p-unreads_view_compact_timestamp--adjacent":i});return n.a.createElement("div",{className:o},n.a.createElement(Br["a"],{msg:a,meridiem:!(i&&s),clickable:true},vn.t("Open in channel")))}},{key:"handleBackgroundClick",value:function e(t){if(t.altKey){t.preventDefault();this.props.onBackgroundClick(this.props.msg)}}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent,s=t.focused,o=t.renderActionsOffscreen,l=t.actionsPosition;var c=b()("p-unreads-view__message","c-message_kit__message");var u="dense"===r;var d=u?this.getCompactGutter():null;var p=i?this.getCompactGutter():n.a.createElement(Dr["a"],{msg:a});var m=u?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement($r["a"],{msg:a},n.a.createElement(en["a"],{msg:a,className:c,onClick:this.handleBackgroundClick},n.a.createElement(tn["a"],{"data-qa":"unreads_view_message_hover",hovered:s},n.a.createElement(an["a"],{msg:a,showComment:true,showShare:true,messageContainerType:ga["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:l||(u||i?"above":"default"),renderOffscreen:o},n.a.createElement(dn["a"],{msg:a},n.a.createElement(pn["a"],{msg:a,className:"p-unreads-view__message_label"},n.a.createElement(rn["a"],{light:p,compact:d},n.a.createElement(mn["a"],{msg:a},m))))))))}}]);return t}(r["PureComponent"]);gn.displayName="Message";var _n=gn;gn.defaultProps=bn;var yn=new y["b"]("all_unreads");var kn=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}d()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.showNewerMessages;r(a)}},{key:"render",value:function e(){var t=this.props.count;var a=yn.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t});return n.a.createElement(Sa["a"],{className:"p-unreads_view__show_newer",onClick:this.onClick},a)}}]);return t}(r["PureComponent"]);kn.displayName="ShowNewerButton";var On=kn;var Cn={markAllRead:Xt["b"].func.isRequired};var En=new y["b"]("all_unreads");function Sn(e){var t=e.markAllRead;return n.a.createElement("div",{className:"p-unreads_view__footer"},n.a.createElement(U["d"],{onClick:t,type:"outline"},En.t("Mark All Messages Read")))}Sn.displayName="Footer";var wn=Sn;var In=new y["b"]("all_unreads");function jn(){return n.a.createElement("div",{className:"p-unreads_view__loading_more"},In.t("Loading more messages..."))}jn.displayName="LoadingMore";var Tn=jn;var An=new y["b"]("all_unreads");var Nn="UNREADS-VIEW";var Mn=Object($a["a"])(_n);var Pn={showNewerMessages:Xt["b"].func.isRequired,markChannelLastRead:Xt["b"].func.isRequired,markAllRead:Xt["b"].func.isRequired,removeFrames:Xt["b"].func.isRequired,totalUnreadCount:Xt["b"].number.isRequired,frames:Xt["b"].arrayOf(Xt["b"].shape({channelId:Xt["b"].string.isRequired,start:Xt["b"].string.isRequired,end:Xt["b"].string.isRequired,initialLastRead:Xt["b"].string.isRequired,markedMsgCount:Xt["b"].number.isRequired,channelType:Xt["b"].string.isRequired,collapsed:Xt["b"].bool.isRequired,lastRead:Xt["b"].string.isRequired,latest:Xt["b"].string.isRequired,timestamps:Xt["b"].arrayOf(Xt["b"].string).isRequired,reachedEnd:Xt["b"].bool.isRequired,messages:Xt["b"].object,isMember:Xt["b"].bool})).isRequired,logger:Xt["b"].object.isRequired,clogLinkClick:Xt["b"].func.isRequired,theme:Xt["b"].oneOf(["dense","light"]).isRequired,featureAriaApplicationMode:Xt["b"].bool.isRequired,allUnreadsSortOrder:Xt["b"].string.isRequired,focusRequestedThreadKey:Xt["b"].string,userAttentionIsOnChat:Xt["b"].bool.isRequired,featureOfflineMode:Xt["b"].bool.isRequired,isOffline:Xt["b"].bool.isRequired,fetchHistory:Xt["b"].func.isRequired,addMessagesFromHistory:Xt["b"].func.isRequired,setUnreadPoint:Xt["b"].func.isRequired,expandChannel:Xt["b"].func.isRequired,collapseChannel:Xt["b"].func.isRequired,makeMessageSummary:Xt["b"].func.isRequired,makeHeaderLabel:Xt["b"].func.isRequired,showThreadIfThreadable:Xt["b"].func.isRequired,setFocusRequestedThreadKey:Xt["b"].func.isRequired,removeFromSectionNavigation:Xt["b"].func,addToSectionNavigation:Xt["b"].func,setInitialActiveSection:Xt["b"].func};var Rn={focusRequestedThreadKey:void 0,removeFromSectionNavigation:_["noop"],addToSectionNavigation:_["noop"],setInitialActiveSection:_["noop"]};var xn=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","focus"]);a.layout=new Za["a"]({ANCHOR_OFFSET:72});a.list=n.a.createRef();a.rows=[];a.loading=false;a.state={keyToFocus:null,hasKeyboardFocus:false};return a}d()(t,[{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(lr["a"])(a)&&this.props.addToSectionNavigation();Object(cr["a"])(a)&&this.props.removeFromSectionNavigation();this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(false);var r=Object(_["map"])(this.props.frames.filter(function(e){return!e.isMember}),"channelId");var n=Object(_["map"])(this.props.frames.filter(function(e){return e.reachedEnd&&(Object(_["isEmpty"])(e.timestamps)||Object(_["last"])(e.timestamps)<=e.initialLastRead)}),"channelId");var i=[].concat(La()(r),La()(n));if(i.length){this.props.logger.info("removing frames (non-member, empty):",r,n);this.props.removeFrames(i)}this.maybeClearKeyToFocus()}},{key:"maybeClearKeyToFocus",value:function e(){var t=this.list.current;if(t){var a=t.getActiveItem();a&&this.state.keyToFocus===a&&this.setState(function(){return{keyToFocus:null}})}}},{key:"determineKeyToFocus",value:function e(t,a){var r=this.state.keyToFocus;var n=this.props.focusRequestedThreadKey;if(n){var i=Object(Ja["decodeThreadKey"])(n),s=i.channelId,o=i.threadTs;return"message-"+s+"-"+o}if(r)return r;var l=this.list.current&&this.list.current.getInitialActiveItem();var c=Object(_["startsWith"])(l,"show-newer-");if(c&&!Object(_["includes"])(a,l)){var u=t.indexOf(l);if(-1===u)return null;var d=t[u-1];var p=a.indexOf(d);var m=a[p+1];if(m)return m}return null}},{key:"showNewerMessages",value:function e(t,a){var r=Object(_["find"])(this.props.frames,{channelId:t});var n=a&&r.lastRead;a&&this.maybeAnchorToHeader(t);this.props.showNewerMessages(t,r.latest,n)}},{key:"markAllRead",value:function e(){var t={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(e){if(e.messageCountIsExact&&!e.messageCount)return;t[e.channelId]=e.end});this.props.markAllRead(t)}},{key:"getRowAndFrame",value:function e(t){var a=this.props,r=a.logger,n=a.frames;var i=this.keys.indexOf(t);var s=this.rows[i];if(!s||!s.channelId){r.warn("No valid row");return null}var o=s.channelId;var l=Object(_["find"])(n,{channelId:o});if(!l){r.warn("No frame for "+o);return null}return{row:s,frame:l}}},{key:"getActiveRow",value:function e(){var t=this.list.current&&this.list.current.getInitialActiveItem();if(!t)return null;return this.getRowAndFrame(t)}},{key:"getActiveRowForKeyboardMarking",value:function e(){var t=this.getActiveRow();if(t)return t;var a=this.defaultActiveItemForKeyboardMarking||this.keys[0];if(!a)return null;return this.getRowAndFrame(a)}},{key:"onMarkReadKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onMarkReadKeyCommand");var n=this.getActiveRowForKeyboardMarking()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=Object(_["filter"])(this.rows,{channelId:s.channelId,type:"message"}).length;if(!o){if(i.markedMsgCount){this.markChannelLastRead(s.channelId,s.initialLastRead);return}a.warn("No messages to mark or to undo");return}this.markChannelLastRead(s.channelId,s.end,o);var l=r.filter(function(e){return e.start<e.end}).length;if(1===l)return;var c=r[1+r.indexOf(s)];var u=c?"header-"+c.channelId:"header-"+s.channelId;this.setState(function(){return{keyToFocus:u}});this.defaultActiveItemForKeyboardMarking=u}},{key:"onMarkReadKeyCommandWithR",value:function e(){var t=this.props.logger;t.info("onMarkReadKeyCommandWithR");var a=this.getActiveRowForKeyboardMarking()||{},r=a.row,n=a.frame;if(!r||!n)return;if("header"!==r.type){t.info("Header not selected: "+r.type);return}this.onMarkReadKeyCommand()}},{key:"onLeftKeyCommand",value:function e(){var t=this.props.logger;t.info("onLeftKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&!n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}})}}},{key:"onRightKeyCommand",value:function e(){var t=this.props.logger;t.info("onRightKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}});return}if("message"===r.type){var i=r.ts,s=r.channelId;this.props.showThreadIfThreadable({channelId:s,threadTs:i,requestFocus:true});this.blur()}}},{key:"onPreviousChannelKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onPreviousChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=s;if("header"===i.type){o=r[r.indexOf(s)-1];if(!o){a.info("No previous frame");return}}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onNextChannelKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onNextChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=r[r.indexOf(s)+1];if(!o){a.info("No next frame");return}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"shouldIgnoreKeyEvent",value:function e(t){if(Object(Ea["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;if(t.target===document.body)return false;if(t.target&&"Punreads"===t.target.getAttribute("data-sidebar-link-id"))return false;return!this.state.hasKeyboardFocus}},{key:"shouldIgnoreFocusedKeyEvent",value:function e(t){if(Object(Ea["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(k["a"])())return this.props.userAttentionIsOnChat;return Object(Ca["f"])()}},{key:"maybeAnchorToHeader",value:function e(t){if(!this.list.current)return;var a="header-"+t;var r=this.list.current.getTop(a)-this.list.current.getScrollTop();if(r>0)return;this.layout.setAnchor(a,0)}},{key:"markChannelLastRead",value:function e(t,a,r){this.maybeAnchorToHeader(t);this.props.markChannelLastRead(t,a,r)}},{key:"clogClick",value:function e(t,a){this.props.clogLinkClick({event:t,metadata:a})}},{key:"toggleCollapse",value:function e(t){var a=Object(_["find"])(this.props.frames,{channelId:t});if(!a)return;var r={channel_id:t,channel_type:a.channelType};this.maybeAnchorToHeader(t);if(a.collapsed){this.props.expandChannel(t);this.props.showNewerMessages(t,a.latest);this.clogClick("UNREADS_EXPAND_GROUP",r)}else{this.props.collapseChannel(t);this.clogClick("UNREADS_COLLAPSE_GROUP",r)}}},{key:"handleMessageBackgroundClick",value:function e(t){var a=t.channel,r=t.ts;this.props.setUnreadPoint({channelId:a,unreadTs:r})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return["header","message","show-newer","footer"].includes(r.type)}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.rows[a];if(r&&"header"===r.type)return!r.collapsed;return}},{key:"scrollToTop",value:function e(){if(!this.list.current)return;this.list.current.scrollToOffset(0)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.list.current;t&&t.blur()}},{key:"onFocusEnter",value:function e(){var t=this;this.setState(function(){return{hasKeyboardFocus:true}},function(){var e=t.props.focusRequestedThreadKey;var a=t.list.current;if(!a||!e)return;var r=a.getActiveItem();"message-"+e===r&&t.props.setFocusRequestedThreadKey(null)})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;switch(a.type){case"message":var r=a.ts;return this.props.makeMessageSummary({channelId:a.channelId,ts:r,hasFocus:this.state.hasKeyboardFocus,day:{ts:r,isFirstDay:false,isLastDay:false},viewContext:ga["MESSAGE_CONTAINERS"].UNREAD_VIEW});case"header":return this.props.makeHeaderLabel({channelId:a.channelId,messageCount:a.messageCount,messageCountAfterLatest:a.messageCountAfterLatest,markedMsgCount:a.markedMsgCount,messageCountIsExact:a.messageCountIsExact,collapsed:a.collapsed});case"show-newer":return An.t("{count, plural, =1 {# new message} other {# new messages}}",{count:a.count});case"footer":return An.t("Mark All Messages Read");default:return null}}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus;var i=this.rows[t];var s=this.list.current&&this.list.current.getInitialActiveItem();switch(i.type){case"header":return n.a.createElement(Mr,{channelId:i.channelId,channelType:i.channelType,messageCount:i.messageCount,messageCountAfterLatest:i.messageCountAfterLatest,messageCountIsExact:i.messageCountIsExact,markedMsgCount:i.markedMsgCount,collapsed:i.collapsed,latest:i.end,initialLastRead:i.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(_["includes"])(s,i.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return n.a.createElement(Mn,{channelId:i.channelId,ts:i.ts,prevTs:i.prevTs,actionsPosition:i.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:r,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:i.rollup});case"loading":if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(rr["a"],null);return n.a.createElement(Tn,null);case"day-divider":var o=+i.dayTs;return n.a.createElement(n.a.Fragment,null,n.a.createElement(er["b"],{date:o}),n.a.createElement(er["a"],{date:o,isUnread:i.unread}));case"unread-divider":return n.a.createElement(tr["a"],null);case"show-newer":return n.a.createElement(On,{count:i.count,channelId:i.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return n.a.createElement("div",{className:b()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!i.isBottom})});case"footer":return n.a.createElement(wn,{markAllRead:this.markAllRead});default:this.props.logger.error("Unhandled row type:",i.type);return i.type}}},{key:"fetchPost",value:function e(){var t=this;var a=Object(_["last"])(this.rows);if(!a)return;if("loading"!==a.type)return;if(this.loading)return;this.loading=true;var r=a.channelId,n=a.oldest;this.props.logger.info("fetchPost",r,n);this.props.fetchHistory({channelId:r,oldest:n,reason:"unreads-view/fetchPost"}).then(function(e){var a=e.msgs,i=e.hasMore,s=e.deleted;t.props.addMessagesFromHistory({channelId:r,oldest:n,msgs:a,hasMore:i,deleted:s})}).finally(function(){t.loading=false})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.allUnreadsSortOrder,i=a.frames,s=a.currentUserId,o=a.featureOfflineMode,l=a.isOffline;var c=hr(i,s),u=c.keys,d=c.rows,p=c.stickyItems;var m=!Object(_["some"])(d,function(e){return"message"===e.type});if(o&&l&&m)return n.a.createElement(fa["a"],null);var h=this.keys;this.rows=d;this.keys=u;var v=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}];var f=void 0;f="alphabetical"===r?An.t("All Unreads, sorted alphabetically"):"priority"===r?An.t("All Unreads, sorted scientifically"):"newest"===r?An.t("All Unreads, sorted by newest channel"):An.t("All Unreads, sorted by oldest channel");var b=this.determineKeyToFocus(h,this.keys);var g=n.a.createElement(Ba["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(Xa["a"],{ref:t.list,layout:t.layout,width:a,height:r,keys:u,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchPost,loadPost:t.fetchPost,stickyItems:p,stickyZIndex:202,keyCommands:v,activeItem:b,isItemAriaExpanded:t.isItemAriaExpanded,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,useAriaApplicationMode:t.props.featureAriaApplicationMode,getAriaLabelForRow:t.getAriaLabelForRow,ariaLabel:f,onItemTabWithin:t.onItemTabWithin})});if(Object(k["a"])())return g;return n.a.createElement(ar["a"],{component:this,order:.2},g)}}]);return t}(ba["a"]);xn.displayName="UnreadsList";xn.propTypes=Pn;xn.defaultProps=Rn;function Dn(e,t){var a=Object(ne["a"])({label:Nn,state:e});var r=Object(Ua["a"])(e);var n=Object(ya["g"])(e);var s=t.frames.map(function(t){var a=Object(D["e"])(e,t.channelId);var r=Object(re["getLastReadTs"])(a);var i=Object(Zt["getTimestampsByChannelId"])(e,a.id);var s=Object(re["getLatestTs"])(a,i.timestamps);var o=Object(Zt["getTimestampsByChannelId"])(e,a.id,t.start);var l=o.timestamps;var c=o.end;var u=!!o.reachedEnd;var d=Object($t["b"])(e,a.id);var p=n.includes(t.channelId);var m=Object(re["isMemberOfChannel"])(a);return G()({},t,{lastRead:r,latest:s,timestamps:l,sliceEnd:c,reachedEnd:u,messages:d,collapsed:p,isMember:m})});return{logger:a,theme:r,frames:s,currentUserId:Object(i["getCurrentUserId"])(e),featureAriaApplicationMode:Object(i["isFeatureEnabled"])(e,"feature_aria_application_mode"),allUnreadsSortOrder:Object(la["a"])(e),focusRequestedThreadKey:ra(e),userAttentionIsOnChat:Object(Oa["e"])(e),featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(oa["c"])(e),composerVisible:(Object(or["a"])(e)||"composer_toolbar"===Object(ir["getGroupForUser"])(e,"composer_toolbar"))&&Object(sr["isComposerVisible"])(e)}}var Fn={fetchHistory:function e(){return Ga["b"].apply(void 0,arguments)},addMessagesFromHistory:function e(){return Ha["a"].apply(void 0,arguments)},setUnreadPoint:function e(){return _t["setUnreadPoint"].apply(void 0,arguments)},expandChannel:function e(){return Qa.apply(void 0,arguments)},collapseChannel:function e(){return Ya.apply(void 0,arguments)},makeMessageSummary:function e(){return Wa["a"].apply(void 0,arguments)},makeHeaderLabel:function e(){return gr.apply(void 0,arguments)},showThreadIfThreadable:function e(){return qa["showThreadIfThreadable"].apply(void 0,arguments)},setFocusRequestedThreadKey:function e(){return na["c"].apply(void 0,arguments)}};var Ln=Object(k["a"])()?Object(nr["a"])(xn,"UnreadsList",{index:0}):xn;var Bn=Object(g["connect"])(Dn,Fn,null,{withRef:true})(Ln);function Un(e){var t=e.channels,a=e.allUnreadsSortOrder,r=e.currentUserId;if("oldest"===a)return Gn(t,r);if("priority"===a)return Wn(t);if("newest"===a)return Hn(t);return qn(t)}function qn(e){var t=Jn(e),a=t.starred,r=t.notStarred;return zn(a).concat(zn(r))}function Wn(e){var t=Jn(e),a=t.starred,r=t.notStarred;return Vn(a).concat(Vn(r))}function Hn(e){return Object(_["reverse"])(Object(_["sortBy"])(e,"latest"))}function Gn(e,t){var a=Object(_["memoize"])(function(e){var a=e.lastRead,r=e.messages,n=e.oldestSliceTimestamps,i=e.createdTime;var s=false;var o=Object(_["find"])(n,function(e){if(e<=a)return false;var n=r[e];if(!n){s=true;return false}return Object(ur["isMessageUnread"])(n,a,t)});if(o&&!s)return o;if("0000000000.000000"===a)return i+".000000";return a});return Object(_["sortBy"])(e,a)}function Vn(e){var t=Xn(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=a.concat(r);return Kn(s).concat(Yn(n)).concat(Yn(i))}function Kn(e){var t=Zn(e),a=t.hasMentions,r=t.noMentions;return Yn(a).concat(Yn(r))}function zn(e){var t=Xn(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=Qn(a.concat(r));var o=Qn(n);var l=Qn(i);return s.concat(o).concat(l)}function Qn(e){return Object(_["clone"])(e).sort(function(e,t){return Object(y["r"])(e.displayName,t.displayName)})}function Yn(e){return Object(_["clone"])(e).sort(function(e,t){if(e.priority===t.priority)return Object(y["r"])(e.displayName,t.displayName);return t.priority-e.priority})}function Jn(e){var t=Object(_["groupBy"])(e,"isStarred");var a=t.true||[];var r=t.false||[];return{starred:a,notStarred:r}}function Xn(e){var t=Object(_["groupBy"])(e,"channelType");var a=t.channel||[];var r=t.private||[];var n=t.im||[];var i=t.mpim||[];return{publicChannels:a,privateChannels:r,ims:n,mpims:i}}function Zn(e){var t=Object(_["groupBy"])(e,function(e){return e.unreadHighlightCnt>0});var a=t.true||[];var r=t.false||[];return{hasMentions:a,noMentions:r}}var $n=Un;var ei={newUnreadMsgCount:Xt["b"].number.isRequired,setNewUnreadMsgCount:Xt["b"].func.isRequired,refreshAllUnreads:Xt["b"].func.isRequired};var ti=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["refreshFromKeyPress"]);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function e(t){t.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function e(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function e(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function e(){return null}}]);return t}(r["Component"]);ti.displayName="NewMessagesUpdater";function ai(e,t){var a=t.frames.map(function(e){return e.channelId});var r=Na(e),n=r.countsPerChannel;var i=Object(_["filter"])(n,function(e,t){return!a.includes(t)});var s=Object(_["sum"])(Object(_["map"])(i,"unreadCnt"));return{newUnreadMsgCount:s}}var ri=Object(g["connect"])(ai)(ti);var ni=a(3636);var ii=new y["b"]("all_unreads");var si="UNREADS-VIEW";var oi={channels:Xt["b"].arrayOf(Xt["b"].shape({id:Xt["b"].string.isRequired,lastRead:Xt["b"].string.isRequired,latest:Xt["b"].string.isRequired,displayName:Xt["b"].string.isRequired,channelType:Xt["b"].string.isRequired,isStarred:Xt["b"].bool.isRequired,priority:Xt["b"].number.isRequired,unreadHighlightCnt:Xt["b"].number.isRequired,messages:Xt["b"].object.isRequired,oldestSliceTimestamps:Xt["b"].arrayOf(Xt["b"].string).isRequired,createdTime:Xt["b"].number.isRequired})).isRequired,logger:Xt["b"].object.isRequired,clogger:Xt["b"].object,allUnreadsSortOrder:Xt["b"].string.isRequired,currentUserId:Xt["b"].string.isRequired,refreshId:Xt["b"].number.isRequired,totalUnreadCount:Xt["b"].number.isRequired,unreadChannelsAreKnown:Xt["b"].bool.isRequired,featureOfflineMode:Xt["b"].bool.isRequired,isOffline:Xt["b"].bool.isRequired,clientTheme:Xt["b"].oneOf(["light","dark"]),markLastRead:Xt["b"].func.isRequired,setNewUnreadMsgCount:Xt["b"].func.isRequired};var li={clogger:{track:_["noop"]},clientTheme:"light"};var ci=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]);a.state=a.computeInitialState();a.unreadsEventSeqId=0;a.initializedTime=Date.now();a.listRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{}});this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function e(t){(t.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||t.refreshId<this.props.refreshId||!t.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",t)}},{key:"componentWillUnmount",value:function e(){var t={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:t})}},{key:"incrementTrackingSeqId",value:function e(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,G()({is_unreads_view:1},r))}},{key:"computeInitialState",value:function e(){var t=this.props,a=t.channels,r=t.allUnreadsSortOrder,n=t.currentUserId;var i=$n({channels:a,allUnreadsSortOrder:r,currentUserId:n});var s=i.map(function(e){var t=e.id,a=e.lastRead,r=e.latest,n=e.channelType;return{channelId:t,start:a,end:r,initialLastRead:a,markedMsgCount:0,channelType:n||""}});return{frames:s,markedChannels:[],errored:false}}},{key:"showNewerMessages",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return G()({},e,{initialLastRead:r||e.initialLastRead,start:r||e.start,end:a})});return{frames:n}})}},{key:"markChannelLastRead",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+t+" to "+a);this.props.markLastRead({id:t,ts:a,immediate:true,reason:"unreads-view/markChannelLastRead"});this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return G()({},e,{start:a,markedMsgCount:r})});return{frames:n,markedChannels:[t]}})}},{key:"markAllRead",value:function e(t){this.props.logger.info("Marking all: "+JSON.stringify(t));this.props.markManyLastRead({markers:t,reason:"unreads-view/markAllRead"});var a={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:a});this.setState(function(e){var a=e.frames.map(function(e){return G()({},e,{start:e.end})});return G()({},e,{frames:a,markedChannels:Object(_["keys"])(t)})})}},{key:"undoMarkAllRead",value:function e(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}});this.setState(function(e,t){var a=e.frames.map(function(t){if(!e.markedChannels.includes(t.channelId))return t;return G()({},t,{start:t.initialLastRead})});var r={};a.forEach(function(t){if(!e.markedChannels.includes(t.channelId))return;if(t.initialLastRead>=t.end)return;r[t.channelId]=t.initialLastRead});t.logger.info("Undoing mark all: "+JSON.stringify(r));t.markManyLastRead({markers:r,reason:"unreads-view/undoMarkAllRead"});return G()({},e,{frames:a,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function e(){var t=this;this.props.logger.info("Refreshing");this.setState(function(){return t.computeInitialState()},function(){t.listRef&&t.listRef.current&&t.listRef.current.getWrappedInstance()&&t.listRef.current.getWrappedInstance().scrollToTop()});this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function e(t){this.setState(function(e){return G()({},e,{frames:e.frames.filter(function(e){return!t.includes(e.channelId)})})})}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__top_banners"},n.a.createElement(ca["a"],null),n.a.createElement(ua["a"],null,n.a.createElement(da["a"],null))),n.a.createElement(va["a"],null))}},{key:"render",value:function e(){if(!this.props.unreadChannelsAreKnown){var t=this.props,a=t.featureOfflineMode,i=t.isOffline;return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),a&&i?n.a.createElement(fa["a"],null):n.a.createElement(pa["a"],{clientTheme:this.props.clientTheme}))}var s=this.state,o=s.markedChannels,l=s.errored;if(l)return n.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),n.a.createElement(ma["a"],{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},ii.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",n.a.createElement("br",null),ii.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(ft["a"],{href:"https://slack.com/help/contact"},t)})));var c=n.a.createElement(ri,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads});var u=!this.state.frames.some(function(e){return e.start<e.end});var d=n.a.createElement(Da,{visible:u,showUndo:!Object(_["isEmpty"])(o),undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads});var p=n.a.createElement(ha["a"],{id:ga["MESSAGE_CONTAINERS"].UNREAD_VIEW},n.a.createElement("div",{className:"p-unreads_view"},n.a.createElement(Bn,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return n.a.createElement(r["Fragment"],null,this.renderTopBanners(),d,!u&&p,!u&&c)}}]);return t}(ba["a"]);ci.displayName="UnreadsView";ci.propTypes=oi;ci.defaultProps=li;var ui=ci;function di(e){var t=Object(ne["a"])({label:si,state:e});var a=Object(O["a"])({state:e});var r=Na(e),n=r.countsPerChannel,s=r.unreadChannelIds,o=r.unreadChannelsAreKnown;var l=Object(_["sum"])(Object(_["map"])(n,"unreadCnt"));var c=Object(sa["getClientTheme"])(e);var u=s.map(function(t){return Object(D["e"])(e,t)}).map(function(t){var a=Object(re["getLastReadTs"])(t);var r=Object(Zt["getTimestampsByChannelId"])(e,t.id);var i=Object(re["getLatestTs"])(t,r.timestamps);var s=Object(Zt["getTimestampsByChannelId"])(e,t.id,a);var o=Object($t["b"])(e,t.id)||{};return{id:t.id,lastRead:a,latest:i,displayName:Object(re["getDisplayNameForChannel"])(e,t,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),channelType:Object(re["getChannelType"])(t),isStarred:Object(re["isStarred"])(t)||false,priority:Object(re["getPriority"])(t)||0,unreadHighlightCnt:n[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:s&&s.timestamps||[],createdTime:Object(re["getChannelCreatedTime"])(t)}});return{logger:t,clogger:a,channels:u,clientTheme:c,allUnreadsSortOrder:Object(la["a"])(e),currentUserId:Object(i["getCurrentUserId"])(e),refreshId:aa(e),totalUnreadCount:l,unreadChannelsAreKnown:o,featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(oa["c"])(e)}}var pi={markLastRead:function e(){return ia["b"].apply(void 0,arguments)},markManyLastRead:function e(){return ia["c"].apply(void 0,arguments)},setNewUnreadMsgCount:function e(){return na["d"].apply(void 0,arguments)}};var mi=Object(g["connect"])(di,pi)(ci);var hi=mi;var vi=a(129);var fi=a(69);var bi=a(116);var gi=new y["b"]("all_unreads");var _i={newUnreadMsgCount:Xt["b"].number,incrementRefreshId:Xt["b"].func};var yi={newUnreadMsgCount:0,incrementRefreshId:_["noop"]};var ki=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.refreshMessages=a.refreshMessages.bind(a);return a}d()(t,[{key:"refreshMessages",value:function e(){this.props.incrementRefreshId()}},{key:"render",value:function e(){var t=this.props.newUnreadMsgCount;if(t<1)return null;var a=gi.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:t});return n.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},n.a.createElement(U["d"],{type:"outline",onClick:this.refreshMessages},n.a.createElement(B["b"],{inline:true,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),a))}}]);return t}(r["Component"]);ki.displayName="RefreshUnreadMessagesButton";ki.defaultProps=yi;var Oi=function e(t){return{newUnreadMsgCount:ta(t)}};var Ci={incrementRefreshId:function e(){return na["a"].apply(void 0,arguments)}};var Ei=Object(g["connect"])(Oi,Ci)(ki);var Si=a(2023);var wi=a(3638);var Ii=new y["b"]("all_unreads");var ji={className:Xt["b"].string,allUnreadsSortOrder:Xt["b"].string.isRequired,teamIsPaid:Xt["b"].bool.isRequired,setUserPrefByApi:Xt["b"].func.isRequired};var Ti={className:void 0};var Ai=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}d()(t,[{key:"onSortSelected",value:function e(t){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props.teamIsPaid;var i=function e(t,i){if(!r&&"priority"===t)return null;return n.a.createElement(fi["b"],{key:t,label:i,onSelected:function e(){return a.onSortSelected(t)}})};var s=[{value:"alphabetical",label:Ii.t("Alphabetically")},{value:"priority",label:Ii.t("Scientifically")},{value:"newest",label:Ii.t("Newest")},{value:"oldest",label:Ii.t("Oldest")}];var o=Ii.t("Sort...");return n.a.createElement(fi["f"],t,n.a.createElement(fi["c"],{label:o}),s.map(function(e){var t=e.value,a=e.label;return i(t,a)}))}},{key:"renderSortingMenuTrigger",value:function e(){var t=this.props.allUnreadsSortOrder;var a="";a="alphabetical"===t?Ii.t("Sorted alphabetically"):"priority"===t?Ii.t("Sorted scientifically"):"newest"===t?Ii.t("Sorted by newest channel"):Ii.t("Sorted by oldest channel");return n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},n.a.createElement(fi["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(bi["a"],null,n.a.createElement("span",null,a),n.a.createElement(B["b"],{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function e(){var t=this.props.className;var a=b()("p-classic_nav__channel_header__title","p-classic_nav__no_drag");var r=b()(t,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(k["a"])()});return n.a.createElement("div",{className:r},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:a},Ii.t("All Unreads")),this.renderSortingMenuTrigger()),n.a.createElement(Si["a"],{flex:true,regionId:"main"}),n.a.createElement(Ei,null))}}]);return t}(r["Component"]);Ai.displayName="AllUnreadsHeader";Ai.defaultProps=Ti;var Ni=function e(t){return{allUnreadsSortOrder:Object(la["a"])(t),teamIsPaid:Object(Pe["isPaidTeam"])(Object(ge["d"])(t))}};var Mi={setUserPrefByApi:function e(){return vi["d"].apply(void 0,arguments)}};var Pi=Object(g["connect"])(Ni,Mi)(Ai);var Ri=a(4789);var xi=a(811);var Di=new y["b"]("drafts");var Fi={className:Xt["b"].string,featureComposeFlow:Xt["b"].bool,numDrafts:Xt["b"].number};var Li={className:void 0,featureComposeFlow:false,numDrafts:0};function Bi(e){var t=e.className,a=e.featureComposeFlow,r=e.numDrafts;if(!a)return null;return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},Di.t("Drafts"))),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},Di.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:r})))}Bi.displayName="DraftsHeader";Bi.defaultProps=Li;function Ui(e){return{featureComposeFlow:Object(Ri["d"])(e),numDrafts:Object(xi["f"])(e)}}var qi=Object(g["connect"])(Ui)(Bi);var Wi=a(41);var Hi=a(750);var Gi=a(1169);var Vi=a(905);var Ki=a(1053);var zi=a(845);var Qi=a(846);var Yi=a(906);var Ji=a(367);var Xi=new y["b"]("generic_dialog");var Zi={title:Xt["b"].string,children:Xt["b"].node,submitButtonType:Xt["b"].oneOf(["primary","danger"]),submitButtonText:Xt["b"].string,cancelButtonText:Xt["b"].string,showCancelButton:Xt["b"].bool,onSubmit:Xt["b"].func,onCancel:Xt["b"].func,onClose:Xt["b"].func,"aria-describedby":Xt["b"].string,role:Xt["b"].oneOf(["dialog","alertdialog"]),"data-qa":Xt["b"].string};var $i={title:"",children:null,submitButtonType:"primary",submitButtonText:null,showCancelButton:true,cancelButtonText:null,onSubmit:_["noop"],onCancel:_["noop"],onClose:_["noop"],"aria-describedby":null,role:"alertdialog","data-qa":"dialog"};var es=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t["aria-describedby"],r=t.role,i=t["data-qa"],s=t.title,o=t.children,l=t.submitButtonType,c=t.submitButtonText,u=t.cancelButtonText,d=t.showCancelButton,p=t.onCancel,m=t.onClose,h=t.onSubmit;return n.a.createElement(Hi["a"],{labelledby:"base_dialog_title",describedby:a,closeModal:m,role:r},n.a.createElement(Gi["a"],null,n.a.createElement(Vi["a"],{title:s,id:"base_dialog_title","data-qa":i+"_header"})),n.a.createElement(Ki["a"],null,n.a.createElement(zi["a"],{"data-qa":i+"_body"},o)),n.a.createElement(Qi["a"],{"data-qa":i+"_footer"},n.a.createElement(Yi["a"],null,d&&n.a.createElement(Ji["c"],{type:"outline",onClick:p,"data-qa":i+"_cancel"},u),n.a.createElement(Ji["c"],{type:l,onClick:h,"data-qa":i+"_go"},c||Xi.t("Confirm")))))}}]);return t}(r["PureComponent"]);es.displayName="BaseDialog";es.defaultProps=$i;var ts=es;var as=a(1472);var rs=a(3640);var ns=new y["b"]("welcome_place");var is=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.isDismissClicked=false;e.clickDismiss=function(){e.isDismissClicked=true;e.props.dismissWelcomePlace();e.props.closeModal();e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:w["k"].BUTTON}},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};e.hideModal=function(){e.props.closeModal();e.isDismissClicked||e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:w["w"].CLICK,ui_element:w["z"].WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};return e}d()(t,[{key:"getWelcomeSessionId",value:function e(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}},{key:"render",value:function e(){var t=this.props.featureJiraNewxp2372;return n.a.createElement(ts,{title:ns.t("Remove the Get Started page?"),submitButtonText:ns.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:ns.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},n.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},t?ns.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},function(e){var t=e.tag,a=e.text;if("a1"===t)return n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/"+Object(y["s"])()},a);if("a2"===t)return n.a.createElement("a",{href:"mailto:feedback@slack.com"},a);return null}):ns.t('If you\'re all set, you can remove this page permanently. If you need help later, head to our <a href="https://get.slack.help/hc/{locale}">Help Center</a>, or reach out to us at <a href="feedback@slack.com">feedback@slack.com.</a>',{locale:Object(y["s"])(),note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."})))}}]);return t}(r["Component"]);is.displayName="DismissWelcomePlaceDialog";function ss(e){return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),clogger:Object(O["a"])({state:e}),pageViewingSessionId:Object(C["j"])(e),isOnWelcomePlacePage:Object(as["a"])(e)}}var os={closeModal:Wi["closeModal"],dismissWelcomePlace:E["b"]};var ls=Object(g["connect"])(ss,os)(is);var cs=a(3642);var us=new y["b"]("welcome_place");var ds=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureNewxp3100V1,r=t.className;var i=us.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."});var s=a?us.t("A few essential steps to help you get going with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."}):us.t("A few key things for you to know and do, to get up and running with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."});return n.a.createElement("div",{className:b()(r,"welcome-place-page-header")},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},i),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},s))}}]);return t}(r["Component"]);ds.displayName="WelcomePlacePageHeader";function ps(e){return{featureNewxp3100V1:Object(i["isFeatureEnabled"])(e,"feature_newxp3100_v1")}}var ms=Object(g["connect"])(ps)(ds);var hs=a(1082);var vs=a(4798);var fs=a(48);var bs=a.n(fs);var gs=a(2024);var _s=a(4780);var ys=a(4785);var ks=a(1959);var Os=a(1311);var Cs=Object(vr["b"])("Navigate to the drafts view or last known channel",function(e,t){var a=t();var r=Object(xi["f"])(a);if(r>0){e(Object(_r["a"])({id:"Pdrafts"}));return}var n=Object(Os["a"])(a);e(Object(_r["a"])({id:n}))});Cs.meta={name:"navigateToFallback",key:"componentsComposerPageUtilityNavigateToFallbackNavigateToFallback",description:"Navigate to the drafts view or last known channel"};Cs.propTypes=null;var Es=Cs;var Ss=a(4718);var ws=a(1707);var Is=new y["b"]("composer");var js={completeOnCommands:false,position:"bottom"};var Ts={dispatch:Xt["b"].func,draft:Xt["b"].object.isRequired,enableComposerButton:Xt["b"].bool,featureComposeFlow:Xt["b"].bool,isFocused:Xt["b"].bool,onChange:Xt["b"].func,onFocus:Xt["b"].func};var As={dispatch:_["noop"],enableComposerButton:false,featureComposeFlow:false,isFocused:false,onChange:_["noop"],onFocus:_["noop"]};function Ns(e){var t=e.dispatch,a=e.draft,i=e.enableComposerButton,s=e.featureComposeFlow,o=e.isFocused,l=e.onChange,c=e.onFocus;var u=Object(r["useRef"])();if(!s)return null;var d=function e(){return u.current.getWrappedInstance?u.current.getWrappedInstance():u.current};var p=function e(){var r=d().getContents().contents;t(Object(Ss["a"])({draft:G()({},a,{ops:r})}))};return n.a.createElement(ws["c"],{autocompleteProps:js,className:"p-cp_composer__message_input",composerDraft:a,enableComposerButton:i,enableEmojiButton:true,enableFileButton:false,enableMentionButton:true,enableSendButton:true,enableSnippetCreation:false,focusOnMount:o,isComposerPage:true,maxLength:ga["MAX_MESSAGE_INPUT_LENGTH"],onDraftUpdate:l,onFocus:c,placeholder:Is.t("Write something beautiful\u2026"),ref:u,sendMessage:p,useSendButton:true})}Ns.displayName="ComposerInput";Ns.defaultProps=As;var Ms=function e(t){return{enableComposerButton:Object(or["a"])(t),featureComposeFlow:Object(Ri["d"])(t)}};var Ps=Object(g["connect"])(Ms)(Ns);var Rs=a(68);var xs=a(3400);var Ds=a(364);var Fs=a(131);var Ls=a(151);var Bs=Object(vr["b"])("Split destination ids into channels and members",function(e,t,a){var r=a.ids;var n=t();var s=Object(i["getCurrentUserId"])(n);var o=[];var l=[];Object(_["forEach"])(r,function(e){if(Object(Fs["a"])(e)){var t=Object(D["e"])(n,e);if(Object(re["isMpim"])(t)){var a=Object(re["getMemberIdsFromMpim"])(t);var r=Object(_["without"])(a,s);l.push.apply(l,La()(r))}else o.push(e)}else if(Object(Ls["a"])(e))l.push(e);else{var i=Object(ne["a"])({state:n});i.warn("COMPOSER",'Unhandled selected id "'+e+'"')}});return Promise.resolve({channelIds:o,memberIds:l})});Bs.meta={name:"categorizeDestinationIds",key:"componentsComposerPageUtilityCategorizeDestinationIdsCategorizeDestinationIds",description:"Split destination ids into channels and members"};Bs.propTypes={ids:Xt["b"].arrayOf(Xt["b"].string.isRequired)};var Us=Bs;var qs=a(908);var Ws=a(4815);var Hs=a(1061);var Gs={id:Xt["b"].string.isRequired,model:Xt["b"].object.isRequired};function Vs(e){var t=e.id,a=e.model;if(Object(Fs["a"])(t)){if(Object(re["isMpim"])(a))return n.a.createElement(Ws["a"],{id:t});return n.a.createElement(Hs["a"],{channelId:t})}if(Object(Ls["a"])(t))return n.a.createElement(qs["a"],{id:t});return null}function Ks(e,t){var a=t.id;var r=void 0;Object(Fs["a"])(a)?r=Object(D["e"])(e,a):Object(Ls["a"])(a)&&(r=Object(gt["e"])(e,a));return{model:r}}var zs=Object(g["connect"])(Ks)(Vs);var Qs=new y["b"]("composer");var Ys={dispatch:Xt["b"].func,draft:Xt["b"].object.isRequired,errors:Xt["b"].object,featureComposeFlow:Xt["b"].bool,onChange:Xt["b"].func};var Js={dispatch:_["noop"],errors:{},featureComposeFlow:false,onChange:_["noop"]};function Xs(e){var t=e.dispatch,a=e.draft,r=e.errors,i=e.featureComposeFlow,s=e.onChange;if(!i)return null;var o=void 0;Object(_["isEmpty"])(a.memberIds)?Object(_["isEmpty"])(a.channelIds)||(o=a.channelIds):o=a.memberIds;var l=void 0;var c=void 0;r.invalidChannelCount?c=Qs.t("Too many channels"):r.invalidChannel?c=Qs.t("Can\u2018t send to channel"):r.invalidMembers?c=Qs.t("Too many members"):Object(_["isEmpty"])(a.memberIds)||(a.memberIds.length===ga["MAX_OTHER_MPDM_MEMBERS"]?l=Qs.t("You can\u2018t select any more members"):a.memberIds.length>5&&(l=Qs.t("You can select up to {max} more people",{max:ga["MAX_OTHER_MPDM_MEMBERS"]-a.memberIds.length})));var u=Object(_["isEmpty"])(a.memberIds);var d=Object(_["isEmpty"])(a.channelIds);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ds["d"],{className:"p-cp_composer__destination_select",classPrefix:"p-cp_composer__destination",focusOnMount:true,isInvalid:!Object(_["isEmpty"])(r),onSelectedItemsChange:function e(a){var r=Object(_["map"])(a,"value");t(Us({ids:r})).then(s)},prefix:Qs.t("To:"),renderOption:function e(t,a){return n.a.createElement(zs,{id:t.value,isActive:a.isActive})},searcherOptions:{allowEmptyQuery:true,entities:{channels:u&&{includePublic:true,includePrivate:true,includeMpims:d,includeArchived:true,onlyVisibleMpims:true},members:d,userGroups:false}},selectId:"cp_composer__destination",selectedOptions:Object(_["map"])(o,function(e){return{label:e,value:e}}),width:"100%"}),(c||l)&&n.a.createElement("div",{className:b()("p-cp_composer__destination_subtext",{"p-cp_composer__destination_subtext--error":!!c})},c||l))}Xs.displayName="ComposerDestinationSelect";Xs.defaultProps=Js;function Zs(e){return{featureComposeFlow:Object(Ri["d"])(e)}}var $s=Object(g["connect"])(Zs)(Xs);var eo=a(95);var to=a(16);var ao=a(315);var ro={featureComposeFlow:Xt["b"].bool,names:Xt["b"].arrayOf(Xt["b"].string.isRequired)};var no={featureComposeFlow:false,names:void 0};function io(e){var t=e.featureComposeFlow,a=e.names;if(!t)return null;var r=Object(_["map"])(a,function(e){return e||n.a.createElement(ao["b"],{size:ao["a"].SMALL})});return n.a.createElement("span",{className:"p-cp_composer__destination_recipients"},Object(y["i"])(r,{noConj:true,react:true}))}io.displayName="ComposerDestinationRecipients";io.defaultProps=no;function so(e,t){var a=t.draft;var r=void 0;a&&(Object(_["isEmpty"])(a.memberIds)?Object(_["isEmpty"])(a.channelIds)||(r=a.channelIds.map(function(t){var a=Object(D["e"])(e,t);return Object(re["getDisplayNameForChannel"])(e,a)})):r=a.memberIds.map(function(t){return Object(to["getPrefCompliantMemberNameById"])(e,t)}));return{featureComposeFlow:Object(Ri["d"])(e),names:r}}var oo=Object(g["connect"])(so)(io);oo.propTypes={draft:Xt["b"].object.isRequired};var lo=oo;var co=new y["b"]("composer");var uo={draft:Xt["b"].object.isRequired,featureComposeFlow:Xt["b"].bool,hasUnjoinedChannels:Xt["b"].bool,isInvalid:Xt["b"].bool,onFocus:Xt["b"].func};var po={featureComposeFlow:false,hasUnjoinedChannels:false,isInvalid:false,onFocus:_["noop"]};function mo(e){var t=e.draft,a=e.featureComposeFlow,r=e.hasUnjoinedChannels,i=e.isInvalid,s=e.onFocus;if(!a)return null;return n.a.createElement("div",{className:b()("p-cp_composer__destination_text",{"p-cp_composer__destination_text--invalid":i})},n.a.createElement(bi["a"],{className:"p-cp_composer__destination_recipients_wrapper",onClick:function e(){return s()}},n.a.createElement("span",{className:"margin_right_25"},co.t("To:")),Object(Ri["a"])(t)?n.a.createElement(lo,{draft:t}):co.t("Search for a channel or person")),r&&1===t.channelIds.length&&n.a.createElement(eo["a"],{className:"p-cp_composer__destination_alert",level:"warning",type:"inline"},co.t("You will join this channel when you share the message into it.")))}mo.displayName="ComposerDestinationText";mo.defaultProps=po;function ho(e,t){var a=t.draft;var r=void 0;a&&!Object(_["isEmpty"])(a.channelIds)&&(r=a.channelIds.some(function(t){var a=Object(D["e"])(e,t);return!Object(re["isMemberOfChannel"])(a)}));return{hasUnjoinedChannels:r}}var vo=Object(g["connect"])(ho)(mo);var fo={dispatch:Xt["b"].func,draft:Xt["b"].object.isRequired,errors:Xt["b"].object,featureComposeFlow:Xt["b"].bool,isFocused:Xt["b"].bool,onChange:Xt["b"].func,onFocus:Xt["b"].func};var bo={dispatch:_["noop"],errors:{},featureComposeFlow:false,isFocused:false,onChange:_["noop"],onFocus:_["noop"]};function go(e){var t=e.dispatch,a=e.draft,r=e.errors,i=e.featureComposeFlow,s=e.isFocused,o=e.onChange,l=e.onFocus;return n.a.createElement("div",{className:"p-cp_composer__destination"},s?n.a.createElement($s,{draft:a,errors:r,onChange:o}):n.a.createElement(vo,{draft:a,featureComposeFlow:i,isInvalid:!Object(_["isEmpty"])(r),onFocus:l}),n.a.createElement("div",{className:"p-cp_composer__destination_controls"},n.a.createElement(kr["a"],{icon:"trash",onClick:function e(){return t(Object(xs["b"])({draftId:a.id}))}})))}go.displayName="ComposerDestination";go.defaultProps=bo;function _o(e,t){var a=t.draft;var r=Object(Ri["h"])(e,a,{canPostInChannel:Rs["s"]});return{errors:Object(_["pick"])(r.reasons,["invalidChannel","invalidChannelCount","invalidMembers"])}}var yo=Object(g["connect"])(_o)(go);var ko=a(3401);var Oo={draft:Xt["b"].object.isRequired,featureComposeFlowFiles:Xt["b"].bool};var Co={featureComposeFlowFiles:false};function Eo(e){var t=e.draft,a=e.featureComposeFlowFiles;if(!a)return null;return n.a.createElement("div",null,n.a.createElement(ko["a"],{channelId:t.id}))}Eo.displayName="ComposerFiles";Eo.defaultProps=Co;var So=function e(t){return{featureComposeFlowFiles:Object(Ri["e"])(t)}};var wo=Object(g["connect"])(So)(Eo);var Io=a(4723);var jo=new y["b"]("composer");var To={dispatch:Xt["b"].func,draft:Xt["b"].object,featureComposeFlow:Xt["b"].bool};var Ao={dispatch:_["noop"],draft:{},featureComposeFlow:false};function No(e){var t=e.dispatch,a=e.draft,i=e.featureComposeFlow;var s=Object(r["useState"])(Object(Ri["a"])(a)?"body":"to"),o=bs()(s,2),l=o[0],c=o[1];var u=Object(ys["a"])(false,1500),d=bs()(u,2),p=d[0],m=d[1];var h=Object(ys["a"])(false,3e3),v=bs()(h,2),f=v[0],b=v[1];var g=Object(ks["a"])();if(!i)return null;if(Object(_["isEmpty"])(a)){t(Es());return null}function y(e){g.info("COMPOSER","Saving draft (id:"+a.id+")");t(Object(gs["d"])(e));m(true);b(true)}var k=void 0;p?k=jo.t("Saving message\u2026"):f&&(k=jo.t("Saved to drafts"));return n.a.createElement("div",{className:"p-composer_page"},n.a.createElement("div",{className:"p-cp_composer"},n.a.createElement("div",{className:"p-cp_composer__header"},n.a.createElement(yo,{draft:a,featureComposeFlow:i,isFocused:"to"===l,onChange:function e(t){var r=t.channelIds,n=t.memberIds;return y(G()({},a,{channelIds:r,memberIds:n}))},onFocus:function e(){return c("to")}})),n.a.createElement("div",{className:"p-cp_composer__body"},n.a.createElement(Ps,{draft:a,isFocused:"body"===l,onChange:function e(t){var r=t.ops;return y(G()({},a,{ops:r}))},onFocus:function e(){return c("body")}})),n.a.createElement(wo,{draft:a}),n.a.createElement("div",{className:"p-cp_composer__footer"},k)))}No.displayName="ComposerPage";No.defaultProps=Ao;var Mo=function e(t){var a=Object(_s["a"])(t);return{draft:Object(xi["d"])(t,a),featureComposeFlow:Object(Ri["d"])(t)}};var Po=Object(g["connect"])(Mo)(No);var Ro=a(4500);var xo=a(4751);var Do=a(1838);var Fo=Object(vr["b"])("Navigate to the last known channel",function(e,t){var a=t();var r=Object(Os["a"])(a);e(Object(_r["a"])({id:r}))});Fo.meta={name:"navigateToFallback",key:"componentsDraftsPageUtilityNavigateToFallbackNavigateToFallback",description:"Navigate to the last known channel"};Fo.propTypes=null;var Lo=Fo;var Bo=a(209);var Uo=a(1172);var qo=a(118);var Wo=new y["b"]("drafts");var Ho={currentUserId:Xt["b"].string,do24hrTime:Xt["b"].bool,draft:Xt["b"].object.isRequired,featureComposeFlow:Xt["b"].bool,isAttached:Xt["b"].bool,teamId:Xt["b"].string};var Go={currentUserId:void 0,do24hrTime:false,featureComposeFlow:false,isAttached:false,teamId:void 0};function Vo(e){var t=e.currentUserId,a=e.do24hrTime,r=e.draft,i=e.featureComposeFlow,s=e.isAttached,o=e.teamId;if(!i)return null;return n.a.createElement("div",{className:"p-drafts_page__draft"},n.a.createElement("div",{className:"p-drafts_page__draft_header"},Object(Ri["a"])(r)?n.a.createElement("span",{className:"p-drafts_page__draft_recipients_wrapper"},n.a.createElement("span",{className:"margin_right_25"},Wo.t("To:")),n.a.createElement(lo,{draft:r})):Wo.t("No destination"),n.a.createElement("div",{className:"p-drafts_page__draft_meta"},r.lastEditedTs&&n.a.createElement("span",{className:"p-drafts_page__draft_timestamp"},Object(Bo["a"])(r.lastEditedTs/1e3,{do24hrTime:a})),n.a.createElement("div",{className:"p-drafts_page__draft_badge"},Wo.t("Draft")),s&&n.a.createElement("div",{className:"p-drafts_page__draft_badge"},n.a.createElement(B["b"],{size:"inherit",type:"pencil"})))),Object(Ri["b"])(r)&&n.a.createElement(qo["a"],{className:"p-drafts_page__draft_body",doSlackActionLinks:true,memberId:t,sourceTeamId:o,text:Object(Uo["a"])({contents:r.ops})}))}Vo.displayName="DraftItem";Vo.defaultProps=Go;function Ko(e){return{currentUserId:Object(i["getCurrentUserId"])(e),do24hrTime:Object(ya["h"])(e,"time24"),featureComposeFlow:Object(Ri["d"])(e),teamId:Object(ae["b"])(e)}}var zo=Object(g["connect"])(Ko)(Vo);var Qo=a(4830);var Yo={channelDrafts:Xt["b"].object,composerDrafts:Xt["b"].object,dispatch:Xt["b"].func};var Jo={channelDrafts:void 0,composerDrafts:void 0,dispatch:_["noop"]};function Xo(e){var t=e.channelDrafts,a=e.composerDrafts,i=e.dispatch;var s=Object(r["useMemo"])(function(){var e=[];Object(_["forEach"])(t,function(t,a){var r=Object(Ro["a"])(a),n=r.channelId,s=r.threadTs;e.push({draft:{channelIds:[n],id:n,lastEditedTs:t.lastEditedTs,ops:t.ops},isAttached:true,key:n,lastEditedTs:t.lastEditedTs,onClick:function e(){i(s?Object(Do["a"])({channelId:n,threadTs:s}):Object(_r["a"])({id:n}))}})});Object(_["forEach"])(a,function(t){e.push({draft:{channelIds:t.channelIds,id:t.id,lastEditedTs:t.lastEditedTs,memberIds:t.memberIds,ops:t.ops},isAttached:false,key:t.id,lastEditedTs:t.lastEditedTs,onClick:function e(){return i(Object(xo["a"])({draftId:t.id}))}})});return Object(Ri["i"])(e)},[t,a,i]);if(Object(_["isEmpty"])(s)){i(Lo());return null}return n.a.createElement("div",{className:"p-drafts_page"},Object(_["map"])(s,function(e){var t=e.draft,a=e.isAttached,r=e.key,i=e.onClick;return n.a.createElement(bi["a"],{key:r,className:"margin_bottom_100",onClick:i},n.a.createElement(zo,{draft:t,isAttached:a}))}))}Xo.displayName="DraftsPage";Xo.defaultProps=Jo;function Zo(e){return{channelDrafts:Object(xi["c"])(e),composerDrafts:Object(xi["e"])(e),featureComposeFlow:Object(Ri["d"])(e)}}var $o=Object(g["connect"])(Zo)(Xo);var el=a(540);var tl=a(1187);var al=a(58);var rl=a(231);var nl=a(834);var il=a(4800);var sl=a(1434);var ol=a(760);var ll=a(1333);var cl=a(1057);var ul={item:Xt["b"].object.isRequired,message:Xt["b"].object,includeActions:Xt["b"].bool.isRequired,visible:Xt["b"].bool.isRequired,isArchived:Xt["b"].bool.isRequired,isRead:Xt["b"].bool.isRequired,isInMutedChannel:Xt["b"].bool,archiveItem:Xt["b"].func.isRequired,unarchiveItem:Xt["b"].func.isRequired,markItemAsRead:Xt["b"].func.isRequired,markItemAsUnread:Xt["b"].func.isRequired};var dl={message:void 0,isInMutedChannel:false};var pl=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["onClickItem","onClickArchive","onClickMarkAsRead"]);a.state={focused:false};return a}d()(t,[{key:"onClickItem",value:function e(){var t=this.props,a=t.item,r=t.isRead,n=t.message;r||this.props.markItemAsRead(a);if(n){var i=!this.state.focused;this.setState(function(){return{focused:i}})}}},{key:"onClickArchive",value:function e(t){var a=this.props,r=a.item,n=a.isArchived;t.preventDefault();t.stopPropagation();n?this.props.unarchiveItem({id:"reminder"===r.type?r.reminderId:r.id,type:r.type}):this.props.archiveItem({id:"reminder"===r.type?r.reminderId:r.id,type:r.type})}},{key:"onClickMarkAsRead",value:function e(t){var a=this.props,r=a.item,n=a.isRead;t.preventDefault();t.stopPropagation();n?this.props.markItemAsUnread(r):this.props.markItemAsRead(r)}},{key:"renderSharedActions",value:function e(){var t=this.props,a=t.isArchived,i=t.isRead;return n.a.createElement(r["Fragment"],null,n.a.createElement(cl["c"],{tip:i?"Mark unread":"Mark as read",delay:0},n.a.createElement(ll["a"],{icon:"emoji-objects",className:"p-inbox__item_actions--mark-as-read",onClick:this.onClickMarkAsRead})),n.a.createElement(cl["c"],{tip:a?"Unarchive":"Archive",delay:0},n.a.createElement(ll["a"],{icon:"circle-checkbox-checked-o",className:"p-inbox__item_actions--archive",onClick:this.onClickArchive})))}},{key:"renderTruncatedMessage",value:function e(){var t=this.props.message;var a=t;return n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"p-inbox__item_sender"},n.a.createElement(Lr["a"],{msg:a})),n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(nl["a"],{lines:1},Object(ur["isRichTextMessage"])(a)?n.a.createElement(il["a"],{richTextBlock:a.blocks[0]}):n.a.createElement(Ur["a"],{msg:a}))))}},{key:"renderMessage",value:function e(){var t=this.props,a=t.item,r=t.message,i=t.includeActions;var s=r;var o=n.a.createElement(dn["a"],{msg:s},n.a.createElement(rn["a"],{light:n.a.createElement(Dr["a"],{msg:s})},n.a.createElement(Lr["a"],{msg:s}),"\xa0\xa0",n.a.createElement(Br["a"],{msg:s,clickable:true,full:true}),n.a.createElement("br",null),n.a.createElement(Ur["a"],{msg:s}),n.a.createElement(qr["a"],{msg:s,blocksContainerContext:Rr["a"].all_unreads}),n.a.createElement(Fr["b"],{msg:s}),n.a.createElement(xr["a"],{msg:s}),n.a.createElement(Hr["a"],{msg:s}),n.a.createElement(Zr,{msg:s,className:"p-unreads_view__thread_replies"}),n.a.createElement(Kr,{msg:s})));var l=n.a.createElement(tn["a"],null,n.a.createElement(an["a"],{msg:s,showComment:true,showShare:true,messageContainerType:ga["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:"above"},o));var c=i?l:o;return n.a.createElement("div",{className:"p-inbox__item p-inbox__item--expanded"},n.a.createElement(U["c"],{className:"p-inbox__item_header",onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},"mention"===a.type?n.a.createElement(B["b"],{type:"comment-alt"}):null,"star"===a.type?n.a.createElement(B["b"],{type:"star-o"}):null,"reminder"===a.type?n.a.createElement(B["b"],{type:"check-list"}):null),n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(yr["a"],{channelId:a.channelId})),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())),n.a.createElement("div",{className:"p-inbox__item_message"},c))}},{key:"renderMention",value:function e(){var t=this.props,a=t.item,i=t.isArchived,s=t.isRead,o=t.isInMutedChannel,l=t.message;if(!l||o)return null;return n.a.createElement(r["Fragment"],null,this.state.focused?this.renderMessage():n.a.createElement(U["c"],{className:b()("p-inbox__item",{"p-inbox__item--archived":i,"p-inbox__item--read":s}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},n.a.createElement(B["b"],{type:"comment-alt"})),n.a.createElement(cl["c"],{tip:n.a.createElement(yr["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(yr["a"],{channelId:a.channelId}))),this.renderTruncatedMessage(),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderStarredItem",value:function e(){var t=this.props,a=t.item,i=t.isArchived,s=t.isRead,o=t.message;if(!o)return null;return n.a.createElement(r["Fragment"],null,this.state.focused?this.renderMessage():n.a.createElement(U["c"],{className:b()("p-inbox__item",{"p-inbox__item--archived":i,"p-inbox__item--read":s}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},n.a.createElement(B["b"],{type:"star-o"})),n.a.createElement(cl["c"],{tip:n.a.createElement(yr["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(yr["a"],{channelId:a.channelId}))),this.renderTruncatedMessage(),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderReminder",value:function e(){var t=this.props,a=t.item,i=t.isArchived,s=t.isRead,o=t.message;var l=null;var c=null;o?l=o:c=Object(al["simpleIsUrl"])(a.text)?n.a.createElement(ol["a"],{href:a.text}):n.a.createElement(qo["a"],{text:a.text});return n.a.createElement(r["Fragment"],null,this.state.focused&&l?this.renderMessage():n.a.createElement(U["c"],{className:b()("p-inbox__item",{"p-inbox__item--archived":i,"p-inbox__item--read":s}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},n.a.createElement(B["b"],{type:"check-list"})),l?n.a.createElement(cl["c"],{tip:n.a.createElement(yr["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(yr["a"],{channelId:a.channelId}))):n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"p-inbox__item_source"},"Reminder"),n.a.createElement("span",{className:"p-inbox__item_sender"},"You")),l?this.renderTruncatedMessage():n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(nl["a"],{lines:1},c)),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"render",value:function e(){var t=this.props,a=t.item,r=t.visible;if(!r)return null;return n.a.createElement(sl["b"],null,"mention"===a.type&&this.renderMention(),"star"===a.type&&this.renderStarredItem(),"reminder"===a.type&&this.renderReminder())}}]);return t}(r["PureComponent"]);pl.displayName="InboxItem";pl.defaultProps=dl;var ml=function e(t,a){var r=a.item;var n=Object($t["a"])(t,r.channelId,r.messageTs);var i=Object(D["e"])(t,r.channelId);var s=Object(ge["d"])(t).id;var o=Object(re["getInternalTeamIds"])(t,i)||[];var l=!Object(rl["e"])(t)||Object(re["isImOrMpim"])(i)||Object(re["isOrgWide"])(i)||o.includes(s);return{item:r,message:n,includeActions:l,isArchived:r.archived,isRead:r.read,isInMutedChannel:i&&Object(Ta["isChannelMutedById"])(t,i.id)}};var hl={archiveItem:function e(){return tl["archiveItem"].apply(void 0,arguments)},unarchiveItem:function e(){return tl["unarchiveItem"].apply(void 0,arguments)},markItemAsRead:function e(){return tl["markItemAsRead"].apply(void 0,arguments)},markItemAsUnread:function e(){return tl["markItemAsUnread"].apply(void 0,arguments)}};var vl=Object(g["connect"])(ml,hl)(pl);var fl=a(3644);var bl={items:Xt["b"].array.isRequired,refreshInbox:Xt["b"].func.isRequired};var gl=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["toggleArchives"]);a.state={includeArchives:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.refreshInbox()}},{key:"toggleArchives",value:function e(){var t=this.state.includeArchives;this.setState(function(){return{includeArchives:!t}})}},{key:"renderDay",value:function e(t){var a=this.state.includeArchives;var i=false;var s=Object.values(t).map(function(e){i=i||!!a||!e.archived;return n.a.createElement(vl,{key:"reminder"===e.type?e.type+"-"+e.reminderId:e.type+"-"+e.id,item:e,visible:!!a||!e.archived})});if(!i)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement("h4",null,Object(el["a"])(t[0].id)),n.a.createElement("div",{className:"p-inbox__day",key:t[0].id},s))}},{key:"renderItems",value:function e(){var t=this;var a=this.props.items;var r=[];var n=a;Object(_["each"])(n,function(e){r.push(t.renderDay(e))});return r}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},n.a.createElement(U["c"],{className:"float_right micro",onClick:this.toggleArchives},n.a.createElement(B["b"],{type:"archive",size:"inherit",className:"margin_right_25"}),this.state.includeArchives?"Hide archived items":"Include archived items"),this.renderItems())}}]);return t}(r["Component"]);gl.displayName="InboxView";var _l=function e(t){return{items:Object(vs["a"])(t)}};var yl={refreshInbox:tl["refreshInbox"]};var kl=Object(g["connect"])(_l,yl)(gl);var Ol={className:Xt["b"].string.isRequired,refreshInbox:Xt["b"].func.isRequired,markAllAsRead:Xt["b"].func.isRequired,archiveAll:Xt["b"].func.isRequired};var Cl=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jt["a"])(a,["onClickRefresh","onClickMarkAllAsRead","onClickArchiveAll"]);return a}d()(t,[{key:"onClickRefresh",value:function e(){this.props.refreshInbox()}},{key:"onClickMarkAllAsRead",value:function e(){this.props.markAllAsRead()}},{key:"onClickArchiveAll",value:function e(){this.props.archiveAll()}},{key:"render",value:function e(){var t=this.props.className;return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},"Home")),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},n.a.createElement(Sa["a"],{onClick:this.onClickRefresh},"Refresh")," |"," ",n.a.createElement(Sa["a"],{onClick:this.onClickMarkAllAsRead},"Mark all as read")," |"," ",n.a.createElement(Sa["a"],{onClick:this.onClickArchiveAll},"Archive all")))}}]);return t}(r["PureComponent"]);Cl.displayName="InboxHeader";var El={refreshInbox:tl["refreshInbox"],markAllAsRead:tl["markAllAsRead"],archiveAll:tl["archiveAll"]};var Sl=Object(g["connect"])(null,El)(Cl);var wl=a(296);var Il=a(822);var jl=a(4719);var Tl=a(591);var Al=a(86);var Nl=a(1038);var Ml=a(551);var Pl={clogger:Xt["b"].object.isRequired,featureAppLauncher:Xt["b"].bool,referringEventId:Xt["b"].string};var Rl={featureAppLauncher:false,referringEventId:void 0};var xl=new y["b"]("app_launcher");function Dl(e){var t=e.clogger,a=e.featureAppLauncher,i=e.referringEventId;var s=Object(r["useCallback"])(function(){t.track(w["l"].APP_LAUNCHER,R()({ui_context:{action:w["w"].CLICK,ui_element:w["z"].LINK_SLACKTIPS_HOME}},w["c"].referring_event_id,i))},[t,i]);if(!a)return null;var o=cdn_url+"/b0510/img/app-launcher/no_app_splash.png";var l=cdn_url+"/b0510/img/app-launcher/no_app_splash@2x.png";return n.a.createElement("section",{className:"p-app_launcher__empty_state","data-qa":"app_launcher__empty_state"},n.a.createElement("img",{src:o,srcSet:o+" 1x, "+l+" 2x",height:120,width:212,alt:"",className:"margin_bottom_100"}),n.a.createElement("div",null,xl.rt("Pull reports, start calls, file tickets, and more \u2014 right from Slack. <a>Learn more about apps.</a>",null,function(e){var t=e.text,a=e.tag;if("a"===a)return n.a.createElement(ol["a"],{"data-qa":"app_launcher__slack_tips_link",href:"https://slack.com/slack-tips",onClick:s},t);return null})))}Dl.displayName="AppLauncherEmptyState";Dl.defaultProps=Rl;var Fl=function e(t){return{featureAppLauncher:Object(Il["l"])(t),clogger:Object(O["a"])({state:t}),referringEventId:Object(Il["i"])(t)}};var Ll=Object(g["connect"])(Fl)(Dl);var Bl={clogger:Xt["b"].object.isRequired,featureAppLauncher:Xt["b"].bool,categoryName:Xt["b"].string,teamUrl:Xt["b"].string,resultKey:Xt["b"].string.isRequired,referringEventId:Xt["b"].string};var Ul={featureAppLauncher:false,categoryName:"",teamUrl:"",referringEventId:void 0};var ql=new y["b"]("app_launcher");function Wl(e){var t=e.clogger,a=e.featureAppLauncher,i=e.categoryName,s=e.teamUrl,o=e.resultKey,l=e.referringEventId;var c=Object(r["useCallback"])(function(){return t.track(w["l"].APP_INDEX_VIEW_APP_DIRECTORY_CLICK,R()({},w["c"].referring_event_id,l))},[t,l]);var u=Object(r["useCallback"])(function(){return t.track(w["l"].APP_INDEX_MANAGE_CLICK,R()({},w["c"].referring_event_id,l))},[t,l]);var d=void 0;if(a){d=n.a.createElement(ol["a"],{className:"p-app_launcher__category_header__link",href:s+"apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click",onClick:c,"data-qa":"app_launcher__category_header__app_directory_link"},ql.t("See all apps in the App Directory"));"Ai01"===o&&(d=n.a.createElement(ol["a"],{className:"p-app_launcher__category_header__link",href:s+"apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:u,"data-qa":"app_launcher__category_header__manage_apps_link"},ql.t("Manage apps",{fallbackHash:"5b7111cdde14815bb325dae16d169cfdefda6165",fallbackHashNs:"classic_nav"})))}return n.a.createElement("div",{className:"p-app_launcher__category_header","data-category_header":"true","data-qa":"app_launcher__category_header",key:o},n.a.createElement("div",{className:"p-app_launcher__category_header__title"},i),d)}Wl.displayName="AppLauncherCategoryHeader";Wl.defaultProps=Ul;var Hl=function e(t,a){var r=a.result,n=void 0===r?{}:r;var i=Object(ae["b"])(t);var s=Object(ge["j"])(t,i);return{clogger:Object(O["a"])({state:t}),featureAppLauncher:Object(Il["l"])(t),categoryName:n.display_name,resultKey:n.key,teamUrl:Object(Pe["getTeamUrl"])(s),referringEventId:Object(Il["i"])(t)}};var Gl=Object(g["connect"])(Hl)(Wl);var Vl=a(109);var Kl=a(330);var zl=a(1301);var Ql=new y["b"]("app_launcher");var Yl={app:Xt["b"].object.isRequired,handleClick:Xt["b"].func};var Jl={handleClick:_["noop"]};function Xl(e){var t=e.app,a=e.handleClick;var i=Object(r["useState"])(false),s=bs()(i,2),o=s[0],l=s[1];var c=Object(r["useCallback"])(function(){l(true)},[l]);var u=Object(r["useCallback"])(function(){a({app:t})},[a,t]);var d=o?Kl["a"]:Object(Kl["b"])(t,72);var p=t.is_installed?null:n.a.createElement("div",{className:"p-app_launcher__app_card__pseudobutton c-button c-button--medium c-button--outline","data-qa":"app_launcher__app_card__add"},Ql.t("Add"));return n.a.createElement(bi["a"],{className:"p-app_launcher__app_card",onClick:u,"data-qa":"app_launcher__app_card"},n.a.createElement("div",{className:"p-app_launcher__app_card__container"},n.a.createElement("img",{className:"p-app_launcher__app_card__icon",src:d,alt:"",onError:c}),n.a.createElement("div",null,n.a.createElement("strong",{className:"p-app_launcher__app_card__title",style:{WebkitBoxOrient:"vertical"}},t.name),n.a.createElement("span",{className:"p-app_launcher__app_card__text",style:{WebkitBoxOrient:"vertical"}},Object(zl["a"])(t.short_description||"",function(e,t){return n.a.createElement("strong",{key:t},e)})))),p)}Xl.displayName="AppLauncherAppCard";Xl.defaultProps=Jl;var Zl=function e(t){return Object(wl["bindActionCreators"])({handleClick:hs["c"]},t)};var $l=Object(g["connect"])(null,Zl)(Xl);var ec={chunk:Xt["b"].object};var tc={chunk:{apps:[]}};function ac(e){var t=e.chunk;return n.a.createElement("div",{className:"p-app_launcher__grid",key:t.key,"data-qa":"app_launcher__result_row"},t.apps.map(function(e){return n.a.createElement($l,{app:e,key:e.key})}))}ac.displayName="AppLauncherResultRow";ac.defaultProps=tc;var rc=Object(Vl["pure"])(ac);var nc=new y["b"]("app_launcher");var ic={clogger:Xt["b"].object.isRequired,featureAppLauncher:Xt["b"].bool,clientTheme:Xt["b"].string,loadMoreApps:Xt["b"].func,searchInput:Xt["b"].string.isRequired,results:Xt["b"].array.isRequired,keys:Xt["b"].array.isRequired,isShowingDefaultAppCategories:Xt["b"].bool.isRequired,nextCursor:Xt["b"].string,referringEventId:Xt["b"].string};var sc={featureAppLauncher:false,nextCursor:void 0,referringEventId:void 0,loadMoreApps:_["noop"],clientTheme:"light"};var oc=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.isPaginating=false;a.renderRow=a.renderRow.bind(a);a.paginate=a.paginate.bind(a);a.isFocusableItem=a.isFocusableItem.bind(a);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track(w["l"].APP_INDEX_OPEN,R()({},w["c"].referring_event_id,this.props.referringEventId))}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props.results[a]||{},n=r.type;return n===Tl["c"].APP_CHUNK||n===Tl["c"].CATEGORY_HEADER||n===Tl["c"].EMPTY_STATE}},{key:"paginate",value:function e(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"shouldPaginate",value:function e(){return!!this.props.nextCursor&&!!this.props.isShowingDefaultAppCategories}},{key:"loadMoreApps",value:function e(){var t=this;if(this.isPaginating)return;this.isPaginating=true;this.props.loadMoreApps({isAppLauncher:true}).then(function(){t.isPaginating=false})}},{key:"renderResult",value:function e(t){var a=t.result,r=void 0===a?{}:a;switch(r.type){case Tl["c"].EMPTY_STATE:return n.a.createElement(Ll,null);case Tl["c"].LOADING:return n.a.createElement("div",{style:{height:62},key:r.key},n.a.createElement(Al["a"],{size:"jumbo"}));case Tl["c"].CATEGORY:return n.a.createElement(Gl,{result:r});case Tl["c"].APP_CHUNK:return n.a.createElement(rc,{chunk:r});default:return n.a.createElement(n.a.Fragment,null)}}},{key:"renderRow",value:function e(t){var a=this.props.results;var r=a[t];return this.renderResult({result:r})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureAppLauncher,i=a.results,s=a.searchInput,o=a.clientTheme,l=a.keys;if(!r)return null;if(!i.length&&s)return n.a.createElement("section",{key:"no-results",className:"p-apps_launcher__no_results","data-qa":"app_launcher__no_results"},nc.t("There are no apps matching",{fallbackHash:"0d3b5e36d879d2a7845902396dbf6f4c09575a99",fallbackHashNs:"apps_browser"}),"\xa0",n.a.createElement("strong",null,s));var c=b()("p-app_launcher__list_container",R()({"p-app_launcher__list_container--loading":0===l.length},"p-app_launcher__list_container--loading--"+o,0===l.length&&"light"!==o));return n.a.createElement(Nl["a"],null,function(e){var a=e.width,r=e.height,i=e.measureRef;return n.a.createElement("div",{className:c,"data-qa":"app_launcher__results_list",ref:i},n.a.createElement(Ml["a"],{width:a,height:Math.floor(r),keys:l,rowRenderer:t.renderRow,loadPost:t.paginate,loadAround:t.paginate,isFocusableItem:t.isFocusableItem,hideHiddenStopTabs:true}))})}}]);return t}(r["Component"]);oc.displayName="AppLauncherSearchResults";oc.defaultProps=sc;var lc=function e(t){return{clogger:Object(O["a"])({state:t}),searchInput:Object(Il["k"])(t),results:Object(Il["c"])(t),keys:Object(Il["b"])(t),nextCursor:Object(Il["h"])(t),isShowingDefaultAppCategories:Object(Il["f"])(t),featureAppLauncher:Object(Il["l"])(t),clientTheme:Object(sa["getClientTheme"])(t),referringEventId:Object(Il["i"])(t)}};var cc=function e(t){return Object(wl["bindActionCreators"])({loadMoreApps:hs["d"]},t)};var uc=Object(g["connect"])(lc,cc)(oc);var dc=a(4726);var pc={closeFlexpane:Xt["b"].func,featureAppLauncher:Xt["b"].bool,fetchDefaultApps:Xt["b"].func,resetSearch:Xt["b"].func,userAttentionIsOnChat:Xt["b"].bool,composerVisible:Xt["b"].bool,removeFromSectionNavigation:Xt["b"].func,addToSectionNavigation:Xt["b"].func};var mc={closeFlexpane:_["noop"],featureAppLauncher:false,fetchDefaultApps:_["noop"],resetSearch:_["noop"],userAttentionIsOnChat:false,composerVisible:false,removeFromSectionNavigation:_["noop"],addToSectionNavigation:_["noop"]};var hc=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.searchInputRef=n.a.createRef();a.focus=a.focus.bind(a);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.fetchDefaultApps({isAppLauncher:true});this.props.closeFlexpane()}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(lr["a"])(a)&&this.props.addToSectionNavigation();Object(cr["a"])(a)&&this.props.removeFromSectionNavigation()}},{key:"componentWillUnmount",value:function e(){this.props.resetSearch()}},{key:"focus",value:function e(){this.searchInputRef.current.focus()}},{key:"render",value:function e(){if(!this.props.featureAppLauncher)return null;var t={addAppsVariant:false,channelId:null};return n.a.createElement("div",{className:"p-app_launcher","data-qa":"app_launcher"},n.a.createElement("div",{className:"p-app_launcher__grid margin_bottom_0 margin_top_0"},n.a.createElement("div",{className:"p-app_launcher__filter"},n.a.createElement(jl["a"],{isAppLauncher:true,ref:this.searchInputRef}))),n.a.createElement(uc,t))}}]);return t}(r["Component"]);hc.displayName="AppLauncher";hc.defaultProps=mc;var vc=function e(t){return{featureAppLauncher:Object(Il["l"])(t),userAttentionIsOnChat:Object(Oa["e"])(t),composerVisible:(Object(or["a"])(t)||"composer_toolbar"===Object(ir["getGroupForUser"])(t,"composer_toolbar"))&&Object(sr["isComposerVisible"])(t)}};var fc=function e(t){return Object(wl["bindActionCreators"])({fetchDefaultApps:hs["b"],resetSearch:hs["e"],closeFlexpane:bt["a"]},t)};var bc=Object(nr["a"])(hc,"AppLauncher",{index:7});var gc=Object(g["connect"])(vc,fc)(bc);var _c=new y["b"]("app_launcher");var yc={className:Xt["b"].string};var kc={className:""};var Oc=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props.className;var a=_c.t("Apps");var r=_c.t("Your tools, right in Slack.");return n.a.createElement("div",{className:b()(t,"app-launcher-page-header"),"data-qa":"app_launcher__page_header"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},a),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},r))}}]);return t}(r["Component"]);Oc.displayName="AppLauncherPageHeader";Oc.defaultProps=kc;var Cc=Oc;a.d(t,"a",function(){return jc});var Ec=new y["b"]("channel_sidebar");var Sc=new y["b"]("welcome_place");var wc=new y["b"]("app_launcher");var Ic={Pcomposer:{label:function e(){return"Composer"},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(Po,null))}},Pdrafts:{label:function e(){return Ec.t("Drafts")},header:function e(t){return n.a.createElement(qi,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement($o,null))}},Pexample:{label:function e(){return"Example Page"},view:function e(){return n.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote",onClick:function e(t){},onClickClose:function e(t){},getCloseLinkLabel:function e(){return Ec.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}}},Punreads:{label:function e(){return Ec.t("All Unreads")},header:function e(t){return n.a.createElement(Pi,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(hi,null))},sidebar:{icon:"list",isBold:function e(t){return Object(i["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(o["hasUnreadChannels"])(t):Object(s["hasUnreads"])(t)}}},Pwelcome:{sidebar:{icon:"map",onClick:function e(t){return t(Object(S["f"])("sidebar"))},onClickClose:function e(t){t(Object(Wi["openModal"])({element:n.a.createElement(ls,null)}));t(Object(E["a"])())},getCloseLinkLabel:function e(){return Ec.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})},isBold:function e(t){return Object(C["p"])(t)}},label:function e(){return Sc.t("Get Started")},header:function e(t){return n.a.createElement(ms,t)},view:function e(){return n.a.createElement(Yt,null)}},Papps:{label:function e(){return wc.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"})},header:function e(t){return n.a.createElement(Cc,t)},view:function e(){return n.a.createElement(gc,null)},sidebar:{icon:"gn-menu-small",onClick:function e(t){return t(Object(hs["a"])({eventId:"APP_LAUNCHER_OPEN_FROM_SIDEBAR"}))}}},Phome:{label:function e(){return Ec.t("Home",{fallbackHashNs:"prefs",fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65"})},header:function e(t){return n.a.createElement(Sl,t)},view:function e(){return n.a.createElement(kl,null)},sidebar:{icon:"home",isBold:function e(t){return Object(vs["b"])(t)}}}};function jc(e){return Ic[e]||{}}},1320:function(e,t,a){"use strict";a.d(t,"b",function(){return p});a.d(t,"a",function(){return h});var r=a(1);var n=a.n(r);var i=a(12);var s=a(9);var o=a(22);var l=a(73);var c=a(42);var u=a(815);var d=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(l["a"])(t,n,r);Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")&&r&&Object(u["d"])(Object(o["b"])(t),n,r);return{msg:i}};function p(e){return Object(i["connect"])(d)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}var m=function e(t,a){var r=a.ts,n=a.prevTs,i=a.channelId;var d=Object(l["a"])(t,i,r);var p=Object(l["a"])(t,i,n);if(Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")){var m=Object(o["b"])(t);r&&Object(u["d"])(m,i,r);n&&Object(u["d"])(m,i,n)}return{msg:d,adjacent:Object(c["isAdjacentMessage"])(t,d,p)}};function h(e){return Object(i["connect"])(m)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}},1323:function(e,t,a){"use strict";a.d(t,"e",function(){return c});a.d(t,"d",function(){return u});a.d(t,"c",function(){return d});a.d(t,"a",function(){return p});a.d(t,"b",function(){return m});var r=a(57);var n=a(14);var i=0;var s=0;var o=true;var l=Object(n["b"])({label:"HISTORY-NAVIGATION"});var c=function e(){if(s===i)return;l.info("Incrementing the users current position in the history stack");s+=1;o=false};var u=function e(){if(1===s)return;l.info("Decrementing the users current position in the history stack");s-=1;o=false};var d=function e(){if(!o){o=true;return}l.info("Adding route to the history stack");if(s!==i){s+=1;i=s;return}s+=1;i+=1};var p=function e(){return 1===s};var m=function e(){return s===i};Object(r["exportToGlobalDebugger"])("history",{getHistoryLength:function e(){return i},getHistoryIndex:function e(){return s}})},1398:function(e,t,a){"use strict";var r=a(1837);t["a"]=r["a"]},1401:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(23);var o=a(192);var l=a(6);var c=a(2470);var u=a.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,a=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-inline_offline_indicator"},n.a.createElement("span",null,n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",n.a.createElement("strong",null,d.t("No connection."))," ",a||d.t("Go online to load more messages.")))}p.displayName="InlineOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},1402:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(341);function n(e){return Object(r["a"])((e||"").trim().toLowerCase())}},1403:function(e,t,a){"use strict";a.d(t,"c",function(){return n});a.d(t,"b",function(){return i});a.d(t,"d",function(){return s});a.d(t,"a",function(){return l});var r=a(24);var n=Object(r["b"])("TS.permissions.members.canPostInModelOb",function(){return false});var i=Object(r["b"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var s=Object(r["b"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var o=Object(r["b"])("TS.permissions.members.canEditUserGroups",function(){return false});var l=Object(r["b"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},1406:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a.d(t,"b",function(){return v});var r=a(0);var n=a(17);var i=a(14);var s=a(39);var o=a(18);var l=a(816);var c=a(1323);var u="HISTORY-NAVIGATION";var d="back";var p="forward";var m=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.fromKeyboardShortcut,n=a.elementName;var i=Object(s["a"])({state:t});i.track(o["l"].HISTORY_NAVIGATION,{contexts:{ui_context:{action:r?o["w"].KEYDOWN:o["w"].CLICK,ui_properties:{element_type:o["k"].BUTTON,element_name:n}}}})};var h=Object(n["b"])("Go back in history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.fromKeyboardShortcut,s=void 0!==n&&n;r&&r.preventDefault();var o=t();var p=Object(i["a"])({state:o,label:u});if(Object(l["b"])(o)){if(Object(c["a"])()){p.debug("This is the beginning of the history stack \u2b05\ufe0f");return}p.debug("Moving back in history");window.history.back();Object(c["d"])();m(o,{fromKeyboardShortcut:s,elementName:d})}else{p.debug("Moving back in history");window.history.back();m(o,{fromKeyboardShortcut:s,elementName:d})}});h.meta={name:"triggerNavigateBack",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateBack",description:"Go back in history"};h.propTypes={event:r["b"].object,fromKeyboardShortcut:r["b"].bool};var v=Object(n["b"])("Go forward in history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.fromKeyboardShortcut,s=void 0!==n&&n;r&&r.preventDefault();var o=t();var d=Object(i["a"])({state:o,label:u});if(Object(l["b"])(o)){if(Object(c["b"])()){d.debug("This is the end of the history stack \u27a1\ufe0f");return}d.debug("Moving forward in history");window.history.forward();Object(c["e"])();m(o,{fromKeyboardShortcut:s,elementName:p})}else{d.debug("Moving forward in history");window.history.forward();m(o,{fromKeyboardShortcut:s,elementName:p})}});v.meta={name:"triggerNavigateForward",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateForward",description:"Go forward in history"};v.propTypes={event:r["b"].object,fromKeyboardShortcut:r["b"].bool}},1428:function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(70);var s={children:r["b"].node,isDegradedMode:r["b"].bool};var o={children:null,isDegradedMode:null};var l=function e(t){var a=t.isDegradedMode,r=t.children;return a?r:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isDegradedMode:Object(i["isHavingTroubleReconnecting"])(t)}};t["a"]=Object(n["connect"])(c)(l)},1430:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(2);var g=a(31);var _=a(9);var y=a(303);var k=a(177);var O=a(41);var C=a(144);var E=a(769);var S=a(97);var w=a(87);var I=a(6);var j=a(14);var T=a(162);var A=a(91);var N=a(95);var M=a(52);var P=a(150);var R=a(441);var x=a(17);var D=a(302);var F=a(1241);var L=80;var B=new I["b"]("user_groups");var U=void 0;var q=void 0;function W(e,t){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;q={hasNameRequiredWarning:B.t("Please enter a name for this group."),hasReservedName:B.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:B.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:L}),hasNameTakenWarning:B.t("This name is already in use by another group."),unknownError:B.t("Sorry, something went wrong. Please try a different name.")}}function H(e){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups_a11y_refactor"))return;U={admins:B.t("Team Admins"),owners:B.t("Team Owners")}}var G=Object(x["b"])("Validate user group name",function(e,t,a){var r=a.name,n=a.prevName,i=a.reason;var s=t();W(s,r);H(s);if(!r||!r.trim())return Promise.resolve(q.hasNameRequiredWarning);var o=r.toLowerCase().trim();if(n&&o===n.toLowerCase().trim())return Promise.resolve("");if(Object(_["isFeatureEnabled"])(s,"feature_sonic_user_groups_a11y_refactor")&&(o===U.admins.toLowerCase()||o===U.owners.toLowerCase()))return Promise.resolve(q.hasReservedName);if(Object(F["a"])(r)>L)return Promise.resolve(q.hasMaxLengthWarning);return e(Object(D["n"])({name:r,reason:i})).then(function(e){var t=e.error;if("name_already_exists"===t)return q.hasNameTakenWarning;if(t)return q.unknownError;return""})});G.meta={name:"validateUserGroupName",key:"utilityValidateUserGroupNameValidateUserGroupName",description:"Validate user group name"};G.propTypes={name:v["b"].string,prevName:v["b"].string};var V=G;var K={};Object.defineProperty(K,"handleErrorSnameErrorStringstrings",{get:function e(){return q},set:function e(t){q=t}});var z=new I["b"]("user_groups");var Q=80;var Y=void 0;var J=void 0;function X(e,t){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;Y={hasHandleRequiredWarning:z.t("Please enter a handle for this group."),hasMaxLengthWarning:z.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:Q}),hasReservedHandle:z.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:z.t("Handles can only contain letters or numbers."),hasPunctuationWarning:z.t("Handles can only contain letters or numbers."),hasLowercaseWarning:z.t("Handles can only be in lowercase."),hasHandleTakenWarning:z.t("This handle is already in use by a member, channel, or another group."),unknownError:z.t("Sorry, something went wrong. Please try a different handle.")}}function Z(e){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups_a11y_refactor"))return;J={admins:z.t("admins"),owners:z.t("owners")}}var $=Object(x["b"])("Validate user group handle",function(e,t,a){var r=a.handle,n=a.prevHandle,i=a.reason;var s=t();X(s,r);Z(s);if(!r||!r.trim())return Promise.resolve(Y.hasHandleRequiredWarning);if(r===n)return Promise.resolve("");if(Object(_["isFeatureEnabled"])(s,"feature_sonic_user_groups_a11y_refactor")&&(r.toLowerCase()===J.admins.toLowerCase()||r.toLowerCase()===J.owners.toLowerCase()))return Promise.resolve(Y.hasReservedHandle);if(/[ ,;'`~!@#$%^&*+=\\:"<>?|]/.test(r.trim()))return Promise.resolve(Y.hasSpecialsWarning);if(/^[-|_]+$/.test(r))return Promise.resolve(Y.hasPunctuationWarning);if(/[A-Z]/.test(r))return Promise.resolve(Y.hasLowercaseWarning);if(Object(F["a"])(r)>Q)return Promise.resolve(Y.hasMaxLengthWarning);return e(Object(D["m"])({handle:r,reason:i})).then(function(e){var t=e.error;if("handle_already_exists"===t)return Y.hasHandleTakenWarning;if(t)return Y.unknownError;return""})});$.meta={name:"validateUserGroupHandle",key:"utilityValidateUserGroupHandleValidateUserGroupHandle",description:"Validate user group handle"};$.propTypes={handle:v["b"].string,prevHandle:v["b"].string};var ee=$;var te={};Object.defineProperty(te,"handleErrorStrings",{get:function e(){return Y},set:function e(t){Y=t}});var ae=a(1936);var re=new I["b"]("user_groups");var ne={userGroup:v["b"].object.isRequired,detailsFormValues:v["b"].shape({name:v["b"].string,handle:v["b"].string,purpose:v["b"].string,channels:v["b"].array}),validateUserGroupHandle:v["b"].func.isRequired,validateUserGroupName:v["b"].func.isRequired,setFormErrors:v["b"].func.isRequired,featureSonicUserGroups:v["b"].bool.isRequired,onRef:v["b"].func.isRequired,onPurposeChange:v["b"].func.isRequired,errors:v["b"].shape({nameError:v["b"].string,handleError:v["b"].string,purposeError:v["b"].string}),submitError:v["b"].string,setRequiredFieldsEmpty:v["b"].func.isRequired,purposeMaxLength:v["b"].number.isRequired};var ie={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var se=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var r=!a.state.name||!a.state.handle;a.props.setRequiredFieldsEmpty(r);a.validateUserGroupName=Object(b["debounce"])(a.validateUserGroupName,300).bind(a);a.validateUserGroupHandle=Object(b["debounce"])(a.validateUserGroupHandle,300).bind(a);Object(g["a"])(a,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]);a.postValidateHandle=null;a.postValidateName=null;a.nameInputRef=h.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this);this.focusNameInput()}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var a=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(a)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});return this.validateUserGroupName(t)}},{key:"onHandleChange",value:function e(t){if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var a=t.replace(/ /g,"");this.setState(function(){return{handle:a}});if(" "!==t.charAt(0))return this.validateUserGroupHandle(a);return Promise.resolve()}},{key:"onPurposeChange",value:function e(t){this.props.onPurposeChange(t);this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){var a=t.map(function(e){return e.value});this.setState(function(){return{channels:a}})}},{key:"getFormValues",value:function e(){return this.state}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"focusNameInput",value:function e(){this.nameInputRef.current.focus()}},{key:"validateUserGroupHandle",value:function e(t){var a=this;var r=this.props.userGroup;return this.props.validateUserGroupHandle({handle:t,prevHandle:Object(w["f"])(r,{includeAtSign:false}),reason:"user-group-edit-create-form"}).then(function(e){a.props.setFormErrors({handleError:e})}).finally(function(){a.postValidateHandle=null})}},{key:"validateUserGroupName",value:function e(t){var a=this;var r=this.props.userGroup;return this.props.validateUserGroupName({name:t,prevName:Object(w["h"])(r),reason:"user-group-edit-create-form"}).then(function(e){a.props.setFormErrors({nameError:e})}).finally(function(){a.postValidateName=null})}},{key:"hasValidationErrors",value:function e(t){return Object(b["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=re.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return h.a.createElement(N["a"],{level:"error",type:"inline",className:"margin_bottom_100"},t)}return false}},{key:"maybeRenderAutogeneratedUserGroupAlert",value:function e(){var t=this.props.userGroup;if(!Object(w["m"])(t))return null;var a=re.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"});var r=re.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"});var n=void 0;Object(w["o"])(t)&&(n=r);Object(w["n"])(t)&&(n=a);return h.a.createElement(N["a"],{level:"info",type:"inline",className:"margin_bottom_100"},n)}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=re.t("Name");var r=re.t("e.g. Accounts Team");return h.a.createElement("div",null,h.a.createElement(M["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:a},h.a.createElement(P["a"],{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:r,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(a){return t.onNameChange(a)},errorText:this.props.errors.nameError,isRequired:true,useInlineAlert:true,isDisabled:Object(w["m"])(this.props.userGroup)})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=re.t("e.g. accounts-team");var r=re.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=re.t("Handle");return h.a.createElement("div",null,h.a.createElement(M["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},h.a.createElement(P["a"],{name:"user_group_handle",id:"handle_input",placeholder:a,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(a){return t.onHandleChange(a)},errorText:this.props.errors.handleError,hintText:r,isRequired:true,icon:"mentions",useInlineAlert:true,isDisabled:Object(w["m"])(this.props.userGroup)})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=re.t("Purpose");var r=re.t("What is this group about?");return h.a.createElement("div",null,h.a.createElement(M["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:a,optional:true},h.a.createElement(R["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(a){return t.onPurposeChange(a)},errorText:this.props.errors.purposeError,hintText:r,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:true})))}},{key:"renderDefaultChannelSelect",value:function e(){return h.a.createElement(ae["a"],{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),h.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(m["PureComponent"]);se.displayName="UserGroupEditCreateForm";se.defaultProps=ie;var oe=function e(t){return{featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var le={validateUserGroupName:V,validateUserGroupHandle:ee};var ce=Object(f["connect"])(oe,le)(se);var ue=a(2088);var de=a(48);var pe=a.n(de);var me=Object(x["b"])("Validate the user group form",function(e,t,a){var r=a.name,n=a.handle,i=a.prevName,s=a.prevHandle;return Promise.all([e(V({name:r,prevName:i})),e(ee({handle:n,prevHandle:s}))]).then(function(e){var t=pe()(e,2),a=t[0],r=t[1];return{nameError:a,handleError:r}})});me.meta={name:"validate",key:"componentsFlexpaneUserGroupsUtilityValidationValidate",description:"Validate the user group form"};me.propTypes={name:v["b"].string,handle:v["b"].string,prevName:v["b"].string,prevHandle:v["b"].string};var he=me;var ve=new I["b"]("user_groups");var fe={userGroup:v["b"].object.isRequired,userGroupId:v["b"].string,userGroupName:v["b"].string,userGroupHandle:v["b"].string,userGroupPurpose:v["b"].string,userGroupDefaultChannels:v["b"].array,createUserGroup:v["b"].func.isRequired,updateUserGroup:v["b"].func.isRequired,validate:v["b"].func.isRequired,featureSonicUserGroups:v["b"].bool.isRequired,closeModal:v["b"].func,enqueueToast:v["b"].func,showUserGroupDetails:v["b"].func,addUserGroupIds:v["b"].func.isRequired};var be={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:b["noop"],enqueueToast:b["noop"],showUserGroupDetails:b["noop"]};var ge=void 0;var _e=Object(j["b"])();var ye=140;var ke=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:a.props.userGroupName,handle:a.props.userGroupHandle,purpose:a.props.userGroupPurpose,channels:a.props.userGroupDefaultChannels},purposeTooLong:false};Object(g["a"])(a,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]);a.onPurposeChange=Object(b["debounce"])(a.onPurposeChange,300).bind(a);a.formRef=null;return a}l()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(ge.edit.id):this.setDialogStep(ge.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this;var a=this.formRef.getFormValues();this.setFormSubmitPending(true);return this.props.validate(n()({},a,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===ge.edit.id)t.onEditDialogSubmit(a);else{t.setDetailsFormValues(a);t.setDialogStep(ge.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var a=this;var r=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object(b["trim"])(r),handle:n,description:i,channels:s,reason:"onEditDialogSubmit"}).then(function(){a.props.enqueueToast({element:h.a.createElement(T["b"],null,ve.t("Group has been updated."))});a.onSubmitSuccess()}).catch(function(e){_e.error("Error editing user group: "+e);a.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=this.state.detailsFormValues;a=void 0===a?{}:a;var r=a.name,n=a.handle,i=a.purpose,s=a.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o){this.setRequiredFieldsEmpty(true);return false}var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(b["trim"])(r),handle:n,description:i,channels:s,users:l,reason:"onCreateDialogSubmit"}).then(function(e){var a=e.id;t.props.showUserGroupDetails({groupId:a});t.props.addUserGroupIds([a])}).then(function(){t.props.enqueueToast({element:h.a.createElement(T["b"],null,ve.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){_e.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"onSelectedItemsChange",value:function e(t){this.setRequiredFieldsEmpty(!t.length)}},{key:"onPurposeChange",value:function e(t){var a=t.length>ye;this.setState(function(){return{purposeTooLong:a}})}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:ge.members.title,contentLabel:ge.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:ge.members.goButtonText,shouldCloseOnCancel:false,cancelText:ve.t("Back"),onCancel:function e(){t.setDialogStep(ge.details.id)},footerText:ge.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var a=Object(b["find"])(ge,function(e){return e.id===t});return{title:a.title,contentLabel:a.title,goButtonText:a.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:ve.t("Cancel"),shouldCloseOnGo:false,footerText:a.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:n()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:n()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"shouldShowCloseDialogSpeedBump",value:function e(t){if("go"===t||this.state.formStep===ge.members.id)return false;var a=this.formRef.getFormValues();return!Object(b["isEqual"])(this.state.detailsFormValues,a)}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;ge={details:{id:"details",footerText:ve.t("Step 1 of 2"),title:ve.t("Create User Group"),goButtonText:ve.t("Next")},members:{id:"members",footerText:ve.t("Step 2 of 2"),title:ve.t("Add members"),goButtonText:ve.t("Create Group")},edit:{id:"edit",footerText:null,title:ve.t("Edit User Group"),goButtonText:ve.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(b["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return h.a.createElement("div",null,h.a.createElement(ce,n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(a){return t.setUserGroupFormRef(a)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:ye,userGroup:this.props.userGroup})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement(ue["a"],{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===ge.details.id||this.state.formStep===ge.edit.id)return this.renderDetailsForm();if(this.state.formStep===ge.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong;var a=this.state.formStep===ge.details.id||this.state.formStep===ge.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return h.a.createElement(A["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},a,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:ve.t("Keep Editing"),speedBumpContinueButtonText:ve.t("Close"),speedBumpTitleText:ve.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]);return t}(m["PureComponent"]);ke.displayName="UserGroupEditCreateDialog";ke.defaultProps=be;var Oe=function e(t,a){var r=Object(k["e"])(t,a.userGroupId);if(!r)return{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")};return{userGroup:r,userGroupName:Object(w["h"])(r),userGroupHandle:Object(w["f"])(r,{includeAtSign:false}),userGroupPurpose:Object(w["e"])(r),userGroupDefaultChannels:Object(w["d"])(t,r),featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ce={createUserGroup:y["f"],updateUserGroup:y["n"],closeModal:O["closeModal"],enqueueToast:C["enqueueToast"],showUserGroupDetails:S["n"],validate:he,addUserGroupIds:E["addUserGroupIds"]};var Ee=t["a"]=Object(f["connect"])(Oe,Ce)(ke)},1436:function(e,t,a){"use strict";var r=a(17);var n=a(0);var i=a(22);var s=a(837);var o=a(63);var l=a(2);var c=a(25);var u=a(35);var d=a(16);var p=a(28);var m=a(9);var h=a(61);var v=a(331);var f=function e(t){var a=Object(c["b"])(t);var r=Object(d["isRestricted"])(a);var n=Object(m["isFeatureEnabled"])(t,"feature_builder_can_access");if(r)return false;if(!n)return false;return true};var b=function e(t){var a=Object(c["b"])(t);var r=Object(d["isRestricted"])(a);var n=Object(u["d"])(t);var i=Object(v["getCurrentMemberUserGroupMembership"])(t);var s=Object(m["isFeatureEnabled"])(t,"feature_builder_can_access");if(!s)return false;if(!Object(p["isPaidTeam"])(n))return false;var o=Object(p["isEnterpriseTeam"])(n)&&false===Object(h["a"])(t,"workflow_builder_enabled");if(o)return false;var f=Object(h["a"])(t,"who_can_create_workflows");var b=Object(l["get"])(f,"type",[]);var g=Object(l["get"])(f,"subteam",[]);var _=Object(l["get"])(f,"user",[]);if(b.includes("regular")&&!r)return true;if(b.includes("admin")&&Object(d["isAdmin"])(a))return true;if(b.includes("owner")&&Object(d["isOwner"])(a))return true;if(_.includes(a.id))return true;if(Object(l["intersection"])(g,i).length>0)return true;if(0===b.length)return!r;return false};var g=Object(r["b"])("launch workflow builder",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.subPath,n=void 0===r?"":r,l=a.source,c=void 0===l?"":l;var u=t();if(f(u)){var d=Object(i["b"])(u);var p=Object(o["c"])({state:u});var m="/"===n.charAt(0)?n.slice(1):n;p.count(c?"workflow_builder_launched_from_client__"+c:"workflow_builder_launched_from_client");e(Object(s["c"])({pathname:"/workflow-builder/"+d+"/"+m,windowOptions:{height:700,width:1024}}))}});g.meta={name:"launchWorkflowBuilder",key:"actionsLaunchWorkflowBuilderLaunchWorkflowBuilder",description:"launch workflow builder"};g.propTypes={subPath:n["b"].string,source:n["b"].string};var _=t["a"]=g},1457:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(2);var n=a.n(r);var i=a(6);var s=new i["b"]("channel_sidebar");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.displayName,r=e.isShared,i=e.isOrgShared,o=e.isYou,l=e.isMuted,c=e.isSuggested,u=e.hasUnreads,d=e.hasDraft,p=e.isArchived,m=e.unreadCount,h=e.badgeCount,v=e.isSelected,f=e.userActive,b=e.isTyping,g=e.isThread,_=e.canPost,y=void 0===_||_,k=e.featureAnnounceOnly,O=void 0!==k&&k;var C=[v?s.t("selected"):null];if("channel"===t)C.push(r||i?s.t("shared channel"):s.t("channel"));else if("private"===t)C.push(s.t("private channel"));else if("mpim"===t)C.push(s.t("group direct message"));else if("im"===t){C.push(s.t("direct message"));C.push(f?s.t("active"):s.t("away"))}p&&C.push(s.t("archived"));l&&C.push(s.t("muted"));!y&&O&&C.push(s.t("read only",{fallbackHash:"1d8d39a6e91a5d579d831544fb5c2b08d7ea8d5d"}));c&&C.push(s.t("suggested"));u&&m&&!h&&C.push(s.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:m}));h&&C.push(s.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:h}));d&&C.push(s.t("has draft"));b&&C.push(s.t("typing"));var E=function(){if(o)return s.t("{name} (you)",{name:a});if(g&&("channel"===t||"private"===t))return s.t("Thread in {name}",{name:a});if(g&&("mpim"===t||"im"===t))return s.t("Thread with {name}",{name:a});return a}();var S=n.a.join(n.a.filter(C,n.a.identity),", ");return E+" ("+S+")"}},1458:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(38);var s=a(35);var o=a(28);function l(e){var t=Object(i["h"])(e,"all_unreads_sort_order");var a=["alphabetical","priority","oldest","newest"];if(t&&Object(r["includes"])(a,t))return t;return Object(o["isPaidTeam"])(Object(s["d"])(e))?"priority":"alphabetical"}},1459:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(17);var c=a(1284);var u=a(32);var d=a(1998);var p=s.a.lazy(function(){return Promise.resolve().then(a.bind(null,4579))});var m=Object(l["b"])("Opens the snippet dialog",function(e,t,a){var r=a.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(u["a"])()?e(Object(c["a"])({element:s.a.createElement(p,n()({},a,{initialSnippetText:r,initialText:"",resetSnippetText:r,resetChannelId:a.initialChannelId}))})):Object(d["a"])(r,a.fromPrompt)});m.meta={name:"openSnippetDialog",key:"actionsOpenSnippetDialogOpenSnippetDialog",description:"Opens the snippet dialog"};m.propTypes={initialText:o["b"].string,initialChannelId:o["b"].string.isRequired,threadTs:o["b"].string,viewContext:o["b"].string};t["a"]=m},1460:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(2);var o=a(17);var l=a(41);var c=a(61);var u=a(782);var d=a(77);var p=a(20);var m=a(370);var h=a(6);var v=new h["b"]("files");function f(e){var t=e.proceedToNextDialog,a=e.disableFileUploadsPref;var r=v.t("Uploads disabled");var i="";"disable_all"===a&&(i=v.t("At the request of your administrator, file uploads have been disabled on this workspace."));"disable_all_except_images"===a&&(i=v.t("At the request of your administrator, only images can be uploaded to this workspace."));var o=function e(){return Object(s["defer"])(function(){t()})};return n.a.createElement(m["a"],{title:r,onGo:o},n.a.createElement("p",null,i))}f.displayName="FileUploadsDisabledAlert";f.defaultProps={proceedToNextDialog:s["noop"],disableFileUploadsPref:""};var b=f;var g=new h["b"]("file_upload");function _(e){var t=e.proceedToNextDialog,a=e.excludedFiles,r=e.goodFiles;var i=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p="";var h=a.length+r.length;if(a.length){i=[];c="";d="";i=a.map(function(e){return n.a.createElement("li",{key:e.name},n.a.createElement("strong",null,e.name))});if(a.length>1){o=a.length===h?g.t("All files unsupported"):g.t("Some files unsupported");u=g.t("Try uploading a .zip version of these files instead.");c=n.a.createElement("ul",null,i)}else if(1===a.length){o=g.t("File unsupported");u=g.t("Try uploading a .zip version of this file instead.")}r.length>1?d=g.t("(Don\u2019t worry, your other files are next.)"):1===r.length&&(d=g.t("(Don\u2019t worry, your other file is next.)"));l=1===a.length?g.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:n.a.createElement("strong",null,a[0].name)}):a.length===h?g.t("Sorry, none of those file types are supported by Slack."):g.t("Sorry, some of those file types are not supported by Slack.");p=n.a.createElement("div",null,n.a.createElement("p",null,l),c,n.a.createElement("p",null,u),n.a.createElement("p",null,d))}var v=function e(){Object(s["defer"])(function(){t()})};return n.a.createElement(m["a"],{title:o,onGo:v},p)}_.displayName="FileUploadUnsupportedAlert";_.defaultProps={proceedToNextDialog:s["noop"],goodFiles:[],excludedFiles:[]};var y=_;var k=a(925);var O=new h["b"]("file-upload");var C={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function E(e){var t=e.type,a=e.proceedToNextDialog;var r=O.t("File too large");var i="";i=t===C.ALL?O.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):t===C.SINGLE?O.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):O.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])});var o=t===C.MULTIPLE?function(){Object(s["defer"])(function(){a()})}:s["noop"];return n.a.createElement(m["a"],{title:r,onGo:o},n.a.createElement("p",null,i))}E.displayName="FileUploadSizeAlert";E.defaultProps={type:C.SINGLE,proceedToNextDialog:s["noop"]};var S=E;var w=a(144);var I=a(162);var j=new h["b"]("multi_file_upload");var T=Object(o["b"])("renders a toast with error message for uploading too many files",function(e){var t=j.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:p["MAX_FILE_UPLOAD_COUNT"]});var a=n.a.createElement(I["b"],{icon:"warning",iconClassName:"sk_reddish_orange"},n.a.createElement("span",null,t));setTimeout(function(){return e(Object(w["enqueueToast"])({element:a}))},500)});T.meta={name:"renderFileLimitToast",key:"componentsMultiFileUploadUtilityRenderFileLimitToastRenderFileLimitToast",description:"renders a toast with error message for uploading too many files"};var A=T;var N=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.getState,i=t.files;if(!i)return Promise.resolve();var o=Object(s["every"])(i,function(e){return Object(d["isExternalPendingFile"])(e)});return new Promise(function(e){var t=Object(c["a"])(r(),"disable_file_uploads");if("disable_all"===t&&!o){a(Object(l["openModal"])({element:n.a.createElement(b,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e()}}),isStackable:true}));return}if("disable_all_except_images"===t&&!o){var u=Object(s["filter"])(i,function(e){return Object(d["isPendingImageFile"])(e)});if(u.length!==i.length){a(Object(l["openModal"])({element:n.a.createElement(b,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e(u)}}),isStackable:true}));return}}e(i)})};var M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.files;if(!r)return Promise.resolve();return new Promise(function(e){Object(d["validateFiles"])(r,function(t){if(t.excludedFiles.length){a(Object(l["openModal"])({element:n.a.createElement(y,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:function a(){return e(t.goodFiles)}}),isStackable:true}));return}e(t.goodFiles)})})};var P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.files;if(!r)return Promise.resolve();return new Promise(function(e){var t=r.filter(function(e){return Object(s["isString"])(e)||"undefined"===typeof e.size||e.size<=p["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});if(t.length<r.length){if(1===r.length){a(Object(l["openModal"])({element:n.a.createElement(S,{type:C.SINGLE}),isStackable:true}));e();return}if(!t.length){a(Object(l["openModal"])({element:n.a.createElement(S,{type:C.ALL}),isStackable:true}));e();return}a(Object(l["openModal"])({element:n.a.createElement(S,{type:C.MULTIPLE,proceedToNextDialog:function a(){return e(t)}}),isStackable:true}));return}e(t)})};var R=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.getState,n=t.files,i=t.channelId,o=t.threadTs;if(!n)return Promise.resolve();var l=r();var c=Object(u["getPendingFilesforInput"])(l,{channelId:i,threadTs:o})||[];if(c.length+n.length>p["MAX_FILE_UPLOAD_COUNT"]){a(A());var d=p["MAX_FILE_UPLOAD_COUNT"]-c.length;var m=Object(s["take"])(n,d);return Promise.resolve(m)}return Promise.resolve(n)};var x=Object(o["b"])("filters invalid files before they can be uploaded",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.selectedFiles,n=a.channelId,i=a.threadTs;return N({dispatch:e,getState:t,files:r}).then(function(t){return M({dispatch:e,files:t})}).then(function(t){return P({dispatch:e,files:t})}).then(function(a){return R({dispatch:e,getState:t,files:a,channelId:n,threadTs:i})})});x.meta={name:"filterFilesForUpload",key:"actionsFilterFilesForUploadFilterFilesForUpload",description:"filters invalid files before they can be uploaded"};x.propTypes={selectedFiles:i["b"].array.isRequired,channelId:i["b"].string,threadTs:i["b"].string};var D=t["a"]=x},1465:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a(1);var v=a.n(h);var f=a(12);var b=a(13);var g=a.n(b);var _=a(0);var y=a(35);var k=a(304);var O=a(6);var C=a(27);var E=a(385);var S=a(922);var w=a(3531);var I=new O["b"]("files");var j={status:_["b"].oneOf([k["IDLE"],k["UPLOADING"],k["PROCESSING"],k["COMPLETE"],k["CANCELED"]]),fileName:_["b"].string,fileCount:_["b"].number,percentComplete:_["b"].number,cancelable:_["b"].bool,cancelUpload:_["b"].func,isRetry:_["b"].bool,teamId:_["b"].string};var T={fileName:"",fileCount:0,percentComplete:0,status:k["UPLOADING"],cancelable:false,cancelUpload:m["noop"],isRetry:false,teamId:void 0};var A=function(e){p()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=I.t("Processing uploaded file\u2026 complete!");return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},v.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){s()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.cancel=a.cancel.bind(a);a.clearOverrides=a.clearOverrides.bind(a);a.doneProlongingStatus=a.doneProlongingStatus.bind(a);a.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return a}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=[k["COMPLETE"],k["CANCELED"]];this.props.status!==t.status&&Object(m["includes"])(r,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(a.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var a=this.state.statusOverride;return a||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var a=this.state.fileNameOverride;return a||t}},{key:"cancel",value:function e(){var t=this.props.teamId;var a=this.props.cancelUpload;var r=Object(S["a"])(t);a=r.cancelCurrentUpload.bind(r);setTimeout(function(){a()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===k["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderMultiFileUploadComplete",value:function e(){var t=this.props.fileCount;var a=I.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:t});return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},v.a.createElement("div",{className:"p-file_upload_banner__text"},a))}},{key:"renderCanceled",value:function e(){var t=this.props.fileCount;var a=this.getFileName();var r=I.t("Canceling {fileName}\u2026",{fileName:Object(O["q"])(a)});t>1&&(r=I.t("Canceling upload\u2026"));return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},v.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderUploading",value:function e(){var t=this.props,a=t.fileName,r=t.fileCount,n=t.percentComplete,i=t.cancelable,s=t.isRetry;var o=this.getStatus();var l=o===k["PROCESSING"]||n>=99;var c=void 0;if(l)c=I.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:r});else{if(s){c=I.t("Re-uploading {fileName}",{fileName:Object(O["q"])(a)});r>1&&(c=I.t("Re-uploading {fileCount} files",{fileCount:r}))}else{c=I.t("Uploading {fileName}",{fileName:Object(O["q"])(a)});r>1&&(c=I.t("Uploading {fileCount} files",{fileCount:r}))}c+="\u2026 "+n+"%"}var u=g()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":l});var d={width:n+"%"};var p=null;i&&!l&&(p=v.a.createElement(C["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},I.t("cancel")));return[v.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},v.a.createElement("span",{className:u,style:d})),v.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},c),p]}},{key:"render",value:function e(){var t=this.getStatus();var a=this.state.fading;if(t===k["IDLE"])return null;var r=void 0;r=t===k["UPLOADING"]||t===k["PROCESSING"]?this.renderUploading():t===k["COMPLETE"]?this.renderMultiFileUploadComplete():this.renderCanceled();var n=g()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return v.a.createElement("div",{className:n},r)}}]);return t}(h["PureComponent"]);A.displayName="FileUploadBanner";A.defaultProps=T;function N(e){var t=Object(k["getFileUploadState"])(e);var a=Object(y["d"])(e);return n()({},t,{teamId:a.id,cancelUpload:E["a"]})}var M=Object(f["connect"])(N)(A);var P=t["a"]=M},1471:function(e,t,a){"use strict";a.d(t,"d",function(){return o});a.d(t,"b",function(){return l});a.d(t,"a",function(){return c});a.d(t,"e",function(){return d});a.d(t,"c",function(){return p});var r=a(2);var n=a.n(r);var i=a(24);var s=Object(i["b"])("TS.ui.apps_browser.routeAppOpen",n.a.noop);var o=Object(i["b"])("TS.ui.apps_browser.showAppTutorial",n.a.noop);var l=Object(i["b"])("TS.ui.apps_browser.canAppBeAdded",n.a.noop);var c=Object(i["b"])("TS.ui.apps_browser.addAppToChannel",n.a.noop);var u=Object(i["b"])("TS.ui.apps_browser.buildAddAppsTitle",n.a.noop);var d=Object(i["b"])("TS.ui.apps_browser.startAddApps",n.a.noop);var p=Object(i["b"])("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a.noop)},1473:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(135);function n(e){if(!e)return;var t=Object(r["a"])(e);var a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.getTime().toString()}},1474:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(147);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(3);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(2);var _=a.n(g);var y=a(551);var k=a(1435);function O(e){var t={};for(var a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:_.a.get(e[a+1],"key")};return t}var C=h()({},y["a"].propTypes,{stickyItems:b["b"].arrayOf(b["b"].shape({key:b["b"].string,index:b["b"].number})),stickyOffsetTop:b["b"].number,stickyZIndex:b["b"].number});var E=h()({},y["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var S=function(e){p()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.stickyItems=O(e.stickyItems);return a}s()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(a){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,a);this.stickyItems=O(a.stickyItems)}},{key:"renderItem",value:function e(a,r){if(!(a in this.stickyItems))return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,a,r);var n=0===r?-100:this.getTop(a);var i=this.layout.getHeight(a);var s=this.layout.getHeightValidity(a);var o=this.getContentHeight();var l=this.stickyItems[a].next;var c=l?this.getTop(l):o;var d=Math.max(0,o-c);var p=this.state.activeItem===a;var m=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===a;var h=this.state.mouseDownTargetItem===a;var v=this.state.hoveredItem===a;var b=this.props,g=b.getAriaLabelForRow,_=b.isItemAriaExpanded;var y=g&&g(r,{hasFocus:p});var O=_&&_(a,r);var C=true===O?this.props.itemAriaControls:void 0;return f.a.createElement("div",{key:""+a+n+d+this.props.width+this.props.height,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:n,bottom:d}},f.a.createElement(k["a"],{id:a,itemKey:a,height:i,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},role:this.props.itemRole,ariaLabel:y,ariaExpanded:O,ariaControls:C,hasFocus:p,hasFocusWithin:m,isMouseDownOnItem:h,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onTabWithin:this.onItemTabWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,onClick:this.props.onItemClick,tabIndex:this.getListItemTabIndex()},this.props.rowRenderer(r,{hasFocus:p,isHovered:v,isExpanded:O})))}},{key:"renderItems",value:function e(){var a=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var r=this.state.start;var n=_.a.sortedIndexBy(this.props.stickyItems,{index:r},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&a.unshift(this.renderItem(i.key,i.index));return a}}]);return t}(y["a"]);t["a"]=S;S.propTypes=C;S.defaultProps=E},1560:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var r=a(159);var n=a(22);var i=a(35);var s=a(25);var o=a(16);var l=a(28);var c=a(183);var u=function e(t){var a=Object(n["b"])(t);var u=Object(i["j"])(t,a);var d=Object(l["getTeamDisplayName"])(u);var p=Object(o["isRestricted"])(Object(s["b"])(t));var m=Object(r["selectActiveCurrency"])(t);var h=Object(r["selectActiveProductId"])(t);var v={teamName:d,isUserRestricted:p,yearlyPlanCostPerTerm:Object(r["selectCostPerTermForYearlyPlan"])(t),monthlyPlanCostPerTerm:Object(r["selectCostPerTermForMonthlyPlan"])(t),availableCurrencies:Object(r["selectAvailableCurrencies"])(t),planCostPerTerm:Object(r["selectActivePlanCostPerTerm"])(t),planIsYearly:Object(r["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(r["selectActivePlanMonthsCount"])(t),planCurrency:m,numBillableMembers:Object(r["selectBillableActiveUsers"])(t),numInactiveMembers:Object(r["selectInactiveUsers"])(t),isZeroActiveMembers:Object(r["isZeroRealActiveUsers"])(t),totalMembers:Object(r["selectTotalUsers"])(t),paidSeats:Object(r["selectPaidSeats"])(t),tax:Object(r["selectTax"])(t),teamCredits:Object(r["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(r["selectCurrentTeamCredits"])(t),creditsApplied:Object(r["selectCreditsApplied"])(t),totalCost:Object(r["selectSubtotal"])(t),totalCostWithTax:Object(r["selectTotalRecurring"])(t),totalRecurringTax:Object(r["selectTotalRecurringTax"])(t),isCostValid:Object(r["isCostValid"])(t),didCostFetchFail:Object(r["isAPIError"])(t),isPlansAndCostDataLoaded:Object(r["selectIsPlansAndCostDataLoaded"])(t),activeProductId:h,discount:Object(r["selectDiscount"])(t),undiscountedSubtotal:Object(r["selectUndiscountedSubtotal"])(t),canViewEnterpriseSelect:Object(c["selectCanViewEnterpriseSelect"])(t)};return v}},1574:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(109);var o=a(6);var l=a(833);var c=new o["b"]("pricing_calculator");var u={planIsYearly:i["b"].bool,formattedPlanCost:i["b"].string,billedMembers:i["b"].number,numInactiveMembers:i["b"].number,isInvoice:i["b"].bool};var d={planIsYearly:true,formattedPlanCost:"",billedMembers:0,numInactiveMembers:0,isInvoice:false};function p(e){var t=e.planIsYearly,a=e.billedMembers,r=e.numInactiveMembers,i=e.formattedPlanCost,s=e.isInvoice;var o=n.a.createElement(l["a"],{type:"times-small",className:"sk_foreground_high"});var u=r&&!s?c.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:a}):c.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:a});var d=t?c.t("1 year"):c.t("1 month");return n.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},n.a.createElement("div",{className:"no_wrap"},i),o,n.a.createElement("div",{className:"no_wrap"},u),o,n.a.createElement("div",{className:"no_wrap"},d))}p.displayName="SubtotalCalculation";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},1576:function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(40);var s=a.n(i);var o=a(6);var l=a(345);var c=a(874);var u=new o["b"]("enterprise_dashboard");var d={getRelativeTimestamp:r["b"].func.isRequired};function p(e){var t=e.timestamp,a=e.getRelativeTimestamp;if(0===t)return u.t("Never");var r=s()();var n=s.a.unix(t);var i=r.diff(n,"h");if(i>23)return Object(l["a"])(n,"{date} at {time}");var o=r.diff(n,"m");var c=void 0;c=0===o?u.t("a few seconds ago"):o>59?u.t("{hours, plural, =1 {1 hour} other {# hours}} ago",{hours:i}):u.t("{minutes, plural, =1 {1 minute} other {# minutes}} ago",{minutes:o});return a(t)+" ("+c+")"}p.propTypes=d;var m=function e(t){return{getRelativeTimestamp:function e(a){return 0===a?"":Object(c["a"])(t,a,{uncapitalized:false})}}};t["a"]=Object(n["connect"])(m)(p)},1577:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(109);var o=a(13);var l=a.n(o);var c=a(1787);var u=a.n(c);var d={children:r["b"].node,className:r["b"].string,ariaLabel:r["b"].string};var p={children:null,className:null,ariaLabel:null};var m=function e(t){var a=t.className,r=t.children,n=t.ariaLabel;return i.a.createElement("div",{className:l()("c-message_actions__container",a),role:"group","aria-label":n},r)};m.displayName="MessageActionContainer";m.defaultProps=p;t["a"]=Object(s["pure"])(m)},1578:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(13);var g=a.n(b);var _=a(2);var y=a.n(_);var k=a(62);var O=a(14);var C=a(63);var E=a(98);var S=a(1065);var w=a(1067);var I=a(1467);var j="IMPROVED_SEARCH";var T={file:k["a"].File().isRequired,fileFromRedux:k["a"].File().isRequired,index:v["b"].number,clogLinkClick:v["b"].func,className:v["b"].string,fullWidth:v["b"].bool,onClick:v["b"].func,logger:v["b"].object,telemeter:v["b"].object};var A={index:null,clogLinkClick:_["noop"],className:null,fullWidth:false,onClick:_["noop"],logger:{error:_["noop"]},telemeter:C["d"]};var N=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_files_result_file_render_error");this.props.logger.error(j,"Error caught by SearchFile "+a.componentStack)}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.fileFromRedux,i=t.clogLinkClick,s=t.fullWidth;var o=g()("p-search_file",this.props.className);var l=r&&r.title;var c=r&&r.name;var u=n()({},r,{title:a.search_title||a.title||l,name:a.search_name||a.name||c});return h.a.createElement(S["a"],{file:u,className:o,fullWidth:s,clogLinkClick:i,"data-qa":"search_result_file"},h.a.createElement(w["a"],{file:u,onClick:this.onClick},h.a.createElement(I["a"],{file:u,excludeTime:true})))}}]);return t}(m["PureComponent"]);N.displayName="SearchFile";N.defaultProps=A;var M=function e(t,a){var r=a.file;return{fileFromRedux:r?Object(E["getFileById"])(t,r.id):null,logger:Object(O["a"])({state:t}),telemeter:Object(C["c"])({state:t})}};t["a"]=Object(f["connect"])(M)(N)},1583:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(12);var u=a(0);var d=a(35);var p=a(483);var m=a(111);var h=a(320);var v=a(13);var f=a.n(v);var b=a(59);var g=a(28);var _=a(1285);var y=a(451);var k=[230,132,102,88,68,44,34];var O={className:u["b"].string,invert:u["b"].bool,id:u["b"].string.isRequired,size:u["b"].number.isRequired,team:u["b"].object};var C={className:void 0,invert:false,team:void 0};function E(e){var t=e.size,a=e.team;var r=Object(g["getTeamIcon"])(a);if(!r||r.image_default)return null;var n=2*t;var i=Object(y["a"])(n,k);return r["image_"+i]}function S(e){var t=Object(g["getTeamDisplayName"])(e);return Object(g["getTeamInitials"])(t,{limit:2})}function w(e){var t=e.className,a=e.id,r=e.invert,n=e.size,i=e.team;var s=Object(b["c"])(i);var o=Object(b["d"])(i);if(s||o)return l.a.createElement(_["a"],{className:f()(t,"c-team_entity__icon"),isNonExistent:s,size:n,invert:r,"data-team-id":a});var c=E({size:n,team:i});var u=!c&&S(i);return l.a.createElement("span",{"aria-hidden":"true",className:f()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!c}),style:{backgroundImage:c&&"url("+c+")",fontSize:Math.round(n/1.8)+"px",height:n,lineHeight:n+"px",width:n},"data-team-id":a},u)}w.displayName="TeamIcon";w.defaultProps=C;var I={BaseTeamIcon:w};var j=function e(t,a){var r=a.team||Object(d["j"])(t,a.id);return{team:r,id:r.id}};var T=Object(c["connect"])(j)(w);var A=a(383);var N=a(2306);var M={className:u["b"].string,id:u["b"].string.isRequired,invert:u["b"].bool,team:u["b"].object.isRequired};var P={className:void 0,invert:false};function R(e){var t=e.className,a=e.id,r=e.invert,i=e.team;var s=r?m["c"].highlightDark:null;return l.a.createElement(h["d"],{avatar:function e(t){return l.a.createElement(T,n()({},t,{team:i,size:m["a"].small,invert:r}))},className:t,size:"small",style:s,text:l.a.createElement(A["a"],{team:i,invert:r}),"data-team-id":a})}R.displayName="SmallTeamEntity";R.defaultProps=P;var x=function e(t,a){var r=a.team||Object(d["j"])(t,a.id);return{team:r,id:r.id}};var D=Object(c["connect"])(x)(R);var F={className:u["b"].string,id:u["b"].string.isRequired,isActive:u["b"].bool,isDisabled:u["b"].bool,secondaryContent:u["b"].node,team:u["b"].object.isRequired};var L={className:void 0,isActive:false,isDisabled:false,secondaryContent:void 0};function B(e){var t=e.className,a=e.id,r=e.isActive,i=e.isDisabled,o=e.secondaryContent,c=e.team,u=s()(e,["className","id","isActive","isDisabled","secondaryContent","team"]);var d=void 0;r?d=i?m["c"].highlightDim:m["c"].highlightDark:i&&(d=m["c"].dim);return l.a.createElement(p["a"],{className:t,size:"small",style:d,primaryContent:l.a.createElement(D,n()({},u,{team:c,invert:d===m["c"].highlightDark})),secondaryContent:o,"data-team-id":a})}B.displayName="SmallTeamListEntity";B.defaultProps=L;var U=function e(t,a){var r=a.team||Object(d["j"])(t,a.id);return{team:r,id:r.id}};var q=t["a"]=Object(c["connect"])(U)(B)},1585:function(e,t,a){"use strict";var r=a(37);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(2);var y=a(239);var k=a(820);var O=a(423);var C=a(9);var E=a(25);var S=a(27);var w=a(23);var I=a(6);var j=a(32);var T=a(211);var A=new I["b"]("workspace_directory");var N={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var M={team:v["b"].shape({id:v["b"].string,description:v["b"].string,discoverable:v["b"].string,name:v["b"].string,domain:v["b"].string,is_member:v["b"].bool,date_requested_join:v["b"].oneOfType([v["b"].string,v["b"].number]),icon:v["b"].object,is_inactive:v["b"].bool,user_counts:v["b"].object}).isRequired,buttonContext:v["b"].oneOf(Object(_["values"])(T["a"])),featureZeroWorkspaceOnboarding:v["b"].bool.isRequired,customClasses:v["b"].string,onWorkspaceLaunch:v["b"].func,onDefaultButtonClick:v["b"].func,doLaunchInNewTab:v["b"].bool,displayDirectoryInModal:v["b"].bool,onActionReject:v["b"].func,onActionResolve:v["b"].func,anchorPage:v["b"].string,doUpsertJoin:v["b"].bool,callJoinWorkspace:v["b"].func,callRequestToJoinWorkspace:v["b"].func,size:v["b"].oneOf(["medium","large"])};var P={buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:_["noop"],onDefaultButtonClick:_["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:_["noop"],callRequestToJoinWorkspace:_["noop"],size:"large",onActionReject:_["noop"],onActionResolve:_["noop"],anchorPage:void 0,doUpsertJoin:false};var R=function e(t){var a=t.displayDirectoryInModal;var r="primary";var n="join";var i=a?A.t("Join and Open"):A.t("Join and Launch Slack");return{text:i,type:r,"data-qa-ws-directory-button-type":r,"data-qa-ws-directory-button-text":n,"data-qa":n}};var x=function e(){var t="primary";var a="request_to_join";return{text:A.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var D=function e(){var t="primary";var a="request_sent";return{text:A.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a,disabled:true}};var F=function e(t){var a=t.displayDirectoryInModal;var r="primary";var n="launch";var i=a?A.t("Open"):A.t("Launch in Slack");return{text:i,type:r,"data-qa-ws-directory-button-type":r,"data-qa-ws-directory-button-text":n,"data-qa":n}};var L=function e(){var t="outline";var a="default";return{type:t,text:A.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var B=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={loading:false};a.buttonType=null;a.onClick=a.onClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.windowOpener;var n=this.props,i=n.team,o=n.onActionReject,l=n.onActionResolve,c=n.anchorPage,u=n.doUpsertJoin;Object(j["a"])()&&Object(k["d"])(false);return this.props.callJoinWorkspace({teamId:i.id,anchorPage:c,doUpsertJoin:u}).then(function(){var e={};u&&(e.workspace=s()({},i,{is_member:true}));l(e);Object(j["a"])()&&!Object(O["b"])()&&Object(k["d"])(true)}).then(function(){return t.props.onWorkspaceLaunch(r)}).catch(function(e){Object(j["a"])()&&Object(k["d"])(true);if(r){t.setLoading(false);r.close()}o({node:b.a.createElement("span",null,A.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var a=this.props,r=a.team,n=a.onActionReject,i=a.onActionResolve,o=a.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:r.id,anchorPage:o}).then(function(){i({node:b.a.createElement("div",{className:"display_flex"},b.a.createElement(w["b"],{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),b.a.createElement("span",null,A.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:s()({},r,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){n({node:b.a.createElement("span",null,A.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var a=this.props.displayDirectoryInModal;switch(t){case N.launch:return F({displayDirectoryInModal:a});case N.request:return x();case N.join:return R({displayDirectoryInModal:a});case N.request_sent:return D();case N.default:return L();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var a=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:a})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team,i=t.buttonContext,o=t.customClasses,l=t.size;var c=this.state.loading;var u=H(r,{context:i,featureZeroWorkspaceOnboarding:a});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(_["isEmpty"])(d))return null;var p=r.id;var m=d.text,h=n()(d,["text"]);var v=h.disabled||c;return b.a.createElement(S["b"],s()({},h,{className:o,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":true,loading:c,disabled:v,size:l}),m)}}]);return t}(f["Component"]);B.displayName="WorkspaceDirectoryButton";B.defaultProps=P;var U=function e(t,a){var r=a.team,n=a.onActionResolve,i=a.anchorPage,s=a.doLaunchInNewTab,o=a.channelRedirect,l=a.postLaunchAction,c=a.userIdFromURL;var u=Object(E["b"])(t);return{featureZeroWorkspaceOnboarding:Object(C["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(C["isClientApp"])(t),onWorkspaceLaunch:function e(a){return Object(T["i"])(t,{team:r,user:u,onActionResolve:n,anchorPage:i,doLaunchInNewTab:s,windowOpener:a,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}};var q={callJoinWorkspace:y["d"],callRequestToJoinWorkspace:y["f"]};var W=Object(g["connect"])(U,q)(B);function H(e,t){var a=t.context,r=void 0===a?T["a"].smallCard:a,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=e.is_member,o=e.date_requested_join,l=e.is_assigned,c=e.discoverable;if(s)return N.launch;if(r!==T["a"].smallCard){if(l)return N.join;switch(c){case"open":return N.join;case"closed":if(!o)return N.request;if(r===T["a"].largeCard)return N.request_sent;break;case"unlisted":break;default:}return null}return N.default}var G=t["a"]=W},1586:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(2);var g=a(9);var _=a(1585);var y=a(6);var k=a(450);var O=a(211);var C=a(2333);var E=new y["b"]("workspace_directory");var S={large:"large",small:"small"};var w={large:64,small:48};var I={team:d["b"].shape({id:d["b"].string,description:d["b"].string,discoverable:d["b"].string,name:d["b"].string,domain:d["b"].string,is_member:d["b"].bool,date_requested_join:d["b"].oneOfType([d["b"].string,d["b"].number]),icon:d["b"].object,is_inactive:d["b"].bool,user_counts:d["b"].object}).isRequired,size:d["b"].oneOf(Object(b["values"])(S)),featureZeroWorkspaceOnboarding:d["b"].bool.isRequired,className:d["b"].string,onActionReject:d["b"].func,onActionResolve:d["b"].func,anchorPage:d["b"].string,openDialog:d["b"].func,doLaunchInNewTab:d["b"].bool};var j={size:S.large,className:"",onActionResolve:b["noop"],onActionReject:b["noop"],anchorPage:"",openDialog:b["noop"],doLaunchInNewTab:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCardClick=a.onCardClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);a.onResize=a.onResize.bind(a);a.openDialog=a.openDialog.bind(a);a.state={isMobileView:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(O["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(O["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===S.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===S.large}},{key:"openDialog",value:function e(){var t=this.props,a=t.team,e=t.openDialog;e({team:a})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var a=this.isLargeVariationCard()&&!this.state.isMobileView?w[S.large]:w[S.small];return m.a.createElement("div",{className:"display_flex"},m.a.createElement(k["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:a,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return m.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team;if(!a)return null;var n=this.state.isMobileView;var i=r.date_requested_join,s=r.discoverable,o=r.domain,l=r.user_counts;l=void 0===l?{}:l;var c=l.active_members,u=void 0===c?0:c;var d=E.t("{activeMembers} active members",{activeMembers:u?Object(y["n"])(u):0});var p=void 0;p=this.isLargeVariationCard()&&!n?m.a.createElement("div",null,m.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),m.a.createElement("span",{className:"overflow_ellipsis"},o+".slack.com")):this.isSmallVariationCard()&&"closed"===s&&i?m.a.createElement("span",null,E.t("Awaiting admin approval")):m.a.createElement("span",{className:"overflow_ellipsis"},d);return m.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},p)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team;if(!a||this.isSmallVariationCard())return null;var n=Object(O["f"])(r,{context:"largeCard",featureZeroWorkspaceOnboarding:a});if(!n)return null;return m.a.createElement("div",{className:"p-workspace_directory_card__status"},n)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return m.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.team,r=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab;var l=this.isLargeVariationCard()?"large":"medium";return m.a.createElement(_["a"],{team:a,buttonContext:r+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:l})}},{key:"render",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.size,n=t.className;if(!a)return null;var i=this.props.team.id;var s=f()("p-workspace_directory_card",n,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return m.a.createElement("div",{className:s,onClick:this.onCardClick,"data-workspace-id":i,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":r,role:"presentation"},m.a.createElement("div",{className:"display_flex flex_direction_column"},m.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),m.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(p["Component"]);T.displayName="WorkspaceDirectoryCard";T.defaultProps=j;var A=function e(t){return{featureZeroWorkspaceOnboarding:Object(g["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var N={};var M=Object(h["connect"])(A)(T);var P=t["a"]=M},1591:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(6);var o=a(16);var l=a(280);var c=a(44);var u=a(1598);var d=a(3101);var p=a.n(d);var m=new s["b"]("member_profile");var h={className:i["b"].string,member:i["b"].object,canInteract:i["b"].bool,onClick:i["b"].func};var v={className:void 0,member:void 0,canInteract:true,onClick:void 0};function f(e){var t=e.className,a=e.member,r=e.canInteract,i=e.onClick;var s=r&&!Object(o["isDeleted"])(a);var d=n.a.createElement(n.a.Fragment,null,Object(o["getMemberRealName"])(a),s&&n.a.createElement(l["a"],{className:"p-member_profile_name__presence",memberId:a.id}));var p=Object(o["isSlackbot"])(a)?m.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(o["getMemberTitle"])(a);return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-member_profile_name__title"},i?n.a.createElement(c["a"],{className:"p-member_profile_name__link",onClick:i},d):d),Object(u["a"])(p)&&n.a.createElement("span",{className:"p-member_profile_name__subtitle"},p))}f.displayName="MemberProfileName";f.defaultProps=v;t["a"]=f},1594:function(e,t,a){"use strict";a.d(t,"b",function(){return c});a.d(t,"a",function(){return u});var r=a(0);var n=a(34);var i=a(30);var s=a(14);var o=a(2);var l=a.n(o);var c=Object(i["a"])("Get Audit Logs",function(e,t,a){var r=a.limit,i=a.action,l=a.actor,c=a.entity,u=a.reason,d=a.cursor,p=a.oldest,m=a.latest;var h=Object(o["omitBy"])({limit:r,action:i,actor:l,entity:c,cursor:d,oldest:p,latest:m},function(e){return Object(o["isUndefined"])(e)||Object(o["isNull"])(e)});return e(Object(n["a"])({method:"audit.logs",args:h,reason:u})).catch(function(e){var a="failed to get audit logs";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});c.meta={name:"getAuditLogs",key:"fetchersAuditLogsApiGetAuditLogs",description:"Get Audit Logs"};c.propTypes={reason:r["b"].string,limit:r["b"].number};var u=Object(i["a"])("Get Audit Log Actions",function(e,t,a){var r=a.limit,i=void 0===r?999:r,o=a.reason;return e(Object(n["a"])({method:"audit.actions",args:{limit:i},reason:o})).catch(function(e){var a="failed to get audit log actions";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});u.meta={name:"getAuditLogActions",key:"fetchersAuditLogsApiGetAuditLogActions",description:"Get Audit Log Actions"};u.propTypes={reason:r["b"].string,limit:r["b"].number}},1598:function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e){return!!(e&&"-"!==e)}},161:function(e,t,a){"use strict";var r=a(12);var n=a(855);var i=a(1875);var s=function e(t){return{isScreenReaderEnabled:Object(n["isScreenReaderEnabled"])(t)}};t["a"]=Object(r["connect"])(s)(i["a"])},1649:function(e,t,a){(function(t){e.exports=t["EXIF"]=a(2342)}).call(this,a(71))},1658:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a(1);var n=a.n(r);var i=a(176);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=Object(r["useRef"])();var n=Object(r["useRef"])();var s=Object(r["useRef"])();if(!Object(i["a"])(a.current,t)){a.current=t;n.current=e;n.current()}Object(r["useEffect"])(function(){function e(){var t=60-(new Date).getSeconds();t<5&&(t=5);s.current=setTimeout(function(){n.current();e()},1e3*t)}e();return function(){clearTimeout(s.current)}},[])}},1659:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a.n(v);var b=a(13);var g=a.n(b);var _=a(103);var y=a(97);var k=a(648);var O=a(459);var C=a(420);var E={flexName:m["b"].string,flexParams:m["b"].arrayOf(m["b"].string),flexOrigin:m["b"].string,flexOriginId:m["b"].string,previewFile:m["b"].func,showUserGroupList:m["b"].func,toggleActivityFlexpane:m["b"].func,showMemberDirectory:m["b"].func,showDetails:m["b"].func,showStarredItemsList:m["b"].func,showMemberProfile:m["b"].func,showFileList:m["b"].func,size:m["b"].oneOf(["large","medium"]),className:m["b"].string};var S={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:v["noop"],showUserGroupList:v["noop"],toggleActivityFlexpane:v["noop"],showMemberDirectory:v["noop"],showDetails:v["noop"],showStarredItemsList:v["noop"],showMemberProfile:v["noop"],showFileList:v["noop"],size:"large",className:void 0};var w=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.getOrigin=a.getOrigin.bind(a);a.openOrigin=a.openOrigin.bind(a);return a}s()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName;if(a)return this.openOrigin();switch(r){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName,n=t.flexParams;var i=n&&n[0];if(a)return a;switch(r){case"files":return Object(k["a"])(i)?"files":null;case"team":case"groups":return Object(O["a"])(i)?"groups":null;case"user_groups":return Object(O["a"])(i)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexOriginId;switch(a){case"member_preview":return this.props.showMemberProfile({memberId:r});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:r});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(k["a"])(r)?this.props.previewFile({fileId:r}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var a=this.props,r=a.size,n=a.className;var i="chevron-"+r+"-left";return p.a.createElement(C["a"],{className:g()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:i,onClick:this.onClick})}}]);return t}(d["Component"]);w.displayName="FlexBack";w.defaultProps=S;var I=function e(t,a){var r=a.flexOrigin;return{flexName:Object(_["i"])(t),flexParams:Object(_["e"])(t),flexOrigin:r||Object(_["c"])(t),flexOriginId:Object(_["d"])(t)}};var j={previewFile:y["c"],showUserGroupList:y["o"],toggleActivityFlexpane:y["q"],showMemberDirectory:y["i"],showDetails:y["e"],showStarredItemsList:y["k"],showMemberProfile:y["j"],showFileList:y["g"]};t["a"]=Object(h["connect"])(I,j)(w)},166:function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"a",function(){return i});var r=a(24);var n=Object(r["b"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(r["b"])("TS.enterprise.actions.actions",function(){return null})},1668:function(e,t,a){"use strict";var r=a(48);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(45);var c=a(0);var u=a(1969);var d=a(548);var p=a(9);var m=a(82);var h=a(301);var v=a(105);var f=a(44);var b=a(169);var g=a(33);var _=a(6);var y=a(32);var k=a(131);var O=a(861);var C=a(3533);var E=a.n(C);var S=new _["b"]("ms");var w=6e4;var I=1e4;var j={currentThreadKey:c["b"].string,featureSonicDegradedBanner:c["b"].bool.isRequired,primaryView:c["b"].string.isRequired,reconnectImmediately:c["b"].func.isRequired,requestOfflineCounts:c["b"].func.isRequired,requestOfflineHistory:c["b"].func.isRequired};var T={currentThreadKey:void 0};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.currentThreadKey,a=e.featureSonicDegradedBanner,r=e.primaryView,o=e.reconnectImmediately,c=e.requestOfflineCounts,u=e.requestOfflineHistory;var d=Object(i["useRef"])();var p=Object(i["useRef"])();var m=Object(i["useState"])(),h=n()(m,2),_=h[0],C=h[1];var E=Object(i["useState"])(false),j=n()(E,2),T=j[0],A=j[1];Object(i["useEffect"])(function(){N();var e=setInterval(M,w);return function(){clearInterval(e);clearTimeout(p.current)}},[]);function N(){d.current=Date.now()}function M(){C(Object(b["q"])(d.current/1e3))}function P(){if(!a)return null;if(l["isDesktop"]){if(_)return S.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:_});return S.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages")}if(Object(g["isMac"])()){if(_)return S.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:_});return S.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages")}if(_)return S.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:_});return S.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages")}function R(){A(true);p.current=setTimeout(function(){A(false)},I)}function x(){var e=[];(Object(k["a"])(r)||r===O["a"].allThreads)&&e.push(u({channelId:r}));if(t){var a=Object(v["decodeThreadKey"])(t),n=a.channelId,i=a.threadTs;e.push(u({channelId:n,threadTs:i}))}e.push(c());o();return Promise.all(e)}function D(e){e&&e.preventDefault&&e.preventDefault();R();x().then(function(){N();C()})}function F(e){var t=e.tag,a=e.text;if("a"===t)return s.a.createElement(f["a"],{className:"p-message_pane__degraded_banner__reload_cta",onClick:D,"data-qa":"connecting_banner_cta"},a);return s.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},a)}if(!a||!Object(y["a"])()||T)return null;var L=void 0;L=_?S.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:_},F):S.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,F);return s.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},L,s.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},P()))}A.displayName="DegradedBanner";A.defaultProps=T;var N=function e(t){return{currentThreadKey:Object(v["getCurrentThreadKey"])(t),featureSonicDegradedBanner:Object(p["isFeatureEnabled"])(t,"feature_sonic_degraded_banner"),primaryView:Object(m["a"])(t)}};var M=function e(t){return{reconnectImmediately:function e(){return t(h["reconnectImmediately"].apply(void 0,arguments))},requestOfflineCounts:function e(){return t(u["a"].apply(void 0,arguments))},requestOfflineHistory:function e(){return t(d["a"].apply(void 0,arguments))}}};t["a"]=Object(o["connect"])(N,M)(A);var P={TIME_AGO_MESSAGE_INTERVAL_MS:w,HIDE_ON_RECONNECT_DURATION_MS:I}},1669:function(e,t,a){"use strict";var r=a(4532);t["a"]=r["a"]},1670:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(109);var o=a(13);var l=a.n(o);var c=a(6);var u=new c["b"]("messages");var d={ghost:r["b"].bool};var p={ghost:false};function m(e){var t=e.ghost;return i.a.createElement("div",{className:l()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},i.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),i.a.createElement("span",{className:"c-message_list__unread_divider__label"},u.t("new messages")))}m.displayName="UnreadDivider";m.defaultProps=p;t["a"]=Object(s["pure"])(m)},1671:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(42);var d=a(603);var p={msg:c["b"].object.isRequired};function m(e){var t=e.msg,a=s()(e,["msg"]);return l.a.createElement(d["a"],n()({msg:t},a,{inline:Object(u["isRichTextMessage"])(t)}))}m.displayName="CompactBlocks";t["a"]=m},1672:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a.n(v);var b=a(11);var g=a(6);var _=a(21);var y=a(2071);var k=a(91);var O=a(4782);var C=new g["b"]("msg_edit");var E={ts:m["b"].string.isRequired,channelId:m["b"].string.isRequired,channelType:m["b"].string,removeMessage:m["b"].func};var S={channelType:void 0,removeMessage:v["noop"]};var w=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.removeMessage;n({channelId:r,ts:a,broadcastDelete:true}).catch(v["noop"])}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.channelType;var i=void 0;var s=void 0;if("channel"===n){i=C.t("Remove from channel");s=C.t("Are you sure you want to remove this message from the channel?")}else{i=C.t("Remove from conversation");s=C.t("Are you sure you want to remove this message from the conversation?")}return p.a.createElement(k["a"],{title:i,goButtonText:C.t("Remove message"),onGo:this.onGo},p.a.createElement("div",{className:"margin_bottom_100"},s,C.t("The original reply will still be visible in its thread.")),p.a.createElement(O["a"],{ts:a,channelId:r,isStandalone:true}))}}]);return t}(d["PureComponent"]);w.displayName="BaseRemoveBroadcastDialog";w.defaultProps=S;var I=function e(t,a){var r=a.channelId;var n=Object(_["e"])(t,r);var i=Object(b["getChannelType"])(n);return{channelType:i}};var j={removeMessage:y["a"]};var T=Object(h["connect"])(I,j)(w);T.propTypes={channelId:m["b"].string.isRequired};t["a"]=T},1674:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a.n(v);var b=a(62);var g=a(300);var _=a(20);var y=a(73);var k=a(42);var O=a(9);var C=a(98);var E=a(6);var S=a(2071);var w=a(91);var I=a(4782);var j=a(155);var T=a(41);var A=new E["b"]("msg_edit");var N={ts:m["b"].string.isRequired,channelId:m["b"].string.isRequired,messageExists:m["b"].bool,subtype:m["b"].string,removeMessage:m["b"].func,hasFile:m["b"].bool,fileMode:m["b"].string,rollup:b["a"].Rollup(),useBulkDelete:m["b"].bool,closeModal:m["b"].func};var M={messageExists:true,removeMessage:v["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false,closeModal:v["noop"]};var P=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"componentDidMount",value:function e(){this.maybeCloseModal()}},{key:"componentDidUpdate",value:function e(){this.maybeCloseModal()}},{key:"onGo",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.removeMessage,i=t.useBulkDelete,s=t.rollup;var o=i?Object(v["reduce"])(s,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort();n({channelId:r,ts:a,rollupTimestamps:i&&o?o:[]}).catch(v["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var a=this.getFileLabel();if("file_upload"===t){if("file"===a)return A.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===a)return A.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===a)return A.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===a)return A.t("Note that deleting this message will not unshare the file.");if("snippet"===a)return A.t("Note that deleting this message will not unshare the snippet.");if("post"===a)return A.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return A.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,a=t.hasFile,r=t.fileMode;if(!a)return null;if("snippet"===r)return"snippet";if("post"===r)return"post";return"file"}},{key:"maybeCloseModal",value:function e(){this.props.messageExists||this.props.closeModal()}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.rollup,i=t.useBulkDelete,s=t.messageExists;if(!s)return null;var o=this.getBodyText();return p.a.createElement(g["a"],{id:_["MESSAGE_CONTAINERS"].DELETE_MSG_DIALOG},p.a.createElement(w["a"],{title:A.t("Delete message"),goButtonText:A.t("Delete"),goButtonType:"danger",onGo:this.onGo},A.t("Are you sure you want to delete this message? This cannot be undone."),o&&p.a.createElement("div",{className:"margin_top_50"},o),p.a.createElement("div",{className:"margin_top_100"},p.a.createElement(I["a"],{ts:a,channelId:r,rollup:i&&n?n:null,blocksContainerContext:j["a"].delete_dialog,isStandalone:true}))))}}]);return t}(d["PureComponent"]);P.displayName="BaseDeleteMessageDialog";P.defaultProps=M;var R=function e(t,a){var r=a.channelId,n=a.ts,i=a.rollup;var s=Object(O["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var o=Object(y["a"])(t,r,n);if(!o)return{messageExists:false};var l=o.files;var c=Object(C["getFileById"])(t,Object(v["first"])(l));var u=false;var d=void 0;if(c){u=true;d=c.mode}var p=!!(s&&i);return{messageExists:true,hasFile:u,fileMode:d,subtype:Object(k["getMessageSubtype"])(o),rollup:i,useBulkDelete:p}};var x={removeMessage:function e(){return S["a"].apply(void 0,arguments)},closeModal:function e(){return T["closeModal"].apply(void 0,arguments)}};var D=Object(h["connect"])(R,x)(P);D.propTypes={channelId:m["b"].string.isRequired,ts:m["b"].string.isRequired};t["a"]=D},1675:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(1);var n=a.n(r);var i=a(12);var s=a(98);var o=function e(t,a){var r=a.fileId;return{file:Object(s["getFileById"])(t,r)}};function l(e){return Object(i["connect"])(o)(function(t){if(!t||!t.file)return null;return n.a.createElement(e,t)})}},1676:function(e,t,a){"use strict";var r=a(26);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(35);var y=a(9);var k=a(61);var O=a(168);var C=a(6);var E=a(549);var S=a(23);var w=a(3660);var I=a.n(w);var j=new C["b"]("files");var T=new C["b"]("search");var A={filetype:b["b"].string,onChange:b["b"].func,featureRemoteFilesApi:b["b"].bool,featureDocs:b["b"].bool,showEmail:b["b"].bool};var N={filetype:"",onChange:m["noop"],featureRemoteFilesApi:false,featureDocs:false,showEmail:false};var M=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.labelId="file_type_select_"+Object(O["d"])();a.state={label:null};return a}l()(t,[{key:"onChange",value:function e(t,a,r){this.setState(function(){return{label:a}});this.props.onChange(t,a,r)}},{key:"render",value:function e(){var t=f.a.createElement(v["Fragment"],null,j.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"offscreen",id:this.labelId},T.t("File type")," ",f.a.createElement("span",null,"- ",this.state.label?this.state.label:t)),f.a.createElement(E["d"],{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:t,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:Infinity,useFilteredInput:false,useFullWidthOptions:true,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"create-post"}),j.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:j.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:this.props.featureDocs?"docs":"posts"},{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"create-snippet"}),j.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:j.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}].concat(n()(this.props.showEmail?[{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"envelope-o"}),j.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:j.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"image"}),j.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:j.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"play"}),j.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:j.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"book"}),j.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:j.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"file"}),j.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:j.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"}],n()(this.props.featureRemoteFilesApi?[{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"file"}),j.t("Presentations")),labelText:j.t("Presentations"),value:"presentations"},{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"file"}),j.t("Documents")),labelText:j.t("Documents"),value:"documents"}]:[]),[{label:f.a.createElement(v["Fragment"],null,f.a.createElement(S["b"],{type:"google-drive"}),j.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:j.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}])}))}}]);return t}(v["PureComponent"]);M.displayName="FileTypeSelect";M.defaultProps=N;t["a"]=Object(g["connect"])(function(e){return{featureDocs:Object(y["isFeatureEnabled"])(e,"feature_docs"),featureRemoteFilesApi:Object(y["isFeatureEnabled"])(e,"feature_remote_files_api"),showEmail:!!Object(_["d"])(e).plan&&!Object(k["a"])(e,"disable_email_ingestion")}})(M)},1677:function(e,t,a){"use strict";var r=a(17);var n=a(1058);var i=a(182);var s=a(104);var o=a(1141);var l=a(755);var c=a(243);var u=a(202);var d=a(1884);var p=a(410);var m=Object(r["b"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var a=t();e(Object(n["a"])({textyString:"",fetchAutocompleteSuggestions:true}));e(Object(o["a"])({interfaceMode:l["a"].EDIT}));e(Object(u["resetEditableRequest"])());e(Object(s["k"])());e(Object(d["a"])());e(Object(s["c"])());e(Object(c["resetSearchAutocomplete"])());e(Object(s["d"])());if(!Object(i["t"])(a)){e(Object(p["endSearchSession"])());var r=Object(i["r"])(a);if(r){clearTimeout(r);e(Object(s["G"])({sessionTimeoutId:null}))}}});m.meta={name:"clearSearchInput",key:"actionsUniversalSearchClearSearchInputClearSearchInput",description:"Clear the search input, resetting the editable query and ending the search and query sessions"};m.propTypes=null;t["a"]=m},1678:function(e,t,a){"use strict";var r=a(0);var n=a(17);var i=a(104);var s=a(333);var o=a(14);var l="IMPROVED_SEARCH";var c=Object(n["b"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.tab;e(Object(i["I"])({tab:r}));Object(o["a"])({getState:t}).info(l,'Switching to tab "'+r+'"');e(Object(s["i"])({method:"search_tab"}))});c.meta={name:"setTab",key:"actionsUniversalSearchSetTabSetTab",description:"Clog a search open event using data from redux"};c.propTypes={method:r["b"].string};t["a"]=c},1679:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a(6);var n=a(910);var i=new r["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isGuest,r=e.isSelf,s=e.isAppOrBot,o=e.isDeleted,l=e.isPrescenceAway,c=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,m=e.hasNotifications,h=e.isStarred,v=e.isMuted,f=e.hasDraft;var b=function(){if(o)return i.t("deactivated");if(s)return i.t("APP");if(a&&!l&&c)return i.t("guest, do not disturb");if(a&&l&&!c)return i.t("guest, away");if(a&&!l&&!c)return i.t("guest");if(r&&!l&&c)return i.t("you, do not disturb");if(r&&!l&&!c)return i.t("you");if(!a&&!l&&c)return i.t("do not disturb");if(!a&&l&&!c)return i.t("away");return""}();var g=u&&Object(n["a"])(u);var _=function(){if(g&&!d)return g;if(g&&d)return i.t("{statusEmoji} {statusText}",{statusEmoji:g,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"});if(!g&&d)return d;return""}();var y=function(){if(p&&m&&v&&h&&f)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&m&&v&&h&&f)return i.t("has notifications, muted, starred, has a draft message");if(p&&!m&&v&&h&&f)return i.t("current conversation, muted, starred, has a draft message");if(!p&&!m&&v&&h&&f)return i.t("muted, starred, has a draft message");if(p&&m&&!v&&h&&f)return i.t("current conversation, has notifications, starred, has a draft message");if(!p&&m&&!v&&h&&f)return i.t("has notifications, starred, has a draft message");if(p&&!m&&!v&&h&&f)return i.t("current conversation, starred, has a draft message");if(!p&&!m&&!v&&h&&f)return i.t("starred, has a draft message");if(p&&m&&v&&!h&&f)return i.t("current conversation, has notifications, muted, has a draft message");if(!p&&m&&v&&!h&&f)return i.t("has notifications, muted, has a draft message");if(p&&!m&&v&&!h&&f)return i.t("current conversation, muted, has a draft message");if(!p&&!m&&v&&!h&&f)return i.t("muted, has a draft message");if(p&&m&&!v&&!h&&f)return i.t("current conversation, has notifications, has a draft message");if(!p&&m&&!v&&!h&&f)return i.t("has notifications, has a draft message");if(p&&!m&&!v&&!h&&f)return i.t("current conversation, has a draft message");if(!p&&!m&&!v&&!h&&f)return i.t("has a draft message");if(p&&m&&v&&h&&!f)return i.t("current conversation, has notifications, muted, starred");if(!p&&m&&v&&h&&!f)return i.t("has notifications, muted, starred");if(p&&!m&&v&&h&&!f)return i.t("current conversation, muted, starred");if(!p&&!m&&v&&h&&!f)return i.t("muted, starred");if(p&&m&&!v&&h&&!f)return i.t("current conversation, has notifications, starred");if(!p&&m&&!v&&h&&!f)return i.t("has notifications, starred");if(p&&!m&&!v&&h&&!f)return i.t("current conversation, starred");if(!p&&!m&&!v&&h&&!f)return i.t("starred");if(p&&m&&v&&!h&&!f)return i.t("current conversation, has notifications, muted");if(!p&&m&&v&&!h&&!f)return i.t("has notifications, muted");if(p&&!m&&v&&!h&&!f)return i.t("current conversation, muted");if(!p&&!m&&v&&!h&&!f)return i.t("muted");if(p&&m&&!v&&!h&&!f)return i.t("current conversation, has notifications");if(!p&&m&&!v&&!h&&!f)return i.t("has notifications");if(p&&!m&&!v&&!h&&!f)return i.t("current conversation");return""}();if(t&&b&&_&&y)return i.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:b,status:_,context:y});if(t&&!b&&_&&y)return i.t("{name}, status: {status} ({context})",{name:t,status:_,context:y});if(t&&b&&!_&&y)return i.t("{name} ({userInfo}) ({context})",{name:t,userInfo:b,context:y});if(t&&!b&&!_&&y)return i.t("{name} ({context})",{name:t,context:y});if(t&&b&&_&&!y)return i.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:b,status:_});if(t&&!b&&_&&!y)return i.t("{name}, status: {status}",{name:t,status:_});if(t&&b&&!_&&!y)return i.t("{name} ({userInfo})",{name:t,userInfo:b});if(t)return t;return""}},1680:function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(12);var c=a(6);var u=a(21);var d=a(73);var p=a(42);var m=a(1698);var h=a(1039);var v=a(1971);var f=new c["b"]("file-upload");function b(e){var t=e.label,a=e.replyCount,r=e.replyUsers,n=e.replyUsersCount;if(!r)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},t||f.t("Sharing file in a thread"),s.a.createElement("br",null),s.a.createElement(m["a"],{replyCount:a,replyUsers:r,replyUsersCount:n}))}b.displayName="FileUploadThreadLabel";b.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0};function g(e,t){var a=t.channelId,n=t.threadTs;var i=Object(d["a"])(e,a,n);if(!i){var s=Object(u["e"])(e,a);i=Object(h["c"])(s,n);i||(i=Object(v["a"])(s,n))}if(!i)return{};var o=Object(p["getReplyUsers"])(i);var l=Object(p["getReplyUsersCount"])(i);if(i.replies){o=Object(r["map"])(i.replies,"user");i.user&&o.push(i.user);l=Object(r["uniq"])(o).length}else i.user&&o.push(i.user);return{replyCount:Object(p["getReplyCount"])(i),replyUsers:o,replyUsersCount:l}}t["a"]=Object(l["connect"])(g)(b)},1681:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(52);var v=a(123);var f=a(6);var b=a(2478);var g=a.n(b);var _=new f["b"]("file-upload");var y=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleChange=a.handleChange.bind(a);return a}s()(t,[{key:"handleChange",value:function e(t){var a=t.target.checked;this.props.onChange(a)}},{key:"render",value:function e(){var t=this.props,a=t.channelType,r=t.selectedChannelName,n=t.value;var i="file-upload-broadcast-to-channel";var s="";s="mpim"===a?_.t("Also send to the group"):"im"===a?_.t("Also send as direct message"):_.rt("Also send to <span></span>",null,function(){return p.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},r)});return p.a.createElement(h["a"],{text:s,className:"p-file_upload_dialog__broadcast_label",htmlFor:i,type:"inline"},p.a.createElement(v["a"],{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:i,checked:n,onChange:this.handleChange}))}}]);return t}(d["PureComponent"]);y.displayName="FileUploadBroadcastCheckbox";t["a"]=y},1682:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(495);var y=a(61);var k=a(210);var O=a(18);var C=a(3721);var E=a.n(C);var S={channelId:b["b"].string,threadTs:b["b"].string,viewContext:b["b"].string,disableFileUploadsPref:b["b"].string,forwardedRef:b["b"].object,openFileUploadDialog:b["b"].func,onFilesSelectedHandler:b["b"].func,multiple:b["b"].bool};var w={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:m["noop"],onFilesSelectedHandler:null,multiple:true};var I=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFilesSelected=a.onFilesSelected.bind(a);return a}l()(t,[{key:"onFilesSelected",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.forwardedRef,s=t.onFilesSelectedHandler;var o={fileUploadAction:O["m"].PLUS_MENU,fileUploadSrc:O["n"].LOCAL};var l=i.current.files;var c=Object(m["map"])(l);if(s)s(c);else{var u=Object(k["a"])({viewContext:n,channelId:a,threadTs:r});this.props.openFileUploadDialog({files:c,initialChannelId:a,threadTs:r,inputProxy:u,metadata:o})}i.current.value=""}},{key:"render",value:function e(){var t=this.props,a=t.disableFileUploadsPref,r=t.forwardedRef,i=t.multiple;var s="disable_all_except_images"===a;var o={};s&&(o.accept="image/*");return f.a.createElement("input",n()({type:"file",className:"p-hidden_file_input",multiple:i,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},o,{ref:r,onClick:this.onClick,onChange:this.onFilesSelected}))}}]);return t}(v["Component"]);I.displayName="HiddenFileInput";I.defaultProps=w;function j(e){return{disableFileUploadsPref:Object(y["a"])(e,"disable_file_uploads")}}function T(e){return{openFileUploadDialog:function t(){return e(_["a"].apply(void 0,arguments))}}}var A=Object(g["connect"])(j,T)(I);t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(A,n()({},e,{forwardedRef:t}))})},1683:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(2);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(9);var g=a(6);var _=a(13);var y=a.n(_);var k=a(21);var O=a(11);var C=a(105);var E=a(23);var S=a(3776);var w=a.n(S);var I=new g["b"]("threads");var j=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/80588/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureAnnounceOnly,r=t.userCanThread,n=t.useNightIllustration;var i=this.state.spriteLoaded;var s=false;if(Object(d["isBoolean"])(n))s=n;else{var o=new Date;var l=o.getHours();s=l>=20||l<8}var c=y()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!s});var u="";a&&!r?u=h.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),h.a.createElement(E["b"],{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:true})):i&&(u=h.a.createElement("div",{className:"p-thread_drag_overlay__anim"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var p=a&&!r?I.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):I.t("Upload to thread");var m=I.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');var v=a&&!r?I.t("Only selected team members can post in this thread."):m;return h.a.createElement("div",{className:c},h.a.createElement("div",{className:"p-thread_drag_overlay__info"},u,h.a.createElement("div",{className:"p-thread_drag_overlay__title"},p),h.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},v)))}}]);return t}(m["PureComponent"]);j.displayName="DragOverlay";j.defaultProps={featureAnnounceOnly:false,useNightIllustration:void 0};function T(e){var t=Object(C["getCurrentThreadKey"])(e);var a=Object(C["decodeThreadKey"])(t),r=a.channelId;var n=Object(k["e"])(e,r);return{featureAnnounceOnly:Object(b["isFeatureEnabled"])(e,"feature_announce_only"),userCanThread:Object(O["canThread"])(e,n)}}t["a"]=Object(f["connect"])(T)(j)},1685:function(e,t,a){"use strict";a.r(t);a.d(t,"getAppToEdit",function(){return s});a.d(t,"getAppName",function(){return o});a.d(t,"getAppIcons",function(){return l});a.d(t,"getAppDeveloperEmail",function(){return c});a.d(t,"getAppScopes",function(){return u});a.d(t,"isGranularBotScope",function(){return d});a.d(t,"getGranularBotScopes",function(){return p});var r=a(0);var n=a(15);var i=a(9);var s=Object(n["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.appId;var r=Object(i["getFromBootData"])(e,"app_to_edit");if(r&&r.encoded_id===a)return r;return null});s.meta={name:"getAppToEdit",key:"developerAppsStoreGetAppToEdit"};s.propTypes={appId:r["b"].string.isRequired};var o=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.name});o.meta={name:"getAppName",key:"developerAppsStoreGetAppName"};o.propTypes={appId:r["b"].string.isRequired};var l=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.payload&&a.payload.icons||{}});l.meta={name:"getAppIcons",key:"developerAppsStoreGetAppIcons"};l.propTypes={appId:r["b"].string.isRequired};var c=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.directory_payload&&a.directory_payload.developer_email});c.meta={name:"getAppDeveloperEmail",key:"developerAppsStoreGetAppDeveloperEmail"};c.propTypes={appId:r["b"].string.isRequired};var u=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.scope});u.meta={name:"getAppScopes",key:"developerAppsStoreGetAppScopes"};u.propTypes={appId:r["b"].string.isRequired};var d=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.is_granular_bot_app});d.meta={name:"isGranularBotScope",key:"developerAppsStoreIsGranularBotScope"};d.propTypes={appId:r["b"].string.isRequired};var p=Object(n["b"])(function(e,t){var a=s(e,t);if(a&&a.scope_bot)return a.scope_bot;return null});p.meta={name:"getGranularBotScopes",key:"developerAppsStoreGetGranularBotScopes"};p.propTypes={appId:r["b"].string.isRequired}},1686:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(13);var v=a.n(h);var f=a(12);var b=a(182);var g=a(575);var _=a(32);var y=a(300);var k=a(20);var O=a(3);var C=a.n(O);var E=a(2);var S=a.n(E);var w=a(31);var I=a(14);var j=a(104);var T=a(461);var A=a(17);var N=a(333);var M=a(129);var P=a(322);var R=a(121);var x="IMPROVED_SEARCH";var D="search_sort";var F=Object(A["b"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.messageSort;Object(I["a"])({getState:t}).info(x,"Set message sort method. messageSort: "+r);e(Object(M["d"])({pref:D,value:r}));e(Object(P["d"])({module:"messages",reason:"search-messages-sort-changed"}));e(Object(N["i"])({method:"set_sort_"+(r===R["d"].relevantMessages?"score":"timestamp")}))});F.meta={name:"setMessageSort",key:"actionsUniversalSearchSetMessageSortSetMessageSort",description:"Clog a search open event using data from redux"};F.propTypes={method:m["b"].string};var L=a(35);var B=a(202);var U=a(94);var q=a(9);var W=a(442);var H=a(761);var G=a(97);var V=a(1678);var K=a(45);var z=a(28);var Q=a(6);var Y=a(69);var J=a(27);var X=a(23);var Z=a(284);var $=a(856);var ee=a(2011);var te=a(169);function ae(e,t){var a=e[0]&&e[0].ts;if(!a)return"";var r=Object(te["n"])(a,{returnMoment:true});return Object(te["k"])(r,{shortenMonth:t,excludeYear:Object(te["i"])(a)})}var re=a(1294);var ne=a(1212);var ie=a(38);var se=a(209);var oe=a(124);var le=a(11);var ce=a(21);function ue(e,t){if("string"===typeof t)return Object(ce["e"])(e,t,true);if(Object(le["isMpim"])(t))return Object(ce["e"])(e,t.id,true);t&&t.id&&Object(ce["e"])(e,t.id,true);return t}var de=new Q["b"]("search");var pe=/[\ue000\ue001]/g;function me(e,t){if(!t)return null;var a=t.team;var r=ue(e,t.channel);var n=t.messages||[];var i=Object(L["d"])(e);var s=null;if(a&&Object(oe["a"])(a)&&i.id!==a){var o=Object(L["j"])(e,a||i.id);s=Object(z["getTeamDisplayName"])(o)}var l=void 0;var c=Object(le["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var u=ae(n);var d=n.length;var p=i&&i.id!==a&&Object(oe["a"])(a);l=Object(le["isIm"])(r)?de.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(le["isMpim"])(r)?de.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(le["isPendingExternallySharedChannel"])(r)?de.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:c,date:u,count:d,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(le["isExternallySharedChannel"])(r)?de.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):p?de.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:s}):Object(le["isOrgShared"])(r)?de.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):de.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d});l=Object(E["unescape"])(l);var m=n.map(function(t){return Object(ee["a"])({day:{ts:t.ts,isFirstDay:false,isLastDay:false},name:Object(re["a"])(e,{userId:t.user}),time:Object(se["a"])(t.ts,{do24hrTime:Object(ie["h"])(e,"time24"),includeSeconds:false}),text:Object(ne["a"])(e,t.text.replace(pe,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:false,isFirstMsgForDay:false,isLastMsgForDay:false,isFirstUnreadMsg:false})});var h=m.join(". ");return l+" "+h+"."}var he=a(855);var ve=a(1397);var fe=a(63);var be=a(37);var ge=a.n(be);var _e=a(191);var ye=a(919);var ke=a(411);var Oe=a(2475);var Ce=new Q["b"]("search");var Ee={featureTinyspeck:m["b"].bool,theme:m["b"].string};var Se={featureTinyspeck:false,theme:"light"};function we(e){var t=e.theme,a=e.featureTinyspeck;if(a)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-message_group"},p.a.createElement("div",{className:"c-search_message c-search_message--"+t},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(_e["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(ye["a"],{userId:"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Ce.t("There was an error displaying this message.")))))}we.displayName="ErrorSearchMessage";we.defaultProps=Se;var Ie=function e(t){var a="";var r=false;try{a=Object(ke["a"])(t);r=Object(q["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:r}};var je=Object(f["connect"])(Ie)(we);var Te=a(559);var Ae=a(176);var Ne=a(44);var Me=a(152);var Pe=a(116);var Re=new Q["b"]("search");var xe={featureTinyspeck:m["b"].bool,ts:m["b"].string,channel:m["b"].object,user:m["b"].string,theme:m["b"].string};var De={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function Fe(e){var t=e.user,a=e.theme,r=e.ts,n=e.channel,i=e.featureTinyspeck;if(i)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message ",r," in ",n.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-search_message c-search_message--"+a},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(_e["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(ye["a"],{userId:t||"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Re.t("There was an error displaying this message."))))}Fe.displayName="ErrorSearchMessage";Fe.defaultProps=De;var Le=function e(t){var a="";var r=false;try{a=Object(ke["a"])(t);r=Object(q["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:r}};var Be=Object(f["connect"])(Le)(Fe);var Ue=a(1451);var qe=a(414);var We=a(58);var He=a(1817);var Ge=function e(t,a){var r=a.bot_id,n=a.bot_profile,i=a.thread_ts,s=a.teamId,o=a.ts,l=a.channel,c=a.replies,u=a.permalink,d=a.blocks,p=a.attachments;var m=Object(ke["a"])(t);var h=Object(L["d"])(t);var v=void 0;h&&(v=h.domain);var f=S.a.some(a.extracts,function(e){return e.truncated_head||e.truncated_tail});var b=a.text.length>200;var g=!!(a.attachments&&a.attachments.length);var _=!!a.text;var y=f&&b||g&&_;(d||S.a.some(p,"blocks"))&&(y=false);var k=Object(L["d"])(t).id!==s;var O="";if(c&&c.length){var C=c[0].ts;var E=Object(We["parseUrl"])(u),w=E.hostname;O="https://"+w+Object(qe["a"])({channelId:l.id,ts:C,threadTs:o})}return{logger:Object(I["a"])({state:t}),hasText:_,isCrossWorkspace:k,botId:r,botProfile:n,threadTs:i,theme:m,permalinkToMessageThread:O,hasAdHocSender:Object(Ue["a"])(a),featureTinyspeck:Object(q["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:y,teamDomain:v,channelName:Object(le["getDisplayNameForChannel"])(t,l)}};var Ve=null;var Ke=Object(f["connect"])(Ge,Ve)(He["a"]);var ze="IMPROVED_SEARCH";var Qe={logger:m["b"].object.isRequired,telemeter:m["b"].object.isRequired};var Ye=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_messages_result_message_render_error");this.props.logger.error(ze,"Error caught by ProtectedSearchMessage "+a.componentStack,t);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return p.a.createElement(Be,this.props);return p.a.createElement(Ke,this.props)}}]);return t}(d["PureComponent"]);Ye.displayName="ProtectedSearchMessage";var Je=function e(t){return{logger:Object(I["a"])({state:t}),telemeter:Object(fe["c"])({state:t})}};var Xe=Object(f["connect"])(Je)(Ye);var Ze=Xe;var $e=a(3675);var et=new Q["b"]("search");var tt={close:m["b"].func.isRequired,messages:m["b"].arrayOf(m["b"].shape({iid:m["b"].string.isRequired,user:m["b"].string.isRequired,ts:m["b"].string.isRequired,extracts:m["b"].array})).isRequired,channel:m["b"].shape({id:m["b"].string.isRequired,name:m["b"].string.isRequired}).isRequired,team:m["b"].string.isRequired,workspaceName:m["b"].string,currentTeam:m["b"].object.isRequired,isEnterpriseOrg:m["b"].bool.isRequired,onMessageJump:m["b"].func.isRequired,onFileJump:m["b"].func.isRequired,onRepliesClick:m["b"].func.isRequired,clogSearchMessageClick:m["b"].func,clogMessageClick:m["b"].func};var at={workspaceName:"",clogSearchMessageClick:E["noop"],clogMessageClick:E["noop"]};var rt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(w["a"])(a,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return a}s()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onLinkClick",value:function e(t,a){this.props.clogSearchMessageClick({iid:a.iid,ts:a.ts,channelId:a.channelId,botId:a.botId,userId:a.userId,type:a.type});"copy_link"===a.type?this.props.clogMessageClick({msg:t,payload:a}):"channel"===a.type&&this.props.close()}},{key:"onMessageJump",value:function e(t){var a=t.iid,r=t.permalink,n=t.ts,i=t.channelId,s=t.userId,o=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:r});this.props.clogSearchMessageClick({type:"message_jump",iid:a,ts:n,channelId:i,userId:s,botId:o})}},{key:"onFileJump",value:function e(t,a){var r=a.file,n=a.iid,i=a.ts,s=a.channelId,o=a.userId,l=a.botId;this.props.onFileJump(t,{file:r,iid:n,ts:i,channelId:s,userId:o,botId:l})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchMessageClick({type:"message_jump",iid:t.iid,ts:t.ts,channelId:t.channelId,userId:t.userId,botId:t.botId})}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return Object(E["reduce"])(t,function(e,t){var a=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||a)?a?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var a=t.iid,r=t.ts,n=t.channelId,i=t.userId,s=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchMessageClick({type:"expand",iid:a,ts:r,channelId:n,userId:i,botId:s})}},{key:"formatHeaderDate",value:function e(){return ae(this.props.messages,true)}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var a=this.formatHeaderDate();return p.a.createElement(Ne["a"],{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},p.a.createElement(Me["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),p.a.createElement("span",null,"\u2013"),p.a.createElement("span",{className:"c-message_group__header_date"},a),p.a.createElement("span",{className:"c-message_group__header_view_label"},et.t("View in channel")))}},{key:"renderMessages",value:function e(){var t=this;var a=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(E["map"])(a,function(e,a){if(e.collapsedStub&&!t.state.isExpanded)return p.a.createElement(Pe["a"],{key:a,className:"c-message_group__divider",onClick:t.expand},p.a.createElement("hr",{className:"c-message_group__divider_rule"}),p.a.createElement("div",{className:"c-message_group__divider_text"},et.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count})));return p.a.createElement(Ze,C()({key:e.ts},e,{teamId:t.props.team,channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:function a(r){t.onLinkClick(e,r)},onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd}))})}},{key:"render",value:function e(){var t=v()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return p.a.createElement("div",{className:t,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}]);return t}(d["PureComponent"]);rt.displayName="SearchMessageGroup";rt.defaultProps=at;var nt=function e(t,a){var r=a.channel,n=a.team;var i=Object(L["d"])(t);var s=Object(L["j"])(t,n||i.id);var o=Object(z["getTeamDisplayName"])(s);var l=ue(t,r);return{channel:C()({},l,{team_id:n}),isEnterpriseOrg:!!(i&&i.enterprise_id),workspaceName:o,currentTeam:i}};var it={clogSearchMessageClick:function e(){return N["h"].apply(void 0,arguments)},clogMessageClick:function e(){return Te["a"].apply(void 0,arguments)},close:function e(){return H["a"].apply(void 0,arguments)}};var st=Object(f["connect"])(nt,it,null,{areStatePropsEqual:function e(t,a){return Object(Ae["a"])(t,a,2)}})(rt);var ot="IMPROVED_SEARCH";var lt={telemeter:m["b"].object.isRequired,logger:m["b"].object.isRequired};var ct=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_messages_result_message_group_render_error");this.props.logger.error(ot,"Error caught by ProtectedMessageGroup "+a.componentStack,t);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){var t=this.props,a=t.logger,r=ge()(t,["logger"]);if(this.state.hasError)return p.a.createElement(je,r);return p.a.createElement(st,r)}}]);return t}(d["PureComponent"]);ct.displayName="ProtectedMessageGroup";var ut=function e(t){return{logger:Object(I["a"])({state:t}),telemeter:Object(fe["c"])({state:t})}};var dt=Object(f["connect"])(ut)(ct);var pt=a(199);var mt=a(1199);var ht={visible:m["b"].bool,currentPageOffset:m["b"].number.isRequired,totalPageCount:m["b"].number.isRequired,onBack:m["b"].func.isRequired,onForward:m["b"].func.isRequired,onFeedbackClick:m["b"].func.isRequired};var vt={visible:true};var ft=new Q["b"]("search");function bt(e){var t=e.visible,a=e.currentPageOffset,r=e.totalPageCount,n=e.onBack,i=e.onForward,s=e.onFeedbackClick;if(!t)return null;var o=1===a;var l=a===r;var c="";var u={currentPageOffset:Object(pt["a"])(a),totalPageCount:Object(pt["a"])(r)};c=ft.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});var d=p.a.createElement(Ne["a"],{className:"c-search__pager__button_forward",onClick:i,disabled:l,"data-qa":"search_pager_forward_button"},o&&ft.t("See more")||ft.t("Next"),p.a.createElement(X["b"],{type:"chevron-medium-right",size:"inherit"}));var m=p.a.createElement(Ne["a"],{className:"c-search__pager__button__back",onClick:n,disabled:o,"data-qa":"search_pager_back_button"},p.a.createElement(X["b"],{type:"chevron-medium-left",size:"inherit"}),ft.t("Previous"));var h=p.a.createElement(mt["a"],{short:true,className:"c-search__pager_feedback",onClick:s});return p.a.createElement("div",{className:"c-search__pager"},o||m,p.a.createElement("div",null,p.a.createElement("span",{className:"c-search__pager__details"},c),h),l||d)}bt.displayName="Pager";bt.defaultProps=vt;var gt=bt;var _t=a(25);var yt=a(26);var kt=a.n(yt);var Ot=a(1239);var Ct=a(1415);function Et(e,t,a){var r=Object(B["getRequest"])(t());var n=r?r.query:"";e(Object(B["clearResponse"])());e(Object(Ot["a"])());return e(Object(P["a"])({query:n,reason:a,fetchSuggesions:false}))}var St=Object(A["b"])("Message/file search: exclude bots checkbox changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value;e(Object(T["i"])({value:r}));Et(e,t,"search-exclude-bots-changed")});St.meta={name:"messageAndFileSearchExcludeBotsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"};St.propTypes={value:m["b"].bool.isRequired};var wt=Object(A["b"])("Message/file search: only my channels checkbox changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value;e(Object(T["j"])({value:r}));Et(e,t,"search-only-my-channels-changed")});wt.meta={name:"messageAndFileSearchOnlyMyChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"};wt.propTypes={value:m["b"].bool.isRequired};var It=Object(A["b"])("Channel search: hide member channels flag changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(T["g"])({value:r}));i&&Et(e,t,"search-hide-member-channels-changed")});It.meta={name:"channelSearchHideMemberChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"};It.propTypes={value:m["b"].bool.isRequired};var jt=Object(A["b"])("File search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(Ct["b"])({sort:r}));e(Object(P["d"])({module:"files",reason:"search-files-sort-changed"}))});jt.meta={name:"fileSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedFileSearchSortChanged",description:"File search: sort changed"};jt.propTypes={sort:m["b"].oneOf(Object(E["values"])(R["c"])).isRequired};var Tt=Object(A["b"])("Channel search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(T["h"])({sort:r}));e(Object(P["d"])({module:"channels",reason:"search-channels-sort-changed"}))});Tt.meta={name:"channelSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchSortChanged",description:"Channel search: sort changed"};Tt.propTypes={sort:m["b"].oneOf(Object(E["values"])(R["b"])).isRequired};var At=Object(A["b"])("People search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(T["l"])({sort:r}));e(Object(P["d"])({module:"people",reason:"search-people-sort-changed"}))});At.meta={name:"peopleSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchSortChanged",description:"People search: sort changed"};At.propTypes={sort:m["b"].oneOf(Object(E["values"])(R["b"])).isRequired};var Nt=Object(A["b"])("Channel search: filter type changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type;e(Object(j["h"])({type:r}));Et(e,t,"search-channels-filter-type-changed")});Nt.meta={name:"channelSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchFilterTypeChanged",description:"Channel search: filter type changed"};Nt.propTypes={type:m["b"].oneOf(Object(E["values"])(R["a"])).isRequired};var Mt=Object(A["b"])("All of search: search only current workspace changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(T["m"])({value:r}));i&&Et(e,t,"search-only-search-workspace-changed")});Mt.meta={name:"searchOnlySearchWorkspaceChanged",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlySearchWorkspaceChanged",description:"All of search: search only current workspace changed"};Mt.propTypes={value:m["b"].bool.isRequired};var Pt=Object(A["b"])("Channel search: update an external org filter",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.value;var i=t();var s=[].concat(kt()(Object(b["e"])(i)));var o=Object(b["d"])(i);n?s.push(r):s=s.filter(function(e){return e!==r});e(Object(j["i"])({teamIds:Array.from(new Set([].concat(kt()(o),[r])))}));e(Object(j["j"])({orgFilters:s}));Et(e,t,"search-channels-org-filter-changed")});Pt.meta={name:"toggleChannelSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedToggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"};Pt.propTypes={teamId:m["b"].string.isRequired,value:m["b"].bool.isRequired};var Rt=Object(A["b"])("People search: update an external org filter",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.value;var i=t();var s=[].concat(kt()(Object(b["m"])(i)));var o=Object(b["l"])(i);n?s.push(r):s=s.filter(function(e){return e!==r});e(Object(j["u"])({teamIds:Array.from(new Set([].concat(kt()(o),[r])))}));e(Object(j["v"])({orgFilters:s}));Et(e,t,"search-people-org-filter-changed")});Rt.meta={name:"togglePeopleSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedTogglePeopleSearchOrgFilter",description:"People search: update an external org filter"};Rt.propTypes={teamId:m["b"].string.isRequired,value:m["b"].bool.isRequired};var xt=Object(A["b"])("People search: filter type changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.teamId,i=a.refetch,s=void 0===i||i;e(Object(j["t"])({type:r,teamId:n}));s&&Et(e,t,"search-people-filter-type-changed")});xt.meta={name:"peopleSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchFilterTypeChanged",description:"People search: filter type changed"};xt.propTypes={type:m["b"].oneOf(Object(E["values"])(R["f"])).isRequired,teamId:m["b"].string};var Dt=Object(A["b"])("People search: custom filter changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.id,n=a.value,i=a.checked;e(Object(j["s"])({id:r,value:n,checked:i}));Et(e,t,"search-people-custom-filter-changed")});Dt.meta={name:"peopleSearchCustomFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchCustomFilterChanged",description:"People search: custom filter changed"};Dt.propTypes={id:m["b"].string.isRequired,value:m["b"].string.isRequired,checked:m["b"].bool.isRequired};var Ft=Object(A["b"])("People search: hide deactivated users pref changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(T["k"])({value:r}));i&&Et(e,t,"search-people-hide-deactivated-users-changed")});Ft.meta={name:"peopleSearchHideDeactivatedUsersChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"};Ft.propTypes={value:m["b"].bool.isRequired};var Lt=Object(A["b"])("People search: timezone filter changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.label,n=a.value,i=a.checked;e(Object(j["z"])({label:r,value:n,checked:i}));Et(e,t,"search-people-timezone-filter-changed")});Lt.meta={name:"peopleSearchTimezoneFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"};Lt.propTypes={label:m["b"].string.isRequired,value:m["b"].string.isRequired,checked:m["b"].bool.isRequired};var Bt=a(151);var Ut=a(131);var qt=a(261);function Wt(e){if(!e||Object(E["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}var Ht=a(16);var Gt=a(900);var Vt=a(354);var Kt=a(760);var zt=a(3677);var Qt=new Q["b"]("search");var Yt={showMoreOptions:m["b"].bool,showMoreOptionsAriaLabel:m["b"].string.isRequired,placeholderText:m["b"].string.isRequired,checkboxName:m["b"].string.isRequired,visibleOptions:m["b"].arrayOf(m["b"].shape({value:m["b"].string.isRequired,label:m["b"].node,checked:m["b"].bool.isRequired})).isRequired,loadOptions:m["b"].func.isRequired,filterOptions:m["b"].func,renderVisibleOption:m["b"].func,renderOption:m["b"].func,onOptionChange:m["b"].func,onOptionAdd:m["b"].func};var Jt={onOptionChange:E["noop"],onOptionAdd:E["noop"],renderVisibleOption:void 0,renderOption:void 0,filterOptions:function e(t,a){return a},showMoreOptions:true};var Xt={};var Zt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.initialState={isSelectVisible:false,isLoading:false,emptyMessage:Xt,activeRowIndex:null,filterQuery:"",options:[],selectId:"search-multi-select-filter-"+e.checkboxName,isExpanded:false,isInvalid:false,isDisabled:false};a.state=a.initialState;Object(w["a"])(a,["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]);a.loadOptionsPromise=null;a.inputRef=p.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){this.reloadOptions("")}},{key:"componentWillUnmount",value:function e(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}},{key:"onShowSelectClick",value:function e(){var t=this;this.setState(function(){return{isSelectVisible:true}},function(){t.inputRef.current.focus()})}},{key:"setSelectState",value:function e(t,a){var r=this;var n=false;this.setState(function(e){var a=t();var i=a.activeRowIndex,s=void 0===i?e.activeRowIndex:i,o=a.filterQuery,l=void 0===o?e.filterQuery:o,c=a.isExpanded,u=void 0===c?e.isExpanded:c,d=a.isInvalid,p=void 0===d?e.isInvalid:d,m=a.isDisabled,h=void 0===m?e.isDisabled:m,v=a.options,f=void 0===v?e.options:v,b=a.selectId,g=void 0===b?e.selectId:b;void 0!==l&&l!==e.filterQuery&&(n=true);var _=Object(E["unionBy"])(f,e.options,"value").length;_===f.length&&_===e.options.length||(n=true);return{activeRowIndex:s,filterQuery:l,isExpanded:u,isInvalid:p,isDisabled:h,options:r.props.filterOptions(l,f),selectId:g}},function(){n&&r.reloadOptions(r.state.filterQuery);a&&a()})}},{key:"refilterOptions",value:function e(){var t=this;this.setState(function(e){return{options:t.props.filterOptions(e.filterQuery,e.options)}})}},{key:"reloadOptions",value:function e(t){var a=this;this.loadOptionsPromise&&this.loadOptionsPromise.cancel();this.setState(function(){return{isLoading:true}});this.loadOptionsPromise=this.props.loadOptions(t).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.emptyMessage,n=void 0===r?Xt:r;a.setState(function(e){return{options:a.props.filterOptions(e.filterQuery,t),emptyMessage:n}})}).catch(E["noop"]).finally(function(){a.loadOptionsPromise.isCancelled()||a.setState(function(){return{isLoading:false}})})}},{key:"emptyStateMessage",value:function e(){return this.state.emptyMessage===Xt?Qt.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}},{key:"renderOption",value:function e(t,a){var r=a.isActive,n=a.isSelected;return p.a.createElement("div",{className:v()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":r,"p-search_filter__option--selected":n})},this.props.renderOption?this.props.renderOption(t,a):p.a.createElement("span",{className:"p-search_filter__option_label"},t.label))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.checkboxName,n=a.visibleOptions,i=a.placeholderText,s=a.onOptionChange,o=a.onOptionAdd,l=a.renderVisibleOption,c=a.showMoreOptions,u=a.showMoreOptionsAriaLabel;var d=this.state.isSelectVisible;var m=0===n.length;return p.a.createElement("div",null,n.map(function(e){return p.a.createElement("label",{key:e.value,htmlFor:"search-filter-"+r+"-"+e.value,className:v()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":e.checked}),"data-qa":"search_filter_suggestion"},l?l(e):p.a.createElement("span",{className:"p-search_filter__option_label"},e.label),p.a.createElement("span",{className:"p-search_filter__visible_checkbox"},p.a.createElement("input",{id:"search-filter-"+r+"-"+e.value,type:"checkbox",name:r,value:e.value,checked:e.checked,onChange:function a(r){s(e,r.target.checked);t.refilterOptions()}})))}),c&&(d?p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Vt["b"],{width:"100%",inputRef:this.inputRef,selectId:"search-multi-select-filter-"+r,placeholderText:i,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:function e(){t.setState(function(e){return C()({},t.initialState,{options:e.options})});o.apply(void 0,arguments)},renderOption:this.renderOption})):p.a.createElement(Kt["a"],{className:m?"p-search_filter__empty_more_link":"p-search_filter__more_link","data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":u,"aria-expanded":"false"},Qt.t("More\u2026"))))}}]);return t}(d["Component"]);Zt.displayName="SearchFilterMultiSelect";Zt.defaultProps=Jt;var $t=Zt;var ea=a(1676);var ta=a(230);var aa=a(383);var ra=a(253);var na=a(40);var ia=a.n(na);var sa=a(1319);var oa=a(3679);var la=function e(t){return p.a.createElement("div",{className:"c-search_filter_section"},p.a.createElement("h3",{className:"c-search_filter_section__title"},t.title),t.children)};la.displayName="SearchFilterSection";la.defaultProps={children:null};var ca=la;var ua=a(892);var da={onDateChange:m["b"].func.isRequired,isDateDisabled:m["b"].func.isRequired,date:m["b"].string,disableDatesAfter:m["b"].string,disableDatesBefore:m["b"].string,dateLabel:m["b"].string.isRequired,dateAriaLabel:m["b"].string.isRequired,removeAriaLabel:m["b"].string.isRequired,qaLabel:m["b"].string};var pa={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var ma=-364;var ha=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onClearDateChange"]);return a}s()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,a=t.onDateChange,r=t.date,n=t.isDateDisabled,i=t.disableDatesBefore,s=t.disableDatesAfter,o=t.dateLabel,l=t.dateAriaLabel,c=t.removeAriaLabel,u=t.qaLabel;var d="es-ES"===Object(Q["s"])()||"es-LA"===Object(Q["s"])();var m=r?Object(te["k"])(ia()(r),{shortenMonth:d,shortenDay:d}):"";var h=v()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!r});return p.a.createElement("div",{className:"p-search_filter__date","data-qa":u},p.a.createElement(ua["c"],{position:"bottom",offsetY:ma,selectedDate:r,dateFormat:"YYYY-MM-DD",onDateChange:a,isDateDisabled:n,disableDatesBefore:i,disableDatesAfter:s},p.a.createElement(Pe["a"],{className:h,"aria-label":r?void 0:l,"data-qa":u+"_button"},p.a.createElement("div",{className:"p-search_filter__date_label"},o),p.a.createElement("div",{className:"p-search_filter__date_readout"},m),r?null:p.a.createElement(X["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),r?p.a.createElement(Pe["a"],{"aria-label":c,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":u+"_close"},p.a.createElement(X["b"],{type:" c-icon--times-small"})):null)}}]);return t}(d["PureComponent"]);ha.displayName="DateSelector";ha.defaultProps=pa;var va=ha;var fa=new Q["b"]("search");var ba={onStartDateChange:m["b"].func.isRequired,onEndDateChange:m["b"].func.isRequired,startDate:m["b"].string,endDate:m["b"].string};var ga={startDate:null,endDate:null};var _a=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["isDateDisabledStart","isDateDisabledEnd"]);return a}s()(t,[{key:"isDateDisabledStart",value:function e(t){var a=this.props.endDate;if(a)return t.isAfter(a)||t.isAfter(ia()());return t.isAfter(ia()())}},{key:"isDateDisabledEnd",value:function e(t){var a=this.props.startDate;if(a)return t.isBefore(a)||t.isAfter(ia()());return t.isAfter(ia()())}},{key:"render",value:function e(){var t=this.props,a=t.onStartDateChange,r=t.onEndDateChange,n=t.endDate,i=t.startDate;return p.a.createElement(ca,{title:fa.t("Date")},p.a.createElement("div",{className:"p-search_filter__dates"},p.a.createElement(va,{date:i,onDateChange:function e(t){a(t?ia()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||ia()().format("YYYY-MM-DD"),dateLabel:fa.t("Starting"),dateAriaLabel:fa.t("Starting date"),removeAriaLabel:fa.t("Remove starting date"),qaLabel:"search_starting_date"}),p.a.createElement(va,{date:n,onDateChange:function e(t){r(t?ia()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:ia()().format("YYYY-MM-DD"),dateLabel:fa.t("Ending"),dateAriaLabel:fa.t("Ending date"),removeAriaLabel:fa.t("Remove ending date"),qaLabel:"search_ending_date"})))}}]);return t}(d["PureComponent"]);_a.displayName="DateRangeFilter";_a.defaultProps=ga;var ya=_a;var ka={variation:m["b"].number.isRequired,includeAvatar:m["b"].bool};var Oa={includeAvatar:false};function Ca(e){var t=e.variation,a=e.includeAvatar;return p.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},a?p.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,p.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}Ca.displayName="PlaceholderSuggestion";Ca.defaultProps=Oa;var Ea=Ca;var Sa=a(3681);var wa=new Q["b"]("search");var Ia="IMPROVED_SEARCH";var ja={showOnlyActiveFilters:m["b"].bool,showFileFilters:m["b"].bool,filters:m["b"].object.isRequired,suggestions:m["b"].object.isRequired,fileSuggestions:m["b"].object.isRequired,toggleEditableRequestQueryFilterFromItem:m["b"].func.isRequired,toggleEditableRequestQueryFilterInItem:m["b"].func.isRequired,currentTeam:m["b"].object.isRequired,isEnterpriseOrg:m["b"].bool.isRequired,setEditableRequestQueryFilterAfter:m["b"].func.isRequired,setEditableRequestQueryFilterBefore:m["b"].func.isRequired,setEditableRequestQueryFilterFileType:m["b"].func.isRequired,searchOnlySearchWorkspaceChanged:m["b"].func.isRequired,messageAndFileSearchExcludeBotsChanged:m["b"].func.isRequired,messageAndFileSearchOnlyMyChannelsChanged:m["b"].func.isRequired,searchPrefs:m["b"].shape({searchOnlyCurrentTeam:m["b"].bool.isRequired,searchExcludeBots:m["b"].bool.isRequired,searchOnlyMyChannels:m["b"].bool.isRequired}).isRequired,imToUserMap:m["b"].object.isRequired,loading:m["b"].bool.isRequired,loadingFileSuggestions:m["b"].bool.isRequired,logInfo:m["b"].func,search:m["b"].func.isRequired,showDebugOption:m["b"].bool.isRequired,isDebugInfoVisible:m["b"].bool.isRequired,toggleDebugInfoVisible:m["b"].func.isRequired,clogSearchFilterAdded:m["b"].func,clogSearchFilterRemoved:m["b"].func};var Ta={showOnlyActiveFilters:false,showFileFilters:false,logInfo:E["noop"],clogSearchFilterAdded:E["noop"],clogSearchFilterRemoved:E["noop"]};var Aa=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions"]);a.onStartDateSelect=a.onStartDateSelect.bind(a);a.onEndDateSelect=a.onEndDateSelect.bind(a);return a}s()(t,[{key:"onChannelSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.offset;if(!t)return;var n={filter_in:true,filter_position:r};Object(Bt["a"])(t)?n.click_user_id=t:n.click_channel_id=t;this.props.filters.in.indexOf(t)>-1?this.props.clogSearchFilterRemoved(n):this.props.clogSearchFilterAdded(n);var i=t;this.props.imToUserMap[t]&&(i=this.props.imToUserMap[t]);this.props.toggleEditableRequestQueryFilterInItem({channelId:i})}},{key:"onMemberSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.offset;if(!t)return;this.props.filters.from.indexOf(t)>-1?this.props.clogSearchFilterRemoved({click_user_id:t,filter_from:true,filter_position:r}):this.props.clogSearchFilterAdded({click_user_id:t,filter_from:true,filter_position:r});this.props.toggleEditableRequestQueryFilterFromItem({memberId:t})}},{key:"onEndDateSelect",value:function e(t){var a=t&&t.add(1,"days").format(sa["a"]);a?this.props.clogSearchFilterAdded({filter_before:a}):this.props.clogSearchFilterRemoved({filter_before:""});this.props.setEditableRequestQueryFilterBefore({dateString:a})}},{key:"onStartDateSelect",value:function e(t){var a=t&&t.subtract(1,"days").format(sa["a"]);a?this.props.clogSearchFilterAdded({filter_after:a}):this.props.clogSearchFilterRemoved({filter_after:""});this.props.setEditableRequestQueryFilterAfter({dateString:a})}},{key:"onSearchPrefChange",value:function e(t){var a=this.props.searchPrefs,r=a.searchOnlyCurrentTeam,n=a.searchExcludeBots,i=a.searchOnlyMyChannels;this.props.logInfo(Ia,"Changing search pref. pref: "+t);var s=void 0;switch(t){case R["l"]:s=!r;this.props.searchOnlySearchWorkspaceChanged({value:s});break;case R["i"]:s=!n;this.props.messageAndFileSearchExcludeBotsChanged({value:s});break;case R["m"]:s=!i;this.props.messageAndFileSearchOnlyMyChannelsChanged({value:s});break;default:return}s?this.props.clogSearchFilterAdded({filter_other:t}):this.props.clogSearchFilterRemoved({filter_other:t})}},{key:"onFileTypeChange",value:function e(t){this.props.clogSearchFilterAdded({filter_file_type:t});this.props.setEditableRequestQueryFilterFileType({fileType:t})}},{key:"loadInFilterOptions",value:function e(t){var a=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{limit:150,entities:{channels:{includeArchived:true,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:true},members:{includeSelf:true,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){var t=Object(E["findIndex"])(a.props.suggestions.in,function(t){return t.id===e.id});return-1===t});var r={};a.props.suggestions.in.forEach(function(e){r[e.name]=(r[e.name]||0)+1});t.forEach(function(e){r[e.name]=(r[e.name]||0)+1});return{options:t.map(function(e){return{label:null,model:e,member:Object(Ht["isMember"])(e)&&e,mpim:Object(le["isMpim"])(e)&&e,channel:Object(le["isChannel"])(e)&&e,value:e.id}})}})}},{key:"loadFromFilterOptions",value:function e(t){var a=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{entities:{members:{includeSelf:true,includeSlackbot:true,includeBots:true,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){return-1===a.props.suggestions.from.indexOf(e.id)});return{options:t.map(function(e){return{label:null,model:e,member:Object(Ht["isMember"])(e)&&e,mpim:Object(le["isMpim"])(e)&&e,channel:Object(le["isChannel"])(e)&&e,value:e.id}})}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,a=t.filters,r=t.showOnlyActiveFilters;if(Wt(a)&&r)return false;return!r||a.before&&a.after}},{key:"renderInFilter",value:function e(){var t=this;var a=this.props,r=a.filters,n=a.suggestions,i=a.fileSuggestions,s=a.loading,o=a.loadingFileSuggestions,l=a.showFileFilters;if(s&&!l||o&&l)return this.renderInPlaceholder();var c=l?i:n;var u=c.in;var d={};u.forEach(function(e){d[e.name]=(d[e.name]||0)+1});var m=[];var h={};u.forEach(function(e){var t=r.in.indexOf(e.id)>-1;t&&(h[e.id]=true);m.push({label:null,model:e,member:Object(Ht["isMember"])(e)&&e,mpim:Object(le["isMpim"])(e)&&e,channel:Object(le["isChannel"])(e)&&e,value:e.id,checked:t})});return p.a.createElement(ca,{title:wa.t("Channels & direct messages")},p.a.createElement($t,{checkboxName:"in_filter",placeholderText:wa.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:wa.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:function e(t){return p.a.createElement(Me["a"],{className:"p-search_filter__in_channel",channel:t.model,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},renderOption:function e(t){return t.member?p.a.createElement(ra["a"],{className:"p-search_filter__in_member",id:t.member.id}):p.a.createElement(Me["a"],{className:"p-search_filter__in_channel",channel:t.model,teamIconSize:18,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},visibleOptions:m,onOptionChange:function e(a){t.onChannelSelect(a.value,{offset:m.indexOf(a)})},onOptionAdd:function e(a){t.onChannelSelect(a.value,{offset:null})},filterOptions:function e(t,a){return a.filter(function(e){return!h[e.value]})}}))}},{key:"renderInPlaceholder",value:function e(){return p.a.createElement(ca,{title:wa.t("Channels & direct messages")},p.a.createElement(Ea,{variation:0}),p.a.createElement(Ea,{variation:1}),p.a.createElement(Ne["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":wa.t("More channels or direct messages to filter by"),"aria-expanded":"false"},wa.t("More\u2026")))}},{key:"renderFromFilter",value:function e(){var t=this;var a=this.props,r=a.filters,n=a.suggestions,i=a.fileSuggestions,s=a.loading,o=a.loadingFileSuggestions,l=a.showFileFilters;if(s&&!l||o&&l)return this.renderFromPlaceholder();var c=l?i:n;var u=[];var m={};c.from.forEach(function(e){var t=r.from.indexOf(e.id)>-1;t&&(m[e.id]=true);u.push({label:null,model:e,member:Object(Ht["isMember"])(e)&&e,mpim:Object(le["isMpim"])(e)&&e,channel:Object(le["isChannel"])(e)&&e,value:e.id,checked:t})});return p.a.createElement(ca,{title:wa.t("People")},p.a.createElement($t,{checkboxName:"from_filter",placeholderText:wa.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:wa.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:function e(t){return p.a.createElement(d["Fragment"],null,p.a.createElement(_e["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),p.a.createElement(ra["a"],{className:"p-search_filter__from_name",id:t.model.id}))},renderOption:function e(t){return p.a.createElement(d["Fragment"],null,p.a.createElement(_e["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),p.a.createElement(ra["a"],{className:"p-search_filter__from_name",id:t.model.id}))},visibleOptions:u,onOptionChange:function e(a){t.onMemberSelect(a.value,{offset:u.indexOf(a)})},onOptionAdd:function e(a){t.onMemberSelect(a.value,{offset:null})},filterOptions:function e(t,a){return a.filter(function(e){return!m[e.value]})}}))}},{key:"renderFromPlaceholder",value:function e(){return p.a.createElement(ca,{title:wa.t("People")},p.a.createElement(Ea,{includeAvatar:true,variation:0}),p.a.createElement(Ea,{includeAvatar:true,variation:1}),p.a.createElement(Ne["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":wa.t("More people to filter by"),"aria-expanded":"false"},wa.t("More\u2026")))}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,a=t.filters,r=t.showOnlyActiveFilters,n=t.showFileFilters;if(!n||r&&!a.fileType)return null;return p.a.createElement(ca,{title:wa.t("File type")},p.a.createElement(ea["a"],{filetype:a.fileType,onChange:this.onFileTypeChange}))}},{key:"renderPrefs",value:function e(){var t=this;var a=this.props,r=a.showOnlyActiveFilters,n=a.isEnterpriseOrg,i=a.showDebugOption,s=a.isDebugInfoVisible,o=a.currentTeam;var l=this.props.searchPrefs,c=l.searchOnlyCurrentTeam,u=l.searchExcludeBots,m=l.searchOnlyMyChannels;if(r)return null;return p.a.createElement(ca,{title:wa.t("More options")},n&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":c}),htmlFor:"search_only_current_team"},wa.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(ta["b"],{className:"p-search_filter__workspace_only_team_icon",team:o,size:18})," ",p.a.createElement(aa["a"],{id:o.id,bold:c}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:c,onChange:function e(){return t.onSearchPrefChange(R["l"])}})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":m}),htmlFor:"search_only_my_channels"},wa.t("Only search my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:m,onChange:function e(){return t.onSearchPrefChange(R["m"])}})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":u}),htmlFor:"search_exclude_bots"},wa.t("Hide apps and bots")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:u,onChange:function e(){return t.onSearchPrefChange(R["i"])}})),i&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":s}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:s,onChange:function e(){return t.props.toggleDebugInfoVisible()}})))}},{key:"render",value:function e(){var t=this.props.filters.after&&ia()(this.props.filters.after,sa["a"]).add(1,"days").format(sa["a"]);var a=this.props.filters.before&&ia()(this.props.filters.before,sa["a"]).subtract(1,"days").format(sa["a"]);return p.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),p.a.createElement(ya,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:a}),this.renderPrefs())}}]);return t}(d["PureComponent"]);Aa.displayName="MessagesFilterUIBase";Aa.defaultProps=Ta;var Na=function e(t){var a=Object(B["getEditableRequestQueryFilter"])(t)||Gt["b"];var r=Object(B["getFilterSuggestions"])(t)||Gt["b"];var n=Object(B["getFilterSuggestionsForFiles"])(t)||Gt["b"];var i=Object(q["getCurrentUserId"])(t);var s=Object(L["d"])(t);var o=!!s.enterprise_id;var l=Pa(t,a.in);var c=Object(b["i"])(t,"suggestions")||Gt["b"];var u=c.loading;var d=Object(b["i"])(t,"suggestionsForFiles")||{loading:false};var p=d.loading;var m="solr_rank_debug"===Object(U["getGroupForUser"])(t,"solr_rank_debug");var h={searchOnlyCurrentTeam:Object(ie["h"])(t,R["l"]),searchExcludeBots:Object(ie["h"])(t,R["i"]),searchOnlyMyChannels:Object(ie["h"])(t,R["m"])};return{suggestions:{in:(r.in||Gt["a"]).map(function(e){return Ma(t,e)}).filter(function(e){return!!e}),from:(r.from||Gt["a"]).map(function(e){return Ma(t,e)}).filter(function(e){return!!e})},fileSuggestions:{in:(n.in||Gt["a"]).map(function(e){return Ma(t,e)}).filter(function(e){return!!e}),from:(n.from||Gt["a"]).map(function(e){return Ma(t,e)}).filter(function(e){return!!e})},currentTeam:s,isEnterpriseOrg:o,myUserId:i,filters:{in:a.in||Gt["a"],from:a.from||Gt["a"],before:a.before,after:a.after,fileType:a.fileType},imToUserMap:l,searchPrefs:h,loading:u,loadingFileSuggestions:p,logInfo:Object(I["a"])({state:t}).info,isDebugInfoVisible:Object(b["g"])(t),showDebugOption:m}};function Ma(e,t){if(Object(Ut["a"])(t))return Object(ce["e"])(e,t);if(Object(Bt["a"])(t))return Object(_t["e"])(e,t);return null}function Pa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,a){if(Object(Bt["a"])(a)){var r=Object(ce["l"])(e,a);r&&(t[r]=a)}return t},{})}var Ra={setEditableRequestQueryFilterAfter:function e(){return B["setEditableRequestQueryFilterAfter"].apply(void 0,arguments)},setEditableRequestQueryFilterBefore:function e(){return B["setEditableRequestQueryFilterBefore"].apply(void 0,arguments)},setEditableRequestQueryFilterFileType:function e(){return B["setEditableRequestQueryFilterFileType"].apply(void 0,arguments)},toggleEditableRequestQueryFilterFromItem:function e(){return B["toggleEditableRequestQueryFilterFromItem"].apply(void 0,arguments)},toggleEditableRequestQueryFilterInItem:function e(){return B["toggleEditableRequestQueryFilterInItem"].apply(void 0,arguments)},search:function e(){return qt["e"].apply(void 0,arguments)},toggleDebugInfoVisible:function e(){return j["K"].apply(void 0,arguments)},clogSearchFilterAdded:function e(){return N["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return N["g"].apply(void 0,arguments)},searchOnlySearchWorkspaceChanged:function e(){return Mt.apply(void 0,arguments)},messageAndFileSearchExcludeBotsChanged:function e(){return St.apply(void 0,arguments)},messageAndFileSearchOnlyMyChannelsChanged:function e(){return wt.apply(void 0,arguments)}};var xa=Object(f["connect"])(Na,Ra,null,{areStatePropsEqual:function e(t,a){return Object(Ae["a"])(t,a,2)}})(Aa);var Da=a(18);var Fa=a(39);var La=Object(A["b"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.elementName,n=a.uiAction,i=a.elementType;var s=Object(Fa["a"])({state:t()});s.track(Da["l"].GROWTH_PRICING,{contexts:{ui_context:{step:Da["A"].SEARCH_PANE,action:n,element_name:r,element_type:i}}})});La.meta={name:"clogLimitBannerInteraction",key:"actionsUniversalSearchClogLimitBannerInteractionClogLimitBannerInteraction",description:"Clog clicks on the message/storage limit banner that appears in search for free teams"};La.propTypes={elementName:m["b"].string.isRequired,uiAction:m["b"].number.isRequired,elementType:m["b"].number.isRequired};var Ba=La;var Ua=a(3683);var qa=new Q["b"]("search");var Wa={type:m["b"].oneOf(["messages","files"]).isRequired,overMessageLimit:m["b"].bool.isRequired,overStorageLimit:m["b"].bool.isRequired,clogLimitBannerInteraction:m["b"].func.isRequired};var Ha=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogLinkClick=a.clogLinkClick.bind(a);return a}s()(t,[{key:"componentDidMount",value:function e(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:Da["w"].IMPRESSION,elementName:this.getClogElementName(),elementType:Da["k"].BANNER})}},{key:"getClogElementName",value:function e(){return this.props.overStorageLimit?"storage_limit_banner":"message_limit_banner"}},{key:"getClogUIElement",value:function e(){return this.props.overStorageLimit?Da["z"].FILE_SEARCH_PRICING_LINK:Da["z"].MESSAGE_SEARCH_LINK_TOP}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:Da["w"].CLICK,elementName:this.getClogElementName(),elementType:Da["k"].LINK})}},{key:"isVisible",value:function e(){var t=this.props,a=t.overMessageLimit,r=t.overStorageLimit,n=t.type;return a||r&&"files"===n}},{key:"render",value:function e(){if(!this.isVisible())return null;var t=this.props,a=t.type,r=t.overStorageLimit;var n=void 0;var i=void 0;if(r&&"files"===a){n=qa.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit.");i=qa.t("See paid plans")}else{n="messages"===a?qa.t("Some older messages may not be shown because your workspace has over 10,000 messages."):qa.t("Some older files may not be shown because your workspace has over 10,000 messages.");i=qa.t("Learn more")}return p.a.createElement("div",{className:"p-message_limit_banner"},p.a.createElement("div",{className:"p-message_limit_banner__graphic"},p.a.createElement(X["b"],{type:"eye-closed"})),p.a.createElement("div",{className:"p-message_limit_banner__content"},n,"\xa0",p.a.createElement(Ne["a"],{href:"/pricing?ui_step="+Da["A"].SEARCH_PANE+"&ui_element="+this.getClogUIElement(),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},i)))}}]);return t}(d["PureComponent"]);Ha.displayName="MessageLimitBanner";var Ga=function e(t){var a=Object(L["d"])(t);return{overMessageLimit:Object(z["isOverMessageLimit"])(a),overStorageLimit:Object(z["isOverStorageLimit"])(a)}};var Va={clogLimitBannerInteraction:Ba};var Ka=Object(f["connect"])(Ga,Va)(Ha);var za=a(651);var Qa=a(223);var Ya=a(757);var Ja={id:m["b"].any.isRequired,focused:m["b"].bool.isRequired,onFocusEnter:m["b"].func.isRequired,onFocusLeave:m["b"].func.isRequired,onSelect:m["b"].func.isRequired,ariaLabel:m["b"].string.isRequired,children:m["b"].any.isRequired};var Xa=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(w["a"])(e,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]);e.focusedAfterUpdate=false;return e}s()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;if(a&&"mousedown"===a.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function e(t){t.keyCode===Ya["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"focus",value:function e(){this.container&&this.container.focus()}},{key:"render",value:function e(){var t=this.props,a=t.ariaLabel,r=t.focused,n=t.children;return p.a.createElement(za["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},p.a.createElement("div",{tabIndex:"-1",className:v()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":r}),ref:this.setContainerRef,role:"listitem","aria-label":a,onKeyDown:this.onKeyDown},n))}}]);return t}(d["PureComponent"]);Xa.displayName="FocusManagedListItem";var Za=Xa;function $a(e,t,a,r){if(0===e.length)return null;if(null===t&&null!==a)return a;var n=e.indexOf(t);var i=n+r;i>=e.length?i=e.length-1:-1===n&&r<0?i=e.length-1:i<0&&(i=0);return e[i]}var er=a(3685);var tr={ids:m["b"].array.isRequired,renderItem:m["b"].func.isRequired,itemAriaLabel:m["b"].func.isRequired,onSelectItem:m["b"].func};var ar={onSelectItem:E["noop"]};var rr=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]);a.state={activeItem:null};a.inferredActiveItem=null;a.containerRef=null;a.keyCommands=null;a.itemRefs={};return a}s()(t,[{key:"onArrowKeyDown",value:function e(t){var a=this;t.preventDefault();var r=0;t.keyCode===Ya["codes"].up&&(r=-1);t.keyCode===Ya["codes"].down&&(r=1);0!==r&&this.setState(function(e){return{activeItem:$a(a.props.ids,e.activeItem,a.inferredActiveItem,r)}})}},{key:"onItemFocusEnter",value:function e(t){var a=t.id,r=t.isLifeCycleUpdate;if(r)return;this.inferredActiveItem=a;this.setState(function(){return{activeItem:null}})}},{key:"onItemFocusLeave",value:function e(t){var a=t.id;this.setState(function(e){var t=e.activeItem;return{activeItem:t===a?null:t}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var a=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new Qa["a"](this.containerRef);this.keyCommands.bindAll(a)}}},{key:"setItemRef",value:function e(t,a){this.itemRefs[t]=a}},{key:"focus",value:function e(){this.containerRef&&this.containerRef.focus()}},{key:"focusItem",value:function e(t){if(this.itemRefs[t]){this.itemRefs[t].focus();this.inferredActiveItem=t}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.ids,n=a.itemAriaLabel,i=a.renderItem,s=a.onSelectItem;return p.a.createElement(za["a"],{onFocusLeave:this.onFocusLeave},p.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},r.map(function(e){return p.a.createElement(Za,{ref:function a(r){return t.setItemRef(e,r)},key:e,id:e,ariaLabel:n(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocusEnter,onFocusLeave:t.onItemFocusLeave,onSelect:s},i(e))})))}}]);return t}(d["PureComponent"]);rr.displayName="FocusManagedList";rr.defaultProps=ar;var nr=rr;var ir=nr;var sr=a(547);var or=a(86);var lr=a(103);var cr=a(277);var ur=new Q["b"]("search");var dr={onClick:m["b"].func.isRequired};function pr(e){return p.a.createElement("div",{className:"c-search__back_to_filters"},p.a.createElement(J["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},p.a.createElement(X["b"],{type:"arrow-up-medium"}),"\xa0",ur.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}pr.displayName="BackToFiltersButton";var mr=pr;var hr=new Q["b"]("search");var vr="IMPROVED_SEARCH";var fr=300;var br=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isScrolledTop:e.scrollPosition<fr,scrollPosition:a.props.scrollPosition};a.wrapperRef=p.a.createRef();a.topScrollElementRef=p.a.createRef();Object(w["a"])(a,["onScroll","scrollTop"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition);this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.loading===this.props.loading&&t.errorType===this.props.errorType||this.logTelemetry()}},{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition(this.state.scrollPosition)}},{key:"onScroll",value:function e(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}},{key:"getToastOffset",value:function e(){var t=window.innerWidth;var a=window.innerHeight;var r=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:t,top:a};return{offsetX:24+t-r.right,offsetY:24+a-r.bottom}}},{key:"logTelemetry",value:function e(){var t=this.props.module.replace(/\./g,"_");if(this.props.loading)this.props.telemeter.count("search_ui_"+t+"_view_loading");else switch(this.props.errorType){case R["e"].None:this.props.telemeter.count("search_ui_"+t+"_view");break;case R["e"].NoQuery:this.props.telemeter.count("search_ui_"+t+"_error_noquery");break;case R["e"].Timeout:this.props.telemeter.count("search_ui_"+t+"_error_timeout");break;case R["e"].RenderErrorCaught:this.props.telemeter.count("search_ui_"+t+"_error_render");break;case R["e"].Unknown:this.props.telemeter.count("search_ui_"+t+"_error_unknown");break;default:this.props.telemeter.count("search_ui_"+t+"_unknown");break}}},{key:"scrollTop",value:function e(){this.props.logInfo(vr,"Scrolling to top of results page");if(this.topScrollElementRef.current){this.updateScrollPosition(0);this.wrapperRef.current.scrollTop=0}}},{key:"updateScrollPosition",value:function e(t){this.setState(function(){return{isScrolledTop:t<fr,scrollPosition:t}})}},{key:"render",value:function e(){var t=this.props,a=t.errorType,r=t.loading,n=t.filterUI,i=t.id,s=t.children,o=t.emptyResultsTitle,l=t.numResults,c=t.sortDropdown,u=t.onClickRefreshSearch,d=t.alertHeader,m=t.userQuery;var h=this.state.isScrolledTop;var f=!this.props.usePrimarySearch||!this.props.secondaryView;var b=l?hr.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:l,totalItemCountStr:l>=1e4?Object(sr["a"])(l,{precision:4,decimal_places:0,lowercase:true}):Object(pt["a"])(l)}):null;var g=!r&&a===R["e"].NoQuery;var _=!r&&!g&&a!==R["e"].None;var y=!!m;var k=!r&&!g&&!_&&!l;var O=!r&&!g&&!_&&l>0;return p.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},d,p.a.createElement("div",{className:v()("c-search__view",{"c-search__view--hide_filters":!f}),id:i,role:"tabpanel"},p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},g&&hr.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),_&&hr.t("Something went wrong"),k&&o,O&&b,p.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},c)),r&&p.a.createElement(or["a"],{size:"large"}),g&&p.a.createElement("p",null,hr.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),_&&p.a.createElement("p",null,hr.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",y&&p.a.createElement(Ne["a"],{"data-qa":"search-retry",onClick:u},hr.t("Try again"))),k&&s,O&&s),f&&p.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},hr.t("Filter by")),n)),!h&&p.a.createElement(mr,{onClick:this.scrollTop})))}}]);return t}(d["Component"]);br.displayName="SearchResultsContainerBase";br.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:false,module:"unknown",errorType:R["e"].None,secondaryView:void 0,setScrollPosition:E["noop"],onClickRefreshSearch:E["noop"],scrollPosition:0,userQuery:void 0,logInfo:E["noop"],usePrimarySearch:false,telemeter:fe["d"]};var gr=function e(t){return{logInfo:Object(I["a"])({state:t}).info,usePrimarySearch:Object(g["a"])(t),userQuery:Object(cr["getSearchInputBoxUserQuery"])(t),secondaryView:Object(lr["i"])(t),telemeter:Object(fe["c"])({state:t})}};var _r=Object(f["connect"])(gr,null,null,{withRef:true})(br);var yr=a(48);var kr=a.n(yr);var Or=a(119);var Cr=a(95);var Er=a(456);var Sr=a(3687);var wr=new Q["b"]("search");var Ir=1e4;var jr=3;var Tr={featurePersSearchMsgLimitWarningI18N:m["b"].bool,goToPricingPlans:m["b"].func.isRequired,hiddenMessagesCount:m["b"].number,hiddenUsers:m["b"].arrayOf(m["b"].shape({id:m["b"].string.isRequired}).isRequired),currentUser:m["b"].shape({id:m["b"].string}),clogger:m["b"].shape({track:m["b"].func.isRequired}).isRequired};var Ar={featurePersSearchMsgLimitWarningI18N:false,hiddenMessagesCount:void 0,hiddenUsers:[],currentUser:{}};var Nr=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["getBannerData","handleClick"]);a.impressionClogged=false;return a}s()(t,[{key:"getBannerData",value:function e(){var t=this.props,a=t.currentUser,r=void 0===a?{}:a,n=t.hiddenUsers,i=void 0===n?[]:n;var s=i.slice(0,jr);var o=void 0;var l=[];var c=0;var u=false;s.forEach(function(e){e.id===r.id?o=e:l.push(e);Object(Ht["hasCustomProfilePhoto"])(e)&&(c+=1)});u=c===jr;return{currentUserToDisplay:o,otherUsersToDisplay:l,shouldDisplayAvatars:u}}},{key:"getFormattedMessagesCount",value:function e(){var t=this.props.hiddenMessagesCount;var a=t<Ir?Object(pt["a"])(t):Object(sr["a"])(t,{precision:4,decimal_places:0,lowercase:true});return p.a.createElement("span",{"data-qa":"banner_hidden_messages_message_count"},a)}},{key:"getClogStepVariantString",value:function e(){var t=this.getBannerData(),a=t.currentUserToDisplay,r=t.shouldDisplayAvatars;var n="";switch(this.props.hiddenUsers.length){case 0:n="0_users";break;case 1:n="1_user";break;case 2:n="2_users";break;case 3:n="3_users";break;default:n="more_than_3_users"}a&&(n+="_incl_current");r&&(n+="_with_avatars");return n}},{key:"clogImpression",value:function e(){if(this.impressionClogged)return;this.clog(Da["w"].IMPRESSION,Da["k"].BANNER,"banner");this.impressionClogged=true}},{key:"clogClick",value:function e(){this.clog(Da["w"].CLICK,Da["k"].LINK,"cta")}},{key:"clog",value:function e(t,a,r){this.props.clogger.track(Da["l"].GROWTH_PRICING,{contexts:{ui_context:{step:Da["A"].SEARCH_PANE,action:t,ui_properties:{element_type:a,ui_component:Da["x"].HIDDEN_MESSAGES_BANNER,element_name:r,step_variant:this.getClogStepVariantString()}}}})}},{key:"handleClick",value:function e(){this.clogClick();this.props.goToPricingPlans()}},{key:"renderBannerMessage",value:function e(t){var a=this;var r=t.currentUserToDisplay,n=t.otherUsersToDisplay;var i=this.props,s=i.featurePersSearchMsgLimitWarningI18N,o=i.hiddenMessagesCount,l=i.hiddenUsers;if(!s)return null;var c=n.map(function(e){var t=e.id;return p.a.createElement(Er["a"],{key:t,id:t,noLinking:true})}),u=kr()(c,3),d=u[0],m=u[1],h=u[2];var v=function e(t){var r=t.tag,n=t.text;if("a"!==r)return null;return p.a.createElement(Ne["a"],{onClick:a.handleClick,"data-qa":"banner_hidden_messages_upgrade_cta"},n)};var f=void 0;switch(l.length){case 0:f=wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},v);break;case 1:f=r?wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},v):wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> from {user1Handle} that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,fallbackHash:"e0e00b306fcf1dc9be2f8968aba4c663a998fdd2"},v);break;case 2:f=r?wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and yourself.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,fallbackHash:"db9c908e896007c4ca03a95d22a348bfdc3606b3"},v):wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and {user2Handle}.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,user2Handle:m,fallbackHash:"f75fc3a0de5cbbd8192386c8f8dbad5c6aefc555"},v);break;case 3:f=r?wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and yourself.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,user2Handle:m,fallbackHash:"027a3831dd2785910794440ff4a2fdf825866666"},v):wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,user2Handle:m,user3Handle:h,fallbackHash:"0834aed47d2f532db9ac4251f198eb17d1e60de4"},v);break;default:f=r?wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,user2Handle:m,fallbackHash:"1b18372df292c706b9c8e6b0344379fc91fb2cb4"},v):wr.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:d,user2Handle:m,user3Handle:h,fallbackHash:"fe9326538241a04ce8b934d622e15e3cee334dc2"},v)}return p.a.createElement("div",{className:"p-hidden_messages_banner__text","data-qa":"banner_hidden_messages_text"},f)}},{key:"renderAvatars",value:function e(t){var a=t.currentUserToDisplay,r=t.otherUsersToDisplay;var n=a?[].concat(kt()(r),[a]):r;var i=n.map(function(e){var t=e.id;return p.a.createElement(_e["b"],{key:t,userId:t,ariaHidden:"true",size:36,isInteractive:false,tabIndex:"-1",className:"p-hidden_messages_banner__avatar","data-qa":"banner_hidden_messages_avatar"})});return p.a.createElement("div",{className:"p-hidden_messages_banner__avatars","data-qa":"banner_hidden_messages_avatars"},i)}},{key:"render",value:function e(){if(!(this.props.hiddenMessagesCount>0))return null;var t=this.getBannerData();this.clogImpression();return p.a.createElement(Cr["a"],{type:"custom",level:"warning",className:"p-hidden_messages_banner","data-qa":"banner_hidden_messages"},p.a.createElement("div",{className:"p-hidden_messages_banner__content"},t.shouldDisplayAvatars&&this.renderAvatars(t),this.renderBannerMessage(t)))}}]);return t}(d["PureComponent"]);Nr.displayName="HiddenMessagesBanner";Nr.defaultProps=Ar;var Mr=function e(t){var a=Object(B["getHiddenMessages"])(t)||{from:[]};var r=[];a.from.forEach(function(e){r.push(Object(_t["e"])(t,e.id))});var n=Or["f"]+"?ui_step="+Da["A"].SEARCH_PANE+"&entry_point=hidden_messages_banner";return{featurePersSearchMsgLimitWarningI18N:Object(q["isFeatureEnabled"])(t,"feature_pers_search_msg_limit_warning_i18n"),goToPricingPlans:function e(){return Object(z["openAuthenticatedUrlInBrowser"])(Object(L["d"])(t),n)},currentUser:Object(_t["b"])(t),hiddenUsers:r,hiddenMessagesCount:a.count,clogger:Object(Fa["a"])({state:t})}};var Pr=Object(f["connect"])(Mr)(Nr);var Rr=new Q["b"]("search");var xr="IMPROVED_SEARCH";var Dr="HIDDEN_MESSAGES_BANNER";var Fr="MESSAGE_LIMIT_BANNER";var Lr={close:m["b"].func.isRequired,clogSearchFileClick:m["b"].func.isRequired,getMessageResultSummary:m["b"].func.isRequired,previewFile:m["b"].func.isRequired,currentTeam:m["b"].object.isRequired,results:m["b"].object,uiState:m["b"].object,setPageForModule:m["b"].func.isRequired,fetchSearchResultsByModule:m["b"].func.isRequired,displayModelOrViewById:m["b"].func.isRequired,messageSort:m["b"].string.isRequired,setMessageSort:m["b"].func.isRequired,scrollPosition:m["b"].number.isRequired,setViewScrollPosition:m["b"].func.isRequired,showThread:m["b"].func.isRequired,onClickRefreshSearch:m["b"].func.isRequired,logInfo:m["b"].func,openPermalink:m["b"].func.isRequired,isDebugInfoVisible:m["b"].bool.isRequired,setTab:m["b"].func,telemeter:m["b"].object,openSearchFeedbackDialog:m["b"].func,bannerType:m["b"].oneOf([Dr,Fr,""])};var Br={results:{},uiState:{},logInfo:E["noop"],setTab:E["noop"],telemeter:fe["d"],openSearchFeedbackDialog:E["noop"],bannerType:""};var Ur=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","onSeeFilesClick","setListRef","renderSortToggleMenu","onFeedbackClick","setScrollPosition"]);a.searchResultsContainerRef=p.a.createRef();a.markSearchModuleRenderStart=Object(E["throttle"])(function(){var t=a.props.results;Object($["f"])("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.uiState.loading===this.props.uiState.loading&&t.uiState.error===this.props.uiState.error&&t.uiState.page===this.props.uiState.page||this.logTelemetry()}},{key:"onRepliesClick",value:function e(t){var a=t.channelId,r=t.ts;this.props.logInfo(xr,"Jumping to message replies. channel: "+a+" ts: "+r);this.props.showThread({channelId:a,threadTs:r});this.props.close()}},{key:"onSelectItem",value:function e(t,a){var r=this.getVisibleMessages()[a];if(r&&r.messages&&r.messages.length){var n=r.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}},{key:"onSeeFilesClick",value:function e(){this.props.setTab({tab:"files"})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"messages"})}},{key:"getVisibleMessages",value:function e(){return this.props.results.items[this.props.uiState.page]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"messages",position:t})}},{key:"jumpToMessage",value:function e(t){var a=this;var r=t.teamId,n=t.permalink;this.props.logInfo(xr,"Jumping to message. team: "+r+" permalink: "+n);this.props.openPermalink({permalink:n}).then(function(){return a.props.close()}).catch(function(){return a.props.logInfo(xr,"FAILED:(")})}},{key:"jumpToFile",value:function e(t,a){var r=a.file,n=a.iid,i=a.ts,s=a.channelId,o=a.userId,l=a.botId;this.props.logInfo(xr,"Jumping to file. file: "+r.id);this.props.clogSearchFileClick({iid:n,ts:i,channelId:s,userId:o,botId:l,fileId:r.id});this.props.previewFile({fileId:r.id});this.props.close()}},{key:"logTelemetry",value:function e(){if(!this.props.uiState.loading&&this.props.uiState.error===R["e"].None){var t=this.getVisibleMessages();t&&this.props.telemeter.count("search_ui_messages_results_view_count",t.length)}}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(xr,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(xr,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.results,n=a.uiState;var i=Math.max(n.page+t,1);if(r.items[i])this.props.setPageForModule({moduleType:"messages",page:i});else{this.props.logInfo(xr,"Fetching more results to display on next page");this.props.fetchSearchResultsByModule({module:"messages",reason:"search-messages-page",page:i})}}},{key:"shouldRenderBottomHiddenMessagesBanner",value:function e(){var t=this.props,a=t.bannerType,r=t.uiState;var n=this.getVisibleMessages()||[];return a===Dr&&!r.loading&&n.length>10}},{key:"renderResults",value:function e(){var t=this;var a=this.props.uiState;var r=[];var n=[];if(!a.loading){r=this.getVisibleMessages();n=Object(E["map"])(r,function(e,t){return t})||[]}return p.a.createElement(ir,{ref:this.setListRef,ids:n,onSelectItem:this.onSelectItem,itemAriaLabel:function e(a){return t.props.getMessageResultSummary(r[a])},renderItem:function e(a){return p.a.createElement(dt,C()({key:r[a].iid},r[a],{onMessageJump:t.jumpToMessage,onFileJump:t.jumpToFile,onRepliesClick:t.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function e(t){var a=this;return p.a.createElement(Y["f"],t,p.a.createElement(Y["b"],{key:"recent",label:Rr.t("Most recent"),onSelected:function e(){return a.props.setMessageSort({messageSort:R["d"].recentMessages})}}),p.a.createElement(Y["b"],{key:"relevant",label:Rr.t("Most relevant"),onSelected:function e(){return a.props.setMessageSort({messageSort:R["d"].relevantMessages})}}))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var a=t===R["d"].recentMessages?Rr.t("Most recent"):Rr.t("Most relevant");return p.a.createElement(Y["e"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(J["c"],null,a,p.a.createElement(X["b"],{type:"chevron-down",inline:true})))}},{key:"renderHiddenMessagesBanner",value:function e(){var t=this.props.uiState;if(t.loading)return null;return p.a.createElement(Pr,null)}},{key:"renderMessageLimitBanner",value:function e(){var t=this.props.uiState;if(t.loading)return null;return p.a.createElement(Ka,{type:"messages"})}},{key:"renderDebug",value:function e(){var t=this.props,a=t.isDebugInfoVisible,r=t.results;var n=a&&r.debug;var i=n&&JSON.stringify(r.debug,null,2);return n&&p.a.createElement("div",{className:"c-search__debug"},p.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),p.a.createElement("pre",{className:"c-search__debug_json"},i),p.a.createElement(J["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(Z["writeText"])(i)}},"Copy to clipboard"))}},{key:"renderSearchResults",value:function e(){var t=this.props,a=t.results,r=t.uiState,n=t.bannerType;var i=a&&a.pagination&&a.pagination.total_count||0;var s=a&&a.pagination&&a.pagination.page_count||0;var o=s>1&&!r.loading;var l=r.page||1;return p.a.createElement(d["Fragment"],null,this.renderDebug(),n===Dr&&this.renderHiddenMessagesBanner(),n===Fr&&this.renderMessageLimitBanner(),i>0&&this.renderResults(),i<=0&&p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,Rr.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,Rr.t("Using different keywords.")),p.a.createElement("li",null,Rr.t("Checking for typos.")),p.a.createElement("li",null,Rr.t("Adjusting your filters.")))),this.shouldRenderBottomHiddenMessagesBanner()&&this.renderHiddenMessagesBanner(),!o&&p.a.createElement(mt["a"],{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(gt,{visible:o,currentPageOffset:l,totalPageCount:s,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this.props,a=t.results,r=t.uiState,n=t.scrollPosition;r.loading||this.markSearchModuleRenderStart();var i=a&&a.pagination&&a.pagination.total_count||0;return p.a.createElement(_r,{id:"c-search__tab__messages",module:"messages",scrollPosition:n,loading:r.loading,errorType:r.error,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(xa,null),numResults:i,emptyResultsTitle:Rr.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}),sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef},this.renderSearchResults())}}]);return t}(d["PureComponent"]);Ur.displayName="MessageView";Ur.defaultProps=Br;var qr=function e(t){var a=Object(L["d"])(t);var r=Object(B["getResponseModule"])(t,{module:"messages"})||{items:{}};var n=Object(b["i"])(t,"messages");var i=Object(T["c"])(t);var s=Object(B["getResponseModule"])(t,{module:"files"})||{items:{}};var o=s.pagination&&s.pagination.total_count;var l=Object(he["isScreenReaderEnabled"])(t);var c=function e(a){if(!l)return null;return me(t,a)};var u=Object(B["getHiddenMessages"])(t)||{},d=u.count;var p=void 0;Object(q["isFeatureEnabled"])(t,"feature_pers_search_msg_limit_warning_i18n")?void 0!==d&&(d>0&&!Object(K["isAppStoreBuild"])()&&"treatment"===Object(U["getGroupForUser"])(t,"pers_search_msg_limit_warning")?p=Dr:Object(z["isOverMessageLimit"])(a)&&(p=Fr)):Object(z["isOverMessageLimit"])(a)&&(p=Fr);return{results:r,uiState:n,messageSort:i,currentTeam:a,numOfFileResults:o,getMessageResultSummary:c,logInfo:Object(I["a"])({state:t}).info,isDebugInfoVisible:Object(b["g"])(t),scrollPosition:Object(b["p"])(t).messages,telemeter:Object(fe["c"])({state:t}),bannerType:p}};var Wr={clogSearchFileClick:function e(){return N["e"].apply(void 0,arguments)},previewFile:function e(){return G["c"].apply(void 0,arguments)},displayModelOrViewById:W["a"],fetchSearchResultsByModule:function e(){return P["d"].apply(void 0,arguments)},setMessageSort:F,setPageForModule:function e(){return j["r"].apply(void 0,arguments)},setViewScrollPosition:function e(){return j["J"].apply(void 0,arguments)},showThread:function e(){return G["l"].apply(void 0,arguments)},setTab:V["a"],close:function e(){return H["a"].apply(void 0,arguments)},openPermalink:function e(){return ve["a"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return P["m"].apply(void 0,arguments)}};var Hr=Object(f["connect"])(qr,Wr)(Ur);var Gr=a(1068);var Vr=a(1578);var Kr=new Q["b"]("search");var zr=/[\ue000\ue001]/g;function Qr(e,t){if(!t)return null;var a=t.pretty_type,r=t.name,n=t.timestamp,i=t.user;var s=Object(te["k"])(Object(te["n"])(n,{returnMoment:true}),{shortenMonth:false,excludeYear:Object(te["i"])(n)});return Object(E["unescape"])(Kr.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:a,fileName:r.replace(zr,""),user:Object(re["a"])(e,{userId:i}),date:s}))}var Yr=new Q["b"]("search");var Jr="IMPROVED_SEARCH";var Xr={clogFileClick:m["b"].func,clogSearchFileClick:m["b"].func,close:m["b"].func,error:m["b"].string,fetchSearchResultsByModule:m["b"].func,fileResults:m["b"].object,fileSearchSortChanged:m["b"].func,fileSort:m["b"].oneOf(Object(E["values"])(R["c"])),fileState:m["b"].object,getFileResultSummary:m["b"].func,loading:m["b"].bool,logInfo:m["b"].func,onClickRefreshSearch:m["b"].func,previewFile:m["b"].func,scrollPosition:m["b"].number,setPageForModule:m["b"].func,setTab:m["b"].func,setViewScrollPosition:m["b"].func,telemeter:m["b"].object,openSearchFeedbackDialog:m["b"].func};var Zr={clogFileClick:E["noop"],clogSearchFileClick:E["noop"],close:E["noop"],error:"",fetchSearchResultsByModule:E["noop"],fileResults:{},fileSearchSortChanged:E["noop"],fileSort:R["c"].relevant,fileState:{},getFileResultSummary:E["noop"],loading:false,logInfo:E["noop"],onClickRefreshSearch:E["noop"],previewFile:E["noop"],scrollPosition:0,setPageForModule:E["noop"],setTab:E["noop"],setViewScrollPosition:E["noop"],telemeter:fe["d"],openSearchFeedbackDialog:E["noop"]};var $r=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","onSeeMessagesClick","setScrollPosition","clogLinkClick","onFeedbackClick"]);a.searchResultsContainerRef=p.a.createRef();a.markSearchModuleRenderStart=Object(E["throttle"])(function(){var t=a.props.fileResults;Object($["f"])("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.loading===this.props.loading&&t.error===this.props.error&&t.fileState.page===this.props.fileState.page||this.logTelemetry()}},{key:"onFileClick",value:function e(t,a){var r=a.file,n=a.index;this.props.logInfo(Jr,"Jumping to file. file: "+r.id);this.props.clogSearchFileClick({iid:r.iid,userId:r.user,fileId:r.id,position:n});this.props.previewFile({fileId:r.id});this.props.close()}},{key:"onSelectItem",value:function e(t,a){var r=this.getVisibleFiles()[a];this.onFileClick(t,{file:r,index:a})}},{key:"onSeeMessagesClick",value:function e(){this.props.setTab({tab:"messages"})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"files"})}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"files",position:t})}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"clogLinkClick",value:function e(t,a){this.props.clogFileClick({file:t,payload:a})}},{key:"logTelemetry",value:function e(){if(!this.props.loading&&this.props.error===R["e"].None){var t=this.getVisibleFiles();t&&this.props.telemeter.count("search_ui_files_results_view_count",t.length)}}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(Jr,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(Jr,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.fileState,n=a.fileResults;var i=Math.max(r.page+t,1);n.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",reason:"search-files-page",page:i})}},{key:"renderFiles",value:function e(){var t=this;var a=this.props,r=a.fileState,n=a.fileResults;var i=[];var s=[];if(n.items[r.page||1]){this.markSearchModuleRenderStart();i=this.getVisibleFiles();s=i.map(function(e,t){return t})}return p.a.createElement(ir,{ref:this.setListRef,ids:s,onSelectItem:this.onSelectItem,renderItem:function e(a){return p.a.createElement(Vr["a"],{key:i[a].id,index:a,file:i[a],onClick:t.onFileClick,clogLinkClick:function e(a){t.clogLinkClick(i[0],a)}})},itemAriaLabel:function e(a){return t.props.getFileResultSummary(i[a])}})}},{key:"renderSearchResults",value:function e(){var t=this.props,a=t.fileState,r=t.fileResults,n=t.loading;var i=r&&r.pagination&&r.pagination.total_count||0;var s=r&&r.pagination&&r.pagination.page_count||0;var o=s>1&&!this.props.loading;var l=a.page||1;return p.a.createElement(d["Fragment"],null,!n&&p.a.createElement(Ka,{type:"files"}),i>0&&this.renderFiles(),i<=0&&p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,Yr.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,Yr.t("Using different keywords.")),p.a.createElement("li",null,Yr.t("Checking for typos.")),p.a.createElement("li",null,Yr.t("Adjusting your filters.")))),!o&&p.a.createElement(mt["a"],{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(gt,{visible:o,currentPageOffset:l,totalPageCount:s,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this;this.props.loading||this.markSearchModuleRenderStart();var a=this.props,r=a.scrollPosition,n=a.loading,i=a.fileResults,s=a.fileSort;var o=i&&i.pagination&&i.pagination.total_count||0;return p.a.createElement(_r,{id:"c-search__tab_file",module:"files",scrollPosition:r,loading:n,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(xa,{showFileFilters:true}),numResults:o,emptyResultsTitle:Yr.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"}),errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:p.a.createElement(Y["e"],{"data-qa":"file_sort_toggle",renderMenu:function e(a){var r=a.onTriggerClose;return p.a.createElement(Y["f"],null,p.a.createElement(Y["b"],{"data-qa-sort":R["c"].recent,onSelected:function e(){t.props.fileSearchSortChanged({sort:R["c"].recent});r()}},Yr.t("Most recent")),p.a.createElement(Y["b"],{"data-qa-sort":R["c"].relevant,onSelected:function e(){t.props.fileSearchSortChanged({sort:R["c"].relevant});r()}},Yr.t("Most relevant")))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(J["c"],{"data-qa":"file_sort_selection"},s===R["c"].recent&&Yr.t("Most recent"),s===R["c"].relevant&&Yr.t("Most relevant"),p.a.createElement(X["b"],{type:"chevron-down",inline:true})))},this.renderSearchResults())}}]);return t}(d["PureComponent"]);$r.displayName="FileViewBase";$r.defaultProps=Zr;var en=function e(t){var a=Object(B["getResponseModule"])(t,{module:"files"})||{items:[]};var r=Object(b["i"])(t,"files");var n=Object(B["getResponseModule"])(t,{module:"messages"})||{items:{}};var i=n.pagination&&n.pagination.total_count;var s=Object(he["isScreenReaderEnabled"])(t);var o=function e(a){if(!s)return null;return Qr(t,a)};return{fileResults:a,fileState:r,numOfMessageResults:i,getFileResultSummary:o,scrollPosition:Object(b["p"])(t).files,loading:r&&r.loading,error:r&&r.error,logInfo:Object(I["a"])({state:t}).info,fileSort:Object(Ct["a"])(t),telemeter:Object(fe["c"])({state:t})}};var tn={setPageForModule:function e(){return j["r"].apply(void 0,arguments)},setViewScrollPosition:function e(){return j["J"].apply(void 0,arguments)},setTab:function e(){return V["a"].apply(void 0,arguments)},fetchSearchResultsByModule:function e(){return P["d"].apply(void 0,arguments)},clogSearchFileClick:function e(){return N["e"].apply(void 0,arguments)},clogFileClick:function e(){return Gr["a"].apply(void 0,arguments)},previewFile:function e(){return G["c"].apply(void 0,arguments)},close:function e(){return H["a"].apply(void 0,arguments)},fileSearchSortChanged:function e(){return jt.apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return P["m"].apply(void 0,arguments)}};var an=Object(f["connect"])(en,tn)($r);var rn=a(57);var nn=a(134);var sn=a(162);var on=a(68);var ln=a(144);var cn=a(242);var un=a(1832);var dn=a(2028);var pn=new Q["b"]("search");function mn(e,t){var a=Object(ce["e"])(e,t.id);var r=Object(L["j"])(e,Object(le["isFromAnotherTeam"])(a)?Object(le["teamIdForChannelFromAnotherTeam"])(e,a):a.team_id);var n=Object(z["getTeamDisplayName"])(r);var i=Object(z["isEnterpriseTeam"])(r)?Object(L["f"])(e):null;var s=Object(le["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false});var o=Object(dn["a"])({channelName:s,workspaceName:n,orgName:i,isOrgGlobalSharedPublicOrPrivateChannel:Object(le["isOrgGlobalSharedPublicOrPrivateChannel"])(a),isOrgSharedPublicOrPrivateChannel:Object(le["isOrgSharedPublicOrPrivateChannel"])(a),isExternallySharedChannel:Object(le["isExternallySharedChannel"])(a),isArchived:Object(le["isArchived"])(a),isPrivate:Object(le["isPrivateChannel"])(a),isNotMember:!Object(le["isMemberOfChannel"])(a)});var l=Object(ne["a"])(e,Object(le["getPurpose"])(a));return pn.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:o,memberCount:t.member_count,channelPurpose:l})}var hn=a(55);var vn=a(118);var fn=a(54);var bn=a(102);var gn=a(875);var _n=a(1991);var yn=a(1238);var kn=a(3689);var On=new Q["b"]("search");var Cn="IMPROVED_SEARCH";var En={channel:m["b"].object.isRequired,channelName:m["b"].string.isRequired,channelPreviousName:m["b"].string,channelTeamName:m["b"].string.isRequired,joinState:m["b"].string,leaveState:m["b"].string,memberCount:m["b"].number.isRequired,justification:m["b"].string,onClickLeave:m["b"].func,onClickJoin:m["b"].func,onClickChannel:m["b"].func,canJoinChannel:m["b"].bool,canLeaveChannel:m["b"].bool,canLeaveChannelReason:m["b"].string,useChannelEntity:m["b"].bool,iid:m["b"].string,logger:m["b"].object,telemeter:m["b"].object};var Sn={joinState:"",leaveState:"",justification:null,onClickLeave:E["noop"],onClickJoin:E["noop"],onClickChannel:E["noop"],canJoinChannel:true,canLeaveChannel:true,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:false,iid:"unknown",logger:{error:E["noop"]},telemeter:{count:E["noop"]}};var wn=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]);a.state={didCatch:false,hasFocus:false,hasActionFocus:false,hasActionHover:false};a.interactionTooltipRef=p.a.createRef();a.rootRef=p.a.createRef();a.hasRenderedNonexistentChannel=false;return a}s()(t,[{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){this.setState(function(){return{hasFocus:false}})}},{key:"onInteractionButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInteractionButtonFocus",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}},{key:"onInteractionButtonBlur",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}},{key:"onActionButtonFocus",value:function e(t){this.setState(function(){return{hasActionFocus:true}});t.target.parentNode.scrollTop=0}},{key:"onActionButtonBlur",value:function e(){this.setState(function(){return{hasActionFocus:false}})}},{key:"onActionsMouseEnter",value:function e(){this.setState(function(){return{hasActionHover:true}})}},{key:"onActionsMouseLeave",value:function e(){this.setState(function(){return{hasActionHover:false}})}},{key:"onClickJoin",value:function e(t){var a=this;this.props.onClickJoin(t).then(function(){a.updateFocusState()})}},{key:"onClickLeave",value:function e(t){var a=this;this.props.onClickLeave(t).then(function(){a.updateFocusState()})}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_channels_result_channel_render_error");this.props.logger.error(Cn,"Error caught by ChannelSearchResult "+a.componentStack,t)}},{key:"updateFocusState",value:function e(){var t=this;this.rootRef&&this.rootRef.current&&this.setState(function(){return{hasFocus:t.rootRef.current.contains(document.activeElement)}})}},{key:"trackNonExistentChannelRender",value:function e(){if(this.hasRenderedNonexistentChannel)return;this.hasRenderedNonexistentChannel=true;this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1);this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"})}},{key:"renderError",value:function e(){var t=this.props.onClickChannel;return p.a.createElement("div",{className:"c-channel_search_result","data-qa":"channel_search_result"},p.a.createElement("div",{role:"presentation",onClick:t},p.a.createElement("div",{className:"c-channel_search_result__channel"},p.a.createElement("div",{className:"c-channel_search_result__name_error"},p.a.createElement(gn["a"],{type:"unknown"})),p.a.createElement("div",null,On.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")))))}},{key:"render",value:function e(){if(this.state.didCatch)return this.renderError();var t=this.props,a=t.channel,r=t.channelTeamName,n=t.channelPreviousName,i=t.memberCount,s=t.joinState,o=t.leaveState,l=t.justification,c=t.onClickChannel,u=t.useChannelEntity;var d=On.t("Required");var m=On.t("Archived");var h=On.t("Can\u2019t leave");var f=On.t("Another workspace");var b=On.t("Can\u2019t leave");var g=On.t("Your organization requires everyone to be in this channel.");var _=On.t("You can\u2019t join an archived channel, but you can view and search its contents.");var y=On.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:r});var k=On.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:r});var O=On.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName});var C=On.t("As a guest, you can\u2019t leave the channel you were invited to.");var E=On.t("As a guest, you need to be in at least one channel.");var S=Object(le["isMemberOfChannel"])(a);var w="loading"===s;var I="loading"===o;var j=S&&this.props.canLeaveChannel;var T=null;var A=null;if(S&&!j){switch(this.props.canLeaveChannelReason){case on["b"].LAST_MEMBER:break;case on["b"].USER_IS_RESTRICTED:T=h;A=C;break;case on["b"].USER_IS_RESTRICTED_LAST_CHANNEL:case on["b"].USER_IS_ULTRA_RESTRICTED:T=h;A=E;break;case on["b"].CANT_LEAVE_GENERAL:case on["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL:T=d;A=g;break;case on["b"].USER_NOT_FOUND:case on["b"].CHANNEL_NOT_FOUND:default:T=b;A=O}if(Object(le["isFromAnotherTeam"])(a)){T=f;A=k}}else if(Object(le["isArchived"])(a)){T=m;A=_}else if(Object(le["isFromAnotherTeam"])(a))if(S){T=f;A=k}else{T=f;A=y}else if(!S&&!this.props.canJoinChannel){T=b;A=O}var N=!Object(le["isUnknownOrNonExistent"])(a)&&T&&A;var M=!Object(le["isUnknownOrNonExistent"])(a)&&!(T&&A);var P=Object(le["isNonExistent"])(a);if(P){this.trackNonExistentChannelRender();return this.renderError()}return p.a.createElement("div",{className:v()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":j}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},p.a.createElement("div",{role:"presentation",onClick:c},!P&&(u?p.a.createElement(_n["a"],{className:"c-channel_search_result__channel",channel:a,bestFormerName:n,onClick:c,inlineNameSuffix:On.t("View channel"),nameSuffix:N&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(fn["c"],{tip:A,ref:this.interactionTooltipRef},p.a.createElement(J["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",p.a.createElement(X["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},On.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement(X["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(vn["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:bn["a"].MEDIUM,showTooltips:false,noHighlights:true})))}):p.a.createElement(yn["a"],{size:"medium",className:"c-channel_search_result__channel",channel:a,bestFormerName:n,onClick:c,inlineNameSuffix:On.t("View channel"),nameSuffix:N&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(fn["c"],{tip:A,ref:this.interactionTooltipRef},p.a.createElement(J["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",p.a.createElement(X["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},On.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement(X["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(vn["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:bn["a"].MEDIUM,showTooltips:false,noHighlights:true})))}))),M&&p.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},p.a.createElement(J["b"],{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:I,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},I?On.t("Leaving..."):On.t("Leave")),p.a.createElement("div",{className:v()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},On.t("Joined")),p.a.createElement(J["b"],{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:w,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},w?On.t("Joining..."):On.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},On.t("Joined")),p.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},On.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},On.t("Leave")),p.a.createElement(J["b"],{type:"danger",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},On.t("Leaving...")),p.a.createElement(J["b"],{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},On.t("Joining..."))))}}],[{key:"getDerivedStateFromError",value:function e(){return{didCatch:true}}}]);return t}(p.a.Component);wn.displayName="ChannelSearchResult";wn.defaultProps=Sn;var In=function e(t,a){var r=a.channel,n=a.channelData;var i=C()({},r,{name:n.name,purpose:n.purpose});var s=Object(on["m"])(t,n.id);var o=Object(L["d"])(t);return{useChannelEntity:"channel_search_new_entity"===Object(U["getGroupForUser"])(t,"channel_search_new_entity"),channel:Object(le["isUnknownOrNonExistent"])(r)?r:i,channelName:Object(le["getDisplayNameForChannel"])(t,r),channelPreviousName:n.previous_name,channelTeamName:Object(z["getTeamDisplayName"])(Object(le["isFromAnotherTeam"])(r)?Object(L["j"])(t,Object(le["teamIdForChannelFromAnotherTeam"])(t,r)):o),isMember:Object(le["isFromAnotherTeam"])(r)?Object(le["isMemberOfChannel"])(r):n.is_member,memberCount:n.member_count,justification:n.justification,joinState:Object(b["a"])(t,n.id),leaveState:Object(b["b"])(t,n.id),canJoinChannel:Object(on["g"])(t,n.id),canLeaveChannel:s.ok,canLeaveChannelReason:s.reason,logger:Object(I["a"])({state:t}),telemeter:Object(fe["c"])({state:t})}};var jn=Object(f["connect"])(In)(wn);var Tn=m["b"].shape({type:m["b"].oneOf(Object(E["values"])(R["a"])),teamId:m["b"].string,teamDisplayName:m["b"].string});var An=m["b"].shape({state:m["b"].oneOf(["ready","loading","error"]).isRequired,teams:m["b"].arrayOf(m["b"].shape({id:m["b"].string.isRequired,name:m["b"].string.isRequired})).isRequired});var Nn=m["b"].arrayOf(m["b"].string);var Mn=m["b"].arrayOf(m["b"].string);var Pn=a(10);var Rn=a.n(Pn);var xn=a(231);var Dn=a(22);var Fn=a(99);var Ln=Object(A["b"])("Channel/people search: fetch shared teams",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;var n=Object(b["q"])(t());var i=36e5;var s=3;var o="ready"===n.state&&n.refreshed<=Date.now()-i||"error"===n.state;if(o){e(Object(j["E"])());return e(Object(Fn["n"])({reason:r})).then(function(a){if(!a.ok)throw new Error(a);var r=Object(E["uniq"])(a.channels.map(function(e){return e.team.id}));var n=t();var i=Rn()({},Object(Dn["b"])(n),true);if(Object(xn["e"])(n)){i[Object(Dn["a"])(n)]=true;Object(L["a"])(n).forEach(function(e){i[e.id]=true})}var o=r.filter(function(e){return!i[e]});e(Object(j["F"])({teamIds:o}));e(Object(j["i"])({teamIds:o.slice(0,s)}));e(Object(j["u"])({teamIds:o.slice(0,s)}))}).catch(function(){e(Object(j["D"])())})}return Promise.resolve()});Ln.meta={name:"fetchSharedTeams",key:"actionsUniversalSearchFetchSharedTeamsFetchSharedTeams",description:"Channel/people search: fetch shared teams"};Ln.propTypes={reason:m["b"].string};var Bn=Object(A["b"])("Channel search filter select is opened",function(e){return e(Ln({reason:"channel_search_open"}))});Bn.meta={name:"channelSearchOpened",key:"actionsUniversalSearchChannelSearchOpenedChannelSearchOpened",description:"Channel search filter select is opened"};Bn.propTypes=null;var Un=a(881);var qn=new Q["b"]("search");var Wn={sharedTeams:An,filters:Nn,filterSuggestions:Mn,toggleSearchOrgFilter:m["b"].func.isRequired,clogSearchFilterAdded:m["b"].func,clogSearchFilterRemoved:m["b"].func};var Hn={sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:E["noop"],clogSearchFilterRemoved:E["noop"]};var Gn=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["loadOptions","filterOptions","renderOption"]);return a}s()(t,[{key:"onOrgFilterChange",value:function e(t,a){var r=this.props.filters;var n=!r.includes(t);n?this.props.clogSearchFilterAdded({filter_channel_team:t,filter_position:a}):this.props.clogSearchFilterRemoved({filter_channel_team:t,filter_position:a});this.props.toggleSearchOrgFilter({teamId:t,value:n})}},{key:"loadOptions",value:function e(t){var a=this.props.sharedTeams;var r=new Un["b"](t);return Promise.resolve({options:Object(E["sortBy"])(a.teams.map(function(e){return{value:e.id,score:0===t.length?0:r.normalizeAndScore(Object(z["getTeamDisplayName"])(e))}}),"score")})}},{key:"filterOptions",value:function e(t,a){var r=this.props.filters;return a.filter(function(e){return isFinite(e.score)&&!r.includes(e.value)})}},{key:"renderOption",value:function e(t){var a=this.props.filters;var r=t.value;return p.a.createElement(d["Fragment"],null,p.a.createElement(ta["b"],{id:r,size:18,ariaHidden:"true",tabIndex:"-1"})," ",p.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},p.a.createElement(aa["a"],{bold:a.includes(r),id:r})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.sharedTeams,n=a.filters,i=a.filterSuggestions;var s="loading"===r.state;var o=r.teams&&r.teams.length>0;if(s||!o)return null;var l=i.map(function(e){return{value:e,checked:n.includes(e)}});return p.a.createElement(ca,{title:qn.t("External organizations")},p.a.createElement($t,{checkboxName:"external_org",placeholderText:qn.t("Enter an external organization"),showMoreOptionsAriaLabel:qn.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:l,onOptionChange:function e(a){t.onOrgFilterChange(a.value,l.indexOf(a))},onOptionAdd:function e(a){t.onOrgFilterChange(a.value,null)},filterOptions:this.filterOptions}))}}]);return t}(d["PureComponent"]);Gn.displayName="SearchOrgFilter";var Vn=Gn;Gn.defaultProps=Hn;var Kn=a(1259);var zn=a(3691);var Qn=new Q["b"]("search");var Yn=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onChange=e.onChange.bind(e);return e}s()(t,[{key:"onChange",value:function e(t){this.props.onChannelTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;var a=this.props.sharedTeams;var r="ready"===a.state&&a.teams.length>1;var n=["all","private","archived"];r&&n.push("shared");var i={all:Qn.t("All channels"),private:Qn.t("Private channels"),archived:Qn.t("Archived channels"),shared:Qn.t("Shared channels")};var s=n.map(function(e){return{label:i[e],value:e}});var o=s.find(function(e){return e.value===t.props.channelType.type});return p.a.createElement(Kn["a"],{width:"100%",selectId:"channel_filter_type",options:s,selectedOption:o,onOptionSelected:this.onChange})}}]);return t}(d["Component"]);Yn.displayName="ChannelsFilterChannelType";var Jn=Yn;Yn.defaultProps={channelType:{type:R["a"].all},sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:E["noop"]};var Xn=new Q["b"]("search");var Zn=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.onChannelSearchOpened()}},{key:"onChannelTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type;this.props.clogSearchFilterAdded({filter_channel_type:a});this.props.setChannelSearchFilterType({type:a})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onHideMemberChannelsChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"});this.props.setChannelSearchHideMemberChannels({value:t.target.checked})}},{key:"renderPrefs",value:function e(){var t=this.props,a=t.showEnterpriseOptions,r=t.filterWorkspaceOnly,n=t.hideMemberChannels,i=t.currentTeam;return p.a.createElement(ca,{title:Xn.t("More options")},p.a.createElement("div",{className:"p-search_filter__select"},a&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":r}),htmlFor:"search-channel-filter-workspace-only"},Xn.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(ta["b"],{className:"p-search_filter__workspace_only_team_icon",team:i,size:18})," ",p.a.createElement(aa["a"],{id:i.id,bold:r}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:r,onChange:this.onOnlySearchWorkspaceChange,id:"search-channel-filter-workspace-only"})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n}),htmlFor:"search-channel-filter-hide-member-channels"},Xn.t("Hide my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:n,onChange:this.onHideMemberChannelsChange,id:"search-channel-filter-hide-member-channels"}))))}},{key:"render",value:function e(){var t=this.props,a=t.channelType,r=t.sharedTeams,n=t.filters,i=t.filterSuggestions;var s="loading"===r.state;return p.a.createElement("div",{className:"p-search_filters"},p.a.createElement(ca,{title:Xn.t("Channel type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Jn,{isLoading:s,sharedTeams:r,channelType:a,onChannelTypeChange:this.onChannelTypeChange}))),r.teams.length>0&&p.a.createElement(Vn,{sharedTeams:r,filters:n,filterSuggestions:i,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}]);return t}(d["Component"]);Zn.displayName="ChannelsFilterUIBase";Zn.defaultProps={channelType:{type:R["a"].all},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:E["noop"],clogSearchFilterRemoved:E["noop"]};var $n=function e(t){var a=Object(b["q"])(t);var r=Object(b["d"])(t);var n=Object(L["d"])(t);var i=Object(b["c"])(t),s=i.type,o=i.teamId;return{channelType:{type:s,teamId:o,teamDisplayName:o&&Object(z["getTeamDisplayName"])(Object(L["j"])(t,o))},filters:Object(b["e"])(t),filterSuggestions:Object(L["k"])(t,r).map(function(e){return e.id}),currentTeam:n,showEnterpriseOptions:Object(xn["e"])(t),filterWorkspaceOnly:Object(T["f"])(t),hideMemberChannels:Object(T["a"])(t),sharedTeams:{state:a.state,teams:Object(L["k"])(t,a.teamIds).map(function(e){return{id:e.id,name:Object(z["getTeamDisplayName"])(e)}})}}};var ei={setChannelSearchFilterType:function e(){return Nt.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Mt.apply(void 0,arguments)},setChannelSearchHideMemberChannels:function e(){return It.apply(void 0,arguments)},onChannelSearchOpened:function e(){return Bn.apply(void 0,arguments)},toggleChannelSearchOrgFilter:function e(){return Pt.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return N["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return N["g"].apply(void 0,arguments)}};var ti=Object(f["connect"])($n,ei)(Zn);var ai=a(3693);var ri=new Q["b"]("search");var ni="IMPROVED_SEARCH";function ii(e){var t=e.channelName,a=e.onRetry,r=ge()(e,["channelName","onRetry"]);return p.a.createElement(sn["b"],C()({position:"bottom-right",icon:"warning",showCloseButton:true},r),p.a.createElement("span",null,p.a.createElement("strong",null,ri.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",ri.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(nn["a"],{onClick:a},ri.t("Try again"))))}ii.displayName="ErrorToastCannotJoinBlip";function si(e){var t=e.channelName,a=ge()(e,["channelName"]);return p.a.createElement(sn["b"],C()({position:"bottom-right",icon:"warning",showCloseButton:true},a),p.a.createElement("span",null,p.a.createElement("strong",null,ri.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",ri.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}si.displayName="ErrorToastCannotLeaveRestricted";function oi(e){var t=e.channelName,a=e.onRetry,r=ge()(e,["channelName","onRetry"]);return p.a.createElement(sn["b"],C()({position:"bottom-right",icon:"warning",showCloseButton:true},r),p.a.createElement("span",null,p.a.createElement("strong",null,ri.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",ri.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(nn["a"],{onClick:a},ri.t("Try again"))))}oi.displayName="ErrorToastCannotLeaveBlip";var li=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick"]);a.searchResultsContainerRef=p.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.moduleState.loading===this.props.moduleState.loading&&t.moduleState.error===this.props.moduleState.error&&t.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"onNavigateChannel",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:N["a"].channel,iid:this.props.iidMap[t.id],channelId:t.id});var r=void 0;if(Object(le["isFromAnotherTeam"])(t)){var n=this.props.teamIdForChannelFromAnotherTeam(t);r=Object(hn["a"])()?this.props.setPrimaryView({id:t.id,teamId:n}):this.props.openChannelFromAnotherTeam({channelId:t.id,teamId:n})}else r=this.props.setPrimaryView({id:t.id,teamId:t.team_id});return r.then(function(){return a.props.close()})}},{key:"onJoinChannelId",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:N["a"].channelJoin,iid:this.props.iidMap[t],channelId:t});return this.props.joinChannelFromSearch({channelId:t}).then(function(){a.listEl&&a.listEl.focusItem(t)}).catch(function(){var e=a.props.getDisplayNameForChannel(a.props.flannelChannelMap[t]);a.props.enqueueToast({element:p.a.createElement(ii,C()({channelName:e,onRetry:function e(){return a.onJoinChannelId(t)}},a.getToastOffset()))})})}},{key:"onLeaveChannelId",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:N["a"].channelLeave,iid:this.props.iidMap[t],channelId:t});return this.props.leaveChannelFromSearch({channelId:t}).then(function(){a.listEl&&a.listEl.focusItem(t)}).catch(function(){var e=a.props.getDisplayNameForChannel(a.props.flannelChannelMap[t]);var r=a.props.canLeaveChannelWithReason(t),n=r.ok,i=r.reason;var s=!n&&[on["b"].CANT_LEAVE_GENERAL,on["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(i);a.props.enqueueToast({element:s?p.a.createElement(si,C()({channelName:e},a.getToastOffset())):p.a.createElement(oi,C()({channelName:e,onRetry:function e(){return a.onLeaveChannelId(t)}},a.getToastOffset()))})})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"channels"})}},{key:"getVisibleChannels",value:function e(){return this.props.channelsResponse.items[this.props.moduleState.page||1]}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t=this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset();return t}return{}}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"channels",position:t})}},{key:"logTelemetry",value:function e(){if(!this.props.moduleState.loading&&this.props.moduleState.error===R["e"].None){var t=this.getVisibleChannels();t&&this.props.telemeter.count("search_ui_channels_results_view_count",t.length)}}},{key:"pageForward",value:function e(){this.props.clogSearchChannelClick({type:N["a"].channelPageNext});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ni,"Page forward in channel results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.props.clogSearchChannelClick({type:N["a"].channelPagePrev});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ni,"Page backwards in channel results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.moduleState,n=a.channelsResponse,i=a.sort;var s=Math.max(r.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"channels",page:s}):this.props.fetchSearchResultsByModule({module:"channels",sort:i,reason:"search-channels-page",page:s})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.sort,n=a.setSort,i=a.scrollPosition,s=a.moduleState,o=a.channelsResponse,l=a.channelSummaryLabels,c=a.flannelChannelMap;var u=[[R["b"].relevant,ri.t("Most relevant")],[R["b"].created,ri.t("Date created (newest to oldest)")],[R["b"].name,ri.t("Name (A to Z)")],[R["b"].memberCount,ri.t("Members (most to least)")]];var m=Object(E["fromPairs"])(u);var h=this.getVisibleChannels()||[];var v=h.reduce(function(e,t){e[t.id]=t;return e},{});var f=o.pagination&&o.pagination.total_count;var b=f>0;o.debug&&Object(rn["exportToGlobalDebugger"])("channelSearchExplain",Object(E["sortBy"])(o.debug.features,function(e){return-e.total_score}));var g=o&&o.pagination&&o.pagination.page_count||0;var _=g>1&&!s.loading;var y=s.page||1;return p.a.createElement(_r,{id:"c-search__tab_channel",module:"channels",loading:s.loading,errorType:s.error,scrollPosition:i,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(ti,null),numResults:f,emptyResultsTitle:ri.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(Y["e"],{"data-qa":"channel_sort_toggle",renderMenu:function e(t){var a=t.onTriggerClose;return p.a.createElement(Y["f"],null,u.map(function(e){var t=kr()(e,2),r=t[0],i=t[1];return p.a.createElement(Y["b"],{"data-qa-sort":r,key:r,onSelected:function e(){n({sort:r});a()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(J["c"],{"data-qa":"channel_sort_selection"},m[r],p.a.createElement(X["b"],{type:"chevron-down",inline:true})))},b&&p.a.createElement(ir,{ref:this.setListRef,ids:h.map(function(e){return e.id}),onSelectItem:function e(a,r){return t.onNavigateChannel(c[r])},itemAriaLabel:function e(t){return l[t]},renderItem:function e(a){return p.a.createElement(jn,{key:a,channel:c[a],channelData:v[a],iid:t.props.iidMap[a],onClickChannel:function e(r){var n=r.target;var i=false;while(n&&n!==r.currentTarget){"A"===n.tagName&&n.href&&(i=true);n=n.parentNode}if(i)t.props.clogSearchChannelClick({type:N["a"].channelPurposeLink,iid:t.props.iidMap[a],channelId:a});else{r.preventDefault();t.onNavigateChannel(c[a])}},onClickJoin:function e(r){r.preventDefault();return t.onJoinChannelId(a)},onClickLeave:function e(r){r.preventDefault();return t.onLeaveChannelId(a)}})}}),!b&&p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,ri.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,ri.t("Using different keywords.")),p.a.createElement("li",null,ri.t("Checking for typos.")),p.a.createElement("li",null,ri.t("Adjusting your filters.")))),!_&&p.a.createElement(mt["a"],{className:f>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(gt,{visible:_,currentPageOffset:y,totalPageCount:g,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(d["Component"]);li.displayName="ChannelViewBase";li.defaultProps={sort:R["b"].relevant,setSort:E["noop"],scrollPosition:0,setViewScrollPosition:E["noop"],moduleState:{},channelsResponse:{items:{}},setPageForModule:E["noop"],fetchSearchResultsByModule:E["noop"],logInfo:E["noop"],setPrimaryView:E["noop"],openChannelFromAnotherTeam:E["noop"],close:E["noop"],teamIdForChannelFromAnotherTeam:E["noop"],clogSearchChannelClick:E["noop"],channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:E["noop"],leaveChannelFromSearch:E["noop"],flannelChannelMap:{},getDisplayNameForChannel:E["noop"],enqueueToast:E["noop"],canLeaveChannelWithReason:E["noop"],onClickRefreshSearch:E["noop"],openSearchFeedbackDialog:E["noop"],telemeter:fe["d"]};var ci=function e(t){var a=Object(b["i"])(t,"channels")||{};var r=Object(B["getResponseModule"])(t,{module:"channels"})||{items:{}};var n=r.items[a.page||1]||[];var i={};var s={};var o={};n.forEach(function(e){s[e.id]=mn(t,e);var a=Object(ce["e"])(t,e.id);o[e.id]=a;i[e.id]=e.iid});return{sort:Object(T["b"])(t),scrollPosition:Object(b["p"])(t).channels,moduleState:a,channelsResponse:r,iidMap:i,channelSummaryLabels:s,flannelChannelMap:o,logInfo:Object(I["a"])({state:t}).info,teamIdForChannelFromAnotherTeam:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return le["teamIdForChannelFromAnotherTeam"].apply(void 0,[t].concat(r))},getDisplayNameForChannel:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return le["getDisplayNameForChannel"].apply(void 0,[t].concat(r))},canLeaveChannelWithReason:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return on["m"].apply(void 0,[t].concat(r))},telemeter:Object(fe["c"])({state:t})}};var ui=function e(t){return{setSort:function e(){return t(Tt.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(j["J"].apply(void 0,arguments))},setPageForModule:function e(){return t(j["r"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(P["d"].apply(void 0,arguments))},setPrimaryView:function e(){return t(cn["a"].apply(void 0,arguments))},openChannelFromAnotherTeam:function e(){return t(un["a"].apply(void 0,arguments))},close:function e(){return t(H["a"].apply(void 0,arguments))},clogSearchChannelClick:function e(){return t(N["c"].apply(void 0,arguments))},joinChannelFromSearch:function e(){return t(P["e"].apply(void 0,arguments))},leaveChannelFromSearch:function e(){return t(P["f"].apply(void 0,arguments))},enqueueToast:function e(){return t(ln["enqueueToast"].apply(void 0,arguments))},openSearchFeedbackDialog:function e(){return t(P["m"].apply(void 0,arguments))}}};var di=Object(f["connect"])(ci,ui)(li);var pi=a(49);var mi=a(122);var hi=a(61);var vi=a(1638);var fi=a(1679);var bi=a(1222);var gi=a(315);var _i=a(1247);var yi=a(1448);var ki=a(572);var Oi=a(514);var Ci=a(280);var Ei=a(363);var Si=a(59);var wi=a(1191);var Ii=a(1058);var ji=Object(A["b"])("People search result top terms clicked",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.member;var n=t();var i=Object(cr["getSearchInputBoxDisplayQuery"])(n);var s=Object(wi["b"])(n,r);var o=i+" "+s;return e(Object(Ii["a"])({textyString:o,queryIsUserGenerated:false})).then(function(){e(Object(j["I"])({tab:"messages"}));return e(Object(B["setEditableRequestQueryThenRequest"])({query:o}))})});ji.meta={name:"peopleSearchRefineTopTerms",key:"actionsUniversalSearchPeopleSearchTopTermsPeopleSearchRefineTopTerms",description:"People search result top terms clicked"};ji.propTypes={member:m["b"].object.isRequired};var Ti=a(3695);var Ai=new Q["b"]("member_profile");var Ni="IMPROVED_SEARCH";var Mi={featureReactMemberProfileCard:m["b"].bool.isRequired,iid:m["b"].string,member:m["b"].object.isRequired,memberWithHighlights:m["b"].object.isRequired,teamCustomProfileFields:m["b"].arrayOf(m["b"].shape({label:m["b"].string.isRequired,name:m["b"].string.isRequired,type:m["b"].string.isRequired})).isRequired,customProfileFieldMemberNamesById:m["b"].objectOf(m["b"].string).isRequired,displayQuery:m["b"].string,onClickMember:m["b"].func,clogSearchPeopleClick:m["b"].func,startImByMemberId:m["b"].func,closeSearch:m["b"].func,onClickTopTerms:m["b"].func,showMemberProfile:m["b"].func,onNavigateError:m["b"].func,onViewProfileError:m["b"].func,logger:m["b"].object,telemeter:m["b"].object};var Pi={iid:"",displayQuery:"",onClickMember:E["noop"],clogSearchPeopleClick:E["noop"],startImByMemberId:E["noop"],closeSearch:E["noop"],onClickTopTerms:E["noop"],showMemberProfile:E["noop"],onNavigateError:E["noop"],onViewProfileError:E["noop"],logger:{error:E["noop"]},telemeter:fe["d"]};var Ri=function e(t){return p.a.createElement(vn["a"],{emojiSize:bn["a"].SMALL,text:t,noJumbomoji:true,noLinking:true,noSpecials:true,noEmojiText:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})};Ri.displayName="renderSearchHighlightText";var xi=function e(){return/[\ue000\ue001]/g};var Di=function e(t){return xi().test(t)};var Fi=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]);a.infoTooltipRef=p.a.createRef();a.state={didCatch:false,resultHasFocus:false,personHasFocus:false,isExpanded:false};return a}s()(t,[{key:"shouldComponentUpdate",value:function e(t,a){return!Object(E["isEqual"])(this.props,t)||!Object(E["isEqual"])(this.state,a)}},{key:"onFocusResult",value:function e(){this.setState(function(){return{resultHasFocus:true}})}},{key:"onBlurResult",value:function e(){this.setState(function(){return{resultHasFocus:false}})}},{key:"onFocusPerson",value:function e(){this.setState(function(){return{personHasFocus:true}})}},{key:"onBlurPerson",value:function e(){this.setState(function(){return{personHasFocus:false}})}},{key:"onClickMember",value:function e(t){t.isDefaultPrevented()||this.props.onClickMember(t)}},{key:"onClickMemberName",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:N["b"].avatar,iid:this.props.iid,userId:this.props.member.id});if(!this.props.featureReactMemberProfileCard){t.persist();Object(ki["a"])(t,this.props.member.id)}}},{key:"onClickShowMore",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:N["b"].showMore,iid:this.props.iid,userId:this.props.member.id});this.setState(function(){return{isExpanded:true}})}},{key:"onClickNavigate",value:function e(t){var a=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:N["b"].navigateToMessages,iid:this.props.iid,userId:this.props.member.id});this.props.startImByMemberId({memberId:this.props.member.id}).then(function(){a.props.closeSearch()}).catch(function(e){a.props.onNavigateError(function(){return a.onClickNavigate(t)});throw e})}},{key:"onClickViewProfile",value:function e(t){var a=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:N["b"].viewProfile,iid:this.props.iid,userId:this.props.member.id});this.props.showMemberProfile({memberId:this.props.member.id}).then(function(){a.props.closeSearch()}).catch(function(e){a.props.onViewProfileError(function(){return a.onClickViewProfile(t)});throw e})}},{key:"onClickTopTerms",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:N["b"].topTerms,iid:this.props.iid,userId:this.props.member.id});this.props.onClickTopTerms({member:this.props.member})}},{key:"onInfoTooltipClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInfoTooltipFocus",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}},{key:"onInfoTooltipBlur",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}},{key:"getRenderingData",value:function e(){var t=this.props,a=t.member,r=t.memberWithHighlights,n=t.teamCustomProfileFields,i=t.customProfileFieldMemberNamesById;var s=Object(Ht["isInvitedUser"])(a);var o=!!r.top_terms;var l=Object(Ht["getMemberRealName"])(r);var c=Object(Ht["getMemberProfileFieldDisplayName"])(r);var u=Object(Ht["getMemberTitle"])(r);var d=Object(Ht["getMemberEmail"])(r);var m=Object(Ht["getMemberProfileFields"])(r);var h=Object(Ht["getMemberProfile"])(r);var v=h&&h.status_emoji;var f=h&&h.status_text;if(s)return{rows:[],realName:l,memberTitle:u};var b=[];c&&l!==c&&Di(c)&&b.push({className:null,key:"displayname",term:Ai.t("Display name",{ns:"member_profile"}),valueAsText:c,node:Ri(c)});d&&Di(d)&&b.push({className:null,key:"email",term:Ai.t("Email address",{ns:"member_profile"}),valueAsText:d,node:Ri(d)});if(v&&Di(v)||f&&Di(f)){var g=[];v&&g.push(v);f&&g.push(f);var _=g.join(" ");b.push({className:null,key:"status",term:Ai.t("Status",{ns:"member_profile"}),valueAsText:_,node:Ri(_)})}n.forEach(function(e){var t=e.name;if(m&&m[t]&&m[t].value&&xi().test(m[t].value))if("user"===e.type){var a=m[t].value.split(",");var r=Object(Ei["a"])(a.map(function(e){var t=Di(e);var a=e.replace(xi(),"");var r=t?"\ue000"+i[a]+"\ue001":i[a];return r}),{noConj:true}).join("");b.push({className:null,key:t,term:e.label,valueAsText:r,node:Ri(r)})}else"link"!==e.type&&b.push({className:null,key:t,term:e.label,valueAsText:m[t].value,node:Ri(m[t].value)})});o&&b.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:p.a.createElement("span",{className:"p-people_search_result__top_terms"},p.a.createElement(X["b"],{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:true,size:"inherit"}),p.a.createElement(Kt["a"],{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},Ai.rt("Talks about \u201c{query}\u201d",{query:p.a.createElement(vn["a"],{className:"p-people_search_result__top_terms_term",emojiSize:bn["a"].SMALL,text:this.props.displayQuery,noJumbomoji:true,noLinking:true,noSpecials:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})})),p.a.createElement(fn["c"],{tip:Ai.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},p.a.createElement(Pe["a"],{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},p.a.createElement(X["b"],{type:"info-circle",inline:true,size:"inherit"}))))});b=Object(E["uniqWith"])(b,function(e,t){return e.term===t.term&&e.valueAsText===t.valueAsText});return{rows:b,realName:l,memberTitle:u}}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_people_result_people_render_error");this.props.logger.error(Ni,"Error caught by PeopleSearchResult "+a.componentStack,t)}},{key:"render",value:function e(){var t=this.props,a=t.member,r=t.featureReactMemberProfileCard;var n=Object(Ht["getMemberTeamId"])(a);var i=Object(Ht["isAppOrBot"])(a);var s=Object(Ht["isDeleted"])(a);var o=Object(Ht["isSuspended"])(a);var l=Object(Ht["isExternal"])(a);var c=Object(Ht["isSelf"])(a);var u=Object(Si["c"])(a);var d=Object(Si["d"])(a);var m=Object(Ht["isInvitedUser"])(a);if(this.state.didCatch||u)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},Ai.t("For some reason, Slack wasn\u2019t able to display this result."))));if(d)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(gi["b"],{size:"random"})),p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(gi["b"],{size:"random"})))));var h=void 0;h=s||o?Ai.t("View History"):Ai.t("Message");var f=this.getRenderingData(),b=f.rows,g=f.realName,_=f.memberTitle;var y=!!_||m;var k=b.length>0;var O=y?b.length>1:b.length>2;var C=this.state.isExpanded?b.length:3;var E=!this.state.isExpanded&&b.length>C;return p.a.createElement("div",{className:v()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},p.a.createElement("div",{role:"presentation",onClick:this.onClickMember},p.a.createElement("div",{className:v()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":s}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},p.a.createElement(bi["b"],{className:"p-people_search_result__avatar",size:70,user:a,userId:a.id,isExternal:l,teamId:n,isInteractive:true,showCard:true,showTooltip:true,showBadge:false,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement("div",{className:v()("p-people_search_result__body",{"p-people_search_result__body--many_rows":O,"p-people_search_result__body--no_title":!y})},p.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},r?p.a.createElement(Oi["a"],{userId:a.id,onClick:this.onClickMemberName},p.a.createElement(Pe["a"],{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(_i["a"],{"data-qa":"name",name:Ri(g),isAppOrBot:i,isDeleted:s,isSelf:c,isNonExistent:u,isUnknown:d}))):p.a.createElement(Pe["a"],{onClick:this.onClickMemberName,className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(_i["a"],{"data-qa":"name",name:Ri(g),isAppOrBot:i,isDeleted:s,isSelf:c,isNonExistent:u,isUnknown:d})),!s&&p.a.createElement(Ci["a"],{memberId:a.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),y&&p.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},m?Ai.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):Ri(_)),k&&p.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},b.slice(0,C).map(function(e){return p.a.createElement("div",{key:e.key,className:v()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&p.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),p.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node))})),E&&!this.state.isExpanded&&p.a.createElement(Kt["a"],{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},Ai.t("Show more\u2026"))))),p.a.createElement("div",{className:"p-people_search_result__actions"},p.a.createElement(J["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate},h),p.a.createElement(J["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile},Ai.t("View Profile"))))}}],[{key:"getDerivedStateFromError",value:function e(){return{didCatch:true}}}]);return t}(p.a.Component);Fi.displayName="PeopleSearchResult";Fi.defaultProps=Pi;var Li=function e(t,a){var r=a.memberWithHighlights;var n=Object(L["d"])(t);var i=Object(yi["a"])(n);var s=Object(Ht["getMemberProfileFields"])(r);var o={};s&&i.forEach(function(e){if("user"===e.type){var a=s&&s[e.name];a&&a.value&&a.value.split(",").forEach(function(e){var a=e.replace(/[\ue000\ue001]/g,"");var r=Object(_t["e"])(t,a);o[a]=Object(Ht["getMemberRealName"])(r)})}});return{featureReactMemberProfileCard:Object(q["isFeatureEnabled"])(t,"feature_react_member_profile_card"),teamCustomProfileFields:i,customProfileFieldMemberNamesById:o,displayQuery:Object(cr["getSearchInputBoxDisplayQuery"])(t),logger:Object(I["a"])({state:t}),telemeter:Object(fe["c"])({state:t})}};var Bi=function e(t){return{clogSearchPeopleClick:function e(){return t(N["j"].apply(void 0,arguments))},closeSearch:function e(){return t(H["a"].apply(void 0,arguments))},onClickTopTerms:function e(){return t(ji.apply(void 0,arguments))}}};var Ui=Object(f["connect"])(Li,Bi)(Fi);var qi=a(197);var Wi=new Q["b"]("search");var Hi=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onChange"]);return a}s()(t,[{key:"onChange",value:function e(t){this.props.onAccountTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;var a=[{value:R["f"].all,label:Wi.t("All types")},{value:R["f"].owners,label:Wi.t("Owners")},{value:R["f"].admins,label:Wi.t("Admins")},{value:R["f"].full,label:Wi.t("Full Members (includes owners and admins)")},{value:R["f"].guests,label:Wi.t("Guests")},{value:R["f"].deactivated,label:Wi.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}];var r=a.find(function(e){return e.value===t.props.accountType.type});var n=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return p.a.createElement(Kn["a"],{key:n,width:"100%",options:a,ariaLabel:Wi.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:r,onOptionSelected:this.onChange})}}]);return t}(d["Component"]);Hi.displayName="PeopleFilterAccountType";Hi.defaultProps={accountType:{type:R["f"].all},hideDeactivatedUsers:false,onAccountTypeChange:E["noop"]};var Gi=Hi;var Vi=a(425);var Ki=36e5;var zi=Object(A["b"])("people search: tab opened, initializing data",function(e,t){var a=t();var r=Object(L["d"])(a);var n=Object(_t["b"])(a);var i=Object(yi["a"])(r);var s=Object(Ht["getMemberProfileFields"])(n);var o=Object(b["j"])(a);i.forEach(function(t){if(t.options&&t.options.length>1){var a=t.name;var r=[];if(s&&s[a]){var n=t.options.find(function(e){return e.value===s[a].value});n&&r.push(n.value)}r.push.apply(r,kt()(t.options.slice(0,3).map(function(e){return e.value})));Object(E["uniq"])(r).slice(0,3).forEach(function(t){var r=o&&o[a]&&o[a].find(function(e){return e.value===t});e(Object(j["s"])({id:a,value:t,checked:!!r&&r.checked}))})}})});zi.meta={name:"populateVisibleOptions",key:"actionsUniversalSearchPeopleSearchOpenedPopulateVisibleOptions",description:"people search: tab opened, initializing data"};var Qi=Object(A["b"])("people search: tab opened, initializing data",function(e,t){var a=t();var r=Object(b["n"])(a);var n=!(r&&"ready"===r.state&&r.refreshed>=Date.now()-Ki);if(!n){e(zi());return Promise.resolve()}e(Object(j["x"])());return e(Object(Vi["e"])({reason:"people_search_open"})).then(function(){e(zi());e(Object(j["y"])())}).catch(function(){e(Object(j["w"])())})});Qi.meta={name:"updatePeopleSearchProfileFieldValues",key:"actionsUniversalSearchPeopleSearchOpenedUpdatePeopleSearchProfileFieldValues",description:"people search: tab opened, initializing data"};var Yi=Object(A["b"])("people search: tab opened, initializing data",function(e,t){var a=t();if(Object(q["isFeatureEnabled"])(a,"feature_steeple_church_ext"))return Promise.all([e(Ln({reason:"people_search_open"})),e(Qi())]);return e(Qi())});Yi.meta={name:"peopleSearchOpened",key:"actionsUniversalSearchPeopleSearchOpenedPeopleSearchOpened",description:"people search: tab opened, initializing data"};Yi.propTypes={};var Ji=Yi;var Xi=a(1656);var Zi=a(498);var $i=Object(E["memoize"])(function(){var e=Object(Xi["a"])(Object(Zi["a"])());var t={};e.forEach(function(e){var a=e[1];var r=e[0];t[a]=r});return t});function es(e){var t=$i();var a=Object.values(Object(_t["a"])(e));var r={};var n=void 0;for(var i=0;i<a.length;i++){var s=a[i];var o=Object(Ht["getMemberTimezone"])(s);if(o){r[o]?r[o]+=1:r[o]=1;Object(Ht["isSelf"])(s)&&(n=o)}}var l=Object.keys(r);l.sort(function(e,t){return r[e]<r[t]});Object(E["remove"])(l,function(e){return e===n});var c=[n].concat(kt()(l.slice(0,2))).map(function(e){return{value:e,label:t[e],checked:false}});return c}var ts=new Q["b"]("search");var as={accountType:m["b"].shape({type:m["b"].oneOf(Object(E["values"])(R["f"]))}),peopleSearchOpened:m["b"].func,setPeopleSearchFilterType:m["b"].func.isRequired,currentTeam:m["b"].object.isRequired,visibleFilterState:m["b"].objectOf(m["b"].arrayOf(m["b"].shape({value:m["b"].string.isRequired,checked:m["b"].bool.isRequired}))),peopleSearchCustomFilterChanged:m["b"].func,sharedTeams:An,filters:Nn,filterSuggestions:Mn,timezoneSuggestions:m["b"].array,togglePeopleSearchOrgFilter:m["b"].func.isRequired,clogSearchFilterAdded:m["b"].func,clogSearchFilterRemoved:m["b"].func,showEnterpriseOptions:m["b"].bool.isRequired,filterWorkspaceOnly:m["b"].bool.isRequired,hideDeactivatedUsers:m["b"].bool.isRequired,setSearchOnlySearchWorkspace:m["b"].func.isRequired,setPeopleSearchHideDeactivatedUsers:m["b"].func.isRequired,peopleSearchTimezoneFilterChanged:m["b"].func.isRequired,teamProfileState:m["b"].shape({state:m["b"].oneOf(["loading","error","ready"]),refreshed:m["b"].number})};var rs={accountType:{type:R["f"].all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:E["noop"],clogSearchFilterRemoved:E["noop"],peopleSearchOpened:E["noop"],peopleSearchCustomFilterChanged:E["noop"],timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0}};var ns=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange"]);a.peopleSearchOpenedPromise=null;return a}s()(t,[{key:"componentDidMount",value:function e(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened()}},{key:"componentWillUnmount",value:function e(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}},{key:"onAccountTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type;this.props.clogSearchFilterAdded({filter_account_type:a});this.props.setPeopleSearchFilterType({type:a})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onHideDeactivatedUsersChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"});this.props.setPeopleSearchHideDeactivatedUsers({value:t.target.checked})}},{key:"loadOptions",value:function e(t,a){var r=new Un["b"](t);return Object(E["sortBy"])(a.map(function(e){return{value:e.value,label:e.label,score:0===t.length?0:r.normalizeAndScore(e.label)}}),"score")}},{key:"filterOptions",value:function e(t,a,r){return a.filter(function(e){return isFinite(e.score)&&!r.some(function(t){return t.checked&&t.value===e.value})})}},{key:"renderTimezoneFilter",value:function e(){var t=this;var a=this.props.timezoneSuggestions;var r=$i();var n=Object.keys(r).map(function(e){return{value:e,label:r[e]}});var i=ts.t("Choose another");return p.a.createElement(ca,{title:ts.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},p.a.createElement($t,{checkboxName:"timezone",placeholderText:i,showMoreOptionsAriaLabel:i,loadOptions:function e(a){return Promise.resolve({options:t.loadOptions(a,n)})},visibleOptions:a,onOptionChange:function e(a,r){t.props.peopleSearchTimezoneFilterChanged({label:a.label,value:a.value,checked:r})},onOptionAdd:function e(r){var n=a&&a.find(function(e){return e.value===r.value});var i=n&&n.checked;t.props.peopleSearchTimezoneFilterChanged({label:r.label,value:r.value,checked:!i})},filterOptions:function e(r,n){return t.filterOptions(r,n,a)}}))}},{key:"renderPrefs",value:function e(){var t=this.props,a=t.showEnterpriseOptions,r=t.filterWorkspaceOnly,n=t.hideDeactivatedUsers,i=t.currentTeam,s=t.accountType;var o=s.type===R["f"].deactivated;return p.a.createElement(ca,{title:ts.t("More options")},p.a.createElement("div",{className:"p-search_filter__select"},a&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":r}),htmlFor:"search-channel-filter-workspace-only"},ts.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(ta["b"],{className:"p-search_filter__workspace_only_team_icon",team:i,size:18})," ",p.a.createElement(aa["a"],{id:i.id,bold:r}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:r,onChange:this.onOnlySearchWorkspaceChange,id:"search-channel-filter-workspace-only"})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n,"p-search_filter__checkbox_label--disabled":o}),htmlFor:"search-people-filter-hide-deactivated-users"},ts.t("Hide deactivated accounts")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:o,checked:n,onChange:this.onHideDeactivatedUsersChange,id:"search-people-filter-hide-deactivated-users"}))))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.accountType,n=a.currentTeam,i=a.visibleFilterState,s=a.sharedTeams,o=a.teamProfileState,l=a.filters,c=a.filterSuggestions,u=a.hideDeactivatedUsers;var m="loading"===o.state||"loading"===s.state;var h=ts.t("Choose another");var v=Object(yi["a"])(n).filter(function(e){return e.options&&e.options.length>1});var f={};v.forEach(function(e){var t=e.name;var a={};e.options.forEach(function(e){a[e.value]=e});f[t]=i[t]?i[t].filter(function(e){return a[e.value]}).map(function(e){return{value:e.value,label:a[e.value].label,checked:e.checked}}):[]});return p.a.createElement(d["Fragment"],null,p.a.createElement(ca,{title:ts.t("Account type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Gi,{accountType:r,hideDeactivatedUsers:u,onAccountTypeChange:this.onAccountTypeChange}))),p.a.createElement(qi["a"],{enabled:["feature_steeple_church_ext"]},!m&&s.teams.length>0&&p.a.createElement(Vn,{sharedTeams:s,filters:l,filterSuggestions:c,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved})),this.renderPrefs(),m?p.a.createElement("div",null,p.a.createElement(Ea,{variation:0}),p.a.createElement(Ea,{variation:1})):v.map(function(e,a){return p.a.createElement(ca,{key:e.name,title:e.label,"data-qa":"search-filter-section-people-custom"},p.a.createElement($t,{checkboxName:e.name,visibleOptions:f[e.name],loadOptions:function a(r){return Promise.resolve({options:t.loadOptions(r,e.options)})},filterOptions:function a(r,n){return t.filterOptions(r,n,f[e.name])},onOptionChange:function r(n,i){i?t.props.clogSearchFilterAdded({filter_custom_profile:true,filter_module_position:a,filter_position:f[e.name].indexOf(n)}):t.props.clogSearchFilterRemoved({filter_custom_profile:true,filter_module_position:a,filter_position:f[e.name].indexOf(n)});t.props.peopleSearchCustomFilterChanged({id:e.name,value:n.value,checked:i})},onOptionAdd:function r(n){var s=i[e.name]&&i[e.name].find(function(e){return e.value===n.value});var o=s&&s.checked;t.props.peopleSearchCustomFilterChanged({id:e.name,value:n.value,checked:!o});o?t.props.clogSearchFilterRemoved({filter_custom_profile:true,filter_module_position:a,filter_position:null}):t.props.clogSearchFilterAdded({filter_custom_profile:true,filter_module_position:a,filter_position:null})},placeholderText:h,showMoreOptionsAriaLabel:h,showMoreOptions:e.options.length>f[e.name].length}))}))}}]);return t}(d["Component"]);ns.displayName="PeopleFilterUIBase";ns.defaultProps=rs;var is=function e(t){var a=Object(b["k"])(t);var r=Object(b["q"])(t);var n=Object(b["l"])(t);return{accountType:a,currentTeam:Object(L["d"])(t),visibleFilterState:Object(b["j"])(t),sharedTeams:{state:r.state,teams:Object(L["k"])(t,r.teamIds).map(function(e){return{id:e.id,name:Object(z["getTeamDisplayName"])(e)}})},filters:Object(b["m"])(t),filterSuggestions:Object(L["k"])(t,n).map(function(e){return e.id}),showEnterpriseOptions:Object(xn["e"])(t),filterWorkspaceOnly:Object(T["f"])(t),hideDeactivatedUsers:Object(T["d"])(t),timezoneSuggestions:Object(b["o"])(t),teamProfileState:Object(b["n"])(t)}};var ss={setPeopleSearchFilterType:function e(){return xt.apply(void 0,arguments)},peopleSearchCustomFilterChanged:function e(){return Dt.apply(void 0,arguments)},peopleSearchTimezoneFilterChanged:function e(){return Lt.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return N["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return N["g"].apply(void 0,arguments)},peopleSearchOpened:function e(){return Ji.apply(void 0,arguments)},togglePeopleSearchOrgFilter:function e(){return Rt.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Mt.apply(void 0,arguments)},setPeopleSearchHideDeactivatedUsers:function e(){return Ft.apply(void 0,arguments)}};var os=Object(f["connect"])(is,ss)(ns);var ls=a(3697);var cs=new Q["b"]("search");var us="IMPROVED_SEARCH";var ds={sort:m["b"].oneOf(Object(E["values"])(R["g"])),setSort:m["b"].func,scrollPosition:m["b"].number,setViewScrollPosition:m["b"].func,moduleState:m["b"].object,peopleResponse:m["b"].object,setPageForModule:m["b"].func,fetchSearchResultsByModule:m["b"].func,logger:m["b"].object,telemeter:m["b"].object,clogSearchPeopleClick:m["b"].func,memberSummaryLabels:m["b"].objectOf(m["b"].string),iidMap:m["b"].objectOf(m["b"].string),getMemberById:m["b"].func.isRequired,showNewPeopleSearch:m["b"].bool,markPeopleSearchSeen:m["b"].func,onClickRefreshSearch:m["b"].func,showMemberProfile:m["b"].func,closeSearch:m["b"].func,startImByMemberId:m["b"].func,enqueueToast:m["b"].func,openSearchFeedbackDialog:m["b"].func,displayEmailAddresses:m["b"].bool,currentDisplayQuery:m["b"].string,featureFantailNurture:m["b"].bool};var ps={sort:R["g"].relevant,setSort:E["noop"],scrollPosition:0,setViewScrollPosition:E["noop"],moduleState:{},peopleResponse:{items:{}},setPageForModule:E["noop"],fetchSearchResultsByModule:E["noop"],logger:{error:E["noop"],info:E["noop"]},telemeter:fe["d"],clogSearchPeopleClick:E["noop"],memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:false,displayEmailAddresses:false,currentDisplayQuery:"",featureFantailNurture:false,markPeopleSearchSeen:E["noop"],onClickRefreshSearch:E["noop"],showMemberProfile:E["noop"],closeSearch:E["noop"],startImByMemberId:E["noop"],enqueueToast:E["noop"],openSearchFeedbackDialog:E["noop"]};var ms=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError","onFeedbackClick"]);a.searchResultsContainerRef=p.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.moduleState.loading===this.props.moduleState.loading&&t.moduleState.error===this.props.moduleState.error&&t.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"componentWillUnmount",value:function e(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen()}},{key:"onSelectItem",value:function(){var e=Object(pi["coroutine"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:this.props.clogSearchPeopleClick({type:N["b"].people,iid:this.props.iidMap[t.id],userId:t.id});r.prev=1;r.next=4;return Object(pi["resolve"])(this.props.startImByMemberId({memberId:t.id}));case 4:r.next=10;break;case 6:r.prev=6;r.t0=r["catch"](1);this.onNavigateError(function(){return a.onSelectItem(t)});throw r.t0;case 10:r.prev=10;r.next=13;return Object(pi["resolve"])(this.props.showMemberProfile({memberId:t.id}));case 13:r.next=19;break;case 15:r.prev=15;r.t1=r["catch"](10);this.onViewProfileError(function(){return a.onSelectItem(t)});throw r.t1;case 19:this.props.closeSearch();case 20:case"end":return r.stop()}},e,this,[[1,6],[10,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onNavigateError",value:function e(t){this.props.enqueueToast({element:p.a.createElement(sn["b"],C()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),p.a.createElement("span",null,cs.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var a=e.tag,r=e.key,n=e.text;switch(a){case"strong":return p.a.createElement("strong",{key:r},n);case"a":return p.a.createElement(Ne["a"],{key:r,onClick:t},n);default:return null}})))})}},{key:"onViewProfileError",value:function e(t){this.props.enqueueToast({element:p.a.createElement(sn["b"],C()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),p.a.createElement("span",null,cs.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var a=e.tag,r=e.key,n=e.text;switch(a){case"strong":return p.a.createElement("strong",{key:r},n);case"a":return p.a.createElement(Ne["a"],{key:r,onClick:t},n);default:return null}})))})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"people"})}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t=this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset();return t}return{}}},{key:"getVisiblePeople",value:function e(){return this.props.peopleResponse.items[this.props.moduleState.page||1]||[]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"people",position:t})}},{key:"logTelemetry",value:function e(){if(!this.props.moduleState.loading&&this.props.moduleState.error===R["e"].None){var t=this.getVisiblePeople();t&&this.props.telemeter.count("search_ui_people_results_view_count",t.length)}}},{key:"pageForward",value:function e(){this.props.clogSearchPeopleClick({type:N["b"].peoplePageNext});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logger.info(us,"Page forward in people results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.props.clogSearchPeopleClick({type:N["b"].peoplePagePrev});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logger.info(us,"Page backwards in people results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.moduleState,n=a.peopleResponse,i=a.sort;var s=Math.max(r.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"people",page:s}):this.props.fetchSearchResultsByModule({module:"people",sort:i,reason:"search-people-page",page:s})}},{key:"renderEmptyResults",value:function e(){var t=this.props,a=t.displayEmailAddresses,r=t.currentDisplayQuery,n=t.featureFantailNurture;var i=r.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!a&&i&&n?p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,cs.t("Slack couldn\u2019t find any people related to your search.")),p.a.createElement("p",null,cs.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,cs.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,cs.t("Using different keywords.")),p.a.createElement("li",null,cs.t("Checking for typos.")),p.a.createElement("li",null,cs.t("Adjusting your filters."))))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.sort,n=a.setSort,i=a.scrollPosition,s=a.moduleState,o=a.peopleResponse,l=a.memberSummaryLabels;var c=[[R["g"].relevant,cs.t("Most relevant")],[R["g"].name,cs.t("Name (A to Z)")]];var u=Object(E["fromPairs"])(c);var d=this.getVisiblePeople();var m=d.reduce(function(e,t){e[t.id]=t;return e},{});var h=o.pagination&&o.pagination.total_count;var v=h>0;o.debug&&Object(rn["exportToGlobalDebugger"])("peopleSearchExplain",Object(E["sortBy"])(o.debug.features,function(e){return-e.total_score}));var f=o&&o.pagination&&o.pagination.page_count||0;var b=f>1&&!s.loading;var g=s.page||1;return p.a.createElement(_r,{id:"c-search__tab_people",module:"people",loading:s.loading,errorType:s.error,scrollPosition:i,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(os,null),numResults:h,emptyResultsTitle:cs.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(Y["e"],{"data-qa":"people_sort_toggle",renderMenu:function e(t){var a=t.onTriggerClose;return p.a.createElement(Y["f"],null,c.map(function(e){var t=kr()(e,2),r=t[0],i=t[1];return p.a.createElement(Y["b"],{"data-qa-sort":r,key:r,onSelected:function e(){n({sort:r});a()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(J["c"],{"data-qa":"people_sort_selection"},u[r],p.a.createElement(X["b"],{type:"chevron-down",inline:true}))),alertHeader:this.props.showNewPeopleSearch&&p.a.createElement("div",{className:"c-channel_search__new_feature_alert"},p.a.createElement(X["b"],{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),p.a.createElement("div",null,cs.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})))},v?p.a.createElement(ir,{ref:this.setListRef,ids:d.map(function(e){return e.id}),onSelectItem:function e(a,r){return t.onSelectItem(t.props.getMemberById(r))},itemAriaLabel:function e(t){return l[t]},renderItem:function e(a){return p.a.createElement(Ui,{key:a,iid:t.props.iidMap[a],member:t.props.getMemberById(a),memberWithHighlights:m[a],onClickMember:function e(r){r.preventDefault();t.onSelectItem(t.props.getMemberById(a))},startImByMemberId:t.props.startImByMemberId,showMemberProfile:t.props.showMemberProfile,onViewProfileError:t.onViewProfileError,onNavigateError:t.onNavigateError})}}):this.renderEmptyResults(),!b&&p.a.createElement(mt["a"],{className:h>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(gt,{visible:b,currentPageOffset:g,totalPageCount:f,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(d["Component"]);ms.displayName="PeopleViewBase";ms.defaultProps=ps;var hs=function e(t){var a=Object(b["i"])(t,"people")||{};var r=Object(B["getResponseModule"])(t,{module:"people"})||{items:{}};var n=r.items[a.page||1]||[];var i={};var s={};n.forEach(function(e){var a=Object(_t["e"])(t,e.id);s[e.id]=Object(fi["a"])({name:Object(Ht["getMemberRealName"])(a),isGuest:Object(Ht["isGuest"])(a),isSelf:Object(Ht["isSelf"])(a),isDeleted:Object(Ht["isDeleted"])(a),isAppOrBot:Object(Ht["isAppOrBot"])(a)});i[e.id]=e.iid});return{sort:Object(T["e"])(t),scrollPosition:Object(b["p"])(t).people,moduleState:a,peopleResponse:r,iidMap:i,memberSummaryLabels:s,getMemberById:function e(a){return Object(_t["e"])(t,a)},logger:Object(I["a"])({state:t}),telemeter:Object(fe["c"])({state:t}),showNewPeopleSearch:!Object(ie["h"])(t,"seen_people_search"),displayEmailAddresses:Object(hi["a"])(t,"display_email_addresses"),currentDisplayQuery:Object(cr["getSearchInputBoxDisplayQuery"])(t),featureFantailNurture:Object(vi["a"])(t)}};var vs=function e(t){return{setSort:function e(){return t(At.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(j["J"].apply(void 0,arguments))},setPageForModule:function e(){return t(j["r"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(P["d"].apply(void 0,arguments))},clogSearchPeopleClick:function e(){return t(N["j"].apply(void 0,arguments))},markPeopleSearchSeen:function e(){return t(P["g"].apply(void 0,arguments))},showMemberProfile:function e(){return t(G["j"].apply(void 0,arguments))},closeSearch:function e(){return t(H["a"].apply(void 0,arguments))},startImByMemberId:function e(){return t(mi["startImByMemberId"].apply(void 0,arguments))},enqueueToast:function e(){return t(ln["enqueueToast"].apply(void 0,arguments))},openSearchFeedbackDialog:function e(){return t(P["m"].apply(void 0,arguments))}}};var fs=Object(f["connect"])(hs,vs)(ms);var bs=a(2029);var gs=a(2476);var _s={tab:m["b"].string.isRequired,onClickRefreshSearch:m["b"].func.isRequired,usePrimarySearch:m["b"].bool};var ys={usePrimarySearch:false};var ks=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderCurrentView",value:function e(){switch(this.props.tab){case"messages":return p.a.createElement(Hr,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return p.a.createElement(an,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return p.a.createElement(di,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return p.a.createElement(fs,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){var t=v()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(_["a"])(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(_["a"])()});return p.a.createElement(y["a"],{id:k["MESSAGE_CONTAINERS"].SEARCH},p.a.createElement("div",{className:t},p.a.createElement("div",{className:"c-search","data-qa":"search_view"},!this.props.usePrimarySearch&&p.a.createElement(bs["a"],null),this.renderCurrentView())))}}]);return t}(d["PureComponent"]);ks.displayName="SearchView";ks.defaultProps=ys;var Os=function e(t){return{tab:Object(b["s"])(t),usePrimarySearch:Object(g["a"])(t)}};var Cs=t["a"]=Object(f["connect"])(Os)(ks)},1688:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(41);var o=a(17);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(13);var b=a.n(f);var g=a(2);var _=a(6);var y=a(369);var k=a(44);var O=a(27);var C=a(929);var E=a(1159);var S=a(52);var w=a(123);var I=a(54);var j=a(86);var T=a(578);var A=a(3);var N=a.n(A);var M=a(12);var P=a(31);var R=a(1050);var x=a(229);var D=a(21);var F=a(585);var L=a(9);var B=a(11);var U=a(82);var q=a(25);var W=a(68);var H=a(23);var G=a(152);var V=new _["b"]("app_management_modal");var K={channel:i["b"].object.isRequired,onRemove:i["b"].func.isRequired,"data-qa":i["b"].string,featureWtaModalM11n:i["b"].bool,canBeRemovedFromChannel:i["b"].bool};var z={"data-qa":"app_channel_list_item",featureWtaModalM11n:false,canBeRemovedFromChannel:false};var Q=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleRemove=a.handleRemove.bind(a);return a}d()(t,[{key:"handleRemove",value:function e(){var t=this.props,a=t.channel.id,r=t.onRemove;r(a)}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t["data-qa"],i=t.featureWtaModalM11n,s=t.canBeRemovedFromChannel;if(i)return n.a.createElement("li",{className:"p-app_management_modal__channel_list_item padding_top_50 padding_bottom_50","data-qa":r},n.a.createElement(G["a"],{className:"flex_one",channel:a,inheritPresenceIconSize:true}),s&&n.a.createElement(O["c"],{className:"p-app_management_modal__channel_list_item_remove position_relative","aria-label":V.t("Remove app from channel"),onClick:this.handleRemove,"data-qa":r+"_remove"},n.a.createElement(H["b"],{inline:true,type:"times-circle"})));return n.a.createElement("li",{className:"p-app_management_modal__channel_list_item","data-qa":r},n.a.createElement(G["a"],{className:"flex_one",channel:a,inheritPresenceIconSize:true}),s&&n.a.createElement(H["a"],{className:"p-app_management_modal__channel_list_item_remove position_relative justify_content_end cursor_pointer",type:"times-circle",onClick:this.handleRemove,"data-qa":r+"_remove"}))}}]);return t}(r["PureComponent"]);Q.displayName="AppChannelListItem";Q.displayName="AppChannelListItem";Q.defaultProps=z;var Y=Q;var J=a(37);var X=a.n(J);var Z=a(543);var $=new _["b"]("app_management_modal");var ee=220;var te=36;var ae=28;var re=200;var ne={forExclusions:i["b"].bool,isMobile:i["b"].bool,searchChannelsForApp:i["b"].func.isRequired,serviceId:i["b"].string.isRequired};var ie={forExclusions:false,isMobile:false};var se=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(P["a"])(a,["buildChannelOptions","optionsFetcher","setSelectorReference","scrollSelectorIntoView"]);return a}d()(t,[{key:"componentDidMount",value:function e(){if(this.selector){var t=this.selector.focusSelectInput;t&&t()}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.mobileKeyboardTimeout)}},{key:"setSelectorReference",value:function e(t){this.selector=t}},{key:"buildChannelOption",value:function e(t){return{label:n.a.createElement(G["a"],{className:"p-app_management_modal__channel_selector_item",channel:t,inheritPresenceIconSize:true}),value:t.id}}},{key:"buildChannelOptions",value:function e(t){return{options:t.map(this.buildChannelOption)}}},{key:"scrollSelectorIntoView",value:function e(){if(this.selector){var t=this.selector.select;t&&t.wrapper&&(this.mobileKeyboardTimeout=setTimeout(function(){t.wrapper.scrollIntoView()},this.props.isMobile?re:0))}}},{key:"optionsFetcher",value:function e(t){var a=this.props,r=a.forExclusions,n=a.serviceId;return this.props.searchChannelsForApp({query:t,forExclusions:r,serviceId:n}).then(this.buildChannelOptions).tap(this.scrollSelectorIntoView)}},{key:"render",value:function e(){var t=this.props,a=t.serviceId,r=t.forExclusions,i=t.searchChannelsForApp,s=t.isMobile,o=X()(t,["serviceId","forExclusions","searchChannelsForApp","isMobile"]);var l=s?te:ae;return n.a.createElement(Z["a"],N()({},o,{innerRef:this.setSelectorReference,optionsFetcher:this.optionsFetcher,prefetchOptions:true,className:"p-app_management_modal__channel_selector_input",isAlwaysOpen:true,optionsListWidth:ee,optionsRowHeight:l,placeholder:$.t("Find a channel"),type:"short",usePlaceholderOption:false,wrapperClassName:"p-app_management_modal__channel_selector"}))}}]);return t}(r["PureComponent"]);se.displayName="AppChannelListSelector";var oe={searchChannelsForApp:F["searchChannelsForApp"]};se.defaultProps=ie;var le=Object(M["connect"])(null,oe)(se);var ce=new _["b"]("app_management_modal");var ue={headerText:i["b"].string.isRequired,buttonText:i["b"].string.isRequired,emptyListText:i["b"].string.isRequired,channels:i["b"].array,hiddenChannelCount:i["b"].number,onAddChannel:i["b"].func.isRequired,onRemoveChannel:i["b"].func.isRequired,"data-qa":i["b"].string,isMobile:i["b"].bool,forExclusions:i["b"].bool,serviceId:i["b"].string.isRequired,featureWtaModalM11n:i["b"].bool,canBeRemovedFromChannel:i["b"].bool};var de={channels:[],hiddenChannelCount:0,"data-qa":"app_channel_list",isMobile:false,forExclusions:false,featureWtaModalM11n:false,canBeRemovedFromChannel:false};var pe=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={showChannelSelector:false};Object(P["a"])(a,["handleAddChannel","toggleChannelSelector"]);return a}d()(t,[{key:"componentWillUnmount",value:function e(){clearTimeout(this.timeout)}},{key:"setSelectorInputReference",value:function e(t){this.selectorInput=t}},{key:"toggleChannelSelector",value:function e(){this.setState(function(e){return{showChannelSelector:!e.showChannelSelector}})}},{key:"handleAddChannel",value:function e(t){var a=this.props.onAddChannel;a(t);this.toggleChannelSelector()}},{key:"renderHiddenChannelCountText",value:function e(){var t=this.props,a=t.channels,r=t.hiddenChannelCount;if(a.length>0)return ce.t("...and {hiddenChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}",{hiddenChannelCount:r});return ce.t("{hiddenChannelCount, plural, =1 {# private conversation} other {# private conversations}}",{hiddenChannelCount:r})}},{key:"renderListItems",value:function e(){var t=this.props,a=t.channels,r=t.emptyListText,i=t.featureWtaModalM11n,s=t.hiddenChannelCount,o=t.canBeRemovedFromChannel,l=t.onRemoveChannel,c=t["data-qa"];if(0===a.length&&0===s)return n.a.createElement("li",{className:"p-app_management_modal__channel_list_item sk_foreground_high","data-qa":c+"_empty_message"},r);var u=Object(g["compact"])(a).map(function(e){return n.a.createElement(Y,{key:e.id,channel:e,canBeRemovedFromChannel:o,onRemove:l,"data-qa":c+"_channel_"+e.id,featureWtaModalM11n:i})});s>0&&u.push(n.a.createElement("li",{key:"0",className:"p-app_management_modal__channel_list_item","data-qa":c+"_hidden_channels_message"},this.renderHiddenChannelCountText()));return u}},{key:"renderChannelSelector",value:function e(){var t=this.props,a=t.buttonText,r=t["data-qa"],i=t.isMobile,s=t.forExclusions,o=t.serviceId;var l=this.state.showChannelSelector;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(O["d"],{className:"p-app_management_modal__channel_list_add",type:"outline",size:"small",onClick:this.toggleChannelSelector,"data-qa":r+"_button"},a),l&&n.a.createElement(le,{onChange:this.handleAddChannel,onOutsideClick:this.toggleChannelSelector,"data-qa":r+"_selector",isMobile:i,forExclusions:s,serviceId:o}))}},{key:"render",value:function e(){var t=this.props,a=t.headerText,r=t["data-qa"];return n.a.createElement(R["a"],{className:"p-app_management_modal__card","data-qa":r},n.a.createElement(R["b"],{className:"p-app_management_modal__card_header"},n.a.createElement("strong",{className:"flex_one align_self_center margin_right_50"},a),this.renderChannelSelector()),n.a.createElement(R["c"],{className:"no_margin no_padding"},n.a.createElement("ul",{className:"no_margin p-app_management_modal__channel_list"},this.renderListItems())))}}]);return t}(r["PureComponent"]);pe.displayName="AppChannelList";var me=function e(t,a){return Object(x["a"])(Object(B["getDisplayName"])(t),Object(B["getDisplayName"])(a))};var he=function e(t,a){return Object.keys(t).map(function(e){return Object(D["e"])(a,e)}).filter(function(e){return!Object(B["isArchived"])(e)&&!Object(B["isUnknown"])(e)}).sort(me)};var ve=function e(t,a){var r=a.forExclusions,n=a.serviceId,i=a.memberId;var s=Object(F["getAppPermissionsByServiceId"])(t,n),o=s.exclusionIds,l=s.hiddenChannelCount,c=s.privateChannelIds,u=s.publicChannelIds;var d=Object(L["isFeatureEnabled"])(t,"feature_wta_modal_m11n");if(r)return{channels:he(o,t),featureWtaModalM11n:d};var p=Object(U["a"])(t);var m=Object(q["e"])(t,i);var h=Object(W["v"])(t,p,m);return{channels:he(N()({},u,c),t),hiddenChannelCount:l,featureWtaModalM11n:d,canBeRemovedFromChannel:h}};pe.defaultProps=de;var fe=Object(M["connect"])(ve)(pe);var be=a(2406);var ge=function e(t){return n.a.createElement(r["Fragment"],null,n.a.createElement(j["a"],{size:"small",className:"c-infinite_spinner--inline"}),n.a.createElement("span",{className:"c-infinite_spinner__loading_msg"},t.children))};ge.displayName="InlineInfiniteSpinner";var _e=ge;var ye=a(497);var ke=a(858);var Oe=a(191);var Ce=a(69);var Ee=a(444);var Se=a(280);var we=a(16);var Ie=new _["b"]("app_management_modal");var je={memberId:i["b"].string.isRequired,isUnknown:i["b"].bool.isRequired,isNonExistent:i["b"].bool.isRequired,isYou:i["b"].bool.isRequired,memberPrimaryName:i["b"].string.isRequired,memberSecondaryName:i["b"].string};var Te={memberSecondaryName:""};var Ae=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderIsYou",value:function e(){if(this.props.isYou)return n.a.createElement("span",null,Ie.t("(you)"));return null}},{key:"renderPrimaryName",value:function e(){return n.a.createElement("span",{className:"p-app_management_modal__member_list_primary_name"},this.props.memberPrimaryName," ",this.renderIsYou())}},{key:"renderSecondaryName",value:function e(){var t=this.props.memberSecondaryName;if(t)return n.a.createElement("span",{className:"p-app_management_modal__member_list_secondary_name"},t);return null}},{key:"render",value:function e(){if(this.props.isUnknown)return n.a.createElement(Ee["a"],{type:"unknown"});if(this.props.isNonExistent)return n.a.createElement(Ee["a"],{type:"non-existent"});return n.a.createElement("span",{className:"p-app_member_name"},this.renderPrimaryName(),n.a.createElement(Se["a"],{memberId:this.props.memberId}),this.renderSecondaryName())}}]);return t}(r["PureComponent"]);Ae.displayName="AppMemberName";Ae.defaultProps=Te;function Ne(e,t){var a=t.memberId;var r=Object(q["e"])(e,a);return{isYou:Object(L["getCurrentUserId"])(e)===a,isUnknown:Object(we["isUnknown"])(r),isNonExistent:Object(we["isNonExistent"])(r),memberPrimaryName:Object(we["getPrefCompliantMemberName"])(e,r,false,false),memberSecondaryName:Object(we["getMemberSecondaryName"])(e,r)}}var Me=Object(M["connect"])(Ne)(Ae);var Pe=new _["b"]("app_management_modal");var Re={"data-qa":i["b"].string,isYou:i["b"].bool.isRequired,onRevokeButtonClick:i["b"].func,onViewUserPermissionsClick:i["b"].func,userId:i["b"].string.isRequired,scopes:i["b"].arrayOf(i["b"].string).isRequired};var xe={"data-qa":"app_member_list_item",onRevokeButtonClick:g["noop"],onViewUserPermissionsClick:g["noop"]};var De=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(P["a"])(a,["handleViewUserPermissionsClick","renderMenu"]);return a}d()(t,[{key:"handleViewUserPermissionsClick",value:function e(){var t=this.props,a=t.onViewUserPermissionsClick,r=t.userId,n=t.scopes;a(r,n)}},{key:"renderAvatar",value:function e(){var t=this.props.userId;return n.a.createElement(Oe["b"],{className:"p-app_management_modal__member_list_avatar",userId:t,size:36,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderUserName",value:function e(){var t=this.props.userId;return n.a.createElement(Me,{memberId:t})}},{key:"renderScopeInfo",value:function e(){var t=this.props.scopes;return n.a.createElement("div",null,n.a.createElement(k["a"],{className:"p-app_management_modal__member_list_scope_info","data-qa":this.props["data-qa"]+"_permissions_link",onClick:this.handleViewUserPermissionsClick},Pe.t("{scopeCount, plural, =1 {# permission} other {# permissions}} granted",{scopeCount:t.length})))}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.isYou,i=a.onRevokeButtonClick;return n.a.createElement(Ce["f"],t,n.a.createElement(Ce["b"],{"data-qa":this.props["data-qa"]+"_menu_permissions",onSelected:this.handleViewUserPermissionsClick,label:Pe.t("View permissions")}),r&&n.a.createElement(Ce["b"],{"data-qa":this.props["data-qa"]+"_menu_revoke",onSelected:i,label:Pe.t("Revoke authorization")}))}},{key:"renderMenuTrigger",value:function e(){return n.a.createElement(Ce["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(O["c"],{"data-qa":this.props["data-qa"]+"_menu_trigger"},n.a.createElement(H["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){return n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-app_management_modal__member_list_gutter"},this.renderAvatar()),n.a.createElement("div",{className:"p-app_management_modal__member_list_content"},this.renderUserName(),this.renderScopeInfo()),this.renderMenuTrigger())}}]);return t}(r["PureComponent"]);De.displayName="AppMemberListItem";De.displayName="AppMemberListItem";De.defaultProps=xe;var Fe=function e(t,a){var r=a.userId;return{isYou:Object(L["getCurrentUserId"])(t)===r}};var Le=Object(M["connect"])(Fe)(De);var Be=new _["b"]("app_management_modal");var Ue={"data-qa":i["b"].string,isLoading:i["b"].bool.isRequired,memberResults:i["b"].arrayOf(i["b"].shape({user_id:i["b"].string.isRequired,scopes:i["b"].arrayOf(i["b"].string).isRequired})).isRequired,memberQuery:i["b"].string,modalBodyRef:i["b"].any,onAppSearchUsers:i["b"].func,onRevokeButtonClick:i["b"].func,onViewUserPermissionsClick:i["b"].func,serviceId:i["b"].string.isRequired,totalResultsCount:i["b"].number,userCount:i["b"].number,useVirtualizedList:i["b"].bool};var qe={"data-qa":"app_member_list",memberQuery:"",modalBodyRef:void 0,onAppSearchUsers:g["noop"],onRevokeButtonClick:g["noop"],onViewUserPermissionsClick:g["noop"],totalResultsCount:0,userCount:0,useVirtualizedList:true};var We=300;var He=5;var Ge=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(P["a"])(a,["handleScroll","renderListItem","setListRef","setMemberQuery","handleScrollToTopButtonClick"]);a.state={searchValue:"",showScrollToTopButton:false};a.debouncedFetchMemberList=Object(g["debounce"])(a.fetchMemberList,We);return a}d()(t,[{key:"componentDidMount",value:function e(){this.fetchMemberList()}},{key:"getMemberListKeys",value:function e(){var t=this.props,a=t.memberResults,r=t.isLoading;var n=a.map(function(e){var t=e.user_id;return t});return r?n.concat("loading"):n}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setMemberQuery",value:function e(t){var a=t.target.value;this.setState(function(){return{searchValue:a}});this.debouncedFetchMemberList(a)}},{key:"fetchMemberList",value:function e(t,a){var r=this.props,n=r.onAppSearchUsers,i=r.serviceId;n({serviceId:i,query:t,nextPage:a})}},{key:"handleScroll",value:function e(t){var a=t.scrollTop;var r=this.props,n=r.isLoading,i=r.memberResults,s=r.totalResultsCount,o=r.memberQuery;var l=this.state.showScrollToTopButton;a>0&&!l?this.setState(function(){return{showScrollToTopButton:true}}):0===a&&l&&this.setState(function(){return{showScrollToTopButton:false}});if(n)return;var c=i.length;if(c===s)return;var u=this.list&&this.list.getVisibleRange&&this.list.getVisibleRange().end||0;if(c-u>He)return;this.fetchMemberList(o,true)}},{key:"handleScrollToTopButtonClick",value:function e(){this.props.modalBodyRef.scrollTo(0,0)}},{key:"renderHeader",value:function e(){var t=this.props,a=t.memberQuery,r=t.totalResultsCount,i=t.userCount;var s=Be.t("Member Results");a?r&&(s=Be.t("{totalResultsCount} Member Results",{totalResultsCount:r})):s=Be.t("{userCount, plural, =1 {# Member} other {# Members}}",{userCount:i});return n.a.createElement(R["b"],{className:"p-app_management_modal__card_header"},n.a.createElement("strong",{className:"flex_one align_self_center margin_right_50","data-qa":this.props["data-qa"]+"_count"},s),n.a.createElement(ye["a"],{className:"p-app_management_modal__member_search","data-qa":this.props["data-qa"]+"_search",icon:"search",onChange:this.setMemberQuery,placeholder:Be.t("Search members"),value:this.state.searchValue}))}},{key:"renderListItem",value:function e(t){var a=this.props.memberResults;if(t===a.length)return this.renderLoadingItem();var r=a[t];return this.renderMemberItem(r)}},{key:"renderMemberItem",value:function e(t){var a=this.props,r=a.onRevokeButtonClick,i=a.onViewUserPermissionsClick;var s=this.props["data-qa"]+"_item_"+t.user_id;return n.a.createElement("li",{key:t.user_id,className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--member","data-qa":s},n.a.createElement(Le,{"data-qa":s,userId:t.user_id,scopes:t.scopes,onRevokeButtonClick:r,onViewUserPermissionsClick:i}))}},{key:"renderLoadingItem",value:function e(){var t=this.props.memberQuery;return n.a.createElement("li",{key:"loading",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--loading","data-qa":this.props["data-qa"]+"_loading"},n.a.createElement(_e,null,t?Be.t("Loading member results\u2026"):Be.t("Loading members\u2026")))}},{key:"renderEmptyItem",value:function e(){return n.a.createElement("li",{key:"empty_message",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--empty_message","data-qa":this.props["data-qa"]+"_empty_message"},Be.t("No matching members found."))}},{key:"renderScrollToTopButton",value:function e(){if(!this.state.showScrollToTopButton)return null;return n.a.createElement(O["d"],{type:"outline",size:"small",className:"p-app_management_modal__member_list_scroll_button",onClick:this.handleScrollToTopButtonClick,"data-qa":this.props["data-qa"]+"_scroll_button"},n.a.createElement(H["b"],{type:"arrow-up-medium"}),"\xa0",Be.t("Back to top"))}},{key:"renderListItems",value:function e(){var t=this;var a=this.props,r=a.totalResultsCount,i=a.isLoading,s=a.modalBodyRef,o=a.useVirtualizedList;if(!r&&!i)return this.renderEmptyItem();if(!o)return this.getMemberListKeys().map(function(e,a){return t.renderListItem(a)});return n.a.createElement(be["a"],{scrollElement:s,onScroll:this.handleScroll},function(e){var a=e.height,r=e.isScrolling,i=e.onChildScroll,o=e.scrollTop;return n.a.createElement(ke["a"],{height:a,rowRenderer:t.renderListItem,keys:t.getMemberListKeys(),onScroll:i,isScrolling:r,ref:t.setListRef,scrollTop:o,scrollElement:s})})}},{key:"renderBody",value:function e(){return n.a.createElement(R["c"],{className:"no_margin no_padding"},n.a.createElement("ul",{className:"p-app_management_modal__card_list"},this.renderListItems(),this.renderScrollToTopButton()))}},{key:"render",value:function e(){var t=this.props["data-qa"];return n.a.createElement(R["a"],{className:"p-app_management_modal__card","data-qa":t},this.renderHeader(),this.renderBody())}}]);return t}(r["PureComponent"]);Ge.displayName="AppMemberList";var Ve=function e(t,a){var r=a.serviceId;var n=Object(F["getAppPermissionsUserSearchResultsByServiceId"])(t,r);if(!n)return{};var i=n.isLoading,s=n.query,o=n.results,l=n.total;return{isLoading:i,memberQuery:s,memberResults:o,totalResultsCount:l}};Ge.defaultProps=qe;var Ke=Object(M["connect"])(Ve)(Ge);var ze=a(2080);var Qe=new _["b"]("app_management_modal");var Ye=60;var Je={alertBannerType:i["b"].oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),appName:i["b"].string.isRequired,channelId:i["b"].string,onClose:i["b"].func};var Xe={alertBannerType:void 0,channelId:void 0,onClose:g["noop"]};var Ze=function e(t){var a=t.alertBannerType,r=t.appName,i=t.channelId,s=t.onClose;if(!a)return null;var o=void 0;var l="error";var c=i?n.a.createElement(G["a"],{channelId:i,inline:true}):null;switch(a){case"addSuccess":o=Qe.rt("{appName} was added to {channelName}",{appName:r,channelName:c});l="success";break;case"addError":o=Qe.rt("Adding {appName} to {channelName} failed. Try again?",{appName:r,channelName:c});break;case"removeSuccess":o=Qe.rt("{appName} was removed from {channelName}",{appName:r,channelName:c});l="success";break;case"removeError":o=Qe.rt("Removing {appName} from {channelName} failed. Try again?",{appName:r,channelName:c});break;case"wildcardAddError":o=Qe.rt("Adding {appName} to all public channels failed. Try again?",{appName:r,channelName:c});break;case"wildcardRemoveError":o=Qe.rt("Removing {appName} from all public channels failed. Try again?",{appName:r,channelName:c});break;case"uninstallError":o=Qe.rt("Uninstalling {appName} failed. Try again?",{appName:r});break;case"revokeSuccess":o=Qe.rt("Access successfully revoked.");l="success";break;case"revokeError":o=Qe.rt("Revoking access to your member data failed. Try again?");break;default:o=Qe.t("Hmm, something went wrong. Try again?");break}return n.a.createElement(ze["a"],{type:l,topOffset:Ye,"data-qa":"app_management_modal_alert_banner",showCloseButton:false,autoFadeout:true,onClose:s},o)};Ze.displayName="AppManagementAlertBanner";Ze.defaultProps=Xe;var $e=Ze;var et=a(3089);var tt=new _["b"]("app_management_modal");var at={showModal:i["b"].bool,isLoading:i["b"].bool,appName:i["b"].string.isRequired,appId:i["b"].string.isRequired,serviceId:i["b"].string.isRequired,appIconLarge:i["b"].string,workspaceName:i["b"].string,activeSection:i["b"].oneOf(["channel","workspace","user"]).isRequired,onClose:i["b"].func,workspaceScopeInfo:i["b"].arrayOf(T["a"]),channelScopeInfo:i["b"].arrayOf(T["a"]),userScopeInfo:i["b"].arrayOf(T["a"]),currentUserScopeInfo:i["b"].arrayOf(T["a"]),appHomepageUrl:i["b"].string,appSupportUrl:i["b"].string,showAppDirectoryLink:i["b"].bool,userCount:i["b"].number,onSidebarMenuItemClick:i["b"].func.isRequired,onSidebarMenuLinkClick:i["b"].func,onWorkspaceSectionLinkClick:i["b"].func.isRequired,onRevokeButtonClick:i["b"].func.isRequired,onMemberListRevokeClick:i["b"].func.isRequired,onUninstallButtonClick:i["b"].func.isRequired,onExclusionListAdd:i["b"].func.isRequired,onExclusionListRemove:i["b"].func.isRequired,onGrantListAdd:i["b"].func.isRequired,onGrantListRemove:i["b"].func.isRequired,onViewUserPermissionsClick:i["b"].func.isRequired,userIsAppmin:i["b"].bool,alertBannerType:i["b"].oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),activeDialogChannelId:i["b"].string,showWildcardToggle:i["b"].bool,wildcardEnabled:i["b"].bool,onWildcardCheckboxChange:i["b"].func.isRequired,onAlertBannerClose:i["b"].func.isRequired,isMobile:i["b"].bool,onAppSearchUsers:i["b"].func,hasError:i["b"].bool,featureWtaModalM11n:i["b"].bool};var rt={showModal:false,isLoading:true,workspaceScopeInfo:[],channelScopeInfo:[],userScopeInfo:[],currentUserScopeInfo:[],userCount:0,appHomepageUrl:void 0,appSupportUrl:void 0,showAppDirectoryLink:true,appIconLarge:void 0,showWildcardToggle:true,alertBannerType:void 0,activeDialogChannelId:void 0,wildcardEnabled:false,workspaceName:void 0,userIsAppmin:false,isMobile:false,onClose:g["noop"],onAppSearchUsers:g["noop"],onSidebarMenuLinkClick:g["noop"],hasError:false,featureWtaModalM11n:false};var nt=-5;var it=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setModalBodyRef=a.setModalBodyRef.bind(a);return a}d()(t,[{key:"setModalBodyRef",value:function e(t){this.modalBodyRef=t}},{key:"renderUserAccessSidebarMenuItem",value:function e(){var t=this.props,a=t.currentUserScopeInfo,r=t.userCount,i=t.userIsAppmin,s=t.onSidebarMenuItemClick;if(i?0===r:Object(g["isEmpty"])(a))return null;return n.a.createElement(C["a"],{itemId:"user",onClick:s,"data-qa":"app_management_modal_user_access_link"},i?tt.t("Member data access",{fallbackHash:"54485606f08a3c5d7e73fe0730e62de7b3fe9ea2"}):tt.t("Access to your data",{fallbackHash:"7284a962539fd4edca8ba9beccf1501937e2f49e"}))}},{key:"renderSidebarMenu",value:function e(){var t=this.props,a=t.activeSection,r=t.appId,i=t.appHomepageUrl,s=t.appSupportUrl,o=t.showAppDirectoryLink,l=t.onSidebarMenuItemClick,c=t.onSidebarMenuLinkClick;return n.a.createElement(C["b"],{activeItemId:a},n.a.createElement(C["a"],{itemId:"channel",onClick:l,"data-qa":"app_management_modal_channel_access_link"},tt.t("Channel access",{fallbackHash:"93f2f019560a491cf643b739cc7027f2a62c1d38"})),n.a.createElement(C["a"],{itemId:"workspace",onClick:l,"data-qa":"app_management_modal_workspace_access_link"},tt.t("Workspace access",{fallbackHash:"a976c398ad6ec00251f8f90209b8393dd1b68b3a"})),this.renderUserAccessSidebarMenuItem(),i||o||s?n.a.createElement(C["a"],{isDivider:true}):null,i&&n.a.createElement(C["a"],{itemId:"homepage",onClick:c,isExternalLink:true,href:i,"data-qa":"app_management_modal_homepage_link"},tt.t("App homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f"})),o&&n.a.createElement(C["a"],{itemId:"directory",onClick:c,isExternalLink:true,href:"/apps/"+r+"?utm_source=in-prod&utm_medium=inprod-view_in_app_directory-user_profile-click","data-qa":"app_management_modal_directory_link"},tt.t("View in App Directory")),s&&n.a.createElement(C["a"],{itemId:"support",onClick:c,isExternalLink:true,href:s,"data-qa":"app_management_modal_support_link"},tt.t("Support for this App")))}},{key:"renderChannelAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.channelScopeInfo,s=t.onWorkspaceSectionLinkClick,o=t.onExclusionListAdd,l=t.onExclusionListRemove,c=t.onGrantListAdd,u=t.onGrantListRemove,d=t.wildcardEnabled,p=t.onWildcardCheckboxChange,m=t.userIsAppmin,h=t.showWildcardToggle,v=t.isMobile,f=t.serviceId;if("channel"!==a)return null;var b=Object(_["q"])(r);var y=n.a.createElement("h3",null,tt.t("What can {appName} do in a channel?",{appName:b}));if(Object(g["isEmpty"])(i)){var O=tt.rt("This app can\u2019t be added to individual channels \u2014 it has access to your entire workspace. Check <Link>Workspace Access</Link> for more.",null,function(e){var t=e.text;return n.a.createElement(k["a"],{onClick:s,"data-qa":"app_management_modal_empty_channel_section_link"},t)});return n.a.createElement("div",null,y,n.a.createElement("p",{className:"margin_top_50 sk_foreground_max"},O))}var C=n.a.createElement(w["a"],{className:"p-app_management_modal__wildcard_checkbox",checked:d,onChange:p,disabled:!m,"data-qa":"app_management_modal_wildcard_checkbox"});return n.a.createElement("div",null,n.a.createElement("div",null,y,n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},tt.t("In channels it\u2019s added to, {appName} can:",{appName:b})),n.a.createElement(E["a"],{scopeInfo:i,"data-qa":"app_management_modal_channel_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,tt.t("Which channels can {appName} access?",{appName:b})),h&&n.a.createElement("div",{className:"margin_top_50"},n.a.createElement(S["a"],{text:tt.t("All public channels"),cursor:"pointer",type:"inline",subtext:tt.t("{appName} will join all public channels, in addition to other conversations it\u2019s added to.",{appName:b})},m?C:n.a.createElement(I["c"],{offsetX:nt,tip:tt.t("Only an app admin can change this setting."),"data-qa":"app_management_modal_wilcard_checkbox_tooltip"},n.a.createElement("span",null,C)))),d&&n.a.createElement(fe,{isMobile:v,headerText:tt.t("Excluded Public Channels"),buttonText:tt.t("Add Excluded Channel"),emptyListText:tt.t("No public channels excluded."),onAddChannel:o,onRemoveChannel:l,"data-qa":"app_management_modal_exclusion_list",serviceId:f,forExclusions:true}),n.a.createElement(fe,{isMobile:v,headerText:tt.t("{appName} was individually added to:",{appName:b}),buttonText:tt.t("Add App to channel",{fallbackHash:"b15a7b87166cf757534bf619b95f1e9b49b6f92a"}),emptyListText:tt.t("{appName} has not been individually added to any channels.",{appName:b}),onAddChannel:c,onRemoveChannel:u,"data-qa":"app_management_modal_grant_list",serviceId:f})))}},{key:"renderWorkspaceAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.workspaceName,s=t.workspaceScopeInfo;if("workspace"!==a)return null;var o=Object(_["q"])(r);var l=Object(_["q"])(i);return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,tt.t("What can {appName} do in this workspace?",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},tt.t("On {workspaceName}, {appName} can:",{appName:o,workspaceName:l})),n.a.createElement(E["a"],{scopeInfo:s,"data-qa":"app_management_modal_workspace_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,tt.t("Uninstall {appName}",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},tt.t("Remove this app from the {workspaceName} workspace and revoke all access and authorizations.",{workspaceName:l})),this.renderUninstallButton()))}},{key:"renderAppminUserAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.serviceId,s=t.userCount,o=t.userScopeInfo,l=t.workspaceName,c=t.onAppSearchUsers,u=t.onMemberListRevokeClick,d=t.onViewUserPermissionsClick;if("user"!==a||0===s||Object(g["isEmpty"])(o))return null;var p=Object(_["q"])(r);var m=tt.t("{workspaceName} members have allowed {appName} to:",{appName:p,workspaceName:Object(_["q"])(l)});return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,tt.t("What can {appName} do with member data?",{appName:p})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},m),n.a.createElement(E["a"],{scopeInfo:o,"data-qa":"app_management_modal_member_appmin_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,tt.t("Which members have authorized {appName} to access their data?",{appName:p})),n.a.createElement(Ke,{modalBodyRef:this.modalBodyRef,onAppSearchUsers:c,onRevokeButtonClick:u,onViewUserPermissionsClick:d,serviceId:i,userCount:s})))}},{key:"renderUserAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.currentUserScopeInfo,s=t.onRevokeButtonClick;if("user"!==a||Object(g["isEmpty"])(i))return null;var o=Object(_["q"])(r);return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,tt.t("What can {appName} do with your data?",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},tt.t("You\u2019ve allowed {appName} to:",{appName:o,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"})),n.a.createElement(E["a"],{scopeInfo:i,"data-qa":"app_management_modal_member_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,tt.t("Revoke access")),n.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},tt.t("{appName} will no longer be able to access your data or take actions for you.",{appName:o})),n.a.createElement(O["d"],{"data-qa":"app_management_modal_revoke_button",type:"outline",onClick:s},tt.t("Revoke"))))}},{key:"renderUninstallButton",value:function e(){var t=this.props,a=t.userIsAppmin,r=t.onUninstallButtonClick;return n.a.createElement("div",null,n.a.createElement(O["d"],{type:"outline",disabled:!a,onClick:r,"data-qa":"app_management_modal_uninstall_button"},tt.t("Uninstall App")),!a&&n.a.createElement("span",{className:"margin_left_100 sk_foreground_max"},tt.t("Only an app admin can uninstall this app.")))}},{key:"renderAlertBanner",value:function e(){var t=this.props,a=t.appName,r=t.activeDialogChannelId,i=t.alertBannerType,s=t.onAlertBannerClose;if(!i)return null;return n.a.createElement($e,{alertBannerType:i,appName:a,channelId:r,onClose:s})}},{key:"renderModalContents",value:function e(){var t=this.props,a=t.featureWtaModalM11n,i=t.isLoading,s=t.userIsAppmin;if(a&&i)return n.a.createElement(j["a"],null);return n.a.createElement(r["Fragment"],null,this.renderAlertBanner(),n.a.createElement("div",{className:"p-app_management_modal__sidebar_container"},this.renderSidebarMenu()),n.a.createElement("div",{className:"p-app_management_modal__content_container"},this.renderChannelAccessSection(),this.renderWorkspaceAccessSection(),s?this.renderAppminUserAccessSection():this.renderUserAccessSection()))}},{key:"render",value:function e(){var t=this.props,a=t.appIconLarge,r=t.appName,i=t.featureWtaModalM11n,s=t.hasError,o=t.isMobile,l=t.onClose,c=t.showModal;if(i?s:!c)return null;var u=r?tt.t("{appName} Settings",{appName:Object(_["q"])(r)}):r;return n.a.createElement(y["a"],{onCancel:l,showCancelButton:false,showGoButton:false,title:u,modalClasses:b()("p-app_management_modal",{"p-app_management_modal--mobile":o}),modalBodyOpenClassName:"p-app_management_modal__ReactModal__Body--open",position:"fixed",withHeader:true,headerImage:a,setBodyRef:this.setModalBodyRef},this.renderModalContents())}}]);return t}(r["PureComponent"]);it.displayName="AppManagementModal";it.defaultProps=rt;var st=it;var ot=a(10);var lt=a.n(ot);var ct=a(162);var ut=a(785);var dt=a(144);var pt=a(35);var mt=a(59);var ht=a(330);var vt=a(580);var ft=a(61);var bt=a(28);var gt=a(1423);var _t=a(1926);var yt=a(2083);var kt=a(18);var Ot=a(39);var Ct=a(213);var Et=a(91);var St=new _["b"]("app_management_modal");var wt={appName:i["b"].string.isRequired,onGo:i["b"].func.isRequired,onCancel:i["b"].func,wildcardEnabled:i["b"].bool.isRequired};var It={onCancel:g["noop"]};var jt=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={confirmInProgress:false};a.handleConfirm=a.handleConfirm.bind(a);return a}d()(t,[{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.wildcardEnabled,i=t.onCancel;var s=this.state.confirmInProgress;var o=Object(_["q"])(a);var l=void 0;var c=void 0;if(r){l={title:St.t("Remove {appName} from all public channels?",{appName:o}),goButtonText:St.t("Remove"),goButtonType:"danger","data-qa":"app_wildcard_disable_dialog"};c=St.t("{appName} will only be able to post in channels it\u2019s individually added to.",{appName:o})}else{l={title:St.t("Allow {appName} access to all public channels?",{appName:o}),goButtonText:St.t("Allow"),"data-qa":"app_wildcard_enable_dialog"};c=St.t("{appName} will be added to all public channels (quietly, of course).",{appName:o})}return n.a.createElement(Et["a"],N()({showCancelButton:true,contentLabel:l.title,truncateTitle:false,onGo:this.handleConfirm,onCancel:i,goButtonIsPending:s,goButtonIsDisabled:s},l),n.a.createElement("p",{className:"margin_bottom_0"},c))}}]);return t}(r["PureComponent"]);jt.displayName="AppWildcardDialog";jt.defaultProps=It;jt.displayName="AppWildcardDialog";var Tt=jt;var At=new _["b"]("app_management_modal");var Nt={appName:i["b"].string.isRequired,onCancel:i["b"].func,onGo:i["b"].func.isRequired,workspaceName:i["b"].string.isRequired};var Mt={onCancel:g["noop"]};var Pt=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={confirmInProgress:false};a.handleConfirm=a.handleConfirm.bind(a);return a}d()(t,[{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.onCancel,i=t.workspaceName;var s=this.state.confirmInProgress;var o=At.t("Revoke access to your member data?");var l=At.t("{appName} will remain installed on {workspaceName}, but will no longer be able to access your member data.",{appName:Object(_["q"])(a),workspaceName:Object(_["q"])(i)});return n.a.createElement(Et["a"],{"data-qa":"app_revoke_dialog",goButtonIsDisabled:s,goButtonIsPending:s,goButtonText:At.t("Revoke"),goButtonType:"danger",onCancel:r,onGo:this.handleConfirm,showCancelButton:true,title:o,truncateTitle:false},n.a.createElement("p",{className:"margin_bottom_0"},l))}}]);return t}(r["PureComponent"]);Pt.displayName="AppRevokeDialog";Pt.defaultProps=Mt;Pt.displayName="AppRevokeDialog";var Rt=Pt;var xt=new _["b"]("app_management_modal");var Dt={appName:i["b"].string.isRequired,currentUserScopeInfo:i["b"].arrayOf(T["a"]),isMemberCurrentUser:i["b"].bool,memberName:i["b"].string,onGo:i["b"].func,onClose:i["b"].func,scopes:i["b"].arrayOf(i["b"].string),userScopeInfo:i["b"].arrayOf(T["a"])};var Ft={currentUserScopeInfo:[],isMemberCurrentUser:false,memberName:void 0,onGo:g["noop"],onClose:g["noop"],scopes:[],userScopeInfo:[]};var Lt={memberId:i["b"].string.isRequired};var Bt=function e(t,a){return Object(g["find"])(t,function(e){return e.scopes[0]===a})};var Ut=function e(t,a){return a.map(function(e){return Bt(t,e)})};var qt=function e(t){var a=t.appName,r=t.currentUserScopeInfo,i=t.isMemberCurrentUser,s=t.memberName,o=t.onGo,l=t.onClose,c=t.scopes,u=t.userScopeInfo;var d=void 0;d=i?r:Ut(u,c);var p=Object(_["q"])(a);var m=i?xt.t("You\u2019ve allowed {appName} to:",{appName:p,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"}):xt.t("{memberName} has allowed {appName} to:",{appName:p,memberName:Object(_["q"])(s)});return n.a.createElement(Et["a"],{cancelText:xt.t("Done"),"data-qa":"app_user_permissions_dialog",goButtonType:"outline",goButtonText:xt.t("Revoke All"),showGoButton:i,reverseButtons:true,truncateTitle:false,onGo:o,onCancel:l,title:m},n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement(E["a"],{scopeInfo:d})))};qt.displayName="AppUserPermissionsDialog";qt.defaultProps=Ft;var Wt=qt;var Ht=function e(t,a){var r=a.memberId;return{isMemberCurrentUser:r===Object(L["getCurrentUserId"])(t),memberName:Object(we["getPrefCompliantMemberNameById"])(t,r)}};var Gt=Object(M["connect"])(Ht)(qt);Gt.propTypes=Lt;var Vt=Gt;var Kt=new _["b"]("app_management_modal");var zt="APP_SETTINGS_MODAL";var Qt="APP_CHANNEL_ADD_DIALOG";var Yt="APP_CHANNEL_REMOVE_DIALOG";var Jt={serviceId:i["b"].string,appProfile:i["b"].object,onClose:i["b"].func,showAppDirectoryLink:i["b"].bool,onUninstall:i["b"].func,isMobile:i["b"].bool,referringEventId:i["b"].string,referringUiContext:i["b"].object,workspaceName:i["b"].string,enqueueToast:i["b"].func,appName:i["b"].string,appId:i["b"].string,appUserId:i["b"].string,fetchAppAddResource:i["b"].func.isRequired,fetchAppRemoveResource:i["b"].func.isRequired,fetchAppUninstall:i["b"].func.isRequired,fetchAppWildcardDisable:i["b"].func.isRequired,fetchAppWildcardEnable:i["b"].func.isRequired,fetchAppRevokeUserAndUpdateAppPermissions:i["b"].func.isRequired,maybeUpdateAppPermissionsAfterChannelAdd:i["b"].func.isRequired,maybeUpdateAppPermissionsAfterChannelRemove:i["b"].func.isRequired,maybeUpdateAppPermissionsAfterWildcardChange:i["b"].func.isRequired,searchUsersForApp:i["b"].func.isRequired,clearAppPermissions:i["b"].func.isRequired,updatePublicChannelCount:i["b"].func.isRequired,wildcardEnabled:i["b"].bool,appIcon:i["b"].string,publicChannelCount:i["b"].number,privateChannelCount:i["b"].number,openModal:i["b"].func,closeModal:i["b"].func,currentUserScopeInfo:i["b"].arrayOf(T["a"]),userScopeInfo:i["b"].arrayOf(T["a"]),userIsAppmin:i["b"].bool,userCount:i["b"].number,showModal:i["b"].bool,isLoading:i["b"].bool,hasError:i["b"].bool,featureWtaModalM11n:i["b"].bool,clogger:i["b"].object.isRequired};var Xt={onUninstall:g["noop"],showAppDirectoryLink:true,isMobile:false,workspaceName:"",enqueueToast:g["noop"],serviceId:void 0,appProfile:void 0,appId:void 0,appUserId:void 0,appName:void 0,wildcardEnabled:false,onClose:g["noop"],appIcon:void 0,privateChannelCount:0,publicChannelCount:0,openModal:g["noop"],closeModal:g["noop"],currentUserScopeInfo:[],userScopeInfo:[],userCount:0,userIsAppmin:false,referringEventId:void 0,referringUiContext:void 0,showModal:false,isLoading:true,hasError:false,featureWtaModalM11n:false};var Zt=function e(t){var a=t.app_user_id,r=t.id,n=t.name,i=t.support_url,s=t.url;return{appUserId:a,appIcon:Object(ht["b"])(t,48),appIconLarge:Object(ht["b"])(t,88),appId:r,appName:n,appSupportUrl:i,appHomepageUrl:s}};var $t=function e(t,a){var r=t.app_user,n=t.app_id,i=t.profile,s=t.directory_profile;return{appUserId:r.id,appIcon:Object(ht["b"])(i,48,a),appIconLarge:Object(ht["b"])(i,88,a),appId:n,appName:i.name,appSupportUrl:s.support_url,appHomepageUrl:s.home_url}};var ea=80;var ta="already_has_resource";var aa="no_resource_to_remove";var ra="permission_exists";var na=aa;var ia=function(e){v()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.currentUserScopeInfo,n=t.userIsAppmin,i=t.userCount;if("user"===a.activeSection&&(n?0===i:Object(g["isEmpty"])(r)))return{activeSection:"channel"};return null}}]);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={alertBannerType:null,activeDialogChannelId:null,addChannelScopeInfo:null,activeSection:"channel"};Object(P["a"])(a,["handleSidebarMenuItemClick","handleWorkspaceSectionLinkClick","handleUninstallButtonClick","handleAlertBannerClose","handleWildcardCheckboxChange","handleAppSearchUsers","handleExclusionListAdd","handleExclusionListRemove","handleGrantListAdd","handleGrantListRemove","handleRevokeButtonClick","handleMemberListRevokeClick","handleViewUserPermissionsClick"]);a.referringEventId=e.referringEventId;a.referringUiContext=e.referringUiContext;return a}d()(t,[{key:"componentDidUpdate",value:function e(t,a){var r=this.props,n=r.featureWtaModalM11n,i=r.isLoading,s=r.hasError,o=r.showModal;var l=this.state.activeSection;if(n&&!t.hasError&&s){this.handleError();return}(n?!t.isLoading||i:t.showModal||!o)&&a.activeSection===l||this.trackClog(lt()({},kt["y"].action,kt["w"].IMPRESSION))}},{key:"componentWillUnmount",value:function e(){this.props.clearAppPermissions();this.trackClog(lt()({},kt["y"].action,kt["w"].CLOSE))}},{key:"getClogStep",value:function e(){var t=this.props.userIsAppmin;var a=this.state.activeSection;switch(a){case"workspace":return kt["A"].WORKSPACE_ACCESS_SECTION;case"user":return t?kt["A"].APPMIN_MEMBER_ACCESS_SECTION:kt["A"].MEMBER_ACCESS_SECTION;default:return kt["A"].CHANNEL_ACCESS_SECTION}}},{key:"trackClog",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;var i=this.props,s=i.appId,o=i.clogger;var l=N()(lt()({},kt["y"].step,n===zt?this.getClogStep():void 0),t);o.track(n,lt()({contexts:(a={},lt()(a,kt["c"].ui_context,l),lt()(a,kt["c"].referring_ui_context,this.referringUiContext),lt()(a,kt["c"].core,N()(lt()({},kt["d"].app_id,s),r)),a)},kt["c"].referring_event_id,this.referringEventId));this.referringEventId=n;this.referringUiContext=l}},{key:"trackClogForSidebarMenuClick",value:function e(t){var a;var r=void 0;switch(t){case"workspace":r=kt["z"].LINK_WORKSPACE_ACCESS_SECTION;break;case"channel":r=kt["z"].LINK_CHANNEL_ACCESS_SECTION;break;case"user":r=this.props.userIsAppmin?kt["z"].LINK_APPMIN_MEMBER_ACCESS_SECTION:kt["z"].LINK_MEMBER_ACCESS_SECTION;break;case"homepage":r=kt["z"].LINK_APP_HOMEPAGE;break;case"directory":r=kt["z"].LINK_APP_DIRECTORY;break;case"support":r=kt["z"].LINK_APP_SUPPORT;break;default:r=void 0;break}this.trackClog((a={},lt()(a,kt["y"].action,kt["w"].CLICK),lt()(a,kt["y"].ui_element,r),a))}},{key:"handleError",value:function e(){var t=this.props.featureWtaModalM11n;if(!t)return;this.props.closeModal();this.props.enqueueToast({element:n.a.createElement(ct["b"],{offsetY:ea,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},n.a.createElement("span",{"data-qa":"app_management_modal_error_toast"},Kt.t("Hmm, something went wrong. Try again?")))})}},{key:"handleSidebarMenuItemClick",value:function e(t){this.trackClogForSidebarMenuClick(t);t!==this.state.activeSection&&this.setState(function(){return{activeSection:t}})}},{key:"handleWorkspaceSectionLinkClick",value:function e(){this.handleSidebarMenuItemClick("workspace")}},{key:"showUninstallToast",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName;this.props.enqueueToast({element:n.a.createElement(ct["b"],{offsetY:ea},n.a.createElement("span",{"data-qa":"app_management_modal_uninstall_toast"},Kt.t("{appName} was removed from {workspaceName}",{appName:Object(_["q"])(a),workspaceName:Object(_["q"])(r)})))})}},{key:"handleUninstallConfirm",value:function e(){var t=this;var a=this.props,r=a.onUninstall,n=a.appId,i=a.onClose;return this.props.fetchAppUninstall({appId:n}).then(function(){r();t.showUninstallToast();i();t.props.closeModal()}).catch(function(){t.setState(function(){return{alertBannerType:"uninstallError"}})})}},{key:"toggleWildcardEnabled",value:function e(){var t=this;var a=this.props,r=a.appUserId,n=a.wildcardEnabled,i=a.serviceId;var s="fetchAppWildcard"+(n?"Disable":"Enable");return this.props[s]({appUserId:r}).then(function(e){t.props.maybeUpdateAppPermissionsAfterWildcardChange({appUserId:r,wildcardEnabled:!n});n||t.props.updatePublicChannelCount({countDelta:e,serviceId:i})}).catch(function(e){var a=Object(g["get"])(e,"data.error");a===ra||a===na||t.setState(function(){return{alertBannerType:n?"wildcardRemoveError":"wildcardAddError"}})})}},{key:"handleChannelAddOrRemove",value:function e(t,a,r){var n;this.trackClog((n={},lt()(n,kt["y"].action,kt["w"].CLICK),lt()(n,kt["y"].ui_element,r),n),lt()({},kt["d"].channel_id,t));this[a](t)}},{key:"handleExclusionListAdd",value:function e(t){this.handleChannelAddOrRemove(t,"showRemoveDialog",kt["z"].BTN_APP_ADD_EXCLUSION)}},{key:"handleExclusionListRemove",value:function e(t){this.handleChannelAddOrRemove(t,"showAddDialog",kt["z"].BTN_APP_REMOVE_EXCLUSION)}},{key:"handleGrantListAdd",value:function e(t){this.handleChannelAddOrRemove(t,"showAddDialog",kt["z"].BTN_APP_ADD_CHANNEL)}},{key:"handleGrantListRemove",value:function e(t){this.handleChannelAddOrRemove(t,"showRemoveDialog",kt["z"].BTN_APP_REMOVE_CHANNEL)}},{key:"showRemoveDialog",value:function e(t){var a=this;var r=this.props.appName;this.setState(function(){return{activeDialogChannelId:t,alertBannerType:null}});var i={appName:r,channelId:t,onConfirm:function e(){a.trackClog(lt()({},kt["y"].action,kt["w"].OK),lt()({},kt["d"].channel_id,t),Yt);return a.handleRemoveChannel()},onCancel:function e(){return a.trackClog(lt()({},kt["y"].action,kt["w"].CLOSE),lt()({},kt["d"].channel_id,t),Yt)}};this.props.openModal({element:n.a.createElement(_t["a"],i),isStackable:true});this.trackClog(lt()({},kt["y"].action,kt["w"].IMPRESSION),lt()({},kt["d"].channel_id,t),Yt)}},{key:"handleRemoveChannel",value:function e(){var t=this;var a=this.props.appUserId;var r=this.state.activeDialogChannelId;var n={alertBannerType:"removeSuccess"};return this.props.fetchAppRemoveResource({appUserId:a,channelId:r}).then(function(){t.props.maybeUpdateAppPermissionsAfterChannelRemove({appUserId:a,channelId:r});t.setState(function(){return n})}).catch(function(e){var a=Object(g["get"])(e,"data.error");a===aa?t.setState(function(){return n}):t.setState(function(){return{alertBannerType:"removeError"}})})}},{key:"showAddDialog",value:function e(t){var a=this;var r=this.props,i=r.appUserId,s=r.appName,o=r.appIcon;return this.props.fetchAppAddResource({appUserId:i,channelId:t,didConfirm:false}).then(function(e){a.setState(function(){return{activeDialogChannelId:t,addChannelScopeInfo:e,alertBannerType:null}});var r={channelId:t,appName:s,appIcon:o,scopeInfo:e,onAuthorize:function e(){a.trackClog(lt()({},kt["y"].action,kt["w"].ALLOW),lt()({},kt["d"].channel_id,t),Qt);a.handleAddChannel()},onDismiss:function e(){a.trackClog(lt()({},kt["y"].action,kt["w"].DO_NOT_ALLOW),lt()({},kt["d"].channel_id,t),Qt)},onClose:function e(){a.trackClog(lt()({},kt["y"].action,kt["w"].CLOSE),lt()({},kt["d"].channel_id,t),Qt)}};a.props.openModal({element:n.a.createElement(gt["b"],r),isStackable:true});a.trackClog(lt()({},kt["y"].action,kt["w"].IMPRESSION),lt()({},kt["d"].channel_id,t),Qt)}).catch(function(e){var r=Object(g["get"])(e,"data.error");r===ta?a.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}}):a.setState(function(){return{activeDialogChannelId:t,alertBannerType:"addError"}})})}},{key:"handleAddChannel",value:function e(){var t=this;var a=this.props.appUserId;var r=this.state.activeDialogChannelId;return this.props.fetchAppAddResource({appUserId:a,channelId:r,didConfirm:true}).then(function(){t.props.maybeUpdateAppPermissionsAfterChannelAdd({appUserId:a,channelId:r});t.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}})}).catch(function(){t.setState(function(){return{alertBannerType:"addError"}})})}},{key:"handleAlertBannerClose",value:function e(){this.setState(function(){return{alertBannerType:null}})}},{key:"handleWildcardCheckboxChange",value:function e(){var t;this.trackClog((t={},lt()(t,kt["y"].action,kt["w"].CLICK),lt()(t,kt["y"].ui_element,kt["z"].APP_WILDCARD_CHECKBOX),t));this.showWildcardDialog()}},{key:"showWildcardDialog",value:function e(){var t=this,a;var r=this.props,i=r.wildcardEnabled,s=r.appName;var o=i?kt["z"].APP_WILDCARD_DISABLE_DIALOG:kt["z"].APP_WILDCARD_ENABLE_DIALOG;var l={appName:s,wildcardEnabled:i,onGo:function e(){var a;t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].OK),lt()(a,kt["y"].ui_element,o),a));return t.toggleWildcardEnabled()},onCancel:function e(){var a;return t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].CLOSE),lt()(a,kt["y"].ui_element,o),a))}};this.props.openModal({element:n.a.createElement(Tt,l),isStackable:true});this.trackClog((a={},lt()(a,kt["y"].action,kt["w"].IMPRESSION),lt()(a,kt["y"].ui_element,o),a))}},{key:"handleUninstallButtonClick",value:function e(){var t;this.trackClog((t={},lt()(t,kt["y"].action,kt["w"].CLICK),lt()(t,kt["y"].ui_element,kt["z"].BTN_APP_UNINSTALL),t));this.showUninstallDialog()}},{key:"showUninstallDialog",value:function e(){var t=this,a;var r=this.props,i=r.appName,s=r.appIcon,o=r.workspaceName,l=r.publicChannelCount,c=r.privateChannelCount;var u={appName:i,appIcon:s,workspaceName:o,publicChannelCount:l,privateChannelCount:c,onGo:function e(){var a;t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].ALLOW),lt()(a,kt["y"].ui_element,kt["z"].APP_UNINSTALL_DIALOG),a));return t.handleUninstallConfirm()},onCancel:function e(){var a;return t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].CLOSE),lt()(a,kt["y"].ui_element,kt["z"].APP_UNINSTALL_DIALOG),a))}};var d=void 0;l>0?d=c>0?Kt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}} and {privateChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}</strong>.",{appName:i,publicChannelCount:l,privateChannelCount:c}):Kt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}}</strong>.",{appName:i,publicChannelCount:l}):c>0&&(d=Kt.rt("I understand {appName} will no longer be able to access <strong>{privateChannelCount, plural, =1 {# private conversation} other {# private conversations}}</strong>.",{appName:i,privateChannelCount:c}));u.channelAccessCheckboxText=d;this.props.openModal({element:n.a.createElement(yt["a"],u),isStackable:true});this.trackClog((a={},lt()(a,kt["y"].action,kt["w"].IMPRESSION),lt()(a,kt["y"].ui_element,kt["z"].APP_UNINSTALL_DIALOG),a))}},{key:"handleRevokeButtonClick",value:function e(){var t;this.trackClog((t={},lt()(t,kt["y"].action,kt["w"].CLICK),lt()(t,kt["y"].ui_element,kt["z"].BTN_APP_REVOKE),t));this.showRevokeDialog()}},{key:"handleMemberListRevokeClick",value:function e(){var t;this.trackClog((t={},lt()(t,kt["y"].action,kt["w"].CLICK),lt()(t,kt["y"].ui_element,kt["z"].APP_MEMBER_LIST_MENU_REVOKE),t));this.showRevokeDialog()}},{key:"showRevokeDialog",value:function e(){var t=this,a;var r=this.props,i=r.appName,s=r.workspaceName;this.setState(function(){return{alertBannerType:null}});var o={appName:i,onGo:function e(){var a;t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].OK),lt()(a,kt["y"].ui_element,kt["z"].APP_REVOKE_DIALOG),a));return t.handleRevokeConfirm()},onCancel:function e(){var a;return t.trackClog((a={},lt()(a,kt["y"].action,kt["w"].CLOSE),lt()(a,kt["y"].ui_element,kt["z"].APP_REVOKE_DIALOG),a))},workspaceName:s};this.props.openModal({element:n.a.createElement(Rt,o),isStackable:true});this.trackClog((a={},lt()(a,kt["y"].action,kt["w"].IMPRESSION),lt()(a,kt["y"].ui_element,kt["z"].APP_REVOKE_DIALOG),a))}},{key:"handleRevokeConfirm",value:function e(){var t=this;var a=this.props.serviceId;return this.props.fetchAppRevokeUserAndUpdateAppPermissions({serviceId:a}).then(function(){t.setState(function(){return{alertBannerType:"revokeSuccess"}})}).catch(function(){t.setState(function(){return{alertBannerType:"revokeError"}})})}},{key:"handleViewUserPermissionsClick",value:function e(t,a){var r;this.trackClog((r={},lt()(r,kt["y"].action,kt["w"].CLICK),lt()(r,kt["y"].ui_element,kt["z"].LINK_APP_VIEW_PERMISSIONS),r));this.showUserPermissionsDialog(t,a)}},{key:"showUserPermissionsDialog",value:function e(t,a){var r=this,i;var s=this.props,o=s.appName,l=s.currentUserScopeInfo,c=s.userScopeInfo;var u={appName:o,currentUserScopeInfo:l,memberId:t,onGo:function e(){return Object(g["defer"])(function(){return r.showRevokeDialog()})},onClose:function e(){var t;return r.trackClog((t={},lt()(t,kt["y"].action,kt["w"].CLOSE),lt()(t,kt["y"].ui_element,kt["z"].APP_USER_PERMISSIONS_DIALOG),t))},scopes:a,userScopeInfo:c};this.props.openModal({element:n.a.createElement(Vt,u),isStackable:true});this.trackClog((i={},lt()(i,kt["y"].action,kt["w"].IMPRESSION),lt()(i,kt["y"].ui_element,kt["z"].APP_USER_PERMISSIONS_DIALOG),i))}},{key:"handleAppSearchUsers",value:function e(t){var a=this;if(t.query){var r;this.trackClog((r={},lt()(r,kt["y"].action,kt["w"].SEARCH),lt()(r,kt["y"].ui_element,kt["z"].APP_MEMBER_LIST_SEARCH),r))}return this.props.searchUsersForApp(t).catch(function(){a.setState(function(){return{alertBannerType:"error"}})})}},{key:"render",value:function e(){var t=N()({onSidebarMenuItemClick:this.handleSidebarMenuItemClick,onSidebarMenuLinkClick:this.trackClogForSidebarMenuClick,onWorkspaceSectionLinkClick:this.handleWorkspaceSectionLinkClick,onRevokeButtonClick:this.handleRevokeButtonClick,onMemberListRevokeClick:this.handleMemberListRevokeClick,onUninstallButtonClick:this.handleUninstallButtonClick,onExclusionListAdd:this.handleExclusionListAdd,onExclusionListRemove:this.handleExclusionListRemove,onGrantListAdd:this.handleGrantListAdd,onGrantListRemove:this.handleGrantListRemove,onWildcardCheckboxChange:this.handleWildcardCheckboxChange,onAlertBannerClose:this.handleAlertBannerClose,onViewUserPermissionsClick:this.handleViewUserPermissionsClick,onAppSearchUsers:this.handleAppSearchUsers},this.props,this.state);return n.a.createElement(st,t)}}]);return t}(r["PureComponent"]);ia.displayName="AppManagementModalContainer";ia.displayName="AppManagementModalContainer";ia.defaultProps=Xt;var sa=function e(t,a){var r=a.appProfile,n=a.serviceId;var i=Object(pt["d"])(t);var s=i?Object(bt["getTeamDisplayName"])(i):"";var o={};var l=Object(Ct["getDefaultAppIcon"])(t);if(r)o=Zt(r,l);else if(n){var c=Object(vt["getAppProfileByIds"])(t,{serviceId:n});c&&(o=$t(c,l))}var u=Object(F["getAppPermissionsByServiceId"])(t,n);return N()({workspaceName:s,userIsAppmin:!Object(ft["a"])(t,"app_whitelist_enabled")||Object(q["l"])(t),showModal:Object(mt["b"])(u),isLoading:Object(mt["d"])(u),hasError:Object(mt["c"])(u)||Object(g["isEmpty"])(o),showWildcardToggle:Object(F["canAppBeAddedToChannelType"])(u,"channel"),featureWtaModalM11n:Object(L["isFeatureEnabled"])(t,"feature_wta_modal_m11n")},o,u,{clogger:Object(Ot["a"])({state:t})})};var oa={clearAppPermissions:F["clearAppPermissions"],enqueueToast:dt["enqueueToast"],fetchAppAddResource:ut["a"],fetchAppRemoveResource:ut["h"],fetchAppUninstall:ut["k"],fetchAppWildcardDisable:ut["l"],fetchAppWildcardEnable:ut["m"],fetchAppRevokeUserAndUpdateAppPermissions:F["fetchAppRevokeUserAndUpdateAppPermissions"],maybeUpdateAppPermissionsAfterChannelAdd:F["maybeUpdateAppPermissionsAfterChannelAdd"],maybeUpdateAppPermissionsAfterChannelRemove:F["maybeUpdateAppPermissionsAfterChannelRemove"],maybeUpdateAppPermissionsAfterWildcardChange:F["maybeUpdateAppPermissionsAfterWildcardChange"],searchUsersForApp:F["searchUsersForApp"],updatePublicChannelCount:F["updatePublicChannelCount"],openModal:s["openModal"],closeModal:s["closeModal"]};var la=ia;var ca=Object(M["connect"])(sa,oa)(ia);var ua=ca;var da=Object(o["b"])("Opens app app management modal in client",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=n.a.createElement(ua,a);e(Object(s["openModal"])({element:r}))});da.meta={name:"openAppManagementModal",key:"actionsOpenAppManagementModalOpenAppManagementModal",description:"Opens app app management modal in client"};da.propTypes={serviceId:i["b"].string,appProfile:i["b"].object,onClose:i["b"].func,showAppDirectoryLink:i["b"].bool,onUninstall:i["b"].func,isMobile:i["b"].bool,referringEventId:i["b"].string,referringUiContext:i["b"].object};var pa=t["a"]=da},1689:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(17);var s=a(41);var o=a(9);var l=a(296);var c=a(12);var u=a(0);var d=a(6);var p=a(1203);var m=a(117);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,a=e.title,r=e.description,i=e.children;return n.a.createElement(n.a.Fragment,null,n.a.createElement(m["c"],null,n.a.createElement(m["h"],{height:300,width:500,alt:"",src:t}),n.a.createElement(m["i"],{title:a}),n.a.createElement(m["d"],null,n.a.createElement("p",null,r))),i)}h.displayName="AppsTutorialStep";var v=a(3);var f=a.n(v);var b=a(37);var g=a.n(b);var _=a(846);var y=a(27);function k(e){var t=e.tutorialStatus,a=e.actions;return n.a.createElement(_["a"],null,n.a.createElement("span",null,t),n.a.createElement(m["f"],null,a.map(function(e){var t=e.label,a=g()(e,["label"]);return n.a.createElement(y["d"],f()({},a,{key:t}),t)})))}k.displayName="AppsTutorialFooter";k.defaultProps={tutorialStatus:"",actions:[]};var O=k;var C=new d["b"]("step_tutorial");function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,a=void 0===t?[]:t;return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.index,n=t.navigate,i=t.end;if(r<0||r>=a.length)return;var s=0===r;var o=r===a.length-1;var l=[];var c=C.t("{current} of {total}",{current:r+1,total:a.length});s||l.push({type:"outline",label:C.t("Back"),onClick:function e(){return n(a[r-1].id)}});l.push({label:o?C.t("Done"):C.t("Next"),onClick:o?i:function(){return n(a[r+1].id)}});return{step:a[r],footer:{tutorialStatus:c,actions:l}}}}var S=new d["b"]("apps_browser");function w(e){var t=e.closeModal;var a=Object(r["useMemo"])(function(){var e=[{id:"common_tasks",image:cdn_url+"/80588/img/app_space_tutorial_illustration_01.jpg",title:S.t("Common tasks, done in a jiffy"),description:S.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/80588/img/app_space_tutorial_illustration_02.jpg",title:S.t("Connect the tools you already use"),description:S.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/80588/img/app_space_tutorial_illustration_03.jpg",title:S.t("Discover new ways to work"),description:S.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}];var a=E({steps:e});return e.reduce(function(e,r,i){e[r.id]={render:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.switchPane;var o=a({index:i,navigate:s,end:t});return n.a.createElement(h,o.step,n.a.createElement(O,o.footer))}};return e},{})},[t]);return n.a.createElement(p["b"],{defaultPane:"common_tasks",isOpen:true,invertCloseButton:true,panes:a,closeModal:t})}w.displayName="AppsTutorial";var I=function e(t){return Object(l["bindActionCreators"])({closeModal:s["closeModal"]},t)};var j=Object(c["connect"])(null,I)(w);var T=a(1471);var A=a(386);var N=a(38);var M=a(39);var P="seen_app_space_tutorial";var R=Object(i["b"])("Opens the apps tutorial modal",function(e,t){var a=t();var r=Object(M["a"])({state:a});if(!Object(o["isFeatureEnabled"])(a,"feature_m11n_apps_browser")){Object(T["d"])();return}r.track("APP_TUTORIAL_VIEW",null);Object(N["h"])(a,P)||e(Object(A["b"])({pref:P,value:true}));e(Object(s["openModal"])({element:n.a.createElement(j),isStackable:true}))});R.meta={name:"openAppsTutorialModal",key:"actionsOpenAppsTutorialModalOpenAppsTutorialModal",description:"Opens the apps tutorial modal"};R.propTypes=null;var x=t["a"]=R},1690:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(2);var v=a(0);var f=a(879);var b=a(97);var g=a(35);var _=a(39);var y=a(31);var k=a(369);var O=a(6);var C=a(28);var E=a(225);var S=a(134);var w=new O["b"]("help");var I={tickets:v["b"].shape({open:v["b"].number,closed:v["b"].number,unread:v["b"].number}),team:v["b"].object.isRequired,clogger:v["b"].object.isRequired,helpCenterToken:v["b"].string};var j={tickets:{open:0,closed:0,unread:0},helpCenterToken:v["b"].string};var T="HELP_MODAL_ACTION";var A="/help/requests";var N=function e(t,a,r){var n={action:"view_request_history",trigger:"click_view_request_history"};t.track(T,n);Object(C["openAuthenticatedUrlInBrowser"])(r,Object(E["a"])(A,a))};var M=function e(t,a,r){var n={action:"view_new_replies",trigger:"click_view_new_replies"};t.track(T,n);Object(C["openAuthenticatedUrlInBrowser"])(r,Object(E["a"])(A,a))};var P=function e(t,a,r){var n={action:"view_open_requests",trigger:"click_view_open_requests"};t.track(T,n);Object(C["openAuthenticatedUrlInBrowser"])(r,Object(E["a"])(A,a))};var R=function e(t,a,r,n){if(t.closed>0&&0===t.unread&&0===t.open)return p.a.createElement("div",null,p.a.createElement("span",null,w.t("No pending requests.")),p.a.createElement(S["a"],{className:"p-help_modal__requests",onClick:function e(){return N(a,r,n)},"data-qa":"help_modal_requests_closed"},p.a.createElement("span",{className:"p-help_modal__requests__message bold"},w.t("View your help request history"),".")));return null};var x=function e(t,a,r,n){if(t>0){var i=t>1?w.t("You have new replies to your help requests."):w.t("You have a new reply to your help request.");return p.a.createElement(S["a"],{className:"p-help_modal__requests",onClick:function e(){return M(a,r,n)},"data-qa":"help_modal_requests_unread"},p.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),p.a.createElement("span",{className:"p-help_modal__requests__message bold"},i))}return null};var D=function e(t,a,r,n){if(t>0){var i=t>1?w.t("You have open help requests."):w.t("You have an open help request.");return p.a.createElement(S["a"],{className:"p-help_modal__requests",onClick:function e(){return P(a,r,n)},"data-qa":"help_modal_requests_read"},p.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),p.a.createElement("span",{className:"p-help_modal__requests__message read bold"},i))}return null};var F=function e(t){return p.a.createElement("div",{className:"display_flex flex_direction_column"},R(t.tickets,t.clogger,t.helpCenterToken,t.team),p.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},x(t.tickets.unread,t.clogger,t.helpCenterToken,t.team)),p.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},D(t.tickets.open,t.clogger,t.helpCenterToken,t.team)))};F.displayName="TicketsStatus";F.defaultProps=j;var L=F;var B=a(367);var U=a(53);var q=a(23);var W=a(2059);var H=a(3335);var G=new O["b"]("help");var V={query:v["b"].string,helpCenterToken:v["b"].string,team:v["b"].object.isRequired,tickets:v["b"].shape({open:v["b"].number,closed:v["b"].number,unread:v["b"].number}),onClose:v["b"].func,showKeyboardShortcuts:v["b"].func,trigger:v["b"].string.isRequired,clogger:v["b"].object.isRequired};var K={query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:h["noop"],showKeyboardShortcuts:h["noop"]};var z=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isModalOpen:true,query:e.query};a.zdLocale=Object(U["a"])();Object(y["a"])(a,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.trigger,r=t.clogger;r.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:a})}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var a=this.props.clogger;var r=Object(E["b"])({zdLocale:this.zdLocale,query:t,sidTrackingToken:this.props.helpCenterToken});t&&a.track("HELP_MODAL_SEARCH",{search_terms:t});a.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(r)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var a=this.props,r=a.clogger,n=a.team;var i="HELP_MODAL_ACTION";var s={action:"submit_new_request",trigger:"click_submit_new_request"};r.track(i,s);Object(C["openAuthenticatedUrlInBrowser"])(n,Object(E["a"])(t,this.props.helpCenterToken))}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var a="HELP_MODAL_ACTION";var r={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(a,r);this.props.showKeyboardShortcuts()}},{key:"onOpenSearchLink",value:function e(t){var a=t.url,r=t.query;var n=this.props.clogger;r&&n.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});n.track("HELP_MODAL_ZD_HIT",{zd_article_url:a})}},{key:"onQueryChange",value:function e(t){this.setState(function(){return{query:t}})}},{key:"render",value:function e(){var t=this.state.isModalOpen;var a=this.props,r=a.tickets,n=a.clogger,i=a.onClose,s=a.team,o=a.query;return p.a.createElement(k["a"],{isOpen:t,showCancelButton:false,showGoButton:false,onCancel:i,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},p.a.createElement(B["c"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},p.a.createElement(q["b"],{type:"keyboard",className:"small_right_margin"}),p.a.createElement("strong",null,G.t("Keyboard shortcuts"))),p.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},p.a.createElement("h1",{className:"p-help_modal_title"},G.t("How can we help?")),p.a.createElement(S["a"],{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},p.a.createElement("span",{className:"p-help_modal__browse__text"},G.t("Browse all answers")),p.a.createElement(q["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),p.a.createElement(W["a"],{query:o,onOpenLink:this.onOpenSearchLink,autoFocus:true,onQueryChange:this.onQueryChange}),p.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},p.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},p.a.createElement(L,{tickets:r,team:s,clogger:n,helpCenterToken:this.props.helpCenterToken})),p.a.createElement("div",{className:"p-help_modal__footer_contact"},p.a.createElement("div",null,p.a.createElement("span",{className:"p-help_modal__contact_us__message"},G.t("Can\u2019t find what you need, or have some feedback?")),p.a.createElement(B["c"],{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},G.t("Contact Us"))))))}}]);return t}(d["Component"]);z.displayName="HelpModal";z.defaultProps=K;var Q=z;var Y={query:v["b"].string,helpCenterTrackingToken:v["b"].string,team:v["b"].object.isRequired,showKeyboardShortcuts:v["b"].func,trigger:v["b"].string.isRequired,tickets:v["b"].shape({open:v["b"].number,closed:v["b"].number,unread:v["b"].number}).isRequired,clogger:v["b"].object.isRequired,onClose:v["b"].func};var J={query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:h["noop"],onClose:h["noop"]};var X=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.trigger,r=t.clogger,n=t.onClose,i=t.team,s=t.tickets,o=t.query;return p.a.createElement(Q,{query:o,team:i,helpCenterToken:this.props.helpCenterTrackingToken,tickets:s,onClose:n,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:a,clogger:r})}}]);return t}(d["Component"]);X.displayName="HelpModalContainer";X.defaultProps=J;var Z=function e(t){return{clogger:Object(_["a"])({state:t}),helpCenterTrackingToken:Object(f["getHelpCenterTrackingToken"])(t),team:Object(g["d"])(t),tickets:Object(f["getTicketCounts"])(t)}};var $={showKeyboardShortcuts:b["h"]};var ee=Object(m["connect"])(Z,$)(X);var te=t["a"]=ee},1692:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(17);var s=a(41);var o=a(2);var l=a(48);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(0);var _=a(31);var y=a(13);var k=a.n(y);var O=a(12);var C=a(4647);var E=a(6);var S=a(1210);var w=a(91);var I=a(551);var j=a(111);var T=a(1061);var A=a(1544);var N=a(27);var M=a(23);var P=a(261);var R=a(9);var x=a(21);var D=a(22);var F=a(242);var L=a(223);var B=a(11);var U=a(16);var q=a(28);var W=a(63);var H=a(513);var G=a(124);var V=a(859);var K=a(323);var z=a(2004);var Q=a(1583);var Y=a(412);var J=a(3514);function X(e,t){var a=[];Object(o["forEach"])(e,function(e){var r=e.item;if(Object(G["b"])(r.id))return;if(Object(G["a"])(r.id)){if(r.id===t)return;if(!Object(q["isTeamOpen"])(r))return}a.push(r)});return a}var Z=new E["b"]("quick_switcher");var $={featureSonicQuickSwitcher:g["b"].bool,search:g["b"].func,setPrimaryView:g["b"].func.isRequired,getDraftAndUnreadChannels:g["b"].func.isRequired,getTeamIdForChannelFromAnotherTeam:g["b"].func.isRequired,currentTeamId:g["b"].string.isRequired,closeModal:g["b"].func.isRequired,featureOfflineMode:g["b"].bool.isRequired,telemeter:g["b"].object.isRequired,recordFrecencyEvent:g["b"].func.isRequired,isChannelDeletedMember:g["b"].func.isRequired};var ee={featureSonicQuickSwitcher:false,search:o["noop"]};var te=38;var ae=300;var re="qs_result_rendering_ms";var ne="qs_input_change";var ie={open:false,searchQuery:"",results:[],index:0,deletedResults:[],initialFocusSet:false,searchMetaData:[]};var se={entities:{appActions:true,channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:true,includeMpims:true,includeArchived:true,onlyIfMember:false,searchPreviousNames:true,onlyVisibleMpims:false},members:{includeSelf:true,includeSlackbot:true,includeBots:true,onlyLocalTeam:false,onlyAdmins:false,includeDeleted:true},teams:true,userGroups:false,views:false},limit:24,sort:{preferExactMatch:true,frecency:true,preferChannelsUserBelongsTo:true,selfFirst:true},allowEmptyQuery:true,returnMetadata:true,tiered:true};var oe=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["a"])(a,["onInput","renderResult","onShowDeactivatedClick","onItemClick","handleUpOrShiftTabKey","handleDownOrTabKey","handleEnterKey","getBestFormerName"]);a.state=ie;a.searchInputRef=n.a.createRef();return a}m()(t,[{key:"componentDidMount",value:function e(){this.bindKeyCommands();this.setResultsToUnreadsAndDrafts()}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props.telemeter;r.getLatestMark(ne)&&r.measureAndClear(ne,re);if(!a.initialFocusSet&&this.searchInputRef.current){this.setInitialFocus();this.searchInputRef.current.focus()}}},{key:"componentWillUnmount",value:function e(){this.unbindKeyCommands()}},{key:"onItemClick",value:function e(){this.openChannelOrDm()}},{key:"onItemHover",value:function e(t){this.state.index!==t&&this.setState(function(){return{index:t}})}},{key:"onShowDeactivatedClick",value:function e(){var t=Object(o["filter"])(this.state.results,function(e){return"hasDeactivated"!==e.id});t=t.concat(this.state.deletedResults);this.setState(function(){return{results:t,deletedResults:[]}})}},{key:"onInput",value:function e(t){this.props.telemeter.mark(ne);var a=t.target.value;this.setState(function(){return{searchQuery:a}});this.search(a)}},{key:"setResultsToUnreadsAndDrafts",value:function e(){this.resetResultsState(this.props.getDraftAndUnreadChannels())}},{key:"setInitialFocus",value:function e(){this.setState(function(){return{initialFocusSet:true}})}},{key:"setSearchMetaData",value:function e(t){this.setState(function(){return{searchMetaData:t}})}},{key:"getBestFormerName",value:function e(t){var a=this.state.searchMetaData;var r=Object(o["find"])(a,["item.id",t]);if(!r)return null;var n=Object(o["get"])(r,"bestPreviousNameMatch");if(!n)return null;return n}},{key:"handleUpOrShiftTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.state,r=a.index,n=a.results;this.setState(function(){return{index:0===r?n.length-1:r-1}})}},{key:"handleDownOrTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.state,r=a.index,n=a.results;this.setState(function(){return{index:(r+1)%n.length}})}},{key:"handleEnterKey",value:function e(t){t.preventDefault();this.openChannelOrDm()}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up","shift+tab"],handler:this.handleUpOrShiftTabKey},{keys:["down","tab"],handler:this.handleDownOrTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new L["a"](document.body));this.keyCommands.bindAll(t)}},{key:"unbindKeyCommands",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"openChannelOrDm",value:function e(){var t=this.state,a=t.results,r=t.index,n=t.searchQuery;var i=this.props,s=i.currentTeamId,o=i.getTeamIdForChannelFromAnotherTeam;var l=a[r];var c=l.id;if(Object(G["a"])(c)){Object(K["c"])(V["a"],{teamId:c},{reason:"quickswitcher:openChannelOrDm"});return}var u=Object(B["isFromAnotherTeam"])(l);var d=u?o(l):s;this.props.recordFrecencyEvent({id:c,text:n});this.props.setPrimaryView({id:c,teamId:d});this.setState(function(){return ie});this.props.closeModal()}},{key:"search",value:function e(t){var a=this;this.remoteSearchPromise&&this.remoteSearchPromise.isPending()&&this.remoteSearchPromise.cancel();if(!t){this.setResultsToUnreadsAndDrafts();return null}return this.props.search({query:t,options:se}).then(function(e){a.remoteSearchPromise=e.promise;a.setSearchMetaData(e);var t=X(e,a.props.currentTeamId);a.resetResultsState(t);return a.remoteSearchPromise.then(function(e){var t=false;a.setSearchMetaData(e);var r=X(e,a.props.currentTeamId);a.resetResultsState(r,t)})})}},{key:"resetResultsState",value:function e(t){var a=this;var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=Object(o["partition"])(t,function(e){return Object(U["isDeleted"])(e)||a.props.isChannelDeletedMember(e)}),i=c()(n,2),s=i[0],l=i[1];var u=void 0;var d=void 0;if(s.length>1&&l.length){u=l.concat({id:"hasDeactivated"});d=s}else{u=l.concat(s);d=[]}var p=this.state,m=p.index,h=p.results;var v=0;if(!r&&h.length){var f=h[m];f&&f.id&&(v=Object(o["findIndex"])(u,function(e){return f.id===e.id}))}this.setState(function(){return{results:u,deletedResults:d,index:-1===v?0:v}})}},{key:"renderResult",value:function e(t){var a=this;if(!this.props.featureSonicQuickSwitcher)return null;var r=this.state.results[t].id;var i=this.getBestFormerName(r);var s=t===this.state.index;if("hasDeactivated"===r)return this.renderDeletedOptionRow();var o=k()("p-quick_switcher__searcher_result",{"p-quick_switcher__searcher_result--selected":t===this.state.index});var l=void 0;l=r===Y["a"].allThreads?n.a.createElement(A["a"],{invert:s,label:Z.t("Threads"),prefix:n.a.createElement(M["b"],{type:"comment-alt",size:"inherit"}),"data-qa":"quick_switcher_result_threads"}):Object(G["a"])(r)?n.a.createElement(Q["a"],{id:r,isActive:s}):n.a.createElement(T["a"],{channelId:r,isActive:s,"data-qa":"quick_switcher_result_channel",bestFormerName:i,displayFormerNames:j["d"].bestOnly});return n.a.createElement(N["c"],{onClick:this.onItemClick,onMouseMove:function e(){return a.onItemHover(t)},className:o,"data-qa":"quick_switcher_result"},l)}},{key:"renderEmptyResults",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;var t=this.state.searchQuery;var a=Z.t("Create a channel named #{channelName}",{channelName:t});var r=Z.t("No matches found. Did you spell it correctly?");return n.a.createElement("div",{className:"p-quick_switcher__empty_results_container","data-qa":"quick_switcher_empty_results"},n.a.createElement("span",{className:"p-quick_switcher__empty_results_label"},r),n.a.createElement(z["a"],null,n.a.createElement(N["d"],{type:"outline",size:"small"},a)))}},{key:"renderDeletedOptionRow",value:function e(){var t=k()("p-quick_switcher__show_deactivated");var a=Z.t("Show { deletedLength, plural, =1 { # deactivated account } other { # deactivated accounts }}",{deletedLength:this.state.deletedResults.length,fallbackHash:"feba4c19a527da3284a69be904d33a90e6fb3f17",fallbackHashNs:"jumper"});return n.a.createElement(N["c"],{onClick:this.onShowDeactivatedClick,className:t},a)}},{key:"renderResultsFromSearcher",value:function e(){var t=this;var a=this.state,r=a.results,i=a.index;this.keys=Object(o["map"])(r,"id");var s=this.keys[i];var l=Math.min(r.length*te,ae);return n.a.createElement("div",{"data-qa":"quick_switcher_results"},n.a.createElement(C["a"],{disableHeight:true},function(e){var a=e.width;return n.a.createElement(I["a"],{width:a,height:l,keys:t.keys,rowRenderer:t.renderResult,itemToScroll:s,animateOnScroll:false})}))}},{key:"renderResults",value:function e(){if(this.state.results.length)return this.renderResultsFromSearcher();if(this.state.searchQuery)return this.renderEmptyResults();return null}},{key:"renderFooter",value:function e(){var t=Z.rt('{iconUpArrow}{iconDownArrow} to navigate {iconEnter} to select <strong className="margin_left_150">esc</strong> to dismiss',{iconUpArrow:n.a.createElement(M["b"],{type:"arrow-large-up",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconDownArrow:n.a.createElement(M["b"],{type:"arrow-large-down",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconEnter:n.a.createElement(M["b"],{type:"enter",size:"inherit",className:"p-quick_switcher__footer_icon margin_left_150"}),fallbackHash:"6073ad556716a850199fe235793ca2e2a12dc636",fallbackHashNs:"jumper"});if(!this.props.featureOfflineMode)return n.a.createElement("div",{className:"t-display-as-micro"},t);var a=Z.rt("{iconOffline} No connection \u2014\xa0some results may not be available.",{iconOffline:n.a.createElement(M["b"],{type:"cloud-offline",size:"inherit",className:"p-quick_switcher__footer_icon p-quick_switcher__footer_icon_offline"})});return n.a.createElement("div",{className:"t-display-as-micro"},n.a.createElement(S["b"],null,t),n.a.createElement(S["a"],null,a))}},{key:"render",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;return n.a.createElement(w["a"],{showHeader:false,showFooter:true,className:"p-quick_switcher","data-qa":"quick_switcher",showCancelButton:false,showCloseButton:false,showGoButton:false,footerText:this.renderFooter(),overlayClassName:"p-quick_swticher_overlay",titleAria:Z.t("Quick Switcher")},n.a.createElement("input",{placeholder:Z.t("Jump to..."),className:"p-quick_switcher__input","data-qa":"quick_switcher_input",onChange:this.onInput,value:this.state.searchQuery,ref:this.searchInputRef,spellCheck:false}),this.renderResults())}}]);return t}(r["PureComponent"]);oe.displayName="QuickSwitcher";oe.defaultProps=ee;var le=function e(t){return{featureSonicQuickSwitcher:Object(R["isFeatureEnabled"])(t,"feature_sonic_quick_switcher"),getDraftAndUnreadChannels:function e(){return Object(x["i"])(t)},getTeamIdForChannelFromAnotherTeam:function e(a){return Object(B["teamIdForChannelFromAnotherTeam"])(t,a)},isChannelDeletedMember:function e(a){return Object(B["isImWithDeletedMember"])(t,a)},currentTeamId:Object(D["b"])(t),featureOfflineMode:Object(R["isFeatureEnabled"])(t,"feature_offline_mode"),telemeter:Object(W["c"])({state:t})}};var ce={search:P["e"],setPrimaryView:F["a"],closeModal:s["closeModal"],recordFrecencyEvent:H["c"]};var ue=Object(O["connect"])(le,ce)(oe);var de=ue;var pe=a(757);var me=a(762);var he=a(2005);var ve="quick-switcher";function fe(e,t){var a=Object(s["getCurrentModals"])(t());if(Object(o["find"])(a,{name:ve})){e(Object(s["closeModal"])());return}e(Object(s["openModal"])({element:n.a.createElement(de,null),name:ve}))}function be(e){var t=Object(s["getCurrentModals"])(e);return!!Object(o["find"])(t,{name:ve})}var ge=Object(i["b"])("maybe shows quick switcher modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.keyCode;r&&r.preventDefault();if(Object(me["b"])(t())){var i=void 0;n&&n===pe["codes"].k?i="k":n&&n===pe["codes"].t&&(i="t");e(Object(he["a"])({key:i||"button"}));return true}if(fe(e,t))return true;return false});ge.meta={name:"maybeShowQuickSwitcher",key:"componentsQuickSwitcherQuickSwitcherToggleMaybeShowQuickSwitcher",description:"maybe shows quick switcher modal"};ge.propTypes={event:g["b"].object,keyCode:g["b"].number};var _e=t["a"]=ge},1693:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(38);var f=a(6);var b=a(540);var g=a(209);var _=a(919);var y=a(118);var k=a(2);var O=a(911);var C=a(24);var E=Object(C["b"])("TS.ui.comments.startDelete");var S=a(23);var w=a(69);var I=a(116);var j=new f["b"]("comments");var T={isStarred:m["b"].bool,updateStar:m["b"].func,commentId:m["b"].string,fileId:m["b"].string};var A={isStarred:false,updateStar:k["noop"],commentId:void 0,fileId:void 0};var N=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);a.toggleStar=a.toggleStar.bind(a);a.deleteComment=a.deleteComment.bind(a);return a}s()(t,[{key:"toggleStar",value:function e(){var t=this.props,a=t.commentId,r=t.fileId,n=t.isStarred;if(!a||!r)return;this.props.updateStar(!n,{file_comment:a,file_comment_file:r})}},{key:"deleteComment",value:function e(){var t=this.props,a=t.commentId,r=t.fileId;if(!a||!r)return;E(r,a)}},{key:"renderMenu",value:function e(t){var a=this.props.isStarred;return p.a.createElement(w["f"],t,p.a.createElement(w["b"],{label:a?j.t("Unstar this file comment"):j.t("Star this file comment"),onSelected:this.toggleStar}),p.a.createElement(w["d"],null),p.a.createElement(w["b"],{label:j.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){return p.a.createElement(w["e"],{renderMenu:this.renderMenu,position:"left-bottom"},p.a.createElement(I["a"],{className:"p-comment__actions","aria-label":j.t("Show more actions")},p.a.createElement(S["b"],{type:"cog",size:"inherit"})))}}]);return t}(d["PureComponent"]);N.displayName="CommentActions";N.defaultProps=A;var M=Object(h["connect"])(null,{updateStar:O["a"]})(N);var P=a(3654);var R=new f["b"]("comments");var x={time24:m["b"].bool,comment:m["b"].shape({id:m["b"].string,user:m["b"].string,timestamp:m["b"].number,comment:m["b"].string}).isRequired,fileId:m["b"].string};var D={time24:false,fileId:void 0};var F=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.time24,n=t.fileId;var i=a.user,s=a.timestamp,o=a.comment,l=a.is_starred,c=a.id;return p.a.createElement("div",{className:"p-comment"},p.a.createElement("div",{className:"p-comment__header"},i?p.a.createElement(_["a"],{userId:i}):null,p.a.createElement("span",{className:"p-comment__timestamp"},R.t("{date} at {time}",{date:Object(b["a"])(s,{shortenMonth:true}),time:Object(g["a"])(s,{do24hrTime:r})})),p.a.createElement(M,{isStarred:l,commentId:c,fileId:n})),p.a.createElement("div",{className:"p-comment__body"},p.a.createElement(y["a"],{text:o,memberId:i})))}}]);return t}(d["PureComponent"]);F.displayName="Comment";F.defaultProps=D;function L(e){return{time24:Object(v["h"])(e,"time24")}}var B=t["a"]=Object(h["connect"])(L)(F)},1698:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(12);var o=a(109);var l=a(2);var c=a(13);var u=a.n(c);var d=a(9);var p=a(54);var m=a(6);var h=a(1947);var v=a(16);var f=new m["b"]("threads");var b={className:r["b"].string,participantNames:r["b"].arrayOf(r["b"].string).isRequired,replyUsersCount:r["b"].number.isRequired,replyCount:r["b"].number,prefixWithReplyCount:r["b"].bool,includesSelf:r["b"].bool,broadcastPreabmle:r["b"].bool};var g={className:void 0,replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function _(e){var t=e.participantNames,a=e.includesSelf,r=e.replyCount,n=e.replyUsersCount,i=e.prefixWithReplyCount,s=e.broadcastPreabmle;if(s&&1===r)return f.rt("1 reply");if(a)switch(n){case 1:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:r});return f.t("Just you");case 2:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:r,userName:t[0]});return f.rt("{userName} and you",{userName:t[0]});default:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:r,userName1:t[0],userName2:t[1]});return f.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(m["i"])(t,{noEscape:true}).join("");if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:r,names:o});return o}function y(e){var t=e.participantNames,a=e.replyUsersCount,r=e.replyCount,n=e.prefixWithReplyCount;var s=a-2;var o=Object(l["drop"])(t,2);o.length<s&&o.push(f.rt("others"));var c=Object(m["i"])(o,{noEscape:true}).join("");if(n)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:r,userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))});return f.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))})}function k(e){var t=e.className,a=e.participantNames,r=e.replyUsersCount,n=e.replyCount,s=e.prefixWithReplyCount,o=e.includesSelf,l=e.broadcastPreabmle;if(0===r)return null;var c=u()("p-thread_participant_list",t);return i.a.createElement("span",{className:c,"data-qa":"thread_participant_list"},r<=3?_({participantNames:a,replyCount:n,replyUsersCount:r,prefixWithReplyCount:s,includesSelf:o,broadcastPreabmle:l}):y({participantNames:a,replyCount:n,replyUsersCount:r,prefixWithReplyCount:s}))}k.displayName="ThreadParticipantList";k.defaultProps=g;var O=Object(o["pure"])(k);function C(e,t){var a=t.replyUsers;var r=t.replyUsersCount;var n=Object(d["getCurrentUserId"])(e);var i=Object(l["includes"])(a,n);var s=Object(l["includes"])(a,v["REVOKED_ID"]);var o=Object(h["a"])(e,a);r||(r=a.length);return{participantNames:s?Object(l["reject"])(o,function(e){return e===v["REVOKED_USER_NAME"]}):o,replyUsersCount:s?r-1:r,includesSelf:i}}var E=Object(s["connect"])(C)(k);var S=t["a"]=E},1699:function(e,t,a){"use strict";var r=a(17);var n=a(243);var i=a(227);var s=a(410);var o=a(0);var l=a(39);var c=a(277);var u=a(182);var d=a(1647);var p=Object(r["b"])("Clog clicks on a message or file using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.suggestion;var i=t();var o=e(Object(s["getSearchSessionId"])());var p=e(Object(s["getQuerySessionId"])());var m=Object(n["getSearchAutocompleteSuggestions"])(i);var h=Object(n["getSearchAutocompleteSelectedIndex"])(i);var v=m.map(function(e){return e.featureVector});var f=Object(l["a"])({state:i});var b=Object(c["getSearchInputBoxUserQuery"])(i);var g=b?b.length:0;var _=Object(u["h"])(i);var y={accept_module_name:"results_unified",accept_module_length:m.length,accept_item_offset:h,feature_vector_list:v,suggestion_type:r.type,is_navigational:r.is_type_navigational,navigation_model_id:r.id,request_id:Object(d["a"])(i),search_session_id:o,client_request_id:p,query_length:g,open_method:_};f.track("SEARCH_AUTOCOMPLETE_ACCEPT",y)});p.meta={name:"clogAutocompleteAccept",key:"actionsUniversalSearchClogAutocompleteClogAutocompleteAccept",description:"Clog clicks on a message or file using data from redux"};p.propTypes={suggestion:o["b"].object.isRequired};var m=p;var h=a(1082);var v=a(202);var f=a(1058);var b=a(1141);var g=a(755);var _=a(97);var y=a(442);var k=a(761);var O=a(14);var C=a(124);var E=a(211);var S=a(575);var w=a(187);var I=a(242);var j=a(1832);var T=a(11);var A=a(16);var N=a(32);var M=a(884);var P=a(513);var R=a(577);var x=a(1200);var D=a(4771);var F=a(1253);var L=a(22);var B=a(859);var U=a(323);var q=a(28);var W=a(529);var H=a(9);var G=a(1373);var V=a(4946);var K=a(822);var z=a(151);var Q=a(21);var Y=a(29);var J=a(820);var X=a(239);var Z=a(25);var $=a(423);a.d(t,"a",function(){return se});var ee={},te=ee.fetchAuthAndSetFocusedWorkspace;var ae={},re=ae.getWorkspacesMeta,ne=ae.isWorkspaceExpired;var ie="IMPROVED_SEARCH";var se=Object(r["b"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(O["a"])({getState:t}).info(ie,"Accepted search query");var a=t();var r=Object(n["getSearchAutocompleteSelectedIndex"])(a)||0;var o=Object(n["getSearchAutocompleteSuggestions"])(a)[r];if(!o)return;e(m({suggestion:o}));if(o.is_type_query_completion){var l=Object(i["g"])(o.suggestion_replacement);var u=Object(i["g"])(o.suggestion_replacement_for_request);Object(O["a"])({getState:t}).info(ie,"Accepting query suggestion");e(Object(v["setEditableRequestQueryThenRequest"])({query:u}));e(Object(s["setSearchSessionLastQuery"])({query:u}));e(Object(c["setSearchInputBoxDisplayQuery"])({displayQuery:l}));if(Object(S["a"])(a)){e(Object(n["closeSearchAutocomplete"])());Object(w["n"])("Vsearch")}else e(Object(b["a"])({interfaceMode:g["a"].SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file){Object(O["a"])({getState:t}).info(ie,"Navigating to file. file: "+o.file.id);e(Object(_["c"])({fileId:o.file.id}))}else{Object(O["a"])({getState:t}).info(ie,"Navigating to model: id: "+o.id);if(Object(C["a"])(o.id))if(Object(N["a"])()){var d=Object(Z["b"])(a);oe(o.id)?Object(U["c"])(B["a"],{teamId:o.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object($["b"])()?le(e,t,d,o.id):ce(e,t,d,o.id)}else if(Object(M["a"])())Object(E["o"])(o.id);else{var p=o.team.url||Object(q["getTeamUrl"])(o.team);Object(W["a"])(p)}else if(o.channel&&Object(T["isFromAnotherTeam"])(o.channel)){var A=o.channel.id;var Y=Object(F["a"])({state:a,channel:o.channel,currentTeamId:Object(L["b"])(a)})||Object(T["teamIdForChannelFromAnotherTeam"])(a,o.channel);if(Object(N["a"])()){var J=Object(Z["b"])(a);oe(Y)?e(Object(I["a"])({id:A,teamId:Y})):Object($["b"])()?le(e,t,J,Y,A):ce(e,t,J,Y,A)}else e(Object(j["a"])({teamId:Y,channelId:A}))}else if(o.channel&&Object(T["legacyIsFromAnotherTeam"])(a,o.channel)){var X=o.channel.team_id;var ee=o.channel.id;Object(N["a"])()?e(Object(I["a"])({id:ee,teamId:X})):e(Object(j["a"])({teamId:X,channelId:ee}))}else if("Vapp_space"===o.id){var te=Object(H["isFeatureEnabled"])(t(),"feature_m11n_apps_browser");var ae=Object(K["l"])(t());if(te)if(ae){e(Object(D["a"])());e(Object(h["a"])({eventId:"APP_LAUNCHER_OPEN_FROM_SEARCH"}))}else e(Object(x["a"])());else Object(R["a"])()}else{var re=void 0;Object(z["a"])(o.id)&&(re=Object(Q["l"])(a,o.id));e(Object(y["a"])({id:re||o.id}))}var ne=o.channel||o.member||{id:o.id};var se=Object(c["getSearchInputBoxUserQuery"])(a);e(Object(P["c"])({id:ne.id,text:se}))}e(Object(f["a"])({textyString:""}));e(Object(k["a"])());e(Object(n["closeSearchAutocomplete"])())}else if(o.is_type_action&&Object(G["a"])(a)){if(o.is_type_app_action){var ue=o.app_action;var de=Object(c["getSearchInputBoxUserQuery"])(a);e(Object(V["a"])({actionId:ue.id,reason:"search-autocomplete-suggestion-accept"}));e(Object(P["c"])({id:ue.id,text:de}))}Object(O["a"])({getState:t}).action("Executed action",o);e(Object(f["a"])({textyString:""}));e(Object(k["a"])());e(Object(n["closeSearchAutocomplete"])())}});se.meta={name:"searchAutocompleteSuggestionAccept",key:"actionsUniversalSearchSearchAutocompleteSuggestionAcceptSearchAutocompleteSuggestionAccept",description:"Accept the selected (or 0th) search autocomplete suggestion"};se.propTypes={};function oe(e){var t=Object(Y["e"])();var a=re(t);return!!(a[e]&&!ne(t,e))}function le(e,t,a,r,n){if(Object(A["isMemberOnTeam"])(a,r))return Object(Y["a"])(te({teamId:r,channelId:n}));Object(J["d"])(false);return e(Object(X["d"])({teamId:r})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){return Object(Y["a"])(te({teamId:r,channelId:n}))}).catch(function(e){Object(O["a"])({getState:t}).error("Unable to join team "+r+": "+e);Object(J["d"])(true)})}function ce(e,t,a,r,n){if(Object(A["isMemberOnTeam"])(a,r))return Promise.resolve(ue(e,r,n));Object(J["d"])(false);return e(Object(X["d"])({teamId:r})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){ue(e,r,n)}).catch(function(e){Object(O["a"])({getState:t}).error("Unable to join team "+r+": "+e)}).finally(function(){return Object(J["d"])(true)})}function ue(e,t,a){a?e(Object(I["a"])({id:a,teamId:t})):Object(U["c"])(B["a"],{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}},1703:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(0);var s=a(37);var o=a.n(s);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(1);var b=a.n(f);var g=a(23);var _=a(162);var y=a(44);var k=a(6);var O=new k["b"]("app_actions");var C={onRetry:i["b"].func.isRequired};var E={};var S=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRetry=a.onRetry.bind(a);a.toastRef=b.a.createRef();return a}d()(t,[{key:"onRetry",value:function e(){this.props.onRetry();var t=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();t&&t.hideToast()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.onRetry,i=o()(a,["onRetry"]);var s=O.rt("Sorry, that didn\u2019t work. <a>Try again?</a>",null,function(e){var a=e.text;return b.a.createElement(y["a"],{"data-qa":"app_action_toast_retry",onClick:t.onRetry},a)});return b.a.createElement(_["b"],n()({ref:this.toastRef},i),b.a.createElement(g["a"],{type:"warning",danger:true}),b.a.createElement("span",null,s))}}]);return t}(f["PureComponent"]);S.displayName="AppActionFailToast";S.defaultProps=E;var w=S;var I=function e(t){return b.a.createElement(S,t)};I.displayName="appActionFailToastFactory";var j=a(830);var T=a(17);var A=a(9);var N=a(144);var M=a(22);var P=a(374);var R=a(1256);var x=a(530);var D=a(849);a.d(t,"b",function(){return L});a.d(t,"a",function(){return U});var F=Object(T["b"])("Runs a message action (deprecated)",function(e,t,a){var r=t();var i=Object(x["f"])(r);if(Object(x["c"])(i,a))return Promise.resolve();e(Object(x["e"])(a));return e(Object(j["b"])(n()({},a,{type:"message_action"}))).then(function(){return e(Object(x["j"])(a))}).catch(function(){e(Object(x["i"])(a));var t=function t(){return e(F(a))};var r=I({onRetry:t});e(Object(N["enqueueToast"])({element:r}))})});F.meta={name:"deprecatedRunMessageAction",key:"appActionsStoreActionsDeprecatedRunMessageAction",description:"Runs a message action (deprecated)"};F.propTypes={actionId:i["b"].string,appId:i["b"].string,channelId:i["b"].string,messageTs:i["b"].string};var L=Object(T["b"])("Runs a message action",function(e,t,a){if(!Object(A["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor"))return e(F(a));e(Object(D["c"])());var r=n()({},a,{type:P["a"].messageAction});return e(Object(j["b"])(r)).catch(function(){var t=function t(){return e(L(r))};var a=I({onRetry:t});e(Object(N["enqueueToast"])({element:a}))})});L.meta={name:"runMessageAction",key:"appActionsStoreActionsRunMessageAction",description:"Runs a message action"};L.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired,channelId:i["b"].string.isRequired,messageTs:i["b"].string.isRequired};var B=Object(T["b"])("Runs a global action",function(e,t,a){e(Object(D["c"])());var r=n()({},a,{type:P["a"].globalAction});return e(Object(j["b"])(r)).catch(function(){var t=function t(){return e(B(r))};var a=I({onRetry:t});e(Object(N["enqueueToast"])({element:a}))})});B.meta={name:"runGlobalAction",key:"appActionsStoreActionsRunGlobalAction",description:"Runs a global action"};B.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired};var U=Object(T["b"])("Explicitly load app actions",function(e,t){var a=t();var r=Object(M["b"])(a);return Object(R["a"])(r)});U.meta={name:"loadAppActions",key:"appActionsStoreActionsLoadAppActions",description:"Explicitly load app actions"}},1706:function(e,t,a){"use strict";a.d(t,"a",function(){return b});a.d(t,"b",function(){return g});var r=a(37);var n=a.n(r);var i=a(0);var s=a(1);var o=a.n(s);var l=a(109);var c=a(13);var u=a.n(c);var d=a(345);var p=a(1670);var m={date:i["b"].number.isRequired,isUnread:i["b"].bool,ghost:i["b"].bool};var h={isUnread:false,ghost:false};function v(e){var t=e.isUnread,a=n()(e,["isUnread"]);var r=t?o.a.createElement(p["a"],{ghost:a.ghost}):o.a.createElement("hr",{className:"c-message_list__day_divider__line"});return o.a.createElement("div",{className:"c-message_list__day_divider"},r)}v.displayName="DayDivider";v.defaultProps=h;function f(e){var t=e.date,a=e.sticky;var r=t/1e3;var n=Object(d["a"])(r,"{day_divider_pretty}");var i=u()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!a});return o.a.createElement("div",{className:i},o.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}f.displayName="DayDividerLabel";f.defaultProps={sticky:true};var b=Object(l["pure"])(v);var g=Object(l["pure"])(f)},1707:function(e,t,a){"use strict";var r=a(10);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(2);var f=a(31);var b=a(0);var g=a(1);var _=a.n(g);var y=a(13);var k=a.n(y);var O=a(12);var C=a(110);var E=a.n(C);var S=a(22);var w=a(21);var I=a(9);var j=a(817);var T=a(137);var A=a(94);var N=a(829);var M=a(38);var P=a(557);var R=a(392);var x=a(144);var D=a(41);var F=a(91);var L=a(2024);var B=a(811);var U=a(1459);var q=a(1406);var W=a(105);var H=a(818);var G=a(6);var V=new G["b"]("coachmarks");var K={anchorElement:b["b"].instanceOf(Element),setTractorFilesCoachmarkVisibility:b["b"].func};var z={anchorElement:null,setTractorFilesCoachmarkVisibility:v["noop"]};var Q=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,a=t.setTractorFilesCoachmarkVisibility,r=t.anchorElement;return _.a.createElement("div",{className:"position_relative"},_.a.createElement(H["a"],{anchorElement:r,"data-qa":"coachmark",isOpen:true,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:function e(){return a(false)},coachmarkClassNames:"c-message-pane__c-coachmark"},_.a.createElement("h3",null,V.t("Share a file in the channel")),_.a.createElement("p",null,V.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}]);return t}(H["a"]);Q.displayName="TractorShareFilesCoachmark";var Y=Q;Q.propTypes=K;Q.defaultProps=z;var J=a(528);var X=a(188);var Z=a(806);var $=a(14);var ee=a(200);var te=a(852);var ae=a(1176);var re=a(32);var ne=a(162);var ie=a(1069);var se=a(39);var oe=a(33);var le=a(1421);var ce=new G["b"]("offline_mode");var ue=new G["b"]("msg_input");var de=function e(t){if(!t)return"";var a=document.createElement("span");a.innerHTML=t;return a.textContent.trim()};var pe={channelId:b["b"].string,teamId:b["b"].string,legacyChannel:b["b"].object,threadTs:b["b"].string,viewContext:b["b"].string,placeholder:b["b"].string,sendMessage:b["b"].func,className:b["b"].string,autocompleteProps:b["b"].object,enableEmojiButton:b["b"].bool,enableFileButton:b["b"].bool,enableSnippetCreation:b["b"].bool,enableMentionButton:b["b"].bool,enableComposerButton:b["b"].bool,enableSendButton:b["b"].bool,enableBroadcastKeywords:b["b"].bool,enableJumbomoji:b["b"].bool,arrowHistory:b["b"].bool,forwardedRef:b["b"].object.isRequired,useSendButton:b["b"].bool,isDisabled:b["b"].bool,maxLines:b["b"].number,useLegacyCreate:b["b"].bool,useLegacyDrafts:b["b"].bool,focusOnMount:b["b"].bool,focusOnPaste:b["b"].bool,draft:b["b"].object,draftDelay:b["b"].number,setChannelDraft:b["b"].func,clearChannelDraft:b["b"].func,editLastMessage:b["b"].func,openSnippetDialog:b["b"].func,featureOfflineMode:b["b"].bool,featureSonicInputs:b["b"].bool,clientToolBar:b["b"].bool,featureWysiwygComposer:b["b"].bool,wasRecentlyOnline:b["b"].bool,isClientOnline:b["b"].bool,enqueueToast:b["b"].func,openModal:b["b"].func,logger:b["b"].object.isRequired,clogger:b["b"].object.isRequired,maxLength:b["b"].number,tabIndex:b["b"].number,fileButtonTabIndex:b["b"].number,showFocusOutline:b["b"].bool,additionalDraftContent:b["b"].object,onDraftRestore:b["b"].func,triggerNavigateForward:b["b"].func,triggerNavigateBack:b["b"].func,shouldShowTractorFilesCoachmark:b["b"].bool,setTractorFilesCoachmarkVisibility:b["b"].func,clientTheme:b["b"].oneOf(["light","dark"]),isComposerPage:b["b"].bool,composerDraft:b["b"].object,onTextChange:b["b"].func,onDraftUpdate:b["b"].func,onFocus:b["b"].func,onBlur:b["b"].func,ariaDescribedBy:b["b"].string};var me={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,autocompleteProps:void 0,enableEmojiButton:false,enableFileButton:true,enableSnippetCreation:true,enableMentionButton:false,enableComposerButton:false,enableSendButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,arrowHistory:false,useSendButton:false,isDisabled:false,maxLines:void 0,useLegacyCreate:false,useLegacyDrafts:false,focusOnMount:false,focusOnPaste:false,draft:void 0,draftDelay:1e3,setChannelDraft:v["noop"],clearChannelDraft:v["noop"],editLastMessage:v["noop"],openSnippetDialog:v["noop"],featureOfflineMode:false,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false,wasRecentlyOnline:false,isClientOnline:false,onTextChange:v["noop"],onDraftUpdate:v["noop"],onFocus:v["noop"],onBlur:v["noop"],enqueueToast:v["noop"],openModal:v["noop"],maxLength:void 0,tabIndex:void 0,fileButtonTabIndex:void 0,showFocusOutline:false,additionalDraftContent:void 0,onDraftRestore:v["noop"],triggerNavigateBack:v["noop"],triggerNavigateForward:v["noop"],shouldShowTractorFilesCoachmark:false,setTractorFilesCoachmarkVisibility:v["noop"],ariaDescribedBy:void 0,clientTheme:"light",isComposerPage:false,composerDraft:{}};var he=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["a"])(a,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onUpArrow","openSnippetDialog","renderInput","renderModernAutocomplete"]);a.state={isPlusMenuOpen:false,forcePlusMenuOpen:false};a.getComputedModules=Object(te["a"])(function(e,t,a,r){if(!(a||r))return e;var n=Object(le["a"])({featureWysiwygComposer:r});return s()({},e,{composer:s()({},n,{teamId:t}),slacklink:r&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:r&&{convertHeaders:false,convertHorizontalRule:false}})});return a}u()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges({isMount:true});this.maybeFocusInput()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges({prevProps:t});this.maybeFocusInput(t)}},{key:"componentWillUnmount",value:function e(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onEnter",value:function e(t){var a=t.metaKey,r=t.ctrlKey,n=t.shiftKey;var i=this.props,s=i.sendMessage,o=i.useLegacyDrafts,l=i.featureOfflineMode,c=i.featureSonicInputs,u=i.wasRecentlyOnline,d=i.enableSnippetCreation;var p=this.getInputRef();if(!p)return false;if(p.isEmpty()&&!n)return false;o||this.updateDraftThrottled.cancel();if(l&&!u){var m=ce;this.props.enqueueToast({element:_.a.createElement(ne["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small"},_.a.createElement("span",null,_.a.createElement("strong",null,m.rt("No connection."))," ",m.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))});return false}if(c&&d&&(Object(oe["isMac"])()&&a&&n||!Object(oe["isMac"])()&&r&&n)){this.openSnippetDialog();return false}s();return false}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props,r=a.arrowHistory,n=a.featureOfflineMode,i=a.isClientOnline;if(!Object(re["a"])()&&r&&!t)return;var s=this.getInputRef();if(!s)return;if(!s.isEmpty())return;if(n&&!i)return;this.props.editLastMessage()}},{key:"onLeftWhenEmpty",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onCmdLeftWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty");this.props.triggerNavigateBack({fromKeyboardShortcut:true})}},{key:"onCmdRightWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty");this.props.triggerNavigateForward({fromKeyboardShortcut:true})}},{key:"onTextChange",value:function e(){var t=this.props,e=t.onTextChange,a=t.useLegacyDrafts,r=t.featureWysiwygComposer;var n=this.getInputRef();a||this.updateOrClearDraft({inputRef:n});e(n.value(),r?n.getContents().contents:[])}},{key:"onDraftUpdate",value:function e(){var e=this.props.onDraftUpdate;var t=this.getInputRef().getContents().contents;e({ops:t})}},{key:"onFileMenuOpen",value:function e(){this.setState(function(){return{isPlusMenuOpen:true}});var t=this.props.clogger;var a={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};t.track("PFP_ACTION",a)}},{key:"onFileMenuClose",value:function e(){this.setState(function(){return{isPlusMenuOpen:false,forcePlusMenuOpen:false}})}},{key:"onPasteLimit",value:function e(){this.props.openModal({element:this.renderPasteLimitDialog(),isStackable:true})}},{key:"getInputRef",value:function e(){var t=this.props.forwardedRef;return t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"handlePropChanges",value:function e(t){var a=t.prevProps,r=void 0===a?{}:a,n=t.isMount;var i=this.props,s=i.channelId,o=i.threadTs,l=i.composerDraft,c=i.draft,u=i.draftDelay,d=i.logger,p=i.useLegacyDrafts,m=i.onDraftRestore,h=i.additionalDraftContent;if(p)return;r.draftDelay!==u&&(this.updateDraftThrottled=Object(v["debounce"])(this.updateDraft,u));if(!n&&!p&&r.additionalDraftContent!==h){var f=this.getInputRef();this.updateOrClearDraft({inputRef:f})}if(l.id&&(!r.composerDraft||r.composerDraft.id!==l.id)){this.updateDraftThrottled.flush();var b=this.getInputRef();b.clearHistory();b.value({contents:l.ops})}if(r.channelId!==s||r.threadTs!==o){this.updateDraftThrottled.flush();var g=this.getInputRef();g.clearHistory();if(s)if(c){d.debug("DRAFT","Restoring draft to "+s);c.ops&&g.value({contents:c.ops});c.range&&g.setCursor(c.range.index,c.range.length);m(c)}else{d.debug("DRAFT","No draft, clearing input for "+s);g.clear()}}}},{key:"maybeFocusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.channelId,n=a.threadTs,i=a.focusOnMount,s=a.logger;if(!i)return;var o=i!==t.focusOnMount||r&&!n&&t.channelId!==r||n&&t.threadTs!==n;if(!o)return;var l=this.getInputRef();try{l.focus()}catch(e){s.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(e&&e.message));e.stack&&s.error("MESSAGE-INPUT",e.stack)}}},{key:"openSnippetDialog",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.featureWysiwygComposer;var s=this.getInputRef();this.props.openSnippetDialog({initialText:s?s.displayValue():"",initialContents:i&&s?s.getContents():void 0,initialChannelId:a,threadTs:r,viewContext:n});s.value("");return false}},{key:"updateOrClearDraft",value:function e(t){var a=t.inputRef;var r=this.props,n=r.channelId,i=r.threadTs,s=r.logger,o=r.useLegacyDrafts,l=r.isComposerPage;if(l){this.updateDraftThrottled();return}if(!n||!a)return;if(o)return;var c=a.getContents();if(a.getLength()&&Object(v["trim"])(Object(X["o"])(c.contents,{embedReplacement:"a"})).length){var u=new E.a(c.contents);s.debug("DRAFT","Updating draft in "+n);this.updateDraftThrottled({channelId:n,threadTs:i,delta:u})}else{s.debug("DRAFT","Clearing draft for "+n);this.updateDraftThrottled({channelId:n,threadTs:i})}}},{key:"updateDraft",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.threadTs,n=t.delta;var i=this.props,o=i.additionalDraftContent,l=i.isComposerPage;if(l){this.onDraftUpdate();return}if(n){var c=this.getInputRef();this.props.setChannelDraft(s()({channelId:a,threadTs:r,delta:n,range:c.getSelection()},o))}else this.props.clearChannelDraft({channelId:a,threadTs:r})}},{key:"renderPasteLimitDialog",value:function e(){var t=ue;return _.a.createElement(F["a"],{title:t.t("That\u2019s a bit too long to paste"),cancelText:t.t("Create a snippet"),goButtonText:t.t("OK"),onCancel:this.openSnippetDialog,showCancelButton:true},t.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}},{key:"renderInput",value:function e(t){var a=t.modules,r=t.isOpen,n=t.legacyTextyClassName;var i=this.props,s=i.placeholder,o=i.channelId,l=i.enableEmojiButton,c=i.enableMentionButton,u=i.enableComposerButton,d=i.enableSendButton,p=i.enableBroadcastKeywords,m=i.useLegacyCreate,h=i.onFocus,v=i.onBlur,f=i.forwardedRef,b=i.enableJumbomoji,g=i.isDisabled,y=i.maxLines,k=i.threadTs,O=i.viewContext,C=i.maxLength,E=i.tabIndex,S=i.clientToolBar,w=i.featureWysiwygComposer,I=i.teamId,j=i.focusOnPaste,T=i.ariaDescribedBy,A=i.useSendButton;var N=de(s);var M=this.getComputedModules(a,I,S,w);return _.a.createElement(J["default"],{legacyTextyClassName:n,channelId:o,className:"p-message_input_field",ariaLabel:N,ariaDescribedBy:T,focusOnPaste:j,placeholder:s,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,onCmdLeftWhenEmpty:Object(re["a"])()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(re["a"])()?this.onCmdRightWhenEmpty:null,"data-qa":"message_input","data-message-input":true,"data-channel-id":o,"data-thread-ts":k,"data-thread-key":k?Object(W["getThreadKey"])(o,k):null,"data-view-context":O,ref:f,useLegacyCreate:m,maxLines:y,modules:M,isAutocompleteOpen:r,isDisabled:g,enableEmojiButton:l,enableMentionButton:c,enableComposerButton:u,enableSendButton:d,enableBroadcastKeywords:p,enableJumbomoji:b,onTextChange:this.onTextChange,onFocus:h,onBlur:v,onPasteLimit:this.onPasteLimit,maxLength:C,tabIndex:E,useFocusRing:false,useSendButton:A})}},{key:"renderLegacyAutocomplete",value:function e(){var t=this.props,a=t.legacyChannel,r=t.threadTs,n=t.forwardedRef;var i={tabcomplete:{searchOptions:{model_ob:a,in_thread:!!r},positionMenu:function e(t){var a=n.current.getWrappedInstance?n.current.getWrappedInstance():n.current;t.style.width=a.container.offsetWidth+"px";Object(ae["a"])(t,a.container)}}};return this.renderInput({modules:i,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function e(){var t=this.props.autocompleteProps;return _.a.createElement(Z["a"],s()({completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton},t))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.useLegacyCreate,i=t.channelId,s=t.threadTs,o=t.viewContext,l=t.showFocusOutline,c=t.fileButtonTabIndex,u=t.shouldShowTractorFilesCoachmark,d=t.setTractorFilesCoachmarkVisibility,p=t.clientTheme,m=t.enableFileButton;var h=k()(a,"p-message_input",n()({"p-message_input--focus-visible":l},"p-message_input--"+p,"light"!==p));var v=m&&_.a.createElement(xe,{channelId:i,threadTs:s,viewContext:o,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,fileButtonTabIndex:c,useLegacyCreate:r});var f=_.a.createElement("div",{className:h},r?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),u?_.a.createElement(ie["b"],{orientation:"right",coachmarkElement:_.a.createElement(Y,{setTractorFilesCoachmarkVisibility:d}),style:{position:"absolute",bottom:4,height:34,width:34}},v):v);return f}}]);return t}(g["Component"]);he.displayName="MessageInput";he.defaultProps=me;function ve(e,t){var a=t.channelId,r=t.threadTs;return{legacyChannel:Object(re["a"])()?null:Object(w["e"])(e,a),enableJumbomoji:Object(N["a"])(e),arrowHistory:Object(M["h"])(e,"arrow_history"),draft:Object(B["b"])(e,{channelId:a,threadTs:r}),featureOfflineMode:Object(I["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(I["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(A["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:Object(ee["a"])(e),wasRecentlyOnline:Object(T["h"])(e),isClientOnline:Object(T["c"])(e),logger:Object($["a"])({state:e}),clogger:Object(se["a"])({state:e}),teamId:Object(S["b"])(e),shouldShowTractorFilesCoachmark:Object(j["b"])(e),clientTheme:Object(P["getClientTheme"])(e)}}var fe={setChannelDraft:function e(){return L["c"].apply(void 0,arguments)},clearChannelDraft:function e(){return L["b"].apply(void 0,arguments)},enqueueToast:function e(){return x["enqueueToast"].apply(void 0,arguments)},openModal:function e(){return D["openModal"].apply(void 0,arguments)},openSnippetDialog:function e(){return U["a"].apply(void 0,arguments)},triggerNavigateBack:function e(t){return Object(q["a"])(t)},triggerNavigateForward:function e(t){return Object(q["b"])(t)},setTractorFilesCoachmarkVisibility:function e(){return R["f"].apply(void 0,arguments)}};var be=Object(O["connect"])(ve,fe)(he);var ge=_.a.forwardRef(function(e,t){return _.a.createElement(be,s()({},e,{forwardedRef:t||_.a.createRef()}))});var _e=a(27);var ye=a(23);var ke=a(69);var Oe=a(2048);var Ce=Oe["a"];var Ee=a(1682);var Se=a(1210);var we=a(895);var Ie=a(1426);var je=a(54);var Te=new G["b"]("message_input_plus_button");var Ae={channelId:b["b"].string,threadTs:b["b"].string,viewContext:b["b"].string,featureOfflineMode:b["b"].bool,isOpen:b["b"].bool,onFileMenuOpen:b["b"].func,onFileMenuClose:b["b"].func,forceOpen:b["b"].bool,fileButtonTabIndex:b["b"].number,useLegacyCreate:b["b"].bool,logger:b["b"].object.isRequired};var Ne={channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:false,isOpen:false,onFileMenuOpen:v["noop"],onFileMenuClose:v["noop"],forceOpen:false,fileButtonTabIndex:void 0,useLegacyCreate:false};var Me="MSG_INPUT_FILE_BTN";var Pe=function(e){h()(t,e);function t(){l()(this,t);var e=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderMenu=e.renderMenu.bind(e);e.hiddenFileInputRef=_.a.createRef();return e}u()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.logger,s=a.viewContext;if(!r){i.error(Me,"Missing channelId in "+s);return null}return _.a.createElement(Ie["a"],{subtype:Me},_.a.createElement(Ce,{menuProps:t,channelId:r,threadTs:n,viewContext:s,hiddenFileInputRef:this.hiddenFileInputRef}))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.featureOfflineMode,s=t.isOpen,o=t.onFileMenuOpen,l=t.onFileMenuClose,c=t.forceOpen,u=t.fileButtonTabIndex,d=t.useLegacyCreate;var p=k()("p-message_input_file_button",{"p-message_input_file_button--active":s});var m=_.a.createElement(_e["c"],{className:p,"aria-label":Te.t("File menu"),tabIndex:u||null,"data-qa":"msg_input_file_btn"},_.a.createElement(ye["b"],{className:"p-message_input_file_icon",type:d?"plus-thick":"paperclip"}));var h=_.a.createElement(ke["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l,forceOpen:c},m);if(i){var v=_.a.createElement(we["a"],{tooltipLabel:Te.t("File menu")});h=_.a.createElement(g["Fragment"],null,_.a.createElement(Se["b"],null,h),_.a.createElement(Se["a"],null,_.a.createElement(ke["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l},_.a.createElement(je["c"],{tip:v},m))))}return _.a.createElement(g["Fragment"],null,h,_.a.createElement(Ee["a"],{ref:this.hiddenFileInputRef,channelId:a,threadTs:r,viewContext:n}))}}]);return t}(g["Component"]);Pe.displayName="MessageInputFileButton";Pe.defaultProps=Ne;function Re(e){return{featureOfflineMode:Object(I["isFeatureEnabled"])(e,"feature_offline_mode"),logger:Object($["a"])({state:e})}}var xe=Object(O["connect"])(Re)(Pe);var De=new G["b"]("msg_input");var Fe={sendMessage:b["b"].func.isRequired,isDisabled:b["b"].bool,isOffline:b["b"].bool,className:b["b"].string,tabIndex:b["b"].number,featureOfflineMode:b["b"].bool,buttonSize:b["b"].string,showTooltip:b["b"].bool};var Le={isDisabled:false,isOffline:false,className:void 0,tabIndex:-1,featureOfflineMode:false,buttonSize:void 0,showTooltip:false};var Be=function e(t){var a=t.isDisabled,r=t.isOffline,n=t.className,i=t.sendMessage,s=t.featureOfflineMode,o=t.tabIndex,l=t.buttonSize,c=t.showTooltip;var u=De.t("Send");var d=void 0;c&&(d=Object(oe["isMac"])()?De.t("\u2318Enter"):De.t("Ctrl+Enter"));var p="top";var m=_.a.createElement(_e["d"],{className:n,pillarClassName:"p-message_input__send",disabled:a||r,tabIndex:o,onClick:i,size:l},u);if(s&&r){m=_.a.createElement("div",{style:{marginLeft:"auto"}},m);p="top-right";d=_.a.createElement(we["a"],{tooltipLabel:u})}if(a&&!s)return m;if(!d)return m;return _.a.createElement(je["c"],{tip:d,position:p},m)};Be.displayName="MessageInputSendButton";Be.defaultProps=Le;var Ue=function e(t){return{isOffline:!Object(T["c"])(t),featureOfflineMode:Object(I["isFeatureEnabled"])(t,"feature_offline_mode"),showTooltip:Object(M["h"])(t,"msg_input_send_btn")}};var qe=Object(O["connect"])(Ue)(Be);a.d(t,"a",function(){return xe});a.d(t,"b",function(){return qe});var We=t["c"]=ge},1783:function(e,t){e.exports={}},1784:function(e,t,a){var r=a(553),n=a(592);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&r(e)==i}e.exports=s},1785:function(e,t,a){var r=a(3211),n=a(1023),i=a(3212),s=a(3213),o=a(2431),l=a(553),c=a(1055);var u="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",h="[object WeakMap]";var v="[object DataView]";var f=c(r),b=c(n),g=c(i),_=c(s),y=c(o);var k=l;(r&&k(new r(new ArrayBuffer(1)))!=v||n&&k(new n)!=u||i&&k(i.resolve())!=p||s&&k(new s)!=m||o&&k(new o)!=h)&&(k=function(e){var t=l(e),a=t==d?e.constructor:void 0,r=a?c(a):"";if(r)switch(r){case f:return v;case b:return u;case g:return p;case _:return m;case y:return h}return t});e.exports=k},1786:function(e,t,a){var r=a(1784);var n=1/0;function i(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},1787:function(e,t,a){},1814:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(6);var f=a(9);var b=a(819);var g=a(95);var _=a(23);var y=a(44);var k=a(86);var O=a(1576);var C=a(2310);var E=a.n(C);var S=new v["b"]("enterprise_dashboard");var w={orgName:m["b"].string,featureEKMPhase2:m["b"].bool,getBackfillInfo:m["b"].func.isRequired};var I={orgName:"",featureEKMPhase2:false};var j=6e4;var T={MESSAGES:0,FILES:1,SEARCH:2};var A={ENROLL:"enroll",UNENROLL:"unenroll",REKEY:"rekey",MIGRATION:"migration"};var N=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={ekmBackfillInfo:{}};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=function e(){t.props.getBackfillInfo().then(function(e){t.setState(function(){return{ekmBackfillInfo:e}})})};a();this.updateInterval=setInterval(a,j)}},{key:"componentWillUnmount",value:function e(){this.updateInterval&&clearInterval(this.updateInterval)}},{key:"getStatusLine1",value:function e(t,a){if(!this.props.featureEKMPhase2)return null;var r=this.state.ekmBackfillInfo,n=r.backfill_in_progress,i=r.backfill_reason,s=r.ekm_access_denied;var o=void 0;var l=void 0;if(100===t)if(n&&i===A.UNENROLL){o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_foreground_max margin_right_25",size:"inherit"});l=[S.t("Unenrolled"),S.t("Unenrolled"),S.t("Unenrolled")][a]}else{o=p.a.createElement(_["b"],{type:"circle-checkbox-checked",className:"sk_lilypad_green margin_right_25",size:"inherit"});l=[S.t("Encrypted"),S.t("Encrypted"),S.t("Encrypted")][a]}else if(n&&!s){o=p.a.createElement(k["a"],{inline:true,className:"p_ekm_status__spinner"});var c=void 0;switch(i){case A.MIGRATION:c=[S.t("Encrypting messages from migrating workspace..."),S.t("Encrypting files from migrating workspace..."),S.t("Encrypting search history from migrating workspace...")];break;case A.REKEY:c=[S.t("Re-encrypting existing messages..."),S.t("Re-encrypting existing files..."),S.t("Re-encrypting existing search history...")];break;case A.UNENROLL:c=[S.t("In progress"),S.t("In progress"),S.t("In progress")];break;default:c=[S.t("Encrypting existing messages..."),S.t("Encrypting existing files..."),S.t("Encrypting existing search history...")]}l=c[a]}else{o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_foreground_max margin_right_25",size:"inherit"});l=0===t?S.t("Not started"):S.t("Paused")}return p.a.createElement("div",{className:"bold"},o,l)}},{key:"getStatusLine2",value:function e(t,a){var r=this.props.featureEKMPhase2;if(!r)return null;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason;var o=void 0;o=100!==t||i&&s===A.UNENROLL?S.t("{status}% complete",{status:t}):[S.t("Current and future messages"),S.t("Current and future files"),S.t("Current and future search history")][a];return p.a.createElement("div",{className:"sk_foreground_max"},o)}},{key:"getStatus",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var a=arguments[1];return p.a.createElement("div",{className:"p-ekm_status__status_description"},this.getStatusLine1(t,a),this.getStatusLine2(t,a))}},{key:"renderEncryptionStatusTable",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var a=this.state.ekmBackfillInfo,r=a.messages,n=a.files,i=a.search;return p.a.createElement("div",{className:"p-ekm_status__progress_container"},p.a.createElement("div",{className:"bold"},S.t("Messages")),this.getStatus(r,T.MESSAGES),p.a.createElement("div",{className:"bold"},S.t("Files")),this.getStatus(n,T.FILES),p.a.createElement("div",{className:"bold"},S.t("Search history")),this.getStatus(i,T.SEARCH))}},{key:"renderStatusMessage",value:function e(){var t=this.props,a=t.featureEKMPhase2,r=t.orgName;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason,o=n.ekm_access_denied;if(!a||!(i||o))return null;var l="info";var c="info-circle";var u=void 0;var d=void 0;if(o){l="error";c="warning";u=S.rt("Encryption of <b>{orgName}</b> has been paused because Slack couldn\u2019t access your key family. To continue encrypting data, please review your key policy in AWS and ensure Slack has access to your key family.",{orgName:r})}else if(i)switch(s){case A.MIGRATION:u=S.t("A workspace has been migrated into your organization, so all data in that workspace will be encrypted.");d=p.a.createElement("div",null,p.a.createElement(y["a"],{href:"/manage/organization/migrations"},S.t("View scheduled migrations")));break;case A.REKEY:l="warning";c="warning";u=S.rt("<b>{orgName}</b>\u2019s key family was recently rotated, so all existing data is being encrypted with the new key. Ensure Slack has access to your previous keys until this is done.",{orgName:r});break;case A.UNENROLL:l="warning";c="warning";u=S.rt("Unenrollment from EKM for <b>{orgName}</b> is in progress. If your organization has a large amount of data, the process may take some time to complete. Ensure Slack has access to your keys until then.",{orgName:r});break;default:u=S.rt("EKM was recently enabled for <b>{orgName}</b> and all existing data is now being encrypted. If your organization has a large amount of data, the process may take some time to complete.",{orgName:r})}return p.a.createElement(g["a"],{type:"boxed",level:l,icon:c,align:"left",className:"margin_bottom_100"},u,d)}},{key:"render",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var a=this.state.ekmBackfillInfo.last_updated;return p.a.createElement("div",null,p.a.createElement("h2",{className:"p-ekm_status__subtitle"},"Encryption status"),p.a.createElement("div",{className:"sk_foreground_max margin_bottom_100"},p.a.createElement("span",{className:"bold"},S.t("Last updated: ")),p.a.createElement("span",null,p.a.createElement(O["a"],{timestamp:a}))),this.renderStatusMessage(),this.renderEncryptionStatusTable())}}]);return t}(d["PureComponent"]);N.displayName="EKMStatus";N.defaultProps=I;var M=function e(t){return{featureEKMPhase2:Object(f["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var P=function e(t,a){var r=a.isMissionControl,n=a.teamId;var i=r?b["d"]:b["b"];return{getBackfillInfo:function e(){return t(i({reason:"EKMStatus_getBackfillInfo",teamId:n}))}}};var R=Object(h["connect"])(M,P)(N);R.propTypes={isMissionControl:m["b"].bool,teamId:m["b"].string};R.defaultProps={isMissionControl:false,teamId:null};t["a"]=R},1816:function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(14);var s=false;var o=function e(t){if(!t)return;var a="";var r=t.srcElement||t.target;var n=i["b"]&&Object(i["b"])();if(r&&r.nodeName)if("SCRIPT"===r.nodeName){var s=r.src;var o=t.type||"error";a="["+o+"] from script at "+s+" (failed to load?)"}else if("IMG"===r.nodeName){var c=r.src||r.currentSrc||"unknown";n.warn("<img> fired error with url = "+c);return}t.error&&t.error.stack&&(a+=" "+t.error.stack);if(t.filename){var u=t.filename;var d=t.lineno;var p=t.colno;a+=" from "+u;d&&(a+=" @ line "+d+", col "+p)}var m=void 0;m=t.error&&t.error.stack?a:(t.message||"")+" "+a;m&&m.replace&&(m=m.replace(/\s+/g," ").trim());if(!m||!m.length)if(r){var h=r.nodeName||"unknown";m="error event from node of "+h+", no message provided?"}else m="error event fired, no relevant message or node found";m="\ud83d\udc1e "+m;var v="js_runtime_error";l({error:t.error||t,msg:m,subtype:v})};function l(e){var t=e.error,a=e.msg,r=e.subtype;var n={subtype:r};Object(i["b"])().error(t,a,n)}var c=function e(){if(s)return;var t=true;var a=Object(r["throttle"])(o,1e4);window.addEventListener("error",a,t);s=true};t["a"]=c;var u={globalErrorHandler:o};Object.defineProperty(u,"logError",{get:function e(){return l},set:function e(t){l=t}});Object.defineProperty(u,"hasRegisteredGlobalErrorHandler",{get:function e(){return s},set:function e(t){s=t}})},1817:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(31);var f=a(1);var b=a.n(f);var g=a(0);var _=a(13);var y=a.n(_);var k=a(12);var O=a(559);var C=a(1068);var E=a(9);var S=a(62);var w=a(269);var I=a(433);var j=a(1301);var T=a(6);var A=a(284);var N=a(42);var M=a(118);var P=a(191);var R=a(651);var x=a(913);var D=a(763);var F=a(1066);var L=a(1196);var B=a(1299);var U=a(102);var q=a(1578);var W=a(919);var H=a(1577);var G=a(1168);var V=a(1070);var K=a(4795);var z=a(155);var Q=a(23);var Y=a(54);var J=a(116);var X=a(44);var Z=a(2339);var $=a.n(Z);var ee=new T["b"]("search");var te="IMPROVED_SEARCH";var ae={iid:g["b"].string.isRequired,ts:g["b"].string.isRequired,logger:g["b"].object.isRequired,hasText:g["b"].bool.isRequired,permalink:g["b"].string.isRequired,user:g["b"].string.isRequired,username:g["b"].string,text:g["b"].string.isRequired,botId:g["b"].string,teamDomain:g["b"].string,permalinkToMessageThread:g["b"].string.isRequired,isCrossWorkspace:g["b"].bool.isRequired,botProfile:g["b"].shape({app_id:g["b"].string.isRequired,deleted:g["b"].bool,icons:g["b"].obj,id:g["b"].string,name:g["b"].string,updated:g["b"].number}),channel:g["b"].shape({id:g["b"].string.isRequired,name:g["b"].string.isRequired}).isRequired,channelName:g["b"].string.isRequired,extracts:g["b"].arrayOf(g["b"].shape({text:g["b"].string,truncated_head:g["b"].bool,truncated_tail:g["b"].bool})),files:g["b"].arrayOf(S["a"].File()),subtype:g["b"].string,theme:g["b"].string,hasAdHocSender:g["b"].bool.isRequired,expanded:g["b"].bool,onClick:g["b"].func,onFileClick:g["b"].func,onRepliesClick:g["b"].func,onExpand:g["b"].func.isRequired,canBeTruncated:g["b"].bool.isRequired,attachments:g["b"].array,reactions:g["b"].array,onExpandHoverStart:g["b"].func,onExpandHoverEnd:g["b"].func,reply_count:g["b"].number,onLinkClick:g["b"].func,icons:g["b"].shape({image_36:g["b"].string,image_48:g["b"].string,image_64:g["b"].string,image_72:g["b"].string,emoji:g["b"].string}),blocks:S["a"].BlockKitBlocks,featureBlockKitRefactor:g["b"].bool,clogMessageClick:g["b"].func,clogFileClick:g["b"].func};var re={teamDomain:"",username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:h.a.noop,onFileClick:h.a.noop,onRepliesClick:h.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:h.a.noop,onExpandHoverEnd:h.a.noop,reply_count:0,onLinkClick:h.a.noop,icons:null,blocks:null,featureBlockKitRefactor:false,clogMessageClick:h.a.noop,clogFileClick:h.a.noop};var ne=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={hasKeyboardFocus:false};Object(v["a"])(a,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onTimestampClick"]);a.dragging=false;a.dragStartX=null;a.dragStartY=null;return a}l()(t,[{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var a=false;if(this.dragging){var r=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);a=r>16;this.dragging=false}a||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onFileClick",value:function e(t,a){var r=a.file;t.preventDefault();this.props.onFileClick(t,{file:r,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.props,r=a.channel,n=a.ts,i=a.botId,s=a.user,o=a.teamDomain,l=a.isCrossWorkspace;var c=this.props.permalink;c||(l?this.props.logger.error(te,"Missing permalink for cross workspace message result. channel: "+r+" ts: "+n):c=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:o,channelId:r.id,ts:n}));c&&Object(A["writeText"])(c);this.props.clogMessageClick({msg:{channel:r.id,bot_id:i,user:s,ts:n},payload:{subtype:"copy_link"}})}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onLinkClick",value:function e(t){var a={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?a.type="channel":t.target.dataset.messageSender?a.type="sender":("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(a.type="link");a.type&&this.props.onLinkClick(a)}},{key:"onTimestampClick",value:function e(t){t.preventDefault()}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function e(t){var a={leading:"expand-head",trailing:"expand-tail"}[t];var r=ee.t("Show more");return b.a.createElement(Y["c"],{tip:r},b.a.createElement(J["a"],{"aria-label":r,"data-qa":a,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},b.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function e(){return b.a.createElement(J["a"],{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},b.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",ee.t("Show more")))}},{key:"renderText",value:function e(){var t=this;var a=this.props,r=a.text,n=a.blocks,i=a.extracts,s=a.expanded,o=a.canBeTruncated;if(!(r.length||i.length)&&!n)return null;if(s||!o)return b.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},b.a.createElement(M["a"],{text:r}));if(i.length)return b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(f["Fragment"],null,i.map(function(e,a){var r=0===a&&e.truncated_head;var n=e.truncated_tail;var s=a===i.length-1;return b.a.createElement(f["Fragment"],{key:a},r?t.renderEllipsisButton("leading"):null,b.a.createElement(M["a"],{text:e.text}),!n||o&&s?null:t.renderEllipsisButton("trailing"),o&&s?t.renderExpandButton():null)})));return b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(M["a"],{text:r}))}},{key:"renderBlocks",value:function e(){var t=this.props,a=t.ts,r=t.featureBlockKitRefactor,n=t.blocks,i=t.channel,s=t.botId,o=t.user;return r?b.a.createElement(K["a"],{msg:{channel:i.id,bot_id:s,user:o,ts:a,blocks:n},blocksContainerContext:z["a"].search}):b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(V["a"],{blocks:n,containerId:a,blocksContainerContext:z["a"].search}))}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.user,r=t.hasAdHocSender,i=t.botId,s=t.botProfile,o=t.icons;var l={};i&&(l=n()({},l,{botId:i}));var c=o||s&&s.icons;if(c){var u=c.image_36||c.image_48;var d=c.image_64||c.image_72;var p=c.emoji;u&&(l=n()({},l,{imageUrl:u}));d&&(l=n()({},l,{imageUrl2x:d}));p&&(l=n()({},l,{emoji:p}))}a&&(l=n()({},l,{userId:a}));return b.a.createElement(P["b"],n()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:r,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1"},l))}},{key:"renderTimestamp",value:function e(){var t=this.props,a=t.ts,r=t.permalink;return b.a.createElement(x["b"],{onClick:this.onTimestampClick,timestamp:a,relative:false,full:false,link:r})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return b.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return b.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.user,r=t.botId,n=t.botProfile,i=t.username,s=t.theme,o=t.channelName;return b.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},b.a.createElement(W["a"],{userId:a,botId:r,botProfile:n,username:i,channelName:o,isInteractive:true})," ","light"===s&&this.renderTimestamp())}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,r=a.attachments,n=a.expanded,i=a.canBeTruncated;if(!r.length)return null;if(n||!i)return h.a.map(r,function(e,a){return t.renderFullAttachment(e,a)});var s=h.a.map(r,function(e,a){var r=Object(w["b"])(e);if(r.blocks)return t.renderFullAttachment(r,a);return t.renderTruncatedLegacyAttachment(r,a)});return b.a.createElement("div",{className:"c-search_message__attachments"},s)}},{key:"renderFullAttachment",value:function e(t,a){var r=this.props,i=r.ts,s=r.channel,o=r.hasText,l=r.blocks;return b.a.createElement(D["a"],n()({key:t.id||a+1},Object(w["b"])(t),{isOnlyMessageContent:!!(o||l),messageTs:i,activeChannelId:s.id,showDelete:false,blocksContainerContext:z["a"].search}))}},{key:"renderTruncatedLegacyAttachment",value:function e(t,a){var r=this;var n=this.props.ts;var i=null;if(Object(I["e"])(t)){var s=t.serviceIcon||t.authorIcon;var o=t.serviceName||t.authorName;var l=o===t.authorName?t.authorSubname:t.authorName;i=b.a.createElement("div",null,b.a.createElement(L["a"],{icon:s,name:o,link:t.serviceUrl||t.authorLink,subname:l,subnameLink:t.authorLink}))}var c=t.extracts;var u=null;c&&c.title&&(u=b.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},h.a.map(c.title,function(e,t){var a=0===t&&e.truncated_head;var r=e.truncated_tail;return b.a.createElement(f["Fragment"],{key:t}," ",a?"\u2026":null,ie(e.text),r?"\u2026":null)})));var d=null;c&&c.pretext&&(d=h.a.map(c.pretext,function(e,t){var a=0===t&&e.truncated_head;var n=e.truncated_tail;return b.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",b.a.createElement(f["Fragment"],null,a?r.renderEllipsisButton("leading"):null,b.a.createElement(M["a"],{text:e.text}),n?r.renderEllipsisButton("trailing"):null))}));var p=null;c&&c.text&&(p=h.a.map(c.text,function(e,t){var a=0===t&&e.truncated_head;var n=e.truncated_tail;return b.a.createElement(f["Fragment"],{key:t}," ",a?r.renderEllipsisButton("leading"):null,b.a.createElement(M["a"],{text:e.text}),n?r.renderEllipsisButton("trailing"):null)}));var m=null;Object(I["h"])(t)&&(m=b.a.createElement("div",null,b.a.createElement(B["a"],{botId:t.botId,icon:t.footerIcon,isAppUnfurl:t.isAppUnfurl,text:t.footer,ts:n})));if(!i&&!u&&!d&&!p&&!m)return null;return b.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:this.props.iid+"-attachment-"+a},b.a.createElement(F["a"],{color:t.color}),b.a.createElement("div",{className:"c-search_message__attachment_body"},i,u,d,p,m))}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props,a=t.reactions,r=t.isCrossWorkspace,n=t.permalinkToMessageThread;var i=this.props.reply_count;if(!a.length&&!i)return null;var s=h.a.take(h.a.sortBy(a,function(e){return-e.count}),2);var o=h.a.sumBy(a,"count");var l=null;var c=null;o>0&&(l=b.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},ee.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:o})));if(i>0){var u=ee.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:i});c=r?b.a.createElement(X["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",href:n},b.a.createElement(Q["a"],{type:"comment-alt"}),u):b.a.createElement(J["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},b.a.createElement(Q["a"],{type:"comment-alt"}),u)}return b.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},h.a.map(s,function(e){return b.a.createElement(U["b"],{text:":"+e.name+":",key:e.name,emojiSize:U["a"].SMALL})}),l,c)}},{key:"renderFiles",value:function e(){var t=this;var a=this.props.files;if(!a||!a.length)return null;return a.map(function(e){return e&&b.a.createElement(q["a"],{key:e.id,file:e,onClick:t.onFileClick,clogLinkClick:function a(r){t.props.clogFileClick({file:e,payload:r})}})})}},{key:"renderActions",value:function e(){var t=y()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return b.a.createElement(H["a"],{className:t,ariaLabel:ee.t("Message actions")},b.a.createElement(G["a"],{"data-qa":"copy-link",iconType:"link",ariaHasPopup:false,label:ee.t("Copy link"),onClick:this.onCopyLink}))}},{key:"render",value:function e(){var t=this.props,a=t.theme,r=t.canBeTruncated,n=t.expanded,i=t.blocks;var s=y()("c-search_message","c-search_message--"+a,{"c-search_message--collapsed":!n&&r,"c-search_message--focus":this.state.hasKeyboardFocus});return b.a.createElement(R["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},b.a.createElement("div",{className:s,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),b.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),i?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions())))}}]);return t}(f["PureComponent"]);ne.displayName="SearchResult";function ie(e){return Object(j["a"])(e,function(e,t){return b.a.createElement("span",{className:"c-search__match",key:t},e)})}ne.defaultProps=re;var se=function e(t){return{featureBlockKitRefactor:Object(E["isFeatureEnabled"])(t,"feature_block_kit_refactor")}};var oe={clogMessageClick:function e(){return O["a"].apply(void 0,arguments)},clogFileClick:function e(){return C["a"].apply(void 0,arguments)}};t["a"]=Object(k["connect"])(se,oe)(ne)},1821:function(e,t,a){"use strict";var r=a(12);var n=a(159);var i=a(1560);var s=a(3);var o=a.n(s);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(1);var b=a.n(f);var g=a(13);var _=a.n(g);var y=a(0);var k=a(2);var O=a(31);var C=a(6);var E=a(393);var S=a(145);var w=a(27);var I=a(119);var j=a(44);var T=a(225);var A=a(53);var N=a(1574);var M=new C["b"]("pricing_calculator");var P={planIsYearly:y["b"].bool.isRequired,planCostPerTerm:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,teamName:y["b"].string,numInactiveMembers:y["b"].number.isRequired,isZeroActiveMembers:y["b"].bool.isRequired,totalMembers:y["b"].number.isRequired,paidSeats:y["b"].number.isRequired,totalCost:y["b"].number.isRequired,totalCostWithTax:y["b"].number.isRequired,totalRecurringTax:y["b"].number.isRequired,tax:y["b"].shape({value:y["b"].number,type:y["b"].string}),clogger:y["b"].object,clogMetadata:y["b"].object};var R={tax:null,teamName:"",clogger:{sendDataAndEmptyQueue:k["noop"],track:k["noop"]},clogMetadata:{params:{},paramsString:""}};var x=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["onFairBillingLinkClick","onLearnMoreLinkClick"]);return a}d()(t,[{key:"onFairBillingLinkClick",value:function e(){var t=this.props,a=t.clogger,r=t.clogMetadata;a.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_fair_billing_policy",ui_component:"pricing_calculator"}}},r.params));a.sendDataAndEmptyQueue()}},{key:"onLearnMoreLinkClick",value:function e(){var t=this.props,a=t.clogger,r=t.clogMetadata;a.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_billing_help",ui_component:"pricing_calculator"}}},r.params));a.sendDataAndEmptyQueue()}},{key:"getTaxFormattedData",value:function e(t,a,r){var n=void 0;var i=void 0;if(t){switch(t.type){case I["g"].vat:n=M.t("Estimated VAT");break;case I["g"].jct:n=M.t("Estimated JCT");break;case I["g"].sales_tax:n=M.t("Estimated sales tax");break;default:n=M.t("Estimated tax");break}i=Object(E["a"])(a,r)}else{n=M.t("Tax");i=M.t("Applied at checkout")}return{taxKey:n,taxValue:i}}},{key:"renderRow",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=_()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+r.type);return b.a.createElement("div",{className:n},b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key","data-qa":"pricing_calculator_table_item_"+r.type+"_key"},t),b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value","data-qa":"pricing_calculator_table_item_"+r.type+"_value"},a))}},{key:"renderSubtotalRow",value:function e(){var t=this;var a=this.props,r=a.planIsYearly,n=a.planCostPerTerm,i=a.paidSeats,s=a.numInactiveMembers,o=a.isZeroActiveMembers,l=a.totalMembers,c=a.totalCost,u=a.teamName,d=a.planCurrency;var p=void 0;o?p=M.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(j["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},a)}):s&&(p=M.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:u,totalMembers:l,numInactiveMembers:s,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var a=e.text,r=e.key;return b.a.createElement(j["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},a)}));var m=b.a.createElement("div",null,b.a.createElement(N["a"],{planIsYearly:r,billedMembers:i,numInactiveMembers:s,formattedPlanCost:Object(E["a"])(n,d)}),p&&b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},p));var h=Object(E["a"])(c,d);return this.renderRow(m,h,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,a=t.tax,r=t.totalRecurringTax,n=t.planCurrency;var i=this.getTaxFormattedData(a,r,n),s=i.taxKey,o=i.taxValue;return this.renderRow(s,o,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this;var a=this.props,r=a.planCurrency,n=a.totalCostWithTax,i=a.planIsYearly;var s=void 0;var o=void 0;if(i){s=M.t("Yearly payment");o=M.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(j["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},a)})}else{s=M.t("Monthly payment");o=M.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(j["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},a)})}var l=b.a.createElement("div",null,s,b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},o));var c=""+Object(E["a"])(n,r);return this.renderRow(l,c,{type:"total"})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(f["PureComponent"]);x.displayName="PricingCalculatorTable";x.defaultProps=R;var D=x;var F=a(2299);var L=new C["b"]("pricing_calculator");var B={isUserRestricted:y["b"].bool,title:y["b"].string,showHeader:y["b"].bool,headerBackgroundColor:y["b"].string,yearlyPlanCostPerTerm:y["b"].number,monthlyPlanCostPerTerm:y["b"].number,planLevel:y["b"].string.isRequired,planIsYearly:y["b"].bool,numMonthsPerPlan:y["b"].number,planCostPerTerm:y["b"].number,planCurrency:y["b"].string,numInactiveMembers:y["b"].number,isZeroActiveMembers:y["b"].bool,totalMembers:y["b"].number,paidSeats:y["b"].number,totalCost:y["b"].number,totalCostWithTax:y["b"].number,totalRecurringTax:y["b"].number,teamName:y["b"].string,tax:y["b"].object,teamCredits:y["b"].number,showSubmitButton:y["b"].bool,submitButtonText:y["b"].string,onSubmit:y["b"].func,display:y["b"].oneOf(["boxed","inline"]),loadPlansAndCostData:y["b"].func,switchTerms:y["b"].func,updatePlanLevel:y["b"].func,isPlansAndCostDataLoaded:y["b"].bool,canViewEnterpriseSelect:y["b"].bool,clogger:y["b"].object,clogMetadata:y["b"].object};var U={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_sky_blue",yearlyPlanCostPerTerm:0,monthlyPlanCostPerTerm:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerTerm:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,totalRecurringTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:k["noop"],display:"inline",loadPlansAndCostData:k["noop"],switchTerms:k["noop"],updatePlanLevel:k["noop"],isPlansAndCostDataLoaded:false,canViewEnterpriseSelect:false,clogger:{sendDataAndEmptyQueue:k["noop"],track:k["noop"]},clogMetadata:{params:{},paramsString:""}};var q=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={submitButtonIsPending:false};Object(O["a"])(a,["handleSubmit","switchtoYearly","switchToMonthly"]);return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isPlansAndCostDataLoaded,r=t.updatePlanLevel,n=t.loadPlansAndCostData,i=t.planLevel,s=t.canViewEnterpriseSelect,o=t.switchTerms;if(!a){r(i);i===I["d"].compliance.name&&s&&o(I["e"].yearly);n({isFinalReview:false})}}},{key:"switchtoYearly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"yearly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"monthly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("monthly")}},{key:"handleSubmit",value:function e(){var t=this;this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"btn_calculator_check_out",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params));this.props.clogger.sendDataAndEmptyQueue();this.setState(function(e){return o()({},e,{submitButtonIsPending:true})},function(){try{t.props.onSubmit()}catch(e){t.setState(function(e){return o()({},e,{submitButtonIsPending:false})})}})}},{key:"renderHeader",value:function e(){var t=this.props,a=t.title,r=t.headerBackgroundColor;if(!a)return null;var n=_()("p-pricing_calculator__header","p-pricing_calculator__header--"+r);return b.a.createElement("h3",{className:n,"data-qa":"pricing_calculator_header"},a)}},{key:"renderTermsToggle",value:function e(){var t=this.props,a=t.yearlyPlanCostPerTerm,r=t.monthlyPlanCostPerTerm,n=t.planIsYearly,i=t.planCurrency;var s=Object(E["a"])(a,i);var o=Object(E["a"])(r,i);var l=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":n});var c=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!n});return b.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container","data-qa":"pricing_calculator_terms_toggle_container"},b.a.createElement(w["c"],{onClick:this.switchtoYearly,className:l,"data-qa":"pricing_calculator_terms_toggle_yearly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,L.t("Pay each year")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},L.t("{yearlyPlanCostPerTermFormatted} per member, per year",{yearlyPlanCostPerTermFormatted:s}))),b.a.createElement(w["c"],{onClick:this.switchToMonthly,className:c,"data-qa":"pricing_calculator_terms_toggle_monthly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,L.t("Pay each month")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},L.t("{monthlyPlanCostPerTermFormatted} per member, per month",{monthlyPlanCostPerTermFormatted:o}))))}},{key:"renderSwitchCurrencyInfo",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__currency_info"},b.a.createElement("span",{className:"p-pricing_calculator__currency_info--title"},L.t("Looking for a different currency?")),b.a.createElement("span",{className:"p-pricing_calculator__currency_info--description"},L.t("Depending on your company\u2019s location, you may be able to select GBP, EUR, or JPY on the next page.")))}},{key:"renderCreditToast",value:function e(){var t=this.props,a=t.teamName,r=t.teamCredits,n=t.planCurrency;if(!r)return null;var i=Object(E["a"])(Math.abs(r),n);var s=r>0?L.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:a,creditsAppliedFormatted:i}):L.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:a,creditsAppliedFormatted:i});return b.a.createElement(S["d"],{type:"inline",className:"p-pricing_calculator__credit_alert","data-qa":"pricing_calculator_credit_alert"},s)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,a=t.submitButtonText,r=t.showSubmitButton;var n=this.state.submitButtonIsPending;if(!r)return null;return b.a.createElement(w["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:n,"data-qa":"pricing_calculator_submit_btn"},a||L.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,a=t.isUserRestricted,r=t.showHeader,n=t.showSubmitButton,i=t.display,s=t.teamCredits,o=t.isPlansAndCostDataLoaded;if(!o||a)return null;var l=_()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return b.a.createElement("div",{className:l,"data-qa":"pricing_calculator_container"},r&&this.renderHeader(),b.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),b.a.createElement(D,this.props),this.renderSwitchCurrencyInfo(),!!s&&this.renderCreditToast(),n&&this.renderSubmitBtn()))}}]);return t}(f["PureComponent"]);q.displayName="PricingCalculator";q.displayName="PricingCalculator";q.defaultProps=U;var W=q;var H=function e(t){return Object(i["a"])(t)};var G=function e(t){return{loadPlansAndCostData:function e(a){return t(Object(n["fetchPlansAndCostData"])(a))},switchTerms:function e(a){return t(Object(n["changeActivePlan"])({term:a}))},updatePlanLevel:function e(a){return t(Object(n["updatePlanLevel"])(a))}}};var V=Object(r["connect"])(H,G)(W);var K=t["a"]=V},1822:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(0);var h=a(1);var v=a.n(h);var f=a(12);var b=a(2);var g=a(13);var _=a.n(g);var y=a(9);var k=a(1400);var O=a(583);var C=a(1466);var E=a(758);var S=a(6);var w=a(196);var I=a(27);var j=a(44);var T=a(189);var A=a(28);var N=a(2327);var M=new S["b"]("custom_tos");var P={hasCustomTOS:m["b"].bool,customTOSTimestamp:m["b"].number,disablePrivacyAndCookiePolicy:m["b"].bool,enterprise:m["b"].shape({name:m["b"].string,domain:m["b"].string}),orgUrl:m["b"].string,customTOSViewLink:m["b"].string,team:m["b"].shape({name:m["b"].string}),safeAbsRootURL:m["b"].string,featureZeroWorkspaceOnboarding:m["b"].bool.isRequired,onSubmit:m["b"].func,onlyDisplayCard:m["b"].bool};var R={hasCustomTOS:false,disablePrivacyAndCookiePolicy:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:b["noop"],onlyDisplayCard:false};var x=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={buttonIsPending:false};a.onClick=a.onClick.bind(a);return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return v.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return v.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"maybeRenderCookiePolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return v.a.createElement("li",null,this.renderCookiePolicy())}},{key:"maybeRenderPrivacyPolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return v.a.createElement("li",null,this.renderPrivacyPolicy())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return v.a.createElement(j["a"],{href:a+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},M.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return v.a.createElement(j["a"],{href:a+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},M.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,a=t.customTOSViewLink,r=t.enterprise,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return v.a.createElement(T["a"],{href:""+a,target:"_blank",rel:"noopener noreferrer"},M.rt("{enterpriseName}\u2019s Terms of Service",{enterpriseName:r.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return v.a.createElement(j["a"],{href:a+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},M.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.customTOSTimestamp;if(!a)return null;var n=void 0;n=r?M.t("Review and accept the updated terms of service"):M.t("Review the terms of service");return v.a.createElement("div",{className:"p-tos__heading"},n)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,a=t.customTOSTimestamp,r=t.enterprise,n=t.customTOSViewLink,i=t.team,s=t.featureZeroWorkspaceOnboarding;if(!s)return null;if(Object(b["isNull"])(Object(E["c"])(n))){if(!Object(b["isEmpty"])(i))return v.a.createElement("div",null,v.a.createElement("p",{className:"p-tos__subheading"},M.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(A["getTeamDisplayName"])(i),enterpriseName:r.name})),v.a.createElement("p",{className:"p-tos__subheading"},n));return v.a.createElement("div",null,v.a.createElement("p",{className:"p-tos__subheading"},M.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:')),v.a.createElement("p",{className:"p-tos__subheading"},n))}if(a)return v.a.createElement("p",{className:"p-tos__subheading"},M.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:r.name,customTOSViewLink:n,TOSUpdatedOn:Object(w["a"])(a)},function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return v.a.createElement(T["a"],{href:n,target:"_blank",key:a,rel:"noopener noreferrer"},t);return null}));if(!Object(b["isEmpty"])(i))return v.a.createElement("p",{className:"p-tos__subheading"},M.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(A["getTeamDisplayName"])(i),enterpriseName:r.name}));return v.a.createElement("p",{className:"p-tos__subheading"},M.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return v.a.createElement("div",{className:"p-tos__body"},v.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),this.maybeRenderPrivacyPolicy(),this.maybeRenderCookiePolicy(),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return v.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return v.a.createElement(I["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},M.t("I Agree"))}},{key:"renderCard",value:function e(){var t=_()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return v.a.createElement("div",{className:t},v.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.onlyDisplayCard,n=t.orgUrl;return v.a.createElement("div",{className:"p-tos"},!r&&v.a.createElement(C["a"],{team:a,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(h["PureComponent"]);x.displayName="TermsOfService";x.defaultProps=R;var D=function e(t){var a=Object(y["getFromBootData"])(t,"custom_tos");var r=a.enterprise;var i=Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var s=Object(k["b"])(t);Object(b["isEmpty"])(s)||(r=s);var o=Object(O["c"])(t,r.domain);return n()({},a,{enterprise:r,orgUrl:o,featureZeroWorkspaceOnboarding:i})};var F=Object(f["connect"])(D)(x);a.d(t,"a",function(){return x});var L=t["b"]=F},1828:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(12);var o=a(1186);var l=a(330);var c=a(1301);var u=a(9);var d=a(6);var p=a(27);var m=a(23);var h=a(116);var v=new d["b"]("apps_browser");var f={app:r["b"].shape({app_id:r["b"].string,is_installed:r["b"].bool,bot_user_id:r["b"].string}).isRequired,appCanBeAdded:r["b"].bool.isRequired,className:r["b"].string.isRequired,featureAppBrowserViewInstall:r["b"].bool.isRequired,onClick:r["b"].func,onMouseLeave:r["b"].func,"data-app_index":r["b"].number.isRequired};var b={onClick:void 0,onMouseLeave:void 0};var g=function e(t){return i.a.createElement(h["a"],{className:"p-apps_browser__enter_button","aria-label":t,key:"enter-or-preview"},i.a.createElement(m["b"],{type:"enter",inline:true}),i.a.createElement("span",null,t))};g.displayName="renderEnter";var _=function e(t){var a=t.app,r=t.appCanBeAdded,n=t.className,s=t.featureAppBrowserViewInstall,o=t.onClick,u=t.onMouseLeave,d=t["data-app_index"];var m=v.t("Install");var h=v.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});if("tutorial_app"===a.app_id){m=v.t("Start");h=v.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})}else if(r){m=v.t("Add");h=v.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})}else if(a.is_installed){m=v.t("View");h=v.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"})}var f=Object(l["b"])(a,72);return i.a.createElement("div",{className:n,onClick:o,onMouseLeave:u,"data-app":true,"data-app_index":d,"data-is_installed":a.is_installed,"data-app_id":a.app_id,"data-bot_id":a.bot_id,"data-bot_user_id":a.bot_user_id,"data-can_app_be_added":r||null,"data-qa":"apps_browser_row",role:"presentation"},i.a.createElement("img",{className:"p-apps_browser__app_icon",src:f,alt:a.name}),i.a.createElement("div",{className:"p-apps_browser__app_info"},i.a.createElement("div",{className:"p-apps_browser__app_name"},i.a.createElement("strong",null,a.name)),i.a.createElement("div",{className:"p-apps_browser__app_description"},Object(c["a"])(a.short_description,function(e,t){return i.a.createElement("strong",{key:t},e)}))),s?g(m):i.a.createElement(p["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":h},m))};_.displayName="AppsBrowserActionText";_.defaultProps=b;var y=function e(t,a){var r=a.addAppsVariant,n=a.app,i=a.channelId;return{appCanBeAdded:r&&Object(o["a"])(t,n,i),featureAppBrowserViewInstall:Object(u["isFeatureEnabled"])(t,"feature_app_browser_view_install")}};t["a"]=Object(s["connect"])(y)(_)},1829:function(e,t,a){"use strict";a.d(t,"a",function(){return f});a.d(t,"b",function(){return b});var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(128);var u=a(2);var d=a.n(u);var p=a(12);var m=a(29);var h=a(4730);var v=a(161);var f=function e(t,a,r){var i=Object(m["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(c["a"])(s.a.createElement(p["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h["a"],n()({onClose:o},r)))),a)};var b=function e(t){l.a.unmountComponentAtNode(t)}},1830:function(e,t,a){"use strict";var r=a(422);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var m=Object(r["shouldShowHighlightsLabel"])(d);return{isPinned:a,isStarred:o,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:m}}},1831:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(12);var o=a(38);var l=a(339);var c=a(842);var u=a(14);var d=a(9);var p=a(816);var m=a(557);var h={theme:r["b"].oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme"]),custom:r["b"].object,featureClassicNav:r["b"].bool,historyNavigationEnabled:r["b"].bool,clientTheme:r["b"].string,logger:r["b"].object.isRequired};var v={theme:"default_theme",custom:void 0,featureClassicNav:false,historyNavigationEnabled:false,clientTheme:"light"};var f=function e(t){var a=Object(c["e"])(Object(c["c"])(t.theme,t.custom,{clientTheme:t.clientTheme}));if(!a){t.logger.error("SIDEBAR_THEME",'Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var r=Object(l["d"])(a,{featureClassicNav:t.featureClassicNav});var n=a.text_color;var s=Object(l["c"])(a.column_bg,25);var o=Object(l["c"])(a.column_bg,35);var u=t.historyNavigationEnabled?Object(l["k"])(n,.15):s;var d=t.historyNavigationEnabled?Object(l["k"])(n,.2):o;var p=Object(l["b"])(n,Object(l["k"])(n,.3));var m="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+r+';\n\t\t}\n\n\t\t/* Cover up "p-channel_sidebar__icon" when the close button is focused */\n\t\t.p-channel_sidebar__close:focus {\n\t\t\tbackground: '+a.column_bg+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close:focus {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__section_heading--selected:hover,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+a.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+r+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+r+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected:hover .p-channel_sidebar__section_heading_label,\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+a.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(l["k"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+u+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+d+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+u+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+d+";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: "+u+";\n\t\t}\n\n\t\t/** Compose Button **/\n\t\t.p-channel_sidebar__compose_button {\n\t\t\tbackground: "+u+";\n\t\t}\n\t\t.p-channel_sidebar__compose_button:hover {\n\t\t\tbackground: "+d+";\n\t\t}\n\n\t\t/** Classic Nav (WIP) **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+a.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},m)};f.displayName="Theme";f.defaultProps=v;var b=function e(t){var a=Object(o["h"])(t,"sidebar_theme");var r=Object(o["c"])(t);return{theme:a,custom:r,featureClassicNav:Object(d["isFeatureEnabled"])(t,"feature_classic_nav"),historyNavigationEnabled:Object(p["a"])(t),clientTheme:Object(m["getClientTheme"])(t),logger:Object(u["a"])({state:t})}};t["a"]=Object(s["connect"])(b)(f)},1832:function(e,t,a){"use strict";var r=a(0);var n=a(17);var i=a(583);var s=a(2);var o=a.n(s);var l=a(45);var c=a(35);var u=a(33);var d=a(107);var p=a(352);var m=a(445);var h=Object(n["b"])("Open channel from another workspace",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.teamId;var o=t();if(Object(u["isSSB"])()){var h=Object(s["includes"])(Object(l["legacyGetSignedInTeamIds"])(o),n);var v=h?Promise.resolve():Object(m["i"])(n);return v.then(function(){return new Promise(function(e){return window.requestAnimationFrame(e)})}).then(function(){if(Object(u["isSSBAndAtLeastVersion"])("3.2"))Object(l["displayTeamAndChannel"])(n,r);else{var e=document.createElement("iframe");var t=Object(d["c"])({team:n,id:r});e.src="slack://channel"+t;document.body.appendChild(e);setTimeout(function(){return e.remove()},1e3)}})}var f=Object(c["j"])(o,n);var b=Object(s["get"])(f,"domain");var g=Object(i["b"])(o,b)+"/messages/"+r;Object(p["f"])(g,n);return Promise.resolve()});h.meta={name:"openChannelFromAnotherTeam",key:"actionsOpenChannelFromAnotherTeamOpenChannelFromAnotherTeam",description:"Open channel from another workspace"};h.propTypes={channelId:r["b"].string.isRequired,teamId:r["b"].string.isRequired};t["a"]=h},1833:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(0);var v=a(13);var f=a.n(v);var b=a(2017);var g=a(545);var _=a(42);var y=a(6);var k=a(134);var O=a(3781);var C=a.n(O);var E=new y["b"]("message");var S={msg:h["b"].object.isRequired,className:h["b"].string,children:h["b"].node,resendMessage:h["b"].func.isRequired,removeMessageAndTimestamp:h["b"].func.isRequired};var w={className:void 0,children:void 0};var I=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.resend=a.resend.bind(a);a.cancel=a.cancel.bind(a);return a}s()(t,[{key:"getText",value:function e(){var t=this.props.msg.isEKMError;if(t)return E.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return E.t("Slack couldn\u2019t send this message")}},{key:"resend",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.resendMessage(r,a)}},{key:"cancel",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.removeMessageAndTimestamp({channelId:r,ts:a})}},{key:"renderFooter",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel,n=t.isEKMError;if(!a&&!r)return null;var i=a&&p.a.createElement(k["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},E.t("Try again"));var s=r&&p.a.createElement(k["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},n?E.t("Clear"):E.t("Cancel"));var o=i&&s&&p.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return p.a.createElement("div",{className:"c-message_kit__resend__footer"},p.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),p.a.createElement("div",null,this.getText(),"\u2002",i,o,s))}},{key:"render",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel;var n=Object(_["isUnprocessedMsg"])(this.props.msg);if(!a&&!r&&!n)return this.props.children;var i=f()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":a||r,"c-message_kit__resend--unprocessed":n});return p.a.createElement("div",{className:i},this.props.children,this.renderFooter())}}]);return t}(d["PureComponent"]);I.displayName="MessageResend";I.defaultProps=w;var j={resendMessage:function e(){return b["a"].apply(void 0,arguments)},removeMessageAndTimestamp:function e(){return g["a"].apply(void 0,arguments)}};t["a"]=Object(m["connect"])(null,j)(I)},1835:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(13);var _=a.n(g);var y=a(12);var k=a(2);var O=a(31);var C=a(9);var E=a(1457);var S=a(1679);var w=a(11);var I=a(16);var j=a(303);var T=a(177);var A=a(21);var N=a(25);var M=a(41);var P=a(144);var R=a(97);var x=a(442);var D=a(87);var F=a(32);var L=a(6);var B=a(14);var U=a(1038);var q=a(162);var W=a(69);var H=a(836);var G=a(1045);var V=a(551);var K=a(812);var z=a(27);var Q=a(54);var Y=a(26);var J=a.n(Y);var X=a(1430);var Z={groupId:b["b"].string.isRequired,isActive:b["b"].bool.isRequired,isAutoGenerated:b["b"].bool.isRequired,isDetailsView:b["b"].bool,featureSonicUserGroups:b["b"].bool,onEnableUserGroup:b["b"].func,onDisableUserGroup:b["b"].func,openModal:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,menuProps:b["b"].object,onClick:b["b"].func};var $={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:k["noop"],onDisableUserGroup:k["noop"],canEditUserGroups:k["noop"],canCreateAndDeleteUserGroups:k["noop"],openModal:k["noop"],menuProps:{},onClick:k["noop"]};var ee=new L["b"]("user_groups");var te=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return a}u()(t,[{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.isAutoGenerated,r=t.isDetailsView;if(a&&r)return null;var n=[];r||a||n.push({key:"menu-edit-members",label:ee.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:ee.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=[];if(this.userGroupIsEditable()){var r=this.getEditMenuItems();r&&a.push.apply(a,J()(r))}this.canEnableUserGroup()?a.push({key:"menu-enable",label:ee.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&a.push({key:"menu-disable",label:ee.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return a}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit;var n=this.props.groupId;return f.a.createElement(Ae,{groupId:n,action:a,onSubmit:r})}},{key:"renderEditDialog",value:function e(t){return f.a.createElement(X["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(ft,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(W["f"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return f.a.createElement(W["b"],e)}))}}]);return t}(v["PureComponent"]);te.displayName="UserGroupContextMenu";te.defaultProps=$;var ae=function e(t,a){var r=a.groupId,n=a.isDetailsView;var i=Object(T["e"])(t,r);var s=Object(D["t"])(i);var o=Object(D["m"])(i);var l=Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(D["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(D["b"])(t)},featureSonicUserGroups:l}};var re=function e(t,a){var r=a.groupId;return{openModal:function e(){return t(M["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(j["i"])({groupId:r}))},onDisableUserGroup:function e(){t(Object(j["g"])({groupId:r})).then(function(){return t(Object(R["o"])())})},onEnableUserGroup:function e(){t(Object(j["h"])({groupId:r})).then(function(){return t(Object(R["n"])({groupId:r}))})}}};var ne=Object(y["connect"])(ae,re)(te);var ie=a(2484);var se=new L["b"]("user_groups");var oe={userGroup:b["b"].object,onEditMembers:b["b"].func.isRequired,onEditDetails:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired};var le={userGroup:void 0};var ce=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderUserGroupOptionsMenu=a.renderUserGroupOptionsMenu.bind(a);return a}u()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return f.a.createElement(ne,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=se.t("More actions");return f.a.createElement(W["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},f.a.createElement(Q["c"],{tip:t,delay:Q["a"],position:"top-right"},f.a.createElement(z["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,"aria-label":t,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(z["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},se.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(z["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},se.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(D["m"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(v["Component"]);ce.displayName="UserGroupsDetailsActionBar";var ue=function e(t,a){var r=a.groupId;return{userGroup:Object(T["e"])(t,r),featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};ce.defaultProps=le;var de=Object(y["connect"])(ue)(ce);var pe={members:"members",channels:"channels"};var me=new L["b"]("user_groups");var he={userGroup:b["b"].shape({created_by:b["b"].string,date_create:b["b"].number,date_delete:b["b"].number,date_update:b["b"].number,deleted_by:b["b"].string,description:b["b"].string,enterprise_subteam_id:b["b"].string,handle:b["b"].string,id:b["b"].string,is_external:b["b"].bool,is_subteam:b["b"].bool,is_usergroup:b["b"].bool,name:b["b"].string,prefs:b["b"].shape({channels:b["b"].array,groups:b["b"].array}),team_id:b["b"].string,updated_by:b["b"].string,user_count:b["b"].number,users:b["b"].array,_name_lc:b["b"].string}),fetchUserGroupMembers:b["b"].func,onChannelSwitch:b["b"].func,removeMember:b["b"].func,removeChannel:b["b"].func,openModal:b["b"].func,openUserGroupList:b["b"].func,enqueueToast:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,showMemberProfile:b["b"].func,getPrefCompliantMemberNameLowerCase:b["b"].func,groupId:b["b"].string.isRequired,userGroupMembers:b["b"].array,newMembers:b["b"].array,userGroupDefaultChannels:b["b"].array,featureSonicUserGroups:b["b"].bool};var ve={userGroup:{},fetchUserGroupMembers:k["noop"],onChannelSwitch:k["noop"],removeMember:k["noop"],removeChannel:k["noop"],openModal:k["noop"],openUserGroupList:k["noop"],enqueueToast:k["noop"],canEditUserGroups:k["noop"],canCreateAndDeleteUserGroups:k["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:k["noop"],getPrefCompliantMemberNameLowerCase:k["noop"],featureSonicUserGroups:false};var fe=Object(B["b"])();var be=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={sortedMembers:[],freshMount:true};Object(O["a"])(a,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin","sortMembers","setSortedMembers","setAndUpdateSortedMembers"]);a.memberList=f.a.createRef();a.channelsList=f.a.createRef();a.flexpane=f.a.createRef();a.channelListKeys=null;a.memberListKeys=null;return a}u()(t,[{key:"componentDidMount",value:function e(){Object(D["t"])(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function e(t){var a=t.userGroup,r=a.users,n=s()(a,["users"]);var i=this.props.userGroup,o=i.users,l=s()(i,["users"]);var c=this.props.userGroupMembers;var u=this.state.freshMount;Object(k["isEqual"])(n,l)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate");(u&&!Object(k["isEqual"])(t.userGroupMembers,c)||u&&t.userGroupMembers.length)&&this.setSortedMembers(this.sortMembers(c));u||Object(k["isEqual"])(t.userGroupMembers,c)||this.setAndUpdateSortedMembers(this.state.sortedMembers,c)}},{key:"onRemoveMember",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){a.props.removeMember(t).then(function(){a.props.enqueueToast({element:f.a.createElement(q["b"],null,me.t("Member removed from group."))})}).catch(function(e){fe.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&a.props.enqueueToast({element:f.a.createElement(q["b"],null,me.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){a.props.removeChannel(t).then(function(){a.props.enqueueToast({element:f.a.createElement(q["b"],null,me.t("Channel removed from group."))})}).catch(function(e){fe.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var a=t.type,r=t.id;a===pe.members?this.onRemoveMember(r):a===pe.channels&&this.onRemoveChannel(r)}},{key:"onViewProfile",value:function e(t){var a=t.type,r=t.id;if(a===pe.members)return this.props.showMemberProfile({memberId:r});if(a===pe.channels)return this.props.onChannelSwitch(r);return null}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"setSortedMembers",value:function e(t){this.setState(function(){return{sortedMembers:t}})}},{key:"setAndUpdateSortedMembers",value:function e(t,a){var r=Object(k["intersection"])(t,a);var n=Object(k["difference"])(a,t);r=r.concat(n);this.setState(function(){return{sortedMembers:r}})}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.userGroup,r=t.userGroupDefaultChannels,n=void 0===r?[]:r;var i=Object(D["l"])(a);return[{title:me.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:me.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"getAriaLabelForChannelRow",value:function e(t){if(!this.channelListKeys)return null;var a=this.props.userGroupDefaultChannels;var r=a[t];return Object(E["a"])({type:Object(w["getChannelType"])(r),displayName:Object(w["getDisplayName"])(r),isShared:Object(w["isExternallySharedChannel"])(r),isOrgShared:Object(w["isOrgShared"])(r),isArchived:Object(w["isArchived"])(r)})}},{key:"getAriaLabelForMemberRow",value:function e(t){if(!this.memberListKeys)return null;var a=this.props.userGroupMembers;var r=a[t];return Object(S["a"])({name:Object(I["getMemberRealName"])(r),isDeleted:Object(I["isDeleted"])(r),isAppOrBot:false,isGuest:false})}},{key:"sortMembers",value:function e(t){var a=this;this.setState(function(){return{freshMount:false}});return Object(k["sortBy"])(t,function(e){return a.props.getPrefCompliantMemberNameLowerCase(e)})}},{key:"focus",value:function e(){var t=this.memberList.current||this.channelsList.current;t&&t.focus()}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(D["t"])(t)}},{key:"canRemoveItem",value:function e(t){var a=this.props.userGroup;if(t===pe.members&&Object(D["m"])(a))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement("div",{className:"p-user_group_details__name"},Object(D["h"])(t)),f.a.createElement("div",{className:"p-user_group_details__description"},Object(D["e"])(t)),f.a.createElement("div",{className:"p-user_group_details__handle"},Object(D["f"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canEditUserGroups())return null;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement(de,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var a=this.getTabs();return f.a.createElement(H["a"],{tabs:a,defaultTabId:t,fullHeight:true,fullWidthMenu:true})}},{key:"renderListItemOptionsMenu",value:function e(t){var a=this;var r=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===pe.channels?me.t("Open channel"):me.t("View profile");var l=[f.a.createElement(W["b"],{key:i,label:o,onSelected:function e(){return a.onViewProfile({type:s,id:i})}})];this.canRemoveItem(s)&&l.push(f.a.createElement(W["b"],{key:i,label:me.t("Remove from group..."),onSelected:function e(){return a.onRemoveFromGroup({type:s,id:i})},danger:true}));return f.a.createElement(W["f"],n()({},r,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=Object(k["includes"])(this.props.newMembers,a);var i=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:pe.members,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:pe.members})},customProps:{key:a.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":a.id},id:a.id};return f.a.createElement(ot,s)}},{key:"renderChannelItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r});var i={className:n,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:pe.channels,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:pe.channels})},customProps:{key:a.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":a.id},id:a.id};return f.a.createElement(ot,i)}},{key:"renderTooltip",value:function e(){if(!this.props.featureSonicUserGroups)return null;return me.t("More actions")}},{key:"renderMembersList",value:function e(){var t=this;var a=this.props,r=a.userGroup,n=a.userGroupMembers;var i=this.state.sortedMembers;if(!n||Object(k["isEmpty"])(n))return this.renderEmptyMemberState();this.memberListKeys=Object(k["map"])(i,"id");var s=Object(D["h"])(r);return f.a.createElement(U["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true,ref:n},f.a.createElement(V["a"],{ref:t.memberList,width:a,height:r,keys:t.memberListKeys,rowRenderer:function e(a){return t.renderMemberItem(i[a])},ariaLabel:me.t("{userGroupName} Members",{userGroupName:s,fallbackHash:"1cb449c1126609b4b41e1d87f65f0d7cd19b49b9"}),getAriaLabelForRow:t.getAriaLabelForMemberRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderChannelsList",value:function e(){var t=this;var a=this.props,r=a.userGroupDefaultChannels,n=a.userGroup;if(!r||Object(k["isEmpty"])(r))return this.renderEmptyChannelState();this.channelListKeys=Object(k["map"])(r,"id");var i=Object(D["h"])(n);return f.a.createElement(U["a"],null,function(e){var a=e.width,n=e.height,s=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true,ref:s},f.a.createElement(V["a"],{ref:t.channelsList,width:a,height:n,keys:t.channelListKeys,rowRenderer:function e(a){return t.renderChannelItem(r[a])},ariaLabel:me.t("{userGroupName} Default Channels",{userGroupName:i,fallbackHash:"2ec0a5de1b2e256a3e6c96a289fdfe0abf7dc5d0"}),getAriaLabelForRow:t.getAriaLabelForChannelRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=me.t("Nobody\u2019s in this group");var a="You can add a few people with the button below.";var r=me.t("Add Members");return f.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-members-empty-list":true},f.a.createElement(G["a"],{title:t,description:a,primaryActionText:r,onClickPrimaryAction:this.onAddMembers}))}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=me.t("Add Default Channels");var a=me.t("No default channels");var r=me.t("All members of a user group are automatically added to its default channels.");return f.a.createElement("div",{className:"p-user_group_details__empty_list"},f.a.createElement(G["a"],{title:a,description:r,primaryActionText:t,onClickPrimaryAction:this.onAddChannels}))}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit,n=t.id;var i=this.props.groupId;return f.a.createElement(Ae,{action:a,onSubmit:r,id:n,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(ft,{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(X["a"],{userGroupId:t})}},{key:"renderContent",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;return f.a.createElement(K["a"],{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:me.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(F["a"])()?void 0:7})}}]);return t}(v["PureComponent"]);be.displayName="UserGroupDetails";be.defaultProps=ve;var ge=function e(t,a){var r=a.groupId;var n=Object(T["e"])(t,r);var i=Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(D["s"])(n))return{userGroup:n,featureSonicUserGroups:i};var s=Object(D["g"])(n);var o=Object(k["map"])(s,function(e){return Object(N["e"])(t,e)});var l=Object(D["d"])(t,n);var c=Object(k["map"])(l,function(e){return Object(A["e"])(t,e)});return{userGroup:n,featureSonicUserGroups:i,userGroupMembers:o,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(D["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(D["b"])(t)},getPrefCompliantMemberNameLowerCase:function e(a){return Object(I["getPrefCompliantMemberNameLowerCase"])(t,a)}}};var _e=function e(t,a){var r=a.groupId;return{openModal:function e(){return t(M["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(a){return t(Object(j["i"])({groupId:r,reason:a}))},removeMember:function e(a){return t(Object(j["m"])({groupId:r,memberId:a}))},removeChannel:function e(a){return t(Object(j["l"])({groupId:r,channelId:a}))},onChannelSwitch:function e(a){return t(Object(x["a"])({id:a}))},openUserGroupList:function e(){return t(Object(R["o"])())},enqueueToast:function e(){return t(P["enqueueToast"].apply(void 0,arguments))},showMemberProfile:function e(){return t(R["j"].apply(void 0,arguments))}}};var ye=Object(y["connect"])(ge,_e)(be);var ke=a(151);var Oe=a(131);var Ce=a(91);var Ee=new L["b"]("user_groups");var Se={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var we={action:b["b"].oneOf(Object(k["values"])(Se)).isRequired,onSubmit:b["b"].func.isRequired,label:b["b"].string,groupName:b["b"].string,featureSonicUserGroups:b["b"].bool};var Ie={label:"",groupName:"",featureSonicUserGroups:false};var je=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.action,r=t.groupName;switch(a){case"disable_group":return Ee.t("Deactivate {groupName}?",{groupName:r});case"remove_member":return Ee.t("Remove from group?");case"remove_channel":return Ee.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Ee.t("Deactivate");case"remove_member":case"remove_channel":return Ee.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.groupName,r=t.label,n=t.action;switch(n){case"disable_group":return Ee.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:a});case"remove_member":return Ee.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:r,groupName:a});case"remove_channel":return Ee.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:r,groupName:a});default:}return""}},{key:"render",value:function e(){return f.a.createElement(Ce["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},f.a.createElement("p",null,this.getDialogBody()))}}]);return t}(v["Component"]);je.displayName="UserGroupConfirmationDialog";je.defaultProps=Ie;var Te=function e(t,a){var r=a.id,n=a.groupId;var i="";var s=Object(T["e"])(t,n);if(Object(Oe["a"])(r)){var o=Object(A["e"])(t,r);i=Object(w["getDisplayNameForChannel"])(t,o)}else if(Object(ke["a"])(r)){var l=Object(N["e"])(t,r);i=Object(I["getMemberRealName"])(l)}return{groupName:Object(D["h"])(s),label:i,featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ae=Object(y["connect"])(Te)(je);var Ne=a(1936);var Me=a(1605);var Pe=a(483);var Re=a(111);var xe=a(320);var De=a(1351);var Fe=a(23);var Le=a(1843);var Be=new L["b"]("user_groups");var Ue={className:b["b"].string,userGroup:b["b"].object,featureSonicUserGroups:b["b"].bool.isRequired};var qe={className:void 0,userGroup:void 0};var We={unknown:"unknown",nonexistent:"non-existent"};var He=function e(t){var a=Object(D["h"])(t);return f.a.createElement(xe["c"],{className:"c-user_group__name"},f.a.createElement(Fe["b"],{type:"user_groups",inline:true,className:"c-medium_user_group__icon"}),a)};He.displayName="renderName";var Ge=function e(t){var a=Object(D["e"])(t);return f.a.createElement(xe["b"],null,a)};Ge.displayName="renderDescription";var Ve=function e(t,a){var r=Object(D["f"])(t);var n=Object(D["l"])(t);return f.a.createElement(xe["a"],null,f.a.createElement("span",{className:"c-medium_user_group__handle"},r),a?Be.rt("{count} {count, plural, =1 {member} other {members}}",{count:n}):void 0)};Ve.displayName="renderMetaData";function Ke(e){var t=e.className,a=e.userGroup,r=e.featureSonicUserGroups;var n=!Object(D["t"])(a);if(Object(D["r"])(a)||Object(D["q"])(a))return f.a.createElement(De["a"],{type:Object(D["r"])(a)?We.unknown:We.nonexistent,size:"medium"});var i=n?Re["c"].dim:null;return f.a.createElement(xe["d"],{className:t,size:"medium",style:i,text:He(a),subtext:Ge(a),metadata:Ve(a,r)})}Ke.displayName="MediumUserGroupEntity";Ke.defaultProps=qe;function ze(e,t){var a=t.id,r=t.group;var n=r||Object(T["e"])(e,a);var i=Object(C["isFeatureEnabled"])(e,"feature_sonic_user_groups");return{userGroup:n,featureSonicUserGroups:i}}var Qe=Object(y["connect"])(ze)(Ke);var Ye={className:b["b"].string,id:b["b"].string.isRequired,isActive:b["b"].bool,isDeactivated:b["b"].bool,isDisabled:b["b"].bool,secondaryContent:b["b"].node};var Je={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0};function Xe(e){var t=e.className,a=e.isActive,r=e.isDeactivated,i=e.isDisabled,o=e.secondaryContent,l=s()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]);var c=void 0;a?c=i||r?Re["c"].highlightDim:Re["c"].highlightLight:(i||r)&&(c=Re["c"].dim);return f.a.createElement(Pe["a"],{className:t,primaryContent:f.a.createElement(Qe,n()({isDeactivated:r},l)),secondaryContent:o,size:"medium",style:c})}Xe.displayName="MediumUserGroupListEntity";Xe.defaultProps=Je;var Ze=Xe;var $e=a(1665);var et=a(2089);var tt=a(459);var at=a(3800);var rt={id:b["b"].string,renderMenu:b["b"].func.isRequired,className:b["b"].string,isContextButtonVisible:b["b"].bool,onClick:b["b"].func,tooltip:b["b"].string};var nt=new L["b"]("user_groups");var it={id:null,className:"",isContextButtonVisible:false,onClick:k["noop"],tooltip:void 0};var st=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getTooltipLabel",value:function e(){return this.props.tooltip||nt.t("Edit user groups")}},{key:"renderContextButton",value:function e(){var t=this.props,a=t.isContextButtonVisible,r=t.renderMenu;if(!a)return null;var n={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:r,menuProps:{renderMenu:r,width:"auto"}};return f.a.createElement(Me["b"],{customClasses:"p-user_group_base_row__list_item_option"},f.a.createElement(Me["a"],n))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.id,n=t.onClick;var i=_()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":r&&Object(tt["a"])(r)},a);if(Object(Oe["a"])(r))return f.a.createElement($e["a"],{channelId:r,secondaryContent:this.renderContextButton(),showPurpose:false,onClick:n,className:i});if(Object(ke["a"])(r))return f.a.createElement(et["a"],{className:i,id:r,secondaryContent:this.renderContextButton()});return f.a.createElement(Ze,{id:r,secondaryContent:this.renderContextButton(),className:i})}}]);return t}(v["PureComponent"]);st.displayName="UserGroupBaseRow";st.defaultProps=it;var ot=st;var lt=a(2088);var ct=a(2341);var ut=new L["b"]("user_groups");var dt={featureSonicUserGroups:b["b"].bool,groupId:b["b"].string.isRequired,bulkUpsertUserGroupMembers:b["b"].func.isRequired,enqueueToast:b["b"].func.isRequired};var pt={featureSonicUserGroups:false};var mt=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={searchResultMode:false,disableGoButton:false};Object(O["a"])(a,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]);a.userGroupMemberManagementRef=null;return a}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var a=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(a).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onSelectedItemsChange",value:function e(t){this.setState(function(){return{disableGoButton:!t.length}})}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:f.a.createElement(q["b"],null,ut.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(B["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=ut.t("Edit members");return f.a.createElement(Ce["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:ut.t("Save"),onGo:this.onSave,goOnEnterPressed:false,goButtonIsDisabled:this.state.disableGoButton},f.a.createElement(lt["a"],{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}]);return t}(v["PureComponent"]);mt.displayName="UserGroupMemberManagementDialog";mt.defaultProps=pt;var ht=function e(t){return{featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var vt=function e(t,a){var r=a.groupId;return{bulkUpsertUserGroupMembers:function e(a){return t(Object(j["e"])({groupId:r,users:a}))},enqueueToast:function e(){return t(P["enqueueToast"].apply(void 0,arguments))}}};var ft=Object(y["connect"])(ht,vt)(mt);var bt=a(103);var gt=a(769);var _t=a(497);var yt=a(2057);var kt=a(2038);var Ot=a(2485);var Ct={userGroups:b["b"].object,featureSonicUserGroups:b["b"].bool,openModal:b["b"].func,searchTerm:b["b"].string,searchQuery:b["b"].string,onSearchInputChange:b["b"].func,onClearSearch:b["b"].func,setSearchQuery:b["b"].func,shouldDisplayCreateUserGroupOption:b["b"].bool,isActive:b["b"].func,showUserGroupDetails:b["b"].func};var Et={userGroups:{},featureSonicUserGroups:false,openModal:k["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:k["noop"],onClearSearch:k["noop"],setSearchQuery:k["noop"],shouldDisplayCreateUserGroupOption:false,isActive:k["noop"],showUserGroupDetails:k["noop"]};var St=new L["b"]("user_groups");var wt=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]);a.searchableGroupList=f.a.createRef();a.groupList=f.a.createRef();a.flexpane=f.a.createRef();return a}u()(t,[{key:"onItemClick",value:function e(t){var a=t.id;this.props.isActive(a)&&this.props.showUserGroupDetails({groupId:a})}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function e(t){return this.props.setSearchQuery(t.target.value)}},{key:"onClearSearch",value:function e(){return this.props.setSearchQuery("")}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getGroupedUserGroups",value:function e(t){var a=Object(k["groupBy"])(t,function(e){return Object(D["t"])(e)?"active":"inactive"});a.active=a.active||[];a.inactive=a.inactive||[];return a.active.concat(a.inactive)}},{key:"getSearchResults",value:function e(t,a){var r=this;if(!a)return Object.values(t);return Object(k["filter"])(t,function(e){if(!e)return false;var t=Object(D["h"])(e);var n=Object(D["f"])(e)||"";var i=Object(D["e"])(e)||"";if(r.checkForMatch(t,a))return true;if(r.checkForMatch(n,a))return true;if(r.checkForMatch(i,a,false))return true;return false})}},{key:"getSortedResults",value:function e(t){return Object(k["sortBy"])(t,function(e){var t=Object(D["h"])(e);return t.toLocaleLowerCase()})}},{key:"focus",value:function e(){var t=this.searchableGroupList.current||this.groupList.current;t&&t.focus()}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,r).includes(this.prepStringForSearch(a,r))}},{key:"prepStringForSearch",value:function e(t,a){if(!t)return"";var r=t.toLocaleLowerCase();a&&(r=r.replace(/[\s-_]/g,""));return Object(L["a"])(r)}},{key:"renderSearch",value:function e(){var t=this.props.searchQuery;if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__search"},f.a.createElement(_t["a"],{value:t,onChange:this.onSearchInputChange,placeholder:St.t("Find by name..."),autoFocus:true,icon:"search"}))}},{key:"renderRow",value:function e(t){var a=this.keys[t];return f.a.createElement(kt["a"],{id:a})}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__empty_search_results"},f.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},St.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),f.a.createElement(z["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},St.t("Clear Search")))}},{key:"renderSearchableList",value:function e(){return f.a.createElement(yt["a"],{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}},{key:"renderContent",value:function e(){return f.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}},{key:"renderCreateEditDialog",value:function e(){return f.a.createElement(X["a"],null)}},{key:"render",value:function e(){var t=this.props,a=t.featureSonicUserGroups,r=t.shouldDisplayCreateUserGroupOption;if(!a)return null;var i={renderBody:this.renderContent,title:St.t("User Groups"),viewId:"user-group-list"};if(r){i.onOptionsClick=this.onCreateUserGroup;i.headerProps={optionsIconType:"compose-dm",optionsTooltipText:St.t("Create a user group")}}return f.a.createElement(K["a"],n()({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},i,{kbNavOrder:Object(F["a"])()?void 0:7}))}}]);return t}(v["PureComponent"]);wt.displayName="UserGroupList";wt.defaultProps=Et;var It=function e(t,a){var r=Object(T["b"])(t);var i=Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(D["b"])(t);return n()({userGroups:r,searchQuery:Object(gt["getSearchQuery"])(t),featureSonicUserGroups:i,shouldDisplayCreateUserGroupOption:s,isActive:function e(a){return Object(D["t"])(Object(T["e"])(t,a))}},a)};var jt={openModal:M["openModal"],setSearchQuery:gt["setSearchQuery"],showUserGroupDetails:R["n"]};var Tt=Object(y["connect"])(It,jt)(wt);var At=a(3807);var Nt={groupId:b["b"].string,featureSonicUserGroups:b["b"].bool,userGroupMembers:b["b"].array};var Mt={groupId:null,featureSonicUserGroups:false,userGroupMembers:[]};var Pt=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={newMembers:[],timeoutId:null,searchTerm:""};Object(O["a"])(a,["onSearchInputChange","onClearSearch"]);return a}u()(t,[{key:"componentDidUpdate",value:function e(t){var a=this;var r=[];t.userGroupMembers.length&&!Object(k["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(r=Object(k["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(r.length){this.setState(function(){return{newMembers:r}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){a.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var a=this.state,r=a.newMembers,n=a.searchTerm;if(t)return f.a.createElement(ye,{groupId:t,newMembers:r});return f.a.createElement(Tt,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(v["PureComponent"]);Pt.displayName="UserGroupsFlexpane";Pt.defaultProps=Mt;var Rt=function e(t){var a=Object(bt["e"])(t)[0];var r=Object(T["e"])(t,a);var n=Object(D["g"])(r);var i=Object(k["map"])(n,function(e){return Object(N["e"])(t,e)});return{groupId:a,userGroupMembers:i,featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var xt=Object(y["connect"])(Rt)(Pt);a.d(t,"d",function(){return X["a"]});a.d(t,"b",function(){return Ae});a.d(t,"c",function(){return ne});a.d(t,"a",function(){return ot});a.d(t,"e",function(){return ft});var Dt=t["f"]=xt},1836:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(128);var p=a(29);var m=a(4737);var h=m["a"];var v=a(161);a.d(t,"a",function(){return f});a.d(t,"b",function(){return b});var f=function e(t,a){var r=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h,n()({},a,{onClose:o})))),r)};var b=function e(t){l.a.unmountComponentAtNode(t)};var g={mountConnectedWorkspaces:f,unmountConnectedWorkspaces:b}},1837:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(0);var h=a(1);var v=a.n(h);var f=a(2);var b=a(249);var g=a(2426);var _={action:m["b"].node};var y={action:null};var k=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return v.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(h["PureComponent"]);k.displayName="ActionBarItem";k.defaultProps=y;var O=k;var C={title:m["b"].node.isRequired,actions:m["b"].array,"data-qa":m["b"].string};var E={actions:[],"data-qa":void 0};var S=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var a=Object(f["map"])(t,function(e,t){return v.a.createElement(O,{key:t,action:e})});return a}},{key:"render",value:function e(){return v.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},v.a.createElement("span",n()({},Object(b["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),v.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(h["PureComponent"]);S.displayName="ActionBar";S.defaultProps=E;var w=t["a"]=S},1855:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(15);var n=Object(r["b"])(function(e){return e&&e.flexpaneFocus&&e.flexpaneFocus.focusKey});n.meta={name:"getFocusKey",key:"flexpaneFocusStoreFlexpaneFocusSelectorsGetFocusKey"}},1870:function(e,t,a){},1885:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(2);var b=a(31);var g=a(0);var _=a(85);var y=a.n(_);var k=a(110);var O=a.n(k);var C=a(6);var E=a(53);var S=a(11);var w=a(68);var I=a(82);var j=a(21);var T=a(574);var A=a(607);var N=a(25);var M=a(38);var P=a(2006);var R=a(817);var x=a(1248);var D=a(392);var F=a(332);var L=a(22);var B=a(2030);var U=a(1459);var q=a(69);var W=a(16);var H=a(32);var G=a(421);var V=a(1707);var K=a(2031);var z=a(2032);var Q=a(200);var Y=a(2076);var J=a(1073);var X=a(818);var Z=new C["b"]("coachmarks");var $={anchorElement:g["b"].instanceOf(Element),completeJoinerOnboarding:g["b"].func};var ee={anchorElement:null,completeJoinerOnboarding:false};var te=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.completeJoinerOnboarding;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(X["a"],{anchorElement:a,isOpen:true,onClickPrimaryButton:r,closeCoachmark:r,coachmarkClassNames:"c-joiner-coachmark",qa:"joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:Z.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},n.a.createElement("h3",null,Z.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),n.a.createElement("p",null,Z.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}]);return t}(X["a"]);te.displayName="JoinerOnboardingCoachmark";var ae=te;te.propTypes=$;te.defaultProps=ee;var re=new C["b"]("coachmarks");var ne={anchorElement:g["b"].instanceOf(Element),setTractorMessageCoachmarkVisibility:g["b"].func};var ie={anchorElement:null,setTractorMessageCoachmarkVisibility:f["noop"]};var se=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.setTractorMessageCoachmarkVisibility;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(X["a"],{anchorElement:a,"data-qa":"coachmark",isOpen:true,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:function e(){return r(false)}},n.a.createElement("h3",null,re.t("Just type and press Enter")),n.a.createElement("p",null,re.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}]);return t}(X["a"]);se.displayName="TractorSendMessageCoachmark";var oe=se;se.propTypes=ne;se.defaultProps=ie;var le=a(1069);var ce=a(20);var ue=a(210);var de=a(99);var pe=a(9);var me=a(878);var he=a(373);var ve=a(44);var fe=new C["b"]("message-input");var be={channelId:g["b"].string,anchorElement:g["b"].instanceOf(Element),closeCoachmark:g["b"].func,featureAtMentionInvites:g["b"].bool,atMentionedUsers:g["b"].arrayOf(g["b"].string),submitInvite:g["b"].func,prepareAndSendMessage:g["b"].func,featureWysiwygComposer:g["b"].bool};var ge={channelId:void 0,anchorElement:null,closeCoachmark:f["noop"],featureAtMentionInvites:false,atMentionedUsers:[],submitInvite:f["noop"],prepareAndSendMessage:f["noop"],featureWysiwygComposer:false};var _e=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.inviteMentionedUsers=a.inviteMentionedUsers.bind(a);a.sendMessage=a.sendMessage.bind(a);a.inputProxy=Object(ue["a"])({viewContext:ce["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:e.channelId});return a}d()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.channelId,n=a.closeCoachmark;t.channelId!==r&&n()}},{key:"inviteMentionedUsers",value:function e(){var t=this.props,a=t.submitInvite,r=t.channelId,n=t.atMentionedUsers,i=t.closeCoachmark;this.inputProxy.clear();a({channelId:r,users:n.join(",")});i()}},{key:"sendMessage",value:function e(){var t=this.props,a=t.channelId,r=t.featureWysiwygComposer;var n=this.inputProxy.getText();var i=r?new O.a(this.inputProxy.getContents().contents):null;this.inputProxy.clear();this.props.prepareAndSendMessage({channelId:a,text:n,delta:i,includeAtMentionInviteWarning:false});this.props.closeCoachmark()}},{key:"renderMessage",value:function e(){if(this.props.featureAtMentionInvites){var t=this.props,a=t.atMentionedUsers,r=t.channelId;var i=n.a.createElement("strong",null,n.a.createElement(he["a"],{channelId:r}));if(1===a.length)return fe.rt("{user} isn\u2019t in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user:n.a.createElement(me["a"],{id:a[0]}),channelName:i});if(2===a.length)return fe.rt("{user1} and {user2} aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:n.a.createElement(me["a"],{id:a[0]}),user2:n.a.createElement(me["a"],{id:a[1]}),channelName:i});if(3===a.length)return fe.rt("{user1}, {user2}, and {user3} aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:n.a.createElement(me["a"],{id:a[0]}),user2:n.a.createElement(me["a"],{id:a[1]}),user3:n.a.createElement(me["a"],{id:a[1]}),channelName:i});if(a.length>3)return fe.rt("{user1} and <strong>{remainingUsersCount} other people</strong> aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:n.a.createElement(me["a"],{id:a[0]}),remainingUsersCount:a.length-1,channelName:i})}return null}},{key:"renderInviteEducationMessage",value:function e(){if(this.props.featureAtMentionInvites)return fe.rt("Learn more about adding people to channels by visiting our <link>Help Center</link>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ve["a"],{key:t,href:"https://get.slack.help/hc/en-us/articles/201980108-Add-people-to-a-channel"},a)});return""}},{key:"renderPrimaryButtonText",value:function e(){if(this.props.featureAtMentionInvites)return fe.t("Add to Channel");return""}},{key:"renderSecondaryButtonText",value:function e(){if(this.props.featureAtMentionInvites)return fe.t("Send Message");return""}},{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.closeCoachmark;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(X["a"],{anchorElement:a,isOpen:true,closeCoachmark:r,onClickPrimaryButton:this.inviteMentionedUsers,onClickSecondaryButton:this.sendMessage,primaryCallToActionText:this.renderPrimaryButtonText(),secondaryCallToActionText:this.renderSecondaryButtonText(),arrowPosition:10,offsetX:30,offsetY:45,orientation:"top"},n.a.createElement("p",null,this.renderMessage()),n.a.createElement("p",null,this.renderInviteEducationMessage())))}}]);return t}(X["a"]);_e.displayName="AtMentionInviteWarningCoachmark";_e.propTypes=be;_e.defaultProps=ge;var ye=function e(t){return{featureAtMentionInvites:Object(pe["isFeatureEnabled"])(t,"feature_at_mention_invites"),channelId:Object(I["a"])(t),atMentionedUsers:Object(x["getAtMentionedUsers"])(t)}};var ke=function e(t){return{closeCoachmark:function e(){return t(Object(x["closeAtMentionInviteCoachMark"])())},submitInvite:function e(){return t(de["L"].apply(void 0,arguments))},prepareAndSendMessage:function e(){return t(T["a"].apply(void 0,arguments))}}};var Oe=Object(i["connect"])(ye,ke)(_e);var Ce=a(1628);var Ee=a(2033);var Se=a(1177);var we=a(63);var Ie=a(900);var je=a(810);var Te=a(851);var Ae=a(1193);var Ne=a(1194);var Me=a(1566);var Pe=a(94);var Re=a(765);var xe=a(486);var De=a(48);var Fe=a.n(De);var Le=a(1658);var Be=a(317);var Ue=a(203);var qe=a(542);var We=a(14);var He=a(39);var Ge=a(109);var Ve=a(4711);var Ke=a(4712);var ze=a(102);var Qe={renderIcon:g["b"].func.isRequired,renderText:g["b"].func.isRequired,type:g["b"].string.isRequired};function Ye(e){var t=e.renderIcon,a=e.renderText,r=e.type;return n.a.createElement("div",{className:"p-context_bar","data-qa":"context_bar"},t(),n.a.createElement("span",{className:"p-context_bar__text",id:"context-bar-text","data-qa":"context_bar_text_"+r},a()))}Ye.displayName="ContextBarTemplate";var Je=Ye;var Xe={status:g["b"].shape({emoji:g["b"].string,text:g["b"].string}).isRequired};function Ze(e){var t=e.status;return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(Ve["a"],{className:"p-context_bar__icon",emoji:t.emoji,emojiSize:ze["a"].SMALL,showTooltips:true,stopAnimations:true})},renderText:function e(){return n.a.createElement(Ke["a"],{emojiSize:ze["a"].SMALL,showTooltips:true,stopAnimations:true,text:t.text})},type:"custom_status"})}Ze.displayName="ContextBarCustomStatus";var $e=Object(Ge["pure"])(Ze);var et=a(23);var tt=a(429);var at=new C["b"]("messages");var rt={memberId:g["b"].string.isRequired};function nt(e){var t=e.memberId;return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(et["b"],{className:"p-context_bar__dnd_icon",type:"snooze-filled-small"})},renderText:function e(){return at.rt("{member} has <strong>notifications turned off</strong>",{member:n.a.createElement(tt["a"],{id:t}),fallbackHash:"af944df75258fb2dc2f1bacf18089b94d89efec8"})},type:"do_not_disturb"})}nt.displayName="ContextBarDnd";var it=Object(Ge["pure"])(nt);var st=new C["b"]("messages");var ot={channel:g["b"].object.isRequired,guestCount:g["b"].number.isRequired};function lt(e){var t=e.channel,a=e.guestCount;var r=void 0;r=Object(S["isIm"])(t)?st.rt("This person is a <strong>guest</strong> in your organization",{fallbackHash:"05fd90c8107c4450309a1fac880837845b684fa3"}):Object(S["isMpim"])(t)?st.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation",{guestCount:a,fallbackHash:"001b03a22307ab209631ce684de51e97f6eddd94"}):st.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel",{guestCount:a,fallbackHash:"6101cfd18ba681495b6716c62d50ae9de09aadb7"});return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(et["b"],{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"user-filled"})},renderText:function e(){return r},type:"guest"})}lt.displayName="ContextBarGuest";var ct=Object(Ge["pure"])(lt);var ut=a(176);var dt=a(383);var pt=new C["b"]("messages");var mt={connectedTeamIds:g["b"].arrayOf(g["b"].string).isRequired};function ht(e){var t=e.connectedTeamIds;var a=void 0;a=Object(f["isEmpty"])(t)?pt.rt("<strong>Another organization</strong> has been invited to this channel"):pt.rt("{numConnectedTeams, plural, =1 {{singleTeamName} has} other {<strong># other organizations</strong> have}} been invited to this channel",{singleTeamName:n.a.createElement(dt["a"],{id:t[0]}),numConnectedTeams:t.length,fallbackHash:"bda628c81a343fa32b015e193f6efb7d0db4fbc2"});return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(et["b"],{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"paper-plane"})},renderText:function e(){return a},type:"pending_shared"})}ht.displayName="ContextBarPendingShared";var vt=Object(Ge["shouldUpdate"])(function(e,t){return!Object(ut["a"])(t,e,2)})(ht);var ft=a(230);var bt=3;var gt=new C["b"]("messages");var _t={channel:g["b"].object.isRequired,connectedTeamIds:g["b"].arrayOf(g["b"].string).isRequired,guestCount:g["b"].number.isRequired,teamId:g["b"].string.isRequired};function yt(e){var t=e.channel,a=e.connectedTeamIds,r=e.guestCount,i=e.teamId;var s=void 0;if(Object(f["isEmpty"])(a))s=n.a.createElement(et["b"],{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"shared-channels"});else{var o=Math.min(a.length,bt);s=Object(f["times"])(o).map(function(e){return n.a.createElement(ft["b"],{className:"p-context_bar__icon",id:a[e],isPendingShared:Object(S["isPendingExternallySharedChannel"])(t),key:a[e],size:16})})}var l=void 0;l=Object(S["isIm"])(t)?Object(f["isEmpty"])(a)?gt.rt("This person is from <strong>another organization</strong>"):gt.rt("This person is from {team}",{team:n.a.createElement(dt["a"],{id:a[0]}),fallbackHash:"d4b920ecdba14d62b4972dd3f8a95382091f31e1"}):Object(S["isMpim"])(t)?Object(f["isEmpty"])(a)?gt.rt("This conversation includes people outside {userTeamName}",{userTeamName:n.a.createElement("strong",null,n.a.createElement(dt["a"],{id:i}))}):gt.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation",{guestCount:r,singleTeamName:n.a.createElement(dt["a"],{id:a[0]}),numConnectedTeams:a.length,fallbackHash:"15c8badcafe7312961e8f41ee9124ac65309cd3f"}):Object(f["isEmpty"])(a)?gt.rt("This channel is shared outside {userTeamName}",{userTeamName:n.a.createElement("strong",null,n.a.createElement(dt["a"],{id:i}))}):gt.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel",{guestCount:r,singleTeamName:n.a.createElement(dt["a"],{id:a[0]}),numConnectedTeams:a.length,fallbackHash:"f32040563023486aa2782d3260f9017b3e6b3a7a"});return n.a.createElement(Je,{renderIcon:function e(){return s},renderText:function e(){return l},type:"shared"})}yt.displayName="ContextBarShared";var kt=Object(Ge["shouldUpdate"])(function(e,t){return!Object(ut["a"])(t,e,2)})(yt);var Ot=a(315);var Ct=new C["b"]("messages");function Et(e,t){return Object(qe["a"])(Date.now(),{timeZone:Object(W["getMemberTimezone"])(e),timeZoneOffset:Object(W["getMemberTimezoneOffset"])(e),do24hrTime:t})}var St={member:g["b"].object.isRequired,time24:g["b"].bool};var wt={time24:false};function It(e){var t=e.member,a=e.time24;var i=Object(r["useState"])(Et(t,a)),s=Fe()(i,2),o=s[0],l=s[1];Object(Le["a"])(function(){l(Et(t,a))},[t,a]);return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(et["b"],{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"clock-o"})},renderText:function e(){return Ct.rt("It\u2019s {time} for {member}",{member:n.a.createElement(tt["a"],{id:t.id}),time:o?n.a.createElement("strong",null,o):n.a.createElement(Ot["b"],{size:"small"}),fallbackHash:"8438a232c197c83b0b53191ac5834f1d8efc5eca"})},type:"time_zone"})}It.displayName="ContextBarTimeZone";It.defaultProps=wt;function jt(e){return{time24:Object(M["h"])(e,"time24")}}var Tt=Object(i["connect"])(jt)(It);var At=a(18);var Nt=new C["b"]("messages");var Mt={featureMigrationBackgroundClient:g["b"].bool,clogger:g["b"].object.isRequired,channel:g["b"].object.isRequired};var Pt={featureMigrationBackgroundClient:false};function Rt(e){var t=e.featureMigrationBackgroundClient,a=e.clogger,r=e.channel;if(!t)return null;a.track(At["l"].ENTERPRISE_MIGRATION_BACKGROUND,{contexts:{ui_context:{action:At["w"].IMPRESSION,ui_element:At["z"].MIGRATION_CONTEXT_BAR},channel_id:r.id,channel_privacy_type:Object(S["getChannelPrivacyType"])(r)}});return n.a.createElement(Je,{renderIcon:function e(){return n.a.createElement(et["b"],{className:"p-context_bar__dnd_icon",type:"info-circle-filled"})},renderText:function e(){return Nt.rt("Missing messages? They'll show up shortly when your workspace's migration is complete.")},type:"is_migrating"})}Rt.displayName="ContextBarMigrating";Rt.defaultProps=Pt;var xt=Object(Ge["pure"])(Rt);var Dt=a(2479);var Ft=22;var Lt=8;var Bt={channel:g["b"].object.isRequired,currentUser:g["b"].object,guestCount:g["b"].number,connectedTeamIds:g["b"].array,contextBarExperimentGroup:g["b"].oneOf(["default","control","test"]),isDnd:g["b"].bool,imMember:g["b"].object,teamId:g["b"].string.isRequired,maybePullDownMessagePane:g["b"].func,featureContextBarCustomStatus:g["b"].bool,imCustomStatus:g["b"].shape({emoji:g["b"].string,text:g["b"].string}),isMigrating:g["b"].bool,featureMigrationBackgroundClient:g["b"].bool};var Ut={currentUser:void 0,guestCount:0,connectedTeamIds:[],contextBarExperimentGroup:"default",isDnd:false,imMember:null,maybePullDownMessagePane:f["noop"],featureContextBarCustomStatus:false,imCustomStatus:void 0,isMigrating:false,featureMigrationBackgroundClient:false};function qt(e){var t=e.currentUser,a=e.imMember,n=e.contextBarExperimentGroup,i=e.teamId;var s=Object(r["useState"])(false),o=Fe()(s,2),l=o[0],c=o[1];var u=Object(We["a"])({teamId:i});var d=Object(r["useCallback"])(function(){if("control"!==n){c(false);return}if(!a||Object(W["isExternal"])(a)||Object(W["isSelf"])(a)||Object(W["isBotUser"])(a)){c(false);return}if(t.tz===a.tz){c(false);return}try{var e=Object(qe["a"])(Date.now(),{timeZone:Object(W["getMemberTimezone"])(a),timeZoneOffset:Object(W["getMemberTimezoneOffset"])(a),do24hrTime:true,returnMoment:true});var r=e.hour();if(Object(f["isNumber"])(r)){c(r>=Ft||r<Lt);return}c(false)}catch(e){e&&e.message&&(e.message.includes("Unsupported time zone")||u.error("CONTEXT_BAR",e));c(false)}},[n,a,u,t]);Object(Le["a"])(function(){d()},[d]);Object(r["useEffect"])(function(){d()},[d]);return l}function Wt(e){var t=e.channel,a=e.connectedTeamIds,i=e.contextBarExperimentGroup,s=e.featureContextBarCustomStatus,o=e.guestCount,l=e.imCustomStatus,c=e.imMember,u=e.isDnd,d=e.maybePullDownMessagePane,p=e.teamId,m=e.isMigrating,h=e.featureMigrationBackgroundClient,v=e.clogger,f=e.currentUser;var b=Object(S["isExternallySharedChannel"])(t);var g=Object(S["isPendingExternallySharedChannel"])(t);var _="control"===i;var y=qt({imMember:c,contextBarExperimentGroup:i,teamId:p,currentUser:f});var k=s&&l&&l.text&&l.emoji;var O=u&&_;var C=y&&_;var E=void 0;h&&m?E=n.a.createElement(xt,{featureMigrationBackgroundClient:h,clogger:v,channel:t}):g?E=n.a.createElement(vt,{connectedTeamIds:a}):b?E=n.a.createElement(kt,{channel:t,connectedTeamIds:a,guestCount:o,teamId:p}):O?E=n.a.createElement(it,{memberId:c.id}):k?E=n.a.createElement($e,{status:l}):C?E=n.a.createElement(Tt,{member:c}):o>0&&(E=n.a.createElement(ct,{channel:t,guestCount:o}));var w=!!E;Object(r["useEffect"])(function(){d(w)},[w,d]);return E||null}Wt.propTypes=Bt;Wt.defaultProps=Ut;var Ht=function e(t){var a=Object(I["a"])(t);var r=Object(j["e"])(t,a);var n=Object(S["getPendingAndConnectedTeamIds"])(t,r);var i=Object(Be["getMemberCounts"])(t,a);var s=Object(pe["isFeatureEnabled"])(t,"feature_context_bar_guests");var o=Object(pe["isFeatureEnabled"])(t,"feature_migration_background_client");var l=s?Object(f["get"])(i,"counts.restricted_member_count"):0;var c=Object(Pe["getGroupForUser"])(t,"context_bar");var u=Object(pe["isFeatureEnabled"])(t,"feature_context_bar_custom_status");var d=Object(S["isIm"])(r)?Object(S["getMemberIdFromIm"])(r):null;var p=d?Object(N["e"])(t,d):null;var m=!u||!p||Object(W["isExternal"])(p)||Object(W["isSelf"])(p)||Object(W["isBotUser"])(p)?null:Object(N["g"])(t,d);var h=Object(L["b"])(t);var v=p&&!Object(W["isExternal"])(p)&&!Object(W["isSelf"])(p)&&!Object(W["isBotUser"])(p)&&Object(Ue["getDndByMemberId"])(t,d);var b=Object(S["isMigratingInBackground"])(t,r);var g=Object(He["a"])({state:t});return{currentUser:Object(N["b"])(t),channel:r,connectedTeamIds:n,guestCount:l,contextBarExperimentGroup:c,isDnd:v,imMember:p,teamId:h,featureContextBarCustomStatus:u,imCustomStatus:m,isMigrating:b,featureMigrationBackgroundClient:o,clogger:g}};var Gt=Object(i["connect"])(Ht)(Wt);var Vt=a(1434);var Kt=a(122);var zt=a(35);var Qt=a(1311);var Yt=a(442);var Jt=a(28);var Xt=a(119);var Zt=a(256);var $t=a(2034);var ea=a(27);var ta=a(152);var aa=new C["b"]("view");var ra={channelId:g["b"].string.isRequired,team:g["b"].object,channel:g["b"].object,showCloseButton:g["b"].bool,channelIsIMWithDeletedMember:g["b"].bool,prevChannelId:g["b"].string,closeChannelApi:g["b"].func.isRequired,member:g["b"].object,archiveChannel:g["b"].func.isRequired,displayModelOrViewById:g["b"].func.isRequired,featureAnnounceOnly:g["b"].bool,featureSharedChannelsFreeTrial:g["b"].bool,trialEndTs:g["b"].number};var na={team:void 0,channel:void 0,showCloseButton:false,channelIsIMWithDeletedMember:false,prevChannelId:void 0,member:void 0,featureAnnounceOnly:false,featureSharedChannelsFreeTrial:false,trialEndTs:null};var ia=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(b["a"])(e,["onCloseButtonClicked","shouldShowFreeTrialUpgradePane","renderSharedChannelFreeTrialUpgradePane","onUpgradeButtonClicked"]);return e}d()(t,[{key:"onCloseButtonClicked",value:function e(){Object(S["isIm"])(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:false});this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"onUpgradeButtonClicked",value:function e(){var t=this.props.team;Object(Jt["openAuthenticatedUrlInBrowser"])(t,Xt["a"]+"?s=1&p=std_m&entry_point=shared_channels_free_trial_frozen_pane")}},{key:"shouldShowFreeTrialUpgradePane",value:function e(t){var a=this.props,r=a.featureSharedChannelsFreeTrial,n=a.trialEndTs,i=a.team;var s=i&&t&&r&&Object(S["isChannel"])(t)&&Object(Jt["hasTeamRedeemedSharedChannelsFreeTrialOffer"])(i)&&n>0&&t.unlinked>=n;return s}},{key:"renderSharedChannelFreeTrialUpgradePane",value:function e(){var t=this.props.featureSharedChannelsFreeTrial;if(!t)return null;return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",{className:"p-message_pane_input__disabled_text"},aa.rt("Upgrade to reconnect this shared channel for your organization.")),n.a.createElement(ea["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onUpgradeButtonClicked,type:"outline-primary",size:"small"},aa.t("Upgrade")))}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.showCloseButton,i=t.channelIsIMWithDeletedMember,s=t.member,o=t.featureAnnounceOnly;if(!a)return null;var l=Object(S["isChannel"])(a)?aa.t("Close Channel"):aa.t("Close");var c=null;var u="";if(Object(S["isFrozen"])(a)){if(this.shouldShowFreeTrialUpgradePane(a))return this.renderSharedChannelFreeTrialUpgradePane();u=Object(S["isIm"])(a)?aa.rt("Your two organizations are no longer connected."):Object(S["isMpim"])(a)?aa.rt("These organizations are no longer connected."):aa.rt("This channel is no longer shared with your organization.")}else if(Object(S["isArchived"])(a)&&!Object(S["isIm"])(a))u=Object(S["getIsChannelMoved"])(a)?aa.rt("{channel_or_group} was moved to another workspace.",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ta["a"],{channel:a})),fallbackHash:"27c083b405e96387febe1099064dd930b6696124",fallbackHashNs:"view"}):aa.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ta["a"],{channel:a}))});else if(i&&s&&Object(W["isAppUser"])(s))u=aa.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(W["getMemberRealName"])(s)});else if(i){c=n.a.createElement(et["b"],{type:"archive"});u=aa.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"})}else{if(o){var d=aa.t("Posting to this channel has been restricted to select members");return n.a.createElement($t["a"],{tooltip:d,featureAnnounceOnly:o,border:true,padding:"large"})}u=aa.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ta["a"],{channel:a}))})}return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",{className:"p-message_pane_input__disabled_text"},c," ",u),r&&n.a.createElement(ea["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},l))}}]);return t}(r["Component"]);ia.displayName="MessagePaneInputDisabled";ia.defaultProps=na;var sa=function e(t,a){var r=a.teamId,n=a.channelId;var i=Object(zt["j"])(t,r);var s=Object(j["e"])(t,n);var o=Object(S["isIm"])(s)?Object(N["e"])(t,Object(S["getMemberIdFromIm"])(s)):null;var l=Object(S["isImWithDeletedMember"])(t,s);var c=Object(Qt["a"])(t);return{team:i,channel:s,member:o,channelIsIMWithDeletedMember:l,prevChannelId:c,showCloseButton:!Object(S["isFrozen"])(s)&&(Object(S["isArchived"])(s)||l),featureAnnounceOnly:Object(pe["isFeatureEnabled"])(t,"feature_announce_only"),featureSharedChannelsFreeTrial:Object(pe["isFeatureEnabled"])(t,"feature_shared_channels_free_trial"),trialEndTs:Object(Zt["V"])(t)}};var oa={closeChannelApi:Kt["closeChannelApi"],archiveChannel:Kt["archiveChannel"],displayModelOrViewById:Yt["a"]};var la=Object(i["connect"])(sa,oa)(ia);var ca=a(103);var ua=a(97);var da=a(187);var pa=a(445);var ma=a(137);var ha=a(169);var va=a(515);var fa=a(895);var ba=a(54);var ga=a(444);var _a=a(108);var ya=new C["b"]("archives");var ka={channelId:g["b"].string.isRequired,channel:g["b"].object.isRequired,channelCreatedBySelf:g["b"].bool,channelDetailsVisible:g["b"].bool,dateCreated:g["b"].number,createdById:g["b"].string,showDetails:g["b"].func.isRequired,joinConversationApi:g["b"].func.isRequired,displayModelOrViewById:g["b"].func.isRequired,userAttentionIsOnChat:g["b"].bool,previousChannelId:g["b"].string,featureOfflineMode:g["b"].bool.isRequired,isOffline:g["b"].bool.isRequired};var Oa={channelCreatedBySelf:false,channelDetailsVisible:false,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:false,previousChannelId:void 0};var Ca=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onJoinButtonClicked=e.onJoinButtonClicked.bind(e);e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(e);e.handleKeyDown=e.handleKeyDown.bind(e);return e}d()(t,[{key:"componentDidMount",value:function e(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function e(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function e(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){var a=this.props,r=a.userAttentionIsOnChat,n=a.previousChannelId;if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;if(Object(va["a"])(document.activeElement))return;if(Object(H["a"])()&&!r)return;if(!Object(H["a"])()&&!Object(da["f"])())return;if(t.keyCode===_a["e"]){this.onJoinButtonClicked();return}if(t.keyCode===_a["f"]){if(Object(H["a"])()){this.props.displayModelOrViewById({id:n});return}Object(pa["a"])()}}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.dateCreated,i=t.createdById,s=t.channelCreatedBySelf,o=t.channelDetailsVisible,l=t.featureOfflineMode,c=t.isOffline;var u=n.a.createElement(ga["a"],{type:"unknown"});r&&(u=Object(ha["k"])(r));var d=n.a.createElement(ga["a"],{type:"unknown"});i&&(d=n.a.createElement(tt["a"],{id:i}));var p=ya.rt("You are viewing {channel_name}",{channel_name:n.a.createElement("strong",null,n.a.createElement(he["a"],{channel:a,boldIcon:true}))});var m="";m=s?ya.rt("Created by you on {created_at}",{created_at:u}):ya.rt("Created by {name} on {created_at}",{name:d,created_at:u});var h=n.a.createElement(ea["d"],{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:l&&c},ya.t("Join Channel"));if(l&&c){var v=n.a.createElement(fa["a"],{tooltipLabel:ya.t("Go online to join this channel")});h=n.a.createElement(ba["c"],{tip:v},n.a.createElement("div",{className:"inline_block"},h))}return n.a.createElement("div",{className:"p-message_pane_input__preview"},n.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},p),n.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},m),n.a.createElement("div",null,h,!o&&n.a.createElement(ea["d"],{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},ya.t("See More Details"))))}}]);return t}(r["Component"]);Ca.displayName="MessagePaneInputPreview";Ca.defaultProps=Oa;var Ea=function e(t,a){var r=a.channelId;var n=Object(j["e"])(t,r);var i=Object(ca["i"])(t);return{channel:n,channelDetailsVisible:"details"===i||"channel_info"===i,createdById:n.creator,dateCreated:n.created,channelCreatedBySelf:n.creator===Object(pe["getCurrentUserId"])(t),userAttentionIsOnChat:Object(G["e"])(t),previousChannelId:Object(Qt["a"])(t),featureOfflineMode:Object(pe["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(ma["c"])(t)}};var Sa={joinConversationApi:Kt["joinConversationApi"],showDetails:ua["e"],displayModelOrViewById:Yt["a"]};var wa=Object(i["connect"])(Ea,Sa)(Ca);var Ia=a(449);var ja=new C["b"]("msg_input");function Ta(e){var t=e.channelName,a=e.isSelfDm;if(a)return ja.t("Jot something down");if(t)return ja.t("Message {msg}",{msg:Object(C["q"])(t)});return ja.t("Message channel")}var Aa={isSelfDm:g["b"].bool,channelName:g["b"].string,memberId:g["b"].string,showStatus:g["b"].bool,forcePlaceholderText:g["b"].string};var Na={isSelfDm:false,channelName:void 0,memberId:void 0,showStatus:false,forcePlaceholderText:void 0};var Ma=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.isSelfDm,i=t.showStatus,s=t.memberId,o=t.forcePlaceholderText;var l=o||Ta({channelName:a,isSelfDm:r});var c=!o&&i&&n.a.createElement(Ia["b"],{memberId:s,tooltip:false});return n.a.createElement("div",{className:"c-texty_input__placeholder"},l,c)}}]);return t}(r["Component"]);Ma.displayName="MessagePaneInputPlaceholder";Ma.defaultProps=Na;var Pa=function e(t,a){var r=a.channelId,n=a.isSelfDm;var i=Object(j["e"])(t,r);var s=Object(S["getMemberIdFromIm"])(i);var o=s?Object(N["e"])(t,s):null;var l=Object(pe["isFeatureEnabled"])(t,"feature_context_bar_custom_status");return{memberId:s||void 0,showStatus:Object(S["isIm"])(i)&&!n&&Object(W["hasCustomStatusSet"])(o)&&!l}};var Ra=Object(i["connect"])(Pa)(Ma);var xa={channel:g["b"].object,channelId:g["b"].string,isSelfDm:g["b"].bool,channelName:g["b"].string,prepareAndSendMessage:g["b"].func,currentUserStartedTyping:g["b"].func,currentUserEndedTyping:g["b"].func,editLastMessageInChannel:g["b"].func,openSnippetDialog:g["b"].func,typingNames:g["b"].array,useSendButton:g["b"].bool,userCanPost:g["b"].bool,teamId:g["b"].string,featureWysiwygComposer:g["b"].bool,featureAtMentionInvites:g["b"].bool,telemeter:g["b"].object.isRequired,isUnavailable:g["b"].bool,shouldShowJoinerLandingPlaceCoachmark:g["b"].bool,completeJoinerOnboardingCallback:g["b"].func,shouldShowTractorMessageCoachmark:g["b"].bool,setTractorMessageCoachmarkVisibility:g["b"].func,shouldShowWorkflowItemCoachmark:g["b"].bool,shouldShowAtMentionsInviteCoachmark:g["b"].bool,userAttentionIsOnChat:g["b"].bool,composerVisible:g["b"].bool,removeFromSectionNavigation:g["b"].func,addToSectionNavigation:g["b"].func,resetSectionNavigation:g["b"].func,maybePullDownMessagePane:g["b"].func};var Da={channel:void 0,channelId:void 0,isSelfDm:false,channelName:void 0,prepareAndSendMessage:function e(){return Promise.resolve()},currentUserStartedTyping:f["noop"],currentUserEndedTyping:f["noop"],editLastMessageInChannel:f["noop"],openSnippetDialog:f["noop"],useSendButton:false,userCanPost:true,typingNames:[],teamId:void 0,featureWysiwygComposer:false,featureAtMentionInvites:false,isUnavailable:false,shouldShowJoinerLandingPlaceCoachmark:false,completeJoinerOnboardingCallback:f["noop"],shouldShowTractorMessageCoachmark:false,setTractorMessageCoachmarkVisibility:f["noop"],shouldShowAtMentionsInviteCoachmark:false,userAttentionIsOnChat:false,composerVisible:false,removeFromSectionNavigation:f["noop"],addToSectionNavigation:f["noop"],resetSectionNavigation:f["noop"],shouldShowWorkflowItemCoachmark:false,maybePullDownMessagePane:f["noop"]};var Fa=function(e){v()(t,e);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(b["a"])(e,["handleKeyDown","onTextChange","sendMessage","editLastMessage","snippetCallback","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur","maybePullDownMessagePane","handleContextBarError"]);e.textyRef=n.a.createRef();e.reactionPopoverRef=n.a.createRef();e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:false};return e}d()(t,[{key:"componentDidMount",value:function e(){this.updatePlaceholder();this.registerInput();this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props,r=a.userCanPost,n=a.channel;(r&&!t.userCanPost||!Object(S["isPreview"])(n)&&Object(S["isPreview"])(t.channel))&&this.unmountPlaceholder();return true}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.userAttentionIsOnChat,n=a.channelId,i=a.userCanPost,s=a.channel;var o={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Ae["a"])(o)&&this.props.addToSectionNavigation();Object(Ne["a"])(o)&&this.props.removeFromSectionNavigation();t.userAttentionIsOnChat&&!r?this.stopListeningToKeydown():!t.userAttentionIsOnChat&&r&&this.startListeningToKeydown();if(t.channelId!==n){t.channelId&&this.unregisterInput(t.channelId);if(n){this.registerInput();this.restoreLegacyDraft()}}(n&&t.channelId!==n||!t.userCanPost&&i||(!t.channel||Object(S["isPreview"])(t.channel))&&!Object(S["isPreview"])(s))&&this.updatePlaceholder()}},{key:"componentWillUnmount",value:function e(){var t=this.props.channelId;this.stopListeningToKeydown();this.unmountPlaceholder();this.unregisterInput(t);this.shouldNotListenToKeyDownAgain=true}},{key:"onTextChange",value:function e(t,a){var r=this.props.channelId;this.setState(function(){return{textyValue:t,textyWysiwygLength:Object(Se["a"])(new O.a(a))}});Object(H["a"])()||Object(xe["h"])(t);t&&0!==t.indexOf("/")&&Object(f["trim"])(t).length?this.props.currentUserStartedTyping({channelId:r}):this.props.currentUserEndedTyping({channelId:r})}},{key:"onFocus",value:function e(){this.stopListeningToKeydown();this.props.resetSectionNavigation()}},{key:"onBlur",value:function e(){this.startListeningToKeydown();var t=this.getInputRef();t&&this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getInputRef",value:function e(){if(!this.textyRef.current)return null;return this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current}},{key:"restoreLegacyDraft",value:function e(){var t=this.props.channelId;var a=this.getInputRef();if(!t)return;if(Object(H["a"])())return;if(!a)return;var r=Object(Re["a"])(t);a.value(r||"");var n=Object(xe["b"])(t);n?a.setCursor(n.start,n.length):a.setCursorAtEnd()}},{key:"registerInput",value:function e(){var t=this;var a=this.props.channelId;if(!a)return;Object(ue["c"])({viewContext:ce["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:a,functions:{getContainer:function e(){var a=t.getInputRef();return a?a.container:null},isEmpty:function e(){var a=t.getInputRef();return a?a.isEmpty():null},clear:function e(){var a=t.getInputRef();a&&a.clear()},prependContents:function e(a){var r=t.getInputRef();r&&r.prependContents(a)},setContents:function e(a){var r=t.getInputRef();r&&r.setContents(a)},getContents:function e(){var a=t.getInputRef();return a?a.getContents():null},setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},getLength:function e(){var a=t.getInputRef();return a?a.getLength():null},getDisplayValue:function e(){var a=t.getInputRef();return a?a.displayValue():null},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},focusWithoutSettingCursor:function e(){var a=t.getInputRef();a&&a.focus()},hasFocus:function e(){var a=t.getInputRef();return!!a&&a.hasFocus()},isEnabled:function e(){var a=t.getInputRef();return!!a&&a.isEnabled()},getSelection:function e(){var a=t.getInputRef();return a?a.getSelection():null},insertContentsAtCursor:function e(a){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";var i=t.getInputRef();i&&i.insertContentsAtCursor(a,r,n)},setCursor:function e(a,r){var n=t.getInputRef();n&&n.setCursor(a,r)},setCursorAtEnd:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},setPlaceholder:function e(a){t.updatePlaceholder(a)},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)},openReactionPopoverForLastMessage:function e(){t.reactionPopoverRef.current&&t.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&0===r.index},isCursorAtEnd:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&r.index===a.getLength()}}})}},{key:"unregisterInput",value:function e(t){if(!t)return;Object(ue["d"])({viewContext:ce["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t})}},{key:"unmountPlaceholder",value:function e(){var t=this.getInputRef();if(!t)return;var a=t.container.querySelector(".ql-placeholder");a&&y.a.unmountComponentAtNode(a)}},{key:"updatePlaceholder",value:function e(t){var a=this.props,r=a.channelName,s=a.isSelfDm,l=a.teamId,c=a.channelId;var u=this.getInputRef();if(!u)return;var d=u.container.querySelector(".ql-placeholder");if(d){y.a.render(n.a.createElement(i["Provider"],{store:Object(o["f"])(l)},n.a.createElement(Ra,{channelId:c,channelName:r,forcePlaceholderText:t,isSelfDm:s})),d);var p=t||Ta({channelName:r,isSelfDm:s});var m=u.container.querySelector(".ql-editor");m.setAttribute("aria-label",p)}}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){if(!Object(Ee["a"])({e:t,isMenuVisible:Object(q["g"])()}))return;var a=Object(Ce["a"])(t.target,function(e){return e.classList.contains("p-threads_flexpane")});if(a)return;var r=this.getInputRef();Object(E["c"])()?setTimeout(function(){return r.focus()},0):r&&r.focus()}},{key:"startListeningToKeydown",value:function e(){if(this.shouldNotListenToKeyDownAgain)return;var t=this.props.userAttentionIsOnChat;if(!t)return;document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.useSendButton,i=a.featureWysiwygComposer,s=a.telemeter;var o=this.getInputRef();var l=o.value();var c=o.getContents();if(!Object(z["a"])(o.getContents(),{featureWysiwygComposer:i}))return null;Object(Me["a"])()&&s.mark("msg_input_try_to_submit");o.clear();n&&o.focus();return this.props.prepareAndSendMessage({channelId:r,text:l,delta:i?new O.a(c.contents):null,includeBroadcastKeywordWarning:true,includeAtMentionInviteWarning:true,includePrivateFileReshareWarning:true}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){o.isEmpty()&&o.setContents(c)})}},{key:"snippetCallback",value:function e(){var t=this.getInputRef();this.props.openSnippetDialog({initialChannelId:this.props.channelId,initialText:t.displayValue(),initialContents:t.getContents&&t.getContents(),fromPrompt:true,viewContext:ce["MESSAGE_CONTAINERS"].MESSAGE_PANE});t.clear()}},{key:"focus",value:function e(){var t=this.getInputRef();if(t){t.setCursorAtEnd();this.setState(function(){return{hasKeyboardFocus:true}})}}},{key:"blur",value:function e(){var t=this.getInputRef();t&&t.blur();this.onBlur()}},{key:"maybePullDownMessagePane",value:function e(t){this.props.maybePullDownMessagePane(t)}},{key:"handleContextBarError",value:function e(){this.props.maybePullDownMessagePane(false)}},{key:"renderContextBar",value:function e(){return n.a.createElement(Vt["a"],{onError:this.handleContextBarError},n.a.createElement(Gt,{maybePullDownMessagePane:this.maybePullDownMessagePane,key:this.props.channelId}))}},{key:"renderInput",value:function e(){var t=this.props,a=t.channelId,r=t.useSendButton,i=t.featureWysiwygComposer;var s=this.state.hasKeyboardFocus;var o="context-bar-text";var l=n.a.createElement(V["c"],{channelId:a,viewContext:ce["MESSAGE_CONTAINERS"].MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:r,useLegacyDrafts:!Object(H["a"])(),ref:this.textyRef,enableEmojiButton:true,enableMentionButton:true,enableComposerButton:i,enableSendButton:false,focusOnMount:true,focusOnPaste:true,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,showFocusOutline:s,tabIndex:1,fileButtonTabIndex:2,ariaDescribedBy:o});if(Object(H["a"])())return n.a.createElement(K["a"],{ref:this.reactionPopoverRef,channelId:a},l);return l}},{key:"render",value:function e(){var t=this.props,a=t.typingNames,r=t.useSendButton,i=t.completeJoinerOnboardingCallback,s=t.userCanPost,o=t.channel,l=t.channelId,c=t.teamId,u=t.shouldShowTractorMessageCoachmark,d=t.setTractorMessageCoachmarkVisibility,p=t.shouldShowJoinerLandingPlaceCoachmark,m=t.shouldShowAtMentionsInviteCoachmark,h=t.shouldShowWorkflowItemCoachmark,v=t.featureWysiwygComposer,f=t.featureAtMentionInvites;var b=this.state,g=b.textyValue,_=b.textyWysiwygLength;var y=null;p?y=n.a.createElement(ae,{completeJoinerOnboarding:i}):u?y=n.a.createElement(oe,{setTractorMessageCoachmarkVisibility:d}):h?y=n.a.createElement(ae,{completeJoinerOnboarding:function e(){return Object(D["c"])(false)}}):m&&(y=n.a.createElement(Oe,{featureWysiwygComposer:v}));if(this.props.isUnavailable)return null;if(l&&Object(S["isPreview"])(o))return n.a.createElement(wa,{channelId:this.props.channelId});if(l&&!s)return n.a.createElement(la,{teamId:c,channelId:this.props.channelId});var k=n.a.createElement("div",{className:"p-workspace__message_pane_input"},n.a.createElement("div",{className:"p-workspace__message_pane_input_inner"},this.renderContextBar(),this.renderInput(),n.a.createElement(Y["a"],{typingNames:a,snippetCallback:this.snippetCallback,inputText:g,wysiwygTextLength:_})),r&&n.a.createElement(V["b"],{isDisabled:!g,sendMessage:this.sendMessage,className:"p-workspace__message_pane_send",tabIndex:1}));if(Object(H["a"])()){if(f||y)return n.a.createElement(le["b"],{coachmarkElement:y,orientation:"top",style:{width:"100%"}},k);return k}return n.a.createElement(J["a"],{component:this,order:2},k)}}]);return t}(r["Component"]);Fa.displayName="MessagePaneInput";Fa.defaultProps=Da;var La=function e(t){var a=Object(I["a"])(t);var r=Object(j["e"])(t,a);var n=Object(f["map"])(Object(A["getTyperIdsInChannel"])(t,a),function(e){return Object(N["e"])(t,e)});n.sort(function(e,a){return Object(C["r"])(Object(W["getPrefCompliantMemberNameLowerCase"])(t,e),Object(W["getPrefCompliantMemberNameLowerCase"])(t,a))});var i=Object(w["s"])(t,a)||Object(pe["isFeatureEnabled"])(t,"feature_announce_only_websocket")&&Object(S["getHasReadOnlyDraft"])(t,r);var s=n.map(function(e){return Object(W["getPrefCompliantMemberName"])(t,e)});var o=Object(pe["getCurrentUserId"])(t);return{channelId:a,channel:r,channelName:Object(S["getDisplayNameForChannel"])(t,r,{imIncludeAtSign:false}),isSelfDm:Object(S["isYou"])(o,r),userCanPost:i&&!Object(S["isArchived"])(r),typingNames:s.length>0?s:Ie["a"],useSendButton:Object(M["h"])(t,"msg_input_send_btn"),userAttentionIsOnChat:Object(G["e"])(t),composerVisible:(Object(Q["a"])(t)||"composer_toolbar"===Object(Pe["getGroupForUser"])(t,"composer_toolbar"))&&Object(Te["isComposerVisible"])(t),teamId:Object(L["b"])(t),featureWysiwygComposer:Object(Q["a"])(t),featureAtMentionInvites:Object(pe["isFeatureEnabled"])(t,"feature_at_mention_invites"),isUnavailable:Object(S["isUnavailable"])(t,r),telemeter:Object(we["c"])({state:t}),shouldShowAtMentionsInviteCoachmark:Object(x["isAtMentionCoachmarkVisibile"])(t),shouldShowTractorMessageCoachmark:Object(R["c"])(t),shouldShowJoinerLandingPlaceCoachmark:Object(R["a"])(t),shouldShowWorkflowItemCoachmark:Object(F["l"])(t)}};var Ba={prepareAndSendMessage:function e(){return T["a"].apply(void 0,arguments)},currentUserStartedTyping:function e(){return A["currentUserStartedTyping"].apply(void 0,arguments)},currentUserEndedTyping:function e(){return A["currentUserEndedTyping"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return B["a"].apply(void 0,arguments)},openSnippetDialog:function e(){return U["a"].apply(void 0,arguments)},completeJoinerOnboardingCallback:function e(){return P["a"].apply(void 0,arguments)},setTractorMessageCoachmarkVisibility:function e(){return D["g"].apply(void 0,arguments)}};var Ua=Object(H["a"])()?Object(je["a"])(Fa,"MessagePaneInput",{index:5}):Fa;var qa=Object(i["connect"])(La,Ba)(Ua);var Wa=qa;var Ha=a(161);var Ga=function e(t,a){if(!t)throw new Error("mountMessagePaneInput must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(Ha["a"],null,n.a.createElement(Wa,null))),a)};var Va=Ga;var Ka=a(46);Object(Ka["a"])("interop.mountMessagePaneInput",Va)},1904:function(e,t,a){var r=a(3171),n=a(3173);function i(e,t,a){return r(n,e,t,a)}e.exports=i},1905:function(e,t,a){var r=a(1906),n=a(539);function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=r(e.prototype),i=e.apply(a,t);return n(i)?i:a}}e.exports=i},1906:function(e,t,a){var r=a(539);var n=Object.create;var i=function(){function e(){}return function(t){if(!r(t))return{};if(n)return n(t);e.prototype=t;var a=new e;e.prototype=void 0;return a}}();e.exports=i},1907:function(e,t){function a(e,t){var a=-1,r=e.length;t||(t=Array(r));while(++a<r)t[a]=e[a];return t}e.exports=a},1908:function(e,t,a){var r=a(2207),n=a(2410);function i(e,t,a,i){var s=!a;a||(a={});var o=-1,l=t.length;while(++o<l){var c=t[o];var u=i?i(a[c],e[c],c,a,e):void 0;void 0===u&&(u=e[c]);s?n(a,c,u):r(a,c,u)}return a}e.exports=i},1909:function(e,t,a){},1912:function(e,t,a){},1913:function(e,t,a){"use strict";t["a"]=function(e){if(!e)return false;if(e.metaKey||e.ctrlKey)return false;return e.key&&1===e.key.length}},1914:function(e,t,a){},1936:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a.n(v);var b=a(9);var g=a(6);var _=a(21);var y=a(364);var k=a(1061);var O=a(52);var C=a(753);var E=a(261);var S=new g["b"]("user_groups");var w={selectedChannels:m["b"].array,onChange:m["b"].func,featureSonicUserGroups:m["b"].bool.isRequired};var I={selectedChannels:[],onChange:v["noop"]};var j=100;var T=32;var A={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:false,includeMpims:false,includeArchived:false,searchPreviousNames:false,onlyVisibleMpims:false,includeRequired:true}},limit:j,tiered:true,sort:{frecency:true}};var N=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getSelectedOptions",value:function e(){return(this.props.selectedChannels||[]).map(function(e){return{value:e}})}},{key:"renderChannelOption",value:function e(t){return p.a.createElement(k["a"],{channel:t.entity,channelId:t.value})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.onChange;var a=S.t("Default channels");var r=S.t("Group members are added to these channels automatically.");return p.a.createElement(O["a"],{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:a,optional:true},p.a.createElement(y["d"],{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:T,onSelectedItemsChange:t,selectId:"user_group_default_channel_select",searcherOptions:A}),p.a.createElement(C["a"],null,r))}}]);return t}(d["PureComponent"]);N.displayName="UserGroupDefaultChannelPicker";N.defaultProps=I;var M=function e(t){return{getChannelById:function e(a){return Object(_["e"])(t,a)},featureSonicUserGroups:Object(b["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var P={search:E["e"]};t["a"]=Object(h["connect"])(M,P)(N)},1943:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(2);var v=a.n(h);var f=a(0);var b=a(6);var g=a(69);var _=a(349);var y=a(152);var k=a(116);var O=a(23);var C=a(54);var E=a(9);var S=a(38);var w=a(137);var I=a(129);var j=a(11);var T=a(606);var A=a(581);var N=a(1315);var M=a(2074);var P=a(1209);var R=a(18);var x=a(39);var D=new b["b"]("do_not_disturb");var F={snoozeNotifications:f["b"].func.isRequired,currentChannel:f["b"].object,menuProps:f["b"].object,openDndDialog:f["b"].func,openChannelNotificationPrefsModal:f["b"].func,openPrefsModal:f["b"].func,clogger:f["b"].object,setUserPrefByApi:f["b"].func,showNotificationScheduleNewBadge:f["b"].bool,featureGranularDnd:f["b"].bool,featureOfflineMode:f["b"].bool.isRequired,isOffline:f["b"].bool.isRequired};var L={currentChannel:{},menuProps:{},openDndDialog:h["noop"],openChannelNotificationPrefsModal:h["noop"],openPrefsModal:h["noop"],clogger:{track:h["noop"]},setUserPrefByApi:h["noop"],showNotificationScheduleNewBadge:false,featureGranularDnd:false};var B=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(a);a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(a);return a}s()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(j["isIm"])(a))return null;var r=p.a.createElement(y["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=D.rt("Settings for {name}\u2026",{name:p.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return p.a.createElement(g["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id,entryPoint:"dnd_disabled_menu"})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.menuProps,n=a.clogger,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge,o=a.featureOfflineMode,l=a.isOffline;var c=void 0;var u=void 0;var d=void 0;if(i){c=D.t("Do Not Disturb allows you to pause your Slack notifications");u=p.a.createElement("span",{className:"p-dnd_menu__new_pill"},D.t("NEW"));d=s?p.a.createElement("span",null,D.t("Notification schedule\u2026")," ",u):D.t("Notification schedule\u2026")}return p.a.createElement(g["f"],r,p.a.createElement(g["c"],{label:i?D.t("Do Not Disturb"):D.t("Pause notifications")}),i&&p.a.createElement(C["c"],{tip:c,position:"right",zIndex:"above_fs"},p.a.createElement(k["a"],{className:"p-dnd_menu_question_button"},p.a.createElement(O["b"],{type:"question-circle"}))),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("30 minutes"),onSelected:function e(){var a=30;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:30m"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_30_MINUTES,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("1 hour"),onSelected:function e(){var a=60;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:1hr"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_1_HOUR,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("2 hours"),onSelected:function e(){var a=120;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:2hr"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_2_HOURS,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("4 hours"),onSelected:function e(){var a=240;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:4hr"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_4_HOURS,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until tomorrow"),onSelected:function e(){var a=Object(P["d"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:tomorrow"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_TOMORROW,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until next week"),onSelected:function e(){var a=Object(P["c"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:week"});n.track(R["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["i"].DURATION_NEXT_WEEK,dnd_snooze_type:R["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Custom\u2026"),onSelected:function e(){t.props.openDndDialog();n.track(R["l"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["d"],null),p.a.createElement(g["b"],{label:i?d:D.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&p.a.createElement(g["d"],null),!i&&this.renderSettingsMenuItem(),!i&&p.a.createElement(g["b"],{label:D.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}))}}]);return t}(d["PureComponent"]);B.displayName="DndDisabledMenu";B.defaultProps=L;var U=function e(t){return{clogger:Object(x["a"])({state:t}),featureGranularDnd:Object(E["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(S["h"])(t,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(E["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(w["c"])(t)}};var q=function e(t){return{snoozeNotifications:function e(a){return t(Object(T["e"])(a))},openDndDialog:function e(){return t(Object(M["a"])())},openChannelNotificationPrefsModal:function e(a){return t(Object(N["a"])(a))},setUserPrefByApi:function e(a){return t(Object(I["d"])(a))},openPrefsModal:function e(a){return t(Object(A["a"])(a))}}};t["a"]=Object(m["connect"])(U,q)(B)},1957:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(131);var n=a(82);var i=a(103);var s=a(105);var o=a(20);function l(e,t){var a=[o["MESSAGE_CONTAINERS"].MESSAGE_PANE,o["MESSAGE_CONTAINERS"].CHANNEL_DETAILS_FLEXPANE];if(a.includes(t)||!t){var l=Object(n["a"])(e);if(Object(r["a"])(l))return{channelId:l}}else if(t===o["MESSAGE_CONTAINERS"].THREADS_FLEXPANE){var c=Object(i["e"])(e);return Object(s["decodeThreadKey"])(c[0])}return{}}},1961:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var r=a(0);var n=a(1);var i=a.n(n);var s=a(230);var o=a(28);var l=a(3079);var c=a.n(l);var u={externalTeam:r["b"].object};var d={externalTeam:void 0};function p(e){var t=e.externalTeam;var a=Object(o["getTeamDisplayName"])(t);var r=Object(o["getTeamId"])(t);if(!t||!a)return null;return i.a.createElement("div",{className:"p-app_external_team_banner"},i.a.createElement("span",{className:"p-app_external_team_banner__team_name overflow_ellipsis bold"},a),r&&i.a.createElement(s["b"],{id:r,className:"p-app_external_team_banner__team_icon"}))}p.displayName="AppExternalTeamBanner";p.defaultProps=d},1962:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(109);var o=a(6);var l=a(2);var c=a.n(l);var u=a(187);var d=a(232);var p=a(1218);var m=a(456);var h=new o["b"]("app_card");var v={appType:r["b"].string,memberId:r["b"].string,appName:r["b"].string,creatorsId:r["b"].string,appHomeTeamDisplayName:r["b"].string,isError:r["b"].bool.isRequired,isWorkflowApp:r["b"].bool,installerIsYou:r["b"].bool,onMemberClick:r["b"].func,featureAddAppHomeTeamName:r["b"].bool,displayCustomCreator:r["b"].bool};var f={appType:void 0,memberId:void 0,appHomeTeamDisplayName:void 0,appName:"this app",creatorsId:void 0,isWorkflowApp:false,installerIsYou:false,onMemberClick:l["noop"],featureAddAppHomeTeamName:false,displayCustomCreator:false};function b(e){var t=e.displayCustomCreator,a=e.creatorsId,r=e.appType,n=e.memberId,s=e.appName,o=e.isError,l=e.isWorkflowApp,c=e.installerIsYou,v=e.onMemberClick,f=e.appHomeTeamDisplayName,b=e.featureAddAppHomeTeamName;var g=Object(d["a"])(),_=g.featureBuilderIsWorkflowApp;var y=void 0;if(c)y=_&&l&&t?h.rt("Created with Workflow Builder by you."):_&&l?h.rt("Created by Workflow Builder."):h.rt("You added {appName} to this workspace.",{appName:s});else{var k=i.a.createElement(m["a"],{noMemberCard:true,id:n,onClick:function e(t){t.preventDefault();Object(u["i"])(n);v()}});y=_&&l&&t?h.rt("Created with Workflow Builder by <b>{appCreator}</b>.",{appCreator:i.a.createElement(p["a"],{id:a})}):_&&l?h.rt("Created by Workflow Builder."):f&&b?h.rt("{appName} is installed on {appHomeTeamDisplayName}.",{appHomeTeamDisplayName:f,appName:s}):"custom_integration"===r?h.rt("{installer} added this custom integration to this workspace.",{installer:k,appName:s}):"slack"===r?h.rt("{installer} configured {appName} to post in this channel.",{installer:k,appName:s}):h.rt("{installer} added {appName} to this workspace.",{installer:k,appName:s})}return o?null:i.a.createElement("div",{className:"p-app_profile_card__installation_summary","data-qa":"app_card_installation_summary"},i.a.createElement("span",{"data-qa-app-profile-card-installation-summary":true},y))}b.defaultProps=f;t["a"]=Object(s["pure"])(b)},1963:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(13);var o=a.n(s);var l=a(109);var c=a(0);var u=a(9);var d=a(16);var p=a(6);var m=a(3095);var h=a.n(m);var v=new p["b"]("member_profile");var f={className:c["b"].string,member:c["b"].object.isRequired,featureEasyProfileImgDownload:c["b"].bool.isRequired,memberName:c["b"].string.isRequired};var b={className:void 0};function g(e){var t=e.className,a=e.member,r=e.featureEasyProfileImgDownload,i=e.memberName;var s=a.profile.image_512;var l=a.profile.image_48;var c=r?"url('"+l+"')":"url('"+s+"'), url('"+l+"')";var u=r?v.t("Profile photo for {member_name}",{member_name:i}):"";return n.a.createElement("div",{className:o()(t,"p-member_profile_picture"),style:{backgroundImage:c}},r&&n.a.createElement("img",{src:s,alt:u,className:"p_member_profile_picture__img"}))}g.displayName="MemberProfilePicture";g.defaultProps=b;var _=function e(t,a){var r=a.member;return{featureEasyProfileImgDownload:Object(u["isFeatureEnabled"])(t,"feature_easy_profile_img_download"),memberName:Object(d["getPrefCompliantMemberName"])(t,r)}};t["a"]=Object(i["connect"])(_)(Object(l["pure"])(g))},1965:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(13);var s=a.n(i);var o=a(109);var l=a(0);var c=a(6);var u=a(28);var d=a(16);var p=a(230);var m=a(23);var h=a(54);var v=a(232);var f=a(3098);var b=a.n(f);var g=new c["b"]("team");function _(e){return n.a.createElement(h["c"],{position:"bottom-right",tip:e,zIndex:"above_fs"},n.a.createElement(m["b"],{type:"question-circle"}))}_.displayName="renderTooltip";var y={className:l["b"].string,member:l["b"].object.isRequired,team:l["b"].object.isRequired};var k={className:void 0};function O(e){var t=e.className,a=e.member,r=e.team;var i=Object(v["a"])(),o=i.featureModernProfileFlexpane;if(!o)return null;var l=s()(t,"p-member_profile_restriction");var h=Object(d["isInvitedUser"])(a)&&g.t("This person hasn\u2019t finished signing up. They may receive messages via email.");if(Object(d["isExternal"])(a))return n.a.createElement("div",{className:l},n.a.createElement(p["b"],{className:"p-member_profile_restriction__team_icon",id:r.id,size:16}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u["getTeamDisplayName"])(r)));if(Object(d["isDeleted"])(a))return n.a.createElement("div",{className:l},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"archived-channel"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"})));if(Object(d["isUltraRestricted"])(a))return n.a.createElement("div",{className:l},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"single-channel-guest"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d["isInvitedUser"])(a)?g.t("Invited Guest"):g.t("Single-Channel Guest")),_(h||g.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(Object(d["isRestricted"])(a))return n.a.createElement("div",{className:l},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"restricted-user"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d["isInvitedUser"])(a)?g.t("Invited Guest"):g.t("Multi-Channel Guest")),_(h||g.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(Object(d["isOwner"])(a))return n.a.createElement("div",{className:l},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Owner of {teamName}",{teamName:Object(c["q"])(Object(u["getTeamDisplayName"])(r))})));if(Object(d["isAdmin"])(a))return n.a.createElement("div",{className:l},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Workspace Admin")));if(Object(d["isInvitedUser"])(a))return n.a.createElement("div",{className:l},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"envelope-o"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Invited Member")),_(h));return null}O.defaultProps=k;t["a"]=Object(o["pure"])(O)},1966:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(6);var o=a(28);var l=a(2425);var c=a.n(l);var u=new s["b"]("unavailable_channel");var d={memberTeam:i["b"].object};var p={memberTeam:void 0};function m(e){var t=e.memberTeam;return n.a.createElement("div",{className:"p-member_profile_card__special_text"},u.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:n.a.createElement("strong",null,Object(o["getTeamDisplayName"])(t))}))}m.displayName="MemberProfileUnavailable";m.defaultProps=p;t["a"]=m},1967:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(6);var o=a(253);var l=a(232);var c=new s["b"]("team");var u={member:i["b"].object};var d={member:void 0};function p(e){var t=e.member;var a=Object(l["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var i=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return n.a.createElement("div",{className:"p-member_profile_card__special_text"},n.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:n.a.createElement(o["a"],{id:t.id})}))," ",i)}p.displayName="MemberProfileStranger";p.defaultProps=d;t["a"]=p},1969:function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(17);var s=a(9);var o=a(22);var l=a(29);var c=a(122);var u=a(141);var d=a(103);var p=a(1970);var m=a(1592);var h=a(1214);var v=a(32);var f=a(14);var b=6e4;var g=function e(t){var a=Object(l["d"])(t);if(Object(v["a"])()&&!Object(d["j"])(a))return Promise.resolve();var n=Object(s["isFeatureEnabled"])(a,"feature_vitess_sidebar")?m["a"]:p["a"];return Object(l["b"])(t,n({reason:"requestOfflineCounts"})).tap(function(){return Object(l["b"])(t,Object(u["resetReachedEnd"])())}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l["b"])(t,Object(h["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=Object(r["compact"])(Object(r["concat"])(e.channels,e.groups));Object(l["b"])(t,Object(c["reconcileChannelAccess"])({channels:a}))}).catch(function(e){Object(f["a"])({state:a}).error("Failed to fetch offline users counts for "+t+": "+e)})};var _=Object(r["throttle"])(g,b,{trailing:false});var y=Object(i["b"])("Request offline users counts",function(e,t){return Object(s["isFeatureEnabled"])(t(),"feature_degraded_send")&&_(Object(o["b"])(t()))});y.meta={name:"requestOfflineCounts",key:"actionsRequestOfflineCountsRequestOfflineCounts",description:"Request offline users counts"};y.propTypes={};t["a"]=y;var k={fetchOfflineUsersCounts:g}},1973:function(e,t,a){},1975:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(13);var s=a.n(i);var o=a(0);var l=a(450);var c=a(3169);var u=a.n(c);var d={inactive:o["b"].bool,dimension:o["b"].number,team:o["b"].shape({name:o["b"].string,domain:o["b"].string,icon:o["b"].object}).isRequired};var p={inactive:false,dimension:34};var m=function e(t){var a=t.team,r=t.inactive,i=t.dimension;return n.a.createElement("div",{className:"p-ent_workspace_row_item"},n.a.createElement(l["a"],{entityType:"workspace",dimension:i,entityData:a,customClasses:s()("p-ent_workspace_row_item__icon",{"p-ent_workspace_row_item__icon--inactive":r})}),n.a.createElement("div",{className:"p-ent_workspace_row_item__text"},n.a.createElement("div",{className:"p-ent_workspace_row_item__name"},a.name),n.a.createElement("div",{className:"p-ent_workspace_row_item__domain"},a.domain+".slack.com")))};m.displayName="WorkspaceRowItem";m.defaultProps=p;t["a"]=m},1976:function(e,t,a){"use strict";var r=a(137);var n=a(292);var i=a(70);var s=a(17);var o=a(301);var l=a(25);var c=a(16);var u=a(14);var d=a(784);var p=2e4;var m="TICKLE-MS";var h=Object(s["b"])("Ping the message server if necessary",function(e,t){var a=t();var s=Object(l["b"])(a);var h=Object(u["a"])({state:a});if(!s){h.info(m,"Skipping tickle because no user exists");return}if(!Object(i["isConnected"])(a))return;if(Object(c["getMemberManualPresence"])(s)===n["PRESENCE_AWAY"])return;var v=Date.now()-Object(r["g"])(a);if(v<p)return;e(Object(o["send"])({type:"tickle"})).catch(function(a){var r=a&&a.message===d["c"];if(!r){h.warn(m,"Send tickle event failed with error = "+a);return}h.warn(m,"Sending tickle event failed; will try again the next time we get reconnected");Object(i["promiseToHaveOpenWebSocket"])(t()).then(function(){h.info(m,"Retrying tickle event that failed earlier");e(Object(o["send"])({type:"tickle"})).then(function(){h.info(m,"Tickle sent successfully after retry")}).catch(function(e){h.warn(m,"Tickle retry failed with error: "+e)})})})});h.meta={name:"maybeTickleMS",key:"infraTickleMsMaybeTickleMS",description:"Ping the message server if necessary"};t["a"]=h},1979:function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(12);var o=a(2);var l=a.n(o);var c=a(291);var u=a(22);var d=a(529);var p={formattedDescription:r["b"].string,clogLinkClick:r["b"].func};var m={formattedDescription:"",clogLinkClick:o["noop"]};var h=function e(t){var a=t.formattedDescription,r=t.clogLinkClick;var s=Object(n["useCallback"])(function(e){var t=e&&e.target&&e.target.href;if(t&&"A"===e.target.tagName){r();e.preventDefault();Object(d["a"])(e.target.href)}},[r]);if(!a)return null;return i.a.createElement("div",{onClick:s,dangerouslySetInnerHTML:{__html:a}})};h.displayName="BaseFormattedAppDescription";h.defaultProps=m;var v=function e(t,a){var r=a.formattedDescription;return{formattedDescription:Object(c["a"])(t,{messageText:r,teamId:Object(u["b"])(t)})}};t["a"]=Object(s["connect"])(v)(h)},1980:function(e,t,a){"use strict";var r=a(37);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(13);var y=a.n(_);var k=a(2);var O=a.n(k);var C=a(97);var E=a(420);var S=a(54);var w=a(6);var I=a(3341);var j=a.n(I);var T=new w["b"]("flexpane");var A=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.closeButtonRef=f.a.createRef();a.focus=a.focus.bind(a);return a}u()(t,[{key:"focus",value:function e(){var t=this.closeButtonRef.current;t&&t.focus()}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.className,n=t.onOptionsClick,i=t.optionsHref,o=t.optionsIconType,l=t.optionsTooltipText,c=t.renderSecondary,u=t.clientTheme;var d=n||i;var p="dark"===u?{backgroundStyle:"dark"}:{};var m=d?S["a"]:1e3;var h=c();var v=l||T.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return f.a.createElement("div",{className:y()("p-flexpane_header",r)},f.a.createElement("div",{className:"p-flexpane_header__primary"},f.a.createElement("div",{className:"p-flexpane_header__primary_content"},a),d&&f.a.createElement(S["c"],{delay:m,tip:v},f.a.createElement(E["a"],s()({"aria-label":T.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:o,href:i,onClick:n},p))),f.a.createElement(S["c"],{delay:m,tip:T.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},f.a.createElement(E["a"],s()({"aria-label":T.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef},p)))),h&&f.a.createElement("div",{className:"p-flexpane_header__secondary"},h))}}]);return t}(v["PureComponent"]);A.displayName="FlexpaneHeader";A.defaultProps={children:null,className:void 0,closeFlexpane:k["noop"],onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:k["noop"]};var N=Object(g["connect"])(null,{closeFlexpane:C["a"]})(function(e){var t=e.forwardedRef,a=n()(e,["forwardedRef"]);return f.a.createElement(A,s()({ref:t},a))});t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(N,s()({forwardedRef:t},e))})},1981:function(e,t,a){"use strict";var r=a(11);var n=a(213);var i=function e(t,a){return Object(n["isAppSpaceEnabled"])(t)&&Object(r["isImWithApp"])(t,a)};t["a"]=i},2002:function(e,t,a){"use strict";var r=a(0);var n=a(17);var i=a(25);var s=a(16);var o=a(99);var l=a(1287);var c=Object(n["b"])("Adds app to channel by member id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.memberId,n=a.channelId;if(!r||!n)return;var c=Object(i["e"])(t(),r);Object(s["isAppUser"])(c)?e(Object(l["a"])({appUserId:r,channelId:n,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(o["L"])({channelId:n,users:r}))});c.meta={name:"addAppToChannelByMemberId",key:"actionsAddAppToChannelByMemberIdAddAppToChannelByMemberId",description:"Adds app to channel by member id"};c.propTypes={memberId:r["b"].string.isRequired,channelId:r["b"].string.isRequired};t["a"]=c},2003:function(e,t,a){"use strict";var r=a(26);var n=a.n(r);var i=a(0);var s=a(1);var o=a.n(s);var l=a(13);var c=a.n(l);var u=a(109);var d=a(330);var p=a(6);var m=a(54);var h=a(3507);var v=a.n(h);var f=10;var b=new p["b"]("apps_browser");var g={apps:i["b"].arrayOf(i["b"].object),isFirefoxAndWindows:i["b"].bool,isFirefoxAndMac:i["b"].bool,isInternetExplorer:i["b"].bool,featureM11nAppsBrowser:i["b"].bool};var _={apps:[],isFirefoxAndWindows:false,isFirefoxAndMac:false,isInternetExplorer:false,featureM11nAppsBrowser:false};var y=function e(t){var a=t.apps,r=t.isFirefoxAndWindows,i=t.isFirefoxAndMac,l=t.isInternetExplorer,u=t.featureM11nAppsBrowser;if(!u)return null;if(a.length>f)return null;var p=[].concat(n()(a),n()(Array(f-a.length)));var h=p.map(function(e,t){var a=!e;var n="limit-apps-"+t;var s="bottom";0===t?s="bottom-left":t===f-1&&(s="bottom-right");var u=c()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":a,is_ff_and_win:r,is_ff_and_mac:i,is_ie:l});return o.a.createElement(m["c"],{key:n,tip:a?b.t("Try a new app"):e.name,position:s,offsetY:17},o.a.createElement("div",{className:u,"data-qa":a?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!a&&o.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(d["b"])(e,24),alt:""})))});var v=p.map(function(e,t){if(0===t)return null;var a="color-meter-"+t;var r=!e;var n=c()({first:1===t,meter_first_green:t<4&&!r,meter_second_green:4===t&&!r,meter_third_green:5===t&&!r,meter_fourth_green:6===t&&!r,meter_yellow:7===t&&!r,meter_orange:8===t&&!r,meter_red:9===t&&!r,on:!r,off:r&&1!==t});return o.a.createElement("li",{className:n,key:a})});var g=c()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:r});return o.a.createElement(s["Fragment"],null,o.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},h),o.a.createElement("ul",{className:g},v))};y.displayName="AppLimitMeter";y.defaultProps=_;t["a"]=Object(u["pure"])(y)},2004:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(13);var c=a.n(l);var u=a(0);var d=a(32);var p=a(9);var m=a(6);var h=a(54);var v=new m["b"]("sonic_pilot");function f(e){var t=e.children,a=e.featureSonicPlaceholderLabels,r=e.unstyled,i=e.tooltipPosition;if(!a)return t;if(Object(d["a"])()){var o=s.a.cloneElement(t,n()({},t.props,{className:c()(t.props.className,{"c-button--sonic-placeholder":!r,"c-button-unstyled--sonic-placeholder":r})}),t.props.children);return s.a.createElement(h["c"],{tip:s.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},v.t("Coming soon")),position:i||"top",zIndex:"above_fs"},o)}return t}f.defaultProps={unstyled:false,tooltipPosition:void 0};var b=function e(t){return{featureSonicPlaceholderLabels:Object(p["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};t["a"]=Object(o["connect"])(b)(f)},2005:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(17);var n=a(0);var i=a(243);var s=a(781);var o=a(761);var l=Object(r["b"])("toggle the omniswitcher using command+k",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.key;Object(i["isSearchAutocompleteOpen"])(t())?e(Object(o["a"])()):e(Object(s["h"])({key:r}))});l.meta={name:"toggleFromQuickSwitcherCmd",key:"actionsUniversalSearchToggleFromToggleFromQuickSwitcherCmd",description:"toggle the omniswitcher using command+k"};l.propTypes={key:n["b"].string.isRequired}},2006:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(49);var n=a.n(r);var i=a(17);var s=a(129);var o=a(392);var l=Object(i["b"])("Completes joiner onboarding",function(){var e=Object(r["method"])(function(e){e(Object(o["b"])(false));e(Object(o["c"])(false));e(Object(s["c"])({onboarding_complete:true,seen_welcome_2:true}))});return function(t){return e.apply(this,arguments)}}());l.meta={name:"completeJoinerOnboarding",key:"onboardingStoreThunksCompleteJoinerOnboardingCompleteJoinerOnboarding",description:"Completes joiner onboarding"}},2007:function(e,t,a){"use strict";var r=a(10);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(6);var f=a(0);var b=a(13);var g=a.n(b);var _=a(3535);var y=a.n(_);var k=new v["b"]("unread");var O={clientTheme:f["b"].oneOf(["light","dark"])};var C={clientTheme:"light"};var E=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={slow:false};a.timer=null;return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this;this.timer=setTimeout(function(){t.setState(function(){return{slow:true}})},5e3)}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.timer)}},{key:"render",value:function e(){var t=this.props.clientTheme;var a=k.t("Loading messages...");var r=k.t("Still loading... sorry for the long wait!");var i=g()("p-message_container_loading",n()({},"p-message_container_loading--"+t,"light"!==t));return h.a.createElement("div",{className:i,"data-qa":"message_container_loading"},h.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?r:a))}}]);return t}(h.a.Component);E.displayName="MessageContainerLoading";E.defaultProps=C;t["a"]=E},2008:function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(6);var c=a(27);var u=a(102);var d=a(3537);var p=a.n(d);var m=new l["b"]("threads");var h={tryAgain:o["b"].func,"data-qa":o["b"].string,children:o["b"].node};var v={tryAgain:r["noop"],"data-qa":"message_container_error",children:null};function f(e){var t=e.tryAgain,a=e["data-qa"],r=e.children;return s.a.createElement("div",{className:"p-message_container_error","data-qa":a},s.a.createElement("div",{className:"p-message_container_error__contents"},s.a.createElement("div",{className:"p-message_container_error__emoji"},s.a.createElement(u["b"],{text:":tropical_fish:",emojiSize:u["a"].LARGE})),s.a.createElement("p",{className:"p-message_container_error__msg"},r),s.a.createElement(c["d"],{type:"primary",onClick:t,"data-qa":a+"_try_again"},m.t("Try Again"))))}f.displayName="MessageContainerError";f.defaultProps=v;t["a"]=f},2011:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var r=a(2);var n=a.n(r);var i=a(6);var s=a(345);var o=a(88);var l=a(135);var c=a(351);var u=a(20);var d=new i["b"]("aria_msg_summary");function p(e){if(!e)return null;var t=[];var a=e.featureA11yMessageSummary,n=e.viewContext;var i=e.day,p=i.isFirstDay,m=i.isLastDay;var h=e.day.ts/1e3;var v=Object(o["a"])();var f=Object(o["a"])(v).subtract(1,"days");var b=Object(l["a"])(h,{returnMoment:true});var g=Object(c["a"])(v,b);var _=Object(c["a"])(f,b);var y=h&&Object(s["a"])(h,"{day_divider_pretty}");var k=!n||[u["MESSAGE_CONTAINERS"].MESSAGE_PANE,u["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,u["MESSAGE_CONTAINERS"].THREADS_VIEW,u["MESSAGE_CONTAINERS"].UNREAD_VIEW].includes(n);e.isFirstMsgForDay&&!e.isLastMsgForDay&&!p&&k&&(g?t.push(d.t("First message from today.",{day:y})):_?t.push(d.t("First message from yesterday.",{day:y})):t.push(d.t("First message from {day}.",{day:y})));e.isLastMsgForDay&&!e.isFirstMsgForDay&&!m&&k&&(g?t.push(d.t("Last message from today.",{day:y})):_?t.push(d.t("Last message from yesterday.",{day:y})):t.push(d.t("Last message from {day}.",{day:y})));(e.isLastMsgForDay&&e.isFirstMsgForDay&&!m&&!p||!k)&&(g?t.push(d.t("Message from today.",{day:y})):_?t.push(d.t("Message from yesterday.",{day:y})):t.push(d.t("Message from {day}.",{day:y})));e.isFirstUnreadMsg&&k&&t.push(d.t("First unread message."));e.isTombstone||t.push(d.t("{name} at {time}.",{name:e.name,time:e.time}));e.channelName&&!k&&t.push(a?d.t("In {channel}.",{channel:e.channelName}):e.channelName);t.push(e.text);e.reactionCount>0&&!e.isTombstone&&t.push(d.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(d.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&n!==u["MESSAGE_CONTAINERS"].STARS_FLEXPANE&&t.push(d.t("Message is starred."));e.isPinned&&n!==u["MESSAGE_CONTAINERS"].PINS_FLEXPANE&&t.push(d.t("Message is pinned."));e.attachmentCount>0&&t.push(d.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(r["unescape"])(t.join(" "))}},2012:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(109);var o=a(2);var l=a.n(o);var c=a(6);var u=a(197);var d=a(27);var p=a(1066);var m=new c["b"]("attachments");var h={isExpanded:i["b"].bool,onClick:i["b"].func,attachmentsOverLimitCount:i["b"].number};var v={isExpanded:false,onClick:o["noop"],attachmentsOverLimitCount:0};var f=function e(t){var a=t.isExpanded,r=t.onClick,i=t.attachmentsOverLimitCount;var s=function e(){return n.a.createElement("b",null,a?m.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):m.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:i,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"}))};return n.a.createElement(u["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(p["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(d["c"],{className:"c-message_attachment__over_limit_button",onClick:r},n.a.createElement("p",{className:"c-message_attachment__over_limit"},s())))))};f.displayName="MessageAttachmentOverLimitButton";f.defaultProps=v;t["a"]=Object(s["pure"])(f)},2013:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(73);var y=a(9);var k=a(42);var O=a(97);var C=a(6);var E=a(134);var S=new C["b"]("message");var w={ts:d["b"].string.isRequired,threadTs:d["b"].string.isRequired,channelId:d["b"].string.isRequired,latestReply:d["b"].string.isRequired,className:d["b"].string,showThread:d["b"].func,featureNewRepliesAfterBcast:d["b"].bool};var I={className:void 0,showThread:b["noop"],featureNewRepliesAfterBcast:false};var j=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}s()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.ts;t.preventDefault();this.props.showThread({channelId:r,threadTs:n,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.latestReply,n=t.featureNewRepliesAfterBcast;if(!n||!r)return null;if(r<=a)return null;var i=f()("c-message__broadcast_footer",this.props.className);return m.a.createElement(E["a"],{className:i,onClick:this.onClick},S.t("View newer replies"))}}]);return t}(p["PureComponent"]);j.displayName="ThreadBroadcastFooter";j.defaultProps=I;var T=function e(t,a){var r=a.channelId,n=a.threadTs;var i=Object(_["a"])(t,r,n);return{latestReply:Object(k["getLatestReply"])(i),featureNewRepliesAfterBcast:Object(y["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};t["a"]=Object(h["connect"])(T,{showThread:O["l"]})(j)},2014:function(e,t,a){"use strict";var r=a(17);var n=a(73);var i=a(21);var s=a(0);var o=a(14);var l=a(1078);var c=Object(r["b"])("log message to console (for debugging)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,s=a.ts;var c=t();var u=Object(n["a"])(c,r,s);var d=Object(i["e"])(c,r);if(u){Object(o["a"])({getState:t}).warn(u);e(Object(l["e"])({message:u,modelObject:d}))}});c.meta={name:"logMessage",key:"actionsLogMessageLogMessage",description:"log message to console (for debugging)"};c.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired};t["a"]=c},2015:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(1628);function n(e){return Object(r["a"])(e,function(e){return"A"===e.nodeName})}},2016:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(3);var n=a.n(r);var i=a(0);var s=a(34);var o=a(30);var l=a(484);var c=Object(o["a"])("Adds a reminder for a message via API call",function(e,t,a){var r=l["a"].generateAndEnqueue(t());var i=n()({},a,{client_token:r});return e(Object(s["a"])({method:"reminders.addFromMessage",args:i}))});c.meta={name:"addReminderForMessage",key:"fetchersMessageActionsApiAddReminderForMessage",description:"Adds a reminder for a message via API call"};c.propTypes={time:i["b"].oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:i["b"].string.isRequired,message_ts:i["b"].string.isRequired,respond_in_channel:i["b"].bool}},2017:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(545);var n=a(574);var i=a(73);var s=a(1568);function o(e,t){return function(a,o){var l=Object(i["a"])(o(),e,t);if(!l)return;a(Object(r["a"])({channelId:e,ts:t}));a(Object(n["d"])(l,t));var c=true;a(Object(s["a"])({channelId:e,msg:l,resent:c}))}}},2018:function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,n=e.isBroadcast,i=e.isCustomResponse,s=e.isSliHighlight;if(n)return"broadcast";if(t)return"pinned";if(a)return"starred";if(r)return"ephemeral";if(i)return"custom_response";if(s)return"sli_highlight";return}},2019:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(147);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(63);var f=a(219);function b(e){return function(t){p()(a,t);function a(t){n()(this,a);var r=l()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));r.uniqueId=Object(m["uniqueId"])();r.name=Object(m["snakeCase"])(e.name);r.telemeter=Object(v["a"])();r.logMetrics=r.telemeter&&Object(f["a"])(1);return r}s()(a,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_mount_mark_"+this.uniqueId,"react_"+this.name+"_mount")}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_update_mark_"+this.uniqueId);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_update_mark_"+this.uniqueId,"react_"+this.name+"_update")}}]);return a}(e)}},2021:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(6);var n=new r["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,a=e.pinnedBy,r=e.renderPinnedBy;if(a){if(a===t)return n.t("Pinned by you");return n.rt("Pinned by {member}",{member:r(a)})}return n.t("Pinned")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,a=void 0!==t&&t,r=e.renderStarButton,i=e.featureMessageLabelsCopy;if(a)return n.rt("<star>Added to your starred items</star>",null,r);if(i)return n.rt("<star>Starred</star>",null,r);return n.rt("<star>starred</star>",null,r)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,o=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,m=e.pinnedBy,h=e.renderPinnedBy,v=e.renderStarButton,f=e.renderHighlight,b=e.renderBroadcast,g=e.featureMessageLabelsCopy;if(r){if(!u&&!d)return n.t("Only visible to you");return null}if(g&&o){if(t&&a)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,featureMessageLabelsCopy:g}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},b);if(a)return n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:v,featureMessageLabelsCopy:g}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},b);if(t)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},b);return n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},b)}if(l){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,featureMessageLabelsCopy:g})});if(a)return n.rt("{starred} \u2219 Custom response",{starred:s({long:true,renderStarButton:v,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h})});return n.t("Custom response")}if(c){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,featureMessageLabelsCopy:g})});if(a)return n.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:s({long:true,renderStarButton:v,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h})});return n.rt("{highlight}",{highlight:f()})}if(t&&a)return n.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,featureMessageLabelsCopy:g})});if(t)return i({currentUserId:p,pinnedBy:m,renderPinnedBy:h});if(a)return s({long:true,renderStarButton:v,featureMessageLabelsCopy:g});return null}},2022:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(422);var y=a(54);var k=a(6);var O=a(23);var C=a(27);var E=a(118);var S=a(69);var w=new k["b"]("message");var I={channelId:d["b"].string.isRequired,ts:d["b"].string.isRequired,isHovered:d["b"].bool,sliHighlight:d["b"].shape({loading:d["b"].bool,isHighlight:d["b"].bool,feedbackOptions:d["b"].object,justification:d["b"].string,feedback:d["b"].string}),onSliHighlightsDefaultFeedback:d["b"].func,onSliHighlightsSecondaryFeedbackOption:d["b"].func};var j={isHovered:false,sliHighlight:null,onSliHighlightsDefaultFeedback:g.a.noop,onSliHighlightsSecondaryFeedbackOption:g.a.noop};var T=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSliHighlightsFeedbackDefaultPositive=a.onSliHighlightsFeedbackDefaultPositive.bind(a);a.onSliHighlightsFeedbackDefaultNegative=a.onSliHighlightsFeedbackDefaultNegative.bind(a);a.renderNegativeFeedbackMenu=a.renderNegativeFeedbackMenu.bind(a);return a}s()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("span",{className:"c-message__label__highlight_title"},w.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,a=t.isHovered,r=t.sliHighlight;var n="default_positive"===r.feedback;if(a){var i=f()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=f()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return m.a.createElement("span",null,w.t("Is this helpful?"),m.a.createElement(y["c"],{tip:n?w.t("Thank you!"):w.t("This was helpful")},m.a.createElement(C["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},m.a.createElement(O["b"],{type:"thumbs-up",size:"inherit",inline:true}))),m.a.createElement(y["c"],{tip:w.t("This wasn\u2019t helpful")},m.a.createElement(C["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},m.a.createElement(O["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return m.a.createElement(E["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("strong",null,w.t("What\u2019s not working about this highlight?"))," ",w.t("Let us know, and we\u2019ll adjust."),"\xa0",m.a.createElement(S["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},m.a.createElement(C["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_highlight_accent"},w.t("Give Feedback")," ",m.a.createElement(O["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var a=this;var r=this.props.sliHighlight.feedbackOptions;if(g.a.isEmpty(r))return null;return m.a.createElement(S["f"],t,g.a.map(r.negative,function(e){return m.a.createElement(S["b"],{key:e.args.ts,label:m.a.createElement(E["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return a.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(p["PureComponent"]);T.displayName="SliHighlightsMessageLabel";T.defaultProps=j;function A(e,t){var a=t.channelId,r=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(h["connect"])(null,A)(T)},2023:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(13);var d=a.n(u);var p=a(32);var m={regionId:c["b"].oneOf(["main","name","info"]).isRequired,className:c["b"].string,flex:c["b"].bool};var h={className:void 0,flex:false};function v(e){var t=e.regionId,a=e.className,r=e.flex,i=s()(e,["regionId","className","flex"]);if(Object(p["a"])())return null;var o=d()(a,{"p-classic_nav__page_header__legacy_drag_region":true,flex_one:r,channel_header_drag_region:true});return l.a.createElement("div",n()({},i,{className:o,"data-region":t}))}v.displayName="LegacyPageHeaderDragRegion";v.defaultProps=h;t["a"]=v},2025:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var r=a(1);var n=a.n(r);var i=a(0);var s=a(2);var o=a.n(s);var l=a(6);var c=a(134);var u=a(23);var d=a(2473);var p=a.n(d);var m=new l["b"]("comments");var h={toggleList:i["b"].func,commentCount:i["b"].number,expanded:i["b"].bool};var v={toggleList:s["noop"],commentCount:0,expanded:false};function f(e){var t=e.toggleList,a=e.commentCount,r=e.expanded;var i=r?m.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):m.t("See older comments");var s=r?"caret-down":"caret-right";return n.a.createElement("div",{className:"p-comment_list__toggle_container"},n.a.createElement(c["a"],{onClick:t,"aria-expanded":r},i),n.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},n.a.createElement(u["b"],{type:"comment-alt"}),n.a.createElement("span",{className:"p-comment_list__toggle_count"},a),n.a.createElement(u["b"],{type:s,className:"p-comment_list__toggle_caret"})))}f.displayName="CommentListToggle";f.defaultProps=v},2026:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a.d(t,"b",function(){return o});var r=a(24);var n=Object(r["b"])("TS.ui.needToBlockAtChannelKeyword");var i=Object(r["b"])("TS.ui.needToShowAtChannelWarning");var s=Object(r["b"])("TS.ui.showVersionInfo");var o=Object(r["b"])("TS.ui.teamSelectionChanged")},2027:function(e,t,a){"use strict";a.d(t,"a",function(){return n});a.d(t,"b",function(){return i});var r=a(24);var n=Object(r["b"])("TS.client.channel_header.calculateNoDragRegions");var i=Object(r["b"])("TS.client.channel_header.legacySetupDragRegions")},2028:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(6);var n=new r["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,a=e.previousChannelName,r=e.workspaceName,i=e.orgName,s=e.isOrgGlobalSharedPublicOrPrivateChannel,o=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,m=e.isPrivate,h=e.isNotMember,v=e.isMuted,f=e.isStarred,b=e.hasDraft;var g=function(){if(l&&r)return n.t("shared with {workspaceName}",{workspaceName:r});if(s&&i)return n.t("shared across all {orgName} workspaces",{orgName:i});if(o)return n.t("shared channel");return""}();var _=function(){if(c)return n.t("archived channel");if(u&&d&&p&&m&&h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&p&&m&&h&&v&&f&&b)return n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&p&&m&&h&&v&&f&&b)return n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&m&&h&&v&&f&&b)return n.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!p&&m&&h&&v&&f&&b)return n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&m&&h&&v&&f&&b)return n.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&m&&h&&v&&f&&b)return n.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&v&&f&&b)return n.t("private, not a member, muted, starred, has a draft message");if(u&&d&&p&&!m&&h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&p&&!m&&h&&v&&f&&b)return n.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&p&&!m&&h&&v&&f&&b)return n.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&v&&f&&b)return n.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!p&&!m&&h&&v&&f&&b)return n.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&v&&f&&b)return n.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&v&&f&&b)return n.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&v&&f&&b)return n.t("not a member, muted, starred, has a draft message");if(u&&d&&p&&m&&!h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&p&&m&&!h&&v&&f&&b)return n.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&p&&m&&!h&&v&&f&&b)return n.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&v&&f&&b)return n.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!p&&m&&!h&&v&&f&&b)return n.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&v&&f&&b)return n.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&v&&f&&b)return n.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&v&&f&&b)return n.t("private, muted, starred, has a draft message");if(u&&d&&p&&!m&&!h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&v&&f&&b)return n.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&v&&f&&b)return n.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&v&&f&&b)return n.t("has notifications, muted, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&v&&f&&b)return n.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&v&&f&&b)return n.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&v&&f&&b)return n.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&v&&f&&b)return n.t("muted, starred, has a draft message");if(u&&d&&p&&m&&h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&p&&m&&h&&!v&&f&&b)return n.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&p&&m&&h&&!v&&f&&b)return n.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&p&&m&&h&&!v&&f&&b)return n.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!p&&m&&h&&!v&&f&&b)return n.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!p&&m&&h&&!v&&f&&b)return n.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!p&&m&&h&&!v&&f&&b)return n.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&!v&&f&&b)return n.t("private, not a member, starred, has a draft message");if(u&&d&&p&&!m&&h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&p&&!m&&h&&!v&&f&&b)return n.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&p&&!m&&h&&!v&&f&&b)return n.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&!v&&f&&b)return n.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!p&&!m&&h&&!v&&f&&b)return n.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&!v&&f&&b)return n.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&!v&&f&&b)return n.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&!v&&f&&b)return n.t("not a member, starred, has a draft message");if(u&&d&&p&&m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&p&&m&&!h&&!v&&f&&b)return n.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&p&&m&&!h&&!v&&f&&b)return n.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&!v&&f&&b)return n.t("has notifications, private, starred, has a draft message");if(u&&d&&!p&&m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&!v&&f&&b)return n.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&!v&&f&&b)return n.t("current channel, private, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&!v&&f&&b)return n.t("private, starred, has a draft message");if(u&&d&&p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&!v&&f&&b)return n.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&!v&&f&&b)return n.t("has notifications, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&!v&&f&&b)return n.t("has unread messages, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&!v&&f&&b)return n.t("current channel, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!v&&f&&b)return n.t("starred, has a draft message");if(u&&d&&p&&m&&h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&p&&m&&h&&v&&!f&&b)return n.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&p&&m&&h&&v&&!f&&b)return n.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&p&&m&&h&&v&&!f&&b)return n.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!p&&m&&h&&v&&!f&&b)return n.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!p&&m&&h&&v&&!f&&b)return n.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!p&&m&&h&&v&&!f&&b)return n.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!p&&m&&h&&v&&!f&&b)return n.t("private, not a member, muted, has a draft message");if(u&&d&&p&&!m&&h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&p&&!m&&h&&v&&!f&&b)return n.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&p&&!m&&h&&v&&!f&&b)return n.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&p&&!m&&h&&v&&!f&&b)return n.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!p&&!m&&h&&v&&!f&&b)return n.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!p&&!m&&h&&v&&!f&&b)return n.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!p&&!m&&h&&v&&!f&&b)return n.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!p&&!m&&h&&v&&!f&&b)return n.t("not a member, muted, has a draft message");if(u&&d&&p&&m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&p&&m&&!h&&v&&!f&&b)return n.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&p&&m&&!h&&v&&!f&&b)return n.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&p&&m&&!h&&v&&!f&&b)return n.t("has notifications, private, muted, has a draft message");if(u&&d&&!p&&m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!p&&m&&!h&&v&&!f&&b)return n.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!p&&m&&!h&&v&&!f&&b)return n.t("current channel, private, muted, has a draft message");if(!u&&!d&&!p&&m&&!h&&v&&!f&&b)return n.t("private, muted, has a draft message");if(u&&d&&p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&p&&!m&&!h&&v&&!f&&b)return n.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&p&&!m&&!h&&v&&!f&&b)return n.t("has notifications, muted, has a draft message");if(u&&d&&!p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!p&&!m&&!h&&v&&!f&&b)return n.t("has unread messages, muted, has a draft message");if(u&&!d&&!p&&!m&&!h&&v&&!f&&b)return n.t("current channel, muted, has a draft message");if(!u&&!d&&!p&&!m&&!h&&v&&!f&&b)return n.t("muted, has a draft message");if(u&&d&&p&&m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&p&&m&&h&&!v&&!f&&b)return n.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&p&&m&&h&&!v&&!f&&b)return n.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&p&&m&&h&&!v&&!f&&b)return n.t("has notifications, private, not a member, has a draft message");if(u&&d&&!p&&m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!p&&m&&h&&!v&&!f&&b)return n.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!p&&m&&h&&!v&&!f&&b)return n.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!p&&m&&h&&!v&&!f&&b)return n.t("private, not a member, has a draft message");if(u&&d&&p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&p&&!m&&h&&!v&&!f&&b)return n.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&p&&!m&&h&&!v&&!f&&b)return n.t("has notifications, not a member, has a draft message");if(u&&d&&!p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!p&&!m&&h&&!v&&!f&&b)return n.t("has unread messages, not a member, has a draft message");if(u&&!d&&!p&&!m&&h&&!v&&!f&&b)return n.t("current channel, not a member, has a draft message");if(!u&&!d&&!p&&!m&&h&&!v&&!f&&b)return n.t("not a member, has a draft message");if(u&&d&&p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&p&&m&&!h&&!v&&!f&&b)return n.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&p&&m&&!h&&!v&&!f&&b)return n.t("has notifications, private, has a draft message");if(u&&d&&!p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!p&&m&&!h&&!v&&!f&&b)return n.t("has unread messages, private, has a draft message");if(u&&!d&&!p&&m&&!h&&!v&&!f&&b)return n.t("current channel, private, has a draft message");if(!u&&!d&&!p&&m&&!h&&!v&&!f&&b)return n.t("private, has a draft message");if(u&&d&&p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&p&&!m&&!h&&!v&&!f&&b)return n.t("has unread messages and notifications, has a draft message");if(u&&!d&&p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has notifications, has a draft message");if(!u&&!d&&p&&!m&&!h&&!v&&!f&&b)return n.t("has notifications, has a draft message");if(u&&d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages, has a draft message");if(!u&&d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("has unread messages, has a draft message");if(u&&!d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("has a draft message");if(u&&d&&p&&m&&h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&p&&m&&h&&v&&f&&!b)return n.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&p&&m&&h&&v&&f&&!b)return n.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&p&&m&&h&&v&&f&&!b)return n.t("has notifications, private, not a member, muted, starred");if(u&&d&&!p&&m&&h&&v&&f&&!b)return n.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!p&&m&&h&&v&&f&&!b)return n.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!p&&m&&h&&v&&f&&!b)return n.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!p&&m&&h&&v&&f&&!b)return n.t("private, not a member, muted, starred");if(u&&d&&p&&!m&&h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&p&&!m&&h&&v&&f&&!b)return n.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&p&&!m&&h&&v&&f&&!b)return n.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&p&&!m&&h&&v&&f&&!b)return n.t("has notifications, not a member, muted, starred");if(u&&d&&!p&&!m&&h&&v&&f&&!b)return n.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!p&&!m&&h&&v&&f&&!b)return n.t("has unread messages, not a member, muted, starred");if(u&&!d&&!p&&!m&&h&&v&&f&&!b)return n.t("current channel, not a member, muted, starred");if(!u&&!d&&!p&&!m&&h&&v&&f&&!b)return n.t("not a member, muted, starred");if(u&&d&&p&&m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&p&&m&&!h&&v&&f&&!b)return n.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&p&&m&&!h&&v&&f&&!b)return n.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&p&&m&&!h&&v&&f&&!b)return n.t("has notifications, private, muted, starred");if(u&&d&&!p&&m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!p&&m&&!h&&v&&f&&!b)return n.t("has unread messages, private, muted, starred");if(u&&!d&&!p&&m&&!h&&v&&f&&!b)return n.t("current channel, private, muted, starred");if(!u&&!d&&!p&&m&&!h&&v&&f&&!b)return n.t("private, muted, starred");if(u&&d&&p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&p&&!m&&!h&&v&&f&&!b)return n.t("has unread messages and notifications, muted, starred");if(u&&!d&&p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has notifications, muted, starred");if(!u&&!d&&p&&!m&&!h&&v&&f&&!b)return n.t("has notifications, muted, starred");if(u&&d&&!p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages, muted, starred");if(!u&&d&&!p&&!m&&!h&&v&&f&&!b)return n.t("has unread messages, muted, starred");if(u&&!d&&!p&&!m&&!h&&v&&f&&!b)return n.t("current channel, muted, starred");if(!u&&!d&&!p&&!m&&!h&&v&&f&&!b)return n.t("muted, starred");if(u&&d&&p&&m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&p&&m&&h&&!v&&f&&!b)return n.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&p&&m&&h&&!v&&f&&!b)return n.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&p&&m&&h&&!v&&f&&!b)return n.t("has notifications, private, not a member, starred");if(u&&d&&!p&&m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!p&&m&&h&&!v&&f&&!b)return n.t("has unread messages, private, not a member, starred");if(u&&!d&&!p&&m&&h&&!v&&f&&!b)return n.t("current channel, private, not a member, starred");if(!u&&!d&&!p&&m&&h&&!v&&f&&!b)return n.t("private, not a member, starred");if(u&&d&&p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&p&&!m&&h&&!v&&f&&!b)return n.t("has unread messages and notifications, not a member, starred");if(u&&!d&&p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has notifications, not a member, starred");if(!u&&!d&&p&&!m&&h&&!v&&f&&!b)return n.t("has notifications, not a member, starred");if(u&&d&&!p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!p&&!m&&h&&!v&&f&&!b)return n.t("has unread messages, not a member, starred");if(u&&!d&&!p&&!m&&h&&!v&&f&&!b)return n.t("current channel, not a member, starred");if(!u&&!d&&!p&&!m&&h&&!v&&f&&!b)return n.t("not a member, starred");if(u&&d&&p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&p&&m&&!h&&!v&&f&&!b)return n.t("has unread messages and notifications, private, starred");if(u&&!d&&p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has notifications, private, starred");if(!u&&!d&&p&&m&&!h&&!v&&f&&!b)return n.t("has notifications, private, starred");if(u&&d&&!p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages, private, starred");if(!u&&d&&!p&&m&&!h&&!v&&f&&!b)return n.t("has unread messages, private, starred");if(u&&!d&&!p&&m&&!h&&!v&&f&&!b)return n.t("current channel, private, starred");if(!u&&!d&&!p&&m&&!h&&!v&&f&&!b)return n.t("private, starred");if(u&&d&&p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, starred");if(!u&&d&&p&&!m&&!h&&!v&&f&&!b)return n.t("has unread messages and notifications, starred");if(u&&!d&&p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has notifications, starred");if(!u&&!d&&p&&!m&&!h&&!v&&f&&!b)return n.t("has notifications, starred");if(u&&d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages, starred");if(!u&&d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("has unread messages, starred");if(u&&!d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, starred");if(!u&&!d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("starred");if(u&&d&&p&&m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&p&&m&&h&&v&&!f&&!b)return n.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&p&&m&&h&&v&&!f&&!b)return n.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&p&&m&&h&&v&&!f&&!b)return n.t("has notifications, private, not a member, muted");if(u&&d&&!p&&m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!p&&m&&h&&v&&!f&&!b)return n.t("has unread messages, private, not a member, muted");if(u&&!d&&!p&&m&&h&&v&&!f&&!b)return n.t("current channel, private, not a member, muted");if(!u&&!d&&!p&&m&&h&&v&&!f&&!b)return n.t("private, not a member, muted");if(u&&d&&p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&p&&!m&&h&&v&&!f&&!b)return n.t("has unread messages and notifications, not a member, muted");if(u&&!d&&p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has notifications, not a member, muted");if(!u&&!d&&p&&!m&&h&&v&&!f&&!b)return n.t("has notifications, not a member, muted");if(u&&d&&!p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!p&&!m&&h&&v&&!f&&!b)return n.t("has unread messages, not a member, muted");if(u&&!d&&!p&&!m&&h&&v&&!f&&!b)return n.t("current channel, not a member, muted");if(!u&&!d&&!p&&!m&&h&&v&&!f&&!b)return n.t("not a member, muted");if(u&&d&&p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&p&&m&&!h&&v&&!f&&!b)return n.t("has unread messages and notifications, private, muted");if(u&&!d&&p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has notifications, private, muted");if(!u&&!d&&p&&m&&!h&&v&&!f&&!b)return n.t("has notifications, private, muted");if(u&&d&&!p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages, private, muted");if(!u&&d&&!p&&m&&!h&&v&&!f&&!b)return n.t("has unread messages, private, muted");if(u&&!d&&!p&&m&&!h&&v&&!f&&!b)return n.t("current channel, private, muted");if(!u&&!d&&!p&&m&&!h&&v&&!f&&!b)return n.t("private, muted");if(u&&d&&p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, muted");if(!u&&d&&p&&!m&&!h&&v&&!f&&!b)return n.t("has unread messages and notifications, muted");if(u&&!d&&p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has notifications, muted");if(!u&&!d&&p&&!m&&!h&&v&&!f&&!b)return n.t("has notifications, muted");if(u&&d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages, muted");if(!u&&d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("has unread messages, muted");if(u&&!d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, muted");if(!u&&!d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("muted");if(u&&d&&p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&p&&m&&h&&!v&&!f&&!b)return n.t("has unread messages and notifications, private, not a member");if(u&&!d&&p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has notifications, private, not a member");if(!u&&!d&&p&&m&&h&&!v&&!f&&!b)return n.t("has notifications, private, not a member");if(u&&d&&!p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages, private, not a member");if(!u&&d&&!p&&m&&h&&!v&&!f&&!b)return n.t("has unread messages, private, not a member");if(u&&!d&&!p&&m&&h&&!v&&!f&&!b)return n.t("current channel, private, not a member");if(!u&&!d&&!p&&m&&h&&!v&&!f&&!b)return n.t("private, not a member");if(u&&d&&p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&p&&!m&&h&&!v&&!f&&!b)return n.t("has unread messages and notifications, not a member");if(u&&!d&&p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has notifications, not a member");if(!u&&!d&&p&&!m&&h&&!v&&!f&&!b)return n.t("has notifications, not a member");if(u&&d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages, not a member");if(!u&&d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("has unread messages, not a member");if(u&&!d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, not a member");if(!u&&!d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("not a member");if(u&&d&&p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private");if(!u&&d&&p&&m&&!h&&!v&&!f&&!b)return n.t("has unread messages and notifications, private");if(u&&!d&&p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has notifications, private");if(!u&&!d&&p&&m&&!h&&!v&&!f&&!b)return n.t("has notifications, private");if(u&&d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages, private");if(!u&&d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("has unread messages, private");if(u&&!d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, private");if(!u&&!d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("private");if(u&&d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications");if(!u&&d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("has unread messages and notifications");if(u&&!d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has notifications");if(!u&&!d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("has notifications");if(u&&d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages");if(!u&&d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("has unread messages");if(u&&!d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel");return""}();if(a&&!g&&!_)return n.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:a});if(!a&&!g&&_)return n.t("{channelName} ({context})",{channelName:t,context:_});if(a&&!g&&_)return n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:a,context:_});if(!a&&g&&!_)return n.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g});if(a&&g&&!_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g,previousChannelName:a});if(!a&&g&&_)return n.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,context:_});if(a&&g&&_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,previousChannelName:a,context:_});if(t)return t;return""}},2029:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(575);var g=a(182);var _=a(1678);var y=a(32);var k=a(38);var O=a(1237);var C=a(116);var E=a(6);var S=a(2476);var w=a.n(S);var I=new E["b"]("search");var j={tab:d["b"].string.isRequired,setTab:d["b"].func.isRequired,usePrimarySearch:d["b"].bool,showNewPeopleSearch:d["b"].bool};var T={usePrimarySearch:false,showNewPeopleSearch:false};var A=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSwitchItem=a.renderSwitchItem.bind(a);return a}s()(t,[{key:"renderSwitchItem",value:function e(t){var a=this;var r=t.name,n=t.id;return m.a.createElement(C["a"],{key:n,className:f()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.tab===n}),onClick:function e(){return a.props.setTab({tab:n})},"aria-selected":this.props.tab===n,role:"tab","data-qa":"search_tab_"+n.toString().toLowerCase(),"data-qa-tab":n},r)}},{key:"render",value:function e(){var t=this;var a=[{id:"messages",name:I.t("Messages")},{id:"files",name:I.t("Files")},{id:"channels",name:m.a.createElement(p["Fragment"],null,I.t("Channels"))}];a.push({id:"people",name:m.a.createElement(p["Fragment"],null,I.t("People"),this.props.showNewPeopleSearch&&m.a.createElement(p["Fragment"],null," ",m.a.createElement(O["a"],null,I.t("NEW"))))});return m.a.createElement("div",{role:"tablist",className:f()("c-search__tabs","c-tabs__tab_menu",{"c-search__tabs--primary_search_legacy":this.props.usePrimarySearch&&!Object(y["a"])(),"c-search__tabs--primary_search_sonic":this.props.usePrimarySearch&&Object(y["a"])()})},a.map(function(e){return t.renderSwitchItem(e)}))}}]);return t}(p["PureComponent"]);A.displayName="SearchTypeSwitch";A.defaultProps=T;var N=function e(t){return{tab:Object(g["s"])(t),usePrimarySearch:Object(b["a"])(t),showNewPeopleSearch:!Object(k["h"])(t,"seen_people_search")}};var M={setTab:_["a"]};t["a"]=Object(h["connect"])(N,M)(A)},2030:function(e,t,a){"use strict";var r=a(0);var n=a(17);var i=a(329);var s=Object(n["b"])("Start editing the last message in a given channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,s=a.viewContext;var o=t();var l=Object(i["getLastEditableMessageInChannel"])(o,{channelId:r,threadTs:n});if(!l)return false;e(Object(i["maybeStartEditingMessage"])({channelId:r,ts:l.ts,viewContext:s,scroll:true}));return true});s.meta={name:"editLastMessageInChannel",key:"actionsEditLastMessageInChannelEditLastMessageInChannel",description:"Start editing the last message in a given channel"};s.propTypes={channelId:r["b"].string.isRequired,threadTs:r["b"].string,viewContext:r["b"].string};t["a"]=s},2031:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(0);var v=a(1183);var f=a(1896);var b=a(1895);var g=a(371);var _=a(1182);var y=a(14);var k="GLOBAL-RXN-SHORTCUT";var O={children:h["b"].node.isRequired,channelId:h["b"].string.isRequired,threadTs:h["b"].string,logger:h["b"].object.isRequired,getLastMessageInChannel:h["b"].func.isRequired,getLastMessageInThread:h["b"].func.isRequired,changeReactionFromUserAction:h["b"].func.isRequired};var C={threadTs:void 0};var E=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={forceOpen:false};a.onEmojiSelected=a.onEmojiSelected.bind(a);a.onClose=a.onClose.bind(a);return a}s()(t,[{key:"onEmojiSelected",value:function e(t,a){if(!this.reactionKey){this.props.logger.warn(k,"No reaction key");return}this.props.changeReactionFromUserAction({key:this.reactionKey,name:a})}},{key:"onClose",value:function e(){this.setState(function(){return{forceOpen:false}})}},{key:"startReactionPopoverForLastMessage",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.logger;var i=void 0;i=r?this.props.getLastMessageInThread(a,r):this.props.getLastMessageInChannel(a);if(!i){n.info(k,"Could not find last message");return}this.reactionKey=Object(g["b"])(i);n.info(k,"Opening reaction popover for "+this.reactionKey);this.setState(function(){return{forceOpen:true}})}},{key:"render",value:function e(){var t=this.props.children;var a=this.state.forceOpen;return p.a.createElement(_["a"],{showHandyReactions:true,customTrigger:true,forceOpen:a,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},p.a.createElement(j,null,t))}}]);return t}(d["PureComponent"]);E.displayName="MessageInputReactionPopover";E.defaultProps=C;function S(e){return{logger:Object(y["a"])({state:e})}}var w={getLastMessageInChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return f["a"].apply(void 0,[t()].concat(a))}},getLastMessageInThread:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return b["a"].apply(void 0,[t()].concat(a))}},changeReactionFromUserAction:function e(){return v["a"].apply(void 0,arguments)}};var I=Object(m["connect"])(S,w,null,{withRef:true})(E);t["a"]=I;var j=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return this.props.children}}]);return t}(d["PureComponent"]);j.displayName="PassThrough"},2032:function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(20);var s=a(188);var o=a(1177);var l=a(541);t["a"]=function(e,t){var a=t.featureWysiwygComposer;if(!e)return false;var r=Object(s["o"])(e.contents,{embedReplacement:"a"});if(!r.trim())return false;if(a){if(Object(o["a"])(new n.a(e.contents))>i["MAX_MESSAGE_INPUT_LENGTH"])return false}else if(Object(l["a"])(e).length>i["MAX_MESSAGE_INPUT_LENGTH"])return false;return true}},2033:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a(515);var n=a(1913);var i=a(108);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,a=e.isMenuVisible,s=void 0!==a&&a;if(!t)return false;if(s)return false;if(Object(r["a"])(t.target))return false;if(!Object(n["a"])(t))return false;if(t&&t.keyCode===i["j"])return false;return true}},2034:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(13);var o=a.n(s);var l=a(6);var c=a(54);var u=a(23);var d=a(3742);var p=a.n(d);var m=new l["b"]("msg_input");var h={tooltip:i["b"].string,padding:i["b"].string,border:i["b"].bool,featureAnnounceOnly:i["b"].bool};var v={tooltip:null,border:false,padding:void 0,featureAnnounceOnly:false};var f=function e(t){var a=t.tooltip,r=t.border,i=t.padding,s=t.featureAnnounceOnly;if(!s)return null;var l=o()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":r,"p-message_input_announce_only_roadblock--large_padding":"large"===i});return n.a.createElement("div",{className:l},n.a.createElement(u["b"],{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:true}),m.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}),a&&n.a.createElement(c["c"],{position:"top-right",tip:a},n.a.createElement(u["b"],{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:true})))};f.displayName="MessageInputAnnounceOnlyRoadblock";f.defaultProps=v;t["a"]=f},2035:function(e,t,a){"use strict";var r=a(26);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(3);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(13);var y=a.n(_);var k=a(0);var O=a(23);var C=a(6);var E=a(1474);var S=a(3746);var w=a.n(S);var I=new C["b"]("messages");var j=20;var T=f()({},E["a"].propTypes,{reachedStart:k["b"].bool,reachedEnd:k["b"].bool});var A=f()({},E["a"].defaultProps,{reachedStart:false,reachedEnd:false});var N=function(e){h()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pendingUpdate=null;a.recomputeOffsets(e);a.overscan=Math.max(200,e.height/2);return a}l()(t,[{key:"componentDidUpdate",value:function e(){var a;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(a=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(a,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"onKeyDownPageDown",value:function e(a){if(this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd){this.focusLastItemInView();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyDownPageDown",this).call(this,a)}},{key:"onKeyUpPageDown",value:function e(a){if(this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart){this.focusFirstItemInView();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyUpPageDown",this).call(this,a)}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(a){var r=a<this.getOffset();var n=a+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(r&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=a;this.relayout();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,a-this.getOffset())}},{key:"scrollToOffset",value:function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.animate,i=r.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?a:a-this.getOffset();!i&&s>0&&s<this.getLoadingOffsetTop()&&(s=0);var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(a);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<1;var o=a===r.keys.length&&n+r.height>i-1;var l=!r.keys.length||i<=r.height||s;var c=!r.keys.length||i<=r.height||o;if(l&&c)return r.loadAround();if(l)return r.loadPre();if(c)return r.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,a){if(a.isLoading)return null;var r=e.start,n=e.end;var i=t.startKey;var s=t.endKey;t.recomputeOffsets(a,r,n);var o=t.node?t.node.scrollTop():0;var l=t.getScrollTop();var c=o-1<=0||l-1<=t.getOffset();var u=o+1>=t.getContentHeight()-a.height||l+1>=t.endBottom-a.height;var d={start:r,end:n};if(t.startKey!==i||t.endKey!==s||c&&0!==r||u&&n!==a.keys.length){e.scrolling&&(t.overscan=8e3);d=t.computeBounds(a,l);var p=d,m=p.start,h=p.end;t.recomputeOffsets(a,m,h);c=l-1<=t.getOffset();u=l+a.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(c&&0===d.start||u&&d.end===a.keys.length||t.layout.getTotalHeight()<a.height&&0===d.start)&&t.loadMore(r,n,a);var v=t.layout.getTops();if(d.start===r&&d.end===n&&v===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=l;return f()({},d,{tops:v})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[a];this.endKey=t.keys[r-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments[1];var n=r-this.overscan;var i=r+a.height+this.overscan;var s=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(a,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var r=a.start,n=a.end;return{start:r<j?0:r,end:t.keys.length-n<j?t.keys.length:n}}},{key:"renderLoading",value:function e(t,a){var r=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var n=t?"degradedLoadingTop":"degradedLoadingBottom";var i=this.props.featureOfflineMode&&this.props.isOffline&&!a;var s=I.t("Loading history...");this.props.featureOfflineMode&&i&&(s=g.a.createElement("span",null,g.a.createElement(O["b"],{type:"cloud-offline-small",size:"inherit"})," ",g.a.createElement("strong",null,I.t("No connection."))," ",I.t("Go online to load more messages.")));var o=y()("p-degraded_list__loading",{"p-degraded_list__loading--offline":i});return g.a.createElement("div",{key:n,className:o,style:r},s)}},{key:"renderItems",value:function e(){var a=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var r=this.state.start>0;var i=this.state.end<this.props.keys.length;var s=this.props.keys.length>1&&(!this.props.reachedStart||r);var o=this.props.keys.length>1&&(!this.props.reachedEnd||i);return[s&&this.renderLoading(true,r)].concat(n()(a),[o&&this.renderLoading(false,i)])}}]);return t}(E["a"]);t["a"]=N;N.propTypes=T;N.defaultProps=A},2036:function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},2037:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(42);var s=a(73);function o(e,t,a){var r=Object(s["a"])(e,t,a);return r&&!Object(i["isTempMsg"])(r)&&!Object(i["isEphemeral"])(r)}function l(e,t,a){return Object(r["max"])(Object(r["filter"])(a,function(a){return o(e,t,a)}))}},2038:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(13);var g=a.n(b);var _=a(2);var y=a.n(_);var k=a(31);var O=a(6);var C=a(177);var E=a(9);var S=a(87);var w=a(97);var I=a(1835);var j=a(3804);var T=a.n(j);var A={id:v["b"].string.isRequired,name:v["b"].string.isRequired,description:v["b"].string,isActive:v["b"].bool,handle:v["b"].string,userCount:v["b"].number.isRequired,canEditUserGroups:v["b"].func.isRequired,canCreateAndDeleteUserGroups:v["b"].func.isRequired,featureSonicUserGroups:v["b"].bool,onClick:v["b"].func,showUserGroupDetails:v["b"].func.isRequired};var N={description:null,isActive:false,handle:void 0,featureSonicUserGroups:false,onClick:_["noop"]};var M=new O["b"]("user_groups");var P=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(a,["onMenuClick","renderContextMenu"]);return a}l()(t,[{key:"onMenuClick",value:function e(t){var a=this.props.id;this.props.onClick(t,a)}},{key:"renderName",value:function e(){var t=this.props,a=t.name,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("black",{sk_foreground_max:!r});var s=r?a:M.t("{name} (Deactivated)",{name:a});return h.a.createElement("div",{className:i},s)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.description,r=t.isActive;if(!a)return null;var n=g()("overflow_ellipsis",{sk_foreground_max:!r});return h.a.createElement("div",{className:n},a)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return h.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return h.a.createElement(I["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function e(){var t=this.props,a=t.userCount,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("p-user_group_row",{"p-user_group_row--inactive":!r});var s={renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:r};return h.a.createElement(I["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),h.a.createElement("span",{className:"p-user_group_row__count"},M.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a})))}}]);return t}(m["PureComponent"]);P.displayName="UserGroupRow";P.defaultProps=N;var R=function e(t,a){var r=a.id;var i=Object(C["e"])(t,r);var s={canEditUserGroups:function e(){return Object(S["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(S["b"])(t)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")};if(!i)return s;return n()({name:Object(S["h"])(i),description:Object(S["e"])(i),handle:Object(S["f"])(i),userCount:Object(S["l"])(i),isActive:Object(S["t"])(i)},s)};var x={showUserGroupDetails:w["n"]};t["a"]=Object(f["connect"])(R,x)(P)},2045:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(26);var l=a.n(o);var c=a(5);var u=a.n(c);var d=a(4);var p=a.n(d);var m=a(7);var h=a.n(m);var v=a(8);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var k=a(2);var O=a(31);var C=a(18);var E=a(39);var S=a(511);var w=a(492);var I=a(17);var j=a(9);var T=a(6);var A=a(775);var N=a(513);var M=a(62);var P=Object(I["b"])("Record a frecency event for some message action + maybe a query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.action,n=a.query,i=void 0===n?"":n;var s=r.frecencyId;Object(j["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor")?e(Object(N["c"])({id:s,text:i})):Object(A["c"])({id:s},i)});P.meta={name:"recordMessageActionFrecencyEvent",key:"actionsRecordMessageActionFrecencyEventRecordMessageActionFrecencyEvent",description:"Record a frecency event for some message action + maybe a query"};P.propTypes={action:M["a"].MessageAction.isRequired,query:_["b"].string};var R=P;var x=a(20);var D=a(15);var F=a(73);var L=a(42);var B=a(353);var U=new T["b"]("message");var q={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var W=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;if(!Object(L["canAddReaction"])(e,n))return null;return{id:x["SLACK_ACTION_IDS"].addReaction,name:U.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(B["f"])("add_reaction"),uiElement:C["z"].ADD_REACTION_BUTTON}});W.meta={name:"addReaction",key:"componentsMessageActionSelectorsAddReactionAddReaction"};W.propTypes=q;var H=W;var G=a(21);var V=new T["b"]("message");var K={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var z=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;var i=Object(G["e"])(e,r);if(!Object(L["canReplyOrComment"])(e,{message:n,channel:i}))return null;var s=V.t("Start a thread");var o=C["z"].START_A_THREAD_BUTTON;if(Object(L["isThreadBroadcast"])(n)||Object(L["getReplyCount"])(n)){s=V.t("Reply to thread");o=C["z"].REPLY_TO_THREAD_BUTTON}return{id:x["SLACK_ACTION_IDS"].comment,name:s,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(B["f"])("thread_reply"),uiElement:o}});z.meta={name:"comment",key:"componentsMessageActionSelectorsCommentComment"};z.propTypes=K;var Q=z;var Y=new T["b"]("message");var J={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var X=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;var i=Object(G["e"])(e,r);if(!Object(L["canCopyLink"])(e,{message:n,channel:i}))return null;return{id:x["SLACK_ACTION_IDS"].copyLink,name:Object(j["isFeatureEnabled"])(e,"feature_desktop_copy_text")?Y.t("Copy link to message"):Y.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(B["f"])("copy_link"),uiElement:C["z"].COPY_LINK_BUTTON}});X.meta={name:"copyLink",key:"componentsMessageActionSelectorsCopyLinkCopyLink"};X.propTypes=J;var Z=X;var $=new T["b"]("message");var ee={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var te=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(F["a"])(e,r,a);if(!c)return null;var u=Object(G["e"])(e,r);if(!Object(L["canDeleteMessage"])(e,{message:c,channel:u,messageContainerType:n}))return null;return{id:x["SLACK_ACTION_IDS"].deleteMessage,name:$.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(B["f"])("delete"),uiElement:C["z"].DELETE_MESSAGE_BUTTON,disabled:s,showOfflineIcon:l}});te.meta={name:"deleteMessage",key:"componentsMessageActionSelectorsDeleteMessageDeleteMessage"};te.propTypes=ee;var ae=te;var re=a(61);var ne=new T["b"]("message");var ie={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var se=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,r,a);if(!l)return null;var c=Object(G["e"])(e,r);var u=Object(j["getCurrentUserId"])(e);var d=Object(re["a"])(e,"msg_edit_window_mins");if(!Object(L["canEditMessage"])(e,u,l,c,d))return null;return{id:x["SLACK_ACTION_IDS"].editMessage,name:ne.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(B["f"])("edit"),uiElement:C["z"].EDIT_MESSAGE_BUTTON,disabled:i,showOfflineIcon:o}});se.meta={name:"editMessage",key:"componentsMessageActionSelectorsEditMessageEditMessage"};se.propTypes=ie;var oe=se;var le=new T["b"]("message");var ce=new T["b"]("messages_action_items");var ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,allUnreads:_["b"].string.isRequired};var de=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.allUnreads;var i=Object(F["a"])(e,r,a);if(!i)return null;var s=Object(G["e"])(e,r);if(!Object(L["canMarkUnread"])(e,{message:i,channel:s}))return null;return{id:x["SLACK_ACTION_IDS"].markUnread,name:n?ce.t("Mark above as read"):le.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(B["f"])("mark_unread"),uiElement:C["z"].MARK_UNREAD_BUTTON}});de.meta={name:"markUnread",key:"componentsMessageActionSelectorsMarkUnreadMarkUnread"};de.propTypes=ue;var pe=de;var me=a(252);var he=a(11);var ve=new T["b"]("message");function fe(e,t,a,r){var n="#"+t;switch(a){case"channel":if(e)return ve.t("Un-pin from channel",{channelName:n,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"});if(r)return ve.t("Pin to channel",{channelName:n,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"});return ve.t("Pin to channel",{channelName:n,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});case"private":if(e)return ve.t("Un-pin from channel",{channelName:t,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"});if(r)return ve.t("Pin to channel",{channelName:t,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"});return ve.t("Pin to channel",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});default:if(e)return ve.t("Un-pin from this conversation");if(r)return ve.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"});return ve.t("Pin to this conversation\u2026")}}var be={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var ge=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,r,a);if(!l)return null;var c=Object(G["e"])(e,r);if(!Object(L["canPin"])(e,{message:l,channel:c}))return null;var u=Object(me["isMessagePinned"])(e,{channelId:r,ts:a});var d=Object(he["getDisplayNameForChannel"])(e,c,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var p=Object(he["getChannelType"])(c);var m=u?C["z"].PIN_TO_THIS_CONVERSATION_BUTTON:C["z"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;var h=Object(j["isFeatureEnabled"])(e,"feature_sonic_pins");return{id:x["SLACK_ACTION_IDS"].pin,name:fe(u,d,p,h),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(B["f"])(u?"unpin":"pin"),uiElement:m,disabled:i,showOfflineIcon:o}});ge.meta={name:"pin",key:"componentsMessageActionSelectorsPinPin"};ge.propTypes=be;var _e=ge;var ye=a(645);var ke=a(1133);var Oe=a(1542);var Ce=a(2016);var Ee=Object(I["b"])("Add a reminder for a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.time,n=a.channelId,i=a.ts;var s=Object(F["a"])(t(),n,i);return e(Object(Ce["a"])({time:r,message_channel:n,message_ts:i,respond_in_channel:Object(L["reminderShouldRespondInChannel"])(s)}))});Ee.meta={name:"addReminderForMessage",key:"actionsAddReminderForMessageAddReminderForMessage",description:"Add a reminder for a message"};Ee.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,time:_["b"].string.isRequired};var Se=Ee;var we=new T["b"]("message");var Ie={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,time:_["b"].string.isRequired,remind:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var je=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"onSelected",value:function e(){var t=this.props,a=t.remind,r=t.ts,n=t.channelId,i=t.time,s=t.clogger;a({ts:r,channelId:n,time:i});s.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].CLICK,step:C["A"].MORE_ACTIONS_MENU,ui_element:C["z"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.remind,r=t.ts,i=t.channelId,o=t.time,l=s()(t,["remind","ts","channelId","time"]);return g.a.createElement(w["a"],n()({},l,{onSelected:this.onSelected}))}}]);return t}(b["PureComponent"]);je.displayName="RemindMenuItem";var Te=function e(t){return{clogger:Object(E["a"])({state:t})}};var Ae={remind:Se};var Ne=Object(y["connect"])(Te,Ae)(je);var Me=Object(S["b"])(Ne);var Pe={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,featureAppViewsReminders:_["b"].bool,renderLegacySubmenu:_["b"].bool};var Re={featureAppViewsReminders:false,renderLegacySubmenu:true};var xe=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);return a}p()(t,[{key:"renderSubmenu",value:function e(t){var a=this.props,r=a.channelId,i=a.ts,s=a.featureAppViewsReminders;var o={channelId:r,ts:i};return g.a.createElement(ye["a"],n()({},t,{"data-qa":"remind_submenu",width:"auto"}),g.a.createElement(Me,n()({},o,{label:we.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),g.a.createElement(Me,n()({},o,{label:we.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),g.a.createElement(Me,n()({},o,{label:we.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),g.a.createElement(Me,n()({},o,{label:we.t("Tomorrow"),time:"Tomorrow"})),g.a.createElement(Me,n()({},o,{label:we.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),s&&g.a.createElement(Me,n()({},o,{label:we.t("Custom\u2026"),time:"Custom"})))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.ts,i=s()(t,["channelId","ts"]);return g.a.createElement(Oe["a"],n()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(b["PureComponent"]);xe.displayName="Remind";xe.defaultProps=Re;var De=Object(ke["a"])(xe);var Fe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,r,a);if(!l)return null;var c=Object(G["e"])(e,r);if(!Object(L["canAddReminder"])(e,{message:l,channel:c}))return null;var u=Object(j["isFeatureEnabled"])(e,"feature_app_views_reminders");return g.a.createElement(De,{key:"remind_submenu",label:we.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(B["f"])("remind"),ts:a,channelId:r,featureAppViewsReminders:u,renderLegacySubmenu:true,disabled:i,showOfflineIcon:o})});Fe.meta={name:"remindSubmenu",key:"componentsMessageActionSelectorsRemindRemindSubmenu"};var Le=Fe;var Be=new T["b"]("message");var Ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(k["values"])(x["MESSAGE_CONTAINERS"])),disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var qe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(F["a"])(e,r,a);if(!c)return null;var u=Object(G["e"])(e,r);if(!Object(L["canRemoveBroadcast"])(e,{message:c,channel:u,messageContainerType:n}))return null;var d=Object(he["isPublicChannel"])(u)||Object(he["isPrivateChannel"])(u)?Be.t("Remove from channel"):Be.t("Remove from conversation");return{id:x["SLACK_ACTION_IDS"].removeBroadcast,name:d,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(B["f"])("remove"),uiElement:C["z"].REMOVE_FROM_CONVERSATION_BUTTON,disabled:s,showOfflineIcon:l}});qe.meta={name:"removeBroadcast",key:"componentsMessageActionSelectorsRemoveBroadcastRemoveBroadcast"};qe.propTypes=Ue;var We=qe;var He=new T["b"]("message");var Ge={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Ve=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;if(!Object(L["canBeShared"])(n))return null;var i=Object(L["isShareableFileMsg"])(n)?He.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):He.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:x["SLACK_ACTION_IDS"].shareMessage,name:i,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(B["f"])("share"),uiElement:C["z"].SHARE_MESSAGE_BUTTON}});Ve.meta={name:"shareMessage",key:"componentsMessageActionSelectorsShareMessageShareMessage"};Ve.propTypes=Ge;var Ke=Ve;var ze=a(98);var Qe=new T["b"]("message");var Ye={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Je=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;if(!Object(L["canStar"])(n))return null;var i=Object(L["isStarred"])(n);var s=i?Qe.t("Unstar message"):Qe.t("Star message");if(Object(L["isFileComment"])(n)){var o=Object(k["first"])(n.files);var l=n.comment&&Object(ze["getFileCommentById"])(e,o,n.comment.id);l&&(s=i?Qe.t("Unstar file comment"):Qe.t("Star file comment"))}var c=i?C["z"].UNSTAR_MESSAGE_BUTTON:C["z"].STAR_MESSAGE_BUTTON;return{id:x["SLACK_ACTION_IDS"].star,name:s,iconType:i?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(B["f"])(i?"unstar":"star"),uiElement:c}});Je.meta={name:"star",key:"componentsMessageActionSelectorsStarStar"};Je.propTypes=Ye;var Xe=Je;var Ze=a(443);var $e=a(38);var et=new T["b"]("message");var tt=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.threadTs,n=t.channelId,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(F["a"])(e,n,r||a);var u=Object(G["e"])(e,n);var d=Object(he["isArchived"])(u);var p=Object(Ze["getIsSubscribed"])(e,{ts:r||a,channelId:n});var m=d&&p;if(!Object(L["canReplyOrComment"])(e,{message:c,channel:u,ignoreMembership:m}))return null;var h=Object($e["h"])(e,"threads_everything");var v=Object(L["getReplyCount"])(c);var f=et.t("Follow message");var b=et.t("You\u2019ll be notified about any replies");var g=C["z"].FOLLOW_MESSAGE_BUTTON;var _=void 0;var y=Object(Ze["getIsSubscriptionLoading"])(e,{ts:r||a,channelId:n});if(!y||s&&l)if(p){if(v){f=et.t("Unfollow thread");_=et.t("This will be removed from Threads");b=h?et.t("You won\u2019t be notified about new replies"):_}else{f=et.t("Unfollow message");_=et.t("Replies will be excluded from Threads");b=h?et.t("You won\u2019t be notified about replies"):_}g=C["z"].UNFOLLOW_MESSAGE_BUTTON}else if(v){f=et.t("Follow thread");_=et.t("New replies will appear in Threads");b=h?et.t("You\u2019ll be notified about new replies"):_}else{f=et.t("Follow message");_=et.t("Any replies will show up in Threads");b=h?et.t("You\u2019ll be notified about any replies"):_}else{f=et.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"});b=""}return{id:x["SLACK_ACTION_IDS"].subscribe,name:f,description:b,isLoading:y,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(B["f"])(p?"thread_unfollow":"thread_follow"),uiElement:g}});tt.meta={name:"subscribe",key:"componentsMessageActionSelectorsSubscribeSubscribe"};tt.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var at=tt;function rt(e){return n()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:C["z"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(B["e"])(e))}var nt=a(1402);function it(e,t){if(!e)return false;var a=Object(nt["a"])(e.name);if(!a)return false;var r=Object(nt["a"])(e.description);var n=t.split(/\s+/);return Object(k["every"])(n,function(e){return Object(k["includes"])(a,e)||Object(k["includes"])(r,e)})}var st=a(809);var ot=new T["b"]("app_actions");var lt=function e(t,a){return[H(t,a),Q(t,a),Z(t,a),ae(t,a),oe(t,a),pe(t,a),_e(t,a),We(t,a),Ke(t,a),Xe(t,a),at(t,a)]};var ct=function e(t){return n()({},t,{danger:false,description:ot.t("Slack")})};var ut=function e(t){return{id:t.frecencyId,action:t}};var dt=Object(I["b"])("Search message actions (app + Slack) in Redux store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.query,n=void 0===r?"":r,i=s()(a,["query"]);var o=t();var c=Object(st["d"])(o),u=c.actions;var d=lt(o,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(l()(d.map(ct)),l()(u.map(rt)));p=p.filter(function(e){return it(e,Object(nt["a"])(n))});p=Object(N["d"])(o,{query:n,list:p.map(ut)});p=p.map(function(e){return e.action});return p});dt.meta={name:"searchLocalMessageActions",key:"actionsSearchMessageActionsSearchLocalMessageActions",description:"Search message actions (app + Slack) in Redux store"};dt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(k["values"])(x["MESSAGE_CONTAINERS"])),query:_["b"].string};var pt=Object(I["b"])("Search message actions (app + Slack), returns as Promise",function(e,t,a){var r=e(dt(a));return Promise.resolve(r)});pt.meta={name:"searchMessageActions",key:"actionsSearchMessageActionsSearchMessageActions",description:"Search message actions (app + Slack), returns as Promise"};pt.propTypes=dt.propTypes;var mt=pt;var ht=a(1703);var vt=a(122);var ft=a(14);var bt=a(32);var gt=a(909);var _t=a(371);var yt=a(41);var kt=a(1183);var Ot=a(1182);var Ct={reactionKey:_["b"].string.isRequired,changeReactionFromUserAction:_["b"].func.isRequired,closeModal:_["b"].func.isRequired};var Et=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEmojiSelected=a.onEmojiSelected.bind(a);return a}p()(t,[{key:"onEmojiSelected",value:function e(t,a){this.props.changeReactionFromUserAction({key:this.props.reactionKey,name:a})}},{key:"render",value:function e(){var t={left:"auto",top:"auto"};var a={display:"flex","justify-content":"center","align-items":"center"};return g.a.createElement(Ot["a"],{showHandyReactions:true,forceOpen:true,onEmojiSelected:this.onEmojiSelected,onClose:this.props.closeModal,startsOpen:true,contentStyle:t,overlayStyle:a},g.a.createElement("span",{style:{position:"absolute"}}))}}]);return t}(b["PureComponent"]);Et.displayName="AppActionsEmojiMenu";var St={changeReactionFromUserAction:function e(){return kt["a"].apply(void 0,arguments)},closeModal:function e(){return yt["closeModal"].apply(void 0,arguments)}};var wt=Object(y["connect"])(null,St)(Et);var It=function e(t,a,r){var n=a.channelId,i=a.ts;return r(function(e,a){var s=a();var o=Object(F["a"])(s,n,i);var l=Object(_t["b"])(o);if(Object(bt["a"])())return r(Object(yt["openModal"])({element:g.a.createElement(wt,{reactionKey:l})}));return Object(gt["a"])({e:t,rxn_key:l})})};var jt=It;var Tt=a(97);var At=Object(I["b"])("Open a thread to reply to a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(F["a"])(i,r,n);var o=s.thread_ts||n;e(Object(Tt["l"])({channelId:r,threadTs:o}))});At.meta={name:"comment",key:"actionsCommentComment",description:"Open a thread to reply to a message"};At.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Nt=At;var Mt=a(35);var Pt=a(559);var Rt=a(284);var xt=Object(I["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(F["a"])(i,r,n);var o=s.thread_ts;var l=Object(Mt["d"])(i);var c=l&&l.domain;var u=Object(L["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:r,ts:n,threadTs:o});e(Object(Pt["a"])({msg:s,payload:{subtype:"copy_link"}}));Object(Rt["writeText"])(u)});xt.meta={name:"copyLink",key:"actionsCopyLinkCopyLink",description:"Copy link to message"};xt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Dt=xt;var Ft=a(541);var Lt=a(1180);var Bt=Object(I["b"])("Copy message text",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(F["a"])(i,r,n);e(Object(Pt["a"])({msg:s,payload:{subtype:"copy_text"}}));var o=Object(Ft["a"])(Object(Lt["a"])(i,{text:s.text,tsf_mode:"EDIT"}));Object(Rt["writeText"])(o)});Bt.meta={name:"copyText",key:"actionsCopyTextCopyText",description:"Copy message text"};Bt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ut=Bt;var qt=a(1674);var Wt=Object(I["b"])("Delete message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.rollup;var s=g.a.createElement(qt["a"],{channelId:r,ts:n,rollup:i});Promise.resolve().then(function(){return e(Object(yt["openModal"])({element:s}))})});Wt.meta={name:"deleteMsg",key:"actionsDeleteMessageDeleteMsg",description:"Delete message"};Wt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ht=Wt;var Gt=a(1672);var Vt=Object(I["b"])("Remove message broadcast",function(e,t,a){var r=g.a.createElement(Gt["a"],a);Promise.resolve().then(function(){return e(Object(yt["openModal"])({element:r}))})});Vt.meta={name:"removeBroadcast",key:"actionsRemoveBroadcastRemoveBroadcast",description:"Remove message broadcast"};Vt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Kt=Vt;var zt=a(914);var Qt=Object(I["b"])("Share message in channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;e(Object(zt["a"])({ts:n,channelId:r}))});Qt.meta={name:"shareMessage",key:"actionsShareMessageShareMessage",description:"Share message in channel"};Qt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Yt=Qt;var Jt=a(911);var Xt=a(232);var Zt=a(1275);var $t=a(1085);var ea=a(1306);var ta=a(13);var aa=a.n(ta);var ra=a(1675);var na=a(650);var ia=a(562);var sa=a(531);var oa=a(1453);var la=a(1454);var ca=a(1313);var ua=a(563);var da=a(603);var pa=a(552);var ma=a(918);var ha=a(3612);var va={className:_["b"].string,children:_["b"].node};var fa={className:void 0,children:void 0};var ba=function(e){f()(t,e);function t(){u()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=aa()("c-message_kit__pillow",this.props.className);return g.a.createElement(ma["a"],{className:t},this.props.children)}}]);return t}(b["PureComponent"]);ba.displayName="MessagePillow";var ga=ba;ba.defaultProps=fa;var _a=a(2337);var ya=a(3615);var ka=Object(ra["a"])(ea["a"]);var Oa={msg:_["b"].object.isRequired,className:_["b"].string,showSender:_["b"].bool,onFileClick:_["b"].func,timestampClickable:_["b"].bool,timestampFull:_["b"].bool,timestampRelative:_["b"].bool,flexOrigin:_["b"].string,flexOriginId:_["b"].string,blocksContainerContext:_["b"].string};var Ca={className:void 0,showSender:true,onFileClick:k["noop"],timestampClickable:true,timestampFull:true,timestampRelative:false,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0};var Ea=function(e){f()(t,e);function t(){u()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.msg,i=t.showSender,s=t.onFileClick,o=t.timestampClickable,l=t.timestampFull,c=t.timestampRelative,u=t.flexOrigin,d=t.flexOriginId,p=t.blocksContainerContext;var m=i&&g.a.createElement("div",{className:"c-message_kit__condensed_message_header"},g.a.createElement(na["a"],{msg:r,size:16}),"\xa0",g.a.createElement(ia["a"],{msg:r,className:"c-message_kit__condensed_message_sender"}),g.a.createElement(sa["a"],{msg:r,clickable:o,full:l,relative:c}));return g.a.createElement(ga,{className:aa()("c-message_kit__message","c-message_kit__condensed_message",a)},m,g.a.createElement(ua["a"],{className:"c-message_kit__condensed_message_text",msg:r,isSingleLine:true}),g.a.createElement(da["a"],{msg:r,blockLimit:1,blocksContainerContext:p}),g.a.createElement(pa["b"],{msg:r,renderFile:function e(t){return g.a.createElement(ka,n()({},t,{className:aa()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!r.text}),onClick:s}))}}),g.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},g.a.createElement(oa["a"],{msg:r,className:"c-message_kit__condensed_message_reactions"}),g.a.createElement(la["a"],{msg:r,flexOrigin:u,flexOriginId:d})),g.a.createElement(ca["a"],{msg:r,flexOrigin:u,flexOriginId:d}))}}]);return t}(b["PureComponent"]);Ea.displayName="CondensedMessage";Ea.defaultProps=Ca;var Sa=Ea;var wa=a(155);var Ia=a(1042);var ja=a(1452);var Ta=a(915);var Aa=a(1071);var Na=a(3617);var Ma={avatarSize:_["b"].number,className:_["b"].string,flexOrigin:_["b"].string,msg:_["b"].object.isRequired,timestampClickable:_["b"].bool,timestampFull:_["b"].bool,timestampRelative:_["b"].bool,blocksContainerContext:_["b"].string};var Pa={avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:false,timestampFull:true,timestampRelative:false,blocksContainerContext:void 0};var Ra=function(e){f()(t,e);function t(){u()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.avatarSize,r=t.className,n=t.flexOrigin,i=t.msg,s=t.timestampClickable,o=t.timestampFull,l=t.timestampRelative,c=t.blocksContainerContext;return g.a.createElement(ga,{className:aa()("c-message_kit__message","c-message_kit__contextual_message",r)},g.a.createElement(Aa["a"],{msg:i},g.a.createElement(Ta["a"],{light:g.a.createElement(na["a"],{msg:i,size:a})},g.a.createElement(ia["a"],{msg:i}),"\xa0\xa0",g.a.createElement(sa["a"],{msg:i,clickable:s,full:o,relative:l}),g.a.createElement("br",null),g.a.createElement(ua["a"],{msg:i}),g.a.createElement(da["a"],{msg:i,blocksContainerContext:c}),g.a.createElement(ja["a"],{msg:i}),g.a.createElement(pa["b"],{msg:i}),g.a.createElement(Ia["a"],{msg:i}),g.a.createElement(ca["a"],{flexOrigin:n,msg:i}))))}}]);return t}(b["PureComponent"]);Ra.displayName="ContextualMessage";Ra.defaultProps=Pa;var xa=Ra;var Da={fileId:_["b"].string.isRequired,commentId:_["b"].string.isRequired,className:_["b"].string,comment:_["b"].object};var Fa={className:void 0,comment:void 0};var La=function(e){f()(t,e);function t(){u()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.fileId,n=t.className;if(!a)return null;var i={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[r]};return g.a.createElement(xa,{msg:i,className:n})}}]);return t}(b["PureComponent"]);La.displayName="PinnedItemFileComment";La.defaultProps=Fa;var Ba=function e(t,a){var r=a.fileId,n=a.commentId;return{comment:Object(ze["getFileCommentById"])(t,r,n)}};var Ua=Object(y["connect"])(Ba)(La);var qa={pin:_["b"].object.isRequired,previewFile:_["b"].func.isRequired};var Wa=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["onFileClick","renderMessage","renderFile","renderFileComment"]);return a}p()(t,[{key:"onFileClick",value:function e(t,a){if(!a)return;this.props.previewFile({fileId:a.id,flexOrigin:"details",flexOriginId:"pins"})}},{key:"renderMessage",value:function e(t){if(!t||!t.ts)return null;return g.a.createElement(Sa,{msg:t,timestampClickable:true,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:wa["a"].pinned_items})}},{key:"renderFile",value:function e(t){if(!t||!t.id)return null;return g.a.createElement(ea["a"],{file:t,onClick:this.onFileClick,showActions:false})}},{key:"renderFileComment",value:function e(t){if(!t||!t.id)return null;return g.a.createElement(Ua,{commentId:t.id,fileId:t.fileId})}},{key:"render",value:function e(){var t=this.props.pin;if(t.type===me["PINNED_ITEM_TYPES"].FILE)return this.renderFile(t);if(t.type===me["PINNED_ITEM_TYPES"].FILE_COMMENT)return this.renderFileComment(t);return this.renderMessage(t)}}]);return t}(b["PureComponent"]);Wa.displayName="PinnedItem";var Ha=function e(t){return{previewFile:function e(){return t(Tt["c"].apply(void 0,arguments))}}};var Ga=Object(y["connect"])(null,Ha)(Wa);var Va=new T["b"]("channel_details");var Ka={pin:_["b"].object.isRequired,channelId:_["b"].string.isRequired,unpinMessage:_["b"].func.isRequired,pinsRemove:_["b"].func.isRequired};var za=function e(t){var a=t.pin,r=t.channelId,n=t.unpinMessage,i=t.pinsRemove;var s=Object(b["useCallback"])(function(){var e={channelId:r,reason:"pins-list-remove"};switch(a.type){case me["PINNED_ITEM_TYPES"].MESSAGE:e.ts=a.ts;break;case me["PINNED_ITEM_TYPES"].FILE:e.fileId=a.id;break;case me["PINNED_ITEM_TYPES"].FILE_COMMENT:e.fileCommentId=a.id;break;default:break}a.type===me["PINNED_ITEM_TYPES"].MESSAGE?n(e):i(e)},[a,r,n,i]);var o=Object(Xt["a"])(),l=o.featureM11nChannelDetails;if(!l)return null;return g.a.createElement($t["a"],{title:Va.t("Remove pinned item"),goButtonText:Va.t("Remove pinned item"),onGo:s},g.a.createElement("p",null,Va.t("Are you sure you want to remove this pinned item?")),g.a.createElement(Ga,{pin:a}))};za.displayName="PinnedItemRemoveConfirm";var Qa={unpinMessage:function e(){return me["unpinMessage"].apply(void 0,arguments)},pinsRemove:function e(){return Zt["c"].apply(void 0,arguments)}};var Ya=Object(y["connect"])(null,Qa)(za);var Ja=Object(I["b"])("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ts,n=a.channelId;var i=t();if(Object(me["isMessagePinned"])(i,{ts:r,channelId:n})){var s=Object(me["getItemWithPinIdentifier"])(i,{type:me["PINNED_ITEM_TYPES"].MESSAGE,channel:n,ts:r});e(Object(yt["openModal"])({element:g.a.createElement(Ya,{pin:s,channelId:n})}))}else e(Object(me["pinMessage"])({ts:r,channelId:n}))});Ja.meta={name:"togglePinWithUnpinConfirmation",key:"actionsTogglePinWithUnpinConfirmationTogglePinWithUnpinConfirmation",description:"Toggle message pinned status, with a confirmation dialog before un-pinning"};Ja.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Xa=function e(t,a,r,n){var i=r.ts,s=r.threadTs,o=r.channelId,l=r.rollup,c=r.messageContainerType;var u=Object(ft["b"])();if(a.appId)return n(Object(ht["b"])({actionId:a.id,appId:a.appId,messageTs:i,channelId:o}));switch(a.id){case x["SLACK_ACTION_IDS"].addReaction:return jt(t,r,n);case x["SLACK_ACTION_IDS"].comment:return n(Nt({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].copyLink:return n(Dt({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].copyText:return n(Ut({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].deleteMessage:return n(Ht({ts:i,channelId:o,rollup:l}));case x["SLACK_ACTION_IDS"].editMessage:u.warn("Edit message is an unhandled case");return null;case x["SLACK_ACTION_IDS"].markUnread:return n(Object(vt["setUnreadPoint"])({channelId:o,unreadTs:i}));case x["SLACK_ACTION_IDS"].pin:return Object(bt["a"])()?n(Ja({ts:i,channelId:o})):n(Object(me["togglePin"])({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].remind:u.warn("Remind is an unhandled case");return null;case x["SLACK_ACTION_IDS"].removeBroadcast:return n(Kt({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].shareMessage:return n(Yt({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].star:return n(Object(Jt["b"])({ts:i,channelId:o}));case x["SLACK_ACTION_IDS"].subscribe:return n(Object(Ze["toggleThreadSubscription"])({ts:s||i,channelId:o,messageContainerType:c}));default:u.warn("Unknown action type "+a.id);return null}};var Za=Xa;var $a=a(91);var er=a(86);var tr=a(576);var ar=a(10);var rr=a.n(ar);var nr=a(1597);var ir=a(23);var sr=a(59);var or=a(213);var lr=a(330);var cr=56;var ur={action:M["a"].MessageAction.isRequired,className:_["b"].string,pillarClassName:_["b"].string,app:M["a"].maybeUnknown(M["a"].App),defaultAppIcon:_["b"].string.isRequired};var dr={className:"",pillarClassName:"",app:void 0};var pr=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["renderEnter","renderIcon","renderIconMaybe"]);return a}p()(t,[{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.defaultAppIcon;var i=r&&r.icons||a.iconSet;if(i){var s=cr;var o=Object(lr["b"])({icons:i},s,n);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(a.iconType)return g.a.createElement(ir["b"],{type:a.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,a=t.className,r=t.pillarClassName;var n=aa()(a,"c-menu_item__enter",rr()({},r+"__enter",r));return g.a.createElement(ir["a"],{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var a=this.props,r=a.action,n=a.app,i=a.className,s=a.pillarClassName;var o=aa()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":r.danger},rr()(t,""+s,s),rr()(t,s+"--danger",r.danger&&s),t));var l=n&&n.name||r.description;!l&&n&&(l=g.a.createElement(nr["a"],{type:Object(sr["d"])(n)?"unknown":"non-existent"}));return g.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},g.a.createElement("div",{className:o,"data-qa":r["data-qa"],key:r.id,id:r.id},this.renderIconMaybe(this.renderIcon()),g.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},r.label||r.name,g.a.createElement("div",{className:"c-menu_item__description"},l)),this.renderEnter()))}}]);return t}(b["PureComponent"]);pr.displayName="AppActionsDialogItem";pr.defaultProps=dr;var mr=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(or["getAppById"])(t,r.appId),defaultAppIcon:Object(or["getDefaultAppIcon"])(t)}};var hr=Object(y["connect"])(mr)(pr);var vr=a(85);var fr=a(411);var br=a(1451);var gr=a(269);var _r=a(1070);var yr=a(118);var kr=a(191);var Or=a(913);var Cr=a(763);var Er=a(919);var Sr=a(3621);var wr={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,channel:_["b"].object.isRequired,theme:_["b"].string,hasAdHocSender:_["b"].bool,userId:_["b"].string,username:_["b"].string,botId:_["b"].string,text:_["b"].string,attachments:_["b"].arrayOf(_["b"].object),blocksContainerContext:_["b"].string,blocks:M["a"].BlockKitBlocks,featureAttachmentsV2:_["b"].bool};var Ir={theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:wa["a"].app_actions,featureAttachmentsV2:false,text:void 0};var jr=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={gradient:false};a.renderAttachment=a.renderAttachment.bind(a);return a}p()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(vr["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderContent",value:function e(){var t=this.props,a=t.text,r=t.blocks,n=t.ts,i=t.blocksContainerContext,s=t.featureAttachmentsV2;if(r&&s)return g.a.createElement(_r["a"],{blocks:r,containerId:n,blocksContainerContext:i});return g.a.createElement(yr["a"],{"data-qa":"app-actions-pillow-message-text",text:a})}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.userId,r=t.hasAdHocSender,n=t.botId;return g.a.createElement(kr["b"],{className:"p-app_actions_pillow__avatar",userId:a,isAdHocMember:r,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return g.a.createElement(Or["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,a){var r=this.props,i=r.ts,s=r.channelId,o=r.blocksContainerContext;return g.a.createElement(Cr["a"],n()({key:a},Object(gr["b"])(t),{messageTs:i,activeChannelId:s,showDelete:false,blocksContainerContext:o}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return g.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.channel;return g.a.createElement("div",{className:"p-app_actions_pillow__content_header"},g.a.createElement(Er["a"],{userId:a,botId:r,username:n,channelName:Object(he["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var a=aa()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return g.a.createElement("div",{className:a,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),g.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),g.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),g.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(b["PureComponent"]);jr.displayName="AppActionsPillow";jr.defaultProps=Ir;var Tr=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(F["a"])(t,n,r);var s=Object(G["e"])(t,n);var o=Object(L["getMessageMemberId"])(i);var l=Object(L["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:s,userId:o,username:u,botId:c,theme:Object(fr["a"])(t),hasAdHocSender:Object(br["a"])(i),text:i.text,attachments:i.attachments,blocks:i.blocks,featureAttachmentsV2:Object(j["isFeatureEnabled"])(t,"feature_attachments_v2")}};var Ar=Object(y["connect"])(Tr)(jr);var Nr=a(2472);var Mr=new T["b"]("app_actions");var Pr=64;var Rr="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var xr={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,handleMessageAction:_["b"].func.isRequired,searchMessageActions:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Dr={onClose:k["noop"],onSelectAction:k["noop"]};var Fr=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={filterQuery:"",isLoading:true,isError:false,actions:[]};a.initClogged=false;Object(O["a"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);a.searchActionsDebounced=Object(k["debounce"])(a.searchActions,200,{leading:true});return a}p()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].IMPRESSION,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:C["z"].MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].CLICK,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:C["z"].GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.closeModal,o=r.handleMessageAction,e=r.onSelectAction,l=r.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:n,channelId:i});c||o(t,a,{ts:n,channelId:i});this.props.recordMessageActionFrecencyEvent({action:a,query:this.state.filterQuery});var u={ui_context:{action:C["w"].CLICK,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId?l.track(C["l"].MSG_ACTION,{contexts:u,app_id:a.appId,action_id:a.id}):l.track(C["l"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"searchActions",value:function e(){var t=this;var a=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===a&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=a}},{key:"handleSelectEvent",value:function e(t,a,r){this.onSelectAction(r,a.props.action)}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,r=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(Ar,{channelId:a,ts:r}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(er["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=g.a.createElement(hr,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=Mr.t("Search message actions\u2026");return g.a.createElement(tr["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(k["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:Pr,useFullWidthOptions:true})}},{key:"render",value:function e(){var t=this.state.isLoading;var a=Mr.t("Get more message actions");var r=Mr.t("Use an action");return g.a.createElement($a["a"],{contentLabel:r,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Rr,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(r),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["PureComponent"]);Fr.displayName="AppActionsDialog";Fr.defaultProps=Dr;function Lr(e){return{clogger:Object(E["a"])({state:e})}}var Br=function e(t){return{closeModal:function e(){return t(Object(yt["closeModal"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return Za.apply(void 0,r.concat([t]))},searchMessageActions:function e(){return t(mt.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(a){return t(R(a))}}};var Ur=Object(y["connect"])(Lr,Br)(Fr);var qr=a(530);var Wr=st["d"];var Hr=new T["b"]("app_actions");var Gr=64;var Vr="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var Kr={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,slackActions:_["b"].arrayOf(M["a"].MessageAction).isRequired,appActions:_["b"].arrayOf(M["a"].AppActionMenuItem),isLoading:_["b"].bool.isRequired,onLoad:_["b"].func.isRequired,handleMessageAction:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var zr={appActions:[],onClose:k["noop"],onSelectAction:k["noop"]};var Qr=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={normalizedFilterQuery:""};Object(O["a"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].IMPRESSION,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:C["z"].MESSAGE_ACTION_DIALOG}},app_actions_showing:this.props.appActions.length});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.ts,n=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==s)return true;if(this.props.isLoading&&!n)return true;if(this.props.channelId!==a)return true;if(this.props.ts!==r)return true;return false}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].CLICK,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:C["z"].GET_MORE_APP_ACTIONS}},app_actions_showing:this.props.appActions.length})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.closeModal,o=r.handleMessageAction,e=r.onSelectAction,l=r.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:n,channelId:i});c||o(t,a,{ts:n,channelId:i});Object(B["b"])(a,this.state.normalizedFilterQuery);var u={ui_context:{action:C["w"].CLICK,step:C["A"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId?l.track(C["l"].MSG_ACTION,{contexts:u,app_id:a.appId,action_id:a.id}):l.track(C["l"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){var a=Object(nt["a"])(t);this.setState(function(){return{normalizedFilterQuery:a}})}},{key:"getActions",value:function e(){var t=[].concat(l()(Object(k["map"])(this.props.slackActions,this.formatSlackAction)),l()(Object(k["map"])(this.props.appActions,rt)));t=Object(k["filter"])(t,this.filterAction);t=Object(B["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,a,r){this.onSelectAction(r,a.props.action)}},{key:"filterAction",value:function e(t){return it(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){return n()({},t,{danger:false,description:Hr.t("Slack")})}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,r=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(Ar,{channelId:a,ts:r}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(er["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=g.a.createElement(hr,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=Hr.t("Search message actions\u2026");return g.a.createElement(tr["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(k["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:Gr})}},{key:"render",value:function e(){var t=this.props.isLoading;var a=Hr.t("Get more message actions");var r=Hr.t("Use an action");return g.a.createElement($a["a"],{contentLabel:r,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Vr,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(r),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["Component"]);Qr.displayName="AppActionsDialog";Qr.defaultProps=zr;function Yr(e,t){var a=Wr(e),r=a.loading,n=a.actions;var i=Object(k["filter"])([H(e,t),Q(e,t),Z(e,t),ae(e,t),oe(e,t),pe(e,t),_e(e,t),We(e,t),Ke(e,t),Xe(e,t),at(e,t)]);var s=!!(r||Object(k["find"])(i,"isLoading"));return{slackActions:i,appActions:n,isLoading:s,clogger:Object(E["a"])({state:e})}}var Jr=function e(t){return{closeModal:function e(){return t(Object(yt["closeModal"])())},onLoad:function e(){return t(Object(qr["b"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return Za.apply(void 0,r.concat([t]))}}};var Xr={};Object.defineProperty(Xr,"selectMessageActions",{get:function e(){return Wr},set:function e(t){Wr=t}});var Zr=Object(y["connect"])(Yr,Jr)(Qr);var $r=function e(t){var a=t.featureAppActionsFeRefactor,r=s()(t,["featureAppActionsFeRefactor"]);if(a)return g.a.createElement(Ur,r);return g.a.createElement(Zr,r)};$r.displayName="AppActionsSwitcher";var en=function e(t){return{featureAppActionsFeRefactor:Object(j["isFeatureEnabled"])(t,"feature_app_actions_fe_refactor")}};var tn=Object(y["connect"])(en)($r);var an=Object(I["b"])("Open app actions dialog",function(e,t,a){var r=g.a.createElement(tn,a);e(Object(yt["openModal"])({element:r}))});an.meta={name:"browseAppActions",key:"actionsBrowseAppActionsBrowseAppActions",description:"Open app actions dialog"};an.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired};var rn=an;var nn=a(137);var sn=new T["b"]("message");var on=3;var ln="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";var cn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired,hasActions:_["b"].bool.isRequired,hasOverflow:_["b"].bool.isRequired,browseAppActions:_["b"].func.isRequired,clogger:_["b"].object.isRequired,featureOfflineMode:_["b"].bool.isRequired,isOffline:_["b"].bool.isRequired};var un=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);a.state={hasActions:e.hasActions};return a}p()(t,[{key:"onSelected",value:function e(t){var a=this.props,r=a.ts,n=a.channelId,i=a.onSelectAction,s=a.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:r,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(ln,"_blank");s.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].CLICK,step:C["A"].MORE_ACTIONS_MENU,ui_element:C["z"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,i=t.onSelectAction,o=t.hasActions,l=t.browseAppActions,c=t.featureOfflineMode,u=t.isOffline,d=s()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]);var p=this.state.hasActions?sn.t("More message actions\u2026"):sn.t("Add a message action\u2026");return g.a.createElement(w["a"],n()({},d,{label:p,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:ln,disabled:c&&u,showOfflineIcon:c&&u}))}}]);return t}(b["Component"]);un.displayName="BrowseAppActions";var dn=function e(t){var a=Object(st["d"])(t),r=a.actions,n=a.loading;var i=r.length;return{hasActions:n||!!i,hasOverflow:n||i>on,clogger:Object(E["a"])({state:t}),featureOfflineMode:Object(j["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(nn["c"])(t)}};var pn=function e(t){return{browseAppActions:function e(){return t(rn.apply(void 0,arguments))}}};var mn=Object(S["b"])(Object(y["connect"])(dn,pn)(un));var hn=a(69);var vn=a(349);var fn=new T["b"]("message");var bn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var gn=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(F["a"])(e,r,a);if(!n)return null;if(!Object(L["canCopyMessage"])(e,{message:n}))return null;return{id:x["SLACK_ACTION_IDS"].copyText,name:fn.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(B["f"])("copy_text"),uiElement:C["z"].COPY_LINK_BUTTON}});gn.meta={name:"copyText",key:"componentsMessageActionSelectorsCopyTextCopyText"};gn.propTypes=bn;var _n=gn;var yn=a(16);var kn=56;var On=40;var Cn={type:_["b"].oneOf(Object(k["values"])(vn["a"])),action:M["a"].MessageAction.isRequired,onSelected:_["b"].func.isRequired,app:M["a"].maybeUnknown(M["a"].App),defaultAppIcon:_["b"].string.isRequired,clogger:_["b"].object.isRequired};var En={type:vn["a"].default,app:void 0};var Sn=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.action;if(r.appId){var n={ui_context:{action:C["w"].IMPRESSION,step:C["A"].MORE_ACTIONS_MENU,ui_element:r.uiElement}};a.track(C["l"].MSG_ACTION,{app_id:r.appId,action_id:r.id,contexts:n})}}},{key:"onSelected",value:function e(t){var a=this.props,r=a.action,e=a.onSelected;e(t,r)}},{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.type,i=t.defaultAppIcon;var s=r&&r.icons||a.iconSet;if(s){var o=n===vn["a"].compactItem?On:kn;var l=Object(lr["b"])({icons:s},o,i);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:l})}if(a.iconType)return g.a.createElement(ir["b"],{type:a.iconType});return null}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.app,i=t.onSelected,o=t.type,l=s()(t,["action","app","onSelected","type"]);var c=r&&r.name||a.description;!c&&r&&(c=g.a.createElement(nr["a"],{type:Object(sr["d"])(r)?"unknown":"non-existent"}));return g.a.createElement(w["a"],n()({type:o,label:a.label||a.name,description:c,icon:this.renderIcon(),danger:a.danger,onSelected:this.onSelected,"data-qa":a["data-qa"]},l))}}]);return t}(b["PureComponent"]);Sn.displayName="MessageActionMenuItem";Sn.defaultProps=En;var wn=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(or["getAppById"])(t,r.appId),defaultAppIcon:Object(or["getDefaultAppIcon"])(t),clogger:Object(E["a"])({state:t})}};var In=Object(y["connect"])(wn)(Sn);var jn=Object(S["b"])(In);var Tn=a(3624);var An=3;var Nn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,threadTs:_["b"].string,rollup:M["a"].Rollup(),messageContainerType:_["b"].oneOf(Object(k["values"])(x["MESSAGE_CONTAINERS"])),onSelectAction:_["b"].func,onMenuItemSelected:_["b"].func,onLoad:_["b"].func,slackActions:_["b"].arrayOf(_["b"].oneOfType([M["a"].MessageAction,_["b"].node])).isRequired,canRunAppAction:_["b"].bool,appActions:_["b"].array,handleMessageAction:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,clogger:_["b"].object.isRequired,featureOfflineMode:_["b"].bool.isRequired,isOffline:_["b"].bool.isRequired};var Mn={messageContainerType:x["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:k["noop"],onMenuItemSelected:k["noop"],onLoad:k["noop"],canRunAppAction:false,appActions:[],rollup:void 0,threadTs:void 0};var Pn=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={appActions:e.appActions};Object(O["a"])(a,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return a}p()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();var t=this.props.clogger;t.track(C["l"].MSG_ACTION,{contexts:{ui_context:{action:C["w"].IMPRESSION,step:C["A"].MORE_ACTIONS_MENU,ui_element:C["z"].MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,An)})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.threadTs,s=r.channelId,o=r.handleMessageAction,e=r.onSelectAction,l=r.rollup,c=r.clogger,u=r.messageContainerType;var d=e(t,a,{ts:n,channelId:s});d||o(t,a,{ts:n,threadTs:i,channelId:s,rollup:l,messageContainerType:u});this.props.recordMessageActionFrecencyEvent({action:a});var p={ui_context:{action:C["w"].CLICK,step:C["A"].MORE_ACTIONS_MENU,ui_element:a.uiElement}};a.appId?c.track(C["l"].MSG_ACTION,{contexts:p,app_id:a.appId,action_id:a.id}):c.track(C["l"].MSG_ACTION,{contexts:p})}},{key:"renderAppActions",value:function e(){var t=this.props,a=t.onSelectAction,r=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,An).map(this.renderSingleAppAction);return[].concat(l()(s),[g.a.createElement(mn,{key:"browse_app_actions",ts:r,channelId:n,onSelectAction:a})])}},{key:"renderSingleAppAction",value:function e(t){var a=this.props,r=a.featureOfflineMode,n=a.isOffline;var i=rt(t);return g.a.createElement(jn,{key:i.id,type:vn["a"].compactItem,action:i,onSelected:this.onSelectAction,disabled:r&&n,showOfflineIcon:r&&n})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,a){if(!t)return null;if(g.a.isValidElement(t))return g.a.cloneElement(t,{key:a});var r=Object(k["omit"])(t,["iconType","iconSet"]);return g.a.createElement(jn,{key:r.id,className:"p-message_actions_menu__"+r.id,action:r,onSelected:this.onSelectAction,disabled:r.disabled,showOfflineIcon:r.showOfflineIcon})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,i=t.messageContainerType,o=t.onLoad,l=t.onMenuItemSelected,c=t.onSelectAction,u=t.canRunAppAction,d=t.appActions,p=t.slackActions,m=t.handleMessageAction,h=s()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return g.a.createElement(hn["f"],n()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:l,stripTerminalSeparators:true},h),this.renderSlackActions(),g.a.createElement(hn["d"],null),u&&this.renderAppActions())}}]);return t}(b["PureComponent"]);Pn.displayName="MessageActionsMenu";Pn.defaultProps=Mn;var Rn=function e(t,a){var r=a.channelId,i=a.ts;var s=a.messageContainerType||x["MESSAGE_CONTAINERS"].MESSAGE_PANE;var o=Object(F["a"])(t,r,i);var l=Object(L["canRunAppAction"])(o);var c=Object(yn["canRunAppAction"])(t);var u=Object(st["d"])(t),d=u.actions;var p=Object(j["isFeatureEnabled"])(t,"feature_offline_mode");var m=!Object(nn["c"])(t);var h=c&&l;var v=p?n()({},a,{disabled:m,showOfflineIcon:m}):a;var f=Object(k["filter"])([at(t,v),g.a.createElement(hn["d"],null),Object(k["includes"])([x["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,x["MESSAGE_CONTAINERS"].THREADS_VIEW,x["MESSAGE_CONTAINERS"].SLI_BRIEFING],s)&&Ke(t,a),Z(t,a),_n(t,a),Object(k["includes"])([x["MESSAGE_CONTAINERS"].MESSAGE_PANE,x["MESSAGE_CONTAINERS"].UNREAD_VIEW],s)&&pe(t,n()({},a,{allUnreads:s===x["MESSAGE_CONTAINERS"].UNREAD_VIEW})),Le(t,v),_e(t,v),oe(t,v),We(t,v),ae(t,v)]);return{slackActions:f,appActions:d,canRunAppAction:h,clogger:Object(E["a"])({state:t}),featureOfflineMode:p,isOffline:m}};var xn=function e(t){return{onLoad:function e(){return t(Object(qr["b"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return Za.apply(void 0,r.concat([t]))},recordMessageActionFrecencyEvent:function e(a){return t(R(a))}}};var Dn=Object(y["connect"])(Rn,xn)(Pn);var Fn=t["a"]=Dn},2047:function(e,t,a){"use strict";var r=a(37);var n=a.n(r);var i=a(10);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(26);var u=a.n(c);var d=a(5);var p=a.n(d);var m=a(7);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(0);var y=a(1);var k=a.n(y);var O=a(85);var C=a(13);var E=a.n(C);var S=a(12);var w=a(2);var I=a(31);var j=a(2406);var T=a(884);var A=a(35);var N=a(25);var M=a(16);var P=a(144);var R=a(41);var x=a(9);var D=a(14);var F=a(38);var L=a(1262);var B=a(129);var U=a(6);var q=a(39);var W=a(239);var H=a(251);var G=a(32);var V=a(423);var K=a(176);var z=a(23);var Q=a(162);var Y=a(526);var J=a(44);var X=a(86);var Z=a(450);var $=a(369);var ee=a(48);var te=a.n(ee);var ae=a(750);var re=a(117);var ne=a(95);var ie=a(52);var se=a(150);var oe=a(441);var le=new U["b"]("enterprise_workspaces");var ce={closeModal:_["b"].func,requestCreateWorkspaceApi:_["b"].func};var ue={closeModal:w["noop"],requestCreateWorkspaceApi:w["noop"]};var de=255;var pe=512;var me={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function he(e){var t=e.closeModal,a=e.requestCreateWorkspaceApi;var r=Object(y["useState"])(),n=te()(r,2),i=n[0],s=n[1];var o=Object(y["useState"])(),l=te()(o,2),c=l[0],u=l[1];var d=Object(y["useState"])(false),p=te()(d,2),m=p[0],h=p[1];var v=Object(y["useState"])(false),f=te()(v,2),b=f[0],g=f[1];var _=Object(y["useState"])(me.required),O=te()(_,2),C=O[0],E=O[1];var S=Object(y["useState"])(me.required),I=te()(S,2),j=I[0],T=I[1];function A(){g(false);h(true);a({workspaceName:i,workspaceMessage:c,reason:"workspace_directory_request_new_workspace"}).then(function(){return t()}).catch(function(e){var t=e.data;h(false);"name_taken"===t.error?E(me.nameTaken):g(true)})}function N(e,t){var a=t.maxLength;var r=Object(w["trim"])(e);if(!r)return me.required;if(a&&r.length>a)return me.maxLength;return}function M(e){g(false);s(e);var t=N(e,{maxLength:de});E(t)}function P(e){g(false);u(e);var t=N(e,{maxLength:pe});T(t)}return k.a.createElement(ae["a"],{labelledby:"request_workspace__title-bar",centered:true,closeModal:t},k.a.createElement(re["g"],null,k.a.createElement(re["i"],{id:"request_workspace__title-bar",title:le.t("Request creation of a new workspace")})),k.a.createElement(re["c"],null,k.a.createElement(re["d"],null,b&&k.a.createElement(ne["a"],{level:"error",className:"margin_bottom_100"},le.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),k.a.createElement("p",null,le.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),k.a.createElement(ie["a"],{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:le.t("Workspace Name")},k.a.createElement(se["a"],{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:true,onChange:M,errorText:C===me.nameTaken?le.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:i,isRequired:true,minCharacterLimit:1,maxCharacterLimit:de})),k.a.createElement(ie["a"],{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:le.t("Message to administrators")},k.a.createElement(oe["a"],{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:true,onChange:P,value:c,isRequired:true,minCharacterLimit:1,maxCharacterLimit:pe})))),k.a.createElement(re["e"],null,k.a.createElement(re["f"],null,k.a.createElement(re["b"],{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},le.t("Cancel")),k.a.createElement(re["b"],{"data-qa":"request_workspace_dialog_go_button",onClick:A,loading:m,disabled:!!(j||C||b)},le.t("Send Request")))))}he.displayName="RequestWorkspaceDialog";he.defaultProps=ue;var ve={closeModal:function e(){return R["closeModal"].apply(void 0,arguments)},requestCreateWorkspaceApi:function e(){return W["q"].apply(void 0,arguments)}};var fe=Object(S["connect"])(null,ve)(he);var be=fe;var ge=a(1289);var _e=a(1586);var ye=a(91);var ke=a(1585);var Oe=a(27);var Ce=a(211);var Ee=a(3298);var Se=new U["b"]("workspace_directory");var we={team:_["b"].shape({admins:_["b"].arrayOf(_["b"].shape({real_name:_["b"].string})),can_leave:_["b"].bool,cannot_leave_reasons:_["b"].array,created:_["b"].number,deleted:_["b"].bool,description:_["b"].string,discoverable:_["b"].string,domain:_["b"].string,enterprise_id:_["b"].string,date_requested_join:_["b"].oneOfType([_["b"].string,_["b"].number]),icon:_["b"].object,id:_["b"].string,is_member:_["b"].bool,joined_date:_["b"].number,name:_["b"].string,user_counts:_["b"].object}).isRequired,callLeaveWorkspace:_["b"].func,onClose:_["b"].func,onActionReject:_["b"].func,onActionResolve:_["b"].func,fetchEnterpriseTeamById:_["b"].func,onLeaveReject:_["b"].func,onLeaveResolve:_["b"].func,onDone:_["b"].func,fetchTeam:_["b"].func,isGuest:_["b"].bool,displayDirectoryInModal:_["b"].bool,channelRedirect:_["b"].string,postLaunchAction:_["b"].string,userIdFromURL:_["b"].string};var Ie={callLeaveWorkspace:w["noop"],onClose:w["noop"],onActionResolve:w["noop"],onActionReject:w["noop"],fetchEnterpriseTeamById:w["noop"],onLeaveReject:w["noop"],onLeaveResolve:w["noop"],onDone:w["noop"],fetchTeam:w["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var je=function(e){g()(t,e);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={team:{},loading:false};a.onWorkspaceLeave=a.onWorkspaceLeave.bind(a);a.setLoading=a.setLoading.bind(a);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var a=this.props,r=a.team,n=a.onLeaveReject,i=a.onLeaveResolve,s=a.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:r.id}).then(function(){return i({workspace:l()({},r,{is_member:false})})}).then(function(){return s()}).catch(function(e){return n({node:k.a.createElement("span",null,Se.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"setWorkspace",value:function e(t,a){this.setState(function(){return{team:t}},a)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,a=void 0===t?"":t;if(!a)return"Workspace Name";return a}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,a=t.is_member,r=t.can_leave;var n=this.props.isGuest;return a&&r&&!n}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var a=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:a,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var a=Object(w["map"])(t,function(e){return Object(M["getMemberRealName"])(e)});return Object(U["i"])(a,{noEscape:true})}},{key:"renderDialogHeaderCaption",value:function e(t){var a=this.state.loading;if(a)return null;if(!t)return null;return k.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},k.a.createElement(z["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.onActionReject,r=t.onActionResolve;var n=this.state,i=n.team,s=n.loading;if(s)return null;var o=Object(T["a"])()||Object(G["a"])()&&Object(V["b"])();var l=!o;return k.a.createElement(ke["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:a,onActionResolve:r,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:l,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var a=this.state.team;var r=a.name,n=void 0===r?"":r,i=a.domain,s=void 0===i?"":i;var o=E()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(Ce["c"])()});return k.a.createElement("div",{className:o},k.a.createElement(Z["a"],{entityType:"workspace",dimension:100,entityData:a,featureReactMessages:true,featureReactMemberProfileCard:true}),k.a.createElement("div",{className:"p-workspace_directory_dialog__name"},Se.t("{name}",{name:Object(U["q"])(n)})),k.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},Se.t("{domain}.slack.com",{domain:s})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return k.a.createElement("div",{className:"overflow_hidden margin_100"},k.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,a=t.description,r=t.admins,n=t.user_counts;var i=[];a&&i.push({heading:Se.t("About"),text:a,key:"dialog-description"});i.push({heading:Se.t("Active members"),text:Se.t("{activeMembers}",{activeMembers:Object(U["n"])(Object(w["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:Se.t("Workspace admins"),text:this.listifyAdminRealNames(r),key:"dialog-admins"});var s=function e(t){return k.a.createElement("div",{key:t.key},k.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),k.a.createElement("p",null,t.text))};return k.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return s(e)}))}},{key:"renderDialogFooter",value:function e(){return k.a.createElement(Oe["c"],{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},Se.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var a=this.canLeaveWorkspace();return k.a.createElement($["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),k.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),a&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var a=Object(Ce["f"])(t,{context:"dialog"});if(Object(Ce["c"])())return this.renderDialogOnMobile(a);var r=this.props.displayDirectoryInModal;var n=E()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!r});var i={contentLabel:a,className:n,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(a),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,invertCloseButton:true};this.canLeaveWorkspace()&&(i=l()({},i,{showFooter:true,footerText:this.renderDialogFooter()}));return k.a.createElement(ye["a"],i,this.renderDialogBody())}}]);return t}(y["Component"]);je.displayName="WorkspaceDirectoryDialog";je.defaultProps=Ie;var Te={callLeaveWorkspace:W["e"],fetchEnterpriseTeamById:W["l"]};var Ae=Object(S["connect"])(null,Te)(je);var Ne=Ae;var Me=a(1269);var Pe=a(858);var Re=a(3300);var xe={workspaces:_["b"].array.isRequired,scrollElement:_["b"].any,onScroll:_["b"].func,renderWorkspaceCard:_["b"].func,topOffset:_["b"].number};var De={scrollElement:window,onScroll:w["noop"],renderWorkspaceCard:w["noop"],topOffset:0};var Fe=function(e){g()(t,e);f()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var a=t.currentRow,r=void 0===a?0:a,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!r)return 0;if(i===o)return r;var l=r*i;return Math.floor(l/o)}}]);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["a"])(a,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);a.state={columns:3};a.list=null;a.keys=[];a.rowsByIndex=[];a.currentRow=0;return a}f()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(a,r){if(this.state.columns!==r.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:r.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys.length&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),a=t.start;this.currentRow=a||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var a=this.state.columns;var r=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+a,r.length);return Object(w["range"])(n,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var a=3;a=Object(Ce["c"])(t)?1:Object(Ce["d"])(t)?2:3;this.state.columns!==a&&this.setColumns(a)}},{key:"renderCell",value:function e(t){var a=this.props,r=a.workspaces,n=a.renderWorkspaceCard;var i=r[t];if(!i)return null;return k.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var a=this;var r=this.getWorkspacesByRowIndex(t);var n=E()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return k.a.createElement("div",{className:n},r.map(function(e){return a.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,a=t.topOffset,r=t.scrollElement,i=n()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(w["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return k.a.createElement(Pe["a"],l()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(y["PureComponent"]);Fe.displayName="WorkspaceGridList";Fe.defaultProps=De;var Le=Fe;var Be=Le;var Ue=a(583);var qe=a(69);var We=a(1466);var He=a(3302);var Ge=new U["b"]("workspace_directory");var Ve={enterprise:_["b"].shape({icon:_["b"].object,id:_["b"].string,name:_["b"].string}).isRequired,user:_["b"].shape({id:_["b"].string,is_admin:_["b"].bool,is_owner:_["b"].bool,is_primary_owner:_["b"].bool,profile:_["b"].object}).isRequired,displayManageOrgButton:_["b"].bool,displaySearchBar:_["b"].bool,isMobileView:_["b"].bool,signoutUrl:_["b"].string.isRequired,prefCompliantMemberName:_["b"].string,organizationUrl:_["b"].string,selectedSearchOption:_["b"].object,onOptionSelected:_["b"].func,onClearHeaderInput:_["b"].func};var Ke={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:w["noop"],onClearHeaderInput:w["noop"]};var ze=function(e){g()(t,e);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["a"])(a,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return a}f()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var a=this.props.signoutUrl;var r=window.location.origin+"/account/settings";switch(t){case"settings":window.open(r,"_self");break;case"signout":window.open(a,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=Ge.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return k.a.createElement(Oe["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return k.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},k.a.createElement(Me["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return k.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var a=this;var r=this.props,n=r.prefCompliantMemberName,i=r.enterprise,s=r.signoutUrl;var o=function e(){return k.a.createElement(qe["b"],{key:"workspace_directory_user_menu_name",label:k.a.createElement("span",{className:"black"},n),description:Ge.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function e(){return a.onMenuItemSelected("settings")},className:"no_underline"})};var c=function e(){return k.a.createElement(qe["b"],{key:"workspace_directory_user_menu_sign_out",label:Ge.t("Sign out of {orgName}",{orgName:Object(U["q"])(i.name)}),href:s,onSelected:function e(){return a.onMenuItemSelected("signout")},className:"no_underline",danger:true})};return k.a.createElement(qe["f"],l()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),o(),k.a.createElement(qe["d"],null),c())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return k.a.createElement(qe["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},k.a.createElement(Oe["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon"},k.a.createElement(Z["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.isMobileView,n=t.organizationUrl;var i=r?Ge.t("Directory"):Ge.t("Workspace Directory");return k.a.createElement(We["a"],{"data-qa":"ws_directory_header",title:i,team:a,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(y["Component"]);ze.displayName="WorkspaceDirectoryHeader";ze.defaultProps=Ke;var Qe=function e(t,a){var r=a.user,n=a.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(x["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(M["getPrefCompliantMemberName"])(t,r),organizationUrl:Object(Ue["a"])(t,i.domain)}};var Ye=Object(S["connect"])(Qe)(ze);var Je=Ye;var Xe=a(3304);var Ze={title:_["b"].node,description:_["b"].node,showCloseButton:_["b"].bool,onClose:_["b"].func,className:_["b"].string,isHidden:_["b"].bool};var $e={title:"",description:"",showCloseButton:false,onClose:w["noop"],className:"",isHidden:true};var et=function(e){g()(t,e);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClose=a.onClose.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}f()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return k.a.createElement(Oe["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},k.a.createElement(z["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,a=t.title,r=t.description;return k.a.createElement("div",{className:"p-workspace_directory_banner__text"},k.a.createElement("div",{className:"p-workspace_directory_banner__title"},a),k.a.createElement("span",{className:"p-workspace_directory_banner__description"},r))}},{key:"render",value:function e(){var t=this.props,a=t.showCloseButton,r=t.className;var n=E()("p-workspace_directory_banner",r);return k.a.createElement("div",{className:n},this.renderBannerText(),a&&this.renderCloseButton())}}]);return t}(y["PureComponent"]);et.displayName="WorkspaceDirectoryBanner";et.defaultProps=$e;var tt=et;var at=tt;var rt=a(2461);var nt=new U["b"]("workspace_directory");var it={enterprise:_["b"].shape({id:_["b"].string,name:_["b"].string,domain:_["b"].string,icon:_["b"].object,locale:_["b"].string}).isRequired,user:_["b"].shape({id:_["b"].string,name:_["b"].string,is_admin:_["b"].bool,is_owner:_["b"].bool,profile:_["b"].object}),fetchDirectoryWorkspaces:_["b"].func.isRequired,fetchEnterpriseTeamById:_["b"].func.isRequired,enqueueToast:_["b"].func,fetchRawMembersFromAPI:_["b"].func.isRequired,openModal:_["b"].func,closeModal:_["b"].func,allowWorkspaceRequest:_["b"].bool,showRequestDialog:_["b"].func,launchTeamId:_["b"].string,displayDirectoryInModal:_["b"].bool,onClose:_["b"].func,hasSeenOnboardingBanner:_["b"].bool,queryString:_["b"].object,setUserPrefByApi:_["b"].func,clogger:_["b"].object.isRequired,featureModernRequestWorkspaceDialog:_["b"].bool};var st={user:{},enqueueToast:w["noop"],openModal:w["noop"],closeModal:w["noop"],allowWorkspaceRequest:false,showRequestDialog:w["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:w["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:w["noop"],featureModernRequestWorkspaceDialog:false};var ot=300;var lt=Object(D["b"])();var ct=function(e){g()(t,e);f()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(w["sortBy"])(t,function(e){return e.name})}}]);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};a.dialog=null;a.headerPaneHeight=null;a.clientHeight=null;a.page=null;a.pageSearch=null;a.listRefs={allWorkspaces:null,yourWorkspaces:null};a.windowScroller=null;a.onboardingBannerHeight=0;a.trackingCode="";Object(I["a"])(a,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return a}f()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(Ce["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(Ce["m"])({trackingCode:this.trackingCode,clogger:this.props.clogger});var a=this.props.queryString&&Object(w["get"])(this.props.queryString,"user",null);a&&this.fetchSingleMemberToPrepopulate(a)}},{key:"componentDidUpdate",value:function e(t,a){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var r=this.getListHeight("yourWorkspaces");r!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:r});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(O["findDOMNode"])(this.onboardingBanner).clientHeight);!a.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();a.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(Ce["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var a=t.currentTarget.scrollTop;var r=a>=this.headerPaneHeight;r&&this.pageSearch.getWrappedInstance().blur();r!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(r)}},{key:"onWindowScrollerScroll",value:function e(t){var a=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:a})}},{key:"onFullscreenModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return lt.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var a=t.node,r=t.err;a&&this.setToastText(a);lt.error("Error with Workspace Action in WorkspaceDirectory - ",r)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.node,r=t.workspace;if(r)if(r.member){this.onWorkspaceJoin({workspace:r});if(this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else r.date_requested_join&&this.onWorkspaceRequested({workspace:r});a&&this.setToastText(a);return this.closeDialog()}},{key:"onWorkspaceRequested",value:function e(t){var a=t.workspace;if(!a)return;this.setState(function(e){var t=[].concat(u()(e.allWorkspaces.workspaces));var r=Object(w["findIndex"])(t,function(e){return e.id===a.id});if(r<0)return null;t[r]=a;var n={allWorkspaces:l()({},e.allWorkspaces,{workspaces:t})};return n})}},{key:"onWorkspaceJoin",value:function e(a){var r=this;var n=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(w["unionBy"])([n],i,"id");var o=e.yourWorkspaces.totalWorkspaces+1;var c={yourWorkspaces:l()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(s),totalWorkspaces:o}),searchResults:l()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return c})}},{key:"onWorkspaceLeave",value:function e(a){var r=this;var n=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(w["filter"])(i,function(e){return e.id!==n.id});var o=e.yourWorkspaces.totalWorkspaces-1;var c=e.allWorkspaces.workspaces;var u=Object(w["unionBy"])([n],c,"id");var d={yourWorkspaces:l()({},e.yourWorkspaces,{workspaces:s,totalWorkspaces:o}),allWorkspaces:l()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:l()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return d},function(){r.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var a=t.workspaceListKey,r=t.ref;this.listRefs[a]=r}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var a=t.workspaceListKey,r=t.topOffset;this.setState(function(e){return s()({},a,l()({},e[a],{topOffset:r}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,a){this.setState(function(e){return s()({},t,l()({},e[t],{hasApiError:a}))})}},{key:"setLoadingWorkspaces",value:function e(t,a){this.setState(function(e){return s()({},t,l()({},e[t],{loadingWorkspaces:a}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,a){this.setState(function(){return{dialogWorkspaceDetail:t}},a)}},{key:"setWorkspaceFetchOptions",value:function e(t,a){var r=a.workspaces,n=void 0===r?[]:r,i=a.totalWorkspaces,o=void 0===i?0:i,c=a.onWorkspaces,u=void 0!==c&&c,d=a.nextCursorMark,p=void 0===d?null:d;this.setState(function(e){return s()({},t,l()({},e[t],{workspaces:n,totalWorkspaces:o,onWorkspaces:u,nextCursorMark:p}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:k.a.createElement(Q["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var a=this.state.selectedOption;if("allWorkspaces"===t){var r=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return nt.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(r-n,0)})}if("yourWorkspaces"===t)return nt.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,s=i.loadingWorkspaces,o=i.totalWorkspaces;var l=Object(w["get"])(a,"selectedOptionData");if(s)return null;if("member"===Object(w["get"])(a,"type")){var c=Object(M["getMemberRealName"])(l);var u=nt.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:o});return k.a.createElement(k.a.Fragment,null,k.a.createElement(Z["a"],{entityType:"member",dimension:28,entityData:l,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),u)}if("workspace"===Object(w["get"])(a,"type")&&0===o)return nt.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(w["get"])(a,"type")||l.id===Ce["b"])&&o>0)return nt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:o,searchQuery:Object(w["get"])(l,"displayValue")});if("workspace"===Object(w["get"])(a,"type")&&o>0)return nt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:o,workspaceName:Object(w["get"])(a,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var a=this.state.allWorkspaces.workspaces;var r=this.state.yourWorkspaces.workspaces;return Object(w["differenceBy"])(a,r,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,a){var r=Object(w["get"])(t.searchResults,"workspaces",[]);var n=Object(w["find"])(r,function(e){return a.id===e.id});return n?Object(w["unionBy"])([a],r,"id"):r}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var a=this.props,r=a.showRequestDialog,n=a.featureModernRequestWorkspaceDialog,i=a.openModal;n?i({element:k.a.createElement(be,null),isStackable:true}):r({displayModernToast:function e(a){var r=a.type,n=a.errorType,i=a.teamName;var s=Object(Ce["g"])({type:r,errorType:n,teamName:i});t.setToastText(k.a.createElement("div",{className:"display_flex"},"success"===r&&k.a.createElement(z["b"],{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),k.a.createElement("span",null,s)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,a=t.selectedOptionData,r=t.type;var n={};if(!a)return;this.setLoadingWorkspaces("searchResults",true);if(Object(w["get"])(a,"id")===Ce["b"])n.searchTerm=a.displayValue;else{n.id=a.id;n.type="member"===r?"single_user":"single_workspace"}Object(Ce["j"])({searchType:r,clogger:this.props.clogger});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var a=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};a.setState(t)})}},{key:"openDialog",value:function e(t){var a=this;var r=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+r.id);Object(Ce["n"])({teamId:r.id,trackingCode:this.trackingCode,clogger:this.props.clogger});this.setDialogWorkspaceDetail(r,function(){a.dialog=a.props.openModal({element:a.renderDialog(),isStackable:true,name:"find-more-workspaces-info"})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"fetchWorkspacesWithArgs",value:function e(t){var a=t.type,r=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(w["isEmpty"])(s);var l=r===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:a,id:r,searchTerm:n}})}},{key:"fetchTeam",value:function e(t){var a=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){a.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});a.openDialog({team:e})}).catch(function(e){a.setViewingHiddenWorkspace(true);lt.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.additionalOptions,n=a.workspaceListKey,i=void 0===n?"allWorkspaces":n;var s=this.state[i].nextCursorMark;this.setHasApiError(i,false);return this.props.fetchDirectoryWorkspaces(l()({nextCursorMark:s},r)).then(function(e){var a=e.num_found,r=e.on_workspaces,n=e.items;var o=n;s&&(o=Object(w["unionBy"])(t.state[i].workspaces,o,"id"));t.setWorkspaceFetchOptions(i,{workspaces:o,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(i,false)}).catch(function(e){t.setHasApiError(i,true);t.setLoadingWorkspaces(i,false);lt.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<ot}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop;var r=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===r&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(r)?this.setLoadingWorkspaces(r,true):!i&&this.hasFetchedAllWorkspaces(r)&&this.setLoadingWorkspaces(r,false)}},{key:"renderDialog",value:function e(){var t=this.state,a=t.dialogWorkspaceDetail,r=t.displayDirectoryInModal;var n=this.props.user;var i=Object(w["get"])(this.props.queryString,"channel",null);var s=Object(w["get"])(this.props.queryString,"action",null);var o=Object(w["get"])(this.props.queryString,"user",null);var l=Object(M["isGuest"])(n);return k.a.createElement(Ne,{team:a,displayDirectoryInModal:r,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:i,postLaunchAction:s,userIdFromURL:o})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.renderFullPage;var r=E()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!a});return k.a.createElement("div",{className:r},k.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(w["isEmpty"])(t))return null;var a=Object(T["a"])()||Object(G["a"])()&&Object(V["b"])();var r=!a;return k.a.createElement(_e["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:r,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return k.a.createElement("div",{className:"p-workspace_directory__title"},nt.t("Workspaces at {name}",{name:Object(U["q"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return k.a.createElement("div",{className:"p-workspace_directory__search"},k.a.createElement(Me["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(w["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,a=t.displayDirectoryInModal,r=t.user;var n=E()("p-workspace_directory__header_pane",{margin_top_75:a});return k.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!a&&this.renderTitle(),!Object(M["isGuest"])(r)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return k.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var a=this;var r=t.listProps,n=t.workspaceListKey;var i=this.getWorkspacesForList(n);var s=this.state[n].loadingWorkspaces;if("searchResults"===n&&Object(w["isEmpty"])(i)&&!s)return this.renderSearchEmptyState();if(Object(w["isEmpty"])(i)&&!s)return null;var o=this.getWorkspaceListTopOffset(n);var c=this.getListHeading(n);return k.a.createElement(k.a.Fragment,null,this.renderListHeading(c),k.a.createElement("div",{className:"p-workspace_directory__list"},k.a.createElement(Be,l()({scrollElement:this.page,workspaces:i,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:o,ref:function e(t){return a.setListRef({workspaceListKey:n,ref:t})}},r))),s&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.selectedOption;var i=Object(w["get"])(n,"selectedOptionData");var s=void 0;var o=void 0;if(Object(Ce["h"])(i)){var l=Object(w["get"])(r,"totalWorkspaces");var c=Object(w["get"])(r,"onWorkspaces");var u=Object(M["getMemberRealName"])(i);if(Object(ge["c"])({totalWorkspaces:l,onWorkspaces:c})&&!Object(ge["b"])({totalWorkspaces:l,onWorkspaces:c})){s=nt.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u});o=nt.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return k.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}if(Object(ge["b"])({totalWorkspaces:l,onWorkspaces:c})){s=nt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u});o=nt.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return k.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}return k.a.createElement("div",{className:"align_center"},k.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},k.a.createElement(Z["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),s),k.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}s=nt.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(w["get"])(i,"displayValue")});o=nt.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return k.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}});return k.a.createElement("div",{className:"align_center"},k.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s),k.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var a=this.state.hideOnboardingBanner;var r=E()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":a});var n=nt.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return k.a.createElement(at,{title:nt.t("What is a workspace?"),description:n,className:r,onClose:this.onOnboardingBannerDismiss,isHidden:a,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var a=this.props.allowWorkspaceRequest;if(!a)return null;var r=nt.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var a=e.text;return k.a.createElement(J["a"],{onClick:t.openWorkspaceRequestForm},a)});return k.a.createElement(at,{title:nt.t("Can\u2019t find your workspace?"),description:r,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:w["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var a=this.state.selectedOption;var r=t.onChildScroll,i=t.registerChild,s=n()(t,["onChildScroll","registerChild"]);var o=l()({onScroll:r,scrollElement:this.page},s);var c=!!Object(w["get"])(a,"selectedOptionData");if(c)return k.a.createElement("div",{ref:i},this.renderSearchResults(o));return k.a.createElement("div",{ref:i},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.hideOnboardingBanner;var i=E()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var s={};this.onboardingBannerHeight&&!n&&(s.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return k.a.createElement(k.a.Fragment,null,this.renderOnboardingBanner(),k.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:s},k.a.createElement(j["a"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(w["get"])(r,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var a=this.props.enterprise;return k.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},k.a.createElement(gt,l()({enterprise:a},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var a=this.state.viewingHiddenWorkspace;var r=this.state.allWorkspaces,n=r.workspaces,i=r.loadingWorkspaces;var s=this.state.yourWorkspaces,o=s.workspaces,l=s.loadingWorkspaces;var c=!l&&Object(w["isEmpty"])(o);var u=!i&&Object(w["isEmpty"])(n);if(c&&Object(M["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(u&&c)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(a)return this.renderEmptyState({isHiddenWorkspace:true});return k.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,a=t.user,r=t.enterprise;var n=this.state,i=n.isMobileView,s=n.hasScrolledPastHeaderPane,o=n.selectedOption;var l=a.is_admin||a.is_owner;return k.a.createElement(Je,{enterprise:r,displayManageOrgButton:l,displaySearchBar:this.headerPane&&s,"data-js":"workspace_directory_sticky_header",user:a,isMobileView:i,selectedSearchOption:Object(w["get"])(o,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var a=E()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return k.a.createElement($["a"],{onCancel:this.onFullscreenModalClose,showCancelButton:false,showGoButton:false,title:nt.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},k.a.createElement("div",{className:a,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var a=this.state.allWorkspaces,r=a.workspaces,n=a.loadingWorkspaces;var i=this.state.yourWorkspaces,s=i.workspaces,o=i.loadingWorkspaces;var l=o&&Object(w["isEmpty"])(s);var c=n&&Object(w["isEmpty"])(r);var u=l||c;if(t)return this.renderDirectoryInModal();return k.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),u&&this.renderInfiniteSpinner({renderFullPage:true}),k.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),k.a.createElement(Y["a"],null))}}]);return t}(y["Component"]);ct.displayName="WorkspaceDirectory";ct.defaultProps=st;var ut=function e(t,a){var r=a.userId;var n=Object(A["h"])(t)||{};var i=Object(N["e"])(t,r);var s=Object(L["f"])(t,"enterprise_team_creation_request");var o=s&&s.is_enabled&&!Object(M["isGuest"])(i);var c=Object(x["isClientApp"])(t);var u=Object(F["h"])(t,"seen_onboarding_banner");var d=Object(q["a"])({state:t});return{enterprise:n,user:l()({id:r},i),allowWorkspaceRequest:o,displayDirectoryInModal:c,hasSeenOnboardingBanner:u,clogger:d,featureModernRequestWorkspaceDialog:Object(x["isFeatureEnabled"])(t,"feature_modern_request_workspace_dialog")}};var dt={enqueueToast:P["enqueueToast"],openModal:function e(){return R["openModal"].apply(void 0,arguments)},closeModal:R["closeModal"],fetchRawMembersFromAPI:H["h"],setUserPrefByApi:B["d"],fetchEnterpriseTeamById:W["l"],fetchDirectoryWorkspaces:W["k"]};var pt=Object(S["connect"])(ut,dt,null,{areStatePropsEqual:function e(t,a){return Object(K["a"])(t,a,2)}})(ct);var mt=new U["b"]("workspace_directory");var ht={enterprise:_["b"].shape({id:_["b"].string,name:_["b"].string,domain:_["b"].string,icon:_["b"].object,locale:_["b"].string}).isRequired,isZeroWorkspaceGuest:_["b"].bool,isZeroWorkspaceOrg:_["b"].bool,isHiddenWorkspace:_["b"].bool,directoryUrl:_["b"].string};var vt={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var ft=function(e){g()(t,e);function t(e){p()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.redirectToDirectory=a.redirectToDirectory.bind(a);return a}f()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,a=t.enterprise,r=t.isHiddenWorkspace;var n=r?mt.t("No workspace found"):mt.t("No available workspaces");return k.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},k.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},k.a.createElement(Z["a"],{entityType:"org",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return k.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},mt.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(U["q"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return k.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},mt.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(U["q"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return k.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},mt.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(U["q"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.isZeroWorkspaceGuest,r=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(a)return this.renderZeroWorkspaceGuestBody();if(r)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return k.a.createElement(J["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},mt.t("View all {orgName} workspaces",{orgName:Object(U["q"])(t.name)}),k.a.createElement(z["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(y["PureComponent"]);ft.displayName="WorkspaceDirectoryEmptyState";ft.defaultProps=vt;var bt=function e(t,a){var r=a.enterprise;return{directoryUrl:Object(Ue["a"])(t,r.domain)}};var gt=Object(S["connect"])(bt)(ft);a.d(t,"a",function(){return gt});var _t=t["b"]=pt},2048:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(2);var g=a(31);var _=a(9);var y=a(61);var k=a(38);var O=a(137);var C=a(33);var E=a(213);var S=a(1186);var w=a(837);var I=a(44);var j=a(914);var T=a(565);var A=a(23);var N=a(69);var M=a(1143);var P=a(844);var R=a(18);var x=a(24);var D=Object(x["b"])("TS.client.ui.files.backButtonOnClick");var F=Object(x["b"])("TS.client.ui.files.chooseFile");var L=a(6);var B=a(39);var U=a(14);var q=a(114);var W=a(131);var H=a(82);var G=a(35);var V=a(28);var K=a(22);var z=Object(q["e"])("Opens the docs Gantry app in a new window",function(e,t){var a=t();var r=Object(H["a"])(a);var n=Object(G["d"])(a);var i=Object(V["getTeamId"])(n);var s=Object(K["a"])(a);if(!Object(W["a"])(r))return;var o={origin_team:s||i,origin_channel:r};e(Object(w["c"])({pathname:"/docs/"+i,queryStringParams:o}))});z.meta={name:"createPost",key:"actionsDocsCreatePostCreatePost",description:"Opens the docs Gantry app in a new window"};z.propTypes=v["b"].object;var Q=a(1459);var Y=a(2063);var J=a(17);var X=a(370);var Z=a(192);var $=a(41);var ee=new L["b"]("file-upload");var te={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function ae(e){var t=e.type,a=e.featureBoxContentPicker,r=e.proceedToNextDialog;var n=a?ee.t("Your file can\u2019t be added"):"";var i="";switch(t){case te.SINGLE_LINK_MISSING:i=a?ee.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case te.MULTIPLE_LINK_MISSING:i=a?ee.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case te.WEBLINK:i=a?ee.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var s=r!==b["noop"]?function(){Object(b["defer"])(function(){r()})}:b["noop"];return h.a.createElement(X["a"],{title:n,onGo:s},h.a.createElement("p",null,i))}ae.displayName="BoxLinkAlert";ae.defaultProps={type:te.SINGLE,proceedToNextDialog:b["noop"],featureBoxContentPicker:false};var re=Object(Z["a"])("feature_box_content_picker")(ae);var ne=Object(q["e"])("Display Box Link Alert error",function(e,t,a){return e(Object($["openModal"])({element:h.a.createElement(re,a)}))});ne.meta={name:"openBoxLinkAlert",key:"componentsShareDialogsBoxLinkAlertOpenBoxLinkAlert",description:"Display Box Link Alert error"};ne.propTypes={};var ie=ne;var se=a(385);var oe=a(495);var le=a(1567);var ce=a(318);var ue=a(4502);var de={url:v["b"].string.isRequired,windowFeatures:v["b"].object,hidden:v["b"].bool,processEvent:v["b"].func};var pe={width:590,height:520};var me="REMOTE-FILE-PICKER";var he="fp_";var ve=function e(t,a){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.resolve,i=r.reject;if(!Object(C["isSSB"])()){if(e.source!==t)return;if(e.origin!==window.location.origin)return}if(!e.data||e.data._sourceId!==a)return;e.data.ok&&n(e.data);var s=new Error("Data not OK");s.data=e.data;i(s)}};var fe=function e(t){return new Promise(function(e,a,r){var n=void 0;var i=function r(i){var s=function t(a){e(a);n()};var o=function e(t){a(t);n()};try{t(i,{resolve:s,reject:o})}catch(e){o(e)}};n=function e(){return window.removeEventListener("message",i)};r(n);window.addEventListener("message",i)})};var be=Object(J["b"])("Open third-party file picker window and handle callback",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.hidden,i=a.url,s=a.windowFeatures,o=a.processEvent;var l=Object(U["a"])({getState:t,label:me});var c=t();var u=Object(K["b"])(c);var d=n()({},pe,s,{parentTeamId:u});Object(C["isSSB"])()&&(ue["a"].canOpenURLInWindow(c,i)||l.error(me,"Trying to open remote file picker URL in SSB but URL is not whitelisted: "+i));var p=Object(b["uniqueId"])(he);var m=i+(i.includes("?")?"&":"?")+"source_id="+p;var h=void 0;var v=function e(){return h.cancel()};var f=void 0;var g=void 0;try{if(Object(C["isSSB"])()){f=r?Object(w["d"])(m,{show:false,skipTaskbar:true,frame:false,opacity:0,transparent:true,focusable:false,parentTeamId:u}):Object(w["d"])(m,d);f.addListener("close",v)}else if(r){g=document.createElement("iframe");g.setAttribute("data-qa","picker-frame");g.src=m;g.style.cssText="display:none";document.body.appendChild(g);f=g.contentWindow}else{f=Object(w["d"])(m,d);f&&f.addEventListener("beforeunload",v)}if(!f)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}h=fe(o||ve(f,p));h.finally(function(){g?g.remove():f&&f.close()}).catch(b["noop"]);return h});be.meta={name:"openRemoteFilePicker",key:"actionsCloudFilePickersOpenRemoteFilePickerOpenRemoteFilePicker",description:"Open third-party file picker window and handle callback"};be.propTypes=de;var ge=be;var _e=new L["b"]("files");var ye={channelId:v["b"].string.isRequired,threadTs:v["b"].string,metadata:v["b"].shape({fileUploadAction:v["b"].oneOfType([v["b"].number,v["b"].string]),fileUploadSrc:v["b"].oneOfType([v["b"].number,v["b"].string])})};var ke=function e(t){if(!Object(b["isPlainObject"])(t))return false;if("file"!==t.type)return false;if(!Object(b["isString"])(t.name))return false;if(!Object(b["isPlainObject"])(t.shared_link))return false;if(!Object(b["isString"])(t.shared_link.url))return false;return true};var Oe=function e(t){var a=C["isDev"]?"A06147X5W":"A0F82E57C";var r=Object(G["d"])(t);return Object(V["getTeamUrl"])(r,"/apps/"+a)};var Ce=Object(J["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;var s=t();var o=Object(K["b"])(s);var l=Object(_["isFeatureEnabled"])(s,"feature_sonic_cloud_files_picker");var c=Object(_["isFeatureEnabled"])(s,"feature_box_content_picker");if(!l||!c)return Object(se["k"])(r,n,i);var u=Object(_["isFeatureEnabled"])(s,"feature_box_app_migration");var d=location.origin+"/files/import/box?team="+o;return e(ge({url:d,windowFeatures:{height:675,width:925}})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=[];var l=[];var c=[];s.forEach(function(t){t&&(ke(t)?u?e(Object(le["a"])({channel:r,thread_ts:n,text:t.shared_link.url})):o.push({name:t.name,link:t.shared_link.url,is_box:true}):"web_link"===t.type?u?e(Object(le["a"])({channel:r,thread_ts:n,text:t.url})):c.push({name:t.name,url:t.url}):l.push(t))});var d=o.length&&!u?function(){return e(Object(oe["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}))}:b["noop"];var p=c.length?function(){return e(ie({type:te.WEBLINK,proceedToNextDialog:d}))}:d;if(l.length>0)return e(ie({type:s.length>1?te.MULTIPLE_LINK_MISSING:te.SINGLE_LINK_MISSING,proceedToNextDialog:p}));if(c.length)return p();return d()}).catch(function(t){if(t&&t.data&&t.data.error)switch(t.data.error){case"no_access_token":case"unauthorized":e(Object(ce["addOrFlashEphemeralBotMsg"])({ephemeralType:ce["EphemeralTypes"].boxFilePickerError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:c?_e.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:Oe(s)}):""}}));break;default:break}throw t})});Ce.meta={name:"openBoxFilePicker",key:"actionsCloudFilePickersOpenBoxFilePickerOpenBoxFilePicker",description:"Open a window to pick a Box file"};Ce.propTypes=ye;var Ee=Ce;var Se=a(64);var we=a.n(Se);var Ie={channelId:v["b"].string.isRequired,threadTs:v["b"].string,metadata:v["b"].shape({fileUploadAction:v["b"].oneOfType([v["b"].number,v["b"].string]),fileUploadSrc:v["b"].oneOfType([v["b"].number,v["b"].string])})};var je=function e(t){if(!t||"object"!==("undefined"===typeof t?"undefined":we()(t)))return false;if("string"!==typeof t.name)return false;if("number"!==typeof t.bytes)return false;if("string"!==typeof t.link)return false;if(t.icon&&"string"!==typeof t.icon)return false;return true};var Te=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.resolve,n=a.reject;if("https://www.dropbox.com"!==t.origin)return;var i=void 0;try{i="string"===typeof t.data?JSON.parse(t.data):t.data}catch(e){return}if(!i||"object"!==("undefined"===typeof i?"undefined":we()(i)))return;switch(i.method){case"files_selected":Object(b["isArray"])(i.params)&&Object(b["every"])(i.params,je)&&r({chosen_files:i.params});n(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":r({chosen_files:[]});break;default:break}};var Ae=void 0;var Ne=Object(J["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(se["l"])(r,n,i);var s=t();var o=Object(K["b"])(s);Ae&&Ae.isPending()&&Ae.cancel();var l=location.origin+"/files/import/dropbox?team="+o;Ae=e(ge({url:l,processEvent:Te,windowFeatures:{height:552,width:640}}));return Ae.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=s.map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:true}});if(o.length)return e(Object(oe["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}));return null})});Ne.meta={name:"openDropbox",key:"actionsCloudFilePickersOpenDropboxFilePickerOpenDropbox",description:"Open a window to pick a Box file"};Ne.propTypes=Ie;var Me=Ne;var Pe=a(10);var Re=a.n(Pe);var xe=a(250);var De=new L["b"]("files");var Fe={channelId:v["b"].string.isRequired,threadTs:v["b"].string,metadata:v["b"].shape({fileUploadAction:v["b"].oneOfType([v["b"].number,v["b"].string]),fileUploadSrc:v["b"].oneOfType([v["b"].number,v["b"].string])}),reason:v["b"].string};var Le="GDRIVE_FILE_PICKER";var Be={AUTH_REQUIRED:"auth_required",FILENAME_TOO_LONG:"filename_too_long",UNIDENTIFIED_EXTERNAL_URL:"unidentified_external_url",FILE_TYPE_HAS_NO_HANDLER:"file_type_has_no_handler"};var Ue="A0BDLPR2L";var qe="A6NL8MJ6Q";var We=function e(t){var a=Object(G["d"])(t);return Object(V["getTeamUrl"])(a,"apps/"+(C["isDev"]?Ue:qe))};var He=Object(J["b"])("Open a window to pick a GDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata,s=a.reason;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(se["i"])(r,n,i);var o=t();var l=Object(K["b"])(o);var c=location.origin+"/files/import/gdrive?team="+l;return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(Be.AUTH_REQUIRED)}).then(function(){return e(ge({url:c,windowFeatures:{height:675}}))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files;var l=Date.now();return Promise.map(a,function(t){return e(Object(xe["s"])({channels:r,threadTs:n,link:t.url,reason:s||"open-gdrive-file-picker"})).then(function(){var e;var a=Object(B["a"])({state:o});a.track(R["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},Re()(e,R["d"].type,R["o"].EXTERNAL),Re()(e,R["d"].duration,Date.now()-l),Re()(e,R["d"].has_upload_message,false),Re()(e,R["d"].file_count,1),Re()(e,R["d"].retry_count,0),Re()(e,R["d"].upload_size,t.sizeBytes?t.sizeBytes:0),Re()(e,R["d"].retry_reason,""),Re()(e,R["d"].did_disconnect_during_upload,false),Re()(e,R["d"].file_upload_action,i&&i.fileUploadAction),Re()(e,R["d"].file_upload_src,i&&i.fileUploadSrc),e))})})}).catch(function(a){var i=function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.text,s=a.ephemeralType;return e(Object(ce["addOrFlashEphemeralBotMsg"])({ephemeralType:s||ce["EphemeralTypes"].gdriveShareFileError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:i||De.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))};var s=a&&(a.data&&a.data.error||a.message);if(s===Be.FILENAME_TOO_LONG)return i({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."});var l=[Be.FILE_TYPE_HAS_NO_HANDLER,Be.UNIDENTIFIED_EXTERNAL_URL];if(l.includes(s)&&a.args&&a.args.link)return e(Object(le["a"])({channel:r,thread_ts:n,text:a.args.link,unfurl_links:false,unfurl_media:false})).then(function(){return i({ephemeralType:ce["EphemeralTypes"].fileTypeHasNoHandler,text:De.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})}).catch(i);if(s===Be.AUTH_REQUIRED)return i({text:De.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:We(o)})});Object(U["a"])({getState:t}).error(Le,a);return i()})});He.meta={name:"openGdriveFilePicker",key:"actionsCloudFilePickersOpenGdriveFilePickerOpenGdriveFilePicker",description:"Open a window to pick a GDrive file"};He.propTypes=Fe;var Ge=He;var Ve=a(574);var Ke=a(1291);var ze=a(80);var Qe=new L["b"]("files");var Ye={channelId:v["b"].string.isRequired,threadTs:v["b"].string,metadata:v["b"].shape({fileUploadAction:v["b"].oneOfType([v["b"].number,v["b"].string]),fileUploadSrc:v["b"].oneOfType([v["b"].number,v["b"].string])}),reason:v["b"].string};var Je="OneDrive_plus_button_import_failure";var Xe={AUTH_REQUIRED:"auth_required",ONENOTE_NOT_SUPPORTED:"onenote_not_supported",POPUP_BLOCKED:"popupOpen",BAD_RESPONSE:"badResponse"};var Ze=function e(t){var a=Object(G["d"])(t);return Object(V["getTeamUrl"])(a,C["isDev"]?"apps/A061CBSP3":"apps/A53TM6XA9")};var $e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.data)return t.message||"Data not OK";if(t.method&&"files.uploadExternal"===t.method&&t.data.error)return t.data.error;if(t.data.method&&"onedrive_picker"===t.data.method&&t.data.error_code)return t.data.error_code;return t.message||"Data not OK"};var et=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state,r=t.channelId,n=t.threadTs,i=t.reason,s=t.link;if(Object(y["a"])(a,"onedrive_app_installed"))return Object(Ve["a"])({channelId:r,text:s,shouldBroadcast:false});return Object(xe["s"])({channels:r,threadTs:n,link:s,reason:i||"open-onedrive-file-picker"})};var tt=Object(J["b"])("Open a window to pick a OneDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata,s=a.reason;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(se["j"])(r,n,i);var o=t();var l=Object(K["b"])(o);var c=location.origin+"/files/import/onedrive?team="+l+(C["isJsPath"]?"&js_path=1":"");if(C["isDev"]&&Object(y["a"])(o,"onedrive_app_installed")){var u=Object(C["getEnvironment"])().envSubdomain;"dev"===u||"dev6"===u||Object(ze["error"])("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(Xe.AUTH_REQUIRED)}).then(function(){return e(ge({url:c,hidden:true}))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files;var l=Date.now();return Promise.map(a,function(t){return e(et({state:o,channelId:r,threadTs:n,reason:s,link:t})).then(function(){var e;var t=Object(B["a"])({state:o});t.track(R["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},Re()(e,R["d"].type,R["o"].EXTERNAL),Re()(e,R["d"].duration,Date.now()-l),Re()(e,R["d"].has_upload_message,false),Re()(e,R["d"].file_count,1),Re()(e,R["d"].retry_count,0),Re()(e,R["d"].upload_size,0),Re()(e,R["d"].retry_reason,""),Re()(e,R["d"].did_disconnect_during_upload,false),Re()(e,R["d"].file_upload_action,i&&i.fileUploadAction),Re()(e,R["d"].file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(e){e.subtype="files.uploadExternal";throw e})})}).catch(function(a){var i=function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.text,s=a.ephemeralType;return e(Object(ce["addOrFlashEphemeralBotMsg"])({ephemeralType:s||ce["EphemeralTypes"].onedriveSdkError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:i||Qe.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))};var s=$e(a);if(s===Xe.AUTH_REQUIRED)return i({text:Qe.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:Ze(o)})});if(s===Xe.ONENOTE_NOT_SUPPORTED)return i({text:Qe.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(s===Xe.POPUP_BLOCKED)return e(Object(Ke["updateEnablePopupsBannerVisibility"])(true));if(s===Xe.BAD_RESPONSE){var l=a&&a.data&&a.data.error||s;a.message=l;Object(U["a"])({getState:t}).error(Je,a);return i({text:Qe.t("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again.\nIf the problem persists, please let us know by contacting <mailto:feedback@slack.com|feedback@slack.com>")})}a.message=s;Object(U["a"])({getState:t}).error(Je,a);return i()})});tt.meta={name:"openOneDriveFilePicker",key:"actionsCloudFilePickersOpenOnedriveFilePickerOpenOneDriveFilePicker",description:"Open a window to pick a OneDrive file"};tt.propTypes=Ye;var at=tt;var rt=a(26);var nt=a.n(rt);var it=a(4647);var st=a(13);var ot=a.n(st);var lt=a(750);var ct=a(1169);var ut=a(905);var dt=a(846);var pt=a(906);var mt=a(27);var ht=a(858);var vt=a(32);var ft=a(86);var bt=a(551);var gt=a(891);var _t=a(1306);var yt=a(1675);var kt=a(3729);var Ot=a(1676);var Ct=new L["b"]("menu_file");var Et=Object(yt["a"])(_t["a"]);var St={files:v["b"].array,filetype:v["b"].string,user:v["b"].bool,showUpload:v["b"].bool,scrollmark:v["b"].shape({key:v["b"].string,offset:v["b"].number}),fetchFilesPre:v["b"].func,fetchFilesPost:v["b"].func,saveScrollmark:v["b"].func,setFiletype:v["b"].func,channelId:v["b"].string.isRequired,threadTs:v["b"].string,viewContext:v["b"].string,setUser:v["b"].func,openShareDialog:v["b"].func,getRecentFilesForUser:v["b"].func,hiddenFileInputRef:v["b"].object,currentUser:v["b"].string,clogger:v["b"].object.isRequired,logger:v["b"].object.isRequired,isInEnforceFileLimitTreatment:v["b"].bool,closeModal:v["b"].func,setisLoading:v["b"].func,isLoading:v["b"].bool};var wt={threadTs:void 0,viewContext:void 0,files:[],filetype:"",currentUser:"",user:false,scrollmark:void 0,fetchFilesPre:b["noop"],fetchFilesPost:b["noop"],saveScrollmark:b["noop"],setFiletype:b["noop"],setUser:b["noop"],getRecentFilesForUser:b["noop"],closeModal:b["noop"],openShareDialog:b["noop"],isInEnforceFileLimitTreatment:false,hiddenFileInputRef:void 0,showUpload:false,isLoading:v["b"].bool,setisLoading:v["b"].func};var It=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(a,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogPricingLinkClick","renderBody","isEmpty","onModalCancel","renderList","renderDynamicList","handleFileTypeChange","handleYourFilesClick","handleYourWorkspaceClick","fetchAllFiles","selectFileFromComputer"]);a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.requestAll=null;a.layout=new gt["a"];a.list=h.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.scrollmark,r=t.clogger,n=t.user;if(a){var i=a.key,s=a.offset;this.layout.setAnchor(i,s);this.props.saveScrollmark(null)}if(n){var o={types:this.props.filetype};this.fetchAllFiles(o)}this.shouldShowStorageWarningBanner()&&r.track(R["l"].GROWTH_PRICING,{contexts:{ui_context:{action:R["w"].IMPRESSION,step:R["A"].FILE_PANE,ui_component:R["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){this.props.setFiletype("");this.requestAll&&this.requestAll.cancel()}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.list.current;if(!r)return;if(!a)return;var n=this.props,i=n.user,s=n.clogger;var o=i?R["l"].OMNIPICKER_DIALOG_SHARE_YOUR_RECENT_FILE:R["l"].OMNIPICKER_DIALOG_SHARE_WORKSPACE_FILE;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-r.getScrollTop()});this.props.openShareDialog({fileId:a,showFileType:true});s.track(o,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG}}})}},{key:"onModalCancel",value:function e(){var t=this.props.clogger;this.props.closeModal();t.track(R["l"].OMNIPICKER_DIALOG_CLOSE_DIALOG,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG}}})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var a=this.props.filetype;var r={types:a};this.requestPre=this.props.fetchFilesPre(r);this.reachedStart||this.props.setisLoading(true);return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;if(1===r){t.reachedStart=true;t.props.setisLoading(false)}}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var a=this.props.filetype;var r={types:a};this.requestPost=this.props.fetchFilesPost(r);return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"fetchAllFiles",value:function e(t){this.props.setisLoading(true);this.requestAll=this.props.getRecentFilesForUser(n()({user:this.props.currentUser,reason:"get-recent-files",count:1e3},t))}},{key:"handleFileTypeChange",value:function e(t){this.props.setFiletype(t);if(this.props.user){var a={types:t};this.fetchAllFiles(a)}}},{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.hiddenFileInputRef,s=t.clogger,o=t.logger;if(i&&i.current){i.current.click();this.props.closeModal()}else Object(vt["a"])()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):F(a,r,n);s.track(R["l"].OMNIPICKER_DIALOG_UPLOAD_FILE,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG}}})}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(R["l"].GROWTH_PRICING,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG,ui_element:R["z"].PRICING_LINK,ui_component:R["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isEmpty",value:function e(){var t=this.props.user;return t?!this.props.files.length:!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"shouldShowStorageWarningBanner",value:function e(){return this.props.isInEnforceFileLimitTreatment}},{key:"handleYourFilesClick",value:function e(){var t=this.props,a=t.filetype,r=t.clogger;this.props.setUser(true);var n={types:a};this.fetchAllFiles(n);r.track(R["l"].OMNIPICKER_DIALOG_VIEW_YOUR_FILES,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG}}})}},{key:"handleYourWorkspaceClick",value:function e(){var t=this.props.clogger;this.props.setUser(false);t.track(R["l"].OMNIPICKER_DIALOG_VIEW_WORKSPACE_FILES,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].OMNIPICKER_DIALOG}}})}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return h.a.createElement("div",{className:"p-omnipicker_dialog__list--loading"},Ct.t("Loading\u2026"));case"P":return h.a.createElement("div",{className:"p-omnipicker_dialog__list--empty"},Ct.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var a=this.props.files[t]&&this.props.files[t].id;if(!a)return null;var r=t===this.props.files.length-1;var n=ot()("p-omnipicker_dialog__file",{"p-omnipicker_dialog__file--last":r});return h.a.createElement(Et,{fileId:a,className:n,showActions:false,"data-qa":"test-file",fullWidth:true})}},{key:"renderStorageWarningBanner",value:function e(){var t=this;var a=new L["b"]("files");return h.a.createElement("div",{className:"p-omnipicker_dialog__storage-warning-container"},h.a.createElement("div",{className:"display_flex"},h.a.createElement(A["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),h.a.createElement("div",null,h.a.createElement("span",null,a.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var a=e.text;return h.a.createElement(I["a"],{href:"/pricing?ui_step="+R["A"].FILE_PANE+"&ui_element="+R["z"].PRICING_LINK,onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},a)})))))}},{key:"renderBody",value:function e(){var t=this.props,a=t.user,r=t.files,n=t.isLoading;var i=r.map(function(e){return e.id});this.keys=[].concat(nt()(i));a||this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n?h.a.createElement("div",{className:"p-omnipicker_dialog__loading_spinner"},h.a.createElement(ft["a"],{size:"jumbo"})):h.a.createElement("div",{className:"p-omnipicker_dialog__list_content","data-qa":"omnipicker_dialog_list"},h.a.createElement(h.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),a?this.renderList():this.renderDynamicList()))}},{key:"renderDynamicList",value:function e(){var t=this;return h.a.createElement(it["a"],null,function(e){var a=e.width,r=e.height;return h.a.createElement(bt["a"],{height:r,width:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemTabWithin:t.onItemTabWithin,onItemClick:t.onFileClick})})}},{key:"renderList",value:function e(){var t=this;return h.a.createElement(it["a"],null,function(e){var a=e.width,r=e.height;return h.a.createElement(ht["b"],{height:r,width:a,keys:t.keys,ref:t.list,layout:t.layout,onScroll:t.onScroll,rowRenderer:t.renderRow,onItemClick:t.onFileClick})})}},{key:"render",value:function e(){var t=this.props,a=t.filetype,r=t.user,n=t.showUpload;var i=Ct.t("Your recent files");var s=Ct.t("Workspace files");var o=r?i:s;return h.a.createElement(lt["a"],{className:"p-omnipicker_dialog",fullscreen:true,maxWidth:"950px",showCloseButton:false,closeModal:this.props.closeModal},h.a.createElement(ct["a"],{className:"p-omnipicker_dialog__header"},h.a.createElement(ut["a"],{id:"unshareConfirmPost__title-bar",title:"Browse","data-qa":"dialog_header"}),h.a.createElement("div",{className:"p-omnipicker_dialog__header--selector"},h.a.createElement("h3",null,o),h.a.createElement(Ot["a"],{filetype:a,onChange:this.handleFileTypeChange}))),h.a.createElement("div",{className:"p-omnipicker_dialog__content"},h.a.createElement("div",{className:"p-omnipicker_dialog__menu"},h.a.createElement(N["f"],null,h.a.createElement(N["b"],{"data-qa":"view_your_files_menu_item",label:Ct.t("Your files"),disabled:r,className:r?"c-menu_item__button__selected":"",icon:h.a.createElement(A["b"],{type:"user"}),onSelected:this.handleYourFilesClick}),h.a.createElement(N["b"],{"data-qa":"view_your_workspace_files_menu_item",label:Ct.t("Your workspace"),disabled:!r,className:r?"":"c-menu_item__button__selected",icon:h.a.createElement(A["b"],{type:"slack"}),onSelected:this.handleYourWorkspaceClick}),n&&h.a.createElement(N["b"],{"data-qa":"add_file_from_computer_menu_item",label:Ct.t("Your computer"),icon:h.a.createElement(A["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))),h.a.createElement("div",{className:"p-omnipicker_dialog__list"},this.renderBody())),h.a.createElement(dt["a"],{"data-qa":"dialog_footer"},h.a.createElement(pt["a"],null,h.a.createElement(mt["d"],{type:"outline",onClick:this.onModalCancel,"data-qa":"dialog_cancel"},"Cancel"))))}}]);return t}(m["PureComponent"]);It.displayName="OmniPickerDialog";It.defaultProps=wt;var jt=function e(t){return{files:Object(T["getDialogFiles"])(t),scrollmark:Object(T["getScrollmark"])(t),filetype:Object(T["getFiletype"])(t),clogger:Object(B["a"])({state:t}),logger:Object(U["a"])({state:t}),currentUser:Object(_["getCurrentUserId"])(t),user:Object(T["getUser"])(t),isLoading:Object(T["getisLoading"])(t)}};var Tt={fetchFilesPre:function e(){return T["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return T["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return T["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return T["setFiletype"].apply(void 0,arguments)},closeModal:function e(){return $["closeModal"].apply(void 0,arguments)},getRecentFilesForUser:function e(){return T["listAndUpsertAllFiles"].apply(void 0,arguments)},openShareDialog:function e(){return j["a"].apply(void 0,arguments)},setUser:function e(){return T["setUser"].apply(void 0,arguments)},setisLoading:function e(){return T["setisLoading"].apply(void 0,arguments)}};var At=Object(f["connect"])(jt,Tt)(It);var Nt=Object(J["b"])("Opens the omni-picker file dialog",function(e,t,a){e(Object($["openModal"])({element:h.a.createElement(At,a)}))});Nt.meta={name:"openOmniPickerDialog",key:"actionsOpenOmnipickerDialogOpenOmniPickerDialog",description:"Opens the omni-picker file dialog"};Nt.propTypes={type:v["b"].string,displayType:v["b"].string,initialChannelId:v["b"].string};var Mt=Nt;var Pt=a(210);var Rt=a(458);var xt=a(529);var Dt=a(55);var Ft=a(58);var Lt=Object(J["b"])("Creates and opens a legacy Post",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.openInBrowser;if(!Object(Dt["a"])()){Object(se["b"])(null,r);return}var n=t();var i=Object(G["d"])(n);var s=Object(V["getTeamUrl"])(i,"/files/create/post"+location.search);var o=Object(K["a"])(n);s=Object(Ft["setUrlQueryStringValue"])(s,"origin_team",o||i.id);var l=Object(H["a"])(n);s=Object(Ft["setUrlQueryStringValue"])(s,"origin_channel",Object(W["a"])(l)?l:"");Object(xt["a"])(s)});Lt.meta={name:"createAndOpenLegacyPost",key:"actionsCreateAndOpenLegacyPostCreateAndOpenLegacyPost",description:"Creates and opens a legacy Post"};Lt.defaultProps={openInBrowser:true};Lt.propTypes={openInBrowser:v["b"].bool};var Bt=a(3731);var Ut=new L["b"]("menu_file");var qt={channelId:v["b"].string.isRequired,threadTs:v["b"].string,viewContext:v["b"].string,disableFileUploadsPref:v["b"].string,menuProps:v["b"].object,featureDocs:v["b"].bool,featureSonicInputs:v["b"].bool,featureSonicSnippets:v["b"].bool,hiddenFileInputRef:v["b"].object,clogger:v["b"].object.isRequired,logger:v["b"].object.isRequired,createDocPost:v["b"].func,createAndOpenLegacyPost:v["b"].func.isRequired,showBoxMenuItem:v["b"].bool,isBoxAuthed:v["b"].bool,boxAppInstalled:v["b"].bool,showDropboxMenuItem:v["b"].bool,showGdriveMenuItem:v["b"].bool,showOneDriveMenuItem:v["b"].bool,openSnippetDialog:v["b"].func,openCreateGDocDialog:v["b"].func,openBoxFilePicker:v["b"].func,openOnedriveFilePicker:v["b"].func,openDropboxFilePicker:v["b"].func,openGdriveFilePicker:v["b"].func,getRecentFilesForUser:v["b"].func,openShareDialog:v["b"].func,featureBoxContentPicker:v["b"].bool,featureBoxAppMigration:v["b"].bool,featureSonicCloudFilesPicker:v["b"].bool,featureRecentFilesOmnipicker:v["b"].bool,featurePlusMenuAddAppsLink:v["b"].bool,featureOfflineMode:v["b"].bool.isRequired,isOffline:v["b"].bool.isRequired,currentUser:v["b"].string,featureModernGdriveCreate:v["b"].bool,recentFiles:v["b"].array,openOmniPickerDialog:v["b"].func,setUser:v["b"].func,firstLoad:v["b"].bool,setfirstLoad:v["b"].func,isLoading:v["b"].bool,setisLoading:v["b"].func};var Wt={threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:false,featureSonicInputs:false,featureSonicSnippets:false,featureRecentFilesOmnipicker:false,featurePlusMenuAddAppsLink:false,hiddenFileInputRef:void 0,createDocPost:b["noop"],showBoxMenuItem:false,showDropboxMenuItem:false,boxAppInstalled:false,showGdriveMenuItem:false,showOneDriveMenuItem:false,featureBoxAppMigration:false,openSnippetDialog:b["noop"],openCreateGDocDialog:b["noop"],openBoxFilePicker:b["noop"],openOnedriveFilePicker:b["noop"],openDropboxFilePicker:b["noop"],openGdriveFilePicker:b["noop"],getRecentFilesForUser:b["noop"],openShareDialog:b["noop"],featureBoxContentPicker:false,featureSonicCloudFilesPicker:false,currentUser:void 0,featureModernGdriveCreate:false,recentFiles:[],openOmniPickerDialog:b["noop"],setUser:b["noop"],setfirstLoad:b["noop"],setisLoading:b["noop"],firstLoad:false,isLoading:false,isBoxAuthed:false};var Ht="At06175UHW";var Gt="At0EFRCDPW";var Vt="A0F82E57C";var Kt="A06147X5W";var zt="ALQ9XG76D";var Qt="A061CBSP3";var Yt=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.activeCloudServices=[];a.requestAll=null;Object(g["a"])(a,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","clogAddAppsClick","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","setRecentFiles","handleRecentFile","handleYourRecentFilesPicker","renderRecents","renderRecentsSection"]);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.featureRecentFilesOmnipicker;if(!t)return;this.setRecentFiles()}},{key:"componentWillUnmount",value:function e(){this.requestAll&&this.requestAll.cancel()}},{key:"setRecentFiles",value:function e(){var t=this;var a=this.props,r=a.currentUser,n=a.firstLoad;this.props.setUser(true);n||this.props.setisLoading(true);this.requestAll=this.props.getRecentFilesForUser({user:r,reason:"get-recent-files",forMenu:true,count:1e3}).then(function(){n||t.props.setfirstLoad(true)})}},{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.hiddenFileInputRef,s=t.clogger,o=t.logger;if(i&&i.current){i.current.click();s.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else Object(vt["a"])()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):F(a,r,n)}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"createSnippet",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.viewContext,i=t.threadTs;a.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var s=Object(Pt["a"])({viewContext:n,channelId:r,threadTs:i});this.props.openSnippetDialog({initialText:s&&s.getDisplayValue?s.getDisplayValue():"",initialContents:s&&s.getContents?s.getContents():void 0,initialChannelId:r,threadTs:i,viewContext:n});s&&s.clear()}},{key:"createLegacyPost",value:function e(t){var a=Object(Rt["a"])(t);this.props.createAndOpenLegacyPost({openInBrowser:a});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}},{key:"createGDRiveDocument",value:function e(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?Ut.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRiveSpreadsheet",value:function e(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?Ut.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createGDRivePresentation",value:function e(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?Ut.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"handleBoxFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.isBoxAuthed,i=t.featureBoxAppMigration,s=t.boxAppInstalled;var o={fileUploadAction:R["m"].PLUS_MENU,fileUploadSrc:R["n"].BOX};var l=C["isDev"]?Kt:Vt;if(!n&&i&&s)return Object(w["d"])("/apps/"+l);return this.props.openBoxFilePicker({channelId:a,threadTs:r,metadata:o})}},{key:"handleDropboxFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:R["m"].PLUS_MENU,fileUploadSrc:R["n"].DROPBOX};return this.props.openDropboxFilePicker({channelId:a,threadTs:r,metadata:n})}},{key:"handleGdriveFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:R["m"].PLUS_MENU,fileUploadSrc:R["n"].GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:a,threadTs:r,metadata:n,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:R["m"].PLUS_MENU,fileUploadSrc:R["n"].ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:a,threadTs:r,metadata:n,reason:"cloud-files-menu/onedrive"})}},{key:"handleRecentFile",value:function e(t){var a=this.props,r=a.clogger,n=a.viewContext,i=a.channelId,s=a.threadTs;var o=Object(Pt["a"])({viewContext:n,channelId:i,threadTs:s});r.track(R["l"].FILE_MENU_SHARE_YOUR_RECENT_FILE,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].FILE_MENU}}});this.props.openShareDialog({fileId:t.id,showFileType:true,initialText:o&&o.getDisplayValue?o.getDisplayValue():"",initialContents:o&&o.getContents?o.getContents():void 0})}},{key:"handleYourRecentFilesPicker",value:function e(t,a){var r=this.props,n=r.channelId,i=r.threadTs,s=r.viewContext,o=r.hiddenFileInputRef,l=r.disableFileUploadsPref,c=r.clogger;var u=a?R["l"].FILE_MENU_BROWSE_YOUR_FILES:R["l"].FILE_MENU_OPEN_WORKSPACE_FILES;var d="disable_all"!==l;this.props.setUser(a);this.props.openOmniPickerDialog({channelId:n,threadTs:i,viewContext:s,hiddenFileInputRef:o,showUpload:d});c.track(u,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].FILE_MENU}}})}},{key:"clogAddAppsClick",value:function e(){var t=this.props.clogger;t.track(R["l"].FILE_MENU_ADD_APPS,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].FILE_MENU}}})}},{key:"renderMultipleCloudServices",value:function e(){var t=this;var a=this.props,r=a.featureSonicCloudFilesPicker,n=a.featureOfflineMode,i=a.isOffline,s=a.disableFileUploadsPref,o=a.showBoxMenuItem,l=a.showDropboxMenuItem,c=a.showGdriveMenuItem,u=a.showOneDriveMenuItem,d=a.featurePlusMenuAddAppsLink;var p=o||l||c||u;var v="disable_all_except_images"===s;var f=p?Ut.t("Add from\u2026"):Ut.t("Add an image from\u2026");var g="/apps/category/"+(C["isDev"]?Ht:Gt);var _=d&&!this.activeCloudServices.length?Ut.rt("Add a file from\u2026 <a>+ Add apps</a>",{},function(e){var a=e.text,r=e.key;return h.a.createElement(I["a"],{key:r,className:"c-menu_item__addrow",href:g,onClick:t.clogAddAppsClick},a)}):Ut.t("Add a file from\u2026");var y={};var k=this.props;y.box=k.showBoxMenuItem;y.dropbox=k.showDropboxMenuItem;y.gdrive=k.showGdriveMenuItem;y.onedrive=k.showOneDriveMenuItem;var O=[{name:"box",props:{label:Ut.t("Box"),icon:h.a.createElement(A["b"],{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:Ut.t("Dropbox"),icon:h.a.createElement(A["b"],{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:true,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:Ut.t("Google Drive"),icon:h.a.createElement(A["b"],{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:true,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:Ut.t("OneDrive"),icon:h.a.createElement(A["b"],{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:true,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(b["filter"])(O,function(e){return y[e.name]?y[e.name]:null});var E=Object(b["map"])(this.activeCloudServices,function(e,t){return h.a.createElement(N["b"],{key:t,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:r&&e.props.enableForSonic?"":Object(P["b"])(),disabled:n&&i,showOfflineIcon:n&&i,"data-qa":e.props.dataQa},r&&e.props.enableForSonic?null:h.a.createElement(P["a"],null))});return h.a.createElement(m["Fragment"],null,h.a.createElement(N["c"],{label:v?f:_}),E)}},{key:"renderCreateNewMenuItems",value:function e(){var t=this.props,a=t.featureDocs,r=t.featureSonicSnippets,n=t.showGdriveMenuItem,i=t.threadTs,s=t.featureOfflineMode,o=t.isOffline,l=t.featureModernGdriveCreate;var c=Ut.t("Post");var u=!i&&h.a.createElement(N["b"],{key:"create-new-post",label:c,icon:h.a.createElement(A["b"],{type:"create-post"}),onSelected:a?this.createDoc:this.createLegacyPost,disabled:s&&o,showOfflineIcon:s&&o,"data-qa":"create_new_doc"});var d=(r&&Object(vt["a"])()||!i)&&h.a.createElement(N["b"],{key:"create-new-snippet",label:Ut.t("Code or text snippet"),icon:h.a.createElement(A["b"],{type:"create-snippet"}),onSelected:this.createSnippet,className:r?void 0:Object(P["b"])(),disabled:s&&o,showOfflineIcon:s&&o,"data-qa":"create_new_snippet"},r?null:h.a.createElement(P["a"],null));var p=!n||i&&!Object(vt["a"])()?[]:[(d||u)&&h.a.createElement(N["d"],{key:"gdrive-separator"}),h.a.createElement(N["c"],{key:"gdrive-header",label:Ut.t("Google Drive")}),h.a.createElement(N["b"],{key:"gdrive_doc",label:Ut.t("Document"),icon:h.a.createElement(A["b"],{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:l?"undefined":Object(P["b"])(),disabled:s&&!Object(P["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_doc_menu_item"},l?null:h.a.createElement(P["a"],null)),h.a.createElement(N["b"],{key:"gdrive_sheet",label:Ut.t("Spreadsheet"),icon:h.a.createElement(A["b"],{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:l?void 0:Object(P["b"])(),disabled:s&&!Object(P["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_sheet_menu_item"},l?null:h.a.createElement(P["a"],null)),h.a.createElement(N["b"],{key:"gdrive_presentation",label:Ut.t("Presentation"),icon:h.a.createElement(A["b"],{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:l?void 0:Object(P["b"])(),disabled:s&&!Object(P["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_presentation_menu_item"},l?null:h.a.createElement(P["a"],null))];return Object(b["filter"])([u,d].concat(p))}},{key:"renderCreateNewSubmenu",value:function e(t){var a=this.props.menuProps;var r=this.renderCreateNewMenuItems();return h.a.createElement(N["f"],n()({},a,t,{"data-qa":"create_new_submenu"}),r)}},{key:"renderCreateNew",value:function e(){var t=this.props,a=t.threadTs,r=t.showGdriveMenuItem;var n=this.renderCreateNewMenuItems();if(0===n.length)return null;var i=!a&&Object(vt["a"])()&&r?{top:-80}:void 0;return[1===n.length?n[0]:h.a.createElement(M["a"],{key:"create-new-submenu",label:Ut.t("Create new..."),icon:h.a.createElement(A["b"],{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!a,submenuStyle:i}),h.a.createElement(N["d"],{key:"create-new-separator"})]}},{key:"renderRecents",value:function e(){var t=this;var a=this.props,r=a.recentFiles,n=a.isLoading;return[n?h.a.createElement(m["Fragment"],{key:"recent-placeholders"},h.a.createElement(N["b"],{key:"0",disabled:true},h.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),h.a.createElement(N["b"],{key:"1",disabled:true},h.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),h.a.createElement(N["b"],{key:"2",disabled:true},h.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),h.a.createElement(N["b"],{key:"3",disabled:true},h.a.createElement("span",{className:"c-missing_menu_item__button--loading"}))):Object(b["map"])(r.slice(0,4),function(e){return h.a.createElement(N["b"],{key:e.id,label:e.title,icon:h.a.createElement(A["b"],{type:e.filetype,file:"tiny"}),onSelected:function a(){return t.handleRecentFile(e)},"data-qa":"recent_file_menu_item"})})]}},{key:"renderRecentsSection",value:function e(){var t=this;var a=this.props,r=a.recentFiles,n=a.isLoading;return h.a.createElement(m["Fragment"],null,this.renderRecents(),!n&&r.length?h.a.createElement(m["Fragment"],null,h.a.createElement(N["b"],{className:"c-menu_item__browsefiles",key:"browse-files",onSelected:function e(a){t.handleYourRecentFilesPicker(a,true)}},h.a.createElement(I["a"],{key:"browse-files-link",href:"/",onClick:function e(t){t.preventDefault()}},Ut.t("Browse files"))),h.a.createElement(N["d"],{key:"create-new-separator"})):null)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.disableFileUploadsPref,n=a.menuProps,i=a.recentFiles,s=a.featureRecentFilesOmnipicker,o=a.isLoading;var l="disable_all"!==r;return h.a.createElement(N["f"],n,this.renderCreateNew(),s&&(o||i.length)?h.a.createElement(N["c"],{label:Ut.t("Your recent files")}):null,s&&this.renderRecentsSection(),this.renderMultipleCloudServices(this.props),s&&h.a.createElement(N["b"],{"data-qa":"open_omnipicker_for_workspace_from_menu_item",label:Ut.t("Your workspace"),icon:h.a.createElement(A["b"],{type:"slack"}),onSelected:function e(a){t.handleYourRecentFilesPicker(a,false)}}),l&&h.a.createElement(N["b"],{"data-qa":"add_file_from_computer_menu_item",label:Ut.t("Your computer"),icon:h.a.createElement(A["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(m["Component"]);Yt.displayName="NewFileMenu";Yt.defaultProps=Wt;var Jt=function e(t){return{createDocPost:function e(){return t(z.apply(void 0,arguments))},createAndOpenLegacyPost:function e(){return t(Lt.apply(void 0,arguments))},openSnippetDialog:function e(){return t(Q["a"].apply(void 0,arguments))},openCreateGDocDialog:function e(){return t(Y["a"].apply(void 0,arguments))},openBoxFilePicker:function e(){return t(Ee.apply(void 0,arguments))},openDropboxFilePicker:function e(){return t(Me.apply(void 0,arguments))},openGdriveFilePicker:function e(){return t(Ge.apply(void 0,arguments))},openOnedriveFilePicker:function e(){return t(at.apply(void 0,arguments))},getRecentFilesForUser:function e(){return t(T["listAndUpsertAllFiles"].apply(void 0,arguments))},openShareDialog:function e(){return t(j["a"].apply(void 0,arguments))},openOmniPickerDialog:function e(){return t(Mt.apply(void 0,arguments))},setUser:function e(){return t(T["setUser"].apply(void 0,arguments))},setFiletype:function e(){return t(T["setFiletype"].apply(void 0,arguments))},setfirstLoad:function e(){return t(T["setfirstLoad"].apply(void 0,arguments))},setisLoading:function e(){return t(T["setisLoading"].apply(void 0,arguments))}}};function Xt(e){var t=Object(y["a"])(e,"dropbox_legacy_picker");var a=Object(k["h"])(e,"dropbox_enabled");var r=Object(k["h"])(e,"box_enabled");var n=C["isDev"]?Object(E["getAppById"])(e,Qt):Object(E["getAppById"])(e,zt);var i=Object(y["a"])(e,"box_app_installed");var s=C["isDev"]?Object(E["getAppById"])(e,Kt):Object(E["getAppById"])(e,Vt);var o=Object(S["c"])(n);var l=Object(S["c"])(s);var c=a||t;var u=Object(y["a"])(e,"onedrive_enabled_team");var d=Object(y["a"])(e,"onedrive_app_installed");var p=u||d;return{disableFileUploadsPref:Object(y["a"])(e,"disable_file_uploads"),featureSonicInputs:Object(_["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureSonicSnippets:Object(_["isFeatureEnabled"])(e,"feature_sonic_snippets"),featurePlusMenuAddAppsLink:Object(_["isFeatureEnabled"])(e,"feature_plus_menu_add_apps_link"),featureRecentFilesOmnipicker:Object(_["isFeatureEnabled"])(e,"feature_recent_files_omnipicker"),featureBoxAppMigration:Object(_["isFeatureEnabled"])(e,"feature_box_app_migration"),featureDocs:Object(_["isFeatureEnabled"])(e,"feature_docs"),featureBoxContentPicker:Object(_["isFeatureEnabled"])(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(_["isFeatureEnabled"])(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(_["isFeatureEnabled"])(e,"feature_modern_gdrive_create"),clogger:Object(B["a"])({state:e}),logger:Object(U["a"])({state:e}),showBoxMenuItem:(o||i)&&Object(_["isFeatureEnabled"])(e,"feature_box_app_migration")||r&&l,showDropboxMenuItem:c,showGdriveMenuItem:Object(y["a"])(e,"gdrive_enabled_team"),isBoxAuthed:r,boxAppInstalled:o,showOneDriveMenuItem:p,featureOfflineMode:Object(_["isFeatureEnabled"])(e,"feature_offline_mode"),currentUser:Object(_["getCurrentUserId"])(e),isOffline:!Object(O["c"])(e),recentFiles:Object(T["getMenuFiles"])(e),firstLoad:Object(T["getFirstLoad"])(e),isLoading:Object(T["getisLoading"])(e)}}var Zt=t["a"]=Object(f["connect"])(Xt,Jt)(Yt)},2050:function(e,t,a){"use strict";var r=a(10);var n=a.n(r);var i=a(6);var s={default:{tada:cdn_url+"/80588/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/default/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/default/1f64c.png",2:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/default/1f44d.png",2:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/default/1f44f.png",2:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/default/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/default/1f434.png",chick:cdn_url+"/80588/img/unread/empty/default/1f423.png",growth:cdn_url+"/80588/img/unread/empty/default/1f331.png",sun:cdn_url+"/80588/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/default/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/default/1f343.png",owl:cdn_url+"/80588/img/unread/empty/default/1f989.png",books:cdn_url+"/80588/img/unread/empty/default/1f4da.png",island:cdn_url+"/80588/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/default/2615.png",footprints:cdn_url+"/80588/img/unread/empty/default/1f463.png",tea:cdn_url+"/80588/img/unread/empty/default/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/default/1f950.png",art:cdn_url+"/80588/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/default/26f5.png",ship:cdn_url+"/80588/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/default/1f527.png",metro:cdn_url+"/80588/img/unread/empty/default/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/default/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/default/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/default/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/default/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/default/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/default/1f44b.png",2:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/default/1f984.png",zap:cdn_url+"/80588/img/unread/empty/default/26a1.png",star:cdn_url+"/80588/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/80588/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/google/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/google/1f64c.png",2:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/google/1f44d.png",2:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/google/1f44f.png",2:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/google/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/google/1f434.png",chick:cdn_url+"/80588/img/unread/empty/google/1f423.png",growth:cdn_url+"/80588/img/unread/empty/google/1f331.png",sun:cdn_url+"/80588/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/google/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/google/1f343.png",owl:cdn_url+"/80588/img/unread/empty/google/1f989.png",books:cdn_url+"/80588/img/unread/empty/google/1f4da.png",island:cdn_url+"/80588/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/google/2615.png",footprints:cdn_url+"/80588/img/unread/empty/google/1f463.png",tea:cdn_url+"/80588/img/unread/empty/google/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/google/1f950.png",art:cdn_url+"/80588/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/google/26f5.png",ship:cdn_url+"/80588/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/google/1f527.png",metro:cdn_url+"/80588/img/unread/empty/google/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/google/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/google/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/google/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/google/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/google/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/google/1f44b.png",2:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/google/1f984.png",zap:cdn_url+"/80588/img/unread/empty/google/26a1.png",star:cdn_url+"/80588/img/unread/empty/google/2b50.png"}};var o=[{emoji:"airplane",skintone:false,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:false,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:false,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:false,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:false,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:false,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:false,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:true,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:false,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:false,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:false,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:false,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:true,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:false,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:true,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:false,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:false,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:false,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:false,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:false,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:false,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:true,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:true,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:false,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}];var l=[{emoji:"chocolate_bar",skintone:false,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:false,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:false,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:false,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:false,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:false,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:false,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:false,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:false,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:false,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}];var c=[{emoji:"apple",skintone:false,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:false,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:false,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:false,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:false,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:true,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}];var u=[{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:false,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:true,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:false,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:false,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:false,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:true,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:false,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:false,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}];var d=[{emoji:"apple",skintone:false,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:false,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:true,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:false,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:false,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:false,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:false,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:false,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:false,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:true,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}];var p=[{emoji:"balloon",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:false,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:false,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:true,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:true,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:false,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:false,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:false,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:true,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:true,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}];var m=[{emoji:"blush",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:false,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:false,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:false,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:false,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:false,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:true,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}];var h=[{emoji:"apple",skintone:false,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:false,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:false,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:true,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:true,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:false,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:false,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:true,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:true,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:false,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:true,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:false,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:false,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:false,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:true,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:true,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:true,lineOne:"Atualizado!",lineTwo:"E agora?"}];a.d(t,"a",function(){return b});var v;var f=(v={"de-DE":o,"en-GB":l},n()(v,i["b"].DEFAULT_LOCALE,c),n()(v,"es-ES",u),n()(v,"es-LA",d),n()(v,"fr-FR",p),n()(v,"ja-JP",m),n()(v,"pt-BR",h),v);function b(e){var t=e.locale,a=void 0===t?i["b"].DEFAULT_LOCALE:t,r=e.preferredSkintone,n=void 0===r?1:r,o=e.emojiMode,l=void 0===o?"default":o;var c="apple"===l?"default":l;var u=f[a]||f[i["b"].DEFAULT_LOCALE];var d=u[Math.floor(Math.random()*u.length)];var p=d.skintone?s[c][d.emoji][n]:s[c][d.emoji];d.emojiUrl=p;return d}},2053:function(e,t,a){"use strict";var r=a(6);var n=new r["b"]("password");var i=function e(t){var a={no_values:n.t("Please enter a password!"),matches_username:n.t("That password is too similar to your username. Try something different?"),matches_email:n.t("That password is too similar to your email address. Try something different?"),too_short:n.t("Your password must be at least 6 characters long."),too_long:n.t("Your password can be at most 500 characters long."),numeric_sequence:n.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:n.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:n.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:n.t("Your password cannot solely contain a repeated character."),common:n.t("That password is pretty common. Try something different?")};return a[t]||""};t["a"]=i},2056:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(0);var f=a(13);var b=a.n(f);var g=a(1);var _=a.n(g);var y=a(12);var k=a(2);var O=a(110);var C=a.n(O);var E=a(6);var S=a(39);var w=a(300);var I=a(59);var j=a(176);var T=a(213);var A=a(580);var N=a(35);var M=a(25);var P=a(283);var R=a(16);var x=a(266);var D=a(68);var F=a(1957);var L=a(69);var B=a(27);var U=a(223);var q=a(511);var W=a(1846);var H={highlighted:v["b"].bool,disabled:v["b"].bool,className:v["b"].string,onMouseEnter:v["b"].func,onSelected:v["b"].func,menuCallback:v["b"].func,menuCallbackId:v["b"].number,activeMenuId:v["b"].string,"data-qa":v["b"].string};var G={highlighted:false,disabled:false,className:"",onMouseEnter:k["noop"],onSelected:k["noop"],menuCallback:k["noop"],menuCallbackId:null,"data-qa":"menu_item_action_button",activeMenuId:void 0};var V=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.disableHighlightedState=false;a.handleMouseEnter=a.handleMouseEnter.bind(a);a.handleSelected=a.handleSelected.bind(a);return a}u()(t,[{key:"componentDidMount",value:function e(){this.bindKeyCommands()}},{key:"componentDidUpdate",value:function e(){this.props.highlighted||(this.disableHighlightedState=false)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"handleMouseEnter",value:function e(t){this.disableHighlightedState=true;this.props.onMouseEnter(t)}},{key:"handleSelected",value:function e(t){this.props.onSelected(t);this.props.menuCallback(this.props.menuCallbackId,t)}},{key:"handleReturnKey",value:function e(t){if(this.props.highlighted){this.handleSelected(t);t&&t.preventDefault&&t.preventDefault()}}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["return"],handler:this.handleReturnKey.bind(this)}];this.keyCommands||(this.keyCommands=new U["a"]);this.keyCommands.bindAll(t)}},{key:"render",value:function e(){var t=this.props,a=t.disabled,r=t.highlighted,i=t.className,o=t.onMouseEnter,l=t.onSelected,c=t.menuCallback,u=t.menuCallbackId,d=t.activeMenuId,p=s()(t,["disabled","highlighted","className","onMouseEnter","onSelected","menuCallback","menuCallbackId","activeMenuId"]);var m=b()("c-menu_item_action_button",i,{"c-menu_item_action_button--highlighted":r&&!a&&!this.disableHighlightedState});var h=this.props.activeMenuId;return _.a.createElement("div",{className:"c-menu_item_action_button__container",onMouseEnter:this.handleMouseEnter,"data-qa":this.props["data-qa"]+"-wrapper"},_.a.createElement(B["d"],n()({id:h,className:m,disabled:a,onClick:this.handleSelected,role:"menuitem",tabIndex:"-1",type:"outline"},p)))}}]);return t}(g["PureComponent"]);V.displayName="MenuItemActionButton";V.defaultProps=G;var K={MenuItemActionButton:V};var z=Object(q["b"])(V);var Q=a(86);var Y=a(3077);var J=a(9);var X=a(1190);var Z=a(122);var $=a(330);var ee=a(1158);var te=a(210);var ae=a(20);var re=a(193);var ne=a(1186);var ie=a(232);var se=a(44);var oe=a(514);var le=a(41);var ce=a(91);var ue=a(116);var de={id:v["b"].string.isRequired,disabled:v["b"].bool,listEntityProps:v["b"].object};var pe={disabled:false,listEntityProps:{}};function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=function(a){h()(r,a);function r(e){l()(this,r);var t=p()(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t.state={isActive:false};t.handleMouseEnter=t.handleMouseEnter.bind(t);t.handleMouseLeave=t.handleMouseLeave.bind(t);return t}u()(r,[{key:"handleMouseEnter",value:function e(){this.setState(function(){return{isActive:true}})}},{key:"handleMouseLeave",value:function e(){this.setState(function(){return{isActive:false}})}},{key:"render",value:function a(){var r=this.props,i=r.id,o=r.listEntityProps,l=s()(r,["id","listEntityProps"]);var c=this.state.isActive;var u=b()(o.className,t.className);return _.a.createElement(ue["a"],n()({onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l),_.a.createElement(e,n()({id:i,isActive:c&&!this.props.disabled,isDisabled:this.props.disabled},t,o,{className:u})))}}]);return r}(g["PureComponent"]);a.displayName="ListEntityButton";a.defaultProps=pe;return a}var he=a(2089);var ve=me(he["a"],{useShortMode:true});var fe=a(4754);var be=new E["b"]("workflow_builder");var ge=function e(t){var a=t.closeModal,r=t.collaborators,n=t.appName;var i=Object(ie["a"])(),s=i.featureWorkflowBotsInClient;var o=Object(g["useCallback"])(function(){return r.map(function(e){return _.a.createElement(oe["a"],{key:e,userId:e,position:"left-bottom",includeRemoveFromChannelAction:true},_.a.createElement(ve,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"collaborator_row_btn"}))})},[r]);return _.a.createElement(ce["a"],{title:s?be.rt("{usernameCount} collaborators on {appName}",{usernameCount:r.length,appName:n}):"",overlayClassName:"p-collaborators_dialog__overlay",onClose:a,showGoButton:false,cancelText:be.t("Close")},o())};ge.displayName="CollaboratorsDialog";var _e=function e(t){return{closeModal:function e(){return t(Object(le["closeModal"])())}}};var ye=Object(y["connect"])(null,_e)(ge);var ke=a(1436);var Oe=a(1218);var Ce=a(4756);var Ee=new E["b"]("app_card");var Se=function e(t){var a=t.id;return _.a.createElement(oe["a"],{userId:a,position:"left-bottom"},_.a.createElement(se["a"],null,_.a.createElement(Oe["a"],{id:a})))};Se.displayName="Collaborator";var we=function e(t){var a=t.collaborators,r=t.openModal,n=t.appName;var i=Object(ie["a"])(),s=i.featureWorkflowBotsInClient;var o=a[0];var l=a[1];switch(a.length){case 0:return"";case 1:return s?Ee.rt("{username} created this workflow. ",{username:_.a.createElement(Se,{id:o})}):"";case 2:return s?Ee.rt("{firstUser} and {secondUser} are collaborators on this workflow.",{firstUser:_.a.createElement(Se,{id:o}),secondUser:_.a.createElement(Se,{id:l})}):"";default:return s?Ee.rt("{firstUser}, {secondUser} and {userCount} other people are <a>collaborators on this workflow</a>.",{firstUser:_.a.createElement(Se,{id:o}),secondUser:_.a.createElement(Se,{id:l}),userCount:a.length-2},function(e){var t=e.text;return _.a.createElement("span",{"data-collaborators-count":true},_.a.createElement(se["a"],{onClick:function e(){return r({element:_.a.createElement(ye,{collaborators:a,appName:n})})}},t))}):""}};var Ie=Object(y["connect"])(null,function(e){return{openModal:function t(){return e(le["openModal"].apply(void 0,arguments))}}})(we);var je=function e(t){var a=t.app,r=t.cardHeader,n=t.launchWorkflowBuilder,i=t.currentUserId,s=t.disabledMessage;var o=Object(ie["a"])(),l=o.featureWorkflowBotsInClient;var c=Object(k["get"])(a,"legacy_app.owner_ids",[]);var u=c.some(function(e){return e===i});return _.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},_.a.createElement(L["f"],{width:320,noMargin:true},r,_.a.createElement(g["Fragment"],null,_.a.createElement(L["d"],{noPaddingAbove:true}),s&&s,!s&&c.length>0&&_.a.createElement("div",{className:"p-workflow_profile_card--body"},_.a.createElement("div",null,_.a.createElement(Ie,{collaborators:c,appName:a.profile.name,featureWorkflowBotsInClient:l})))),!u&&_.a.createElement(g["Fragment"],null,_.a.createElement(L["d"],{noPaddingAbove:true}),_.a.createElement("div",{"data-workflow-profile-card-non-installer":true,className:"p-workflow_profile_card--body"},l?Ee.rt("Created with <a>Workflow Builder</a>.",null,function(e){var t=e.text;return _.a.createElement("span",{className:"margin_left_25"},_.a.createElement(se["a"],{onClick:n},t))}):"")),u&&_.a.createElement("div",{"data-workflow-profile-card-installer":true},_.a.createElement(L["d"],{noPaddingAbove:true}),_.a.createElement(z,{onClick:function e(){return n({subPath:"slack-apps/"+a.app_id+"/workflow",source:"workflow_profile_card"})},className:"margin_bottom_100"},l?Ee.t("Open in Workflow Builder"):""))))};je.displayName="WorkflowProfileCard";je.defaultProps={cardHeader:null,currentUserId:null,disabledMessage:null};var Te=Object(y["connect"])(null,function(e){return{launchWorkflowBuilder:function t(){return e(ke["a"].apply(void 0,arguments))}}})(je);var Ae=a(109);var Ne=a(339);var Me=a(1537);var Pe=a(1961);var Re={colorHex:v["b"].string,imageUrl:v["b"].string.isRequired,name:v["b"].string.isRequired,isError:v["b"].bool,externalTeam:v["b"].object};var xe={colorHex:"#2C2D30",isError:false,externalTeam:void 0};function De(e){var t=e.colorHex,a=e.imageUrl,r=e.name,n=e.isError,i=e.externalTeam;var s=Object(Ne["f"])(t)||[];var o={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+s.join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t};var l=b()("full_width",{"p-app_profile_card__header--external":i,"p-app_profile_card__header":!i});return n?null:_.a.createElement("div",{className:l,style:o,"data-qa":"app_card_header"},_.a.createElement(Pe["a"],{externalTeam:i}),_.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:r,"data-qa":"app_header_icon"}),_.a.createElement("div",{className:"padding_left_100"},_.a.createElement("div",{className:"padding_bottom_25"},_.a.createElement("strong",{"data-qa":"app_header_name"},r),_.a.createElement("span",{className:"margin_left_50"},_.a.createElement(Me["a"],{inverse:true,"data-qa":"app_header_app_label",isWorkflow:true})))))}De.defaultProps=xe;var Fe=Object(Ae["pure"])(De);var Le=new E["b"]("app_card");var Be={colorHex:v["b"].string,imageUrl:v["b"].string.isRequired,name:v["b"].string.isRequired,onClick:v["b"].func.isRequired,tagline:v["b"].string.isRequired,isError:v["b"].bool,isWorkflowApp:v["b"].bool,externalTeam:v["b"].object};var Ue={colorHex:"#2C2D30",isError:false,isWorkflowApp:false,externalTeam:void 0};function qe(e){var t=e.colorHex,a=e.imageUrl,r=e.name,n=e.onClick,i=e.tagline,s=e.isError,o=e.externalTeam,l=e.isWorkflowApp;var c=Object(ie["a"])(),u=c.featureBuilderIsWorkflowApp;var d=Object(Ne["f"])(t)||[];var p={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+d.join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t};var m=b()("full_width",{"p-app_profile_card__header--external":o,"p-app_profile_card__header":!o,cursor_pointer:n!==k["noop"]});return s?null:_.a.createElement(B["c"],{className:m,onClick:n,style:p,"data-qa":"app_card_header"},_.a.createElement(Pe["a"],{externalTeam:o}),_.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:r,"data-qa":"app_header_icon"}),_.a.createElement("div",{className:"p-app_profile_card__title"},_.a.createElement("div",{className:"display_flex align_items_center padding_bottom_25"},_.a.createElement("strong",{className:"overflow_ellipsis","data-qa":"app_header_name"},r),_.a.createElement("span",{className:"margin_left_50"},_.a.createElement(Me["a"],{inverse:true,"data-qa":"app_header_app_label",isWorkflow:l}))),u&&l?_.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},i||Le.rt("A workflow app.")):_.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},i)))}qe.defaultProps=Ue;var We=Object(Ae["pure"])(qe);var He=a(1962);var Ge=a(10);var Ve=a.n(Ge);var Ke=a(1688);var ze=a(1630);var Qe=a(1631);var Ye=a(152);var Je=a(29);var Xe=a(28);var Ze=a(18);var $e=a(2075);var et=new E["b"]("app_card");var tt="USER_CARD_CLICK";function at(e){var t=e.appId,a=e.appUser,r=e.channelIdToRemoveFrom,i=e.dispatch,s=e.homeWorkspaceId,o=e.isActive,l=e.isExternal,c=e.isOrgShared,u=e.isMemberRestricted,d=e.isMemberUltraRestricted,p=e.isPublished,m=e.isDistributed,h=e.isXoxaApp,v=e.memberId,f=e.serviceId,b=e.currentTeamId,g=e.currentUserId,y=e.locale,O=e.currentEnterpriseId,C=e.featureM11nChannelDetails,E=e.installerIsYou,w=e.isWorkflowApp,I=e.featureBuilderIsWorkflowApp;var j=Object(S["a"])({userId:g,teamId:b,locale:y,enterpriseId:O});var T=Object(N["d"])(Object(Je["d"])(b));var A={app_id:t,bot_id:f};var M=function e(){return j.track(tt,A)};var P=[{key:"about_app",label:et.t("About this app"),click:function e(){M();j.track("APP_CLICK_LINK_APP_ABOUT_IN_USER_CARD",n()({},A,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}}));i(Object(X["a"])({memberId:v,serviceId:f,homeWorkspaceId:s}))},show:true,dataQa:"app_card_view_details"},{key:"is_installers_workflow_app",label:I?et.t("Open in Workflow Builder"):"",href:"#",click:function e(){i(Object(ke["a"])({subPath:"slack-apps/"+t}));M();j.track("APP_CLICK_LINK_APP_OPEN_IN_WORKFLOW_BUILDER",n()({},A,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}}))},show:I&&E&&w,dataQa:"app_card_view_workflow_builder"},{key:"app_directory_link",label:et.t("View in app directory"),href:Object(Xe["getTeamUrl"])(T,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_card-click"),click:function e(){M();j.track("APP_CLICK_LINK_APP_DIRECTORY_IN_USER_CARD",n()({},A,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_directory"}}}))},show:!o&&(l?p:m),dataQa:"app_card_view_app_directory"},{key:"settings",label:et.t("Settings"),href:h?void 0:Object(k["trimEnd"])(Object(Xe["getTeamUrl"])(T),"/")+"/services/"+f+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_card-click",click:function e(){M();j.track("APP_CLICK_LINK_APP_SETTINGS_IN_USER_CARD",{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_settings"}}});if(!h)return;i(Object(Ke["a"])({serviceId:f,referringEventId:tt}))},show:(o||c)&&!u,dataQa:"app_card_edit_settings"},{key:"channel_invite",label:et.t("Add this app to a channel ..."),click:function e(){M();i(Object($e["a"])({memberId:a.id}))},show:a&&o&&(h?!u:!d),dataQa:"app_card_invite_to_channel"},{key:"channel_remove",dataQa:"app_card_remove",click:function e(){var n,s,o;if(!C)return;var l=(n={},Ve()(n,Ze["y"].action,Ze["w"].CLICK),Ve()(n,Ze["y"].ui_element,Ze["z"].BTN_REMOVE_APP),n);j.track(tt,{contexts:(o={},Ve()(o,Ze["c"].ui_context,l),Ve()(o,Ze["c"].core,(s={},Ve()(s,Ze["d"].app_id,t),Ve()(s,Ze["d"].bot_id,f),Ve()(s,Ze["d"].channel_id,r),s)),o)});i(h?Object(Qe["a"])({appUserId:a.id,channelId:r,referringEventId:tt,referringUiContext:l}):Object(ze["a"])({memberId:a.id,channelId:r}))},label:C?et.rt("Remove this app from {channelName} ...",{channelName:_.a.createElement("strong",null,_.a.createElement(Ye["a"],{className:"cursor_pointer",inline:true,channelId:r,iconProps:{inherit:true,align:"baseline"}}))}):void 0,show:C&&!!r&&!l}];return P.filter(function(e){return e.show})}var rt=at;var nt=a(31);var it=a(1426);var st=a(814);var ot=a(1176);var lt=a(1133);var ct=a(108);var ut=_.a.lazy(function(){return Promise.resolve().then(a.bind(null,528))});var dt=new E["b"]("team");var pt={userId:v["b"].string.isRequired,username:v["b"].string.isRequired,onSubmit:v["b"].func,kbNavActive:v["b"].bool,stealKBNav:v["b"].func,returnKBNav:v["b"].func,clogger:v["b"].object.isRequired};var mt={kbNavActive:false,onSubmit:k["noop"],returnKBNav:k["noop"],stealKBNav:k["noop"]};var ht=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.texty=null;a.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(ot["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};Object(nt["a"])(a,["setTextyRef","onSubmit","onDocKeyDown","onFocus","onBlur"]);return a}u()(t,[{key:"componentDidMount",value:function e(){document.addEventListener("keydown",this.onDocKeyDown)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.onDocKeyDown)}},{key:"onDocKeyDown",value:function e(t){var a=t.which,r=t.metaKey,n=t.ctrlKey,i=t.altKey;var s=this.props.kbNavActive;if(s)return;if(i||n||r)return;if([ct["f"],ct["e"],ct["k"],ct["l"],ct["c"],ct["h"],ct["i"]].indexOf(a)>-1)return;this.texty&&this.texty.focus()}},{key:"onFocus",value:function e(){var t=this.props,a=t.kbNavActive,r=t.stealKBNav;a||r()}},{key:"onBlur",value:function e(){var t=this.props,a=t.kbNavActive,r=t.returnKBNav;a&&r()}},{key:"onSubmit",value:function e(){var t=this.props.clogger;if(this.texty&&this.texty.value()){t.track("USER_CARD_DM",{});Object(st["e"])(this.props.userId,false,this.texty.value());this.props.onSubmit()}}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){var t=dt.t("Message {username}",{username:this.props.username});return _.a.createElement("div",{className:"p-app_profile_card__footer"},_.a.createElement(it["a"],null,_.a.createElement(g["Suspense"],{fallback:null},_.a.createElement(ut,{"data-qa":"app_card_message_input",ref:this.setTextyRef,className:"p-app_profile_card__message_input",modules:this.textyModules,ariaLabel:t,placeholder:t,onEnter:this.onSubmit,onFocus:this.onFocus,onBlur:this.onBlur,useLegacyCreate:true,isSingleLine:true,useFocusRing:false}))))}}]);return t}(g["PureComponent"]);ht.displayName="AppProfileCardMessageInput";ht.defaultProps=mt;var vt=function e(t){return{clogger:Object(S["a"])({state:t})}};var ft=Object(y["connect"])(vt)(ht);var bt=Object(lt["a"])(ft);var gt=a(3093);var _t=new E["b"]("app_card");var yt={isError:v["b"].bool,menuProps:v["b"].object,serviceId:v["b"].string.isRequired,memberId:v["b"].string,homeWorkspaceId:v["b"].string.isRequired,dispatch:v["b"].func.isRequired,app:v["b"].object,appUser:v["b"].object,installedByMember:v["b"].object,installerIsYou:v["b"].bool,isWorkflowApp:v["b"].bool,currentTeam:v["b"].object.isRequired,externalTeam:v["b"].shape({id:v["b"].string,name:v["b"].string}),clogger:v["b"].object.isRequired,currentEnterpriseId:v["b"].string,currentUserId:v["b"].string,appHomeTeamDisplayName:v["b"].string,featureReactMemberProfileCard:v["b"].bool.isRequired,featureAddAppHomeTeamName:v["b"].bool.isRequired,featureSonicInputs:v["b"].bool.isRequired,featureM11nChannelDetails:v["b"].bool.isRequired,featureBuilderIsWorkflowApp:v["b"].bool.isRequired,isAppSpaceEnabled:v["b"].bool,featureWorkflowBotsInClient:v["b"].bool.isRequired,defaultAppIcon:v["b"].string.isRequired,viewContext:v["b"].string,channelId:v["b"].string,threadTs:v["b"].string,isMemberRestricted:v["b"].bool,isMemberUltraRestricted:v["b"].bool,isActive:v["b"].bool,isExternal:v["b"].bool,isOrgShared:v["b"].bool,isPublished:v["b"].bool,isDistributed:v["b"].bool,showSlashCommands:v["b"].bool,canBeRemovedFromChannel:v["b"].bool,commands:v["b"].arrayOf(v["b"].shape({name:v["b"].string.isRequired,usage:v["b"].string,description:v["b"].string}).isRequired)};var kt={app:void 0,appUser:void 0,installedByMember:void 0,installerIsYou:false,isWorkflowApp:false,isError:false,menuProps:{},memberId:void 0,externalTeam:{},isAppSpaceEnabled:true,currentEnterpriseId:void 0,currentUserId:void 0,appHomeTeamDisplayName:void 0,viewContext:ae["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:void 0,threadTs:void 0,isMemberRestricted:false,isMemberUltraRestricted:false,isActive:false,isExternal:false,isOrgShared:false,isPublished:false,isDistributed:false,showSlashCommands:false,canBeRemovedFromChannel:false,commands:[]};var Ot=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onHeaderClick=a.onHeaderClick.bind(a);a.autoFillSlashCommand=a.autoFillSlashCommand.bind(a);return a}u()(t,[{key:"shouldComponentUpdate",value:function e(t){var a=this.props,r=a.commands,n=s()(a,["commands"]);var i=t.commands,o=s()(t,["commands"]);return!Object(j["a"])(n,o)||!Object(j["a"])(r,i)}},{key:"onHeaderClick",value:function e(){var t=this.props,a=t.app,r=t.memberId,n=t.menuProps.onTriggerClose,i=t.serviceId,s=t.clogger,o=t.dispatch;var l=a.app_id,c=a.home_workspace_id;s.track("USER_CARD_CLICK",{app_id:l,bot_id:i});o(Object(X["a"])({memberId:r,serviceId:i,homeWorkspaceId:c}));n&&n()}},{key:"autoFillSlashCommand",value:function e(t){if(this.props.featureSonicInputs){var a=Object(te["a"])({viewContext:this.props.viewContext,channelId:this.props.channelId,threadTs:this.props.threadTs});if(!a)return;a.prependContents({contents:(new C.a).insert(t+" ").ops});a.focus()}else Object(ee["b"])(t)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.app,i=a.appUser,s=a.commands,o=a.defaultAppIcon,l=a.menuProps,c=a.installedByMember,u=a.installerIsYou,d=a.isWorkflowApp,p=a.isError,m=a.dispatch,h=a.serviceId,v=a.currentTeam,f=a.externalTeam,y=a.featureReactMemberProfileCard,O=a.currentUserId,C=a.currentEnterpriseId,S=a.appHomeTeamDisplayName,w=a.featureAddAppHomeTeamName,j=a.isMemberRestricted,T=a.isMemberUltraRestricted,A=a.isActive,N=a.isExternal,M=a.isOrgShared,P=a.isPublished,x=a.isDistributed,D=a.showSlashCommands,F=a.channelId,B=a.canBeRemovedFromChannel,U=a.featureM11nChannelDetails,q=a.featureBuilderIsWorkflowApp,W=a.featureWorkflowBotsInClient;if(Object(I["d"])(r))return _.a.createElement("div",{className:"p-app_profile_card__container"},_.a.createElement(L["f"],{menuClassNames:"p-app_profile_card p-app_profile_card--loading",width:320},_.a.createElement(Q["a"],null)));if(!Object(I["b"])(r))return null;var H=Object(k["isFunction"])(l.onTriggerClose)?l.onTriggerClose:k["noop"];var G=Object($["b"])(r.profile,192,o);var V=_.a.createElement(We,{colorHex:r.profile.color,imageUrl:G,name:r.profile.name,onClick:!A||N?k["noop"]:this.onHeaderClick,tagline:r.profile.tagline,isError:p,externalTeam:f,isWorkflowApp:Object(ne["d"])(r)});var K=A||N||j?null:_.a.createElement("div",{className:"c-menu_item__li p-app_profile_card__disabled_message","data-qa":"app_card_app_disabled"},d&&W?_t.t("This workflow has been disabled"):_t.t("This app has been disabled"));var Y=rt({appId:r.app_id,appUser:i,channelIdToRemoveFrom:B&&F,dispatch:m,featureM11nChannelDetails:U,featureReactMemberProfileCard:y,homeWorkspaceId:r.home_workspace_id,isActive:A,isMemberRestricted:j,isMemberUltraRestricted:T,isXoxaApp:"xoxa"===r.app_type,isExternal:N,isOrgShared:M,isPublished:P,isDistributed:x,legacyApp:r.legacy_app,serviceId:h,currentTeamId:v.id,currentUserId:O,locale:Object(E["s"])(),currentEnterpriseId:C,installerIsYou:u,isWorkflowApp:d,featureBuilderIsWorkflowApp:q});var J=Y.map(function(e){return"separator"===e.type?_.a.createElement(L["d"],{key:e.key}):_.a.createElement(L["b"],{key:e.key,label:e.label,onSelected:e.click,href:e.href,"data-qa":e.dataQa})});if(W&&Object(ne["d"])(r))return _.a.createElement(Te,{app:r,cardHeader:_.a.createElement(Fe,{colorHex:r.profile.color,imageUrl:G,name:r.profile.name,isError:p,externalTeam:f}),currentUserId:O,disabledMessage:K});var X=s.slice(0,3);var ee=D&&X.length?X.map(function(e){return _.a.createElement(L["b"],{key:e.name,onSelected:function a(){return t.autoFillSlashCommand(e.name)},"data-qa":"app_card_slash_command"},_.a.createElement(g["Fragment"],null,_.a.createElement("div",{className:"block overflow_ellipsis"},_.a.createElement("strong",{className:"margin_right_25"},e.name),e.usage),_.a.createElement("div",{className:"p-app_profile_card__command_desc c-menu_item__description"},e.description)))}):null;var te=void 0;var ae=A&&r.installation&&r.installation.installer_user_id||S&&w;ae&&(te=_.a.createElement(He["a"],{isWorkflowApp:Object(ne["d"])(r),appType:r.app_type,memberId:c&&c.id,installerIsYou:u,appName:r.profile.name,isError:p,onMemberClick:H,appHomeTeamDisplayName:S,featureAddAppHomeTeamName:w}));var re=null;var ie=A&&r.app_user;N&&(ie=r.app_user&&"xoxp"===r.app_type);M&&(ie=!!r.app_user);ie&&(re=y?_.a.createElement(z,{className:"p-app_profile_card__direct_message_button",onSelected:function e(){return m(Object(Z["startImByMemberId"])({memberId:i.id}))}},y?_t.t("Message {username}",{username:Object(E["q"])(Object(R["getMemberRealName"])(i))}):""):_.a.createElement(bt,{onSubmit:H,userId:r.app_user.id,username:r.app_user.username}));var se=b()("p-app_profile_card",{"p-app_profile_card--has_footer":ie&&!y});return _.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},_.a.createElement(L["f"],n()({},l,{width:320,noMargin:true,menuClassNames:se}),V,_.a.createElement(L["d"],{noPaddingAbove:true}),K,J,ee&&_.a.createElement(L["d"],null),ee,te&&_.a.createElement(L["d"],null),te,re))}}]);return t}(g["Component"]);Ot.displayName="AppProfileCard";Ot.defaultProps=kt;var Ct=function e(t,a){var r=a.serviceId,n=a.homeWorkspaceId,i=a.memberId,s=a.viewContext;var o=Object(A["getAppProfileByIds"])(t,{serviceId:r,homeWorkspaceId:n,memberId:i});var l=Object(N["d"])(t);var c=Object(re["E"])(t,o);var u=Object(re["u"])(t,o);var d=Object(J["pageNeedsEnterprise"])(t);var p=d?Object(N["h"])(t).id:void 0;var m=Object(M["b"])(t);var h=o&&Object(M["e"])(t,Object(re["v"])(o));var v=Object(re["i"])(t,o);var f=Object(F["a"])(t,s),b=f.channelId,g=f.threadTs;var _=Object(M["e"])(t,i||o&&o.app_user&&o.app_user.id);var y=b&&Object(P["getChannelMembershipInfoForUser"])(t,b,i);var k=b&&y.isKnown&&y.isMember&&Object(D["v"])(t,b,_);var O=[];b&&o.commands&&(O=o.commands.filter(function(e){return Object(x["k"])(t,e,{channelId:b,isThread:!!g}).isEnabled}));return{app:o,appUser:_,channelId:b,threadTs:g,commands:O,defaultAppIcon:Object(T["getDefaultAppIcon"])(t),installedByMember:h,installerIsYou:Object(re["w"])(t,o),isAppSpaceEnabled:Object(T["isAppSpaceEnabled"])(t),isActive:Object(re["B"])(o),isExternal:c,isOrgShared:Object(re["F"])(t,o),isPublished:Object(re["G"])(o),isDistributed:Object(re["D"])(o),showSlashCommands:Object(re["K"])(t,o),featureReactMemberProfileCard:Object(J["isFeatureEnabled"])(t,"feature_react_member_profile_card"),featureAddAppHomeTeamName:Object(J["isFeatureEnabled"])(t,"feature_add_app_home_team_name"),featureSonicInputs:Object(J["isFeatureEnabled"])(t,"feature_sonic_inputs"),featureWorkflowBotsInClient:Object(J["isFeatureEnabled"])(t,"feature_workflow_bots_in_client"),homeWorkspaceId:Object(re["j"])(o)||n,currentTeam:l,externalTeam:u,clogger:Object(S["a"])({state:t}),currentEnterpriseId:p,currentUserId:m.id,appHomeTeamDisplayName:v,isMemberRestricted:Object(R["isRestricted"])(m),isMemberUltraRestricted:Object(R["isUltraRestricted"])(m),canBeRemovedFromChannel:k,featureM11nChannelDetails:Object(J["isFeatureEnabled"])(t,"feature_m11n_channel_details"),featureBuilderIsWorkflowApp:Object(J["isFeatureEnabled"])(t,"feature_builder_is_workflow_app"),isWorkflowApp:Object(ne["d"])(o)}};var Et=Object(w["b"])(Object(y["connect"])(Ct)(Ot));var St=t["a"]=Et},2057:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(13);var y=a.n(_);var k=a(163);var O=a(2);var C=a(769);var E=a(177);var S=a(9);var w=a(6);var I=a(63);var j=new w["b"]("a11y");function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.handle,r=e.purpose,n=e.isDeactivated,i=e.memberCount,s=void 0===i?void 0:i;if(!t)return"";var o=!Object(O["isUndefined"])(s);if(a&&r&&n&&!o)return j.t("{name}, @{handle}, {purpose} (deactivated)",{name:t,handle:a,purpose:r});if(a&&r&&n&&o)return j.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,purpose:r,memberCount:s});if(a&&r&&!n&&o)return j.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,purpose:r,memberCount:s});if(a&&!r&&!n&&o)return j.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,memberCount:s});if(!a&&r&&!n&&o)return j.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:r,memberCount:s});if(!a&&r&&n&&o)return j.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:r,memberCount:s});if(!a&&r&&n&&!o)return j.t("{name}, {purpose} (deactivated)",{name:t,purpose:r});if(!a&&r&&!n&&!o)return j.t("{name}, {purpose}",{name:t,purpose:r});if(!a&&!r&&n&&o)return j.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});if(!a&&!r&&n&&!o)return j.t("{name} (deactivated)",{name:t});if(a&&!r&&n&&!o)return j.t("{name}, @{handle} (deactivated)",{name:t,handle:a});if(a&&!r&&n&&o)return j.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,memberCount:s});if(!a&&!r&&!n&&!o)return t;if(a&&!r&&!n&&!o)return j.t("{name}, @{handle}",{name:t,handle:a});if(a&&r&&!n&&!o)return j.t("{name}, @{handle}, {purpose}",{name:t,handle:a,purpose:r});if(!a&&!r&&!n&&o)return j.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});return t}var A=a(87);var N=a(1038);var M=a(3802);var P={children:b["b"].func.isRequired};function R(e){var t=e.children;return f.a.createElement(N["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return f.a.createElement("div",{ref:n,className:"c-measure_container"},t({width:a,height:r}))})}R.displayName="MeasureContainer";var x=R;var D=a(551);var F=a(891);var L=a(1045);var B=a(86);var U=a(1403);var q=a(2038);var W=a(854);var H=a(116);var G=a(40);var V=a.n(G);var K=a(1037);var z=a(11);var Q=a(21);var Y=a(16);var J=a(54);var X=a(27);var Z=a(134);var $=a(176);var ee=new w["b"]("user_groups");var te={userGroup:b["b"].object,defaultChannelNames:b["b"].arrayOf(b["b"].string),showToggle:b["b"].bool,creator:b["b"].string};var ae={userGroup:{},defaultChannelNames:void 0,showToggle:false,creator:void 0};var re=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);return a}u()(t,[{key:"onButtonClick",value:function e(t,a){var r=this.props.userGroup;Object(K["c"])({action:a,userGroup:r})}},{key:"maybeRenderDescription",value:function e(t){var a=this.props.userGroup;var r=Object(A["e"])(a);if(!r)return null;return f.a.createElement("p",{className:t},r)}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var a=Object(A["f"])(t,{includeAtSign:true});if(!a)return null;return f.a.createElement("span",{className:"subtle_silver"},a)}},{key:"maybeRenderToggle",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return f.a.createElement(f.a.Fragment,null,f.a.createElement(J["c"],{position:"left",zIndex:"above_fs",tip:ee.t("Enable group")},f.a.createElement(Z["a"],{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(a){return t.onButtonClick(a,"enable")},"aria-label":ee.t("Enable group")},f.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"maybeRenderDefaultChannels",value:function e(){var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var a=Object(w["i"])(t,{react:true,noEscape:true}).join("");return f.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},f.a.createElement("span",{className:"bold"},ee.t("Default channels: {channels}",{channels:a})))}},{key:"maybeRenderCreatedBy",value:function e(){var t=this.props,a=t.userGroup,r=t.creator;if(!a&&(!a.created_by||!a.date_create))return null;var n=ee.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:r,creationDate:V()(1e3*a.date_create).format("MMMM Do, YYYY")});return f.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return f.a.createElement(J["c"],{position:"bottom",zIndex:"above_fs",tip:ee.t("Disable group")},f.a.createElement(X["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+ee.t("Disable"),"data-action":"disable_user_group",onClick:function e(a){return t.onButtonClick(a,"disable")}}))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var a=Object(A["h"])(t);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},f.a.createElement("p",{className:"no_bottom_margin subtle_silver"},f.a.createElement("span",{className:"bold"},a),ee.t("(Disabled)"))),f.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var a=t.isExternal||Object(A["m"])(t)?f.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return f.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},a,f.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(A["l"])(t))}},{key:"renderSettingsButton",value:function e(){var t=this;return f.a.createElement(J["c"],{position:"bottom",tip:ee.t("Edit group info"),zIndex:"above_fs"},f.a.createElement(X["d"],{size:"large",type:"outline",icon:"cog_o",title:""+ee.t("Settings"),"data-action":"open_form",onClick:function e(a){return t.onButtonClick(a,"editInfo")}}))}},{key:"renderMemberButton",value:function e(){var t=this;var a=this.props.userGroup;var r=void 0;r=Object(A["m"])(a||a.is_external)?ee.t("View group members"):ee.t("Edit group members");return f.a.createElement(J["c"],{position:"bottom",tip:r,zIndex:"above_fs"},f.a.createElement(X["d"],{size:"large",type:"outline",icon:"user",title:""+ee.t("Members"),"data-action":"edit_members",onClick:function e(a){return t.onButtonClick(a,"editMembers")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var a=Object(A["t"])(this.props.userGroup);if(!a)return this.renderDeactivatedRow();var r=Object(A["h"])(t);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},f.a.createElement("p",{className:"bold no_bottom_margin"},r," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),f.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),f.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(v["Component"]);re.displayName="LegacyUserGroupBrowserListItem";re.defaultProps=ae;var ne=function e(t,a){var r=a.id;var n=Object(E["e"])(t,r);var i=Object(A["d"])(t,n,{includePrivateChannels:false});var s=i.map(function(e){if(!e)return null;var a=Object(Q["e"])(t,e);if(!a)return null;var r=Object(z["getName"])(a);if(!r)return null;return"#"+r});s=Object(O["filter"])(s);var o=Object(Y["getPrefCompliantMemberNameById"])(t,n.created_by);return{userGroup:n,defaultChannels:i,defaultChannelNames:s,creator:o,showDelete:!Object(A["m"])(n)&&!n.is_external,showToggle:Object(A["b"])(t)}};var ie=Object(g["connect"])(ne,null,null,{areStatePropsEqual:function e(t,a){return Object($["a"])(t,a,2)}})(re);var se=new w["b"]("user_groups");var oe={id:b["b"].string.isRequired,userGroup:b["b"].object,onClick:b["b"].func,isUserGroupBrowser:b["b"].bool};var le={userGroup:{},onClick:O["noop"],isUserGroupBrowser:false};var ce=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}u()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(W["d"])(t,this.props.id)}},{key:"maybeRenderDescription",value:function e(){var t=this.props.userGroup;var a=Object(A["e"])(t);if(!a)return null;return f.a.createElement("p",null,a)}},{key:"maybeRenderCountOrHandle",value:function e(){var t=this.props.userGroup;var a=Object(A["l"])(t);var r=Object(A["f"])(t,{includeAtSign:false});if(!(a||r))return null;var n=se.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a});r&&(n=n+" - "+Object(A["f"])(t));return f.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}},{key:"renderRow",value:function e(){var t=this.props,a=t.userGroup,r=t.id,n=t.isUserGroupBrowser;if(n)return f.a.createElement(ie,{id:r});return f.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},f.a.createElement(H["a"],{"data-user-group-id":""+r,onClick:this.onClick},f.a.createElement("h4",null,Object(A["h"])(a)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){var t=this.props.id;return f.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(v["Component"]);ce.displayName="LegacyUserGroupListItem";ce.defaultProps=le;var ue=function e(t,a){var r=a.id;return{userGroup:Object(E["e"])(t,r)}};var de=Object(g["connect"])(ue)(ce);var pe=a(290);var me=new w["b"]("user_groups");var he={isFlexpane:b["b"].bool,featureSonicUserGroups:b["b"].bool};var ve={isFlexpane:false,featureSonicUserGroups:false};var fe=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"computeAtLabel",value:function e(t){var a=t;"group"===a&&(a="channel");var r=Object(pe["b"])({ms_name:a});return"@"+r}},{key:"renderContent",value:function e(){var t=this.props.isFlexpane;var a=t?null:y()("col","span_3_of_4");var r=y()("normal_padding",{dull_grey:t});var n=me.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"});var i=me.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return f.a.createElement("div",{className:a},f.a.createElement("div",{className:r},f.a.createElement("p",{className:"user_groups_tip"},n),f.a.createElement("p",{className:"user_groups_tip"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.isFlexpane,r=t.featureSonicUserGroups;if(r)return null;var n=a?f.a.createElement("div",null,f.a.createElement("span",{className:"user_groups_img"})):null;var i=a?null:f.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},f.a.createElement("span",{className:"user_groups_img"}));return f.a.createElement(v["Fragment"],null,n,this.renderContent(),i)}}]);return t}(v["PureComponent"]);fe.displayName="LegacyUserGroupEmptyState";fe.defaultProps=ve;var be=function e(t,a){var r=a.id;return{userGroup:Object(E["e"])(t,r),featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var ge=Object(g["connect"])(be)(fe);var _e=a(2485);var ye=new w["b"]("user_groups");var ke={userGroups:b["b"].arrayOf(b["b"].object),scrollmark:b["b"].shape({key:b["b"].string,offset:b["b"].number}),searchQuery:b["b"].string,setCursorMark:b["b"].func,fetchUserGroupsPost:b["b"].func,fetchDeactivatedUserGroupsPost:b["b"].func,saveScrollmark:b["b"].func,onItemClick:b["b"].func,onCreateUserGroup:b["b"].func,onClearSearch:b["b"].func,isLegacy:b["b"].bool,telemeter:b["b"].object.isRequired,includeDeactivated:b["b"].bool,isUserGroupBrowser:b["b"].bool,featureSonicUserGroups:b["b"].bool,onItemTabWithin:b["b"].func};var Oe={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:O["noop"],fetchUserGroupsPost:O["noop"],fetchDeactivatedUserGroupsPost:O["noop"],saveScrollmark:O["noop"],onItemClick:O["noop"],onCreateUserGroup:O["noop"],onClearSearch:O["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureSonicUserGroups:false,onItemTabWithin:O["noop"]};var Ce=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGroupClick=a.onGroupClick.bind(a);a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.fetchPost=a.fetchPost.bind(a);a.handleFetchDeactivatedGroupsResponse=a.handleFetchDeactivatedGroupsResponse.bind(a);a.handleFetchActiveGroupsResponse=a.handleFetchActiveGroupsResponse.bind(a);a.fetchAround=a.fetchAround.bind(a);a.renderRow=a.renderRow.bind(a);a.maybeRenderList=a.maybeRenderList.bind(a);a.focus=a.focus.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.isFocusableItem=a.isFocusableItem.bind(a);a.requestPost=null;a.keys=null;a.list=null;a.layout=new F["a"];a.layout.heightCache.DEFAULT_HEIGHT=90;a.totalGroups=0;a.isFirstFetch=!e.userGroups.length&&!e.searchQuery;a.state={reachedEnd:false,fetchingDeactivatedGroups:false};return a}u()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.totalGroups=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,a){if(!this.list)return;if(!a)return;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"getAriaLabelForRow",value:function e(t){if(!this.keys)return null;var a=this.props.userGroups;var r=a[t];var n=false;return T({name:Object(A["i"])(r),handle:Object(A["f"])(r,n),purpose:Object(A["e"])(r),isDeactivated:!Object(A["t"])(r),memberCount:Object(A["l"])(r)})}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"handleFetchActiveGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;this.totalGroups=r;if(this.props.userGroups.length>=this.totalGroups||!a.length)if(this.props.includeDeactivated){this.props.setCursorMark(null);this.setState(function(){return{fetchingDeactivatedGroups:true}});this.requestPost=this.fetchDeactivatedGroups()}else this.setState(function(){return{reachedEnd:true}})}},{key:"handleFetchDeactivatedGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;var n=this.totalGroups+r;(this.props.userGroups.length>=n||!a.length)&&this.setState(function(){return{reachedEnd:true}})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show");return this.requestPost.bind(this).finally(function(){t.requestPost=null;if(t.isFirstFetch){t.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy");t.isFirstFetch=false}})}},{key:"fetchDeactivatedGroups",value:function e(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchActiveGroups",value:function e(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"maybeRenderList",value:function e(t){var a=this;if(!t.length&&this.state.reachedEnd)return this.renderEmptyListView();if(!this.state.reachedEnd){this.loadingIndicatorKey="Loading"+t.length;t.push(this.loadingIndicatorKey)}return f.a.createElement(x,null,function(e){var r=e.width,n=e.height;return f.a.createElement(D["a"],{width:r,height:n,keys:t,layout:a.layout,rowRenderer:a.renderRow,onScroll:a.onScroll,onItemClick:a.props.onItemClick,ref:a.setListRef,loadAround:a.fetchAround,loadPost:a.fetchPost,isFocusableItem:a.isFocusableItem,onItemTabWithin:a.props.onItemTabWithin,ariaLabel:ye.t("User Groups"),getAriaLabelForRow:a.getAriaLabelForRow})})}},{key:"isFocusableItem",value:function e(t){var a=t.key;return a!==this.loadingIndicatorKey}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;if(a===this.loadingIndicatorKey)return f.a.createElement("div",{className:"margin_top_200"},f.a.createElement(B["a"],{color:"blue"}));return this.renderUserGroup(t)}},{key:"renderUserGroup",value:function e(t){var a=this.props,r=a.userGroups,n=a.isLegacy,i=a.isUserGroupBrowser;var s=r[t].id;if(!s)return null;if(n)return f.a.createElement(de,{id:s,isUserGroupBrowser:i,onClick:this.onGroupClick});return f.a.createElement(q["a"],{id:s,onClick:this.onGroupClick})}},{key:"renderEmptyListView",value:function e(){var t=this.props,a=t.featureSonicUserGroups,r=t.searchQuery,n=t.onClearSearch,i=t.onCreateUserGroup,s=t.isLegacy,o=t.isUserGroupBrowser;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p=!!r.length;if(p){c=ye.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:r});u=ye.t("Clear Search");d=n}else{if(s&&!a)return f.a.createElement(ge,{isFlexpane:!o});if(Object(U["a"])()){l=ye.t("Organize your team");u=ye.t("Create a User Group");d=i}else l=ye.t("No user groups yet");c=ye.t("User groups make it easy to get the attention of many members at once.")}var m=y()({"p-user_group_list__empty_list":!p,"p-user_group_list__empty_search_results":p});return f.a.createElement("div",{className:m,"data-qa":"searchable_ug_list_empty_state"},f.a.createElement(L["a"],{title:l,description:c,primaryActionText:u,onClickPrimaryAction:d}))}},{key:"render",value:function e(){var t=this.props.userGroups;this.keys=this.props.includeDeactivated?t.map(function(e){return e.id}):t.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});return f.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]);return t}(v["PureComponent"]);Ce.displayName="SearchableUserGroupsList";Ce.defaultProps=Oe;var Ee=function e(t,a){var r=a.map(function(e){var a=t[e];if(!a)return null;return{id:a.id,isDeactivated:!!a.date_delete,name:a.name,handle:a.handle,user_count:a.user_count}}).filter(function(e){return e});return r};var Se=Object(k["createSelector"])([E["b"],C["getFlexpaneUserGroups"]],Ee);var we={getUserGroups:Se};var Ie=function e(t){return{userGroups:Se(t),scrollmark:Object(C["getScrollmark"])(t),searchQuery:Object(C["getSearchQuery"])(t),featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups"),telemeter:Object(I["c"])({state:t})}};var je={fetchUserGroupsPost:C["fetchUserGroupsPost"],saveScrollmark:C["saveScrollmark"],setSearchQuery:C["setSearchQuery"],setCursorMark:C["setCursorMark"],fetchDeactivatedUserGroupsPost:C["fetchDeactivatedUserGroupsPost"]};var Te=Object(g["connect"])(Ie,je)(function(e){var t=e.forwardedRef,a=s()(e,["forwardedRef"]);return f.a.createElement(Ce,n()({ref:t},a))});var Ae=t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(Te,n()({forwardedRef:t},e))})},2059:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(2);var b=a(0);var g=a(6);var _=a(1794);var y=a(879);var k=function e(t,a){var r=Math.min(a||5e5,5e5);if(t.length>r)return Object(f["escapeRegExp"])(t.slice(0,r));return Object(f["escapeRegExp"])(t)};var O=a(35);var C=a(225);var E=a(53);var S=a(39);var w=a(13);var I=a.n(w);var j=a(4647);var T=a(31);var A=a(497);var N=a(1469);var M=a(86);var P=a(23);var R=a(134);var x=a(118);var D=function e(t){return h.a.createElement("div",null,h.a.createElement(R["a"],{"data-qa":"article-"+t.article.id,className:"p-help_search__list__item "+(t.isFocus?"p-help_search__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(a){13===a.keyCode&&t.onClickArticle(t.article.url)}},h.a.createElement("div",{className:"p-help_search__list__item__title"},"string"===typeof t.article.title?h.a.createElement(x["a"],{className:"c-channel_search_result__justification",text:t.article.title,showTooltips:false}):t.article.title),h.a.createElement(P["b"],{type:"enter",className:"p-help_search__list__icon"})))};D.displayName="Article";D.defaultProps={article:{},isFocus:false,onClickArticle:f["noop"]};var F=D;var L=a(3333);var B=new g["b"]("help");var U={query:b["b"].string,helpCenterToken:b["b"].string,articles:b["b"].arrayOf(b["b"].shape({id:b["b"].oneOfType([b["b"].number,b["b"].string]),images:b["b"].array,label_names:b["b"].array,title:b["b"].node,url:b["b"].string})),tickets:b["b"].shape({open:b["b"].number,closed:b["b"].number,unread:b["b"].number}),onQueryChange:b["b"].func,isLoading:b["b"].bool,onOpenLink:b["b"].func,autoFocus:b["b"].bool,noTopMargin:b["b"].bool,noBottomMargin:b["b"].bool};var q={query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:f["noop"],isLoading:false,onOpenLink:f["noop"],autoFocus:false,noTopMargin:false,noBottomMargin:false};var W=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:a.props.articles,focusFirstResult:true,isLoading:a.props.isLoading};a.zdLocale=Object(E["a"])();Object(T["a"])(a,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"]);return a}l()(t,[{key:"componentWillReceiveProps",value:function e(t){t.articles!==this.state.articles&&this.setState(function(){return{articles:t.articles,isLoading:t.isLoading}})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{query:a,focusFirstResult:true}});this.props.onQueryChange(a)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow({url:Object(C["a"])(this.state.articles[0].url,this.props.helpCenterToken),isFromSubmit:true,index:0,articleId:this.state.articles[0].id})}},{key:"onClickArticle",value:function e(t){var a=t.url,r=t.index,n=t.articleId;this.openLinkInNewWindow({url:Object(C["a"])(a,this.props.helpCenterToken),index:r,articleId:n})}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"openLinkInNewWindow",value:function e(t){var a=t.url,r=t.index,n=t.isFromSubmit,i=t.articleId;var s=this.props.onOpenLink;s({url:a,query:this.state.query,index:r,isFromSubmit:n,articleId:i});window.open(Object(C["a"])(a,this.props.helpCenterToken))}},{key:"renderArticles",value:function e(t){var a=this;var r=this.state.articles;var n=r[t];return h.a.createElement(F,{article:n,isFocus:this.state.focusFirstResult&&0===t,onClickArticle:function e(r){return a.onClickArticle({url:r,index:t,articleId:n.id})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.autoFocus,n=a.noTopMargin,i=a.noBottomMargin;var s=this.state,o=s.query,l=s.articles;this.keys=Object(f["map"])(l,"id").map(function(e){return e.toString()});var c=I()({margin_top_200:!n,margin_bottom_100:!i});return h.a.createElement(m["Fragment"],null,h.a.createElement(A["a"],{placeholder:B.t("Search the Help Center"),value:o,icon:"search",autoFocus:r,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:c,size:"large",onBlur:this.onSearchInputBlur}),o?null:h.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},B.t("Popular help topics")),h.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?h.a.createElement(M["a"],{size:"large",color:"blue",noMargin:true}):h.a.createElement("div",{className:"p-help_search__list__inner full_height"},h.a.createElement(j["a"],null,function(e){var a=e.width,r=e.height;return h.a.createElement(N["a"],{width:a,height:r,keys:t.keys,rowRenderer:t.renderArticles})}))))}}]);return t}(m["Component"]);W.displayName="HelpSearch";W.defaultProps=q;var H=W;var G=new g["b"]("help");var V={query:b["b"].string,helpCenterTrackingToken:b["b"].string,fetchHelpArticles:b["b"].func,clogger:b["b"].object.isRequired,autoFocus:b["b"].bool,onQueryChange:b["b"].func,defaultArticlesData:b["b"].arrayOf(b["b"].oneOfType([b["b"].number,b["b"].shape({type:b["b"].string.isRequired,id:b["b"].number.isRequired,text:b["b"].string}),b["b"].shape({type:b["b"].string.isRequired,url:b["b"].string.isRequired,text:b["b"].string.isRequired})])),onOpenLink:b["b"].func,noTopMargin:b["b"].bool,noBottomMargin:b["b"].bool};var K={query:"",helpCenterTrackingToken:"",fetchHelpArticles:f["noop"],autoFocus:false,onQueryChange:f["noop"],defaultArticlesData:null,onOpenLink:f["noop"],noTopMargin:false,noBottomMargin:false};function z(e){return"number"===typeof e||"helplink"===e.type?e.id||e:null}var Q=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:[],isLoading:true};a.allArticles=[];a.onQueryChange=a.onQueryChange.bind(a);a.zdLocale=Object(E["a"])();return a}l()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}},{key:"componentDidUpdate",value:function e(t){t.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}},{key:"onQueryChange",value:function e(t){var a=t?this.filterArticlesByQuery(t):this.defaultArticles;if(t&&a.length<7){var r=Object(C["b"])({query:t,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});a.push({id:-99999,images:[],label_names:[],title:G.rt('Search for "{query}" on the Help Center',{query:t}),url:r})}this.setState(function(){return{query:t,articles:a}});this.props.onQueryChange(t)}},{key:"filterPopularArticles",value:function e(t){var a=[];t.forEach(function(e){e.popular&&a.push(e)});a.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return a}},{key:"filterDefaultArticles",value:function e(t){var a=this.props.defaultArticlesData;if(!a)return[];var r={};a.forEach(function(e){var a=z(e);a&&(r[a]=t.find(function(e){return e.id===a}))});var i=a.map(function(e,t){var a=z(e);if(a&&r[a]){if("number"===typeof e)return r[a];return n()({},r[a],{title:e.text||r[a].title})}return{id:"customArticle-"+t,title:e.text,url:e.url}}).filter(function(e){return!!e.url});return i}},{key:"filterArticlesByQuery",value:function e(t){var a=k(t);var r=new RegExp(a,"i");var n=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===a.toLowerCase()){n=t;return false}return e.title.match(r)});-1!==n&&i.unshift(this.allArticles[n]);return i}},{key:"processArticles",value:function e(t){var a=this;try{this.allArticles=JSON.parse(t.articles).articles}catch(e){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles);this.state.query?this.setState(function(){return{articles:a.filterArticlesByQuery(a.props.query),isLoading:false}}):this.setState(function(){return{articles:a.defaultArticles,isLoading:false}})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(function(e){t.processArticles(e)})}},{key:"render",value:function e(){var t=this.state,a=t.articles,r=t.query,n=t.isLoading;var i=this.props,s=i.clogger,o=i.autoFocus,l=i.onOpenLink,c=i.noTopMargin,u=i.noBottomMargin;return h.a.createElement(H,{articles:a,query:r,autoFocus:o,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:n,clogger:s,onOpenLink:l,noTopMargin:c,noBottomMargin:u})}}]);return t}(m["Component"]);Q.displayName="HelpSearchContainer";Q.defaultProps=K;var Y=function e(t){return{clogger:Object(S["a"])({state:t}),helpCenterTrackingToken:Object(y["getHelpCenterTrackingToken"])(t),team:Object(O["d"])(t)}};var J={fetchHelpArticles:_["a"]};var X=Object(v["connect"])(Y,J)(Q);var Z=t["a"]=X},2061:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(12);var h=a(13);var v=a.n(h);var f=a(0);var b=a(35);var g=a(21);var _=a(28);var y=a(11);var k=a(39);var O=a(18);var C=a(3750);var E=a(6);var S=a(383);var w=new E["b"]("unavailable_channel");var I={isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,isThread:f["b"].bool};var j={isThread:false};var T=function e(t){var a=t.isThread,r=t.isImOrMpim,n=t.unavailableTeamId;var i=void 0;var s=p.a.createElement(S["a"],{id:n});i=a?w.t("This thread is currently unavailable"):w.rt("{teamName} is making changes to their workspace",{teamName:s});var o=void 0;o=a?w.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:s}):r?w.t("This conversation will be unavailable until this process is complete."):w.t("This channel will be unavailable until this process is complete.");var l=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return p.a.createElement(d["Fragment"],null,p.a.createElement("img",{className:"p-unavailable_channel_image",src:l,srcSet:l+", "+l.replace(".png","@2x.png")+" 2x",alt:""}),p.a.createElement("h2",{className:"p-unavailable_channel_title"},i),p.a.createElement("div",{className:"p-unavailable_channel_content"},o))};T.displayName="UnavailableChannelBlocker";T.defaultProps=j;var A=T;var N=a(419);var M=a(55);var P=a(287);var R=new E["b"]("unavailable_channel");var x={isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,isThread:f["b"].bool,clogger:f["b"].object.isRequired,channelId:f["b"].string.isRequired,channelPrivacyType:f["b"].oneOf(Object.values(y["CHANNEL_PRIVACY_TYPE"])).isRequired};var D={isThread:false};var F=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={loading:false};a.handleReload=a.handleReload.bind(a);return a}s()(t,[{key:"handleReload",value:function e(){var t=this.props,a=t.channelId,r=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread;this.setState(function(){return{loading:true}});var o="UnavailableChannelReload: Remote team "+n+" has migrated their data, user triggered client reload";var l="unavailable_channel_reload";Object(M["a"])()?Object(P["a"])({reason:o,reasonKey:l}):Object(P["b"])({reason:o,reasonKey:l,noCache:true});i.track(O["l"].CHANNEL_UNAVAILABLE,{channel_id:a,channel_type:a?a.charAt(0):null,channel_privacy_type:r,unavailable_team_id:n,contexts:{ui_context:{action:O["w"].CLICK,step:s?O["A"].THREAD:O["A"].MESSAGE_PANE,ui_element:O["z"].BTN_RELOAD}}});i.sendDataAndEmptyQueue()}},{key:"render",value:function e(){var t=this.props,a=t.isThread,r=t.isImOrMpim,n=t.unavailableTeamId;var i=void 0;i=a?R.t("Reload Slack to view this thread"):r?R.t("Reload Slack to view this conversation"):R.t("Reload Slack to view this channel");var s=p.a.createElement(S["a"],{id:n});var o=void 0;o=a?R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:s}):r?R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:s}):R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:s});var l=cdn_url+"/80588/img/enterprise/unavailable_channel_reload.png";return p.a.createElement(d["Fragment"],null,p.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:l,srcSet:l+", "+l.replace(".png","@2x.png")+" 2x",alt:""}),p.a.createElement("h2",{className:"p-unavailable_channel_title"},i),p.a.createElement("div",{className:"p-unavailable_channel_content"},p.a.createElement("p",null,o),p.a.createElement("div",{className:"align_center"},p.a.createElement(N["a"],{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},R.t("Reload Slack")))))}}]);return t}(d["PureComponent"]);F.displayName="UnavailableChannelReload";F.defaultProps=D;var L=F;var B={isReloadRequired:f["b"].bool.isRequired,isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,isThread:f["b"].bool,clogger:f["b"].object.isRequired,channelId:f["b"].string.isRequired,channelPrivacyType:f["b"].oneOf(Object.values(y["CHANNEL_PRIVACY_TYPE"])).isRequired};var U={isThread:false};var q="reload";var W="blocker";var H=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.clogImpression()}},{key:"componentDidUpdate",value:function e(t){t.isReloadRequired===this.props.isReloadRequired&&t.channelId===this.props.channelId||this.clogImpression()}},{key:"clogImpression",value:function e(){var t=this.props,a=t.channelId,r=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread,o=t.isReloadRequired;i.track(O["l"].CHANNEL_UNAVAILABLE,{channel_id:a,channel_type:a?a.charAt(0):null,channel_privacy_type:r,unavailable_team_id:n,contexts:{ui_context:{action:O["w"].IMPRESSION,step:s?O["A"].THREAD:O["A"].MESSAGE_PANE,ui_properties:{element_name:o?q:W}}}})}},{key:"render",value:function e(){var t=this.props,a=t.isReloadRequired,r=t.isThread;var n=v()("p-unavailable_channel",{"p-unavailable_channel_thread":r});return p.a.createElement("div",{className:n},a?p.a.createElement(L,this.props):p.a.createElement(A,this.props))}}]);return t}(d["PureComponent"]);H.displayName="UnavailableChannel";H.defaultProps=U;var G=function e(t,a){var r=a.unavailableTeamId,n=a.channelId;var i=Object(b["j"])(t,r);var s=Object(g["e"])(t,n);return{isReloadRequired:Object(_["externalOrgMigrated"])(i),isImOrMpim:Object(y["isIm"])(s)||Object(y["isMpim"])(s),clogger:Object(k["a"])({state:t}),channelId:s.id,channelPrivacyType:Object(y["getChannelPrivacyType"])(s)}};var V=Object(m["connect"])(G)(H);var K=t["a"]=V},2063:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(17);var o=a(41);var l=a(3);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(12);var _=a(2);var y=a.n(_);var k=a(31);var O=a(13);var C=a.n(O);var E=a(21);var S=a(556);var w=a(1286);var I=a(1442);var j=a(6);var T=a(20);var A=a(145);var N=a(91);var M=a(52);var P=a(123);var R=a(150);var x=a(242);var D=a(318);var F=a(250);var L=a(1291);var B=new j["b"]("menu_file");var U={success:i["b"].bool,response:i["b"].object,wasShared:i["b"].bool,channel:i["b"].string,threadTs:i["b"].string};var q=Object(s["b"])("On Gdrive Creation Complete",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.success,n=a.response,i=a.wasShared,s=a.channel,o=a.threadTs;var l=t();var c=Object(L["getEnablePopupsBannerVisibility"])(l);r&&n&&n.data&&n.data.url&&!i&&c&&e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:"created_google_drive_document",message:{channel:s,thread_ts:o,slackbot_feels:"sad_surprise",text:B.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:n.data.url})}}))});q.meta={name:"onGDriveCreateComplete",key:"actionsOnGdriveCompleteOnGDriveCreateComplete",description:"On Gdrive Creation Complete"};q.propTypes=U;var W=q;var H=a(837);var G=a(82);var V=a(344);var K=a(14);var z=new j["b"]("files");var Q={type:i["b"].string.isRequired,title:i["b"].string,comment:i["b"].string,blocks:i["b"].array,broadcast:i["b"].bool,shareFile:i["b"].bool,channel:i["b"].string,threadTs:i["b"].string,reason:i["b"].string};var Y=Object(s["b"])("Create a Gdrive File",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.title,i=a.comment,s=a.blocks,o=a.broadcast,l=a.shareFile,c=a.channel,u=a.threadTs,d=a.reason;var p="application/vnd.google-apps";var m=t();var h=Object(K["a"])({state:m});var v="CREATE_GOOGLE_DRIVE_FILE";l&&c&&e(Object(x["a"])({id:c}));var f=Object(G["a"])(t());return e(Object(F["b"])({serviceStub:"gdrive",mimeType:p+"."+r,filename:n||"",reason:d||"create-gdrive-file"})).then(function(t){var a=Object(H["d"])(t.url);a&&!a.closed||e(Object(L["updateEnablePopupsBannerVisibility"])(true));l?e(Object(F["s"])({channels:c,threadTs:u,title:n||"",initialComment:Object(V["b"])(m,i),blocks:s,broadcast:o,link:t.url,reason:d||"create-gdrive-file"})).then(function(){return e(W({success:true,response:t,wasShared:l,channel:f,threadTs:u}))}).catch(function(t){h.error(v,t);e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:D["EphemeralTypes"].gdriveShareFileError,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:z.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(W({success:true,response:t,wasShared:l,channel:f,threadTs:u}))}).catch(function(t){e(W({success:false}));var a=z.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(a=z.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."));h.error(v,t);e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:D["EphemeralTypes"].unhandledGdriveCreate,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:a}}))})});Y.meta={name:"createGdriveFile",key:"actionsCreateGdriveFileCreateGdriveFile",description:"Create a Gdrive File"};Y.propTypes=Q;var J=Y;var X=a(1420);var Z=a(1422);var $=a(1211);var ee=a(1456);var te=a(1680);var ae=a(1681);var re=a(1911);var ne=new j["b"]("create-gdoc-dialog");var ie={type:i["b"].string,closeModal:i["b"].func,getShareableChannelId:i["b"].func,converMsgOpsToRichTextMessage:i["b"].func,createGdriveFile:i["b"].func,onGDriveCreateComplete:i["b"].func,threadTs:i["b"].string,msgText:i["b"].string,setMsgText:i["b"].func,msgOps:i["b"].array,setMsgOps:i["b"].func,featureWysiwygComposer:i["b"].bool,selectedChannelId:i["b"].string,setSelectedChannel:i["b"].func,disallowedKeywordInMsgText:i["b"].string,canPostInSelectedChannel:i["b"].bool,canThread:i["b"].bool,channelType:i["b"].oneOf(["mpim","im","channel","private"]),selectedChannelName:i["b"].node.isRequired};var se={type:void 0,closeModal:y.a.noop,getShareableChannelId:y.a.noop,createGdriveFile:y.a.noop,onGDriveCreateComplete:y.a.noop,threadTs:void 0,msgText:"",setMsgText:y.a.noop,msgOps:void 0,setMsgOps:y.a.noop,converMsgOpsToRichTextMessage:y.a.noop,featureWysiwygComposer:false,selectedChannelId:void 0,setSelectedChannel:y.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false,canThread:false,channelType:null};var oe=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(a,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]);a.titleInput=null;a._isMounted=false;a.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:true,broadcast:false};return a}m()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"onTextChange",value:function e(t){var a=t.text,r=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(r):this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){this.props.onGDriveCreateComplete(false)}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"onBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"getCleanMsgText",value:function e(){var t=this.props.featureWysiwygComposer;if(t)return null;var a=Object(S["a"])(this.props.msgText);return y.a.trim(a)}},{key:"getDialogTitle",value:function e(){var t=this.props.type;switch(t){case"document":return ne.t("Create a Google Document");case"presentation":return ne.t("Create a Google Presentation");case"spreadsheet":return ne.t("Create a Google Spreadsheet");default:return ne.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,r=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.shareWith,c=s.titleInputValue,u=s.submitting;var d=c&&c.length>T["MAX_FILENAME_LENGTH"];return l&&!r&&!n||l&&n&&!i||!!a||o||d||u}},{key:"createGDocOnGo",value:function e(){var t=this;var a=this.props,r=a.selectedChannelId,n=a.getShareableChannelId,i=a.type,s=a.threadTs,o=a.msgOps,l=a.featureWysiwygComposer;var c=this.state,u=c.titleInputValue,d=c.shareWith,p=c.broadcast;if(!r)return;n({channelOrMemberId:r}).then(function(e){var a=t.getCleanMsgText();var r=u||ne.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});var n=void 0;l&&(n=t.props.converMsgOpsToRichTextMessage({msgOps:o,channelId:e,inThread:!!s}));t.props.createGdriveFile({type:i,title:r,comment:a,blocks:n,broadcast:p,shareFile:d,channel:e,threadTs:s,reason:"create-gdrive-file"}).then(function(){t._isMounted&&t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,i=t.channelType,s=t.selectedChannelName;var o=this.state.broadcast;if(!a||!r)return null;return n.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},n.a.createElement(ae["a"],{channelType:i,selectedChannelName:s,value:o,onChange:this.onBroadcastChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props.selectedChannelId;var a=this.state.shareWith;return n.a.createElement(Z["a"],{onChange:this.onShareChannelChange,initialChannelId:t,isDisabled:!a})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(ee["a"])(c()({},this.props));if(!a)return null;return n.a.createElement("div",{className:"p-share_dialog__section"},n.a.createElement(A["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},a))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var a="create-gdoc-share-with";return n.a.createElement(M["a"],{text:ne.t("Share with:"),htmlFor:a,type:"inline"},n.a.createElement(P["a"],{id:a,defaultChecked:t,onChange:this.onShareWithChange,"data-qa":"share_with"}))}},{key:"renderTitleInput",value:function e(){var t=this.state.titleInputValue;var a="p-create_gdoc_dialog__title";return n.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},n.a.createElement(M["a"],{htmlFor:a,text:ne.t("Title"),optional:true},n.a.createElement(R["a"],{id:a,name:a,maxCharacterLimit:T["MAX_FILENAME_LENGTH"],counterMinimumCharacters:T["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:t,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}},{key:"renderShareWithPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.threadTs;if(r)return n.a.createElement(te["a"],{channelId:a,threadTs:r});return n.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props.msgText;var a=this.state.shareWith;if(!a)return null;var r=ne.t("Add a message, if you\u2019d like.");var i=C()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return n.a.createElement("div",{className:i},n.a.createElement(X["a"],{text:t,onTextChange:this.onTextChange,placeholder:r,ariaLabel:r,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"render",value:function e(){return n.a.createElement(N["a"],{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:true,goButtonText:ne.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:false,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(r["Component"]);oe.displayName="CreateGDocDialog";oe.defaultProps=se;function le(e,t){var a=t.selectedChannelId;var r=Object($["b"])(e,t);var n=Object(E["e"])(e,a)||Object(E["k"])(e,a);return c()({},r,{selectedChannel:n})}var ce=function e(t){return{closeModal:function e(){return t(o["closeModal"].apply(void 0,arguments))},getShareableChannelId:function e(){return t(w["a"].apply(void 0,arguments))},createGdriveFile:function e(){return t(J.apply(void 0,arguments))},onGDriveCreateComplete:function e(){return t(W.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function e(){return t(I["a"].apply(void 0,arguments))}}};var ue=Object(g["connect"])(le,ce)(oe);var de=Object($["a"])(ue);var pe=Object(s["b"])("Opens the create gdoc file dialog",function(e,t,a){e(Object(o["openModal"])({element:n.a.createElement(de,a)}))});pe.meta={name:"openCreateGDocDialog",key:"actionsOpenCreateGdocDialogOpenCreateGDocDialog",description:"Opens the create gdoc file dialog"};pe.propTypes={type:i["b"].string,displayType:i["b"].string,initialChannelId:i["b"].string};var me=t["a"]=pe},2064:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a(202);var b=a(14);var g=a(63);var _=a(13);var y=a.n(_);var k=a(31);var O=a(182);var C=a(755);var E=a(277);var S=a(1058);var w=a(244);var I=a(299);var j=a(761);var T=a(23);var A=a(116);var N=a(45);var M=a(6);var P=a(322);var R=a(2027);var x=a(1699);var D=a(69);var F=a(856);var L=a(24);var B=Object(L["b"])("TS.view.resize_sig.add",v["noop"],true);var U=Object(L["b"])("TS.view.resize_sig.remove",v["noop"],true);var q=a(33);var W=a(2092);var H=a(2090);var G=a(1686);var V=new M["b"]("search");var K=new M["b"]("jumper");var z=new M["b"]("keys");var Q={close:m["b"].func.isRequired,interfaceMode:m["b"].string.isRequired,displayQuery:m["b"].string,searchAutocompleteSuggestionAccept:m["b"].func.isRequired,searchPrecache:m["b"].func.isRequired,setRequestFromEditableRequest:m["b"].func.isRequired,setSearchInputBoxUserQuery:m["b"].func.isRequired,userQuery:m["b"].string.isRequired,visible:m["b"].bool.isRequired,telemeter:m["b"].object,isCustomTitlebarShown:m["b"].bool,lastOpenMethod:m["b"].string};var Y={displayQuery:"",telemeter:g["d"],isCustomTitlebarShown:false,lastOpenMethod:""};var J=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(a,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]);a.state={appBannerHeightPx:a.getBannerHeight()};a.onSearchInputBoxFocus=Object(v["throttle"])(function(){return a.props.searchPrecache()},6e4);a.onResize=Object(v["throttle"])(a.onResize.bind(a),50);B(a.onResize);a.inputRef=p.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){N["isDesktop"]&&Object(N["legacyAreDragRegionsRequired"])()&&Object(N["updateDragRegion"])([])}},{key:"componentWillUnmount",value:function e(){N["isDesktop"]&&Object(N["legacyAreDragRegionsRequired"])()&&Object(R["a"])();U(this.onResize)}},{key:"onResize",value:function e(){var t=this;this.setState(function(){return{appBannerHeightPx:t.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(F["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchAutocompleteSuggestionDelete",value:function e(){this.inputRef.current&&this.inputRef.current.getWrappedInstance().focusTexty()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"onSearchClose",value:function e(){Object(D["g"])()||this.props.close()}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"getBannerHeight",value:function e(){var t=window.$&&window.$("#banner");return t&&t.height()||0}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case C["a"].SEARCH_RESULTS:return this.renderSearchResults();case C["a"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function e(){return p.a.createElement(G["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function e(){return p.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},p.a.createElement(W["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}},{key:"renderCmdKHint",value:function e(){if("key_button"===this.props.lastOpenMethod){var t=Object(q["isMac"])()?z.t("\u2318K"):z.t("Ctrl+K");return p.a.createElement("div",{className:"c-search_modal__tip_wrapper"},p.a.createElement("div",{className:"c-search_modal__tip"},K.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:t})))}return null}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var a=y()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===C["a"].EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown});var r=V.t("Search");return p.a.createElement(I["a"],{ariaRole:"dialog",ariaLabel:r,isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:a,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false,contentStyle:{marginTop:this.state.appBannerHeightPx}},p.a.createElement("div",{className:"c-search__input_and_close"},p.a.createElement(H["a"],{autoFocus:true,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),p.a.createElement(A["a"],{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":V.t("Cancel"),"data-qa":"search_input_close"},p.a.createElement(T["b"],{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}]);return t}(d["PureComponent"]);J.displayName="Search";J.defaultProps=Y;var X=function e(t){return{interfaceMode:Object(O["f"])(t),displayQuery:Object(E["getSearchInputBoxDisplayQuery"])(t),userQuery:Object(E["getSearchInputBoxUserQuery"])(t),visible:Object(O["t"])(t),telemeter:Object(g["c"])({state:t}),isCustomTitlebarShown:Object(w["isCustomTitlebarShown"])(t),lastOpenMethod:Object(O["h"])(t)}};var Z={searchAutocompleteSuggestionAccept:x["a"],searchPrecache:function e(){return P["n"].apply(void 0,arguments)},setRequestFromEditableRequest:function e(){return f["setRequestFromEditableRequest"].apply(void 0,arguments)},setSearchInputBoxUserQuery:function e(){return S["a"].apply(void 0,arguments)},close:function e(){return j["a"].apply(void 0,arguments)}};var $=Object(h["connect"])(X,Z)(J);var ee="IMPROVED_SEARCH";var te={logger:m["b"].object.isRequired,telemeter:m["b"].object.isRequired,resetSearchAfterUnknownUIError:m["b"].func.isRequired};var ae=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={hasError:false};a.retryRender=Object(v["throttle"])(a.retryRender.bind(a),100,{leading:false});return a}s()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_full_render_fail",1);this.props.logger.error(ee,"Error caught by ProtectedSearch "+a.componentStack,t,{subtype:"search"});this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return p.a.createElement($,null)}}]);return t}(d["PureComponent"]);ae.displayName="ProtectedSearch";var re=function e(t){return{logger:Object(b["a"])({state:t}),telemeter:Object(g["c"])({state:t})}};var ne={resetSearchAfterUnknownUIError:function e(){return f["resetSearchAfterUnknownUIError"].apply(void 0,arguments)}};var ie=Object(h["connect"])(re,ne)(ae);var se=t["a"]=ie},2069:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(110);var y=a.n(_);var k=a(9);var O=a(22);var C=a(41);var E=a(94);var S=a(73);var w=a(21);var I=a(61);var j=a(829);var T=a(25);var A=a(329);var N=a(1672);var M=a(1674);var P=a(1642);var R=a(20);var x=a(1177);var D=a(17);var F=a(574);var L=Object(D["b"])("Count the number of characters over the message length limit",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.text,i=a.delta,s=a.featureWysiwygComposer;var o=Object(F["b"])(t(),{channelId:r,text:n,delta:i,featureWysiwygComposer:s}),l=o.rawText,c=o.processedDelta;if(s)return Math.max(0,Object(x["a"])(c)-R["MAX_MESSAGE_INPUT_LENGTH"]);return Math.max(0,l.length-R["MAX_MESSAGE_INPUT_LENGTH"])});L.meta={name:"countCharsOverLimit",key:"actionsCountCharsOverMessageLimitCountCharsOverLimit",description:"Count the number of characters over the message length limit"};L.propTypes={channelId:v["b"].string,text:v["b"].string};var B=L;var U=a(11);var q=a(42);var W=a(27);var H=a(189);var G=a(23);var V=a(528);var K=a(806);var z=a(6);var Q=a(1176);var Y=a(169);var J=a(1172);var X=a(1893);function Z(e,t){return Object(X["a"])(new y.a(e),new y.a(t))}var $=a(1929);var ee=a(200);var te=a(852);var ae=a(909);var re=a(370);var ne=a(300);var ie=a(1421);var se=60;var oe=1e3;var le=new z["b"]("message");var ce={ts:v["b"].string.isRequired,originalMessageTextUsedForDeletionOnly:v["b"].string.isRequired,originalMessageContents:v["b"].object.isRequired,messageHasText:v["b"].bool.isRequired,saveMessageEdit:v["b"].func,channelId:v["b"].string,teamId:v["b"].string,viewContext:v["b"].string,isSelfIm:v["b"].bool,setDidRequestToStopEditing:v["b"].func,updateEditState:v["b"].func,stopEditingMessage:v["b"].func,updateHasUnsavedChanges:v["b"].func,canDelete:v["b"].bool,canUnbroadcast:v["b"].bool,initialEditOps:v["b"].arrayOf(v["b"].object),initialContents:v["b"].object,didRequestToStopEditing:v["b"].bool,editWindowMin:v["b"].number,isAdminUser:v["b"].bool,useJumbomoji:v["b"].bool,messageContainerType:v["b"].string,openModal:v["b"].func,countCharsOverMessageLimit:v["b"].func,featureSonicInputs:v["b"].bool,clientToolBar:v["b"].bool,featureWysiwygComposer:v["b"].bool};var ue={saveMessageEdit:h.a.noop,channelId:null,teamId:void 0,viewContext:void 0,isSelfIm:false,setDidRequestToStopEditing:h.a.noop,updateEditState:h.a.noop,stopEditingMessage:h.a.noop,updateHasUnsavedChanges:h.a.noop,canDelete:true,canUnbroadcast:false,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:h.a.noop,countCharsOverMessageLimit:h.a.identity,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false};var de="message_pane_edit_input";function pe(e){Object(ae["a"])({e:e,input_to_fill:"#"+de,offset_y:-8})}var me=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setTextyRef=a.setTextyRef.bind(a);a.maybeSave=a.maybeSave.bind(a);a.onTimerInterval=a.onTimerInterval.bind(a);a.renderTimeoutErrorDialog=a.renderTimeoutErrorDialog.bind(a);a.renderLengthErrorDialog=a.renderLengthErrorDialog.bind(a);a.renderUnknownErrorDialog=a.renderUnknownErrorDialog.bind(a);a.stopEditingMessage=a.stopEditingMessage.bind(a);a.handleSaveEditError=a.handleSaveEditError.bind(a);a.onEnter=a.onEnter.bind(a);a.onTextChange=a.onTextChange.bind(a);a.renderInput=a.renderInput.bind(a);a.texty=null;a.syncEditStateOnUnmount=true;a.editWindowTimeout=null;a.componentDidUnmount=false;a.enableBroadcastKeywords=!(a.props.messageContainerType===R["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||a.props.messageContainerType===R["MESSAGE_CONTAINERS"].THREADS_VIEW);a.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(Q["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};a.state={editSecondsRemaining:a.countRemainingSeconds(),numCharsOverLimit:a.props.countCharsOverMessageLimit({channelId:a.props.channelId,text:a.getEditContentsAsString(),delta:a.props.featureWysiwygComposer?new y.a(a.props.originalMessageContents.contents):null,featureWysiwygComposer:a.props.featureWysiwygComposer})};a.getComputedModules=Object(te["a"])(function(e,t,a,r,i){if(!(a||r))return e;var s=Object(ie["a"])({featureWysiwygComposer:r});return n()({},e,{composer:n()({},s,{teamId:t,zIndexOverride:i?null:200}),slacklink:r&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:r&&{convertHeaders:false,convertHorizontalRule:false}})});return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin;r>=0&&!a&&(this.editWindowTimeout=setInterval(this.onTimerInterval,oe))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,a){var r=a.editSecondsRemaining;r<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){if(this.syncEditStateOnUnmount){var t=this.texty.getContents();var a=this.hasUnsavedChanges();this.props.updateEditState({editOps:t.contents,hasUnsavedChanges:a})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,a=t.didRequestToStopEditing,r=t.channelId;var n=this.state.numCharsOverLimit;var i=this.props.countCharsOverMessageLimit({channelId:r,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new y.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(i>0||n>0)&&this.setState(function(){return{numCharsOverLimit:i}});this.props.updateHasUnsavedChanges(this.hasUnsavedChanges());a&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(false)}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditContentsAsString",value:function e(){var t=this.props.featureWysiwygComposer;if(t)return"";return Object(J["a"])(this.getEditContents())}},{key:"getEditContents",value:function e(){var t=this.props.initialEditOps;if(this.texty)return this.texty.getContents();if(t)return{contents:t};return{contents:[]}}},{key:"countRemainingSeconds",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin,n=t.ts;if(r<0||a)return null;var i=Object(Y["n"])(n);var s=60*r*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialEditOps,r=t.originalMessageContents;if(this.texty)return!Z(this.texty.getContents.contents,r.contents);return!a||!(a&&Z(a,r.contents))}},{key:"startDelete",value:function e(){var t=this.props,a=t.channelId,r=t.originalMessageTextUsedForDeletionOnly,n=t.originalMessageContents,i=t.canDelete,s=t.canUnbroadcast,o=t.ts,l=t.viewContext,c=t.featureWysiwygComposer;if(i){this.props.openModal({element:b.a.createElement(M["a"],{channelId:a,ts:o})});return}if(s){this.props.openModal({element:b.a.createElement(N["a"],{channelId:a,ts:o})});return}if(c){var u=new y.a(n.contents);var d=u.compose((new y.a).retain(u.length(),{strike:true}));this.props.saveMessageEdit({channelId:a,delta:d,viewContext:l,ts:o}).catch(this.handleSaveEditError)}else{var p=r.replace(/~/g,"");var m="~"+p+"~";this.props.saveMessageEdit({channelId:a,text:m,viewContext:l,ts:o}).catch(this.handleSaveEditError)}}},{key:"maybeSave",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext,i=t.featureWysiwygComposer;var s=this.state,o=s.editSecondsRemaining,l=s.numCharsOverLimit;if(l>0)return false;if(h.a.isNumber(o)&&o<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:a,text:this.getEditContentsAsString(),delta:i?new y.a(this.getEditContents().contents):null,viewContext:n,ts:r}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var a=t.message;switch(a){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:n,channelId:a,ts:r})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return h.a.isNumber(t)&&t<se}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var a=h.a.isNumber(t)&&t<=0;return a||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,a=t.editWindowMin,r=t.isAdminUser;var n=Object(Y["s"])(a,{units:"minutes"});var i=le.t("Message editing failed");var s=le.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:b.a.createElement("b",null,n)});var o=void 0;r&&(o=le.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return b.a.createElement(H["a"],{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:b.a.createElement(re["a"],{title:i},b.a.createElement("p",null,s),o)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=le.t("Message editing failed");var a=le.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:b.a.createElement(re["a"],{title:t},a)})}},{key:"renderLengthErrorDialog",value:function e(){var t=le.t("Message editing failed");var a=le.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:b.a.createElement(re["a"],{title:t},a)})}},{key:"renderLengthWarning",value:function e(){var t=le.t("text is too long!");return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var a=void 0;t<=0?a=le.t("(your time to edit ran out)"):t<=se&&(a=le.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},a)}},{key:"renderUnsavedWarning",value:function e(){var t=le.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return b.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var a=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var r=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!a&&!r)return null;return b.a.createElement("div",{className:"c-message__editor__messages"},t,a,r)}},{key:"renderInput",value:function e(){var t=this;var a=this.props,r=a.initialContents,n=a.messageHasText,i=a.useJumbomoji,s=a.channelId,o=a.featureSonicInputs,l=a.clientToolBar,c=a.featureWysiwygComposer,u=a.teamId;var d=n?le.t("Edit message"):le.t("Add message");var p=l&&!o?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!o){var m=this.getComputedModules(this.textyModules,u,l,c,o);return b.a.createElement(b.a.Fragment,null,b.a.createElement(V["default"],{id:de,ref:this.setTextyRef,className:p,modules:m,ariaLabel:d,placeholder:d,initialText:r,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:i,focusOnMount:true,useLegacyCreate:true,channelId:s,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:false}),b.a.createElement(W["c"],{onClick:pe,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},b.a.createElement(G["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),b.a.createElement(G["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),b.a.createElement(G["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return b.a.createElement(K["a"],{completeOnChannels:true,completeOnEmoji:true,completeOnMembers:true,shouldCompleteOnTab:true,channelId:this.props.channelId,renderInput:function e(a){var n=a.isOpen,p=a.modules;var m=t.getComputedModules(p,u,l,c,o);return b.a.createElement(V["default"],{ref:t.setTextyRef,className:"c-message__editor__input",modules:m,ariaLabel:d,placeholder:d,initialText:r,onEnter:t.onEnter,onEscape:t.stopEditingMessage,onTextChange:t.onTextChange,enableJumbomoji:i,isAutocompleteOpen:n,focusOnMount:true,channelId:s,enableBroadcastKeywords:t.enableBroadcastKeywords,enableEmojiButton:true,enableComposerButton:c,enableSendButton:false,useFocusRing:false})}})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},b.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),b.a.createElement("div",{className:"c-message__editor__footer"},b.a.createElement(W["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},le.t("Cancel")),b.a.createElement(W["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},b.a.createElement(G["a"],{type:"enter",className:"margin_right_50"}),le.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(f["PureComponent"]);me.displayName="BaseEditMessage";me.defaultProps=ue;function he(e,t){var a=t.ts,r=t.channelId,n=t.viewContext,i=t.messageContainerType;var s=Object(S["a"])(e,r,a);if(!s)return{};var o=Object(ee["a"])(e);var l=Object(w["e"])(e,r);var c=Object(I["a"])(e,"msg_edit_window_mins");var u=Object(T["b"])(e);var d=Object(j["a"])(e);var p=Object(q["canDeleteMessage"])(e,{message:s,channel:l,messageContainerType:i});var m=Object(q["canRemoveBroadcast"])(e,{message:s,channel:l,messageContainerType:i});var v=Object(A["getMessageEditData"])(e,{viewContext:n,channelId:r,ts:a})||{},f=v.editOps,b=v.didRequestToStopEditing;var g={contents:Object($["a"])(e,s,{featureWysiwygComposer:o}).ops};var _=void 0;_=f?{contents:f}:g;return{channelId:l.id,teamId:Object(O["b"])(e),isSelfIm:Object(U["isYou"])(u.id,l),canDelete:p,canUnbroadcast:m,originalMessageContents:g,initialEditOps:f,initialContents:_,ts:a,originalMessageTextUsedForDeletionOnly:s.text||"",messageHasText:o?!!(s.text||!h.a.isEmpty(s.blocks)):!!s.text,editWindowMin:c,isAdminUser:u.is_admin,didRequestToStopEditing:b,useJumbomoji:d,featureSonicInputs:Object(k["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(E["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:o}}var ve={saveMessageEdit:P["a"],setDidRequestToStopEditing:A["setDidRequestToStopEditing"],updateEditState:A["updateEditState"],stopEditingMessage:A["stopEditingMessage"],updateHasUnsavedChanges:A["updateHasUnsavedChanges"],openModal:C["openModal"],countCharsOverMessageLimit:B};var fe=Object(ne["b"])(Object(g["connect"])(he,ve)(me));fe.propTypes={ts:v["b"].string.isRequired,channelId:v["b"].string.isRequired};var be=t["a"]=fe},2070:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(337);var g=a(1183);var _=a(9);var y=a(156);var k=a(6);var O=a(909);var C=a(651);var E=a(371);var S=a(42);var w=a(73);var I=a(557);var j=a(1587);var T=a(2);var A=a(27);var N=a(23);var M=a(54);var P=a(1182);var R=new k["b"]("emoji");var x={onClick:d["b"].func.isRequired,onEmojiSelected:d["b"].func,featureSonicEmoji:d["b"].bool,clientTheme:d["b"].string};var D={onEmojiSelected:T["noop"],featureSonicEmoji:false,clientTheme:"light"};function F(e){var t=e.onClick,a=e.onEmojiSelected,r=e.featureSonicEmoji,n=e.clientTheme;var i=m.a.createElement(M["c"],{tip:R.t("Add reaction..."),delay:M["a"]},m.a.createElement(A["c"],{className:f()("c-reaction_add","c-reaction_add--"+n),onClick:t,"aria-label":R.t("Add reaction..."),"data-qa":"add_reaction_button"},m.a.createElement("div",{className:"c-reaction_add__container"},m.a.createElement(N["b"],{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":true}),m.a.createElement(N["b"],{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":true}))));if(r)return m.a.createElement(P["a"],{onEmojiSelected:a,showHandyReactions:true},i);return i}F.defaultProps=D;var L=a(2465);var B=new k["b"]("reactions");var U={reactions:d["b"].arrayOf(d["b"].shape(j["b"])),reactionKey:d["b"].string,currentUser:d["b"].string,className:d["b"].string,emojiMode:d["b"].string,changeReactionFromUserAction:d["b"].func.isRequired,featureSonicEmoji:d["b"].bool,canReact:d["b"].bool,clientTheme:d["b"].string};var q={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:false,canReact:true,clientTheme:"light"};var W=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onAddReaction=e.onAddReaction.bind(e);e.onReactionClick=e.onReactionClick.bind(e);e.onReactionEmojiPickerSelected=e.onReactionEmojiPickerSelected.bind(e);e.onFocusEnter=e.onFocusEnter.bind(e);e.onFocusLeave=e.onFocusLeave.bind(e);e.state={hasKeyboardFocus:false};return e}s()(t,[{key:"onAddReaction",value:function e(t){Object(O["a"])({e:t,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:t,adding:!a})}},{key:"onReactionEmojiPickerSelected",value:function e(t,a){this.onReactionClick(a)}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.reactions,n=a.reactionKey,i=a.currentUser,s=a.emojiMode,o=a.featureSonicEmoji,l=a.canReact,c=a.clientTheme;if(!r||0===r.length)return null;var u=r.map(function(e){var a=e.count,r=e.name,o=e.users,u=e.url;return m.a.createElement(j["a"],{name:r,count:a,users:o,url:u,currentUser:i,key:r,reactionKey:n,onClick:t.onReactionClick,emojiMode:s,canReact:l,clientTheme:c})});l&&(u=u.concat(m.a.createElement(F,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o,clientTheme:c})));var d=f()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus});var p=B.t("Reactions",{note:"Screenreader: Label for blind users"});return m.a.createElement(C["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{className:d,role:"group","aria-label":p},u))}}]);return t}(m.a.PureComponent);W.displayName="ReactionBar";W.defaultProps=q;var H=function e(t,a){var r=a.reactionKey;var n=Object(E["d"])(r),i=n.entityId,s=n.channelId;var o=true;if(Object(E["e"])(r)){var l=Object(w["a"])(t,s,i);o=Object(S["canAddReaction"])(t,l)}return{canReact:o,reactions:Object(b["getReactionsForKey"])(t,r),currentUser:Object(_["getCurrentUserId"])(t),emojiMode:Object(y["h"])(t),featureSonicEmoji:Object(_["isFeatureEnabled"])(t,"feature_sonic_emoji"),clientTheme:Object(I["getClientTheme"])(t)}};var G={changeReactionFromUserAction:g["a"]};var V=Object(h["connect"])(H,G)(W);var K=t["a"]=V},2071:function(e,t,a){"use strict";var r=a(0);var n=a(3);var i=a.n(n);var s=a(34);var o=a(30);var l=a(42);var c=1.75;var u=100;var d=10;var p=Object(o["a"])("Deletes a message",function(e,t,a){var r=a.channelId,n=a.ts,o=a.broadcastDelete,m=a.attempts,h=void 0===m?0:m,v=a.reason;if(Object(l["isTempTs"])(n))return Promise.reject(new Error("message_not_found"));var f={channel:r,ts:n};o&&(f.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:f,reason:v})).catch(function(t){var r=t.data,n=void 0===r?{}:r;if("message_not_found"===n.error&&h<d){var s=u*c;return Promise.delay(s).then(function(){return e(p(i()({},a,{attempts:h+1})))})}return Promise.reject(new Error(n.error||"unknown_error"))})});p.meta={name:"chatDeleteApi",key:"fetchersChatDeleteApiChatDeleteApi",description:"Deletes a message"};p.propTypes={channelId:r["b"].string,ts:r["b"].string,broadcastDelete:r["b"].bool,attempts:r["b"].number,reason:r["b"].string.isRequired};var m=p;var h=Object(o["a"])("Deletes a join/leave message rollup",function(e,t,a){var r=a.channelId,n=a.firstMessageTs,i=a.lastMessageTs;var o={channel_id:r,first_message_ts:n,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});h.meta={name:"chatDeleteApi",key:"fetchersChatBulkDeleteApiChatDeleteApi",description:"Deletes a join/leave message rollup"};h.propTypes={channelId:r["b"].string,firstMessageTs:r["b"].string,lastMessageTs:r["b"].string};var v=h;var f=a(17);var b=a(21);var g=a(141);var _=a(167);var y=a(73);var k=a(422);var O=a(9);var C=a(366);var E=Object(f["b"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.broadcastDelete,s=void 0!==i&&i,o=a.rollupTimestamps;var c=t();var u=Object(y["a"])(c,r,n);var d=o&&o.length>1;if(!u)return Promise.resolve();d||Object(l["getReplyCount"])(u)||s||e(Object(k["animateDeleteMessage"])({channelId:r,ts:n}));if(Object(l["isTempTs"])(n)||Object(l["isEphemeral"])(u))return Promise.resolve();if(d){var p=o[0];var h=o.pop();return e(v({channelId:r,firstMessageTs:p,lastMessageTs:h}))}return e(m({channelId:r,ts:n,broadcastDelete:s,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(O["isFeatureEnabled"])(c,"feature_degraded_send")&&Object(l["isReply"])(u)&&!s){var e=Object(b["e"])(c,r);Object(C["g"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(k["animateDeleteMessage"])({channelId:r,ts:n,isDeleting:false}));if(s)e(Object(_["l"])({channelId:r,ts:n}));else{e(Object(g["addTimestamps"])({channelId:r,timestamps:[n]}));e(Object(_["a"])([u]))}}throw t})});E.meta={name:"animateAndDeleteMessageApi",key:"actionsAnimateAndDeleteMessageApiAnimateAndDeleteMessageApi",description:"Animate a message deletion as well as calling the delete API endpoint"};E.propTypes={channelId:r["b"].string.isRequired,ts:r["b"].string.isRequired,broadcastDelete:r["b"].bool,rollupTimestamps:r["b"].array};var S=t["a"]=E;var w={animateAndDeleteMessageApi:E}},2074:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(17);var s=a(41);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(12);var f=a(0);var b=a(40);var g=a.n(b);var _=a(2);var y=a(6);var k=a(91);var O=a(892);var C=a(576);var E=a(116);var S=a(52);var w=a(39);var I=a(18);var j=a(1044);var T=a(1209);var A=a(169);var N=a(38);var M=a(606);var P=a(203);var R=a(1870);var x=new y["b"]("do_not_disturb");var D={snoozeNotifications:f["b"].func.isRequired,do24hrTime:f["b"].bool,inDnd:f["b"].bool,clogger:f["b"].object};var F={do24hrTime:false,inDnd:false,clogger:{track:_["noop"]}};var L=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=g()().add(1,"hour").startOf("hour");var n=r.format("YYYY-MM-DD");var i=r.format("HH:mm");var s=g()(n+" "+i).unix();a.state={snoozeEndDate:n,snoozeEndTime:i,snoozeEndTs:s};a.onDateChange=a.onDateChange.bind(a);a.onTimeChange=a.onTimeChange.bind(a);a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onDateChange",value:function e(t){var a=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:g()(t+" "+a).unix()}})}},{key:"onTimeChange",value:function e(t){var a=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:g()(a+" "+t).unix()}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.inDnd;var n=this.state.snoozeEndTs;var i=Object(T["a"])(n);if(i<=0)return;this.props.snoozeNotifications({duration:i,reason:"DndDialog:onGo"});a.track(I["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:i,dnd_preset:I["i"].DURATION_CUSTOM,dnd_snooze_type:r?I["j"].SNOOZE_ADJUST:I["j"].SNOOZE_INITIAL})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var a=this.state.snoozeEndDate;var r=a===g()().format("YYYY-MM-DD");var n=g()().format("HH:mm");var i=Object.keys(j["a"]).filter(function(e){return!(r&&e<n)}).map(function(e){return{value:e,label:t?e:j["a"][e]}});return i}},{key:"render",value:function e(){var t=this.state,a=t.snoozeEndDate,r=t.snoozeEndTime,i=t.snoozeEndTs;var s=Object(T["a"])(i)<=0;var o=Object(A["k"])(i);var l=x.t("Pause notifications until\u2026");var c=g()().format("YYYY-MM-DD");var u=g()().add(1,"year").format("YYYY-MM-DD");return n.a.createElement(k["a"],{title:l,goButtonText:x.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:s,onGo:this.onGo,showCancelButton:false},n.a.createElement(S["a"],{htmlFor:"dnd_dialog_date_button",text:x.t("Date")},n.a.createElement(O["c"],{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:a,onDateChange:this.onDateChange,disableDatesBefore:c,disableDatesAfter:u},n.a.createElement(E["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":x.t("Date to snooze notifications until")},o))),n.a.createElement(S["a"],{htmlFor:"dnd_dialog_time_select",text:x.t("Time")},n.a.createElement(C["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:r,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(r["PureComponent"]);L.displayName="DndDialog";L.defaultProps=F;var B=function e(t){return{do24hrTime:Object(N["h"])(t,"time24"),inDnd:!!Object(P["getCurrentMemberDnd"])(t),clogger:Object(w["a"])({state:t})}};var U={snoozeNotifications:M["e"]};var q=Object(v["connect"])(B,U)(L);var W=Object(i["b"])("Opens the DND dialog",function(e,t,a){e(Object(s["openModal"])({element:n.a.createElement(q,a)}))});W.meta={name:"openDndDialog",key:"actionsOpenDndDialogOpenDndDialog",description:"Opens the DND dialog"};W.propTypes=null;var H=t["a"]=W},2075:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(41);var o=a(17);var l=a(25);var c=a(16);var u=a(6);var d=a(39);var p=a(91);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(296);var O=a(12);var C=a(229);var E=a(354);var S=a(11);var w=a(152);var I=a(283);var j=a(21);var T=a(99);var A=a(1287);var N=a(95);var M=a(3091);var P=new u["b"]("channel_invite");var R={DISABLED:"disabled",LOADING:"loading",ENABLED:"enabled"};var x={member:i["b"].object.isRequired,memberName:i["b"].string.isRequired,channels:i["b"].arrayOf(i["b"].object),submitInviteToChannel:i["b"].func.isRequired,addAppToChannel:i["b"].func.isRequired,getChannelMembershipInfoForUsers:i["b"].func.isRequired};var D={channels:[]};var F=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={addButtonState:R.DISABLED,isAlreadyMember:false,selectedChannelId:void 0};a.onChannelSelected=a.onChannelSelected.bind(a);a.onAddToChannel=a.onAddToChannel.bind(a);return a}f()(t,[{key:"onChannelSelected",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value;var n=this.props.member;var i=n.id;this.setState(function(){return{selectedChannelId:r,addButtonState:R.LOADING}});return this.props.getChannelMembershipInfoForUsers({channelId:r,userIds:[i]}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.membershipInfo;var r=a[i].isMember;t.setState(function(){return{addButtonState:r?R.DISABLED:R.ENABLED,isAlreadyMember:r}});return a})}},{key:"onAddToChannel",value:function e(){var t=this.state.selectedChannelId;var a=this.props.member;var r=a.id;Object(c["isAppUser"])(a)?this.props.addAppToChannel({appUserId:r,channelId:t,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}}):this.props.submitInviteToChannel({channelId:t,users:r})}},{key:"renderChannelOption",value:function e(t){return n.a.createElement(w["a"],{channelId:t.value})}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.channels,r=t.memberName;var i=this.state.isAlreadyMember;var s=a.map(function(e){return{label:Object(S["getName"])(e),value:e.id}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(E["f"],{options:s,placeholderText:P.t("Select a channel"),ariaLabel:P.t("Select a channel"),selectId:"searchSelectChannelOptions",size:"medium",selectDataQa:"search-select-channel-options",renderOption:this.renderChannelOption,renderSelectedOption:this.renderChannelOption,onOptionSelected:this.onChannelSelected}),i&&n.a.createElement(N["a"],{type:"inline",level:"error",className:"p-invite_member_to_channel_dialog__error"},n.a.createElement("span",null,P.t("{name} is already a member of this channel.",{name:r,__react:true}))))}},{key:"render",value:function e(){var t=this.props.memberName;var a=this.state.addButtonState;var r=P.t("Add {name} to a channel",{name:t,__react:true});return n.a.createElement(p["a"],{title:r,goButtonIsDisabled:a===R.DISABLED,goButtonIsPending:a===R.LOADING,goButtonText:P.t("Add"),onGo:this.onAddToChannel},n.a.createElement("div",{className:"p-invite_member_to_channel_dialog__body"},this.renderChannelPicker()))}}]);return t}(n.a.Component);F.displayName="BaseInviteMemberToChannelDialog";F.defaultProps=D;var L=function e(t,a){var r=a.member;return{channels:Object(j["u"])(t).sort(Object(C["b"])("name")),memberName:Object(c["getPrefCompliantMemberName"])(t,r,false)}};var B=function e(t){return Object(k["bindActionCreators"])({getChannelMembershipInfoForUsers:I["getChannelMembershipInfoForUsers"],submitInviteToChannel:T["L"],addAppToChannel:A["a"]},t)};var U=Object(O["connect"])(L,B)(F);a.d(t,"a",function(){return H});var q=new u["b"]("channel_invite");function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=e.body;return Object(s["openModal"])({element:n.a.createElement(p["a"],{title:t,goButtonText:q.t("OK",{fallbackHash:"9ce3bd4224c8c1780db56b4125ecf3f24bf748b7",fallbackHashNs:"fullscreen_modal"}),showCancelButton:false},a)})}var H=Object(o["b"])("Opens app dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.memberId;var i=t();var o=Object(l["b"])(i);var u=Object(l["e"])(i,r);var p=Object(d["a"])({state:i});var m=Object(c["getPrefCompliantMemberName"])(i,u,false);var h=q.t("Add {name} to a channel",{name:m,__react:true});p.track("INVITE_TO_CHANNEL_DIALOG",{contexts:{ui_context:{action:"IMPRESSION"}}});Object(c["isUltraRestricted"])(o)?e(W({title:h,body:q.t("You are not allowed to add other members to channels.")})):Object(c["isUltraRestricted"])(u)?e(W({title:h,body:q.t("{name} cannot be added to any new channels.",{name:m,__react:true})})):Object(c["isRestricted"])(u)&&!Object(c["isAdmin"])(o)?e(W({title:h,body:q.t("Only a Workspace Admin can add {name} into new channels.",{name:m,__react:true})})):e(Object(s["openModal"])({element:n.a.createElement(U,{member:u})}))});H.meta={name:"openInviteMemberToChannelDialog",key:"actionsOpenInviteMemberToChannelDialogOpenInviteMemberToChannelDialog",description:"Opens app dialog"};H.propTypes={memberId:i["b"].string.isRequired};var G={openSimpleModal:W}},2076:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(2);var p=a(0);var m=a(13);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(44);var _=a(54);var y=a(6);var k=a(23);var O=a(53);var C=a(344);var E=a(20);var S=a(200);var w=a(137);var I=a(103);var j=a(38);var T=a(33);var A=a(3733);var N=new y["b"]("notification_bar");var M={wasRecentlyOnline:p["b"].bool,typingNames:p["b"].array,snippetCallback:p["b"].func,tooLongCount:p["b"].number,inputHasText:p["b"].bool,showFormattingHint:p["b"].bool,isLegacy:p["b"].bool,secondaryView:p["b"].string,showTypingIndicator:p["b"].bool,featureWysiwygComposer:p["b"].bool,useSendButton:p["b"].bool};var P={wasRecentlyOnline:false,typingNames:null,snippetCallback:d["noop"],tooLongCount:0,inputHasText:false,showFormattingHint:false,isLegacy:false,secondaryView:void 0,showTypingIndicator:true,featureWysiwygComposer:false,useSendButton:false};var R=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLeft",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.typingNames,n=t.inputHasText,i=t.showTypingIndicator;if(!a){var s=n?N.t("Slack is trying to connect, so messages can\u2019t be sent yet."):N.t("Slack is trying to connect.");return f.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},s," ",f.a.createElement(k["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(i&&r&&r.length>0){var o=N.t("several people are typing");1===r.length?o=N.rt("<b>{name}</b> is typing",{name:r[0]}):2===r.length&&(o=N.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:r[0],other_name:r[1]}));return f.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},o)}return null}},{key:"renderRight",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.snippetCallback,n=t.tooLongCount,i=t.featureWysiwygComposer,s=t.useSendButton;if(a&&n>0){var o=N.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:n});var l=N.t("Make a snippet instead?");var c=N.t("A snippet is a text file that can be much longer than a normal message.");return f.a.createElement("div",null,f.a.createElement("span",null,o," "),f.a.createElement(_["c"],{tip:c},f.a.createElement("span",null,f.a.createElement(g["a"],{tabIndex:"5",onClick:r},l))))}var u=function(){if(!a)return"";var e=function e(t){var a=t.tag,r=t.key,n=t.text;if("span"===a)return f.a.createElement("span",{key:r,className:"p-notification_bar__send"},n);return f.a.createElement("b",{key:r},n)};if(i){if(s){if(Object(T["isMac"])())return N.rt("<span><b>\u2318 + Return</b> to send</span><b>Return</b> to add a new line",null,e);return N.rt("<span><b>Ctrl + Return</b> to send</span><b>Return</b> to add a new line",null,e)}return N.rt("<span><b>Return</b> to send</span><b>Shift + Return</b> to add a new line",null,e)}if(Object(O["c"])())return N.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return N.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return f.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},u)}},{key:"render",value:function e(){var t=this.props,a=t.showFormattingHint,r=t.wasRecentlyOnline,n=t.tooLongCount,i=t.isLegacy,s=t.typingNames,o=t.secondaryView,l=t.showTypingIndicator;var c=h()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":r&&(a||n>0)});var u=h()("p-notification_bar",{"p-notification_bar--legacy":i,"p-notification_bar--typers_showing":l&&s&&s.length,"p-notification_bar--flexpane_open":!!o});return f.a.createElement("div",{className:u},f.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),f.a.createElement("div",{className:c},this.renderRight()))}}]);return t}(v["PureComponent"]);R.displayName="NotificationBar";R.defaultProps=P;var x=function e(t,a){var r=a.inputText,n=a.wysiwygTextLength,i=a.wasRecentlyOnline;var s=Object(S["a"])(t);var o=void 0!==i?i:Object(w["h"])(t);var l=0;var c=void 0;if(s&&n){c=n;l=Math.max(0,c-E["MAX_MESSAGE_INPUT_LENGTH"])}else{c=r.length;if(c>E["MAX_MESSAGE_INPUT_LENGTH"]/2){var u=Object(C["b"])(t,r);l=Math.max(0,u.length-E["MAX_MESSAGE_INPUT_LENGTH"])}}return{wasRecentlyOnline:o,tooLongCount:l,showFormattingHint:c>2,inputHasText:c>0,secondaryView:Object(I["i"])(t),showTypingIndicator:Object(j["h"])(t,"show_typing"),useSendButton:Object(j["h"])(t,"msg_input_send_btn"),featureWysiwygComposer:s}};var D=Object(b["connect"])(x)(R);var F=t["a"]=D},2077:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(2);var p=a(1);var m=a.n(p);var h=a(0);var v=a(12);var f=a(13);var b=a.n(f);var g=a(9);var _=a(21);var y=a(35);var k=a(11);var O=a(28);var C=a(68);var E=a(6);var S=a(23);var w=a(3716);var I=new E["b"]("files");var j=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/80588/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureAnnounceOnly,r=t.teamName,n=t.channelName,i=t.userCanPost,s=t.isImOrMpim,o=t.useNightIllustration;var l=this.state.spriteLoaded;var c=false;if(Object(d["isBoolean"])(o))c=o;else{var u=new Date;var p=u.getHours();c=p>=20||p<8}var h=b()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c});var v=a&&!i?I.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):I.rt("Upload to {teamName}",{teamName:r});var f="";f=a&&!i?I.t("Only selected team members can post in this channel."):s?I.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):I.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});var g="";a&&!i?g=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),m.a.createElement(S["b"],{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:true})):l&&(g=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return m.a.createElement("div",{className:h},m.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},g),m.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},v),m.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},f)))}}]);return t}(p["PureComponent"]);j.displayName="MessagePaneDragOverlay";j.defaultProps={featureAnnounceOnly:false,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function T(e,t){var a=t.channelId;var r=Object(_["e"])(e,a);var n=Object(y["d"])(e);return{featureAnnounceOnly:Object(g["isFeatureEnabled"])(e,"feature_announce_only"),channelName:Object(k["getDisplayNameForChannel"])(e,r,{imIncludeAtSign:false}),teamName:Object(O["getTeamDisplayName"])(n),userCanPost:Object(C["s"])(e,r.id),isImOrMpim:Object(k["isIm"])(r)||Object(k["isMpim"])(r)}}var A=Object(v["connect"])(T)(j);var N=t["a"]=A},2078:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(2);var p=a.n(d);var m=a(0);var h=a(1);var v=a.n(h);var f=a(12);var b=a(13);var g=a.n(b);var _=a(9);var y=a(38);var k=a(6);var O=a(651);var C=a(209);var E=a(644);var S=a(351);var w=a(135);var I=new k["b"]("threads");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,a=e.replyCount,r=e.do24hrTime;if(Object(S["a"])(Object(w["a"])(t),new Date)){if(1===a)return I.t("Today at {time}",{time:Object(C["a"])(t,{do24hrTime:r})});return I.t("Last reply today at {time}",{time:Object(C["a"])(t,{do24hrTime:r})})}if(1===a)return Object(E["a"])(t);return I.t("Last reply {time_ago}",{time_ago:Object(E["a"])(t)})}var T=a(191);var A=a(23);var N=a(189);var M=a(16);var P=a(357);var R=a(517);var x=new k["b"]("threads");var D={replies:m["b"].array,replyCount:m["b"].number.isRequired,replyUsers:m["b"].arrayOf(m["b"].string),replyUsersCount:m["b"].number,latestReply:m["b"].string,channelId:m["b"].string.isRequired,threadTs:m["b"].string.isRequired,do24hrTime:m["b"].bool,showThreadIfThreadable:m["b"].func,featureNewRepliesAfterBcast:m["b"].bool,isThreadExpanded:m["b"].bool,threadListId:m["b"].string,className:m["b"].string};var F={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:p.a.noop,featureNewRepliesAfterBcast:false,isThreadExpanded:void 0,threadListId:void 0,className:void 0};var L=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.state={hasKeyboardFocus:false};return a}s()(t,[{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=p.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.state.hasKeyboardFocus})}},{key:"renderFaces",value:function e(){var t=this;var a=void 0;a=this.props.replyUsers&&this.props.replyUsers.length?p.a.reject(this.props.replyUsers,function(e){return"B00"===e}):p.a.uniq(p.a.reject(p.a.map(this.props.replies,"user"),function(e){return"B00"===e}));var r=this.props.replyUsersCount?this.props.replyUsersCount:a.length;if(a.length>5)return p.a.concat(p.a.map(p.a.take(a,4),function(e){return t.renderSingleAvatar(e)}),this.renderSingleAvatar(a[4],r-5));return p.a.map(a,function(e){return t.renderSingleAvatar(e)})}},{key:"renderSingleAvatar",value:function e(t,a){var r=Object(R["a"])(t);var n=!Object(M["isEKMAccessDenied"])({id:t});return v.a.createElement(T["b"],{key:t,userId:r?null:t,botId:r?t:null,size:24,additionalOverlay:a,showCard:true,isInteractive:n})}},{key:"render",value:function e(){var t=this.props,a=t.replyCount,r=t.channelId,n=t.threadTs,i=t.do24hrTime,s=t.featureNewRepliesAfterBcast,o=t.isThreadExpanded;var l=x.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});var c=Object(P["b"])(r,n);var u=this.getLastReplyTs();var d="";d=s?j({latestReply:u,replyCount:a,do24hrTime:i}):Object(S["a"])(Object(w["a"])(u),new Date)?1===a?x.t("Today at {time}",{time:Object(C["a"])(u,{do24hrTime:i})}):x.t("Last reply today at {time}",{time:Object(C["a"])(u,{do24hrTime:i})}):1===a?Object(E["a"])(u):x.t("Last reply {time_ago}",{time_ago:Object(E["a"])(u)});var p=g()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});var m=true===o?this.props.threadListId:void 0;return v.a.createElement(O["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},v.a.createElement("div",{role:"presentation",className:p,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),v.a.createElement(N["a"],{className:"c-message__reply_count",href:c,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":m},l),v.a.createElement("div",{className:"c-message__reply_bar_description"},v.a.createElement("span",{className:"c-message__reply_bar_last_reply"},d),v.a.createElement("span",{className:"c-message__reply_bar_view_thread"},x.t("View thread"))),v.a.createElement(A["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}(v.a.PureComponent);L.displayName="ReplyBar";L.defaultProps=F;function B(e){return{do24hrTime:Object(y["h"])(e,"time24"),featureNewRepliesAfterBcast:Object(_["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var U=t["a"]=Object(f["connect"])(B)(L)},2079:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(2);var o=a(13);var l=a.n(o);var c=a(0);var u=a(6);var d=a(16);var p=a(122);var m=a(1964);var h=a(1158);var v=a(97);var f=a(27);var b=a(54);var g=a(895);var _=a(232);var y=a(137);var k=a(1245);var O=a(49);var C=a(17);var E=a(55);var S=a(649);var w=a(21);var I=a(99);var j=a(1296);var T=void 0;var A=Object(C["b"])("Open a conversation with a member and then start a call",function(){var e=Object(O["coroutine"])(regeneratorRuntime.mark(function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.memberId;var i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return",Promise.reject(new Error("invalid params")));case 2:if(Object(E["a"])()){r.next=5;break}Object(j["c"])({id:n});return r.abrupt("return",Promise.resolve());case 5:i=a();s=Object(w["l"])(i,n);if(s){r.next=12;break}r.next=10;return Object(O["resolve"])(t(Object(I["v"])({memberIds:[n],reason:"startCallByMemberId"})).then(function(e){var a=e&&e.channel;if(!a)return;t(Object(p["addChannel"])({channel:a}));s=a.id}));case 10:if(s){r.next=12;break}return r.abrupt("return",Promise.reject(new Error("could not open conversation")));case 12:return r.abrupt("return",t(Object(S["d"])({channelId:s})));case 13:case"end":return r.stop()}},e,T)}));return function(t,a,r){return e.apply(this,arguments)}}());A.meta={name:"startCallByMemberId",key:"componentsFlexpaneProfileUtilityStartCallByMemberIdStartCallByMemberId",description:"Open a conversation with a member and then start a call"};A.propTypes={memberId:c["b"].string.isRequired};var N=A;var M=a(2424);var P=new u["b"]("member_profile");var R={autoFillSlashCommand:c["b"].func,children:c["b"].node,className:c["b"].string,member:c["b"].object,onClick:c["b"].func,openEditProfileModal:c["b"].func,showCallButton:c["b"].bool,showFileList:c["b"].func,showMemberProfile:c["b"].func,startCallByMemberId:c["b"].func,startImByMemberId:c["b"].func,isOffline:c["b"].bool.isRequired,isCallsAllowedByAdmin:c["b"].bool.isRequired};var x={autoFillSlashCommand:s["noop"],children:void 0,className:void 0,member:void 0,onClick:s["noop"],openEditProfileModal:s["noop"],showCallButton:false,showFileList:s["noop"],showMemberProfile:s["noop"],startCallByMemberId:s["noop"],startImByMemberId:s["noop"]};function D(e){var t=e.autoFillSlashCommand,a=e.children,r=e.className,i=e.member,s=e.onClick,o=e.openEditProfileModal,c=e.showCallButton,u=e.showFileList,p=e.showMemberProfile,m=e.startCallByMemberId,h=e.startImByMemberId,v=e.isOffline,y=e.isCallsAllowedByAdmin;var k=Object(_["a"])(),O=k.featureModernProfileFlexpane,C=k.featureOfflineMode;if(!O)return null;var E=void 0;if(Object(d["isSelf"])(i))E=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){o();s()},type:"outline","data-qa":"member_profile_edit_btn"},P.t("Edit Profile"));else if(Object(d["isSlackbot"])(i))E=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){var a=P.t("remind",{ns:"chat_commands"});t({commandName:"/"+a});s()},type:"outline","data-qa":"member_profile_remind_btn"},P.t("Remind Me"));else if(!Object(d["isInvitedUser"])(i))if(c)if(Object(d["isActiveMember"])(i)&&y){var S=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){m({memberId:i.id});s()},type:"outline","data-qa":"member_profile_call_btn",disabled:C&&v,"aria-label":C&&v?P.t("Go online to start a call"):""},P.t("Call"));var w=C?n.a.createElement(g["a"],{tooltipLabel:P.t("Go online to start a call")}):null;E=C&&v?n.a.createElement(b["c"],{tip:w},n.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},S)):S}else E=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){u({user:i.id});s()},type:"outline","data-qa":"member_profile_files_btn"},P.t("View Files"));else E=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){p({memberId:i.id});s()},type:"outline","data-qa":"member_profile_profile_btn"},P.t("View Profile"));return n.a.createElement("div",{className:l()(r,"p-member_profile_buttons")},n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){h({memberId:i.id});s()},type:"outline","data-qa":"member_profile_message_btn"},P.t("Message")),E,a)}D.displayName="MemberProfileButtons";D.defaultProps=x;var F=function e(t){return{isOffline:!Object(y["c"])(t),isCallsAllowedByAdmin:Object(k["d"])(t)}};var L={autoFillSlashCommand:function e(){return h["a"].apply(void 0,arguments)},openEditProfileModal:function e(){return m["a"].apply(void 0,arguments)},showFileList:function e(){return v["g"].apply(void 0,arguments)},showMemberProfile:function e(){return v["j"].apply(void 0,arguments)},startCallByMemberId:function e(){return N.apply(void 0,arguments)},startImByMemberId:function e(){return p["startImByMemberId"].apply(void 0,arguments)}};var B=t["a"]=Object(i["connect"])(F,L)(D)},2080:function(e,t,a){"use strict";var r=a(10);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(6);var b=a(13);var g=a.n(b);var _=a(2);var y=a(31);var k=a(560);var O=a(420);var C=a(853);var E=a(3087);var S=new f["b"]("sk_banner");var w={type:v["b"].oneOf(["info","success","warning","urgent","neutral"]),children:v["b"].any.isRequired,showCloseButton:v["b"].bool,autoFadeout:v["b"].bool,topOffset:v["b"].number,className:v["b"].string,isFixedPosition:v["b"].bool,"data-qa":v["b"].string,onClose:v["b"].func,onFocus:v["b"].func,onBlur:v["b"].func};var I={type:"success",showCloseButton:true,autoFadeout:false,topOffset:0,className:null,isFixedPosition:true,"data-qa":"banner",onClose:_["noop"],onFocus:_["noop"],onBlur:_["noop"]};var j=2e3;var T=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isShowing:true,opacity:1};Object(y["a"])(a,["handleCloseButtonClick","focus"]);a.handleCloseButtonClick=a.handleCloseButtonClick.bind(a);a.cancelAnimation=_["noop"];a.banner=h.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){this.fadeOutMaybe()}},{key:"componentWillUnmount",value:function e(){this.cancelAnimation()}},{key:"handleCloseButtonClick",value:function e(){var t=this.props.onClose;this.setState(function(){return{isShowing:false}});t()}},{key:"fadeOutMaybe",value:function e(){var t=this;var a=this.props,r=a.autoFadeout,n=a.onClose;if(!r)return;var i=Object(C["a"])({delay:j,fromValue:1,toValue:0,duration:j,easing:"easeOutQuad",onTick:function e(a){var r=a.value,n=a.nextTick;t.setState(function(){return{opacity:r}});n()},onComplete:function e(){t.setState(function(){return{isShowing:false}});n()}});this.cancelAnimation=i.cancel}},{key:"focus",value:function e(){var t=Object(k["b"])(this.banner.current);t&&t.focus()}},{key:"render",value:function e(){var t;var a=this.props,r=a.type,i=a.children,s=a.showCloseButton,o=a.topOffset,l=a.className,c=a.isFixedPosition,u=a["data-qa"];var d=this.state,p=d.isShowing,m=d.opacity;if(!p)return false;var v=g()("c-banner",(t={},n()(t,"c-banner--"+r,!!r),n()(t,"c-banner--fixed",c),t),l);var f="warning"!==r?"dark":void 0;return h.a.createElement("div",{role:"alert",className:v,style:{top:o,opacity:m},"data-qa":u,ref:this.banner,onFocus:this.props.onFocus,onBlur:this.props.onBlur},h.a.createElement("div",{className:"c-banner__text"},i),s&&h.a.createElement(O["a"],{className:"c-banner__close",icon:"times",onClick:this.handleCloseButtonClick,backgroundStyle:f,"aria-label":S.t("Dismiss")}))}}]);return t}(m["PureComponent"]);T.displayName="Banner";T.defaultProps=I;T.displayName="Banner";var A=T;var N=t["a"]=A},2083:function(e,t,a){"use strict";var r=a(10);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(2);var b=a(31);var g=a(91);var _=a(123);var y=a(52);var k=a(6);var O=new k["b"]("app_management_modal");var C={appName:v["b"].string.isRequired,appIcon:v["b"].string.isRequired,workspaceName:v["b"].string,title:v["b"].string,workspaceAccessCheckboxText:v["b"].oneOfType([v["b"].string,v["b"].object]),channelAccessCheckboxText:v["b"].oneOfType([v["b"].string,v["b"].object]),onGo:v["b"].func.isRequired,onCancel:v["b"].func};var E={workspaceName:void 0,title:void 0,workspaceAccessCheckboxText:void 0,channelAccessCheckboxText:void 0,onCancel:f["noop"]};var S=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={workspaceConfirmChecked:false,channelConfirmChecked:!e.channelAccessCheckboxText,confirmInProgress:false};Object(b["a"])(a,["handleConfirm","handleCheckboxChange"]);return a}l()(t,[{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"handleCheckboxChange",value:function e(t){var a=t.target,r=a.name,i=a.checked;this.setState(function(){return n()({},r+"Checked",i)})}},{key:"renderCheckbox",value:function e(t,a){return h.a.createElement(y["a"],{type:"inline",cursor:"pointer",text:a},h.a.createElement(_["a"],{onChange:this.handleCheckboxChange,name:t,isRequired:true,"data-qa":"app_uninstall_dialog_"+Object(f["snakeCase"])(t)+"_checkbox"}))}},{key:"renderWorkspaceAccessConfirmCheckbox",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName,n=t.workspaceAccessCheckboxText;var i=n||O.rt("I understand members of the <strong>{workspaceName}</strong> workspace will no longer be able to use {appName}.",{appName:a,workspaceName:r});return this.renderCheckbox("workspaceConfirm",i)}},{key:"renderChannelAccessConfirmCheckbox",value:function e(){var t=this.props.channelAccessCheckboxText;return t?this.renderCheckbox("channelConfirm",t):null}},{key:"renderTitle",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName,n=t.title;return n||O.t("Uninstall {appName} from {workspaceName}?",{appName:Object(k["q"])(a),workspaceName:Object(k["q"])(r)})}},{key:"render",value:function e(){var t=this.props,a=t.onCancel,r=t.appIcon;var n=this.state,i=n.workspaceConfirmChecked,s=n.channelConfirmChecked,o=n.confirmInProgress;var l=!(i&&s)||o;return h.a.createElement(g["a"],{contentLabel:this.renderTitle(),title:this.renderTitle(),titleImage:r,truncateTitle:false,goButtonText:O.t("Uninstall App"),onGo:this.handleConfirm,goButtonType:"danger",goButtonIsDisabled:l,goButtonIsPending:o,showCancelButton:true,onCancel:a,"data-qa":"app_uninstall_dialog"},this.renderWorkspaceAccessConfirmCheckbox(),this.renderChannelAccessConfirmCheckbox())}}]);return t}(m["PureComponent"]);S.displayName="AppUninstallDialog";S.displayName="AppUninstallDialog";S.defaultProps=E;var w=S;var I=t["a"]=w},2084:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a(0);var m=a(14);var h={store:p["b"].shape({getState:p["b"].func.isRequired,subscribeImmediate:p["b"].func,subscribe:p["b"].func.isRequired}).isRequired,render:p["b"].func.isRequired};var v=function(e){u()(t,e);l()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.store;return a.getState()}}]);function t(e){n()(this,t);var a=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.store;a.state=r.getState();a.logger=Object(m["a"])({getState:r.getState,label:"CONNECT-IMMEDIATE"});a.unsubscribe=null;a.update=a.update.bind(a);return a}l()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var a=t.subscribeImmediate;if(!a){this.logger.warn("subscribeImmediate not found on store");a=t.subscribe}this.unsubscribe=a(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(d["PureComponent"]);v.displayName="ConnectImmediate";var f=v;var b=t["a"]=f},2085:function(e,t,a){},2087:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(2);var p=a(1);var m=a.n(p);var h=a(0);var v=a(12);var f=a(6);var b=a(122);var g=a(21);var _=a(9);var y=a(11);var k=a(68);var O=a(105);var C=a(95);var E=a(27);var S=a(152);var w=a(2034);var I=a(31);var j=a(13);var T=a.n(j);var A=a(110);var N=a.n(A);var M=a(73);var P=a(38);var R=a(574);var x=a(2030);var D=a(20);var F=a(123);var L=a(23);var B=a(52);var U=a(1707);var q=a(2031);var W=a(2032);var H=a(54);var G=a(42);var V=a(853);var K=a(32);var z=a(1555);var Q=a(210);var Y=a(852);var J=a(200);var X=a(187);var Z=a(765);var $=a(3785);var ee=new f["b"]("threads");var te=40;var ae=150;var re={channelId:h["b"].string.isRequired,threadTs:h["b"].string.isRequired,channelType:h["b"].string,prepareAndSendMessage:h["b"].func,legacySendSlashCommand:h["b"].func,editLastMessageInChannel:h["b"].func,viewContext:h["b"].string,useSendButton:h["b"].bool,focusInputOnMount:h["b"].bool,featureSonicInputs:h["b"].bool,featureWysiwygComposer:h["b"].bool,enableStickyComposer:h["b"].bool,replyCount:h["b"].number,clogThreadEvent:h["b"].func,userCanPost:h["b"].bool.isRequired,onFocus:h["b"].func};var ne={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},legacySendSlashCommand:d["noop"],editLastMessageInChannel:d["noop"],viewContext:void 0,useSendButton:false,focusInputOnMount:false,featureSonicInputs:true,featureWysiwygComposer:false,enableStickyComposer:false,replyCount:0,clogThreadEvent:d["noop"],onFocus:d["noop"]};var ie=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.inputRef=m.a.createRef();a.reactionPopoverRef=m.a.createRef();a.state={hasEnteredText:false,hasFocus:false,broadcast:false,broadcastControlsHeight:0};Object(I["a"])(a,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]);a.getAdditionalDraftContent=Object(Y["a"])(function(e){return{broadcast:e}});return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;if(!Object(K["a"])()&&this.inputRef.current){var s=Object(Z["c"])(r,n);s&&this.inputRef.current.getWrappedInstance().value(s)}Object(Q["c"])({viewContext:i,channelId:r,threadTs:n,functions:{clear:function e(){var a=t.getInputRef();a&&a.clear()},isEmpty:function e(){var a=t.getInputRef();return a?a.isEmpty():null},prependContents:function e(a){var r=t.getInputRef();r&&r.prependContents(a)},setContents:function e(a){var r=t.getInputRef();r&&r.setContents(a)},getContents:function e(){var a=t.getInputRef();return a?a.getContents():null},setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},getDisplayValue:function e(){var a=t.getInputRef();return a?a.displayValue():null},setBroadcast:function e(a){return t.setState(function(){return{broadcast:a}})},getBroadcast:function e(){return t.state.broadcast},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},clearHistory:function e(){var a=t.getInputRef();a&&a.clearHistory()},setCursorAtEnd:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)},openReactionPopoverForLastMessage:function e(){t.reactionPopoverRef.current&&t.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&0===r.index},isCursorAtEnd:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&r.index===a.getLength()},setCursor:function e(a,r){var n=t.getInputRef();n&&n.setCursor(a,r)}}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.hasFocus||this.state.hasEnteredText;var n=a.hasFocus||a.hasEnteredText;r&&!n?this.startExpandAnimation(0,te):!r&&n&&this.startExpandAnimation(te,0)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext;Object(Q["d"])({viewContext:n,channelId:a,threadTs:r});this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}});if(!this.state.hasEnteredText){this.inputRef.current.getWrappedInstance().focus();this.preventUnfocus=false}}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault();this.state.hasEnteredText||(this.preventUnfocus=true)}},{key:"onTextChange",value:function e(t){this.setState(function(){return{hasEnteredText:!!t}});var a=this.props,r=a.channelId,n=a.threadTs;Object(K["a"])()||Object(Z["g"])(r,n,t)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){if(this.preventUnfocus){this.preventUnfocus=false;return}this.setState(function(){return{hasFocus:false}})}},{key:"onExpandAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{broadcastControlsHeight:a}},r)}},{key:"onExpandAnimationEnd",value:function e(){this.expandAnimation=null}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"handleDraftRestore",value:function e(t){this.setState(function(e){var a=e.broadcastControlsHeight;return{broadcast:!!t.broadcast,broadcastControlsHeight:t.ops?te:a}})}},{key:"startExpandAnimation",value:function e(t,a){var r=this.state.broadcastControlsHeight;if(r===a)return;this.expandAnimation&&this.expandAnimation.cancel();this.expandAnimation=Object(V["a"])({fromValue:t,toValue:a,duration:ae,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd})}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext})}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.replyCount,s=a.clogThreadEvent,o=a.featureSonicInputs,l=a.featureWysiwygComposer;var c=this.state.broadcast;this.setState(function(){return{broadcast:false}});var u=this.getInputRef();var d=u.value();if(!o&&Object(z["a"])(d)){u.clear();this.props.legacySendSlashCommand(r,n,d);return Promise.resolve()}if(!Object(W["a"])(u.getContents(),{featureWysiwygComposer:l}))return null;var p=c?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY";var m={num_msg_in_thread:i+1};s({event:p,metadata:m});var h=u.getContents();u.clear();u.focus();return this.props.prepareAndSendMessage({channelId:r,text:d,delta:l?new N.a(h.contents):null,replyToTs:n,shouldBroadcast:c}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){u.isEmpty()&&u.setContents(h)})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.channelType,s=t.useSendButton,o=t.focusInputOnMount,l=t.userCanPost,c=t.featureSonicInputs,u=t.onFocus,d=t.featureWysiwygComposer,p=t.enableStickyComposer;var h=this.state,v=h.broadcast,f=h.hasEnteredText,b=h.hasFocus,g=h.broadcastControlsHeight;var _=f||b;var y=T()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":_});var k={height:g};var C="";C="mpim"===i?ee.t("Also send to the group"):"im"===i?ee.t("Also send as direct message"):ee.rt("Also send to <span></span>",null,function(){return m.a.createElement(S["a"],{channelId:a,inline:true,className:"p-threads_footer__broadcast_channel"})});var E="";E="mpim"===i||"im"===i?ee.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):ee.t("Choose this if you\u2019d like your reply to post in the channel, too");var w="p-thread_footer__broadcast_checkbox--"+Object(O["getThreadKey"])(a,r)+"--"+n;var I=T()("p-threads_footer__input",{"p-threads_footer__input--legacy":!c});var j=m.a.createElement(U["c"],{key:"wysiwyg_"+d,className:I,channelId:a,threadTs:r,viewContext:n,placeholder:ee.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableComposerButton:d,enableSendButton:false,enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!c,useLegacyDrafts:!Object(K["a"])(),maxLines:8,useSendButton:s,focusOnMount:o,maxLength:D["MAX_MESSAGE_INPUT_LENGTH"],onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(v)});Object(K["a"])()&&(j=m.a.createElement(q["a"],{ref:this.reactionPopoverRef,channelId:a,threadTs:r},j));var A=T()("p-threads_footer__input_container",{"p-threads_footer__input_container--sticky_composer":d&&p});return m.a.createElement("div",{className:A,"data-qa":"reply_container",onFocus:u},j,m.a.createElement("div",{className:y,style:k},m.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},l&&m.a.createElement(m.a.Fragment,null,m.a.createElement(B["a"],{className:"p-threads_footer__broadcast_label",text:C,htmlFor:w,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},m.a.createElement(F["a"],{className:"p-threads_footer__broadcast_checkbox",id:w,checked:v,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!_})),m.a.createElement(H["c"],{tip:E},m.a.createElement(L["b"],{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:true,size:"inherit"}))),m.a.createElement(U["b"],{isDisabled:!f,className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]);return t}(p["Component"]);ie.displayName="InputContainer";ie.defaultProps=ne;function se(e,t){var a=t.channelId,r=t.threadTs;var n=Object(g["e"])(e,a);var i=Object(M["a"])(e,a,r);return{channelType:Object(y["getChannelType"])(n),featureSonicInputs:Object(_["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(J["a"])(e),enableStickyComposer:Object(P["h"])(e,"msg_input_sticky_composer"),useSendButton:Object(P["h"])(e,"msg_input_send_btn"),replyCount:Object(G["getReplyCount"])(i),userCanPost:Object(k["s"])(e,a)}}var oe={prepareAndSendMessage:function e(){return R["a"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return x["a"].apply(void 0,arguments)},legacySendSlashCommand:function e(t,a,r){return function(e,n){var i=n();var s=Object(g["e"])(i,t);var o=Object(M["a"])(i,t,a);if(!s||!o)return;Object(X["k"])(s,r,o)}}};var le=Object(v["connect"])(se,oe)(ie);var ce=a(3787);var ue=new f["b"]("threads");var de={channelId:h["b"].string.isRequired,channel:h["b"].object,threadTs:h["b"].string.isRequired,unknown:h["b"].bool,archived:h["b"].bool,frozen:h["b"].bool,imWithDeletedMember:h["b"].bool,cannotReply:h["b"].bool,nonMember:h["b"].bool,canJoin:h["b"].bool,focusInputOnMount:h["b"].bool,joinConversationApi:h["b"].func,featureAnnounceOnly:h["b"].bool,viewContext:h["b"].string,clogThreadEvent:h["b"].func,onFocus:h["b"].func};var pe={channel:void 0,unknown:false,archived:false,frozen:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,focusInputOnMount:true,joinConversationApi:d["noop"],featureAnnounceOnly:false,viewContext:void 0,clogThreadEvent:d["noop"],onFocus:d["noop"]};var me=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.joinChannel=a.joinChannel.bind(a);return a}s()(t,[{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.channelId,n=t.threadTs,i=t.unknown,s=t.archived,o=t.frozen,l=t.imWithDeletedMember,c=t.cannotReply,u=t.nonMember,d=t.canJoin,p=t.focusInputOnMount,h=t.featureAnnounceOnly,v=t.viewContext,f=t.clogThreadEvent,b=t.onFocus;if(i||l&&!o)return null;if(s||o){var g="";g=o?Object(y["isIm"])(a)?ue.t("Your two organizations are no longer connected."):Object(y["isMpim"])(a)?ue.t("These organizations are no longer connected."):ue.t("This channel is no longer shared with your organization."):ue.t("You are viewing a thread from an archived channel");return m.a.createElement(C["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},g)}if(h&&c){var _=ue.t("Posting to this thread has been restricted to select members");return m.a.createElement(w["a"],{tooltip:_,featureAnnounceOnly:h})}if(c)return m.a.createElement(C["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},ue.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return m.a.createElement(S["a"],{channelId:r,inline:true,iconProps:{inherit:true}})}));if(u){if(!d)return null;return m.a.createElement("div",{className:"p-threads_footer_join_container"},m.a.createElement(E["d"],{type:"primary",size:"medium",onClick:this.joinChannel},ue.t("Join Channel")),!h&&m.a.createElement("p",{className:"p-threads_footer_join_label"},ue.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return m.a.createElement(S["a"],{channelId:r,inline:true,iconProps:{inherit:true}})})))}return m.a.createElement(le,{channelId:r,threadTs:n,key:Object(O["getThreadKey"])(r,n),focusInputOnMount:p,viewContext:v,clogThreadEvent:f,onFocus:b})}}]);return t}(p["Component"]);me.displayName="ThreadFooter";me.defaultProps=pe;function he(e,t){var a=t.channelId;var r=Object(g["e"])(e,a);return{unknown:Object(y["isUnknownOrNonExistent"])(r),archived:Object(y["isArchived"])(r),frozen:Object(y["isFrozen"])(r),imWithDeletedMember:Object(y["isImWithDeletedMember"])(e,r),cannotReply:!Object(y["canThread"])(e,r),nonMember:Object(y["isPublicChannel"])(r)&&!Object(y["isMemberOfChannel"])(r),canJoin:Object(k["g"])(e,a),featureAnnounceOnly:Object(_["isFeatureEnabled"])(e,"feature_announce_only"),channel:r}}var ve=t["a"]=Object(v["connect"])(he,{joinConversationApi:b["joinConversationApi"]})(me)},2088:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a(31);var b=a(6);var g=a(303);var _=a(177);var y=a(87);var k=a(95);var O=a(86);var C=a(22);var E=a(25);var S=a(16);var w=a(364);var I=a(908);var j=a(2341);var T=a(231);var A=new b["b"]("user_groups");var N={onSelectedItemsChange:m["b"].func,getMemberById:m["b"].func,userGroupMemberIds:m["b"].array,isEnterprise:m["b"].bool,teamId:m["b"].string};var M={onSelectedItemsChange:v["noop"],getMemberById:v["noop"],userGroupMemberIds:[],isEnterprise:null,teamId:null};var P=32;var R=148;var x=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["a"])(a,["getSelectedMembers","renderMemberOption","filterMembers"]);return a}s()(t,[{key:"getSelectedMembers",value:function e(t){var a=this;return t.map(function(e){return a.formatMemberOption(a.props.getMemberById(e))})}},{key:"formatMemberOption",value:function e(t){if(!t)return null;return{label:Object(S["getMemberProfileFieldDisplayName"])(t),value:t.id}}},{key:"filterMembers",value:function e(t){if(this.props.isEnterprise&&!Object(S["filterTeamsForMember"])(t,[this.props.teamId]).length)return false;return true}},{key:"renderMemberOption",value:function e(t){return p.a.createElement(I["a"],{id:t.value})}},{key:"render",value:function e(){var t=this.props.userGroupMemberIds;var a=this.getSelectedMembers(t);return p.a.createElement(w["d"],{isRequired:true,focusOnMount:true,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:a,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:A.t("Search by name"),width:"100%",maxHeight:R,optionsRowHeight:P,searcherOptions:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:false,includeGuests:false}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40,filter:this.filterMembers}})}}]);return t}(d["PureComponent"]);x.displayName="UserGroupMemberSelector";x.defaultProps=M;var D=function e(t,a){var r=a.groupId;var n=Object(_["e"])(t,r);var i=Object(y["g"])(n);return{userGroupMemberIds:i,getMemberById:function e(a){return Object(E["e"])(t,a)},isEnterprise:Object(T["e"])(t),teamId:Object(C["b"])(t)}};var F=Object(h["connect"])(D)(x);var L=new b["b"]("user_groups");var B={groupId:m["b"].string,onSelectedItemsChange:m["b"].func,userGroupMemberIds:m["b"].array,fetchAndUpsertUserGroupMembers:m["b"].func};var U={groupId:void 0,onSelectedItemsChange:v["noop"],userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:v["noop"]};var q=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={updatedGroupMembers:e.userGroupMemberIds,displayNoMemberError:false,haveUpsertedExistingMembers:false};Object(f["a"])(a,["setAllMembers","onSelectedItemsChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.groupId;a&&this.props.fetchAndUpsertUserGroupMembers({groupId:a}).then(function(e){t.setState(function(){return{haveUpsertedExistingMembers:true}});Object(v["isEmpty"])(e)||t.setState(function(){return{updatedGroupMembers:e}})})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSelectedItemsChange",value:function e(t){this.setDisplayNoMemberError(!t.length);this.setAllMembers(t.map(function(e){return e.value}));this.props.onSelectedItemsChange(t)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setAllMembers",value:function e(t){this.setState(function(){return{updatedGroupMembers:t}})}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.state.displayNoMemberError)return null;return p.a.createElement(k["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":true},L.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return p.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":true},p.a.createElement(O["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderUserGroupMemberSelector",value:function e(){var t=this.state.haveUpsertedExistingMembers;var a=this.props.groupId;return p.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":true},!a||t?p.a.createElement("div",null,this.maybeRenderNoMembersAlert(),p.a.createElement(F,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):p.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}},{key:"render",value:function e(){return this.renderUserGroupMemberSelector()}}]);return t}(d["PureComponent"]);q.displayName="UserGroupMemberManagement";q.defaultProps=U;var W=function e(t,a){var r=a.groupId;var n=Object(_["e"])(t,r);var i=Object(y["g"])(n);return{userGroupMemberIds:i}};var H={fetchAndUpsertUserGroupMembers:g["i"]};var G=t["a"]=Object(h["connect"])(W,H,null,{withRef:true})(q)},2089:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(13);var b=a.n(f);var g=a(2);var _=a(0);var y=a(25);var k=a(16);var O=a(483);var C=a(595);var E=a(59);var S=a(21);var w=a(11);var I=a(191);var j=a(1357);var T=a(1483);var A=a(1482);var N=a(1326);var M=a(449);var P=a(23);var R=a(1247);var x=a(280);var D=a(111);var F=a(2417);var L={right:"right",bottom:"bottom"};var B={className:_["b"].string,id:_["b"].string.isRequired,secondaryContent:_["b"].node,secondaryContentPosition:_["b"].oneOf(Object(g["values"])(L)),invert:_["b"].bool,isDeactivated:_["b"].bool,showAvatar:_["b"].bool,showPresence:_["b"].bool,showTooltip:_["b"].bool,useShortMode:_["b"].bool,member:_["b"].object,memberPrimaryName:_["b"].string,memberSecondaryName:_["b"].string,showDraftIcon:_["b"].bool,showStatus:_["b"].bool};var U={className:void 0,member:void 0,memberPrimaryName:void 0,memberSecondaryName:void 0,secondaryContent:void 0,secondaryContentPosition:L.bottom,invert:false,showAvatar:true,showDraftIcon:false,showPresence:true,showStatus:true,showTooltip:true,isDeactivated:false,useShortMode:false};function q(e){var t=e.className,a=e.id,r=e.invert,i=e.member,s=e.memberPrimaryName,o=e.memberSecondaryName,l=e.secondaryContent,c=e.secondaryContentPosition,u=e.showAvatar,d=e.showDraftIcon,p=e.showPresence,m=e.showStatus,v=e.showTooltip,f=e.isDeactivated,g=e.useShortMode;var _=Object(k["isAppOrBot"])(i);var y=Object(k["isDeleted"])(i);var O=Object(k["isSelf"])(i);var C=Object(E["c"])(a);var S=Object(E["d"])(a);var w=h.a.createElement(R["a"],{"data-qa":"member-entity__primary-name",name:s,invert:r&&!f,isAppOrBot:_,isDeleted:y,isSelf:O,isNonExistent:C,isUnknown:S});var F=h.a.createElement(N["a"],{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},o);var B=i&&h.a.createElement(A["a"],{className:"c-member__title","data-qa":"member-entity__title"},Object(k["getMemberTitle"])(i));var U=h.a.createElement(P["b"],{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":true,"data-qa":"member-entity__draft-icon"});var q=!y&&h.a.createElement(x["a"],{memberId:a,className:"c-member__presence",invert:r&&!f,"data-qa":"member-entity__presence"});var W=h.a.createElement(M["b"],{memberId:a,tooltip:v,animated:g,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status"});var H=c===L.bottom&&l?h.a.createElement(T["a"],{"data-qa":"member-entity__metadata"},l):null;var G=h.a.createElement("span",{className:"c-member__primary_content"},w,p&&q,!g&&F,m&&W);var V=y||f?D["c"].dim:null;var K=b()(t,"c-member","c-member--medium",{"c-member--with-presence":p});return h.a.createElement(j["a"],{avatar:function e(t){return u&&(d?U:h.a.createElement(I["b"],n()({},t,{size:D["a"].medium,userId:a,"data-qa":"member-entity__avatar",isInteractive:false})))},className:K,size:"medium",style:V,text:G,subtext:B,metadata:!y&&H,"data-qa":"medium_member_entity"})}q.displayName="MediumMemberEntity";q.defaultProps=U;function W(e,t){var a=t.id,r=t.isDraftContext,n=t.showStatus,i=t.isUnknown;var s=Object(y["e"])(e,a);var o=void 0;if(r){var l=Object(S["k"])(e,a);o=!!(l&&Object(w["getHasDraft"])(e,l.id))}return{member:s,memberPrimaryName:Object(k["getPrefCompliantMemberName"])(e,s,false,false),memberSecondaryName:Object(k["getMemberSecondaryName"])(e,s),showDraftIcon:o,showStatus:n&&Object(k["hasCustomStatusSet"])(s),isUnknown:Object(g["isBoolean"])(i)?i:Object(E["d"])(s)}}var H=Object(v["connect"])(W)(q);var G={className:_["b"].string,id:_["b"].string.isRequired,isActive:_["b"].bool,isDeactivated:_["b"].bool,isDisabled:_["b"].bool,secondaryContent:_["b"].node,secondaryContentPosition:_["b"].oneOf(Object(g["values"])(L)),showUnreadCount:_["b"].bool,unreadCount:_["b"].number};var V={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0,secondaryContentPosition:L.right,showUnreadCount:false,unreadCount:null};var K=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.id,i=t.isActive,s=t.isDeactivated,o=t.isDisabled,l=t.secondaryContent,c=t.secondaryContentPosition,u=t.showUnreadCount,d=t.unreadCount;var p=h.a.createElement(C["b"],{className:"c-member__unread_count",count:d,style:C["a"].red});var m=h.a.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},l);var v=h.a.createElement("span",{className:"c-member__secondary_content"},l&&c===L.right&&m,u&&d&&p);var f=b()(a,"c-medium_member_list_entity");var g=void 0;i?g=o||s?D["c"].highlightDim:D["c"].highlightLight:(o||s)&&(g=D["c"].dim);return h.a.createElement(O["a"],{"data-qa":"medium_member_list_entity",className:f,style:g,primaryContent:h.a.createElement(H,n()({id:r,isDeactivated:s},this.props,{secondaryContent:c===L.right?null:l})),secondaryContent:v,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"medium"})}}]);return t}(m["Component"]);K.displayName="MediumMemberListEntity";K.defaultProps=V;function z(e,t){var a=t.id;var r=Object(y["e"])(e,a);return{member:r,unreadCount:Object(k["getImUnreadCountByMember"])(e,r)}}var Q=t["a"]=Object(v["connect"])(z)(K)},2090:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(6);var p=a(0);var m=a(1);var h=a.n(m);var v=a(528);var f=a(12);var b=a(2);var g=a(31);var _=a(23);var y=a(27);var k=a(277);var O=a(243);var C=a(1677);var E=a(32);function S(e){var t=/<@([A-Z0-9a-z]+)\|([^>]+)>/g;return e.replace(t,function(e,t,a){var r=Object(b["unescape"])(a);return"<@"+t+"|"+r+">"})}var w=a(575);var I=a(3672);var j=a(4947);var T=new d["b"]("search");var A={usePrimarySearch:p["b"].bool.isRequired,isSearchAutocompleteOpen:p["b"].bool.isRequired,autoFocus:p["b"].bool,isSonic:p["b"].bool.isRequired,displayQuery:p["b"].string.isRequired,queryIsUserGenerated:p["b"].bool,onBlur:p["b"].func,onEnter:p["b"].func,onEscape:p["b"].func,onFocus:p["b"].func,searchInputChanged:p["b"].func.isRequired,clearSearchInput:p["b"].func.isRequired,autocompleteSelectedIndex:p["b"].number};var N={autoFocus:false,queryIsUserGenerated:false,onBlur:b["noop"],onEnter:b["noop"],onEscape:b["noop"],onFocus:b["noop"],autocompleteSelectedIndex:void 0};var M=null;var P=0;var R=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.texty=null;Object(g["a"])(a,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);a.queryHasChanged=false;a.queryHasBeeenSubmitted=false;a.onUserInput=Object(b["debounce"])(a.onUserInput,100);a.placeholderCopy=a.lazyInitializeShuffledPlaceholderCopy();return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.autoFocus,r=t.usePrimarySearch,n=t.isSearchAutocompleteOpen;if(a||r&&n){var i=window._searchAutocompleteCatch;if(i){delete window._searchAutocompleteCatch;var s=i.value;this.texty.value(this.texty.value()+s);i.parentNode.removeChild(i)}this.texty.setCursorAtEnd()}}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props.usePrimarySearch&&t.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen;return a||this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){this.texty&&this.props.usePrimarySearch&&!t.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus();this.props.queryIsUserGenerated||t.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}},{key:"onUserInput",value:function e(){var t=this;if(this.queryHasChanged){this.queryHasChanged=false;this.props.searchInputChanged({textyString:this.getTextyString()}).then(function(){if(t.queryHasBeeenSubmitted){t.props.onEnter();t.queryHasBeeenSubmitted=false}})}else if(this.queryHasBeeenSubmitted){this.props.onEnter();this.queryHasBeeenSubmitted=false}}},{key:"onUserQueryChange",value:function e(){this.queryHasChanged=true;this.onUserInput()}},{key:"onEnter",value:function e(){if(null!==this.props.autocompleteSelectedIndex){this.queryHasBeeenSubmitted=true;this.onUserInput()}}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function e(t){var a=!!(t&&t.getWrappedInstance);this.texty=a?t.getWrappedInstance():t}},{key:"getTextyString",value:function e(){if(!this.texty)return this.props.displayQuery;return S(this.texty.value())}},{key:"lazyInitializeShuffledPlaceholderCopy",value:function e(){var t=[T.t("Search for comments, asides, eurekas, and more"),T.t("Search for messages, replies, or even insightful asides"),T.t("Search for files, facts, figures, and stats"),T.t("Search for files, for people, for half-remembered fragments of conversation"),T.t("Search for a missing link"),T.t("Search for whatever; let\u2019s find it together"),T.t("Search discussions, directories, data, and more"),T.t("Search messages, files, around corners, under rugs, etc."),T.t("Search all across Slack"),T.t("Search far and wide"),T.t("Search high and low"),T.t("Search the Log of All Conversation and Knowledge"),T.t("Search because it\u2019s faster than scrolling"),T.t("Type what you want to search for. Slack will do the rest."),T.t("What do you want to search for today?"),T.t("Surely that\u2019s around here somewhere\u2026"),T.t("You\u2019re digging in the right place"),T.t("We\u2019re all searching, in a way. You can search Slack, specifically, here."),T.t("Input search. Beep boop."),T.t("Search for something. Anything. You have the window open now anyway."),T.t("Delve into your archives, seize upon the answers. Rejoice.")];null===M&&(M=Object(b["shuffle"])(t.map(function(e,t){return t})));P=(P+1)%M.length;return t[M[P]]}},{key:"focusTexty",value:function e(){this.texty&&this.texty.focus()}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=T.t("Search");var a={tabcomplete:{completers:[]},keyboard:{useFormattingCommands:false}};var r=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var n="number"===typeof this.props.autocompleteSelectedIndex?Object(j["b"])(this.props.autocompleteSelectedIndex):void 0;var i={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:n};var s=void 0;s=this.placeholderCopy?this.placeholderCopy:T.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"});return h.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},h.a.createElement(_["b"],{type:"search-medium",className:"c-search__input_box__icon"}),h.a.createElement(v["default"],{className:"c-search__input_box__input",modules:a,ref:this.setTextyRef,ariaLabel:t,ariaDescribedBy:"footer-instructions",unsafeAriaProps:i,initialText:this.props.displayQuery,placeholder:s,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:true,focusOnMount:false,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false,useFocusRing:false,"data-qa":"focusable_search_input"}),h.a.createElement(y["c"],{className:r,onClick:this.onClickClear,label:T.t("Clear"),"data-qa":"search_input_clear"},T.t("Clear")))}}]);return t}(m["Component"]);R.displayName="SearchInputBox";R.defaultProps=N;var x=function e(t){return{usePrimarySearch:Object(w["a"])(t),isSearchAutocompleteOpen:Object(O["isSearchAutocompleteOpen"])(t),displayQuery:Object(k["getSearchInputBoxDisplayQuery"])(t),queryIsUserGenerated:Object(k["getSearchInputBoxQueryIsUserGenerated"])(t),autocompleteSelectedIndex:Object(O["getSearchAutocompleteSelectedIndex"])(t),isSonic:Object(E["a"])(t)}};var D={searchInputChanged:function e(){return k["searchInputChanged"].apply(void 0,arguments)},clearSearchInput:function e(){return C["a"].apply(void 0,arguments)}};var F=t["a"]=Object(f["connect"])(x,D,null,{withRef:true})(R)},2092:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(0);var h=a(1);var v=a.n(h);var f=a(2);var b=a(31);var g=a(12);var _=a(757);var y=a(6);var k=a(277);var O=a(243);var C=a(322);var E=a(75);var S=a.n(E);var w=a(33);var I=a(9);var j=a(856);var T=a(89);var A=a(896);var N=a(22);var M=a(762);var P=a(63);var R=a(32);var x=a(4947);var D=a(1210);var F=a(23);var L=a(1199);var B=new y["b"]("search");var U={featureOfflineMode:m["b"].bool,onFeedbackClick:m["b"].func.isRequired};var q={featureOfflineMode:false};var W=function e(){return v.a.createElement(h["Fragment"],null,v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2191"),v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_25"},"\u2193"),"\xa0",B.t("to navigate"),v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_100","aria-label":B.t("Return")},"\u21b5"),"\xa0",B.t("to select"),v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_100","aria-label":B.t("Escape Character")},"esc"),"\xa0",B.t("to dismiss"))};W.displayName="onlineLabel";var H=function e(t){var a=t.featureOfflineMode,r=t.onFeedbackClick;return v.a.createElement("footer",null,v.a.createElement("span",{className:"c-search_autocomplete__footer_navigation_help",id:"footer-instructions"},a?v.a.createElement(h["Fragment"],null,v.a.createElement(D["a"],null,B.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:v.a.createElement(F["b"],{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})})),v.a.createElement(D["b"],null,W())):W()),v.a.createElement(L["a"],{className:"c-search_autocomplete__footer_navigation_feedback",onClick:r}))};H.displayName="Footer";H.defaultProps=q;var G=H;var V=a(3670);var K=new y["b"]("search");var z=new y["b"]("view");var Q={displayQuery:m["b"].string,userQuery:m["b"].string,suggestions:m["b"].array.isRequired,selectedIndex:m["b"].number,onAccept:m["b"].func,onDelete:m["b"].func,onSelectedIndexChange:m["b"].func,fetchSearchAutocompleteSuggestions:m["b"].func.isRequired,setSearchAutocompleteSelection:m["b"].func.isRequired,setSearchAutocompleteSuggestions:m["b"].func.isRequired,openSearchFeedbackDialog:m["b"].func.isRequired,lastOpenMethodWasSwitchy:m["b"].bool,teamId:m["b"].string.isRequired,telemeter:m["b"].object,featureOfflineMode:m["b"].bool.isRequired};var Y={selectedIndex:null,onAccept:f["noop"],onDelete:f["noop"],onSelectedIndexChange:f["noop"],displayQuery:null,userQuery:null,lastOpenMethodWasSwitchy:false,telemeter:P["d"]};var J=function e(t,a){return(t%a+a)%a};var X=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["a"])(a,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]);a.searchAutocompleteSuggestionsPromise=void 0;a.markAutocompleteRenderStart=Object(f["throttle"])(j["b"].bind(null,e.telemeter),2e3,{leading:true});a.populateChannelNameCounts();a.listRef=v.a.createRef();a.listItemRefs={};return a}l()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange();Object(A["e"])(this.props.teamId);var t=Object(R["a"])()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",t)}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange();this.populateChannelNameCounts()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}},{key:"onKeydown",value:function e(t){var a=function e(){t.preventDefault();t.stopPropagation();return false};var r=t.shiftKey;var n=t.which;var i=_["codes"].up,s=_["codes"].tab,o=_["codes"].down;if(!r&&n===i||r&&n===s){this.decrementSelectedIndex();return a()}if(!r&&n===o||n===s){this.incrementSelectedIndex();return a()}return true}},{key:"onUserQueryChange",value:function e(){Object(j["a"])(this.props.telemeter)}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(f["filter"])(this.props.suggestions,function(e){return t.key!==e.key})});this.props.onDelete()}},{key:"onSuggestionSelected",value:function e(t,a){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!a})}},{key:"onMouseLeaveList",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:false})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"getListItemRef",value:function e(t){this.listItemRefs[t]||(this.listItemRefs[t]=v.a.createRef());return this.listItemRefs[t]}},{key:"scrollToListItemIndex",value:function e(t){if(!this.listRef||!this.listRef.current||!this.listItemRefs[t]||!this.listItemRefs[t].current)return;var a=this.listRef.current;if(0===t){a.scrollTop=0;return}var r=this.listItemRefs[t].current.getWrappedInstance?this.listItemRefs[t].current.getWrappedInstance():this.listItemRefs[t].current;var n=r.offsetTop-a.offsetTop;var i=n+r.offsetHeight;n<a.scrollTop&&(a.scrollTop=n);i>a.scrollTop+a.clientHeight&&(a.scrollTop=i-a.clientHeight)}},{key:"populateChannelNameCounts",value:function e(){var t=this;this.channelNameCounts={};this.props.suggestions.forEach(function(e){e.is_type_channel&&(t.channelNameCounts[e.channel.name]=(t.channelNameCounts[e.channel.name]||0)+1)})}},{key:"incrementSelectedIndex",value:function e(){var t=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(t&&t.type===T["b"].QUERY&&t.suggestion_replacement!==this.props.displayQuery){this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:true});return}var a=J((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:a,setText:true});this.scrollToListItemIndex(a)}},{key:"decrementSelectedIndex",value:function e(){var t=J(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:true});this.scrollToListItemIndex(t)}},{key:"propsForSuggestion",value:function e(t,a){var r=a.is_type_channel&&this.channelNameCounts[a.channel.name]>1;return{index:t,suggestion:a,key:a.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:r}}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(S.a.chrome&&S.a.version<67)||!Object(w["isSSB"])())return null;var a=this.props.selectedIndex;var r=Object(f["last"])(this.props.suggestions.map(function(e,r){return(e.is_type_navigational||e.is_type_action)&&r===a?v.a.createElement(x["a"],t.propsForSuggestion(r,e)):null}).filter(function(e){return e}));return v.a.createElement("div",{"aria-live":"polite",className:"offscreen"},r)}},{key:"renderBlankSlate",value:function e(){var t=this;var a=this.props.featureOfflineMode;var r=Object(f["some"])(this.props.suggestions,function(e){return e.is_type_query_history});var i=v.a.createElement("header",null,v.a.createElement("span",{className:"c-search_autocomplete__header_label"},v.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},K.t("Recent searches"))));var s=this.props.suggestions.map(function(e,a){return e.is_type_query_history&&v.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))});var o=Object(f["some"])(this.props.suggestions,function(e){return e.is_type_navigational});var l=v.a.createElement("header",null,v.a.createElement("span",{className:"c-search_autocomplete__header_label"},v.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},z.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"}))));var c=this.props.suggestions.map(function(e,a){return e.is_type_navigational&&v.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))});var u=this.renderScreenReaderWorkaround();var d=v.a.createElement(h["Fragment"],null,o&&v.a.createElement("li",{role:"presentation"},l),c);var p=v.a.createElement(h["Fragment"],null,r&&v.a.createElement("li",{role:"presentation"},i),s);return v.a.createElement("div",{className:"c-search_autocomplete"},u,v.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.lastOpenMethodWasSwitchy&&d,p,!this.props.lastOpenMethodWasSwitchy&&d),v.a.createElement(G,{featureOfflineMode:a,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this;var a=this.props.featureOfflineMode;var r=!this.props.userQuery;if(r)return this.renderBlankSlate();this.markAutocompleteRenderStart();var i=this.renderScreenReaderWorkaround();return v.a.createElement("div",{className:"c-search_autocomplete"},i,v.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map(function(e,a){return v.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))})),v.a.createElement(G,{featureOfflineMode:a,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(h["Component"]);X.displayName="SearchAutocomplete";X.defaultProps=Y;var Z=function e(t){return{suggestions:Object(O["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(O["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(k["getSearchInputBoxUserQuery"])(t),displayQuery:Object(k["getSearchInputBoxDisplayQuery"])(t),lastOpenMethodWasSwitchy:Object(M["c"])(t),teamId:Object(N["b"])(t),telemeter:Object(P["c"])({state:t}),featureOfflineMode:Object(I["isFeatureEnabled"])(t,"feature_offline_mode")}};var $={setSearchAutocompleteSelection:function e(){return O["setSearchAutocompleteSelection"].apply(void 0,arguments)},setSearchAutocompleteSuggestions:function e(){return O["setSearchAutocompleteSuggestions"].apply(void 0,arguments)},fetchSearchAutocompleteSuggestions:function e(){return C["b"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return C["h"].apply(void 0,arguments)}};var ee=t["a"]=Object(g["connect"])(Z,$)(X)},2093:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(2);var _=a(1298);var y={items:v["b"].arrayOf(_["d"]).isRequired,itemMapper:v["b"].func,actions:v["b"].arrayOf(_["c"]).isRequired,titleFormatter:v["b"].func,showingSelection:v["b"].bool,onToggleShowingSelection:v["b"].func,onToggleSelect:v["b"].func,onAction:v["b"].func,"data-qa":v["b"].string,position:v["b"].string};var k={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var O=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var a=this.props.itemMapper;var r=a?t.map(a):t;var n=Object(g["reduce"])(r,function(e,t){return e+(t.isSelected?1:0)},0);return{items:r,availableCount:t.length,selectedCount:n}}},{key:"render",value:function e(){var t=this.props,a=t.items,r=s()(t,["items"]);return b.a.createElement(_["b"],n()({},this.getBaseSelectionBarProps(a),r))}}]);return t}(f["PureComponent"]);O.displayName="SelectionBar";O.defaultProps=k;var C=O;a.d(t,"a",function(){return _["b"]});var E=t["b"]=C},2095:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a.n(v);var b=a(31);var g=a(13);var _=a.n(g);var y=a(62);var k=a(18);var O=a(39);var C=a(252);var E=a(911);var S=a(9);var w=a(98);var I=a(21);var j=a(73);var T=a(424);var A=a(1183);var N=a(137);var M=a(914);var P=a(1838);var R=a(2016);var x=a(42);var D=a(61);var F=a(652);var L=a(284);var B=a(6);var U=a(32);var q=a(909);var W=a(24);var H=Object(W["b"])("TS.replies.promiseToGetSubscriptionState",function(){return Promise.resolve()});var G=Object(W["b"])("TS.replies.setSubscriptionState");var V=Object(W["b"])("TS.replies.getSubscriptionState");var K=Object(W["b"])("TS.replies.canReplyToMsg");var z=Object(W["b"])("TS.replies.requestOfflineThread");var Q=Object(W["b"])("TS.replies.dispatchThreadSyncedSig");var Y=a(357);var J=a(1182);var X=a(1672);var Z=a(1674);var $=a(895);var ee=a(20);var te=a(41);var ae=a(69);var re=a(2045);var ne=a(223);var ie=a(1577);var se=a(1168);var oe=new B["b"]("message");var le={reactionKey:m["b"].string,fileId:m["b"].string,fileIds:m["b"].arrayOf(m["b"].string),comment:m["b"].string,replies:m["b"].arrayOf(m["b"].shape({ts:m["b"].string,user:m["b"].string})),replyCount:m["b"].number,ts:m["b"].string,rollup:y["a"].Rollup(),threadTs:m["b"].string,channel:m["b"].object,file:m["b"].object,subtype:m["b"].string,channelId:m["b"].string,theme:m["b"].oneOf(["dense","light"]),isStarred:m["b"].bool,isPinned:m["b"].bool,isEphemeral:m["b"].bool,isFileAuthorExternal:m["b"].bool,isReply:m["b"].bool,canUserReplyToMessage:m["b"].bool,messageContainerType:m["b"].string,editHandler:m["b"].func,unreadHandler:m["b"].func,onMenuOpen:m["b"].func,onMenuClose:m["b"].func,onEmojiPickerOpen:m["b"].func,onEmojiPickerClose:m["b"].func,showComment:m["b"].bool,showShare:m["b"].bool,showReact:m["b"].bool,showJump:m["b"].bool,showStar:m["b"].bool,showMoreActions:m["b"].bool,changeReactionFromUserAction:m["b"].func,pinMessage:m["b"].func,unpinMessage:m["b"].func,updateStar:m["b"].func,renderMenuBelowTrigger:m["b"].bool,renderOffscreen:m["b"].bool.isRequired,openModal:m["b"].func,showThreadOrRefresh:m["b"].func,addReminderForMessage:m["b"].func,openShareDialog:m["b"].func,jumpToMessage:m["b"].func,featureOfflineMode:m["b"].bool,wasRecentlyOnline:m["b"].bool,featureSonicEmoji:m["b"].bool,clogger:m["b"].object.isRequired,clogLinkClick:m["b"].func,clogThreadEvent:m["b"].func,canEditMessage:m["b"].bool,canPin:m["b"].bool,canMarkUnread:m["b"].bool,canAddReminder:m["b"].bool,canDeleteMessage:m["b"].bool,featureContextualMessageShortcuts:m["b"].bool,itemId:m["b"].string};var ce={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,canUserReplyToMessage:false,messageContainerType:void 0,editHandler:f.a.noop,unreadHandler:f.a.noop,onMenuOpen:f.a.noop,onMenuClose:f.a.noop,onEmojiPickerOpen:f.a.noop,onEmojiPickerClose:f.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,canEditMessage:false,canPin:false,canMarkUnread:false,canAddReminder:false,canDeleteMessage:false,changeReactionFromUserAction:f.a.noop,pinMessage:f.a.noop,unpinMessage:f.a.noop,updateStar:f.a.noop,renderMenuBelowTrigger:true,openModal:f.a.noop,showThreadOrRefresh:f.a.noop,addReminderForMessage:f.a.noop,openShareDialog:f.a.noop,jumpToMessage:f.a.noop,featureOfflineMode:false,wasRecentlyOnline:false,featureSonicEmoji:false,clogLinkClick:f.a.noop,clogThreadEvent:f.a.noop,featureContextualMessageShortcuts:false,itemId:void 0};var ue={x:0,y:-8};var de={x:4,y:-16};var pe={x:50,y:0};var me={EDIT:["e"],REACT:["r"],COMMENT:["t"],PIN:["p"],SHARE:["s"],STAR:["a"],MARK_UNREAD:["u"],REMIND:["m"],DELETE:["delete","del"]};var he=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(b["a"])(a,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]);a.reactionBtnRef=p.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.featureContextualMessageShortcuts;t&&this.bindContextualShortcuts()}},{key:"componentWillUnmount",value:function e(){var t=this.props.featureContextualMessageShortcuts;t&&this.unbindContextualShortcuts()}},{key:"onStar",value:function e(t){if(!this.canStarMessage())return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();var a=this.props,r=a.channelId,n=a.ts,i=a.fileId,s=a.fileIds,o=a.comment,l=a.subtype,c=a.isStarred;var u={channel:r,timestamp:n};i&&(u={file:i});if(o&&"file_comment"===l){var d=s&&s[0]||i;u={file_comment:o,file_comment_file:d}}this.props.updateStar(!c,u);var p=c?k["z"].UNSTAR_MESSAGE_BUTTON:k["z"].STAR_MESSAGE_BUTTON;this.trackAction(p);n&&Object(U["a"])()&&this.clogMsgStarClick()}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(q["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(k["z"].ADD_REACTION_BUTTON)}},{key:"onEmojiSelected",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:a})}},{key:"onComment",value:function e(t){if(!this.canCommentOnMessage())return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();var a=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:a});var r=this.state.subscribed?k["z"].REPLY_TO_THREAD_BUTTON:k["z"].START_A_THREAD_BUTTON;this.trackAction(r)}},{key:"onShare",value:function e(t){if(!this.canShareMessage())return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();var a=this.props,r=a.ts,n=a.channelId,i=a.fileId;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:i,initialChannelId:n}):this.props.openShareDialog({ts:r,channelId:n});this.trackAction(k["z"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){if(!this.props.canEditMessage)return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(k["z"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(t){if(!this.props.canDeleteMessage)return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();var a=this.props,r=a.channelId,n=a.ts;this.props.openModal({element:p.a.createElement(Z["a"],{channelId:r,ts:n})});this.trackAction(k["z"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(t){if(!this.props.canMarkUnread)return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(k["z"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var a=this;var r=this.props,n=r.channel,i=r.ts,s=r.subtype;this.trackAction(k["z"].REMIND_ME_BUTTON,true);return function(){a.props.addReminderForMessage({time:t,message_channel:n.id,message_ts:i,respond_in_channel:"thread_broadcast"===s})}}},{key:"onSubscribe",value:function e(){var t=this.props,a=t.replies,r=t.ts,n=t.channel;var i=this.state.subscribed;var s=a.length&&a[a.length-1].ts;G(n.id,r,!i,s);var o=i?k["z"].UNFOLLOW_MESSAGE_BUTTON:k["z"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"onPin",value:function e(t){if(!this.props.canPin)return;this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&t.stopPropagation();var a=this.props,r=a.ts,n=a.channel,i=a.isPinned,s=a.pinMessage,o=a.unpinMessage;if(i){o({ts:r,channelId:n.id});this.trackAction(k["z"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{s({ts:r,channelId:n.id});this.trackAction(k["z"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(Y["a"])(a.id,r,n);i&&"file_comment"!==s&&(o=i.permalink);Object(L["writeText"])(o);this.trackAction(k["z"].COPY_LINK_BUTTON,true)}},{key:"onJump",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.isReply,i=t.clogLinkClick;var s=this.props.threadTs||this.props.ts;this.props.jumpToMessage({channelId:a&&a.id,ts:r,threadTs:n&&s});this.props.messageContainerType===ee["MESSAGE_CONTAINERS"].THREADS_VIEW&&i("OPEN_IN_CHANNEL")}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,a=t.channelId,r=t.ts;this.props.openModal({element:p.a.createElement(X["a"],{channelId:a,ts:r})});this.trackAction(k["z"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(k["z"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,a){if(a.id===ee["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"getContextualShortcutCommands",value:function e(){var t=this;var a=[];a.push({keys:me.EDIT,handler:this.onEdit,action:"keydown"});a.push({keys:me.REACT,handler:function e(a){a.stopPropagation();a.preventDefault();t.reactionBtnRef&&t.reactionBtnRef.current&&t.reactionBtnRef.current.click()},action:"keydown"});a.push({keys:me.COMMENT,handler:this.onComment,action:"keydown"});a.push({keys:me.PIN,handler:this.onPin,action:"keydown"});a.push({keys:me.SHARE,handler:this.onShare,action:"keydown"});a.push({keys:me.STAR,handler:this.onStar,action:"keydown"});a.push({keys:me.MARK_UNREAD,handler:this.onMarkUnread,action:"keydown"});a.push({keys:me.REMIND,handler:function e(a){if(!t.props.canAddReminder)return;a.stopPropagation();t.onRemind("Custom")()},action:"keydown"});a.push({keys:me.DELETE,handler:this.onDelete,action:"keydown"});return a}},{key:"bindContextualShortcuts",value:function e(){var t=this.props.itemId;if(t){var a=document.querySelector('[id="'+t+'"]');if(a){this.keyCommands=new ne["a"](a);this.keyCommands.bindAll(this.getContextualShortcutCommands())}}}},{key:"unbindContextualShortcuts",value:function e(){if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}}},{key:"isAutomated",value:function e(){return Object(F["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={action:k["w"].CLICK,ui_element:t};a&&(r.step=k["A"].MORE_ACTIONS_MENU);var n=this.props.clogger;n.track(k["l"].MSG_ACTION,{contexts:{ui_context:r}})}},{key:"clogMsgStarClick",value:function e(){var t=this.props,a=t.channelId,r=t.isStarred,n=t.messageContainerType,i=t.threadTs,s=t.clogger,o=t.clogThreadEvent;var l=r?k["l"].STAR_REMOVE_CLICKED:k["l"].STAR_ADD_CLICKED;var c={channel_id:a,parent_message_id:i};n===ee["MESSAGE_CONTAINERS"].THREADS_VIEW?o({event:l,metadata:c}):s.track(l,c)}},{key:"canCommentOnMessage",value:function e(){var t=this.props,a=t.replyCount,r=t.subtype,n=t.isEphemeral,i=t.canUserReplyToMessage;var s=a||"thread_broadcast"===r;if(this.props.isFileAuthorExternal)return false;if(this.isAutomated()||this.isTemp()||n)return false;if(!i&&!s)return false;return true}},{key:"canShareMessage",value:function e(){var t=this.props,a=t.ts,r=t.subtype,n=t.isEphemeral;if(n||"tombstone"===r||Object(x["isTempTs"])(a))return false;if("file_comment"===r)return false;return true}},{key:"canStarMessage",value:function e(){var t=this.props,a=t.subtype,r=t.isStarred,n=t.isEphemeral;if(n||"tombstone"===a&&!r)return false;return true}},{key:"renderStar",value:function e(){var t=this.props,a=t.fileId,r=t.subtype,n=t.isStarred,i=t.channel,s=t.showStar;if(!s||!this.canStarMessage())return null;var o="message";a&&(o="file_comment"===r?"file comment":"file");var l=void 0;l=n?"file"===o?oe.t("Unstar file"):"file comment"===o?oe.t("Unstar file comment"):oe.t("Unstar message"):"file"===o?oe.t("Star file"):"file comment"===o?oe.t("Star file comment"):oe.t("Star message");return p.a.createElement(se["a"],{iconType:n?"small-star-filled":"small-star",label:l,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:i?"top":"top-right"})}},{key:"renderShare",value:function e(){var t=this.props,a=t.subtype,r=t.featureOfflineMode,n=t.wasRecentlyOnline,i=t.showShare;if(!i||!this.canShareMessage())return null;var s="file_share"===a||"file_mention"===a?oe.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):oe.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});r&&!n&&(s=p.a.createElement($["a"],{tooltipLabel:s}));return p.a.createElement(se["a"],{iconType:"share-action",label:s,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;if(this.props.featureSonicEmoji)return p.a.createElement(J["a"],{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose},p.a.createElement(se["a"],{iconType:"small-reaction",label:oe.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action",btnRef:this.reactionBtnRef}));return p.a.createElement(se["a"],{iconType:"small-reaction",label:oe.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var t=oe.t("Jump");this.props.messageContainerType!==ee["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.messageContainerType!==ee["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||(t=oe.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"}));return p.a.createElement(se["a"],{iconType:"jump",label:t,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function e(){var t=this.props,a=t.replyCount,r=t.subtype,n=t.canUserReplyToMessage,i=t.messageContainerType,s=t.featureOfflineMode,o=t.wasRecentlyOnline,l=t.showComment;if(!l||!this.canCommentOnMessage())return null;var c=a||"thread_broadcast"===r;var u=void 0;if(i===ee["MESSAGE_CONTAINERS"].THREADS_VIEW)u=oe.t("View thread in sidebar");else if(!n&&c)u=oe.t("View thread");else if(c){u=oe.t("Reply to thread");s&&!o&&(u=p.a.createElement($["a"],{tooltipLabel:u}))}else{u=oe.t("Start a thread");s&&!o&&(u=p.a.createElement($["a"],{tooltipLabel:u}))}return p.a.createElement(se["a"],{iconType:"small-reply",label:u,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props,a=t.renderMenuBelowTrigger,r=t.channel,n=t.featureOfflineMode,i=t.wasRecentlyOnline,s=t.showMoreActions;if(!r||!s)return null;var o=oe.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});n&&!i&&(o=p.a.createElement($["a"],{tooltipLabel:oe.t("More actions")}));return p.a.createElement(ae["e"],{renderMenu:this.renderMoreActionsMenu,position:a?"right-bottom":"top-right",allowanceX:a?pe.x:0,offsetX:a?de.x:ue.x,offsetY:a?de.y:ue.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},p.a.createElement(se["a"],{iconType:"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var a=this.props,r=a.channel,n=a.ts,i=a.threadTs,s=a.messageContainerType,o=a.rollup;var l=t.onTriggerClose,c=t.onMenuItemSelected;return p.a.createElement(re["a"],{rollup:o,ts:n,threadTs:i,channelId:r.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:l,onMenuItemSelected:c,messageContainerType:s})}},{key:"render",value:function e(){var t=_()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var a=oe.t("Message actions");return p.a.createElement(ie["a"],{className:t,ariaLabel:a},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(d["PureComponent"]);he.displayName="MessageActions";he.defaultProps=ce;var ve=function e(t,a){var r=a.fileId,n=a.channelId,i=a.ts,s=a.showReact,o=a.messageContainerType;var l=Object(I["e"])(t,n);var c=Object(j["a"])(t,n,i);var u=Object(S["getCurrentUserId"])(t);var d=Object(D["a"])(t,"msg_edit_window_mins");return{channel:l,file:Object(w["getFileById"])(t,r),isFileAuthorExternal:Object(w["isFileAuthorExternal"])(t,r),featureSonicEmoji:Object(S["isFeatureEnabled"])(t,"feature_sonic_emoji"),clogger:Object(O["a"])({state:t}),featureOfflineMode:Object(S["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(N["h"])(t),canUserReplyToMessage:Object(x["canReplyOrComment"])(t,{message:c,channel:l}),showReact:Object(x["canAddReaction"])(t,c)&&s,canEditMessage:Object(x["canEditMessage"])(t,u,c,l,d),canPin:Object(x["canPin"])(t,{message:c,channel:l}),canMarkUnread:Object(x["canMarkUnread"])(t,{message:c,channel:l}),canAddReminder:Object(x["canAddReminder"])(t,{message:c,channel:l}),canDeleteMessage:Object(x["canDeleteMessage"])(t,{message:c,channel:l,messageContainerType:o}),featureContextualMessageShortcuts:Object(S["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts")}};var fe={changeReactionFromUserAction:A["a"],pinMessage:C["pinMessage"],unpinMessage:C["unpinMessage"],updateStar:E["a"],openModal:te["openModal"],showThreadOrRefresh:function e(){return T["showThreadOrRefresh"].apply(void 0,arguments)},addReminderForMessage:R["a"],openShareDialog:M["a"],jumpToMessage:function e(){return P["a"].apply(void 0,arguments)}};var be=t["a"]=Object(h["connect"])(ve,fe)(he)},2299:function(e,t,a){},2306:function(e,t,a){},2308:function(e,t,a){},2310:function(e,t,a){},2312:function(e,t,a){var r=a(2429),n=a(3175),i=a(3176),s=a(2432),o=a(3193),l=a(2316),c=a(3194),u=a(2438),d=a(2440),p=a(2320);var m="Expected a function";var h=1,v=2,f=8,b=16,g=32,_=64;var y=Math.max;function k(e,t,a,k,O,C,E,S){var w=t&v;if(!w&&"function"!=typeof e)throw new TypeError(m);var I=k?k.length:0;if(!I){t&=~(g|_);k=O=void 0}E=void 0===E?E:y(p(E),0);S=void 0===S?S:p(S);I-=O?O.length:0;if(t&_){var j=k,T=O;k=O=void 0}var A=w?void 0:l(e);var N=[e,t,a,k,O,j,T,C,E,S];A&&c(N,A);e=N[0];t=N[1];a=N[2];k=N[3];O=N[4];S=N[9]=void 0===N[9]?w?0:e.length:y(N[9]-I,0);!S&&t&(f|b)&&(t&=~(f|b));if(t&&t!=h)M=t==f||t==b?i(e,t,S):t!=g&&t!=(h|g)||O.length?s.apply(void 0,N):o(e,t,a,k);else var M=n(e,t,a);var P=A?r:u;return d(P(M,N),e,t)}e.exports=k},2313:function(e,t){function a(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}e.exports=a},2314:function(e,t,a){var r=a(1906),n=a(2315);var i=4294967295;function s(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=i;this.__views__=[]}s.prototype=r(n.prototype);s.prototype.constructor=s;e.exports=s},2315:function(e,t){function a(){}e.exports=a},2316:function(e,t,a){var r=a(2430),n=a(3178);var i=r?function(e){return r.get(e)}:n;e.exports=i},2317:function(e,t,a){var r=a(1906),n=a(2315);function i(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=void 0}i.prototype=r(n.prototype);i.prototype.constructor=i;e.exports=i},2318:function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(false===t(e[a],a,e))break;return e}e.exports=a},2319:function(e,t){var a="__lodash_placeholder__";function r(e,t){var r=-1,n=e.length,i=0,s=[];while(++r<n){var o=e[r];if(o===t||o===a){e[r]=a;s[i++]=r}}return s}e.exports=r},2320:function(e,t,a){var r=a(3195);function n(e){var t=r(e),a=t%1;return t===t?a?t-a:t:0}e.exports=n},2321:function(e,t,a){var r=a(903),n=a(3198),i=a(3199),s=a(3200),o=a(3201),l=a(3202);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=n;c.prototype["delete"]=i;c.prototype.get=s;c.prototype.has=o;c.prototype.set=l;e.exports=c},2322:function(e,t,a){var r=a(3208),n=a(2446);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var l=o?function(e){if(null==e)return[];e=Object(e);return r(o(e),function(t){return s.call(e,t)})}:n;e.exports=l},2323:function(e,t,a){var r=a(2416);var n=r(Object.getPrototypeOf,Object);e.exports=n},2324:function(e,t,a){var r=a(2450);function n(e){var t=new e.constructor(e.byteLength);new r(t).set(new r(e));return t}e.exports=n},2325:function(e,t,a){var r=a(522),n=a(1784);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(r(e))return false;var a=typeof e;if("number"==a||"symbol"==a||"boolean"==a||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},2326:function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}e.exports=a},2327:function(e,t,a){},2329:function(e,t,a){},2331:function(e,t,a){},2333:function(e,t,a){},2337:function(e,t,a){},2339:function(e,t,a){},2341:function(e,t,a){},2342:function(e,t,a){var r,i;(function(){var a=false;var s=this;var o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.EXIFwrapped=e};true;(true,e.exports)&&(t=e.exports=o);t.EXIF=o;var l=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var c=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var p=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(e,t,a){e.addEventListener?e.addEventListener(t,a,false):e.attachEvent&&e.attachEvent("on"+t,a)}function h(e){return!!e.exifdata}function v(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var a=atob(e);var r=a.length;var n=new ArrayBuffer(r);var i=new Uint8Array(n);for(var s=0;s<r;s++)i[s]=a.charCodeAt(s);return n}function f(e,t){var a=new XMLHttpRequest;a.open("GET",e,true);a.responseType="blob";a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};a.send()}function b(e,t){function r(a){var r=g(a);e.exifdata=r||{};var n=_(a);e.iptcdata=n||{};if(o.isXmpEnabled){var i=j(a);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=v(e.src);r(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){r(e.target.result)};f(e.src,function(e){i.readAsArrayBuffer(e)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(s.response);s=null};s.open("GET",e.src,true);s.responseType="arraybuffer";s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength);r(e.target.result)};i.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength,i;while(r<n){if(255!=t.getUint8(r)){a&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r));return false}i=t.getUint8(r+1);a&&console.log(i);if(225==i){a&&console.log("Found 0xFFE1 marker");return I(t,r+4,t.getUint16(r+2)-2)}r+=2+t.getUint16(r+2)}}function _(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(r<n){if(i(t,r)){var s=t.getUint8(r+7);s%2!==0&&(s+=1);0===s&&(s=4);var o=r+8+s;var l=t.getUint16(r+6+s);return k(e,o,l)}r++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function k(e,t,a){var r=new DataView(e);var n={};var i,s,o,l,c;var u=t;while(u<t+a){if(28===r.getUint8(u)&&2===r.getUint8(u+1)){l=r.getUint8(u+2);if(l in y){o=r.getInt16(u+3);c=o+5;s=y[l];i=w(r,u+5,o);n.hasOwnProperty(s)?n[s]instanceof Array?n[s].push(i):n[s]=[n[s],i]:n[s]=i}}u++}return n}function O(e,t,r,n,i){var s=e.getUint16(r,!i),o={},l,c,u;for(u=0;u<s;u++){l=r+12*u+2;c=n[e.getUint16(l,!i)];!c&&a&&console.log("Unknown tag: "+e.getUint16(l,!i));o[c]=C(e,l,t,r,i)}return o}function C(e,t,a,r,n){var i=e.getUint16(t+2,!n),s=e.getUint32(t+4,!n),o=e.getUint32(t+8,!n)+a,l,c,u,d,p,m;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8,!n);l=s>4?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint8(l+d);return c;case 2:l=s>4?o:t+8;return w(e,l,s-1);case 3:if(1==s)return e.getUint16(t+8,!n);l=s>2?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint16(l+2*d,!n);return c;case 4:if(1==s)return e.getUint32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getUint32(o+4*d,!n);return c;case 5:if(1==s){p=e.getUint32(o,!n);m=e.getUint32(o+4,!n);u=new Number(p/m);u.numerator=p;u.denominator=m;return u}c=[];for(d=0;d<s;d++){p=e.getUint32(o+8*d,!n);m=e.getUint32(o+4+8*d,!n);c[d]=new Number(p/m);c[d].numerator=p;c[d].denominator=m}return c;case 9:if(1==s)return e.getInt32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+4*d,!n);return c;case 10:if(1==s)return e.getInt32(o,!n)/e.getInt32(o+4,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+8*d,!n)/e.getInt32(o+4+8*d,!n);return c}}function E(e,t,a){var r=e.getUint16(t,!a);return e.getUint32(t+2+12*r,!a)}function S(e,t,a,r){var n=E(e,t+a,r);if(!n)return{};if(n>e.byteLength)return{};var i=O(e,t,t+n,d,r);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var s=t+i.JpegIFOffset;var o=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,s,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function w(e,t,a){var r="";for(n=t;n<t+a;n++)r+=String.fromCharCode(e.getUint8(n));return r}function I(e,t){if("Exif"!=w(e,t,4)){a&&console.log("Not valid EXIF data! "+w(e,t,4));return false}var r,n,i,s,o,d=t+6;if(18761==e.getUint16(d))r=false;else{if(19789!=e.getUint16(d)){a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}r=true}if(42!=e.getUint16(d+2,!r)){a&&console.log("Not valid TIFF data! (no 0x002A)");return false}var m=e.getUint32(d+4,!r);if(m<8){a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!r));return false}n=O(e,d,d+m,c,r);if(n.ExifIFDPointer){s=O(e,d,d+n.ExifIFDPointer,l,r);for(i in s){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=p[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=p.Components[s[i][0]]+p.Components[s[i][1]]+p.Components[s[i][2]]+p.Components[s[i][3]];break}n[i]=s[i]}}if(n.GPSInfoIFDPointer){o=O(e,d,d+n.GPSInfoIFDPointer,u,r);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3];break}n[i]=o[i]}}n["thumbnail"]=S(e,d,m,r);return n}function j(e){if(!("DOMParser"in self))return;var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength,i=new DOMParser;while(r<n-4){if("http"==w(t,r,4)){var s=r-1;var o=t.getUint16(r-2)-1;var l=w(t,s,o);var c=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),c);var u=l.indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return A(d)}r++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var r=e.attributes.item(a);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);var s=i.nodeName;if(null==t[s])t[s]=T(i);else{if(null==t[s].push){var o=t[s];t[s]=[];t[s].push(o)}t[s].push(T(i))}}return t}function A(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var r=e.children.item(a);var n=r.attributes;for(var i in n){var s=n[i];var o=s.nodeName;var l=s.nodeValue;void 0!==o&&(t[o]=l)}var c=r.nodeName;if("undefined"==typeof t[c])t[c]=T(r);else{if("undefined"==typeof t[c].push){var u=t[c];t[c]=[];t[c].push(u)}t[c].push(T(r))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}o.enableXmp=function(){o.isXmpEnabled=true};o.disableXmp=function(){o.isXmpEnabled=false};o.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;h(e)?t&&t.call(e):b(e,t);return true};o.getTag=function(e,t){if(!h(e))return;return e.exifdata[t]};o.getIptcTag=function(e,t){if(!h(e))return;return e.iptcdata[t]};o.getAllTags=function(e){if(!h(e))return{};var t,a=e.exifdata,r={};for(t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r};o.getAllIptcTags=function(e){if(!h(e))return{};var t,a=e.iptcdata,r={};for(t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r};o.pretty=function(e){if(!h(e))return"";var t,a=e.exifdata,r="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?r+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":r+=t+" : ["+a[t].length+" values]\r\n":r+=t+" : "+a[t]+"\r\n");return r};o.readFromBinaryFile=function(e){return g(e)};true;!(r=[],i=function(){return o}.apply(t,r),void 0!==i&&(e.exports=i))}).call(this)},2403:function(e,t,a){var r=a(1904),n=r("join",a(3262));n.placeholder=a(1783);e.exports=n},2406:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(876);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a(85);var b=a(838);var g=[];var _=null;var y=null;function k(){if(y){y=null;document.body&&null!=_&&(document.body.style.pointerEvents=_);_=null}}function O(){k();g.forEach(function(e){return e.__resetIsScrolling()})}function C(){y&&Object(b["a"])(y);var e=0;g.forEach(function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)});y=Object(b["b"])(O,e)}function E(e){if(e.currentTarget===window&&null==_&&document.body){_=document.body.style.pointerEvents;document.body.style.pointerEvents="none"}C();g.forEach(function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()})}function S(e,t){g.some(function(e){return e.props.scrollElement===t})||t.addEventListener("scroll",E);g.push(e)}function w(e,t){g=g.filter(function(t){return t!==e});if(!g.length){t.removeEventListener("scroll",E);if(y){Object(b["a"])(y);k()}}}var I=function e(t){return t===window};var j=function e(t){return t.getBoundingClientRect()};function T(e,t){if(e){if(I(e)){var a=window,r=a.innerHeight,n=a.innerWidth;return{height:"number"===typeof r?r:0,width:"number"===typeof n?n:0}}return j(e)}return{height:t.serverHeight,width:t.serverWidth}}function A(e,t){if(I(t)&&document.documentElement){var a=document.documentElement;var r=j(e);var n=j(a);return{top:r.top-n.top,left:r.left-n.left}}var i=N(t);var s=j(e);var o=j(t);return{top:s.top+i.top-o.top,left:s.left+i.left-o.left}}function N(e){return I(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}var M=a(1629);var P=a(36);var R=150;var x=function e(){return"undefined"!==typeof window?window:void 0};var D=function(e){h()(t,e);function t(){var e;var a,r,i;l()(this,t);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=(a=(r=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r),r._window=x(),r._isMounted=false,r._positionFromTop=0,r._positionFromLeft=0,r.state=n()({},T(r.props.scrollElement,r.props),{isScrolling:false,scrollLeft:0,scrollTop:0}),r._registerChild=function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null");r._child=e;r.updatePosition()},r._onChildScroll=function(e){var t=e.scrollTop;if(r.state.scrollTop===t)return;var a=r.props.scrollElement;a&&("function"===typeof a.scrollTo?a.scrollTo(0,t+r._positionFromTop):a.scrollTop=t+r._positionFromTop)},r._registerResizeListener=function(e){e===window?window.addEventListener("resize",r._onResize,false):r._detectElementResize.addResizeListener(e,r._onResize)},r._unregisterResizeListener=function(e){e===window?window.removeEventListener("resize",r._onResize,false):e&&r._detectElementResize.removeResizeListener(e,r._onResize)},r._onResize=function(){r.updatePosition()},r.__handleWindowScrollEvent=function(){if(!r._isMounted)return;var e=r.props.onScroll;var t=r.props.scrollElement;if(t){var a=N(t);var n=Math.max(0,a.left-r._positionFromLeft);var i=Math.max(0,a.top-r._positionFromTop);r.setState({isScrolling:true,scrollLeft:n,scrollTop:i});e({scrollLeft:n,scrollTop:i})}},r.__resetIsScrolling=function(){r.setState({isScrolling:false})},a),p()(r,i)}u()(t,[{key:"updatePosition",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement;var a=this.props.onResize;var r=this.state,n=r.height,i=r.width;var s=this._child||f["findDOMNode"](this);if(s instanceof Element&&t){var o=A(s,t);this._positionFromTop=o.top;this._positionFromLeft=o.left}var l=T(t,this.props);if(n!==l.height||i!==l.width){this.setState({height:l.height,width:l.width});a({height:l.height,width:l.width})}}},{key:"componentDidMount",value:function e(){var t=this.props.scrollElement;this._detectElementResize=Object(M["a"])();this.updatePosition(t);if(t){S(this,t);this._registerResizeListener(t)}this._isMounted=true}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props.scrollElement;var n=t.scrollElement;if(n!==r&&null!=n&&null!=r){this.updatePosition(r);w(this,n);S(this,r);this._unregisterResizeListener(n);this._registerResizeListener(r)}}},{key:"componentWillUnmount",value:function e(){var t=this.props.scrollElement;if(t){w(this,t);this._unregisterResizeListener(t)}this._isMounted=false}},{key:"render",value:function e(){var t=this.props.children;var a=this.state,r=a.isScrolling,n=a.scrollTop,i=a.scrollLeft,s=a.height,o=a.width;return t({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:s,isScrolling:r,scrollLeft:i,scrollTop:n,width:o})}}]);return t}(v["PureComponent"]);D.defaultProps={onResize:function e(){},onScroll:function e(){},scrollingResetTimeInterval:R,scrollElement:x(),serverHeight:0,serverWidth:0};D.propTypes=null;var F=t["a"]=D},2420:function(e,t,a){"use strict";var r=a(6);var n=new r["b"]("files_types");t["a"]={applescript:{mimeType:"text/applescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("AppleScript"):""}},c:{mimeType:"text/x-csrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("C"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},cfm:{mimeType:"text/plain",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("ColdFusion"):""}},clojure:{mimeType:"text/x-clojure",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Clojure"):""},loader:function e(){return Promise.all([a.e(1),a.e(197)]).then(a.t.bind(null,4602,7))}},coffeescript:{mimeType:"text/x-coffeescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("CoffeeScript"):""},loader:function e(){return Promise.all([a.e(1),a.e(198)]).then(a.t.bind(null,4603,7))}},cpp:{mimeType:"text/x-c++src",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("C++"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},crystal:{mimeType:"text/x-crystal",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Crystal"):""},loader:function e(){return Promise.all([a.e(1),a.e(200)]).then(a.t.bind(null,4604,7))}},csharp:{mimeType:"text/x-csharp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("C#"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},css:{mimeType:"text/css",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("CSS"):""},loader:function e(){return Promise.all([a.e(1),a.e(3)]).then(a.t.bind(null,4600,7))}},cypher:{mimeType:"application/x-cypher-query",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Cypher"):""},loader:function e(){return Promise.all([a.e(1),a.e(201)]).then(a.t.bind(null,4605,7))}},csv:{mimeType:"text/csv",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("CSV"):""}},d:{mimeType:"text/x-d",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("D"):""},loader:function e(){return Promise.all([a.e(1),a.e(202)]).then(a.t.bind(null,4606,7))}},dart:{mimeType:"text/x-dart",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Dart"):""},loader:function e(){return Promise.all([a.e(1),a.e(4),a.e(203)]).then(a.t.bind(null,4607,7))}},diff:{mimeType:"text/x-diff",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Diff"):""},loader:function e(){return Promise.all([a.e(1),a.e(204)]).then(a.t.bind(null,4608,7))}},dockerfile:{mimeType:"text/x-dockerfile",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Docker"):""},loader:function e(){return Promise.all([a.e(1),a.e(205)]).then(a.t.bind(null,4609,7))}},erlang:{mimeType:"text/x-erlang",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Erlang"):""},loader:function e(){return Promise.all([a.e(1),a.e(206)]).then(a.t.bind(null,4610,7))}},fortran:{mimeType:"text/x-fortran",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Fortran"):""},loader:function e(){return Promise.all([a.e(1),a.e(207)]).then(a.t.bind(null,4611,7))}},fsharp:{mimeType:"text/x-fsharp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("F#"):""},loader:function e(){return Promise.all([a.e(1),a.e(219)]).then(a.t.bind(null,2511,7))}},gherkin:{mimeType:"text/x-feature",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Gherkin"):""},loader:function e(){return Promise.all([a.e(1),a.e(208)]).then(a.t.bind(null,4612,7))}},go:{mimeType:"text/x-go",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Go"):""},loader:function e(){return Promise.all([a.e(1),a.e(209)]).then(a.t.bind(null,4613,7))}},groovy:{mimeType:"text/x-groovy",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Groovy"):""},loader:function e(){return Promise.all([a.e(1),a.e(210)]).then(a.t.bind(null,4614,7))}},handlebars:{mimeType:"text/x-handlebars-template",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Handlebars"):""},loader:function e(){return Promise.all([a.e(1),a.e(211)]).then(a.t.bind(null,4615,7))}},haskell:{mimeType:"text/x-haskell",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Haskell"):""},loader:function e(){return Promise.all([a.e(1),a.e(212)]).then(a.t.bind(null,4616,7))}},haxe:{mimeType:"text/x-haxe",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Haxe"):""},loader:function e(){return Promise.all([a.e(1),a.e(213)]).then(a.t.bind(null,4617,7))}},html:{mimeType:"text/html",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("HTML"):""},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(214)]).then(a.t.bind(null,4601,7))}},java:{mimeType:"text/x-java",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Java"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},javascript:{mimeType:"text/javascript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("JavaScript/JSON"):""},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2102,7))}},jsx:{mimeType:"text/jsx",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("JSX"):""},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2512,7))}},julia:{mimeType:"text/x-julia",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Julia"):""},loader:function e(){return Promise.all([a.e(1),a.e(216)]).then(a.t.bind(null,4618,7))}},kotlin:{mimeType:"text/x-kotlin",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Kotlin"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},latex:{mimeType:"text/x-stex",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("LaTeX/sTeX"):""},loader:function e(){return Promise.all([a.e(1),a.e(235)]).then(a.t.bind(null,4619,7))}},lisp:{mimeType:"text/x-lisp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Lisp"):""},loader:function e(){return Promise.all([a.e(1),a.e(199)]).then(a.t.bind(null,4620,7))}},lua:{mimeType:"text/x-lua",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Lua"):""},loader:function e(){return Promise.all([a.e(1),a.e(217)]).then(a.t.bind(null,4621,7))}},markdown:{mimeType:"text/x-markdown",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Markdown (raw)"):""},loader:function e(){return Promise.all([a.e(1),a.e(462)]).then(a.t.bind(null,4622,7))}},mathematica:{mimeType:"text/x-mathematica",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Mathematica"):""},loader:function e(){return Promise.all([a.e(1),a.e(218)]).then(a.t.bind(null,4623,7))}},matlab:{mimeType:"text/x-octave",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("MATLAB"):""},loader:function e(){return Promise.all([a.e(1),a.e(221)]).then(a.t.bind(null,4624,7))}},mumps:{mimeType:"text/x-mumps",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("MUMPS"):""},loader:function e(){return Promise.all([a.e(1),a.e(220)]).then(a.t.bind(null,4625,7))}},objc:{mimeType:"text/x-objectivec",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Objective-C"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},ocaml:{mimeType:"text/x-ocaml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("OCaml"):""},loader:function e(){return Promise.all([a.e(1),a.e(219)]).then(a.t.bind(null,2511,7))}},pascal:{mimeType:"text/x-pascal",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Pascal"):""},loader:function e(){return Promise.all([a.e(1),a.e(222)]).then(a.t.bind(null,4626,7))}},perl:{mimeType:"text/x-perl",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Perl"):""},loader:function e(){return Promise.all([a.e(1),a.e(463)]).then(a.t.bind(null,4627,7))}},php:{mimeType:"application/x-httpd-php",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("PHP"):""},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(4),a.e(223)]).then(a.t.bind(null,4628,7))}},pig:{mimeType:"text/x-pig",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Pig"):""},loader:function e(){return Promise.all([a.e(1),a.e(224)]).then(a.t.bind(null,4629,7))}},powershell:{mimeType:"text/x-powershell",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("PowerShell"):""},loader:function e(){return Promise.all([a.e(1),a.e(225)]).then(a.t.bind(null,4630,7))}},puppet:{mimeType:"text/x-puppet",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Puppet"):""},loader:function e(){return Promise.all([a.e(1),a.e(226)]).then(a.t.bind(null,4631,7))}},python:{mimeType:"text/x-python",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Python"):""},loader:function e(){return Promise.all([a.e(1),a.e(227)]).then(a.t.bind(null,4632,7))}},r:{mimeType:"text/x-rsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("R"):""},loader:function e(){return Promise.all([a.e(1),a.e(228)]).then(a.t.bind(null,4633,7))}},ruby:{mimeType:"text/x-ruby",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Ruby"):""},loader:function e(){return Promise.all([a.e(1),a.e(229)]).then(a.t.bind(null,4634,7))}},rust:{mimeType:"text/x-rustsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Rust"):""},loader:function e(){return Promise.all([a.e(1),a.e(230)]).then(a.t.bind(null,4635,7))}},sass:{mimeType:"text/x-sass",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Sass"):""},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(231)]).then(a.t.bind(null,4636,7))}},scala:{mimeType:"text/x-scala",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Scala"):""},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},scheme:{mimeType:"text/x-scheme",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Scheme"):""},loader:function e(){return Promise.all([a.e(1),a.e(232)]).then(a.t.bind(null,4637,7))}},shell:{mimeType:"text/x-sh",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Shell"):""},loader:function e(){return Promise.all([a.e(1),a.e(233)]).then(a.t.bind(null,4638,7))}},smalltalk:{mimeType:"text/x-stsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Smalltalk"):""},loader:function e(){return Promise.all([a.e(1),a.e(234)]).then(a.t.bind(null,4639,7))}},sql:{mimeType:"text/x-sql",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("SQL"):""},loader:function e(){return Promise.all([a.e(1),a.e(464)]).then(a.t.bind(null,4640,7))}},swift:{mimeType:"text/x-swift",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Swift"):""},loader:function e(){return Promise.all([a.e(1),a.e(236)]).then(a.t.bind(null,4641,7))}},tsv:{mimeType:"text/tab-separated-values",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("TSV"):""}},typescript:{mimeType:"text/typescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("TypeScript"):""},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2102,7))}},tsx:{mimeType:"text/typescript-jsx",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("TSX"):""},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2512,7))}},vb:{mimeType:"text/x-vb",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("VB.NET"):""},loader:function e(){return Promise.all([a.e(1),a.e(237)]).then(a.t.bind(null,4642,7))}},vbscript:{mimeType:"text/vbscript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("VBScript"):""},loader:function e(){return Promise.all([a.e(1),a.e(238)]).then(a.t.bind(null,4643,7))}},velocity:{mimeType:"text/x-velocity",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Velocity"):""},loader:function e(){return Promise.all([a.e(1),a.e(239)]).then(a.t.bind(null,4644,7))}},verilog:{mimeType:"text/x-verilog",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("Verilog"):""},loader:function e(){return Promise.all([a.e(1),a.e(240)]).then(a.t.bind(null,4645,7))}},xml:{mimeType:"text/xml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("XML"):""},loader:function e(){return Promise.all([a.e(1),a.e(241)]).then(a.t.bind(null,4599,7))}},yaml:{mimeType:"text/x-yaml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSonicSnippets;return a?n.t("YAML"):""},loader:function e(){return Promise.all([a.e(1),a.e(242)]).then(a.t.bind(null,4646,7))}}}},2424:function(e,t,a){},2425:function(e,t,a){},2426:function(e,t,a){},2427:function(e,t,a){},2428:function(e,t,a){},2429:function(e,t,a){var r=a(1850),n=a(2430);var i=n?function(e,t){n.set(e,t);return e}:r;e.exports=i},2430:function(e,t,a){var r=a(2431);var n=r&&new r;e.exports=n},2431:function(e,t,a){var r=a(567),n=a(389);var i=r(n,"WeakMap");e.exports=i},2432:function(e,t,a){var r=a(2433),n=a(2434),i=a(3177),s=a(1905),o=a(2435),l=a(2442),c=a(3192),u=a(2319),d=a(389);var p=1,m=2,h=8,v=16,f=128,b=512;function g(e,t,a,_,y,k,O,C,E,S){var w=t&f,I=t&p,j=t&m,T=t&(h|v),A=t&b,N=j?void 0:s(e);function M(){var p=arguments.length,m=Array(p),h=p;while(h--)m[h]=arguments[h];if(T)var v=l(M),f=i(m,v);_&&(m=r(m,_,y,T));k&&(m=n(m,k,O,T));p-=f;if(T&&p<S){var b=u(m,v);return o(e,t,g,M.placeholder,a,m,b,C,E,S-p)}var P=I?a:this,R=j?P[e]:e;p=m.length;C?m=c(m,C):A&&p>1&&m.reverse();w&&E<p&&(m.length=E);this&&this!==d&&this instanceof M&&(R=N||s(R));return R.apply(P,m)}return M}e.exports=g},2433:function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=r.length,l=-1,c=t.length,u=a(s-o,0),d=Array(c+u),p=!n;while(++l<c)d[l]=t[l];while(++i<o)(p||i<s)&&(d[r[i]]=e[i]);while(u--)d[l++]=e[i++];return d}e.exports=r},2434:function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=-1,l=r.length,c=-1,u=t.length,d=a(s-l,0),p=Array(d+u),m=!n;while(++i<d)p[i]=e[i];var h=i;while(++c<u)p[h+c]=t[c];while(++o<l)(m||i<s)&&(p[h+r[o]]=e[i++]);return p}e.exports=r},2435:function(e,t,a){var r=a(2436),n=a(2438),i=a(2440);var s=1,o=2,l=4,c=8,u=32,d=64;function p(e,t,a,p,m,h,v,f,b,g){var _=t&c,y=_?v:void 0,k=_?void 0:v,O=_?h:void 0,C=_?void 0:h;t|=_?u:d;t&=~(_?d:u);t&l||(t&=~(s|o));var E=[e,t,m,O,y,C,k,f,b,g];var S=a.apply(void 0,E);r(e)&&n(S,E);S.placeholder=p;return i(S,e,t)}e.exports=p},2436:function(e,t,a){var r=a(2314),n=a(2316),i=a(2437),s=a(3180);function o(e){var t=i(e),a=s[t];if("function"!=typeof a||!(t in r.prototype))return false;if(e===a)return true;var o=n(a);return!!o&&e===o[0]}e.exports=o},2437:function(e,t,a){var r=a(3179);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=e.name+"",a=r[t],n=i.call(r,t)?a.length:0;while(n--){var s=a[n],o=s.func;if(null==o||o==e)return s.name}return t}e.exports=s},2438:function(e,t,a){var r=a(2429),n=a(2439);var i=n(r);e.exports=i},2439:function(e,t){var a=800,r=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=r-(s-i);i=s;if(o>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},2440:function(e,t,a){var r=a(3182),n=a(3183),i=a(2441),s=a(3186);function o(e,t,a){var o=t+"";return i(e,n(o,s(r(o),a)))}e.exports=o},2441:function(e,t,a){var r=a(3184),n=a(2439);var i=n(r);e.exports=i},2442:function(e,t){function a(e){var t=e;return t.placeholder}e.exports=a},2443:function(e,t,a){var r=a(1908),n=a(1714);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},2444:function(e,t,a){var r=a(2321),n=a(2318),i=a(2207),s=a(2443),o=a(3203),l=a(3206),c=a(1907),u=a(3207),d=a(3209),p=a(2448),m=a(3210),h=a(1785),v=a(3214),f=a(3215),b=a(3220),g=a(522),_=a(2208),y=a(3221),k=a(539),O=a(3223),C=a(1714);var E=1,S=2,w=4;var I="[object Arguments]",j="[object Array]",T="[object Boolean]",A="[object Date]",N="[object Error]",M="[object Function]",P="[object GeneratorFunction]",R="[object Map]",x="[object Number]",D="[object Object]",F="[object RegExp]",L="[object Set]",B="[object String]",U="[object Symbol]",q="[object WeakMap]";var W="[object ArrayBuffer]",H="[object DataView]",G="[object Float32Array]",V="[object Float64Array]",K="[object Int8Array]",z="[object Int16Array]",Q="[object Int32Array]",Y="[object Uint8Array]",J="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]";var $={};$[I]=$[j]=$[W]=$[H]=$[T]=$[A]=$[G]=$[V]=$[K]=$[z]=$[Q]=$[R]=$[x]=$[D]=$[F]=$[L]=$[B]=$[U]=$[Y]=$[J]=$[X]=$[Z]=true;$[N]=$[M]=$[q]=false;function ee(e,t,a,j,T,A){var N,R=t&E,x=t&S,F=t&w;a&&(N=T?a(e,j,T,A):a(e));if(void 0!==N)return N;if(!k(e))return e;var L=g(e);if(L){N=v(e);if(!R)return c(e,N)}else{var B=h(e),U=B==M||B==P;if(_(e))return l(e,R);if(B==D||B==I||U&&!T){N=x||U?{}:b(e);if(!R)return x?d(e,o(N,e)):u(e,s(N,e))}else{if(!$[B])return T?e:{};N=f(e,B,R)}}A||(A=new r);var q=A.get(e);if(q)return q;A.set(e,N);if(O(e)){e.forEach(function(r){N.add(ee(r,t,a,r,e,A))});return N}if(y(e)){e.forEach(function(r,n){N.set(n,ee(r,t,a,n,e,A))});return N}var W=F?x?m:p:x?keysIn:C;var H=L?void 0:W(e);n(H||e,function(r,n){if(H){n=r;r=e[n]}i(N,n,ee(r,t,a,n,e,A))});return N}e.exports=ee},2445:function(e,t,a){var r=a(2413),n=a(3204),i=a(1715);function s(e){return i(e)?r(e,true):n(e)}e.exports=s},2446:function(e,t){function a(){return[]}e.exports=a},2447:function(e,t,a){var r=a(2206),n=a(2323),i=a(2322),s=a(2446);var o=Object.getOwnPropertySymbols;var l=o?function(e){var t=[];while(e){r(t,i(e));e=n(e)}return t}:s;e.exports=l},2448:function(e,t,a){var r=a(2449),n=a(2322),i=a(1714);function s(e){return r(e,i,n)}e.exports=s},2449:function(e,t,a){var r=a(2206),n=a(522);function i(e,t,a){var i=t(e);return n(e)?i:r(i,a(e))}e.exports=i},2450:function(e,t,a){var r=a(389);var n=r.Uint8Array;e.exports=n},2451:function(e,t,a){var r=a(3230),n=a(3243),i=a(1850),s=a(522),o=a(3250);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):r(e);return o(e)}e.exports=l},2452:function(e,t,a){var r=a(3232),n=a(592);function i(e,t,a,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return r(e,t,a,s,i,o)}e.exports=i},2453:function(e,t,a){var r=a(3233),n=a(3236),i=a(3237);var s=1,o=2;function l(e,t,a,l,c,u){var d=a&s,p=e.length,m=t.length;if(p!=m&&!(d&&m>p))return false;var h=u.get(e);if(h&&u.get(t))return h==t;var v=-1,f=true,b=a&o?new r:void 0;u.set(e,t);u.set(t,e);while(++v<p){var g=e[v],_=t[v];if(l)var y=d?l(_,g,v,t,e,u):l(g,_,v,e,t,u);if(void 0!==y){if(y)continue;f=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||c(g,e,a,l,u)))return b.push(t)})){f=false;break}}else if(!(g===_||c(g,_,a,l,u))){f=false;break}}u["delete"](e);u["delete"](t);return f}e.exports=l},2454:function(e,t,a){var r=a(539);function n(e){return e===e&&!r(e)}e.exports=n},2455:function(e,t){function a(e,t){return function(a){if(null==a)return false;return a[e]===t&&(void 0!==t||e in Object(a))}}e.exports=a},2456:function(e,t,a){var r=a(2457),n=a(1786);function i(e,t){t=r(t,e);var a=0,i=t.length;while(null!=e&&a<i)e=e[n(t[a++])];return a&&a==i?e:void 0}e.exports=i},2457:function(e,t,a){var r=a(522),n=a(2325),i=a(2458),s=a(2459);function o(e,t){if(r(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},2458:function(e,t,a){var r=a(3245);var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var i=/\\(\\)?/g;var s=r(function(e){var t=[];46===e.charCodeAt(0)&&t.push("");e.replace(n,function(e,a,r,n){t.push(r?n.replace(i,"$1"):a||e)});return t});e.exports=s},2459:function(e,t,a){var r=a(3246);function n(e){return null==e?"":r(e)}e.exports=n},2460:function(e,t,a){var r=a(1717),n=a(3254),i=a(2441);function s(e){return i(n(e,void 0,r),e+"")}e.exports=s},2461:function(e,t,a){},2469:function(e,t,a){},2470:function(e,t,a){},2472:function(e,t,a){},2473:function(e,t,a){},2474:function(e,t,a){},2475:function(e,t,a){},2476:function(e,t,a){},2477:function(e,t,a){},2478:function(e,t,a){},2479:function(e,t,a){},2480:function(e,t,a){},2481:function(e,t,a){},2482:function(e,t,a){},2483:function(e,t,a){},2484:function(e,t,a){},2485:function(e,t,a){},2498:function(e,t,a){var r=a(1904),n=r("flow",a(3256));n.placeholder=a(1783);e.exports=n},2499:function(e,t,a){var r=a(1904),n=r("map",a(3258));n.placeholder=a(1783);e.exports=n},2500:function(e,t,a){var r=a(1904),n=r("slice",a(3263));n.placeholder=a(1783);e.exports=n},3077:function(e,t,a){},3079:function(e,t,a){},3087:function(e,t,a){},3089:function(e,t,a){},3091:function(e,t,a){},3093:function(e,t,a){},3095:function(e,t,a){},3098:function(e,t,a){},3101:function(e,t,a){},3103:function(e,t,a){},3105:function(e,t,a){var r={"./actions.js":3106,"./activity-session.js":4576,"./add-app-to-channel.js":3107,"./add-ephemeral-feedback.js":3108,"./all-unreads.js":3109,"./api-unauthed.js":3110,"./api.js":4539,"./app-actions.js":3111,"./apps.js":4705,"./automount.js":3112,"./bots.js":3113,"./calls.js":3114,"./channels.js":3115,"./connectivity.js":3116,"./console.js":3117,"./constants.js":3118,"./emoji.js":3119,"./emojiComponent.js":3120,"./enterprise/enterprise-analytics-util.js":4529,"./enterprise/mount-channels-admin-settings.jsx":4829,"./enterprise/mount-create-workspace-modal.jsx":4519,"./enterprise/mount-dashboard-analytics-apps.jsx":3125,"./enterprise/mount-dashboard-app-management.jsx":4486,"./enterprise/mount-dashboard-audit-logs.jsx":4481,"./enterprise/mount-dashboard-billing-overview.jsx":4528,"./enterprise/mount-dashboard-data-location.jsx":3739,"./enterprise/mount-dashboard-ekm-status.jsx":4518,"./enterprise/mount-dashboard-nav.jsx":4492,"./enterprise/mount-dashboard-security-preferences.jsx":4527,"./enterprise/mount-dashboard-shared-channels.jsx":4494,"./enterprise/mount-dashboard-sso-preferences.jsx":4543,"./enterprise/mount-dashboard-team-apps.jsx":4513,"./enterprise/mount-dashboard-team-overview.jsx":4504,"./enterprise/mount-migration-table.jsx":4488,"./enterprise/mount-move-channels-custom-message.jsx":4546,"./enterprise/mount-org-wide-settings-pane.jsx":4783,"./enterprise/mount-terms-of-service.jsx":4583,"./enterprise/mount-workspace-directory.jsx":4575,"./eventlog.js":3307,"./experiments-unauthed.js":4476,"./experiments.js":3308,"./flannel.js":3309,"./fuzzy-matcher.js":3310,"./greetings-earth.js":4568,"./history-navigation.js":3311,"./infra/app-subdomain-check.js":4567,"./infra/beacon-api-call.js":3312,"./infra/boot/index.js":4556,"./infra/connectivity.js":3313,"./infra/debug.js":3314,"./infra/failover-proxy-check.js":4565,"./infra/register-global-error-handler.js":3315,"./infra/rtm.js":3316,"./infra/run-cdn-download-test.js":4564,"./infra/socket-manager.js":3317,"./infra/telemeter.js":4554,"./infra/token-to-team-id.js":3318,"./infra/upload-queue.js":3319,"./lazy-filter-select.jsx":3320,"./member-counts.js":3321,"./members.js":4563,"./membership.js":3322,"./message-input-registry.js":3323,"./message-pane-input.js":3324,"./message-pane.js":4534,"./messages.js":3325,"./metrics-responsiveness.js":3326,"./mount-admin-invite-settings.js":4533,"./mount-admin-invites-table.js":4531,"./mount-app-profile-flexpane.js":4499,"./mount-app-space.js":4495,"./mount-apps-browser.js":4949,"./mount-browser-incoming-call.js":4505,"./mount-channel-create-modal.js":4580,"./mount-channel-options-dialog.js":4550,"./mount-channel-sidebar.js":1192,"./mount-connected-workspaces.js":3646,"./mount-custom-status-input.js":4570,"./mount-dnd-preferences.js":4551,"./mount-document-title.js":4523,"./mount-download-access-logs-button.js":4541,"./mount-download-blocked-toast.js":3649,"./mount-downloads-view.js":4515,"./mount-emoji-picker.js":4595,"./mount-favicon.js":4516,"./mount-file-upload-banner.js":4578,"./mount-files-flexpane.js":4493,"./mount-global-nav.js":4477,"./mount-help-modal.js":4589,"./mount-image-viewer.js":4590,"./mount-invite-modal.js":4593,"./mount-keyboard-shortcuts.js":4819,"./mount-lazy-filter-select.js":4596,"./mount-member-directory-flexpane.js":4509,"./mount-menu.js":4558,"./mount-message-actions-menu.js":4559,"./mount-message-pane-banner.js":4560,"./mount-message-pane-drag-overlay.js":4561,"./mount-message-pane-input.js":1885,"./mount-message-pane.js":4475,"./mount-migration-blocker.js":4535,"./mount-modal-container.js":4569,"./mount-new-file-menu.js":4571,"./mount-notification-bar.js":4572,"./mount-oauth-confirm.jsx":4832,"./mount-org-retention-request.js":4498,"./mount-pages.js":4526,"./mount-pricing-calculator.js":4577,"./mount-profile-flexpane.js":4540,"./mount-scrollbar.js":4581,"./mount-service-import-mapping-form.js":4512,"./mount-starred-items-flexpane.js":4727,"./mount-team-creator-onboarding-dialog.js":3775,"./mount-thread-drag-overlay.js":4582,"./mount-threads-flexpane.js":4753,"./mount-threads-view.js":4484,"./mount-toast.js":3796,"./mount-tooltip-tip.js":4585,"./mount-user-calendar-flexpane.jsx":4542,"./mount-user-groups-flexpane.js":4587,"./mount-user-groups-list.js":4588,"./mount_team_blurb.js":4545,"./mpims.js":3811,"./onboarding.js":4524,"./open-app-management-modal.js":3812,"./open-apps-browser-modal.js":3813,"./open-invite-member-to-channel-dialog.js":3814,"./pages.js":3815,"./prefs.js":4591,"./presence-manager.js":3816,"./pricing_plans_modal.js":4592,"./reactions.js":3817,"./redux.js":4772,"./remove-app-from-channel.js":3838,"./rules.js":3839,"./rules/files.js":3840,"./rules/notifications.js":3841,"./search.js":4548,"./searcher.js":4562,"./self-team-ids.js":3842,"./send-message.js":3843,"./set-app-element-for-react-modal.js":3844,"./slash-command.js":3845,"./sonic-calls-supported-clients.js":3846,"./stars.js":3847,"./teams.js":3848,"./texty.js":3849,"./topics.js":3850,"./typing.js":3851,"./user-groups.js":3852,"./utility/a11y.js":4584,"./utility/broadcast-keywords.js":3853,"./utility/client-action-token.js":3854,"./utility/clipboard.js":3855,"./utility/clog-types.js":3856,"./utility/clog.js":3857,"./utility/currency.js":3858,"./utility/date-time.js":3859,"./utility/desktop.js":4553,"./utility/environment.js":3860,"./utility/format.js":4597,"./utility/i18n.js":3861,"./utility/search/autocomplete-suggestions.js":3862,"./utility/search/autocomplete.js":3863,"./utility/search/conversions.js":3864,"./utility/threads.js":3865,"./utility/url.js":3866,"./utility/utility.js":4948,"./utility/versions.js":3867,"./welcome-place.js":3868,"./workspace.js":3869,"./zendesk-widget.js":3870};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}return r[e]}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3105},3106:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(442);var i=a(924);var s=a(548);var o=a(1969);var l=a(97);var c=a(2213);var u=a(1059);var d=a(1418);var p=a(1460);var m=a(1436);var h=a(2081);var v=a(890);var f=a(1027);Object(r["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["d"],markLastRead:i["b"],markDelayedWithAPI:i["a"],openDmBrowserModal:u["a"],openChannelCreateModal:d["a"],requestOfflineHistory:s["a"],requestOfflineCounts:o["a"],toggleKeyboardShortcuts:l["r"],showKeyboardShortcuts:l["h"],slackJsPathCommand:c["default"],filterFilesForUpload:p["a"],launchWorkflowBuilder:m["a"],openSMSDownloadAppDialog:h["a"],rebuildExternalTeamChannels:v["a"],setUnsentInvites:f["setUnsentInvites"]})},3107:function(e,t,a){"use strict";a.r(t);var r=a(1287);var n=a(46);Object(n["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},3108:function(e,t,a){"use strict";a.r(t);var r=a(335);var n=a(46);Object(n["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(r["b"])(e))})},3109:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(2050);Object(r["a"])("interop.allUnreads",{getMessageForLocale:n["a"]})},3110:function(e,t,a){"use strict";a.r(t);var r=a(1599);var n=a(46);Object(n["a"])("interop.api_unauthed",{callSlackApiUnauthed:r["a"]})},3111:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(809);Object(r["a"])("interop.appActions",{selectGlobalActions:function e(){return Object(n["b"])(TS.redux.getState())},selectGlobalActionsCache:function e(){return Object(n["c"])(TS.redux.getState())}})},3112:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(355);Object(r["a"])("interop.automount.mountAllWithStore",n["b"])},3113:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(457);var s=a(46);var o=a(221);Object(s["a"])("interop.bots",n()({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(o["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},3114:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(649);var i=a(840);Object(r["a"])("interop.calls",{startOrJoinCall:n["e"],handleCallInvite:i["d"],handleCallInviteResponse:i["f"],handleCallInviteCancel:i["e"]})},3115:function(e,t,a){"use strict";a.r(t);var r=a(205);var n=a(122);var i=a(21);var s=a(214);var o=a(519);var l=a(22);var c=a(1974);var u=a(1157);var d=a(99);var p=a(11);var m=a(46);var h=a(756);var v=a(194);function f(e,t){var a=TS.redux.getState();var r=Object(i["e"])(a,e,t);return TS.redux.channels.interop.maybeWrapEntity(r)}function b(e,t){if(!e)return null;var a=f(e,t);if(a&&a.is_channel)return a;return null}function g(e,t){if(!e)return null;var a=f(e,t);if(a&&a.is_group&&!a.is_mpim)return a;return null}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(a&&a.is_group&&a.is_mpim)return a;return null}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(Object(p["isIm"])(a))return a;return null}function k(){return TS.redux.dispatch(Object(n["getGeneralChannel"])())}function O(e,t){return TS.redux.dispatch(Object(s["a"])({channel:e,isBulkUpsert:t}))}function C(e){return TS.redux.dispatch(Object(d["f"])(e))}function E(e){return TS.redux.dispatch(Object(d["i"])(e))}function S(e){return TS.redux.dispatch(Object(d["h"])(e))}function w(e){return TS.redux.dispatch(Object(d["g"])(e))}function I(e){var t=TS.redux.getState();return Object(i["v"])(t,e)}function j(e,t){return TS.redux.dispatch(Object(d["G"])({channelId:e,topic:t}))}function T(e){var t=TS.redux.getState();var a=Object(l["b"])(t);Object(o["c"])(a,e)}function A(e){var t=TS.redux.getState();var a=Object(l["b"])(t);return Object(o["b"])(a,e)}function N(){return v["b"].pauseRefetch()}function M(e,t){return TS.redux.dispatch(Object(c["a"])({channel:e,user:t}))}function P(){return TS.redux.dispatch(n["markMostRecentMsgRead"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(n["setChannelTopic"].apply(void 0,arguments))}function x(e){return Object(i["q"])(TS.redux.getState(),e)}function D(){return Object(i["r"])(TS.redux.getState())}function F(){return Object(i["b"])(TS.redux.getState())}function L(){return TS.redux.dispatch(n["addChannel"].apply(void 0,arguments))}function B(){return TS.redux.dispatch(n["setChannelPurpose"].apply(void 0,arguments))}function U(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["p"].apply(void 0,[TS.redux.getState()].concat(t))}function q(){return TS.redux.dispatch(r["d"].apply(void 0,arguments))}function W(){return TS.redux.dispatch(n["bulkAddChannels"].apply(void 0,arguments))}function H(){return TS.redux.dispatch(n["updateOneKeyForChannel"].apply(void 0,arguments))}function G(){return Object(i["t"])(TS.redux.getState())}function V(){return TS.redux.dispatch(Object(n["clearAllShowInListEvenThoughUnreadsFlags"])())}function K(){return TS.redux.dispatch(n["bulkUpdateChannels"].apply(void 0,arguments))}function z(){return Object(i["o"])(TS.redux.getState())}function Q(){return Object(i["m"])(TS.redux.getState())}function Y(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["f"].apply(void 0,[TS.redux.getState()].concat(t))}function J(){return TS.redux.dispatch(n["leaveChannel"].apply(void 0,arguments))}function X(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["l"].apply(void 0,[TS.redux.getState()].concat(t))}Object(m["a"])("interop.channels",{disconnectChannel:d["e"],getPublicChannelById:b,getEntityById:f,getGeneralChannel:k,getGroupById:g,getImById:y,getMpimById:_,getNeedsCreatedMessageState:function e(t){return Object(u["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(p["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationBetweenMembers:Object(m["b"])(d["v"]),submitChannelPurpose:d["F"],submitChannelTopic:j,createChannel:n["createChannel"],declineSharedChannelInvite:function e(){return TS.redux.dispatch(d["d"].apply(void 0,arguments))},submitLeave:d["O"],isMemberOfChannel:p["isMemberOfChannel"],joinConversationApi:n["joinConversationApi"],startImByMemberId:n["startImByMemberId"],closeChannelApi:n["closeChannelApi"],updateOrgAccessForChannelApi:n["updateOrgAccessForChannelApi"],updateOrgAccessForChannel:n["updateOrgAccessForChannel"],upsertChannel:O,getChannelPinnedItemByMessage:p["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:p["channelTopicExceedsLimit"],getChannelTopicError:p["getChannelTopicError"],getChannelPurposeError:p["getChannelPurposeError"],updateChannelLastTrigger:h["updateChannelLastTrigger"],getPendingAndConnectedTeamIds:p["getPendingAndConnectedTeamIds"],getInternalTeamIds:p["getInternalTeamIds"],fetchAndUpsertChannelsById:C,fetchAndUpsertChannelsWithQuery:E,fetchAndUpsertChannelsFromAPI:w,fetchAndUpsertChannelsFromFlannel:S,hasChannelWithId:I,markObjectsAsFresh:T,pauseRefetch:N,isObjectFresh:A,shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return p["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(a))},setConversationOpen:M,getUnarchivedPublicAndPrivateChannelsUserIsIn:function e(){return Object(i["u"])(TS.redux.getState())},markMostRecentMsgRead:P,setChannelTopic:R,getPublicChannels:x,getPublicChannelsUserIsIn:D,getAllChannels:F,addChannel:L,getChannelById:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return i["e"].apply(void 0,[TS.redux.getState()].concat(a))},setChannelPurpose:B,getPrivateChannels:U,removeChannels:q,bulkAddChannels:W,updateOneKeyForChannel:H,getUnarchivedPublicAndPrivateChannels:G,clearAllShowInListEvenThoughUnreadsFlags:V,bulkUpdateChannels:K,getMpims:z,getIms:Q,getChannelByName:Y,leaveChannel:J,getImIdByMemberId:X})},3116:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(488);var i=a(137);function s(){return Object(i["d"])(TS.redux.getState())}function o(){return Object(i["b"])(TS.redux.getState())}Object(r["a"])("interop.connectivity",{isOnline:s,getMaximumSocketWait:o,waitForNetworkConnection:n["e"],setClientOnline:function e(){return TS.redux.dispatch(n["a"].apply(void 0,arguments))}})},3117:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(80);Object(r["a"])("interop.console",n)},3118:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(46);var s=a(20);Object(i["a"])("interop.constants",n()({},s))},3119:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(208);Object(r["a"])("interop.emoji",{isValidEmojiText:function e(t){return Object(n["isValidEmojiText"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},isEmojiNameSkinToneModifiable:function e(t){return Object(n["isEmojiNameSkinToneModifiable"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getCanonicalEmojiName:function e(t){return Object(n["getCanonicalEmojiName"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getEmojiUrl:function e(t){var a=t.text,r=t.emojiSize,i=t.emojiMode;return Object(n["getEmojiUrl"])(TS.redux.getState(),{teamId:TS.model.team.id,text:a,emojiMode:i,emojiSize:r})},getEmojiFrecencyIdFromName:n["getEmojiFrecencyIdFromName"],test:n["test"]})},3120:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(102);Object(r["a"])("interop.emojiComponent",{EmojiSizes:n["a"],mapStateToProps:function e(t){return Object(n["c"])(TS.redux.getState(),t)}})},3121:function(e,t,a){},3123:function(e,t,a){},3125:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);Object(c["a"])("interop.enterpriseAnalyticsAppsTab",{render:function e(t,a){if(!t)throw new Error("enterpriseAnalyticsAppsTab render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement("div",null,"APPS!")),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},3126:function(e,t,a){},3130:function(e,t,a){},3133:function(e,t,a){},3135:function(e,t,a){},3137:function(e,t,a){},3141:function(e,t,a){},3143:function(e,t,a){},3145:function(e,t,a){},3147:function(e,t,a){},3149:function(e,t,a){},3151:function(e,t,a){},3153:function(e,t,a){},3155:function(e,t,a){},3157:function(e,t,a){},3159:function(e,t,a){},3161:function(e,t,a){},3163:function(e,t,a){},3169:function(e,t,a){},3171:function(e,t,a){var r=a(3172),n=a(1783);var i=Array.prototype.push;function s(e,t){return 2==t?function(t,a){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,a){return e(t,a)}:function(t){return e(t)}}function l(e){var t=e?e.length:0,a=Array(t);while(t--)a[t]=e[t];return a}function c(e){return function(t){return e({},t)}}function u(e,t){return function(){var a=arguments.length,r=a-1,n=Array(a);while(a--)n[a]=arguments[a];var s=n[t],o=n.slice(0,t);s&&i.apply(o,s);t!=r&&i.apply(o,n.slice(t+1));return e.apply(this,o)}}function d(e,t){return function(){var a=arguments.length;if(!a)return;var r=Array(a);while(a--)r[a]=arguments[a];var n=r[0]=t.apply(void 0,r);e.apply(void 0,r);return n}}function p(e,t,a,i){var m="function"==typeof t,h=t===Object(t);if(h){i=a;a=t;t=void 0}if(null==a)throw new TypeError;i||(i={});var v={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg};var f=m?a:n,b="curry"in i&&i.curry,g="fixed"in i&&i.fixed,_="rearg"in i&&i.rearg,y=m?a.runInContext():void 0;var k=m?a:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath};var O=k.ary,C=k.assign,E=k.clone,S=k.curry,w=k.forEach,I=k.isArray,j=k.isError,T=k.isFunction,A=k.isWeakMap,N=k.keys,M=k.rearg,P=k.toInteger,R=k.toPath;var x=N(r.aryMethod);var D={castArray:function(e){return function(){var t=arguments[0];return I(t)?e(l(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],a=arguments[1],r=e(t,a),n=r.length;if(v.cap&&"number"==typeof a){a=a>2?a-2:1;return n&&n<=a?r:o(r,a)}return r}},mixin:function(e){return function(t){var a=this;if(!T(a))return e(a,Object(t));var r=[];w(N(t),function(e){T(t[e])&&r.push([e,a.prototype[e]])});e(a,Object(t));w(r,function(e){var t=e[1];T(t)?a.prototype[e[0]]=t:delete a.prototype[e[0]]});return a}},nthArg:function(e){return function(t){var a=t<0?1:P(t)+1;return S(e(t),a)}},rearg:function(e){return function(t,a){var r=a?a.length:0;return S(e(t,a),r)}},runInContext:function(t){return function(a){return p(e,t(a),i)}}};function F(e,t){if(v.cap){var a=r.iterateeRearg[e];if(a)return V(t,a);var n=!m&&r.iterateeAry[e];if(n)return G(t,n)}return t}function L(e,t,a){return b||v.curry&&a>1?S(t,a):t}function B(e,t,a){if(v.fixed&&(g||!r.skipFixed[e])){var n=r.methodSpread[e],i=n&&n.start;return void 0===i?O(t,a):u(t,i)}return t}function U(e,t,a){return v.rearg&&a>1&&(_||!r.skipRearg[e])?M(t,r.methodRearg[e]||r.aryRearg[a]):t}function q(e,t){t=R(t);var a=-1,r=t.length,n=r-1,i=E(Object(e)),s=i;while(null!=s&&++a<r){var o=t[a],l=s[o];null==l||T(l)||j(l)||A(l)||(s[o]=E(a==n?l:Object(l)));s=s[o]}return i}function W(e){return Q.runInContext.convert(e)(void 0)}function H(e,t){var a=r.aliasToReal[e]||e,n=r.remap[a]||a,s=i;return function(e){var r=m?y:k,i=m?y[n]:t,o=C(C({},s),e);return p(r,a,i,o)}}function G(e,t){return K(e,function(e){return"function"==typeof e?o(e,t):e})}function V(e,t){return K(e,function(e){var a=t.length;return s(M(o(e,a),t),a)})}function K(e,t){return function(){var a=arguments.length;if(!a)return e();var r=Array(a);while(a--)r[a]=arguments[a];var n=v.rearg?0:a-1;r[n]=t(r[n]);return e.apply(void 0,r)}}function z(e,t,a){var n,i=r.aliasToReal[e]||e,s=t,o=D[i];o?s=o(t):v.immutable&&(r.mutate.array[i]?s=d(t,l):r.mutate.object[i]?s=d(t,c(t)):r.mutate.set[i]&&(s=d(t,q)));w(x,function(e){w(r.aryMethod[e],function(t){if(i==t){var a=r.methodSpread[i],o=a&&a.afterRearg;n=o?B(i,U(i,s,e),e):U(i,B(i,s,e),e);n=F(i,n);n=L(i,n,e);return false}});return!n});n||(n=s);n==t&&(n=b?S(n,1):function(){return t.apply(this,arguments)});n.convert=H(i,t);n.placeholder=t.placeholder=a;return n}if(!h)return z(t,a,f);var Q=a;var Y=[];w(x,function(e){w(r.aryMethod[e],function(e){var t=Q[r.remap[e]||e];t&&Y.push([e,z(e,t,Q)])})});w(N(Q),function(e){var t=Q[e];if("function"==typeof t){var a=Y.length;while(a--)if(Y[a][0]==e)return;t.convert=H(e,t);Y.push([e,t])}});w(Y,function(e){Q[e[0]]=e[1]});Q.convert=W;Q.placeholder=Q;w(N(Q),function(e){w(r.realToAlias[e]||[],function(t){Q[t]=Q[e]})});return Q}e.exports=p},3172:function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"};t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]};t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]};t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2};t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]};t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]};t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}};t.mutate={array:{fill:true,pull:true,pullAll:true,pullAllBy:true,pullAllWith:true,pullAt:true,remove:true,reverse:true},object:{assign:true,assignAll:true,assignAllWith:true,assignIn:true,assignInAll:true,assignInAllWith:true,assignInWith:true,assignWith:true,defaults:true,defaultsAll:true,defaultsDeep:true,defaultsDeepAll:true,merge:true,mergeAll:true,mergeAllWith:true,mergeWith:true},set:{set:true,setWith:true,unset:true,update:true,updateWith:true}};t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,a=t.aliasToReal,r={};for(var n in a){var i=a[n];e.call(r,i)?r[i].push(n):r[i]=[n]}return r}();t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"};t.skipFixed={castArray:true,flow:true,flowRight:true,iteratee:true,mixin:true,rearg:true,runInContext:true};t.skipRearg={add:true,assign:true,assignIn:true,bind:true,bindKey:true,concat:true,difference:true,divide:true,eq:true,gt:true,gte:true,isEqual:true,lt:true,lte:true,matchesProperty:true,merge:true,multiply:true,overArgs:true,partial:true,partialRight:true,propertyOf:true,random:true,range:true,rangeRight:true,subtract:true,zip:true,zipObject:true,zipObjectDeep:true}},3173:function(e,t,a){e.exports={ary:a(3174),assign:a(2443),clone:a(3197),curry:a(3225),forEach:a(2318),isArray:a(522),isError:a(3226),isFunction:a(930),isWeakMap:a(3228),iteratee:a(3229),keys:a(2415),rearg:a(3253),toInteger:a(2320),toPath:a(3255)}},3174:function(e,t,a){var r=a(2312);var n=128;function i(e,t,a){t=a?void 0:t;t=e&&null==t?e.length:t;return r(e,n,void 0,void 0,void 0,void 0,t)}e.exports=i},3175:function(e,t,a){var r=a(1905),n=a(389);var i=1;function s(e,t,a){var s=t&i,o=r(e);function l(){var t=this&&this!==n&&this instanceof l?o:e;return t.apply(s?a:this,arguments)}return l}e.exports=s},3176:function(e,t,a){var r=a(2313),n=a(1905),i=a(2432),s=a(2435),o=a(2442),l=a(2319),c=a(389);function u(e,t,a){var u=n(e);function d(){var n=arguments.length,p=Array(n),m=n,h=o(d);while(m--)p[m]=arguments[m];var v=n<3&&p[0]!==h&&p[n-1]!==h?[]:l(p,h);n-=v.length;if(n<a)return s(e,t,i,d.placeholder,void 0,p,v,void 0,void 0,a-n);var f=this&&this!==c&&this instanceof d?u:e;return r(f,this,p)}return d}e.exports=u},3177:function(e,t){function a(e,t){var a=e.length,r=0;while(a--)e[a]===t&&++r;return r}e.exports=a},3178:function(e,t){function a(){}e.exports=a},3179:function(e,t){var a={};e.exports=a},3180:function(e,t,a){var r=a(2314),n=a(2317),i=a(2315),s=a(522),o=a(592),l=a(3181);var c=Object.prototype;var u=c.hasOwnProperty;function d(e){if(o(e)&&!s(e)&&!(e instanceof r)){if(e instanceof n)return e;if(u.call(e,"__wrapped__"))return l(e)}return new n(e)}d.prototype=i.prototype;d.prototype.constructor=d;e.exports=d},3181:function(e,t,a){var r=a(2314),n=a(2317),i=a(1907);function s(e){if(e instanceof r)return e.clone();var t=new n(e.__wrapped__,e.__chain__);t.__actions__=i(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}e.exports=s},3182:function(e,t){var a=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;function n(e){var t=e.match(a);return t?t[1].split(r):[]}e.exports=n},3183:function(e,t){var a=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function r(e,t){var r=t.length;if(!r)return e;var n=r-1;t[n]=(r>1?"& ":"")+t[n];t=t.join(r>2?", ":" ");return e.replace(a,"{\n/* [wrapped with "+t+"] */\n")}e.exports=r},3184:function(e,t,a){var r=a(3185),n=a(2411),i=a(1850);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:r(t),writable:true})}:i;e.exports=s},3185:function(e,t){function a(e){return function(){return e}}e.exports=a},3186:function(e,t,a){var r=a(2318),n=a(3187);var i=1,s=2,o=8,l=16,c=32,u=64,d=128,p=256,m=512;var h=[["ary",d],["bind",i],["bindKey",s],["curry",o],["curryRight",l],["flip",m],["partial",c],["partialRight",u],["rearg",p]];function v(e,t){r(h,function(a){var r="_."+a[0];t&a[1]&&!n(e,r)&&e.push(r)});return e.sort()}e.exports=v},3187:function(e,t,a){var r=a(3188);function n(e,t){var a=null==e?0:e.length;return!!a&&r(e,t,0)>-1}e.exports=n},3188:function(e,t,a){var r=a(3189),n=a(3190),i=a(3191);function s(e,t,a){return t===t?i(e,t,a):r(e,n,a)}e.exports=s},3189:function(e,t){function a(e,t,a,r){var n=e.length,i=a+(r?1:-1);while(r?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=a},3190:function(e,t){function a(e){return e!==e}e.exports=a},3191:function(e,t){function a(e,t,a){var r=a-1,n=e.length;while(++r<n)if(e[r]===t)return r;return-1}e.exports=a},3192:function(e,t,a){var r=a(1907),n=a(1849);var i=Math.min;function s(e,t){var a=e.length,s=i(t.length,a),o=r(e);while(s--){var l=t[s];e[s]=n(l,a)?o[l]:void 0}return e}e.exports=s},3193:function(e,t,a){var r=a(2313),n=a(1905),i=a(389);var s=1;function o(e,t,a,o){var l=t&s,c=n(e);function u(){var t=-1,n=arguments.length,s=-1,d=o.length,p=Array(d+n),m=this&&this!==i&&this instanceof u?c:e;while(++s<d)p[s]=o[s];while(n--)p[s++]=arguments[++t];return r(m,l?a:this,p)}return u}e.exports=o},3194:function(e,t,a){var r=a(2433),n=a(2434),i=a(2319);var s="__lodash_placeholder__";var o=1,l=2,c=4,u=8,d=128,p=256;var m=Math.min;function h(e,t){var a=e[1],h=t[1],v=a|h,f=v<(o|l|d);var b=h==d&&a==u||h==d&&a==p&&e[7].length<=t[8]||h==(d|p)&&t[7].length<=t[8]&&a==u;if(!(f||b))return e;if(h&o){e[2]=t[2];v|=a&o?0:c}var g=t[3];if(g){var _=e[3];e[3]=_?r(_,g,t[4]):g;e[4]=_?i(e[3],s):t[4]}g=t[5];if(g){_=e[5];e[5]=_?n(_,g,t[6]):g;e[6]=_?i(e[5],s):t[6]}g=t[7];g&&(e[7]=g);h&d&&(e[8]=null==e[8]?t[8]:m(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=v;return e}e.exports=h},3195:function(e,t,a){var r=a(3196);var n=1/0,i=1.7976931348623157e308;function s(e){if(!e)return 0===e?e:0;e=r(e);if(e===n||e===-n){var t=e<0?-1:1;return t*i}return e===e?e:0}e.exports=s},3196:function(e,t,a){var r=a(539),n=a(1784);var i=NaN;var s=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var l=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var u=parseInt;function d(e){if("number"==typeof e)return e;if(n(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var a=l.test(e);return a||c.test(e)?u(e.slice(2),a?2:8):o.test(e)?i:+e}e.exports=d},3197:function(e,t,a){var r=a(2444);var n=4;function i(e){return r(e,n)}e.exports=i},3198:function(e,t,a){var r=a(903);function n(){this.__data__=new r;this.size=0}e.exports=n},3199:function(e,t){function a(e){var t=this.__data__,a=t["delete"](e);this.size=t.size;return a}e.exports=a},3200:function(e,t){function a(e){return this.__data__.get(e)}e.exports=a},3201:function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},3202:function(e,t,a){var r=a(903),n=a(1023),i=a(1022);var s=200;function o(e,t){var a=this.__data__;if(a instanceof r){var o=a.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++a.size;return this}a=this.__data__=new i(o)}a.set(e,t);this.size=a.size;return this}e.exports=o},3203:function(e,t,a){var r=a(1908),n=a(2445);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},3204:function(e,t,a){var r=a(539),n=a(2211),i=a(3205);var s=Object.prototype;var o=s.hasOwnProperty;function l(e){if(!r(e))return i(e);var t=n(e),a=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||a.push(s);return a}e.exports=l},3205:function(e,t){function a(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}e.exports=a},3206:function(e,t,a){(function(e){var r=a(389);var n=(true,t)&&!t.nodeType&&t;var i=n&&"object"==typeof e&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var a=e.length,r=l?l(a):new e.constructor(a);e.copy(r);return r}e.exports=c}).call(this,a(281)(e))},3207:function(e,t,a){var r=a(1908),n=a(2322);function i(e,t){return r(e,n(e),t)}e.exports=i},3208:function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=0,i=[];while(++a<r){var s=e[a];t(s,a,e)&&(i[n++]=s)}return i}e.exports=a},3209:function(e,t,a){var r=a(1908),n=a(2447);function i(e,t){return r(e,n(e),t)}e.exports=i},3210:function(e,t,a){var r=a(2449),n=a(2447),i=a(2445);function s(e){return r(e,i,n)}e.exports=s},3211:function(e,t,a){var r=a(567),n=a(389);var i=r(n,"DataView");e.exports=i},3212:function(e,t,a){var r=a(567),n=a(389);var i=r(n,"Promise");e.exports=i},3213:function(e,t,a){var r=a(567),n=a(389);var i=r(n,"Set");e.exports=i},3214:function(e,t){var a=Object.prototype;var r=a.hasOwnProperty;function n(e){var t=e.length,a=new e.constructor(t);if(t&&"string"==typeof e[0]&&r.call(e,"index")){a.index=e.index;a.input=e.input}return a}e.exports=n},3215:function(e,t,a){var r=a(2324),n=a(3216),i=a(3217),s=a(3218),o=a(3219);var l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",h="[object String]",v="[object Symbol]";var f="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",C="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function I(e,t,a){var I=e.constructor;switch(t){case f:return r(e);case l:case c:return new I(+e);case b:return n(e,a);case g:case _:case y:case k:case O:case C:case E:case S:case w:return o(e,a);case u:return new I;case d:case h:return new I(e);case p:return i(e);case m:return new I;case v:return s(e)}}e.exports=I},3216:function(e,t,a){var r=a(2324);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}e.exports=n},3217:function(e,t){var a=/\w*$/;function r(e){var t=new e.constructor(e.source,a.exec(e));t.lastIndex=e.lastIndex;return t}e.exports=r},3218:function(e,t,a){var r=a(593);var n=r?r.prototype:void 0,i=n?n.valueOf:void 0;function s(e){return i?Object(i.call(e)):{}}e.exports=s},3219:function(e,t,a){var r=a(2324);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}e.exports=n},3220:function(e,t,a){var r=a(1906),n=a(2323),i=a(2211);function s(e){return"function"!=typeof e.constructor||i(e)?{}:r(n(e))}e.exports=s},3221:function(e,t,a){var r=a(3222),n=a(2209),i=a(2210);var s=i&&i.isMap;var o=s?n(s):r;e.exports=o},3222:function(e,t,a){var r=a(1785),n=a(592);var i="[object Map]";function s(e){return n(e)&&r(e)==i}e.exports=s},3223:function(e,t,a){var r=a(3224),n=a(2209),i=a(2210);var s=i&&i.isSet;var o=s?n(s):r;e.exports=o},3224:function(e,t,a){var r=a(1785),n=a(592);var i="[object Set]";function s(e){return n(e)&&r(e)==i}e.exports=s},3225:function(e,t,a){var r=a(2312);var n=8;function i(e,t,a){t=a?void 0:t;var s=r(e,n,void 0,void 0,void 0,void 0,void 0,t);s.placeholder=i.placeholder;return s}i.placeholder={};e.exports=i},3226:function(e,t,a){var r=a(553),n=a(592),i=a(3227);var s="[object DOMException]",o="[object Error]";function l(e){if(!n(e))return false;var t=r(e);return t==o||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}e.exports=l},3227:function(e,t,a){var r=a(553),n=a(2323),i=a(592);var s="[object Object]";var o=Function.prototype,l=Object.prototype;var c=o.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||r(e)!=s)return false;var t=n(e);if(null===t)return true;var a=u.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==d}e.exports=p},3228:function(e,t,a){var r=a(1785),n=a(592);var i="[object WeakMap]";function s(e){return n(e)&&r(e)==i}e.exports=s},3229:function(e,t,a){var r=a(2444),n=a(2451);var i=1;function s(e){return n("function"==typeof e?e:r(e,i))}e.exports=s},3230:function(e,t,a){var r=a(3231),n=a(3242),i=a(2455);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(a){return a===e||r(a,e,t)}}e.exports=s},3231:function(e,t,a){var r=a(2321),n=a(2452);var i=1,s=2;function o(e,t,a,o){var l=a.length,c=l,u=!o;if(null==e)return!c;e=Object(e);while(l--){var d=a[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=a[l];var p=d[0],m=e[p],h=d[1];if(u&&d[2]){if(void 0===m&&!(p in e))return false}else{var v=new r;if(o)var f=o(m,h,p,e,t,v);if(!(void 0===f?n(h,m,i|s,o,v):f))return false}}return true}e.exports=o},3232:function(e,t,a){var r=a(2321),n=a(2453),i=a(3238),s=a(3241),o=a(1785),l=a(522),c=a(2208),u=a(2414);var d=1;var p="[object Arguments]",m="[object Array]",h="[object Object]";var v=Object.prototype;var f=v.hasOwnProperty;function b(e,t,a,v,b,g){var _=l(e),y=l(t),k=_?m:o(e),O=y?m:o(t);k=k==p?h:k;O=O==p?h:O;var C=k==h,E=O==h,S=k==O;if(S&&c(e)){if(!c(t))return false;_=true;C=false}if(S&&!C){g||(g=new r);return _||u(e)?n(e,t,a,v,b,g):i(e,t,k,a,v,b,g)}if(!(a&d)){var w=C&&f.call(e,"__wrapped__"),I=E&&f.call(t,"__wrapped__");if(w||I){var j=w?e.value():e,T=I?t.value():t;g||(g=new r);return b(j,T,a,v,g)}}if(!S)return false;g||(g=new r);return s(e,t,a,v,b,g)}e.exports=b},3233:function(e,t,a){var r=a(1022),n=a(3234),i=a(3235);function s(e){var t=-1,a=null==e?0:e.length;this.__data__=new r;while(++t<a)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},3234:function(e,t){var a="__lodash_hash_undefined__";function r(e){this.__data__.set(e,a);return this}e.exports=r},3235:function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},3236:function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(t(e[a],a,e))return true;return false}e.exports=a},3237:function(e,t){function a(e,t){return e.has(t)}e.exports=a},3238:function(e,t,a){var r=a(593),n=a(2450),i=a(901),s=a(2453),o=a(3239),l=a(3240);var c=1,u=2;var d="[object Boolean]",p="[object Date]",m="[object Error]",h="[object Map]",v="[object Number]",f="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",k="[object DataView]";var O=r?r.prototype:void 0,C=O?O.valueOf:void 0;function E(e,t,a,r,O,E,S){switch(a){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!E(new n(e),new n(t)))return false;return true;case d:case p:case v:return i(+e,+t);case m:return e.name==t.name&&e.message==t.message;case f:case g:return e==t+"";case h:var w=o;case b:var I=r&c;w||(w=l);if(e.size!=t.size&&!I)return false;var j=S.get(e);if(j)return j==t;r|=u;S.set(e,t);var T=s(w(e),w(t),r,O,E,S);S["delete"](e);return T;case _:if(C)return C.call(e)==C.call(t)}return false}e.exports=E},3239:function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e,r){a[++t]=[r,e]});return a}e.exports=a},3240:function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e){a[++t]=e});return a}e.exports=a},3241:function(e,t,a){var r=a(2448);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,a,i,o,l){var c=a&n,u=r(e),d=u.length,p=r(t),m=p.length;if(d!=m&&!c)return false;var h=d;while(h--){var v=u[h];if(!(c?v in t:s.call(t,v)))return false}var f=l.get(e);if(f&&l.get(t))return f==t;var b=true;l.set(e,t);l.set(t,e);var g=c;while(++h<d){v=u[h];var _=e[v],y=t[v];if(i)var k=c?i(y,_,v,t,e,l):i(_,y,v,e,t,l);if(!(void 0===k?_===y||o(_,y,a,i,l):k)){b=false;break}g||(g="constructor"==v)}if(b&&!g){var O=e.constructor,C=t.constructor;O!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof O&&O instanceof O&&"function"==typeof C&&C instanceof C)&&(b=false)}l["delete"](e);l["delete"](t);return b}e.exports=o},3242:function(e,t,a){var r=a(2454),n=a(1714);function i(e){var t=n(e),a=t.length;while(a--){var i=t[a],s=e[i];t[a]=[i,s,r(s)]}return t}e.exports=i},3243:function(e,t,a){var r=a(2452),n=a(3244),i=a(3247),s=a(2325),o=a(2454),l=a(2455),c=a(1786);var u=1,d=2;function p(e,t){if(s(e)&&o(t))return l(c(e),t);return function(a){var s=n(a,e);return void 0===s&&s===t?i(a,e):r(t,s,u|d)}}e.exports=p},3244:function(e,t,a){var r=a(2456);function n(e,t,a){var n=null==e?void 0:r(e,t);return void 0===n?a:n}e.exports=n},3245:function(e,t,a){var r=a(776);var n=500;function i(e){var t=r(e,function(e){a.size===n&&a.clear();return e});var a=t.cache;return t}e.exports=i},3246:function(e,t,a){var r=a(593),n=a(2326),i=a(522),s=a(1784);var o=1/0;var l=r?r.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},3247:function(e,t,a){var r=a(3248),n=a(3249);function i(e,t){return null!=e&&n(e,t,r)}e.exports=i},3248:function(e,t){function a(e,t){return null!=e&&t in Object(e)}e.exports=a},3249:function(e,t,a){var r=a(2457),n=a(2103),i=a(522),s=a(1849),o=a(2104),l=a(1786);function c(e,t,a){t=r(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&a(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(p,u)&&(i(e)||n(e))}e.exports=c},3250:function(e,t,a){var r=a(3251),n=a(3252),i=a(2325),s=a(1786);function o(e){return i(e)?r(s(e)):n(e)}e.exports=o},3251:function(e,t){function a(e){return function(t){return null==t?void 0:t[e]}}e.exports=a},3252:function(e,t,a){var r=a(2456);function n(e){return function(t){return r(t,e)}}e.exports=n},3253:function(e,t,a){var r=a(2312),n=a(2460);var i=256;var s=n(function(e,t){return r(e,i,void 0,void 0,void 0,t)});e.exports=s},3254:function(e,t,a){var r=a(2313);var n=Math.max;function i(e,t,a){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),l=Array(o);while(++s<o)l[s]=i[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=i[s];c[t]=a(l);return r(e,this,c)}}e.exports=i},3255:function(e,t,a){var r=a(2326),n=a(1907),i=a(522),s=a(1784),o=a(2458),l=a(1786),c=a(2459);function u(e){if(i(e))return r(e,l);return s(e)?[e]:n(o(c(e)))}e.exports=u},3256:function(e,t,a){var r=a(3257);var n=r();e.exports=n},3257:function(e,t,a){var r=a(2317),n=a(2460),i=a(2316),s=a(2437),o=a(522),l=a(2436);var c="Expected a function";var u=8,d=32,p=128,m=256;function h(e){return n(function(t){var a=t.length,n=a,h=r.prototype.thru;e&&t.reverse();while(n--){var v=t[n];if("function"!=typeof v)throw new TypeError(c);if(h&&!f&&"wrapper"==s(v))var f=new r([],true)}n=f?n:a;while(++n<a){v=t[n];var b=s(v),g="wrapper"==b?i(v):void 0;f=g&&l(g[0])&&g[1]==(p|u|d|m)&&!g[4].length&&1==g[9]?f[s(g[0])].apply(f,g[3]):1==v.length&&l(v)?f[b]():f.thru(v)}return function(){var e=arguments,r=e[0];if(f&&1==e.length&&o(r))return f.plant(r).value();var n=0,i=a?t[n].apply(this,e):r;while(++n<a)i=t[n].call(this,i);return i}})}e.exports=h},3258:function(e,t,a){var r=a(2326),n=a(2451),i=a(3259),s=a(522);function o(e,t){var a=s(e)?r:i;return a(e,n(t,3))}e.exports=o},3259:function(e,t,a){var r=a(3260),n=a(1715);function i(e,t){var a=-1,i=n(e)?Array(e.length):[];r(e,function(e,r,n){i[++a]=t(e,r,n)});return i}e.exports=i},3260:function(e,t,a){var r=a(2412),n=a(3261);var i=n(r);e.exports=i},3261:function(e,t,a){var r=a(1715);function n(e,t){return function(a,n){if(null==a)return a;if(!r(a))return e(a,n);var i=a.length,s=t?i:-1,o=Object(a);while(t?s--:++s<i)if(false===n(o[s],s,o))break;return a}}e.exports=n},3262:function(e,t){var a=Array.prototype;var r=a.join;function n(e,t){return null==e?"":r.call(e,t)}e.exports=n},3263:function(e,t,a){var r=a(3264),n=a(3265),i=a(2320);function s(e,t,a){var s=null==e?0:e.length;if(!s)return[];if(a&&"number"!=typeof a&&n(e,t,a)){t=0;a=s}else{t=null==t?0:i(t);a=void 0===a?s:i(a)}return r(e,t,a)}e.exports=s},3264:function(e,t){function a(e,t,a){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t);a=a>n?n:a;a<0&&(a+=n);n=t>a?0:a-t>>>0;t>>>=0;var i=Array(n);while(++r<n)i[r]=e[r+t];return i}e.exports=a},3265:function(e,t,a){var r=a(901),n=a(1715),i=a(1849),s=a(539);function o(e,t,a){if(!s(a))return false;var o=typeof t;if("number"==o?n(a)&&i(t,a.length):"string"==o&&t in a)return r(a[t],e);return false}e.exports=o},3266:function(e,t,a){},3268:function(e,t,a){},3270:function(e,t,a){},3272:function(e,t,a){},3274:function(e,t,a){},3276:function(e,t,a){},3278:function(e,t,a){},3280:function(e,t,a){},3282:function(e,t,a){},3284:function(e,t,a){},3286:function(e,t,a){},3290:function(e,t,a){},3292:function(e,t,a){},3294:function(e,t,a){},3298:function(e,t,a){},3300:function(e,t,a){},3302:function(e,t,a){},3304:function(e,t,a){},3307:function(e,t,a){"use strict";a.r(t);var r=a(1322);var n=a(46);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:r["a"],getInstanceForTeam:r["b"]})},3308:function(e,t,a){"use strict";a.r(t);var r=a(94);var n=a(46);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(r["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(r["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},3309:function(e,t,a){"use strict";a.r(t);var r=a(9);var n=a(174);var i=a(1201);var s=a(46);var o=a(447);Object(s["a"])("interop.Flannel",{query:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["g"])({method:t,args:a,attemptNumber:r}))},call:function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return TS.redux.dispatch(Object(i["a"])({method:t,args:a,reason:r,EXPEDITED:n}))},fetchRawMembersWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["f"])({query:t,limit:a}))},fetchRawChannelsWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["d"])({query:t,limit:a}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(o["e"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(o["c"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["f"])(TS.redux.getState())},useSocket:function e(){return Object(r["shouldUseSocket"])(TS.redux.getState())},getFlannelConnectionUrl:n["e"],METHODS:n["c"],COMMANDS:n["a"],MAX_RETRY_COUNT:n["b"]})},3310:function(e,t,a){"use strict";a.r(t);var r=a(881);var n=a(46);Object(n["a"])("interop.FuzzyMatcher",r["b"])},3311:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1406);var i=a(816);Object(r["a"])("interop.history",{triggerNavigateBack:n["a"],triggerNavigateForward:n["b"],isHistoryNavigationEnabled:i["a"]})},3312:function(e,t,a){"use strict";a.r(t);var r=a(1880);var n=a(46);Object(n["a"])("interop.beaconApiCall",r["a"])},3313:function(e,t,a){"use strict";a.r(t);var r=a(862);var n=a(46);Object(n["a"])("interop.BandwidthChecker",r["a"])},3314:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(57);Object(r["a"])("interop.debug",n)},3315:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1816);Object(r["a"])("interop.registerGlobalErrorHandler",function(){return Object(n["a"])()})},3316:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(93);Object(r["a"])("interop.rtm",{debugGetHandlers:n["c"],debugGetPendingMessages:function e(){return Object(n["d"])(TS.boot_data.team_id)}})},3317:function(e,t,a){"use strict";a.r(t);var r=a(301);var n=a(1976);var i=a(46);function s(e){if(!r[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=r[e].apply(r,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:s("clearFastReconnectUrl"),debugGetInstance:s("debugGetInstance"),debugGetState:s("debugGetState"),debugResetRateLimit:s("debugResetRateLimit"),debugSetFastReconnectsEnabled:s("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:s("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:s("debugSetSocketSendFlakiness"),debugTriggerError:s("debugTriggerError"),disconnect:s("disconnect"),finalizeProvisionalConnection:s("finalizeProvisionalConnection"),reconnectImmediately:s("reconnectImmediately"),send:s("send"),sleep:s("sleep"),start:s("start"),wake:s("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(n["a"])())}})},3318:function(e,t,a){"use strict";a.r(t);var r=a(783);var n=a(46);Object(n["a"])("interop.setTeamIdForToken",r["c"])},3319:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(922);Object(r["a"])("interop.uploadQueue",{getInstance:function e(){return Object(n["a"])(TS.boot_data.team_id)}})},3320:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(6);var l=a(46);var c=a(1899);var u=a(1898);var d=a(1639);var p=a(1640);function m(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_foreground_max"},a)});return a}function h(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_foreground_max"},a)});return a}function v(e){var t=new o["b"]("team_picker");var a=void 0;a=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return a}function f(e){return n.a.createElement(c["a"],{item:e})}f.displayName="teamPickerListItem";function b(e){return n.a.createElement(u["a"],{item:e})}b.displayName="teamPickerToken";function g(e){return n.a.createElement(d["a"],{item:e})}g.displayName="memberListItem";function _(e){return n.a.createElement(p["a"],{item:e})}_.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:m,channelBrowserSortByToken:h,teamPickerNoResults:v,teamPickerListItem:f,teamPickerToken:b,memberListItem:g,memberListToken:_})},3321:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1381);var i=a(317);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(r["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["a"])())}})},3322:function(e,t,a){"use strict";a.r(t);var r=a(283);var n=a(46);var i=a(1207);function s(e){return function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return e.apply(void 0,[TS.redux.getState()].concat(a))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(r["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=r["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(a));return o(i)}})},3323:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(210);Object(r["a"])("interop.message_input_registry",{getInputProxy:n["a"]})},3324:function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(46);var s=a(210);var o=a(20);Object(i["a"])("interop.message_pane_input",{focus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focus()},focusWithoutSettingCursor:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focusWithoutSettingCursor()},hasFocus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.hasFocus()},isEnabled:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.isEnabled()},value:function e(t,a){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!n)return"";if(!Object(r["isUndefined"])(a)){n.setText(a);return""}return n.getText(a)},displayValue:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getDisplayValue():""},setPlaceholder:function e(t,a){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!r)return;r.setPlaceholder(a)},insertContentsAtCursor:function e(t,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";var i=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});i&&i.insertContentsAtCursor(a,r,n)},getSelection:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getSelection():""},setCursor:function e(t,a,r){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});n&&n.setCursor(a,r)}})},3325:function(e,t,a){"use strict";a.r(t);var r=a(527);var n=a(9);var i=a(343);var s=a(22);var o=a(384);var l=a(167);var c=a(73);var u=a(1419);var d=a(42);var p=a(1265);var m=a(815);var h=a(46);Object(h["a"])("interop.messages",{addMessages:function e(){return TS.redux.dispatch(l["a"].apply(void 0,arguments))},getMessageByTimestamp:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["a"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByChannelId:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["b"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByProps:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["c"].apply(void 0,[TS.redux.getState()].concat(a))},computeRollups:u["a"],getExpandableKey:r["a"],canCountAsUnreadForCurrentUser:d["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:[t],channelId:a}))[0]},preprocessImsgs:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:t,channelId:a}))},containsMention:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(d["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["a"])(TS.redux.getState()),Object(s["b"])(TS.redux.getState()),{ignoreAtHereMentions:a,ignoreHighlightWords:r,ignoreAtEveryoneMentions:o,ignoreAtChannelMentions:l})},isReply:d["isReply"],canEditMessage:function e(t,a,r,n){return Object(d["canEditMessage"])(TS.redux.getState(),t,a,r,n)},shouldRenderFileThread:function e(t){return Object(d["shouldRenderFileThread"])(t,{featureFileThreads:true,featureFileThreadsDarkLaunch:true})},shouldIgnoreHighlightWords:d["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(d["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:d["atEveryoneRegExp"],atChannelRegExp:d["atChannelRegExp"],atGroupRegExp:d["atGroupRegExp"],atHereRegExp:d["atHereRegExp"],getClogUIStepFromContext:d["getClogUIStepFromContext"],canChannelHaveAtChannelMentions:p["a"],markObjectsAsFresh:m["b"]})},3326:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1216);Object(r["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},3327:function(e,t,a){},3329:function(e,t,a){},3331:function(e,t,a){},3333:function(e,t,a){},3335:function(e,t,a){},3337:function(e,t,a){},3339:function(e,t,a){},3341:function(e,t,a){},3343:function(e,t,a){},3345:function(e,t,a){},3398:function(e,t,a){},3400:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(4789);var o=a(17);var l=a(144);var c=a(2);var u=a(12);var d=a(6);var p=a(162);var m=a(44);var h=new d["b"]("drafts");var v={dispatch:i["b"].func,featureComposeFlow:i["b"].bool,undo:i["b"].func};var f={dispatch:c["noop"],featureComposeFlow:false,undo:c["noop"]};function b(e){var t=e.dispatch,a=e.featureComposeFlow,r=e.undo;if(!a)return null;return n.a.createElement(p["b"],null,h.t("The draft has been deleted."),"\xa0",n.a.createElement(m["a"],{onClick:function e(){r();t(Object(l["dismissCurrentToast"])())}},h.t("Undo")))}b.displayName="DeleteDraftToast";b.defaultProps=f;function g(e){return{featureComposeFlow:Object(s["d"])(e)}}var _=Object(u["connect"])(g)(b);var y=a(110);var k=a.n(y);var O=a(2024);var C=a(4500);var E=Object(o["b"])("Restore a deleted channel draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.draft;if(!r||Object(c["isEmpty"])(i))return;var s=Object(C["c"])(r,n);if(s){s.setContents({contents:i.ops});i.range&&s.setCursor(i.range.index,i.range.length)}e(Object(O["c"])({channelId:r,threadTs:n,delta:new k.a(i.ops),broadcast:i.broadcast,range:i.range}))});E.meta={name:"undoDeletedChannelDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedChannelDraft",description:"Restore a deleted channel draft"};E.propTypes={channelId:i["b"].string.isRequired,draft:i["b"].object.isRequired,threadTs:i["b"].string};var S=Object(o["b"])("Restore a deleted composer draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draft;if(Object(c["isEmpty"])(r))return;e(Object(O["d"])(r))});S.meta={name:"undoDeletedComposerDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedComposerDraft",description:"Restore a deleted composer draft"};S.propTypes={draft:i["b"].object.isRequired};var w=a(811);a.d(t,"a",function(){return j});a.d(t,"b",function(){return T});var I=Object(o["b"])("Open a toast with an option to restore a deleted draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.undo;e(Object(l["enqueueToast"])({element:n.a.createElement(_,{undo:r})}))});I.meta={name:"openDeleteToast",key:"draftsStoreThunksDeleteDraftWithUndoOpenDeleteToast",description:"Open a toast with an option to restore a deleted draft"};I.propTypes={featureComposeFlow:i["b"].bool,undo:i["b"].func};var j=Object(o["b"])("Clear a channel draft with the option to undo",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs;var i=t();var s=Object(w["b"])(i,{channelId:r,threadTs:n});if(!s)return;e(Object(O["b"])({channelId:r,threadTs:n}));var o=Object(C["c"])(r,n);o&&o.clear();e(I({undo:function t(){return e(E({channelId:r,threadTs:n,draft:s}))}}))});j.meta={name:"deleteChannelDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteChannelDraftWithUndo",description:"Clear a channel draft with the option to undo"};j.propTypes={channelId:i["b"].string.isRequired,threadTs:i["b"].string};var T=Object(o["b"])("Clear a composer draft with the option to undo",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId;var n=t();var i=Object(w["d"])(n,r);if(!i)return;e(Object(O["a"])({ids:[r]}));(Object(s["a"])(i)||Object(s["b"])(i))&&e(I({undo:function t(){return e(S({draft:i}))}}))});T.meta={name:"deleteComposerDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteComposerDraftWithUndo",description:"Clear a composer draft with the option to undo"};T.propTypes={draftId:i["b"].string.isRequired}},3401:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(2);var g=a(4647);var _=a(782);var y=a(1460);var k=a(17);var O=a(41);var C=a(1983);var E={fileId:d["b"].string.isRequired,channelId:d["b"].string.isRequired,threadTs:d["b"].string,initialFileTitle:d["b"].string,renamePendingFile:d["b"].func.isRequired};var S={threadTs:void 0,initialFileTitle:void 0};var w=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleRename=a.handleRename.bind(a);return a}s()(t,[{key:"handleRename",value:function e(t){var a=this.props,r=a.fileId,n=a.channelId,i=a.threadTs;this.props.renamePendingFile({channelId:n,threadTs:i,fileId:r,title:Object(b["trim"])(t)})}},{key:"render",value:function e(){var t=this.props.initialFileTitle;return m.a.createElement(C["a"],{initialFileTitle:t,handleRename:this.handleRename})}}]);return t}(p["PureComponent"]);w.displayName="RenamePendingFileDialog";w.defaultProps=S;var I={renamePendingFile:function e(){return _["renamePendingFile"].apply(void 0,arguments)}};var j=Object(h["connect"])(null,I)(w);var T=a(62);var A=Object(k["b"])("Opens the rename file dialog",function(e,t,a){e(Object(O["openModal"])({element:m.a.createElement(j,a),isStackable:true}))});A.meta={name:"openRenamePendingFileDialog",key:"actionsOpenRenamePendingFileDialogOpenRenamePendingFileDialog",description:"Opens the rename file dialog"};A.propTypes={file:T["a"].File().isRequired,channelId:d["b"].string.isRequired,threadTs:d["b"].string};var N=A;var M=a(77);var P=a(6);var R=a(20);var x=a(3);var D=a.n(x);var F=a(33);var L=a(853);var B=a(23);var U={arrowDirection:d["b"].oneOf(["left","right"]).isRequired,isShowing:d["b"].bool,onClick:d["b"].func};var q={isShowing:true,onClick:b["noop"]};var W=function e(t){var a=t.arrowDirection,r=t.onClick,n=t.isShowing;var i=f()("p-gallery_scroller__arrow","p-gallery_scroller__"+a+"_arrow",{"p-gallery_scroller__arrow_hidden":!n});return m.a.createElement("div",{className:i},m.a.createElement(B["b"],{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),m.a.createElement(B["b"],{type:"arrow-large-"+a,className:"p-gallery_scroller__arrow_icon",onClick:function e(t){return r(t,a)}}))};W.displayName="GalleryScrollerArrow";W.defaultProps=q;var H=W;var G=a(3719);var V={children:d["b"].node.isRequired,width:d["b"].number.isRequired,pageSize:d["b"].number};var K={pageSize:100};var z={right:"right",left:"left"};var Q=160;var Y=50;var J=50;var X=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onArrowClick=a.onArrowClick.bind(a);a.onScroll=Object(b["throttle"])(a.onScroll,Y).bind(a);a.onContentMutation=a.onContentMutation.bind(a);a.setWrapperRef=a.setWrapperRef.bind(a);a.setContentRef=a.setContentRef.bind(a);a.wrapper=void 0;a.content=void 0;a.mutationObserver=new MutationObserver(a.onContentMutation);a.state={scrollLeft:0,scrollWidth:void 0};return a}s()(t,[{key:"componentDidMount",value:function e(){this.content&&this.mutationObserver.observe(this.content,{childList:true,subtree:true})}},{key:"componentWillUnmount",value:function e(){this.mutationObserver.disconnect()}},{key:"onArrowClick",value:function e(t,a){t.preventDefault();var r=this.props.pageSize;var n=this.state.scrollLeft;var i=a===z.right;var s=i?r:-r;var o=n+s;var l=this.getMinScroll();var c=this.getMaxScroll();var u=Object(b["clamp"])(o,l,c);c-u<J?u=c:u-l<J&&(u=l);this.scrollWithAnimation(u)}},{key:"onScroll",value:function e(t){if(!t)return;var a=t.scrollLeft;this.setState(function(){return{scrollLeft:a}})}},{key:"onContentMutation",value:function e(){var t=this.state.scrollWidth;var a=this.content&&this.content.scrollWidth;t!==a&&this.setState(function(e){return D()({},e,{scrollWidth:a})})}},{key:"getMinScroll",value:function e(){return 0}},{key:"getMaxScroll",value:function e(){if(!this.content)return 0;var t=this.props.width;var a=this.state.scrollWidth;return a-t}},{key:"setWrapperRef",value:function e(t){if(!t)return;this.wrapper=t;var a=this.wrapper.scrollLeft;this.setState(function(e){return D()({},e,{scrollLeft:a})})}},{key:"setContentRef",value:function e(t){if(!t)return;this.content=t;var a=this.content.scrollWidth;this.setState(function(e){return D()({},e,{scrollWidth:a})})}},{key:"shouldShowArrow",value:function e(t){var a=t.arrowDirection;var r=this.props.width;var n=this.state,i=n.scrollLeft,s=n.scrollWidth;var o=this.getMinScroll();var l=this.getMaxScroll();if(a===z.right){var c=i<l;var u=s>r;return c&&u}return i>o}},{key:"scrollWithAnimation",value:function e(t){var a=this;var r=0;var n=function e(t){var n=t.value,i=t.nextTick;var s=a.wrapper.scrollLeft+n+r;var o=Math.round(s);r=s-o;a.wrapper.scrollLeft=o;i()};this.trackAnimation&&this.trackAnimation.cancel();this.trackAnimation=Object(L["a"])({fromValue:this.wrapper.scrollLeft,toValue:t,duration:Q,delta:true,onTick:n})}},{key:"renderArrow",value:function e(t){var a=t.arrowDirection;var r=this.shouldShowArrow({arrowDirection:a});return m.a.createElement(H,{arrowDirection:a,onClick:this.onArrowClick,isShowing:r})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.width,n=a.children;var i=f()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(F["isChrome"])()});return m.a.createElement("div",{className:"p-gallery_scroller",style:{width:r}},m.a.createElement("div",{className:i,ref:this.setWrapperRef,onScroll:function e(a){return t.onScroll(a&&a.target)}},m.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},n)),this.renderArrow({arrowDirection:z.left}),this.renderArrow({arrowDirection:z.right}))}}]);return t}(p["Component"]);X.displayName="GalleryScroller";X.defaultProps=K;var Z=X;var $=Z;var ee=a(1682);var te=a(27);var ae=a(1065);var re=a(1067);var ne=a(1704);var ie=a(3723);var se=new P["b"]("multi_file_upload");var oe={file:d["b"].object.isRequired,isCompact:d["b"].bool,className:d["b"].string,onEditFile:d["b"].func};var le={isCompact:false,className:null,onEditFile:null};var ce=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderEditFileButton",value:function e(){var t=this.props.onEditFile;if(!t)return null;return m.a.createElement(te["c"],{className:"p-pending_file__edit_btn","aria-label":se.t("Edit file title"),onClick:t},se.t("Edit"))}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.className,n=t.isCompact;var i=f()("p-pending_file",r,{"p-pending_file--compact":n});var s=n?m.a.createElement(ne["a"],{file:a,isCompact:true}):m.a.createElement(re["a"],{file:a,showThumbnail:false},this.renderEditFileButton());return m.a.createElement(ae["a"],{file:a,className:i,showActions:false},s)}}]);return t}(p["PureComponent"]);ce.displayName="PendingFile";ce.defaultProps=le;var ue=ce;var de=a(1982);var pe=a(420);var me=a(2467);var he=new P["b"]("multi_file_upload");var ve={fileId:d["b"].string,channelId:d["b"].string,threadTs:d["b"].string,title:d["b"].string,closeModal:d["b"].func,openRenamePendingFileDialog:d["b"].func};var fe={fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:b["noop"],openRenamePendingFileDialog:b["noop"]};var be=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.closeModal=a.closeModal.bind(a);a.renameFile=a.renameFile.bind(a);return a}s()(t,[{key:"closeModal",value:function e(){this.props.closeModal()}},{key:"renameFile",value:function e(){var t=this.props,a=t.fileId,r=t.channelId,n=t.threadTs,i=t.title;this.props.openRenamePendingFileDialog({fileId:a,channelId:r,threadTs:n,initialFileTitle:i})}},{key:"render",value:function e(){var t=this.props.title;return m.a.createElement("div",{className:"p-file_viewer__header"},m.a.createElement("div",{className:"p-file_viewer__header__meta"},m.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},m.a.createElement("div",{className:"bold"},t),m.a.createElement(te["c"],{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":he.t("Edit file title"),onClick:this.renameFile},he.t("Edit")))),m.a.createElement("div",{className:"p-file_viewer__header__actions"},m.a.createElement(pe["a"],{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}]);return t}(p["PureComponent"]);be.displayName="Header";be.defaultProps=fe;var ge=function e(t){return{closeModal:function e(){return t(Object(O["closeModal"])())},openRenamePendingFileDialog:function e(a){return t(N(a))}}};var _e=Object(h["connect"])(null,ge)(be);var ye=a(2072);var ke={fileId:d["b"].string.isRequired,channelId:d["b"].string.isRequired,threadTs:d["b"].string,title:d["b"].string,image:d["b"].shape({src:d["b"].string,width:d["b"].number,height:d["b"].number,orientation:d["b"].number})};var Oe={threadTs:void 0,title:void 0,image:void 0};var Ce=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.image,r=t.title,n=t.fileId,i=t.channelId,s=t.threadTs;return m.a.createElement(de["a"],{contentLabel:r},m.a.createElement(_e,{title:r,fileId:n,channelId:i,threadTs:s}),m.a.createElement(ye["a"],{title:r,image:a}))}}]);return t}(p["Component"]);Ce.displayName="FileViewer";Ce.defaultProps=Oe;var Ee=function e(t,a){var r=a.fileId,n=a.channelId,i=a.threadTs,s=a.image;if(!r||!n||!s)return null;var o=Object(_["getPendingFileById"])(t,{fileId:r,channelId:n,threadTs:i});var l=o.title||o.name;return{fileId:r,channelId:n,threadTs:i,title:l,image:s}};var Se=Object(h["connect"])(Ee)(Ce);var we=Object(k["b"])("Opens the PendingFileViewer",function(e,t,a){e(Object(O["openModal"])({element:m.a.createElement(Se,a),isStackable:true}))});we.meta={name:"openPendingFileViewer",key:"actionsOpenPendingFileViewerOpenPendingFileViewer",description:"Opens the PendingFileViewer"};we.propTypes=D()({},Se.propTypes);var Ie=we;var je=a(1649);function Te(e){var t=e.replace(/^data:([^;]+);base64,/gim,"");var a=atob(t);var r=a.length;var n=new Uint8Array(r);for(var i=0;i<r;i++)n[i]=a.charCodeAt(i);return n.buffer}var Ae=function(e){return new Promise(function(t,a){if(!e||!(e instanceof File)){a(new Error("Invalid file argument provided to getPendingFileData"));return}if(!window.FileReader){a(new Error("Cannot read file data, browser does not support FileReader"));return}if(e.dataUrl){t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});return}var r=new FileReader;r.onload=function(a){var r=a.target.result;var n=Te(r);var i=Object(je["readFromBinaryFile"])(n);var s=i&&"number"===typeof i.Orientation;var o=s?i.Orientation:null;var l=new Image;l.onload=function(){var a=l.width;var n=l.height;e.dataUrl=r;e.orientation=o;e.width=a;e.height=n;t({dataUrl:r,orientation:o,width:a,height:n})};l.src=r};r.onloadstart=function(e){Object(b["noop"])(e)};r.onerror=function(e){r.abort();a(e)};r.readAsDataURL(e)})};var Ne=a(86);var Me=a(3725);var Pe=new P["b"]("multi_file_upload");var Re={file:d["b"].object.isRequired,channelId:d["b"].string,threadTs:d["b"].string,useThumbnail:d["b"].bool,className:d["b"].string,openPendingFileViewer:d["b"].func};var xe={channelId:void 0,threadTs:void 0,useThumbnail:false,className:null,openPendingFileViewer:b["noop"]};var De=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:true};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.file;Ae(a).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.dataUrl,r=e.orientation,n=e.height,i=e.width;t.setState(function(){return{dataUrl:a,orientation:r,height:n,width:i}});requestAnimationFrame(function(){t.setState(function(){return{isLoading:false}})})}).catch(function(e){Object(b["noop"])(e)})}},{key:"onClick",value:function e(t){t.stopPropagation();var a=this.props,r=a.file,n=a.channelId,i=a.threadTs;var s=this.state,o=s.dataUrl,l=s.width,c=s.height,u=s.orientation;this.props.openPendingFileViewer({fileId:r.id,channelId:n,threadTs:i,title:r.title||r.name,image:{src:o,width:l,height:c,orientation:u}})}},{key:"renderImage",value:function e(){var t=this.props.file;var a=this.state.dataUrl;return m.a.createElement("img",{className:"p-pending_image_file__img",src:a,alt:Object(M["getFileDisplayName"])(t)})}},{key:"renderImageThumbnail",value:function e(){var t=this.props.file;var a=this.state||{},r=a.dataUrl;var n=r?{backgroundImage:"url('"+r+"')"}:null;return m.a.createElement("span",{className:"p-pending_image_file__thumbnail",style:n,ariaLabel:Object(M["getFileDisplayName"])(t)})}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.useThumbnail,n=t.className;var i=this.state,s=i.isLoading,o=i.orientation,l=i.height,c=i.width;var u=r?1:l/c;if(!Object(M["isPendingImageFile"])(a))return null;var d=f()("p-pending_image_file",n,{"p-pending_image_file__thumbnail_container":r,"p-pending_image_file__loading":s});return m.a.createElement(te["c"],{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":Pe.t("Preview image"),style:Object(M["getOrientationTransformStyles"])({orientation:o,imageDimensionRatio:u})},m.a.createElement("div",{className:d},r?this.renderImageThumbnail():this.renderImage(),m.a.createElement(Ne["a"],{size:"large",className:"p-pending_image_file__loading_spinner"})))}}]);return t}(p["PureComponent"]);De.displayName="PendingImageFile";De.defaultProps=xe;var Fe=function e(t){return{openPendingFileViewer:function e(){return t(Ie.apply(void 0,arguments))}}};var Le=Object(h["connect"])(null,Fe)(De);var Be=new P["b"]("multi_file_upload");var Ue={fileId:d["b"].string.isRequired,channelId:d["b"].string.isRequired,threadTs:d["b"].string,removePendingFile:d["b"].func,featureMultiFileUpload:d["b"].bool};var qe={threadTs:null,removePendingFile:b["noop"],featureMultiFileUpload:true};var We=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRemoveFileClick=a.onRemoveFileClick.bind(a);return a}s()(t,[{key:"onRemoveFileClick",value:function e(t){t.stopPropagation();var a=this.props,r=a.fileId,n=a.channelId,i=a.threadTs;if(!r||!n)return;this.props.removePendingFile({channelId:n,threadTs:i,fileId:r})}},{key:"render",value:function e(){var t=this.props.featureMultiFileUpload;if(!t)return null;return m.a.createElement(te["c"],{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":Be.t("Remove file")},m.a.createElement(B["b"],{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),m.a.createElement(B["b"],{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"}))}}]);return t}(p["PureComponent"]);We.displayName="RemoveFileButton";We.defaultProps=qe;var He=Object(h["connect"])(null,{removePendingFile:_["removePendingFile"]})(We);var Ge=a(3727);var Ve=new P["b"]("multi_file_upload");var Ke={files:d["b"].arrayOf(d["b"].object),channelId:d["b"].string.isRequired,threadTs:d["b"].string,isCompact:d["b"].bool,processAndAddPendingFiles:d["b"].func,openRenamePendingFileDialog:d["b"].func,filterFilesForUpload:d["b"].func};var ze={files:[],threadTs:null,isCompact:false,processAndAddPendingFiles:b["noop"],openRenamePendingFileDialog:b["noop"],filterFilesForUpload:b["noop"]};var Qe=184;var Ye=26214400;var Je=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.hiddenFileInputRef=m.a.createRef();a.onAddFileClick=a.onAddFileClick.bind(a);a.onPendingFileClick=a.onPendingFileClick.bind(a);a.onFilesSelectedHandler=a.onFilesSelectedHandler.bind(a);return a}s()(t,[{key:"onAddFileClick",value:function e(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}},{key:"onPendingFileClick",value:function e(t,a){t.stopPropagation();var r=this.props,n=r.channelId,i=r.threadTs;var s=a.title||a.name;this.props.openRenamePendingFileDialog({fileId:a.id,channelId:n,threadTs:i,initialFileTitle:s})}},{key:"onFilesSelectedHandler",value:function e(t){var a=this;if(!t||!t.length)return Promise.resolve();var r=this.props,n=r.channelId,i=r.threadTs;return this.props.filterFilesForUpload({selectedFiles:t,channelId:n,threadTs:i}).then(function(e){if(!e||!e.length)return;a.props.processAndAddPendingFiles({channelId:n,threadTs:i,files:e})})}},{key:"getComponentSize",value:function e(){var t=this.props,a=t.files,r=t.isCompact;if(r)return"small";var n=a&&1===a.length&&this.shouldRenderPendingImage(a[0]);if(n)return"large";return"medium"}},{key:"shouldRenderPendingImage",value:function e(t){return Object(M["isPendingImageFile"])(t)&&t.size<Ye}},{key:"renderRemoveFileButton",value:function e(t){var a=this.props,r=a.files,n=a.channelId,i=a.threadTs;if(r&&r.length<2)return null;return m.a.createElement(He,{fileId:t,channelId:n,threadTs:i})}},{key:"renderPendingImageFile",value:function e(t){var a=this.props,r=a.files,n=a.channelId,i=a.threadTs,s=a.isCompact;var o=r&&r.length>1||s;return m.a.createElement(Le,{file:t,channelId:n,threadTs:i,useThumbnail:o})}},{key:"renderPendingFile",value:function e(t){var a=this;var r=this.props.isCompact;return m.a.createElement(ue,{file:t,isCompact:r,onEditFile:function e(r){return a.onPendingFileClick(r,t)}})}},{key:"renderAddFileButton",value:function e(){var t=this.props.files;var a=t&&t.length||0;var r=a<R["MAX_FILE_UPLOAD_COUNT"];var n=a>1;var i=Ve.t("Add file");var s=Ve.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:a,maxFileUploadCount:R["MAX_FILE_UPLOAD_COUNT"]});return m.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},r?m.a.createElement(te["c"],{className:"p-multi_file_upload__add_file_btn","aria-label":i,onClick:this.onAddFileClick},i,m.a.createElement(ee["a"],{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,n?m.a.createElement("span",{className:"p-multi_file_upload__file_count"},s):null)}},{key:"renderFileGallery",value:function e(){var t=this;var a=this.props.files;return m.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},a.map(function(e){return m.a.createElement("div",{className:"p-multi_file_upload__file_container",key:e.id},t.shouldRenderPendingImage(e)?t.renderPendingImageFile(e):t.renderPendingFile(e),t.renderRemoveFileButton(e.id))}))}},{key:"renderFileGalleryScroller",value:function e(){var t=this;var a=1.25*Qe;return m.a.createElement(g["a"],{disableHeight:true},function(e){var r=e.width;return m.a.createElement($,{width:r,pageSize:a},t.renderFileGallery())})}},{key:"render",value:function e(){var t=this.props.files;if(!t)return null;var a=this.getComponentSize();var r=f()("p-multi_file_upload__container","p-multi_file_upload__container--"+a);return m.a.createElement("div",{className:r},this.renderFileGalleryScroller(),this.renderAddFileButton())}}]);return t}(p["Component"]);Je.displayName="MultiFileUpload";Je.defaultProps=ze;function Xe(e,t){var a=t.channelId,r=t.threadTs;return{files:Object(_["getPendingFilesforInput"])(e,{channelId:a,threadTs:r})}}var Ze=t["a"]=Object(h["connect"])(Xe,{processAndAddPendingFiles:_["processAndAddPendingFiles"],openRenamePendingFileDialog:N,filterFilesForUpload:y["a"]})(Je)},3505:function(e,t,a){},3507:function(e,t,a){},3510:function(e,t,a){},3512:function(e,t,a){},3514:function(e,t,a){},3517:function(e,t,a){},3521:function(e,t,a){},3523:function(e,t,a){},3525:function(e,t,a){},3527:function(e,t,a){},3529:function(e,t,a){},3531:function(e,t,a){},3533:function(e,t,a){},3535:function(e,t,a){},3537:function(e,t,a){},3547:function(e,t,a){},3549:function(e,t,a){},3552:function(e,t,a){},3554:function(e,t,a){},3556:function(e,t,a){},3610:function(e,t,a){},3612:function(e,t,a){},3615:function(e,t,a){},3617:function(e,t,a){},3621:function(e,t,a){},3624:function(e,t,a){},3626:function(e,t,a){},3628:function(e,t,a){},3630:function(e,t,a){},3632:function(e,t,a){},3634:function(e,t,a){},3636:function(e,t,a){},3638:function(e,t,a){},3640:function(e,t,a){},3642:function(e,t,a){},3644:function(e,t,a){},3646:function(e,t,a){"use strict";a.r(t);var r=a(1836);var n=a(46);Object(n["a"])("interop.mountConnectedWorkspaces",r["a"]);Object(n["a"])("interop.unmountConnectedWorkspaces",r["b"])},3649:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(144);var s=a(1660);var o=a(46);Object(o["a"])("interop.mountDownloadBlockedToast",function(){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"])}))})},3650:function(e,t,a){},3652:function(e,t,a){},3654:function(e,t,a){},3657:function(e,t,a){},3660:function(e,t,a){},3662:function(e,t,a){},3664:function(e,t,a){},3666:function(e,t,a){},3668:function(e,t,a){},3670:function(e,t,a){},3672:function(e,t,a){},3675:function(e,t,a){},3677:function(e,t,a){},3679:function(e,t,a){},3681:function(e,t,a){},3683:function(e,t,a){},3685:function(e,t,a){},3687:function(e,t,a){},3689:function(e,t,a){},3691:function(e,t,a){},3693:function(e,t,a){},3695:function(e,t,a){},3697:function(e,t,a){},3702:function(e,t,a){},3704:function(e,t,a){},3706:function(e,t,a){},3708:function(e,t,a){},3710:function(e,t,a){},3712:function(e,t,a){},3714:function(e,t,a){},3716:function(e,t,a){},3719:function(e,t,a){},3721:function(e,t,a){},3723:function(e,t,a){},3725:function(e,t,a){},3727:function(e,t,a){},3729:function(e,t,a){},3731:function(e,t,a){},3733:function(e,t,a){},3735:function(e,t,a){},3739:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(29);var d=a(46);var p=a(5);var m=a.n(p);var h=a(4);var v=a.n(h);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(0);var k=a(6);var O=a(9);var C=a(95);var E=a(1973);var S=new k["b"]("enterprise_dashboard");var w={location:y["b"].string,featureDataLocationView:y["b"].bool};var I={location:"",featureDataLocationView:false};var j=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderLocation",value:function e(){if(!this.props.featureDataLocationView)return null;return s.a.createElement("div",{className:"p-data_location_view__location_info"},s.a.createElement("span",null,S.rt("Your organization's \"Customer Data\" as described in Slack's <a>Terms of Service</a> will be stored in {country_name}.",{country_name:this.props.location},function(e){var t=e.text,a=e.key;return s.a.createElement("a",{key:a,target:"_blank",rel:"noopener noreferrer",href:"https://slack.com/terms-of-service"},t)})))}},{key:"renderError",value:function e(){if(!this.props.featureDataLocationView)return null;return s.a.createElement(C["a"],{type:"boxed",level:"error",align:"left"},s.a.createElement("span",{"data-qa":"location-error"},S.rt("<b>We had trouble getting the hosting location for your organization.</b> If this problem persists, please <a>contact Slack</a>.",null,function(e){var t=e.tag,a=e.text,r=e.key;switch(t){case"a":return s.a.createElement("a",{key:r,href:"mailto:feedback@slack.com"},a);case"b":return s.a.createElement("b",{key:r},a);default:return a}})))}},{key:"renderContentHeader",value:function e(){if(!this.props.featureDataLocationView)return null;return s.a.createElement("div",{className:"p-data_location_view__subtitle","data-qa":"location-subtitle"},S.rt("Hosting location: {country_name}",{country_name:this.props.location}))}},{key:"renderESCNote",value:function e(){if(!this.props.featureDataLocationView)return null;return s.a.createElement(C["a"],{type:"inline",level:"default",align:"left"},s.a.createElement("span",null,S.rt("<b>Note:</b> when sharing channels with organizations in a different data region, search data for external conversations will be stored in both regions.",null,function(e){var t=e.text,a=e.key;return s.a.createElement("b",{key:a},t)})))}},{key:"render",value:function e(){if(!this.props.featureDataLocationView)return null;return s.a.createElement("div",{className:"p-data_location_view"},s.a.createElement("h1",{className:"p-data_location_view__title"},S.t("Data Location")),s.a.createElement("p",{className:"p-data_location_view__title_description"},S.t("Manage the location where your Slack data is stored.")),s.a.createElement("div",{className:"p-data_location_view__container"},s.a.createElement("div",{className:"p-data_location_view__content"},this.renderContentHeader(),this.props.location?this.renderLocation():this.renderError(),this.renderESCNote())))}}]);return t}(i["PureComponent"]);j.displayName="DataLocationView";j.defaultProps=I;var T=function e(t,a){var r=a.location,n=void 0===r?"":r;return{featureDataLocationView:Object(O["isFeatureEnabled"])(t,"feature_data_location_view"),location:n}};var A=Object(c["connect"])(T)(j);var N=A;Object(d["a"])("interop.dataLocation",{render:function e(t,a,r){if(!t)throw new Error("dataLocation render must be called with a teamId parameter");var i=Object(u["f"])(t);var o=window.TS_enterprise_boot_data&&window.TS_enterprise_boot_data.security,d=o.idr;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(N,n()({},r,{location:d.data_location}))),a)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},3740:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a.d(t,"d",function(){return u});a.d(t,"b",function(){return d});a.d(t,"c",function(){return p});a.d(t,"e",function(){return v});var r=a(2);var n=a.n(r);var i=a(39);var s=a(14);var o=a(1599);var l=Object(s["b"])();function c(e,t){return new Promise(function(a){Object(o["a"])("experiments.getByInvite",{encoded_invite_id:e,domain:t},function(e,t){e&&t.assignments&&f(t.assignments);a(e)})})}function u(){return new Promise(function(e){Object(o["a"])("experiments.getByVisitor",{},function(t,a){t&&a.assignments&&f(a.assignments);e(t)})})}function d(e){if(void 0===e){l.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByLead",{lead_id:e},function(e,a){e&&a.assignments&&f(a.assignments);t(e)})})}function p(e){if(void 0===e){l.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByUser",{token:e},function(e,a){e&&a.assignments&&f(a.assignments);t(e)})})}var m={};var h={};function v(e){var t=m[e];if(!t)return null;t.log_exposures&&b(e,t);return t.group}function f(e){Object(r["forEach"])(e,function(e,t){Object(r["isEqual"])(h[t],e)||(h[t]=null);m[t]=e})}function b(e,t){if(!Object(r["isEqual"])(h[e],t)){Object(i["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});h[e]=t}}},3742:function(e,t,a){},3744:function(e,t,a){},3746:function(e,t,a){},3748:function(e,t,a){},3750:function(e,t,a){},3753:function(e,t,a){},3755:function(e,t,a){},3761:function(e,t,a){},3763:function(e,t,a){},3765:function(e,t,a){},3767:function(e,t,a){},3772:function(e,t,a){},3775:function(e,t,a){"use strict";a.r(t);var r=a(1829);var n=a(46);Object(n["a"])("interop.mountTeamCreatorOnboardingDialog",r["a"]);Object(n["a"])("interop.unmountTeamCreatorOnboardingDialog",r["b"])},3776:function(e,t,a){},3778:function(e,t,a){},3781:function(e,t,a){},3783:function(e,t,a){},3785:function(e,t,a){},3787:function(e,t,a){},3789:function(e,t,a){},3791:function(e,t,a){},3794:function(e,t,a){},3796:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(144);var s=a(1871);var o=a(46);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},3797:function(e,t,a){},3800:function(e,t,a){},3802:function(e,t,a){},3804:function(e,t,a){},3807:function(e,t,a){},3809:function(e,t,a){},3811:function(e,t,a){"use strict";a.r(t);var r=a(99);var n=a(11);var i=a(46);Object(i["a"])("interop.mpims",{convertToPrivateChannel:r["b"],makeNameForMpim:function e(t){return Object(n["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(n["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},3812:function(e,t,a){"use strict";a.r(t);var r=a(1688);var n=a(46);Object(n["a"])("interop.openAppManagementModal",r["a"])},3813:function(e,t,a){"use strict";a.r(t);var r=a(1200);var n=a(46);Object(n["a"])("interop.openAppsBrowserModal",function(){return TS.redux.dispatch(r["a"].apply(void 0,arguments))})},3814:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(2075);Object(r["a"])("interop.openInviteMemberToChannelDialog",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},3815:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(427);Object(r["a"])("interop.pages",{isValidPagePath:n["g"],isValidPageId:n["f"],isPageEnabled:n["d"],isPageEnabledById:n["e"],getAllPages:n["a"],getPageById:n["b"],getPageByPath:n["c"]})},3816:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(835);Object(r["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},3817:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1264);var i=a(1894);Object(r["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"],maybeReactToLastMessageInChannel:i["a"]})},3838:function(e,t,a){"use strict";a.r(t);var r=a(1631);var n=a(46);Object(n["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},3839:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2098);var s=a(11);var o=a(653);var l=a(77);var c=a(156);var u=a(409);var d=a(16);var p=a(42);var m=a(652);var h=a(28);var v=a(105);var f=a(1048);var b=a(388);var g=a(68);var _=a(87);var y=a(46);Object(y["a"])("interop.rules",{channels:n()({},s,{shouldSuppressOrgChannel:o["a"],canThread:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["canThread"].apply(s,[TS.redux.getState()].concat(a))},isReadOnly:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isReadOnly"].apply(s,[TS.redux.getState()].concat(a))},isThreadOnly:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isThreadOnly"].apply(s,[TS.redux.getState()].concat(a))},getHasReadOnlyDraft:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["getHasReadOnlyDraft"].apply(s,[TS.redux.getState()].concat(a))},shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldStopChannelMentions"].apply(s,[TS.redux.getState()].concat(a))},getDisplayNameForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["getDisplayNameForChannel"].apply(s,[TS.redux.getState()].concat(a))},isYou:function e(t){return s["isYou"](TS.model.user.id,t)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldShowAtChannelWarning"].apply(s,[TS.redux.getState()].concat(a))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["checkForBlockedAtChannelKeyword"].apply(s,[TS.redux.getState()].concat(a))}}),messages:n()({isAutomatedSubtype:m["a"]},p),files:{extendFileWithPinnedInfo:l["extendFileWithPinnedInfo"],getFileType:l["getFileType"]},user:{canLeaveChannel:g["l"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["q"].apply(void 0,[TS.redux.getState()].concat(a))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["p"].apply(void 0,[TS.redux.getState()].concat(a))},canAtMentionEveryone:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["e"].apply(void 0,[TS.redux.getState()].concat(a))},canAtChannelOrGroup:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["d"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInGeneral:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["t"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["s"].apply(void 0,[TS.redux.getState()].concat(a))},canUserArchiveChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["D"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSeeArchiveChannelOption:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["R"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManagePostingPermissions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["N"].apply(void 0,[TS.redux.getState()].concat(a))},canSetPurposeForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["z"].apply(void 0,[TS.redux.getState()].concat(a))},canSetTopicForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["A"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePrivateChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["G"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePublicChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["H"].apply(void 0,[TS.redux.getState()].concat(a))},canTriggerCustomResponses:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["B"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPublicChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["k"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPrivateChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["j"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["h"].apply(void 0,[TS.redux.getState()].concat(a))},canJoinChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["g"].apply(void 0,[TS.redux.getState()].concat(a))},canUserConvertChannelToPrivate:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["F"].apply(void 0,[TS.redux.getState()].concat(a))},canUserDeleteChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["J"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSetDataRetentionForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["S"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManageTeamAccessToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["O"].apply(void 0,[TS.redux.getState()].concat(a))},canUserRequestSharedChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["Q"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreateSharedChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["I"].apply(void 0,[TS.redux.getState()].concat(a))},canUserExportMessageHistory:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["L"].apply(void 0,[TS.redux.getState()].concat(a))},canUserInviteToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["M"].apply(void 0,[TS.redux.getState()].concat(a))},canManageParticipationInSharedChannelsOpenBeta:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["n"].apply(void 0,[TS.redux.getState()].concat(a))},canSeeDisconnectChannelOption:function e(){return g["x"].apply(void 0,arguments)},canDisconnectSharedChannels:function e(){return g["f"].apply(void 0,arguments)},canUserRenameChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["P"].apply(void 0,[TS.redux.getState()].concat(a))}},unreads:n()({},f),user_groups:{isUnknownOrNonExistent:function e(){return _["s"].apply(void 0,arguments)},isNonExistent:_["q"],isUnknown:_["r"]},emoji:{getEmojiMode:function e(t){return c["h"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return c["n"](TS.redux.getState())},getEmojiUrlPrefix:c["i"],isEmojiNameSafe:c["j"]},teams:n()({},h),members:n()({},d),admin:n()({},i),invites:n()({},u),threads:n()({},v),prefs:n()({},b)})},3840:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(22);var s=a(270);var o=a(4473);var l=a(77);var c=a(250);var u=a(46);var d=a(1823);var p=a(1701);function m(e){var t=TS.redux.getState();var a=Object(i["b"])(t);Object(o["c"])(a,e)}function h(e){var t=TS.redux.getState();var a=Object(i["b"])(t);return Object(o["b"])(a,e)}Object(u["a"])("interop.files",n()({},l,{processFileForUpserting:function e(t){return Object(s["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["e"],fetchAndUpsertFilesById:c["f"],getFileMetaTemplate:d["b"],markObjectsAsFresh:m,isObjectFresh:h,deleteFile:function e(){return TS.redux.dispatch(c["c"].apply(void 0,arguments))},openDeleteFileDialog:function e(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}}))},3841:function(e,t,a){"use strict";a.r(t);var r=a(294);var n=a(185);var i=a(1078);var s=a(46);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["o"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["q"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["p"].apply(void 0,[TS.redux.getState()].concat(a))},showNotification:function e(t,a){return TS.redux.dispatch(Object(i["e"])({message:t,modelObject:a}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:r["g"],getCalculatedMobileNotifySetting:r["h"],getDefaultDesktopNotifySetting:r["j"],getDefaultMobileNotifySetting:r["k"]})},3842:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(22);Object(r["a"])("interop.selfTeamIds",{getEnterpriseId:n["a"],getTeamId:n["b"],getTopLevelTeamId:n["c"]})},3843:function(e,t,a){"use strict";a.r(t);var r=a(574);var n=a(46);Object(n["a"])("interop.sendMessage.resolveMessage",r["c"])},3844:function(e,t,a){"use strict";a.r(t);var r=a(342);var n=a.n(r);var i=a(46);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},3845:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1889);var i=a(1890);var s=a(1555);var o=a(1249);var l=a(2214);var c=a(20);var u=c["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(r["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:s["a"],parseEditLastMessageCommand:i["a"],parseArgs:n["a"],loadSlashCommands:o["b"],executeCommand:o["a"],slackDebugLagCommand:l["default"]})},3846:function(e,t,a){"use strict";a.r(t);var r=a(1064);var n=a(46);Object(n["a"])("interop.useGantryCallsInLegacySlack",function(){return Object(r["f"])(TS.redux.getState())})},3847:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(926);function i(e){return TS.redux.dispatch(Object(n["fetchStarsList"])(e))}Object(r["a"])("interop.stars",{getStarsList:i})},3848:function(e,t,a){"use strict";a.r(t);var r=a(912);var n=a(22);var i=a(35);var s=a(425);var o=a(1400);var l=a(1368);var c=a(334);var u=a(46);var d=a(832);var p=a(194);function m(e){var t=TS.redux.getState();var a=Object(n["b"])(t);Object(r["a"])(a,e)}function h(){return p["b"].pauseRefetch()}function v(e){return TS.redux.dispatch(Object(d["c"])(e))}function f(e,t){return TS.redux.dispatch(Object(s["g"])({teamId:e,fields:t}))}function b(e,t){var a=TS.redux.getState();return Object(i["j"])(a,e,t)}function g(){var e=TS.redux.getState();return Object(i["c"])(e)}function _(){var e=TS.redux.getState();return Object(i["d"])(e)}function y(){var e=TS.redux.getState();return Object(i["e"])(e)}function k(e){var t=TS.redux.getState();return Object(i["i"])(t,e)}function O(){return TS.redux.dispatch(s["c"].apply(void 0,arguments))}function C(){return TS.redux.dispatch(l["c"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(c["c"].apply(void 0,arguments))}function S(){return TS.redux.dispatch(s["h"].apply(void 0,arguments))}Object(u["a"])("interop.teams",{getTeamById:b,getAllTeams:g,getCurrentTeam:_,getCurrentTopLevelTeam:y,getTeamByDomain:k,getSelfEnterpriseTeam:i["h"],getSelfEnterpriseOrgName:i["f"],getSelfEnterpriseOrgUrl:i["g"],getAllExternalTeams:i["b"],ensureEnterpriseTeamIsKnown:O,removeTeam:C,upsertTeam:E,markObjectsAsFresh:m,pauseRefetch:h,fetchAndUpsertTeamsWithQuery:v,reorderTeamProfileFields:f,updateSelfEnterpriseName:s["h"],legacyUpdateSelfEnterpriseName:S,upsertSelfTeam:s["n"],fetchAndUpsertEnterpriseOrgInfo:o["a"],getPotentiallyUnknownEnterprise:o["b"],upsertSelfEnterprise:s["m"]})},3849:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(528);var i=a(188);var s=a(455);var o=a(1172);var l=a(541);var c=a(1617);var u=a(828);var d=a(1283);var p=a(1416);var m=a(1618);var h=a(1877);var v=a(1063);var f=a(1266);var b=a(1348);var g=a(1878);var _=a(1891);var y=a(1879);var k=a(1417);var O=a(1421);Object(r["a"])("interop.texty",{Delta:n["Delta"],PlainClipboardModule:n["PlainClipboardModule"],Quill:n["Quill"],SlackKeyboardModule:n["SlackKeyboardModule"],TabCompleteModule:n["TabCompleteModule"],TextyClass:n["TextyClass"],isRangeInCode:i["j"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:c["a"],shouldHighlightMention:u["a"],convertContentsStringForSlashCommands:d["b"],convertContentsStringForEncodedMembers:p["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:m["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:v["a"],getDisplayTextForSearchResult:f["a"],trimAllowedMatchPrefix:b["a"],getContentsFromClipboard:h["a"],detachInvalidMentionsFromContents:g["a"],replacePotentialMentionsSynchronously:_["a"],shouldInsertNewline:y["a"],getBroadcastKeywordsFromContents:k["a"],getDefaultComposerConfig:O["a"]})},3850:function(e,t,a){"use strict";a.r(t);var r=a(532);var n=a(46);function i(){return TS.redux.dispatch(Object(r["b"])())}Object(n["a"])("interop.topics",{resynced:i})},3851:function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(46);var s=a(607);var o=a(25);var l=a(16);function c(e){var t=TS.redux.getState();var a=Object(r["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["e"])(t,e)});a.sort(function(e,a){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,a))});return a}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},3852:function(e,t,a){"use strict";a.r(t);var r=a(303);var n=a(177);var i=a(302);var s=a(87);var o=a(769);var l=a(331);var c=a(9);var u=a(46);function d(e){var t=TS.redux.getState();var a=Object(n["e"])(t,e);if(!a)return null;return a}function p(e){return TS.redux.dispatch(Object(i["h"])({ids:[e]})).catch(function(){return{userGroups:[]}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userGroups,a=void 0===t?[]:t;TS.redux.dispatch(Object(r["p"])({userGroups:a}));return a&&a[0]})}function m(e){return TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyPromiseToGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=d(e);if(!n||Object(s["s"])(n))return;TS.redux.dispatch(Object(r["d"])({groupId:e,users:a}))}).then(function(){return d(e)})}function h(e,t){TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=d(e);if(!n||Object(s["s"])(n))return;TS.redux.dispatch(Object(r["d"])({groupId:e,users:a}))}).then(function(){var a=d(e);a&&t&&t(a)})}function v(e){var t=TS.redux.getState();TS.redux.dispatch(Object(l["upsertUserGroupMembership"])({groupId:e,isMember:true}));var a=d(e);if(a&&!Object(s["s"])(a)&&Object(s["t"])(a)){var n=Object(c["getCurrentUserId"])(t);TS.redux.dispatch(Object(r["b"])({groupId:e,memberId:n}))}}function f(e){var t=TS.redux.getState();var a=Object(n["a"])(t,e);return a}function b(e){return TS.redux.dispatch(Object(r["o"])({userGroup:e}))}function g(e){return TS.redux.dispatch(Object(r["p"])({userGroups:e}))}function _(e){return TS.redux.dispatch(Object(i["f"])(e))}function y(){return Object(l["getCurrentMemberUserGroupMembership"])(TS.redux.getState())}function k(e){return Object(n["j"])(TS.redux.getState(),e)}function O(){return Object(n["c"])(TS.redux.getState())}Object(u["a"])("interop.userGroups",{getUserGroupById:d,fetchUserGroupById:p,getActiveUserGroups:f,getKnownUserGroups:O,getUserGroupMembers:h,promiseToGetUserGroupMembers:m,upsertSelfUserGroup:v,upsertUserGroup:b,upsertUserGroups:g,getCurrentMemberUserGroupMembership:y,isUserGroupFromAnotherTeam:k,createUserGroup:i["a"],bulkAddGroups:r["c"],updateUserGroup:i["l"],updateMembersOfUserGroup:i["k"],enableUserGroup:i["d"],disableUserGroup:i["c"],deleteUserGroup:i["b"],getAllUserGroups:function e(){return Object(n["b"])(TS.redux.getState())},USER_GROUP_MSG_REGEX:s["a"],isUserGroupActive:s["t"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(o["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(o["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(o["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(l["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:_,canEditUserGroups:function e(){return Object(s["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(s["b"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(l["clearAllUserGroupMembership"])())},isUserGroupMember:function e(t){return Object(l["isUserGroupMember"])(TS.redux.getState(),t)}})},3853:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(20);var l=a(290);var c=a(46);function u(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return n()({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function d(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return n()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return d.apply(void 0,[TS.redux.getState()].concat(a))}})},3854:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(484);var i=n["a"].generateAndEnqueue,s=n["a"].check,o=n["a"].list,l=n["a"].getTimeDelta;Object(r["a"])("interop.client_action_token",{generateAndEnqueue:function e(){return i(TS.redux.getState())},list:function e(){return o(TS.redux.getState())},check:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s.apply(void 0,[TS.redux.getState()].concat(a))},getTimeDelta:l})},3855:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(284);Object(r["a"])("interop.clipboard",n)},3856:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(18);Object(r["a"])("interop.clogTypes",{EventId:n["l"],UiAction:n["w"],UiStep:n["A"],ElementType:n["k"],CoreKeys:n["d"],FileUploadType:n["o"],FileUploadAction:n["m"],FileUploadSrc:n["n"]})},3857:function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(46);var s=a(39);var o=a(14);var l=a(224);var c=null;function u(e){var t=e.userId,a=e.teamId,r=e.enterpriseId,n=e.locale;if(null!==c)return c;c=Object(s["a"])({userId:t,teamId:a,enterpriseId:r,locale:n});return c}function d(){Object(l["a"])()||Object(o["b"])("CLOG SETUP").error("You must call TS.interop.clog.setup() before attempting to track clogs");return r["noop"]}Object(i["a"])("interop.clog",{setup:u,getInstance:function e(){return c},track:function e(){if(c){var t;return(t=c).track.apply(t,arguments)}return d()},trackClick:function e(){if(c){var t;return(t=c).trackClick.apply(t,arguments)}return d()},trackClickWithContext:function e(){if(c){var t;return(t=c).trackClickWithContext.apply(t,arguments)}return d()},trackForm:function e(){if(c){var t;return(t=c).trackForm.apply(t,arguments)}return d()}})},3858:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(393);Object(r["a"])("interop.currency",{formatCurrency:n["a"]})},3859:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(135);var i=a(751);var s=a(209);var o=a(1492);var l=a(1489);var c=a(1494);var u=a(1221);var d=a(428);var p=a(1493);var m=a(643);var h=a(1485);var v=a(827);var f=a(1134);var b=a(1135);var g=a(1219);var _=a(351);var y=a(1487);var k=a(1220);var O=a(778);var C=a(1491);var E=a(1486);var S=a(196);var w=a(540);var I=a(1488);var j=a(1490);var T=a(874);var A=a(1328);var N=a(644);var M=a(1484);var P=a(1329);var R=a(642);var x=a(1279);var D=a(1026);var F=a(826);var L=a(345);var B=a(542);var U=a(88);Object(r["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:m["a"],distanceInDays:h["a"],distanceInMinutes:v["a"],distanceInSeconds:f["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:k["a"],toDayOfTheWeek:O["a"],toHour:C["a"],getActivityDayStamp:E["a"],toCalendarDate:S["a"],toCalendarDateOrNamedDay:w["a"],toCalendarDateIfYesterdayOrToday:I["a"],toFilenameFriendlyDate:j["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return T["a"].apply(void 0,[TS.redux.getState()].concat(a))},convertISOtoUTCReadableDate:A["a"],toTimeAgo:N["a"],addDays:M["a"],daysToYearsPretty:P["a"],maybeGetRelativeDay:R["a"],millisecondsToPrettifiedTime:x["a"],prettifyDateString:D["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"],setLocale:U["b"]})},3860:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(46);var s=a(33);var o=s["desktopVersionFields"](),l=o.windowsAppVersion,c=o.windowsAppVersionMinor,u=o.macAppVersion,d=o.macAppVersionMinor,p=o.linuxAppVersion,m=o.linuxAppVersionMinor,h=o.desktopAppVersion;Object(i["a"])("interop.environment",n()({},s,{win_ssb_version:l,win_ssb_version_minor:c,mac_ssb_version:u,mac_ssb_version_minor:d,lin_ssb_version:p,lin_ssb_version_minor:m,desktop_app_version:h}))},3861:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(46);var s=a(6);var o=a(33);var l=a(53);var c=a(238);var u=a(199);var d=new s["b"]("ns");var p={defaultNamespace:"ns",t:d.t};var m=[];var h=function e(t,a){var r=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.t(t,n()({},r,{ns:a}))};o["isDev"]&&(r.toString=function(){var e=a+"."+t;if(m.indexOf(e)>=0)return"";m.push(e);var r="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+a+"\n\t\t\tString: "+t;alert(r);return""});return r};Object(i["a"])("interop.i18n",{t:h,number:s["n"],percent:s["o"],deburr:s["a"],listify:s["i"],possessive:s["p"],fullPossessiveString:s["c"],safeString:s["q"],sorter:s["r"],mappedSorter:s["k"],localesEnabled:l["e"],supportedKeyboards:c["f"],keyCodeEquivalent:c["c"],keyEquivalent:c["d"],getReverseKeyCodeMap:c["b"],normalizeKeyboardFromDesktop:c["e"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},3862:function(e,t){},3863:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(896);var i=a(89);var s=a(584);var o=a(1798);var l=a(1288);var c=a(1801);var u=a(22);Object(r["a"])("interop.search_autocomplete",{suggestions:n["c"],AutocompleteQuerySuggestion:s["g"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(c["a"])(t);a.get()},clearQueryHistoryCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(l["b"])(t);a.flushAll()},warmFileSuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(o["a"])(t);a.get()}})},3864:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1411);Object(r["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},3865:function(e,t,a){"use strict";a.r(t);var r=a(105);var n=a(1881);var i=a(210);var s=a(20);var o=a(46);Object(o["a"])("interop.threads",{getThreadKey:r["getThreadKey"],populateThreadInputs:n["a"],populateReplyInput:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:a,threadTs:r});n&&n.setText(t)},clearHistory:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.clearHistory()},focus:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.focus()},setBroadcast:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});n&&n.setBroadcast(r)},getBroadcast:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getBroadcast()},getText:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getText()}})},3866:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(46);var s=a(58);var o=a(583);var l=a(1888);Object(i["a"])("interop.url",n()({buildWorkspaceUrl:o["b"],getFileIdFromUrlWithState:l["a"]},s))},3867:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(255);Object(r["a"])("interop.versions",n)},3868:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(332);Object(r["a"])("interop.welcomePlace",{isWelcomePlacePageEnabled:function e(){return Object(n["o"])(TS.redux.getState())}})},3869:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(82);var i=a(242);var s=a(298);Object(r["a"])("interop.workspace",{getPrimaryView:function e(){return Object(n["a"])(TS.redux.getState())},setSecondaryView:function e(){return TS.redux.dispatch(s["a"].apply(void 0,arguments))},setPrimaryView:function e(){return TS.redux.dispatch(i["a"].apply(void 0,arguments))}})},3870:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1213);Object(r["a"])("interop.zendeskWidget",{initWidget:n["b"],openChat:n["g"],onHideChat:n["e"],onShowChat:n["f"],enableChat:n["a"],onChatStart:n["d"],onChatEnd:n["c"]})},4475:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(2);var c=a.n(l);var u=a(163);var d=a(63);var p=a(14);var m=a(39);var h=a(347);var v=a(880);var f=a(3);var b=a.n(f);var g=a(0);var _=a(17);var y=a(448);var k=a(1165);var O=a(604);var C=a(252);var E=a(9);var S=a(413);var w=a(352);var I=Object(_["b"])("Helper for handling history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.oldest,n=a.latest,i=a.channelId,s=a.msgs,o=a.hasMore,l=a.pinCount,u=a.channelActionsCount,d=a.isLimited,p=a.deleted;var m=c.a.map(s,"ts");e(r||n?Object(y["a"])({msgs:s,channelId:i,oldest:r,latest:n,hasMore:o,isLimited:d,loading:false,deleted:p}):Object(y["a"])({msgs:s,channelId:i,isLimited:d,latest:c.a.max(m),oldest:c.a.min(m),hasMore:{hasMoreStart:o,hasMoreEnd:false},loading:false,deleted:p}));c.a.isNumber(l)&&e(Object(C["updatePinCount"])({channelId:i,count:l}));Object(E["isFeatureEnabled"])(t(),"feature_channel_actions_client")&&c.a.isNumber(u)&&e(Object(k["c"])({channelId:i,count:u}))});I.meta={name:"historyHandler",key:"messagePaneStoreFetchHistoryHistoryHandler",description:"Helper for handling history"};I.propTypes={oldest:g["b"].string,latest:g["b"].string,channelId:g["b"].string,msgs:g["b"].array,hasMore:g["b"].oneOfType([g["b"].object,g["b"].bool]),pinCount:g["b"].number,channelActionsCount:g["b"].number,isLimited:g["b"].bool,deleted:g["b"].array};var j=Object(_["b"])("Fetch conversation history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.type,i=a.oldest,s=void 0===i?null:i,o=a.latest,l=void 0===o?null:o,u=a.reason,d=void 0===u?"message-pane-store/fetchHistory":u;if(!r||!n)return false;var m=t();var h=Object(O["isChannelLoading"])(m,r);if(h)return false;Object(p["a"])({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+r+" oldest: "+s+" latest: "+l);if(l&&s){var f=e(Object(S["b"])({channelId:r,type:n,oldest:null,latest:l,reason:d}));var g=e(Object(S["b"])({channelId:r,type:n,oldest:s,latest:null,reason:d}));var _=Promise.all([f,g]).then(function(t){var a=t[0],n=a.msgs,i=a.hasMore,o=a.isLimited,u=a.pinCount,d=a.channelActionsCount,p=a.deleted;var m=t[1],h=m.msgs,v=m.hasMore,f=m.deleted;var b=c.a.uniqBy(n.concat(h),"ts");var g=c.a.uniq(c.a.concat(p,f));var _=c.a.map(b,"ts");e(I({channelId:r,msgs:b,isLimited:o,pinCount:u,channelActionsCount:d,hasMore:{hasMoreStart:i,hasMoreEnd:v},oldest:c.a.min([s,c.a.min(_)]),latest:c.a.max([l,c.a.max(_)]),deleted:g}))}).catch(function(t){Object(w["e"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(O["doneLoading"])({channelId:r}))});e(Object(O["startLoading"])({channelId:r,loadingOlder:true,request:_}));return _}l&&e(Object(v["searchInProductEducationIncrement"])());var y=e(Object(S["b"])({channelId:r,type:n,oldest:s,latest:l,reason:d})).then(function(t){e(I(b()({},t,{oldest:s,latest:l,channelId:r})))}).catch(function(t){Object(w["e"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(O["doneLoading"])({channelId:r}))});e(Object(O["startLoading"])({channelId:r,loadingOlder:!!l,request:y}));return y});j.meta={name:"fetchHistory",key:"messagePaneStoreFetchHistoryFetchHistory",description:"Fetch conversation history"};j.propTypes={channelId:g["b"].string.isRequired,type:g["b"].string,oldest:g["b"].string,latest:g["b"].string,reason:g["b"].string};var T=j;var A=a(165);var N=a(21);var M=a(11);var P=Object(_["b"])("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.scrollmark;var i=t();var s=Object(N["e"])(i,r);if(Object(M["isPublicChannel"])(s)&&!Object(M["isMemberOfChannel"])(s))return;e(Object(A["d"])({channelId:r,scrollmark:n}))});P.meta={name:"maybeSaveScrollmark",key:"messagePaneStoreThunksMaybeSaveScrollmark",description:"Save the scrollmark if the current user is viewing a public channel that they are a member of"};P.propTypes={channelId:g["b"].string,scrollmark:g["b"].object};var R=a(233);var x=a(530);var D=a(422);var F=a(141);var L=a(94);var B=a(122);var U=a(73);var q=a(411);var W=a(756);var H=a(82);var G=a(424);var V=a(1304);var K=a(30);var z=a(34);var Q=Object(K["a"])("Call to trigger App Home Open Event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.appHomeSection;return e(Object(z["a"])({method:"apps.home.dispatchOpenEvent",args:{id:r,type:n},reason:"app-home-logging"})).catch(l["noop"])});Q.meta={name:"callAppHomeOpenEventByChannelId",key:"fetchersAppHomeApiCallAppHomeOpenEventByChannelId",description:"Call to trigger App Home Open Event"};Q.propTypes={channelId:g["b"].string.isRequired,appHomeSection:g["b"].string};var Y=Object(K["a"])("Call to get app home meta information",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.appId,n=a.appInstalledTeamId,i=a.reason,s=void 0===i?"app-home-open-api":i;if(!r)return Promise.reject(new Error("apps.home.open failed with no appId as argument"));return e(Object(z["a"])({method:"apps.home.open",args:{app_id:r,app_installed_team_id:n},reason:s})).then(function(e){return b()({},e,{app_home:e.app_home&&b()({},e.app_home,{home_tab_enabled:"boolean"===typeof e.app_home.home_tab_enabled?e.app_home.home_tab_enabled:e.app_home.has_home_view_enabled})})})});Y.meta={name:"callAppHomeOpen",key:"fetchersAppHomeApiCallAppHomeOpen",description:"Call to get app home meta information"};Y.propTypes={appId:g["b"].string.isRequired,appInstalledTeamId:g["b"].string.isRequired,reason:g["b"].string};var J=a(391);var X=a(137);var Z=a(421);var $=a(557);var ee=a(42);var te=a(105);var ae=a(68);var re=a(176);var ne=a(22);var ie=a(235);var se=a(855);var oe=a(1981);var le=a(851);var ce=a(200);var ue=a(1077);var de=a(10);var pe=a.n(de);var me=a(5);var he=a.n(me);var ve=a(4);var fe=a.n(ve);var be=a(7);var ge=a.n(be);var _e=a(8);var ye=a.n(_e);var ke=a(13);var Oe=a.n(ke);var Ce=a(75);var Ee=a.n(Ce);var Se=a(62);var we=a(1049);var Ie=a(32);var je=a(656);var Te=a(1216);var Ae=a(18);var Ne=a(20);var Me=a(210);var Pe=a(187);var Re=a(1428);var xe=a(4647);var De=a(512);var Fe=a(219);var Le=a(515);var Be=a(1144);var Ue=a(1473);var qe=a(2019);var We=a(35);var He=a(28);var Ge=a(817);var Ve={channelId:g["b"].string,channelType:g["b"].string,hasLimitedHistory:g["b"].bool,isShared:g["b"].bool,isSlackbotIm:g["b"].bool,newxpOnboardingStep:g["b"].string,hasTeamMessageLimit:g["b"].bool,isMsgLimitBannerUpgrd1131BugTreatment:g["b"].bool,logger:g["b"].object.isRequired,clientTheme:g["b"].oneOf(["light","dark"]),inCreatorOnboarding:g["b"].bool};var Ke={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,newxpOnboardingStep:null,hasTeamMessageLimit:false,isMsgLimitBannerUpgrd1131BugTreatment:false,clientTheme:"light",inCreatorOnboarding:false};var ze=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.channelType,i=t.hasLimitedHistory,s=t.isShared,o=t.isSlackbotIm,l=t.newxpOnboardingStep,c=t.hasTeamMessageLimit,u=t.isMsgLimitBannerUpgrd1131BugTreatment,d=t.logger;if(o){if(l&&l!==Er.COMPLETE)return n.a.createElement(wr,{step:l,clientTheme:this.props.clientTheme});return n.a.createElement(pr,null)}if(u){if(i&&c)return n.a.createElement(za,{channelId:a,clientTheme:this.props.clientTheme})}else if(i){c||d.error("Foreword Component: Rendering `LimitedHistoryForeword` component when channel history is limited but team message limit is not.",{subtype:"MESSAGE_PANE_FOREWORD"});return n.a.createElement(za,{channelId:a,clientTheme:this.props.clientTheme})}if("channel"===r||"private"===r){if(s)return n.a.createElement(_r,{channelId:a});return!this.props.inCreatorOnboarding&&n.a.createElement(oa,{channelId:a})}if("im"===r){if(s)return n.a.createElement(Da,{channelId:a});return n.a.createElement(Ta,{channelId:a})}if("mpim"===r)return n.a.createElement(lr,{channelId:a});Object(p["b"])().warn('Unknown foreword type "'+r+'"');return null}}]);return t}(r["PureComponent"]);ze.displayName="Foreword";ze.defaultProps=Ke;function Qe(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return null;var n=Object(We["d"])(e);return{isShared:Object(M["isExternallySharedChannel"])(r),isSlackbotIm:Object(M["isSlackbot"])(r),newxpOnboardingStep:Object(h["j"])(e),hasTeamMessageLimit:Object(He["getTeamMessageLimitTimestamp"])(n)>0,isMsgLimitBannerUpgrd1131BugTreatment:"treatment"===Object(L["getGroupForUser"])(e,"lc_msg_limit_banner_upgrd_1131_bug"),logger:Object(p["a"])({state:e}),inCreatorOnboarding:Object(Ge["e"])(e)}}var Ye=Object(i["connect"])(Qe)(ze);var Je=a(25);var Xe=a(6);var Ze=a(169);var $e=a(16);var et=a(444);var tt=a(456);var at=a(152);var rt=a(373);var nt=a(24);var it=Object(nt["b"])("TS.ui.purpose_dialog.start",c.a.noop);var st=a(41);var ot=a(99);var lt=a(91);var ct=a(1414);var ut=a(806);var dt=a(1180);var pt=a(3744);var mt=new Xe["b"]("dialogs_purpose");var ht={channelId:g["b"].string.isRequired,currentRawPurpose:g["b"].string,currentFormattedPurpose:g["b"].oneOfType([g["b"].string,g["b"].object]),featureM11nChannelDetails:g["b"].bool,logger:g["b"].object.isRequired,submitChannelPurpose:g["b"].func,featureChangePurposeToDescription:g["b"].bool};var vt={currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:false,submitChannelPurpose:l["noop"],featureChangePurposeToDescription:false};var ft=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSubmit=a.onSubmit.bind(a);a.renderInput=a.renderInput.bind(a);a.input=n.a.createRef();return a}fe()(t,[{key:"onSubmit",value:function e(){var t=this.input.current&&this.input.current.getWrappedInstance().value();var a=this.props.featureChangePurposeToDescription;if(void 0===t||null===t){a&&this.props.logger.error("Channel Description dialog submitted with undefined value");this.props.logger.error("Channel Purpose dialog submitted with undefined value");return}if(t===this.props.currentRawPurpose)return;this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:t})}},{key:"renderInput",value:function e(t){var a=t.modules,r=t.isOpen;var i=this.props,s=i.currentFormattedPurpose,o=i.featureChangePurposeToDescription;return n.a.createElement(ct["b"],{initialText:s,focusOnMount:true,minLines:3,modules:a,isAutocompleteOpen:r,maxLength:M["CHANNEL_PURPOSE_MAX_LENGTH"],ariaLabel:o?mt.t("Edit channel description"):mt.t("Edit channel purpose"),ref:this.input})}},{key:"render",value:function e(){if(!this.props.featureM11nChannelDetails)return null;var t=this.props.featureChangePurposeToDescription;return n.a.createElement(lt["a"],b()({className:"p-channel_purpose_dialog",title:t?mt.t("Edit channel description"):mt.t("Edit channel purpose"),goButtonText:t?mt.t("Update description"):mt.t("Update purpose"),onGo:this.onSubmit,footerText:mt.t("Describe what this channel is for.")},this.props),n.a.createElement(ut["a"],{renderInput:this.renderInput,completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,shouldCompleteOnTab:false}))}}]);return t}(r["Component"]);ft.displayName="ChannelPurposeDialog";ft.defaultProps=vt;var bt=function e(t,a){var r=a.channelId;var n=Object(p["a"])({label:"CHANNEL-PURPOSE",state:t});var i=Object(N["e"])(t,r);var s=i&&i.purpose&&i.purpose.value;var o=s&&Object(dt["a"])(t,{text:s});return{channelId:i.id,currentRawPurpose:s,currentFormattedPurpose:o,featureM11nChannelDetails:Object(E["isFeatureEnabled"])(t,"feature_m11n_channel_details"),featureChangePurposeToDescription:Object(E["isFeatureEnabled"])(t,"feature_change_purpose_to_description"),logger:n}};var gt=function e(t){return{submitChannelPurpose:function e(){return t(ot["F"].apply(void 0,arguments))}}};var _t=Object(i["connect"])(bt,gt)(ft);var yt=a(1553);var kt=a(1924);var Ot=a(1471);var Ct=a(1200);var Et=a(23);var St=a(134);var wt=new Xe["b"]("message_pane_foreword");var It={onClick:g["b"].func};var jt={onClick:c.a.noop};var Tt=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(St["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(Et["b"],{type:"plus",size:"inherit"})," ",wt.t("Add an app"))}}]);return t}(r["PureComponent"]);Tt.displayName="AppButton";Tt.defaultProps=jt;var At=Tt;var Nt=new Xe["b"]("message_pane_foreword");var Mt={isPrivate:g["b"].bool,onClick:g["b"].func};var Pt={isPrivate:false,onClick:c.a.noop};var Rt=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"render",value:function e(){var t=this.props,a=t.isPrivate,r=t.onClick;var i=void 0;i=a?Nt.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):Nt.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"});return n.a.createElement(St["a"],{className:"p-message_pane__foreword__button",onClick:r},n.a.createElement(Et["b"],{type:"user",size:"inherit"})," ",i)}}]);return t}(r["PureComponent"]);Rt.displayName="InviteButton";Rt.defaultProps=Pt;var xt=Rt;var Dt=a(192);var Ft=new Xe["b"]("message_pane_foreword");var Lt={onClick:g["b"].func,featureChangePurposeToDescription:g["b"].bool};var Bt={onClick:c.a.noop,featureChangePurposeToDescription:false};var Ut=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"render",value:function e(){var t=this.props,a=t.onClick,r=t.featureChangePurposeToDescription;return n.a.createElement(St["a"],{className:"p-message_pane__foreword__button",onClick:a},n.a.createElement(Et["b"],{type:"pencil",size:"inherit"})," ",r?Ft.t("Set a description"):Ft.t("Set a purpose"))}}]);return t}(r["PureComponent"]);Ut.displayName="PurposeButton";Ut.defaultProps=Bt;var qt=Object(Dt["a"])("feature_change_purpose_to_description")(Ut);var Wt={channelId:g["b"].string,purpose:g["b"].string,isUserRestricted:g["b"].bool,isChannelArchived:g["b"].bool,channelType:g["b"].string,clogger:g["b"].object.isRequired,canInviteToChannel:g["b"].bool,canAddAppsToChannel:g["b"].bool,startChannelInviteModal:g["b"].func,openAppsBrowserModal:g["b"].func,openModal:g["b"].func,featureSonicChannelInviteModal:g["b"].bool,featureM11nAppsBrowser:g["b"].bool};var Ht={channelId:null,purpose:null,isUserRestricted:false,isChannelArchived:false,channelType:null,canInviteToChannel:false,canAddAppsToChannel:false,startChannelInviteModal:l["noop"],openModal:l["noop"],openAppsBrowserModal:l["noop"],featureSonicChannelInviteModal:false,featureM11nAppsBrowser:false};var Gt=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);a.onInviteButtonClick=a.onInviteButtonClick.bind(a);a.onAppButtonClick=a.onAppButtonClick.bind(a);return a}fe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(Ie["a"])()?this.props.openModal({element:n.a.createElement(_t,{channelId:t})}):it(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props,a=t.channelId,r=t.clogger,n=t.featureSonicChannelInviteModal;r.track(Ae["l"].CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}});n?this.props.startChannelInviteModal({channelId:a}):Object(yt["a"])(a,[],"channel_foreword")}},{key:"onAppButtonClick",value:function e(){var t;var a=this.props,r=a.channelId,n=a.clogger;var i=Ae["l"].CHANNEL_FOREWORD;var s=(t={},pe()(t,Ae["y"].action,Ae["w"].CLICK),pe()(t,Ae["y"].ui_element,Ae["z"].BTN_ADD_APPS),t);n.track(i,{contexts:pe()({},Ae["c"].ui_context,s)});this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:true,referringEventId:i,referringUiContext:s,channelId:r}):Object(Ot["e"])(i,s)}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.canAddAppsToChannel,i=t.isUserRestricted,s=t.purpose,o=t.channelType,l=t.canInviteToChannel,c=t.isChannelArchived;var u=void 0;s||i||c||(u=n.a.createElement(qt,{channelId:a,onClick:this.onPurposeButtonClick}));var d=void 0;r&&(d=n.a.createElement(At,{onClick:this.onAppButtonClick}));var p=void 0;l&&(p=n.a.createElement(xt,{onClick:this.onInviteButtonClick,isPrivate:"private"===o}));return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},u,d,p)}}]);return t}(r["PureComponent"]);Gt.displayName="ChannelForewordButtons";Gt.defaultProps=Ht;function Vt(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return{};var n=Object(Je["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(ae["M"])(e,a);var o=Object(ae["C"])(e,a);return{purpose:i,isUserRestricted:Object($e["isRestricted"])(n),isChannelArchived:Object(M["isArchived"])(r),channelType:Object(M["getChannelType"])(r),clogger:Object(m["a"])({state:e}),canInviteToChannel:s,canAddAppsToChannel:o,featureSonicChannelInviteModal:Object(E["isFeatureEnabled"])(e,"feature_sonic_channel_invite_modal"),featureM11nAppsBrowser:Object(E["isFeatureEnabled"])(e,"feature_m11n_apps_browser")}}var Kt=function e(t){return{startChannelInviteModal:function e(){return t(kt["b"].apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(Ct["a"].apply(void 0,arguments))},openModal:function e(){return t(st["openModal"].apply(void 0,arguments))}}};var zt=Object(i["connect"])(Vt,Kt)(Gt);var Qt=a(118);var Yt=new Xe["b"]("message_pane_foreword");var Jt={channelId:g["b"].string,description:g["b"].node,purpose:g["b"].string,isUserRestricted:g["b"].bool,userCanSetPurposeForChannel:g["b"].bool,featureChangePurposeToDescription:g["b"].bool,openModal:g["b"].func};var Xt={channelId:null,description:null,purpose:null,isUserRestricted:false,userCanSetPurposeForChannel:true,featureChangePurposeToDescription:false,openModal:l["noop"]};var Zt=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);return a}fe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(Ie["a"])()?this.props.openModal({element:n.a.createElement(_t,{channelId:t})}):it(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props,a=t.purpose,r=t.featureChangePurposeToDescription;if(!a)return null;return n.a.createElement("span",null," ",r?Yt.t("Description:"):Yt.t("Purpose:")," ",n.a.createElement(Qt["a"],{text:a}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,a=t.purpose,r=t.isUserRestricted,i=t.userCanSetPurposeForChannel;if(!a||r||!i)return null;return n.a.createElement("span",{className:"no_wrap"}," ","(",n.a.createElement(St["a"],{onClick:this.onPurposeButtonClick},Yt.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(r["PureComponent"]);Zt.displayName="ChannelForewordDescription";Zt.defaultProps=Xt;var $t=function e(t,a){var r=Object(ae["z"])(t,a.channelId),n=r.ok;return{userCanSetPurposeForChannel:n}};var ea=function e(t){return{openModal:function e(){return t(st["openModal"].apply(void 0,arguments))}}};var ta=Object(i["connect"])($t,ea)(Object(Dt["a"])("feature_change_purpose_to_description")(Zt));var aa=new Xe["b"]("message_pane_foreword");var ra={channelId:g["b"].string,purpose:g["b"].string,creatorIsYou:g["b"].bool,createdById:g["b"].string,dateCreated:g["b"].number,isPrivate:g["b"].bool,isUserRestricted:g["b"].bool,featureLongerChannelNames:g["b"].bool.isRequired};var na={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var ia=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.channelId,r=t.featureLongerChannelNames;var i=Oe()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!r});var s={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:i},r?n.a.createElement(rt["a"],{channelId:a}):n.a.createElement(at["a"],{channelId:a,inline:true,iconProps:s}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,r=t.createdById,i=t.creatorIsYou,s=t.dateCreated,o=t.isPrivate,l=t.purpose,c=t.isUserRestricted,u=t.featureLongerChannelNames;var d=void 0;if(s){d=Object(Ze["l"])(s);d=Object(Ze["f"])(s)||Object(Ze["g"])(s)?d.toLowerCase():aa.t("on {date}",{date:d})}else d=aa.rt("on {date}",{date:n.a.createElement(et["a"],{type:"unknown"})});var p={inherit:true,align:"baseline"};var m=u?n.a.createElement("strong",null,n.a.createElement(rt["a"],{channelId:a,boldIcon:true})):n.a.createElement(at["a"],{channelId:a,inline:true,iconProps:p,className:"bold"});var h=void 0;if(i)h=o?aa.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:d,name:m}):aa.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:d,name:m});else{var v=r?n.a.createElement(tt["a"],{id:r,showTooltip:true}):n.a.createElement(et["a"],{type:"unknown"});h=o?aa.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:d,name:m}):aa.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:d,name:m})}return n.a.createElement(ta,{channelId:a,description:h,purpose:l,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isPrivate;var i=Oe()("p-message_pane__foreword",{"p-message_pane__foreword--private":r});return n.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),n.a.createElement(zt,{channelId:a}))}}]);return t}(r["PureComponent"]);ia.displayName="ChannelForeword";ia.defaultProps=na;function sa(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return{};var n=Object(Je["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(M["isPrivateChannel"])(r);return{purpose:i,creatorIsYou:n&&n.id===r.creator,createdById:r.creator,dateCreated:r.created,isPrivate:s,isUserRestricted:Object($e["isRestricted"])(n),featureLongerChannelNames:Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var oa=Object(i["connect"])(sa)(ia);var la=a(213);var ca=a(97);var ua=a(38);var da=a(1190);var pa=a(429);var ma=a(27);var ha=a(44);var va=new Xe["b"]("message_pane_foreword");var fa={botName:g["b"].string,botId:g["b"].string,clogger:g["b"].object.isRequired,openAboutAppWithMemberId:g["b"].func};var ba={botName:null,botId:null,openAboutAppWithMemberId:void 0};var ga=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}fe()(t,[{key:"onClick",value:function e(){var t=this.props.botId;this.props.openAboutAppWithMemberId({memberId:t});var a=this.props.clogger;a.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return n.a.createElement(St["a"],{className:"p-message_pane__foreword__button",onClick:this.onClick},n.a.createElement(Et["b"],{type:"lightbulb-o",size:"inherit"})," ",va.t("How does {name} work?",{name:Object(Xe["q"])(t)}))}}]);return t}(r["PureComponent"]);ga.displayName="AppHelpButton";ga.defaultProps=ba;function _a(e,t){var a=t.botId;var r=Object(Je["e"])(e,a);var n=Object(m["a"])({state:e});if(!r)return{clogger:n};var i=Object($e["getMemberMentionName"])(r);return{botName:i,clogger:n}}var ya=function e(t){return{openAboutAppWithMemberId:function e(){return t(da["c"].apply(void 0,arguments))}}};var ka=Object(i["connect"])(_a,ya)(ga);var Oa=new Xe["b"]("message_pane_foreword");var Ca={isAppSpaceEnabled:g["b"].bool.isRequired,memberId:g["b"].string,type:g["b"].oneOf(["self","bot","member"]).isRequired,prefWhoCanSeeThis:g["b"].bool,openAboutAppWithMemberId:g["b"].func,showMemberProfile:g["b"].func.isRequired,featureReactMemberProfileCard:g["b"].bool.isRequired};var Ea={memberId:null,prefWhoCanSeeThis:false,openAboutAppWithMemberId:l["noop"]};var Sa=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMemberClick=a.onMemberClick.bind(a);return a}fe()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var a=this.props,r=a.memberId,n=a.featureReactMemberProfileCard;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:r}):n?this.props.showMemberProfile({memberId:r}):Object(Pe["i"])(r)}},{key:"canAppSpaceBeUsed",value:function e(){var t=this.props,a=t.isAppSpaceEnabled,r=t.type;return"bot"===r&&a}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(ma["c"],{onClick:this.onMemberClick},n.a.createElement(pa["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true})))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberId,r=t.type;if("self"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},Oa.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=Oa.rt("This is the very beginning of your direct message history with {name}",{name:n.a.createElement(tt["a"],{id:a,showTooltip:true})});this.props.prefWhoCanSeeThis&&(i=Oa.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:n.a.createElement(tt["a"],{id:a,showTooltip:true})},function(e){var t=e.text,a=e.key;return n.a.createElement(ha["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"renderButtons",value:function e(){var t=this.props.memberId;if(this.canAppSpaceBeUsed())return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},n.a.createElement(ka,{botId:t}));return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(r["PureComponent"]);Sa.displayName="BaseImForeword";Sa.defaultProps=Ea;function wa(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return{};var n=Object(M["getMemberIdFromIm"])(r);var i=Object(Je["e"])(e,n);var s=Object(E["getCurrentUserId"])(e);var o=void 0;o=n===s?"self":Object($e["isAppOrBot"])(i)?"bot":"member";return{isAppSpaceEnabled:Object(la["isAppSpaceEnabled"])(e),memberId:n,type:o,prefWhoCanSeeThis:Object(ua["h"])(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(E["isFeatureEnabled"])(e,"feature_react_member_profile_card")}}var Ia=function e(t){return{openAboutAppWithMemberId:function e(){return t(da["c"].apply(void 0,arguments))},showMemberProfile:function e(){return t(ca["j"].apply(void 0,arguments))}}};var ja=Object(i["connect"])(wa,Ia)(Sa);ja.propTypes={channelId:g["b"].string};ja.defaultProps={channelId:null};var Ta=ja;var Aa=a(646);var Na=new Xe["b"]("message_pane_foreword");var Ma={memberId:g["b"].string,sharedTeam:g["b"].object};var Pa={memberId:void 0,sharedTeam:void 0};var Ra=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(pa["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.sharedTeam,r=t.memberId;var i=!a||Object(He["isUnknown"])(a)?n.a.createElement(Aa["a"],{type:"unknown"}):n.a.createElement("strong",null,Object(He["getTeamDisplayName"])(a));var s=Na.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:n.a.createElement(tt["a"],{id:r,showTooltip:true}),team:i});return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(r["PureComponent"]);Ra.displayName="ImSharedForeword";Ra.defaultProps=Pa;function xa(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return null;var n=Object(Je["e"])(e,Object(M["getMemberIdFromIm"])(r));var i=Object($e["getMemberTeamId"])(n);var s=Object(We["j"])(e,i);return{memberId:Object(M["getMemberIdFromIm"])(r),sharedTeam:s}}var Da=Object(i["connect"])(xa)(Ra);var Fa=a(102);var La=a(582);var Ba=a(199);var Ua=a(345);var qa=new Xe["b"]("message_pane_foreword");var Wa={channelType:g["b"].string.isRequired,channelName:g["b"].string,clogger:g["b"].object.isRequired,showPricingPlans:g["b"].func.isRequired,workspaceName:g["b"].string,teamMessageLimitInSeconds:g["b"].number,clientTheme:g["b"].oneOf(["light","dark"])};var Ha={channelName:"",workspaceName:"",teamMessageLimitInSeconds:0,clientTheme:"light"};var Ga=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pricingPlansPageUrl="pricing?ui_step=42&ui_element="+a.getClogUiElementVal();a.onClickLearnMore=a.onClickLearnMore.bind(a);return a}fe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}});this.props.showPricingPlans({pricingPlansPageUrl:this.pricingPlansPageUrl,source:"limited_history_foreword"})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"render",value:function e(){var t=this.props,a=t.channelName,i=t.channelType,s=t.clientTheme,o=t.workspaceName,l=t.teamMessageLimitInSeconds;var c=true;var u="";var d="";var p=qa.t("See Upgrade Options");if(l){c=false;u=qa.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(Ua["a"])(l,"{date}"),workspaceName:Object(Xe["q"])(o)});d=qa.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(Ba["a"])(1e4)})}else if("mpim"===i||"im"===i){d=qa.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");u=qa.t("There\u2019s more to this conversation")}else{u=qa.t("There\u2019s more to the conversation in {name}",{name:a});d=qa.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}var m=Oe()("p-message_pane__limited_history_foreword",pe()({},"p-message_pane__limited_history_foreword--"+s,"light"!==s));return n.a.createElement("div",{className:m,"data-qa":"msg_lim_header"},n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline","data-qa":"msg_lim_headline"},c&&n.a.createElement(r["Fragment"],null,n.a.createElement(Fa["b"],{text:":speech_balloon:",emojiSize:Fa["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),u),n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading","data-qa":"msg_lim_subheading"},d),n.a.createElement(ma["d"],{onClick:this.onClickLearnMore,"data-qa":"see_upgrade_options_btn",size:"small"},p))}}]);return t}(r["PureComponent"]);Ga.displayName="LimitedHistoryForeword";Ga.defaultProps=Ha;function Va(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return{};var n=Object(We["d"])(e);var i=n?Object(He["getTeamDisplayName"])(n):"";var s=Object(He["getTeamMessageLimitTimestamp"])(n);var o=0;s>0&&(o=s/1e6);return{channelType:Object(M["getChannelType"])(r),channelName:Object(M["getDisplayNameForChannel"])(e,r),clogger:Object(m["a"])({state:e}),workspaceName:i,teamMessageLimitInSeconds:o}}var Ka={showPricingPlans:La["showPricingPlans"]};var za=Object(i["connect"])(Va,Ka)(Ga);var Qa=a(1427);var Ya=a(294);var Ja=a(191);var Xa=a(189);var Za=a(1315);var $a=a(581);var er=new Xe["b"]("message_pane_foreword");var tr={channelId:g["b"].string.isRequired,memberIds:g["b"].arrayOf(g["b"].string),externalTeams:g["b"].arrayOf(g["b"].object),notificationPermission:g["b"].string,notificationSetting:g["b"].oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:g["b"].bool,prefWhoCanSeeThis:g["b"].bool,openChannelNotificationPrefsModal:g["b"].func,openPrefsModal:g["b"].func,featureReactMemberProfileCard:g["b"].bool.isRequired};var ar={memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true,prefWhoCanSeeThis:false,openChannelNotificationPrefsModal:l["noop"],openPrefsModal:l["noop"]};var rr=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openPrefsDialog=a.openPrefsDialog.bind(a);a.openChannelPrefsDialog=a.openChannelPrefsDialog.bind(a);a.state=Object(Ya["m"])();return a}fe()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(Ya["m"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var a=this.state,r=a.notificationsEnabled,i=a.notificationDisabledType;if(r)return null;switch(i){case"not_yet_allowed":return er.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var a=e.key,r=e.text;return n.a.createElement(St["a"],{onClick:t.openPrefsDialog,key:a},r)});case"not_allowed":return er.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return er.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,a=e.text;return n.a.createElement(Xa["a"],{target:"_blank",key:t,href:"/downloads"},a)});default:return null}}},{key:"openPrefsDialog",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"openChannelPrefsDialog",value:function e(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId,entryPoint:"foreward"})}},{key:"renderAvatars",value:function e(){var t=this.props,a=t.memberIds,r=t.featureReactMemberProfileCard;var i=a.map(function(e){return n.a.createElement(Ja["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:r})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i)}},{key:"renderTeamName",value:function e(t){if(Object(He["isUnknown"])(t))return n.a.createElement(Aa["a"],{type:"unknown"});return Object(He["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberIds,r=t.externalTeams;if(r.length){var i=r.map(this.renderTeamName);var s=er.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(Xe["i"])(i,{noEscape:true,react:true,strong:true})});return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},s,this.renderDescriptionActions())}var o=a.map(function(e){return n.a.createElement(tt["a"],{id:e,showTooltip:true})});var l=er.rt("This is the very beginning of your direct message history with {names}",{names:Object(Xe["i"])(o,{noEscape:true,react:true})});this.props.prefWhoCanSeeThis&&(l=er.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(Xe["i"])(o,{noEscape:true,react:true}),number:o.length+1},function(e){var t=e.text,a=e.key;return n.a.createElement(Xa["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},l,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var a=this.props.notificationSetting;if("everything"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},er.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton());if("mentions_dms"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},er.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},er.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return n.a.createElement(St["a"],{onClick:this.openChannelPrefsDialog},er.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(r["PureComponent"]);rr.displayName="BaseMpimForeword";rr.defaultProps=ar;var nr=Object(u["createSelector"])(function(e,t){var a=t.channelId;return Object(N["e"])(e,a)},E["getCurrentUserId"],function(e,t){var a=Object(M["getMemberIdsFromMpim"])(e);return Object(l["without"])(a,t)});function ir(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return null;var n=[];if(Object(M["isExternallySharedChannel"])(r)){var i=Object(M["getPendingAndConnectedTeamIds"])(e,r,{includeSelfTeamId:true});var s=Object(He["omitCurrentTeamId"])(e,i);n=s.map(function(t){return Object(We["j"])(e,t)})}return{memberIds:nr(e,{channelId:a}),externalTeams:n,notificationPermission:Object(Qa["getNotificationPermission"])(e),notificationSetting:Object(Ya["g"])(e,a),featureReactMessages:Object(E["isFeatureEnabled"])(e,"feature_react_messages"),prefWhoCanSeeThis:Object(ua["h"])(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(E["isFeatureEnabled"])(e,"feature_react_member_profile_card")}}function sr(e){return{openChannelNotificationPrefsModal:function t(){return e(Za["a"].apply(void 0,arguments))},openPrefsModal:function t(){return e($a["a"].apply(void 0,arguments))}}}var or=Object(i["connect"])(ir,sr)(rr);or.propTypes={channelId:g["b"].string};or.defaultProps={channelId:null};var lr=or;var cr=new Xe["b"]("message_pane_foreword");var ur="USLACKBOT";var dr=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},cr.t("Hi, Slackbot here!"));var a=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex","data-qa":"im_foreword_description"},n.a.createElement(Ja["b"],{userId:ur,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,cr.rt("You can ask me simple questions about how Slack works, or just type a few keywords. I\u2019ll search the <a>Help Center</a> to help you find more info.",{fallbackHash:"0d892d295ed431c242e406d752976a0f4d8d8b38"},function(e){var t=e.key,a=e.text;return n.a.createElement(ha["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)})),n.a.createElement("p",{className:"margin_0"},cr.rt("For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.",{fallbackHash:"bb42704f8751d2e3be33f3dd809a406c5a787d1e"},function(e){var t=e.key,a=e.text;return n.a.createElement(ha["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)}))));var r=Oe()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return n.a.createElement("div",{className:r},t,a)}}]);return t}(r["Component"]);dr.displayName="SlackbotForeword";var pr=dr;var mr=a(230);var hr=new Xe["b"]("message_pane_foreword");var vr={channel:g["b"].object,channelId:g["b"].string,isPrivate:g["b"].bool,isPendingShared:g["b"].bool,sharedTeams:g["b"].arrayOf(g["b"].shape({id:g["b"].string.isRequired,name:g["b"].string})),externalTeams:g["b"].arrayOf(g["b"].shape({id:g["b"].string.isRequired,name:g["b"].string})),purpose:g["b"].string,isUserRestricted:g["b"].bool,featureLongerChannelNames:g["b"].bool.isRequired};var fr={channel:null,channelId:null,isPrivate:false,isPendingShared:false,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:false};var br=function(e){ye()(t,e);function t(){he()(this,t);var e=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}fe()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.channel,r=t.featureLongerChannelNames;var i=Oe()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!r});var s={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:i},r?n.a.createElement(rt["a"],{channel:a}):n.a.createElement(at["a"],{channel:a,inline:true,iconProps:s}))}},{key:"renderAvatars",value:function e(){var t=this.props,a=t.channel,r=t.sharedTeams;if(c.a.isEmpty(r))return null;var i=r.map(function(e){var t=Object(M["isPendingSharedForTeamId"])(a,e.id);return n.a.createElement(mr["b"],{key:e.id,id:e.id,size:56,isPendingShared:t,className:"p-message_pane__foreword__avatar"})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i)}},{key:"renderTeamName",value:function e(t){if(Object(He["isUnknown"])(t))return n.a.createElement(Aa["a"],{type:"unknown"});return Object(He["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,r=t.purpose,i=t.sharedTeams,s=t.externalTeams,o=t.isPendingShared,l=t.isUserRestricted;var c=void 0;if(o){var u=s.map(this.renderTeamName);var d=Object(Xe["i"])(u,{noEscape:true,react:true,strong:true});c=hr.rt("This is a shared channel. Waiting for {names} to join...",{names:d})}else{var p=i.map(this.renderTeamName);var m=Object(Xe["i"])(p,{noEscape:true,react:true,strong:true});c=hr.rt("This is a shared channel between {names}.",{names:m})}return n.a.createElement(ta,{channelId:a,description:c,purpose:r,isUserRestricted:l})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isPrivate;var i=Oe()("p-message_pane__foreword",{"p-message_pane__foreword--private":r});return n.a.createElement("div",{className:i},this.renderAvatars(),this.renderTitle(),this.renderDescription(),n.a.createElement(zt,{channelId:a}))}}]);return t}(r["PureComponent"]);br.displayName="SharedForeword";br.defaultProps=fr;function gr(e,t){var a=t.channelId;var r=Object(N["e"])(e,a);if(!r)return null;var n=Object(Je["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(M["isPrivateChannel"])(r);var o=Object(M["isExternallySharedChannel"])(r);var l=Object(M["isPendingExternallySharedChannel"])(r);var c=[];var u=[];if(o||l){var d=Object(M["getPendingAndConnectedTeamIds"])(e,r,{includeSelfTeamId:true});c=d.map(function(t){return Object(We["j"])(e,t)});var p=Object(He["omitCurrentTeamId"])(e,d);u=p.map(function(t){return Object(We["j"])(e,t)})}return{channel:r,isPendingShared:l,isPrivate:s,isUserRestricted:n.is_restricted,purpose:i,sharedTeams:c,externalTeams:u,featureLongerChannelNames:Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var _r=Object(i["connect"])(gr)(br);var yr=a(1167);var kr=new Xe["b"]("newxp_onboarding");var Or={step:g["b"].string,clientTheme:g["b"].oneOf(["light","dark"])};var Cr={step:null,clientTheme:"light"};var Er={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var Sr=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===Er.CANCELLED)return kr.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ha["a"],{key:t,onClick:yr["b"]},a)});if(this.props.step===Er.SLACKBOT)return kr.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ha["a"],{key:t,onClick:yr["a"]},a)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==Er.START)return null;return n.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},n.a.createElement(ma["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:yr["g"]},kr.rt("Explore Slack")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},kr.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ha["a"],{key:t,onClick:yr["a"],"data-qa":"skip_tutorial"},a)})))}},{key:"render",value:function e(){var t=this.props,a=t.step,r=t.clientTheme;var i=Oe()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===a});var s=Oe()("p-message_pane__newxp_foreword__welcome_text",pe()({},"p-message_pane__newxp_foreword__welcome_text--"+r,"light"!==r));return n.a.createElement("div",{className:i},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},n.a.createElement("div",{className:s},kr.rt("Welcome!")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},kr.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(r["PureComponent"]);Sr.displayName="NewxpForeword";Sr.defaultProps=Cr;var wr=Sr;var Ir=Ye;var jr=new Xe["b"]("message_pane_foreword");var Tr={clogger:g["b"].object.isRequired,clientTheme:g["b"].oneOf(["light","dark"])};var Ar={clientTheme:"light"};var Nr=35;var Mr=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:Nr}}})}},{key:"render",value:function e(){var t=this.props.clientTheme;var a="/pricing?ui_step=42&ui_element="+Nr;var r=Oe()("p-message_pane__limited_history_alert",pe()({},"p-message_pane__limited_history_alert--"+t,"light"!==t));return n.a.createElement("div",{className:r},n.a.createElement(Fa["b"],{text:":speech_balloon:",emojiSize:Fa["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",jr.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",n.a.createElement(ha["a"],{href:a,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},jr.t("Learn More")))}}]);return t}(r["PureComponent"]);Mr.displayName="LimitedHistoryAlert";Mr.defaultProps=Ar;var Pr=function e(t){return{clogger:Object(m["a"])({state:t})}};var Rr=Object(i["connect"])(Pr)(Mr);var xr=a(1303);var Dr=a(1401);var Fr=a(1474);var Lr=a(2035);var Br=a(147);var Ur=a.n(Br);var qr=a(891);var Wr=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(a.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return a}fe()(t,[{key:"layout",value:function e(){Ur()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var a=this.containerHeight-this.totalHeight;this.tops=c.a.mapValues(this.tops,function(e){return e+a});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[c.a.first(this.keys)]=0)}}]);return t}(qr["a"]);var Hr=Wr;var Gr=a(1696);var Vr=a(2036);var Kr=a(1193);var zr=a(1194);var Qr=a(4782);var Yr=Qr["a"];var Jr=a(86);var Xr=a(418);var Zr=a(1670);var $r=a(1706);var en=a(3748);var tn=Fr["a"];var an=Lr["a"];var rn={channelId:g["b"].string,timestamps:g["b"].arrayOf(g["b"].string),requestHistory:g["b"].func,lastReadTs:g["b"].string,isGhostLastRead:g["b"].bool,startTs:g["b"].string,startTsOffset:g["b"].number,highlightTs:g["b"].string,focusRequestedTs:g["b"].string,rollups:g["b"].objectOf(Se["a"].Rollup()),setUnreadPoint:g["b"].func,isLoading:g["b"].bool,isLoadingOlder:g["b"].bool,reachedStart:g["b"].bool,reachedEnd:g["b"].bool,prevReachedEnd:g["b"].bool,oldest:g["b"].string,latest:g["b"].string,onScroll:g["b"].func,onVisibleRowsChanged:g["b"].func,doneHighlighting:g["b"].func,isFileExpanding:g["b"].bool,isLimited:g["b"].bool,isSlackbotIm:g["b"].bool,useStickyDayDividers:g["b"].bool,shouldIgnoreScrollKeys:g["b"].func,shouldIgnoreArrowKeys:g["b"].func,channelSessionId:g["b"].string,theme:g["b"].string,firstUnreadTs:g["b"].string,featureReactMessages:g["b"].bool,featureTinyspeck:g["b"].bool,featureAriaApplicationMode:g["b"].bool,messageContainerType:g["b"].string,ariaLabel:g["b"].string.isRequired,teamId:g["b"].string,enterpriseId:g["b"].string,sessionId:g["b"].string,msgTriggers:g["b"].object,currentUserId:g["b"].string,jumpToTimestamp:g["b"].func,makeMessageSummary:g["b"].func,isScreenReaderEnabled:g["b"].bool,windowLastFocusEvent:g["b"].number,onFocusEnter:g["b"].func,onFocusLeave:g["b"].func,isBannerVisible:g["b"].bool,setFocusRequestedTs:g["b"].func,showThreadIfThreadable:g["b"].func,currentThreadKey:g["b"].string,isThreadable:g["b"].func,threadListId:g["b"].string,telemeter:g["b"].object,featureOfflineMode:g["b"].bool,isOffline:g["b"].bool,userAttentionIsOnChat:g["b"].bool,clientTheme:g["b"].string,removeFromSectionNavigation:g["b"].func,addToSectionNavigation:g["b"].func,setInitialActiveSection:g["b"].func};var nn={channelId:null,timestamps:[],requestHistory:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:c.a.noop,isFileExpanding:false,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:c.a.noop,onVisibleRowsChanged:c.a.noop,doneHighlighting:c.a.noop,isLimited:false,isSlackbotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:c.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:c.a.noop,onFocusLeave:c.a.noop,isBannerVisible:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,currentThreadKey:void 0,isThreadable:c.a.noop,threadListId:void 0,telemeter:{store:c.a.noop,measure:c.a.noop},featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,clientTheme:"light",removeFromSectionNavigation:c.a.noop,addToSectionNavigation:c.a.noop,setInitialActiveSection:c.a.noop};var sn=80;var on=60;var ln=64;var cn=120;var un=28;var dn="MESSAGE-LIST";var pn=864e5;var mn={ABOVE:1,VISIBLE:2,BELOW:3};var hn="0000000000.000001";var vn=function e(t){var a=Math.floor(t/1e3);return a+".000000"};var fn=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=Object(Vr["a"])();a.state={degraded:r,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false,isFileExpanding:false};a.DEFAULT_ROW_HEIGHT="light"===e.theme?sn:on;a.STICKY_EPSILON=a.DEFAULT_ROW_HEIGHT/2;a.ANCHOR_OFFSET=r?cn:ln;a.heightCache=new Gr["a"]({DEFAULT_HEIGHT:a.DEFAULT_ROW_HEIGHT});a.layout=new Hr({heightCache:a.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:a.isFirstRowLimitedHistoryForeword.bind(a),STICKY_EPSILON:a.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:a.ANCHOR_OFFSET});a.keys=[];a.rows=[];a.visibleRows=[];a.partiallyVisibleRows=[];a.unreadIndex=null;a.list=null;a.listId="c-message_list";a.useAnchor=true;a.keyToScrollTo=null;a.width=0;a.hasRenderedOneMessage=false;a.requestAround=a.requestAround.bind(a);a.requestOlder=a.requestOlder.bind(a);a.requestNewer=a.requestNewer.bind(a);a.renderRow=a.renderRow.bind(a);a.setListRef=a.setListRef.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.isItemAriaExpanded=a.isItemAriaExpanded.bind(a);a.onScroll=a.onScroll.bind(a);a.onListScrolled=a.onListScrolled.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onItemTabWithin=a.onItemTabWithin.bind(a);a.debouncedOnListScrolled=Object(Be["a"])(a.onListScrolled,150);a.isMessage=a.isMessage.bind(a);a.onSelectionChange=a.onSelectionChange.bind(a);a.onJumpToUnreadShortcut=a.onJumpToUnreadShortcut.bind(a);a.focus=a.focus.bind(a);a.onShiftPageUp=a.onShiftPageUp.bind(a);a.onShiftPageDown=a.onShiftPageDown.bind(a);a.onEnd=a.onEnd.bind(a);a.onArrowKeyRight=a.onArrowKeyRight.bind(a);a.scrollToOffset=c.a.throttle(a.scrollToOffset.bind(a),200);a.messagesRendered={};a.loadingHistoriesSeen=0;a.loadingHistoriesSeenHighEnd=0;a.loadingHistoriesPerHowManyMessages=84;a.loadingHistoriesPerHowManyMessagesHighEnd=500;a.scrollMetricsGatheringEnabled=Object(Fe["a"])(1)||a.props.featureTinyspeck;if(a.scrollMetricsGatheringEnabled){var n=Object(o["d"])(e.teamId);var i=Object(d["c"])({state:n});a.debounceBatchMessagesSeen=c.a.debounce(function(){i.store("modern_history_load_seen_per_84_messages",a.loadingHistoriesSeen,{allow_zero:true});a.loadingHistoriesSeen=0},1e3);a.debounceBatchMessagesSeenHighEnd=c.a.debounce(function(){i.store("modern_history_load_seen_per_500_messages",a.loadingHistoriesSeenHighEnd,{allow_zero:true});a.loadingHistoriesSeenHighEnd=0},1e3)}a.debounceCountHistoryLoadSeen=c.a.debounce(function(){a.loadingHistoriesSeen+=1;a.loadingHistoriesSeenHighEnd+=1},1e3);a.prqMetrics={channelSwitch:{}};return a}fe()(t,[{key:"componentDidUpdate",value:function e(t){if(this.keyToScrollTo&&this.list){this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll});this.keyToScrollTo=null}var a=this.props.isLoading||this.props.isLoadingOlder;if(c.a.isFunction(this.onJump)&&!a&&this.props.timestamps.length){this.onJump();this.onJump=null}var r=!!t.isFileExpanding&&!this.props.isFileExpanding;r?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t);var n={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Kr["a"])(n)&&this.props.addToSectionNavigation();Object(zr["a"])(n)&&this.props.removeFromSectionNavigation()}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var a=false;this.trackChannelSwitchWithSync(je["g"],a)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var r=true;this.trackChannelSwitchWithSync(je["f"],r)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){Object(je["f"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);Object(je["g"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}var a=Object(o["d"])(this.props.teamId);var r=Object(d["c"])({state:a});var n="start_channel_change_"+this.props.channelId;var i=r.measure(n,"channel_change_react_msgs",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:i,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:je["c"],hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,a){var r="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;var n=Object(o["d"])(this.props.teamId);var i=Object(d["c"])({state:n});t(i.measure(r,"channel_change_not_stored",null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,je["a"],this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);if(a){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"findTimestampClosestToStartTs",value:function e(){var t=this.props,a=t.startTs,r=t.timestamps;if(!r.length)return false;if(!a)return null;return c.a.find(r,function(e){return e>=a})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var a=this;var r=this.props,n=r.lastReadTs,i=r.isScreenReaderEnabled,s=r.firstUnreadTs;var o=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var l=c.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(l){if(o){this.list.setActiveItem(s);this.list.scrollToKey(s)}else this.list.scrollToKey(l);return}this.jumpToTimestamp({ts:n,onJump:function e(){a.state.hasKeyboardFocus&&a.list.setActiveItem(a.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var a=this.layout.getTotalHeight();var r=this.height;return t+r>=Math.floor(a)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return mn.ABOVE;if(!this.list)return mn.ABOVE;var t=this.list.getVisibleRange(),a=t.start,r=t.end;if(this.unreadIndex<a)return mn.ABOVE;if(this.unreadIndex<r)return mn.VISIBLE;return mn.BELOW}},{key:"getVisibleRows",value:function e(t){if(!this.list)return[];var a=this.list.getVisibleRange(void 0,t),r=a.start,n=a.end;var i=this.rows.slice(r,n);return i}},{key:"getScrollmarkForFocusedItem",value:function e(t){var a=t===hn?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(a)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var a=this.list.getScrollTop();if(this.layout.shouldStickToBottom(a))return null;var r=this.props.timestamps;var n=this.layout.findAnchor(r,r,a+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-a;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"isMessage",value:function e(t){var a=this.rows[t.index];return a&&("message"===a.type||"foreword"===a.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows(false);var a=this.getVisibleRows(true);if(c.a.isEqual(t,this.visibleRows)&&c.a.isEqual(a,this.partiallyVisibleRows))return;this.visibleRows=t;this.partiallyVisibleRows=a;this.props.onVisibleRowsChanged(t,a)}},{key:"onShiftPageUp",value:function e(){var t=this;var a=this.getTimestampOfPrevDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=vn(a);var i=this.props.isBannerVisible?ln:un;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onShiftPageDown",value:function e(){var t=this;var a=this.getTimestampOfNextDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=vn(a);var i=this.props.isBannerVisible?ln:un;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onEnd",value:function e(){var t=this;var a=this.props,r=a.reachedEnd,n=a.timestamps;var i=r?n[n.length-1]:null;this.jumpToTimestamp({ts:i,onJump:function e(){if(!t.state.hasKeyboardFocus)return;var a=t.rows;var r=a[a.length-1];var n=r&&r.type;"message"===n&&t.list.setActiveItem(r.ts)}});return false}},{key:"onArrowKeyRight",value:function e(t){var a=t.target;if(Object(Le["a"])(a))return;var r=this.props,n=r.channelId,i=r.timestamps;if(!this.state.hasKeyboardFocus)return;var s=this.list.getInitialActiveItem();if(!s||!c.a.includes(i,s))return;var o=this.props.showThreadIfThreadable({channelId:n,threadTs:s,requestFocus:true});o&&this.blur()}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!Xr["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){a.props.onFocusEnter(t);var e=a.props,r=e.focusRequestedTs,n=e.setFocusRequestedTs;r&&r===a.list.getActiveItem()&&n(null)})}},{key:"onFocusLeave",value:function e(t){var a=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){a.props.onFocusLeave(t)})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&r}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&!r}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=c.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(p["a"])({teamId:this.props.teamId}).info(dn,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+c.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var a=this.props,r=a.oldest,n=a.latest,i=a.timestamps,s=a.startTs;if(c.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=r||i&&c.a.first(i)||s;var l=n||i&&c.a.last(i)||s;var u=this.props.requestHistory({latest:o,oldest:l});if(u){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);u.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return u}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,a){var r=a.hasFocus,i=a.isHovered,s=a.isExpanded,o=a.itemId;var l=t.ts,u=t.previousMessageTs;var d=c.a.last(this.props.timestamps);var p=l&&l===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var m=c.a.keys(this.messagesRendered).length;m%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();m%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}return n.a.createElement(Yr,{ts:l,key:l,channelId:this.props.channelId,previousMessageTs:u,isLast:l===d,rollup:this.props.rollups[l],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:p,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,isHovered:i,isThreadExpanded:s,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:i||r,hasFocus:r,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable,itemId:o})}},{key:"renderForeword",value:function e(){return n.a.createElement(Ir,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,clientTheme:this.props.clientTheme,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.hasFocus,i=a.isHovered,s=a.isExpanded,o=a.itemId;var l=this.rows[t];if(!l||!l.type)return null;switch(l.type){case"message":return this.renderMessage(l,{hasFocus:r,isHovered:i,isExpanded:s,itemId:o});case"dayDividerLabel":return n.a.createElement($r["b"],{key:l.day,date:l.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return n.a.createElement($r["a"],{key:l.day,date:l.day,isUnread:l.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return n.a.createElement(Zr["a"],{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(Dr["a"],null);return n.a.createElement("div",{key:"loading",className:Oe()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme,"c-message_list__placeholders--client-theme-"+this.props.clientTheme,{"c-message_list__placeholders--legacy":!Object(Ie["a"])()})});case"loadingSpinner":if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(Dr["a"],null);return n.a.createElement("div",{className:"c-message_list__spinner"},n.a.createElement(Jr["a"],{size:"jumbo"}));case"foreword":return this.renderForeword({hasFocus:r});case"limited_history":return n.a.createElement(Rr,{clientTheme:this.props.clientTheme});default:return null}}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.props,n=r.channelId,i=r.isThreadable,s=r.currentThreadKey;if(!i)return;var o=this.rows[a];if(!o||!o.type)return;if("message"!==o.type)return;var l=Object(te["decodeThreadKey"])(s),c=l.threadTs,u=l.channelId;var d=c===t&&n===u;if(i({channelId:n,threadTs:t}))return d;return}},{key:"getAriaLabelForRow",value:function e(t){var a=this.props,r=a.channelId,n=a.makeMessageSummary,i=a.isScreenReaderEnabled;if(!n)return null;var s=this.rows[t];if(!s||!s.type)return null;if("message"!==s.type)return null;var o=s.ts,l=s.previousMessageTs,c=s.isFirstMsgForDay,u=s.isLastMsgForDay,d=s.isFirstUnreadMsg,p=s.day;var m=this.props.rollups[o];if(!this.state.hasKeyboardFocus&&!i)return null;return n({channelId:r,ts:o,isFirstUnreadMsg:d,isFirstMsgForDay:c,isLastMsgForDay:u,previousMessageTs:l,day:p,rollup:m,hasFocus:this.state.hasKeyboardFocus,viewContext:Ne["MESSAGE_CONTAINERS"].MESSAGE_PANE})}},{key:"componentWillReceiveProps",value:function e(t){var a=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(p["a"])({teamId:a.props.teamId}).info(dn,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+c.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var r=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(c.a.inRange(r,c.a.floor(c.a.first(n)),c.a.ceil(c.a.last(n)))&&t.channelId===this.props.channelId){var s=c.a.findLast(i,function(e){return e<=t.startTs});this.keyToScrollTo=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(p["a"])({teamId:this.props.teamId}).info(dn,"Switching channels: "+t.channelId+" timestamps: "+c.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function e(t){return c.a.groupBy(t,function(e){return Object(Ue["a"])(e)})}},{key:"getTimestampsForDays",value:function e(t){return c.a.keys(this.groupTimestampsByDay(t)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function e(){var t=this.list.getVisibleRange(),a=t.start;var r=this.rows[a];if(!r)return;if("dayDivider"===r.type)return r.day.toString();if("dayDividerLabel"===r.type)return r.day.toString();if("message"===r.type)return r.day.ts.toString();return}},{key:"getStartTimestampForDayNavigation",value:function e(){if(this.state.hasKeyboardFocus)return Object(Ue["a"])(this.list.getInitialActiveItem());return this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampOfFirstMessageForDay(t);if(!a)return t;if(a&&!this.list.isItemInView(a))return t;var r=this.getTimestampsForDays(this.props.timestamps);var n=c.a.indexOf(r,t);var i=n-1;return r[i]}},{key:"getTimestampOfNextDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);var n=a[r+1];if(n)return n;return(parseInt(t,10)+pn).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function e(t){var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);if(r<0)return;if(0===r&&!this.props.reachedStart)return;var n=this.groupTimestampsByDay(this.props.timestamps);var i=n[t];return i?i[0]:void 0}},{key:"jumpToTimestamp",value:function e(t){var a=t.ts,r=t.offset,n=t.onJump;c.a.isFunction(n)&&(this.onJump=n);this.props.jumpToTimestamp({ts:a,offset:r})}},{key:"render",value:function e(){var t=this;if(this.props.featureOfflineMode&&this.props.isOffline&&c.a.isEmpty(this.props.timestamps))return n.a.createElement(xr["a"],null);var a=this.groupTimestampsByDay(this.props.timestamps);var r=c.a.keys(a).sort();var i=[];var s=[];var o=[];var l=this.findTimestampClosestToStartTs();var u=this.props.firstUnreadTs;var d=l;if(this.props.reachedStart){s.push(hn);i.push({type:"foreword",ts:hn});if(this.shouldShowLimitedHistoryAlert()){s.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=c.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;c.a.forEach(r,function(e,n){var l=parseInt(e,10);var m=a[e];var h=e+"."+t.props.channelId;var v=p&&c.a.first(m)===u;if(v){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(d=h)}i.push({type:"dayDividerLabel",day:l,showDayDividerAsUnread:v});t.props.useStickyDayDividers&&o.push({key:h,index:s.length});s.push(h);if(n>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:l,showDayDividerAsUnread:v});s.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===n&&t.state.isLoadingOlder){s.push("loading");i.push({type:"loading"})}var f=void 0;c.a.forEach(m,function(e,a){if(p&&0!==a&&e===u){t.unreadIndex=i.length;var o="unreadDivider";s.push(o);i.push({type:"unread",day:l});t.props.startTs===t.props.lastReadTs&&(d=u)}var c=0===n&&t.props.reachedStart;var h=n===r.length-1&&t.props.reachedEnd;var v=0===a&&(n>0||t.props.reachedStart);var b=a===m.length-1&&(n<r.length-1||t.props.reachedEnd);var g=u===e;i.push({type:"message",ts:e,previousMessageTs:f,isFirstMsgForDay:v,isLastMsgForDay:b,isFirstUnreadMsg:g,day:{ts:l,isFirstDay:c,isLastDay:h}});s.push(e);f=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){s.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&d,this.useAnchor&&this.props.startTsOffset);!this.useAnchor&&this.keyToScrollTo&&c.a.isNumber(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset);this.keys=s;this.rows=i;var m={firstVisibleUnreadTs:u,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:c.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers};var h=this.state.degraded?an:tn;var v=this.props.shouldIgnoreScrollKeys;var f=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:v},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:v},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}];var b=function(){if(t.state.isLoading)return null;var e=i[i.length-1];var a=e&&e.type;var r=t.props.startTs===hn||false===l&&"foreword"===a;if(r)return hn;if(null===l&&"message"===a)return e.ts;if(u)return u;if(l)return l;return null}();return n.a.createElement(xe["a"],null,function(e){var a=e.width,r=e.height;if(0===a||0===r)return null;if(a!==t.width){t.heightCache.invalidate();t.width=a}t.height=r;return n.a.createElement(h,{ref:t.setListRef,className:"c-message_list",id:t.listId,ariaLabel:t.props.ariaLabel,height:r,width:a,keys:s,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,stickyItems:o,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd||t.props.prevReachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onItemTabWithin:t.onItemTabWithin,onFocusLeave:t.onFocusLeave,keyCommands:f,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,isFocusableItem:t.isMessage,unrelatedUpdateProps:m,featureReactMessages:t.props.featureReactMessages,activeItem:t.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:t.props.featureAriaApplicationMode,isItemAriaExpanded:t.isItemAriaExpanded,itemAriaControls:t.props.threadListId,featureOfflineMode:t.props.featureOfflineMode,isOffline:t.props.isOffline})})}}]);return t}(De["a"]);fn.displayName="MessageList";fn.propTypes=rn;fn.defaultProps=nn;var bn=Object(qe["a"])(fn);var gn=bn;var _n=a(1669);var yn=a(1465);var kn=a(1073);var On=a(1184);var Cn=a(645);var En=a(1457);var Sn=a(2061);var wn=a(810);var In=a(4721);var jn=a(4722);var Tn=a(4491);var An=a(196);var Nn=a(2480);var Mn=new Xe["b"]("messages");var Pn={firstTimestamp:g["b"].string.isRequired,lastTimestamp:g["b"].string.isRequired,jumpToRecent:g["b"].func.isRequired};var Rn={};var xn=function(e){ye()(t,e);function t(){he()(this,t);return ge()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}fe()(t,[{key:"render",value:function e(){var t=Object(An["a"])(this.props.firstTimestamp,{shortenMonth:true});var a=Object(An["a"])(this.props.lastTimestamp,{shortenMonth:true});return n.a.createElement("div",{className:"p-archives_banner"},n.a.createElement("span",{className:"p-archives_banner__date_range"},Mn.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:a})),n.a.createElement(ma["c"],{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent,"data-qa":"archives_banner"},Mn.t("Jump to recent messages"),n.a.createElement(Et["a"],{type:"arrow_down"})))}}]);return t}(r["PureComponent"]);xn.displayName="ArchivesBanner";var Dn=xn;xn.defaultProps=Rn;var Fn=a(54);var Ln=a(209);var Bn=a(853);var Un=a(108);var qn=a(33);var Wn=new Xe["b"]("messages");var Hn=3e3;var Gn=100;var Vn={hasUnreads:g["b"].bool.isRequired,displayCount:g["b"].number,since:g["b"].oneOfType([g["b"].string,g["b"].number]),known:g["b"].bool,do24hrTime:g["b"].bool,channelId:g["b"].string,ghost:g["b"].bool,unreadPlacement:g["b"].oneOf(Object(l["values"])(mn)),jumpToUnread:g["b"].func,markMostRecentMsgRead:g["b"].func,onHide:g["b"].func};var Kn={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:mn.VISIBLE,jumpToUnread:l["noop"],markMostRecentMsgRead:l["noop"],onHide:l["noop"]};var zn=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.startFade=a.startFade.bind(a);a.onAnimationTick=a.onAnimationTick.bind(a);a.onAnimationEnd=a.onAnimationEnd.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.jumpOrMark=a.jumpOrMark.bind(a);a.markAsRead=a.markAsRead.bind(a);a.animation=null;a.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return a}fe()(t,[{key:"componentWillReceiveProps",value:function e(t){t.channelId!==this.props.channelId&&this.animation&&this.animation.cancel();if(this.state.hasUnreads&&!t.hasUnreads){var a=t.ghost?Hn:0;this.startFade(a);return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:a}});r()}},{key:"onAnimationEnd",value:function e(){var t=this;this.setState(function(){return{hasUnreads:false,opacity:1}},function(){t.props.onHide()})}},{key:"onKeyDown",value:function e(t){var a=[Un["e"],Un["j"]];Object(l["includes"])(a,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(t){this.animation=Object(Bn["a"])({delay:t,fromValue:1,toValue:0,duration:Gn,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(p["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:Ne["MARKED_REASONS"].CLICKED});this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===mn.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!Object(Xr["a"])())return Wn.t("Jump");var t=Object(qn["isMac"])()?Wn.t("Cmd"):Wn.t("Ctrl");return Wn.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,a=e.key;return n.a.createElement("span",{key:a,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!Object(Xr["a"])())return;var t=Object(qn["isMac"])()?Wn.t("Cmd"):Wn.t("Ctrl");return Wn.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===mn.VISIBLE)return null;var a=t===mn.ABOVE?"arrow_up":"arrow_down";var r=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return n.a.createElement(ma["c"],{"aria-label":i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},n.a.createElement(Et["a"],{type:a,className:"p-message_pane__unread_banner__jump__arrow"}),r)}},{key:"renderClose",value:function e(){var t=Oe()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==mn.VISIBLE});return n.a.createElement(Fn["c"],{tip:Wn.t("Mark as read (esc)"),position:"bottom-right"},n.a.createElement(ma["c"],{className:t,onClick:this.markAsRead,"aria-label":Wn.t("Mark as read")},n.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},Wn.t("Mark as read")),n.a.createElement(Et["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,a=t.hasUnreads,r=t.since,i=t.displayCount;var s=this.props,o=s.do24hrTime,l=s.known;if(!a||!r)return null;var c=Math.floor(parseFloat(r));if(!c)return null;var u=Object(An["a"])(c,{excludeYear:true});var d=Object(Ln["a"])(c,{do24hrTime:o});var p=l?"":"+";var m=i;!l&&m>10&&(m=10*Math.floor(m/10));var h=Wn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:p,count:m,time:d,date:u});m&&(1!==m||l)||(h=Wn.t("New messages since {time} on {date}",{time:d,date:u}));return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),n.a.createElement(ma["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},h)),this.renderClose())}}]);return t}(r["PureComponent"]);zn.displayName="UnreadBanner";zn.defaultProps=Kn;var Qn=function e(t,a){var r=a.since;if("0000000000.000000"===r){var n=Object(N["e"])(t,a.channelId);r=n.created}return{do24hrTime:Object(ua["h"])(t,"time24"),since:r}};var Yn=Object(i["connect"])(Qn)(zn);var Jn=a(31);var Xn=a(197);var Zn=a(1191);var $n=a(3753);var ei=new Xe["b"]("search");var ti={clogger:g["b"].object.isRequired,showSearchScrollbackTip:g["b"].bool.isRequired,searchInProductEducationDismiss:g["b"].func,channelForCurrentInFilterQuery:g["b"].object};var ai={searchInProductEducationDismiss:l["noop"],channelForCurrentInFilterQuery:null};var ri=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Jn["a"])(a,["onClickClose","onClickBannerContent"]);return a}fe()(t,[{key:"componentDidUpdate",value:function e(t){this.props.showSearchScrollbackTip&&!t.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"onClickClose",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id});this.props.searchInProductEducationDismiss()}},{key:"onClickBannerContent",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"render",value:function e(){var t=this.props.showSearchScrollbackTip;return t&&n.a.createElement(Xn["a"],{enabled:["feature_strollers_to_perch"]},n.a.createElement("div",{className:"p-message_pane__search_tip_banner"},n.a.createElement("div",{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,role:"presentation"},ei.rt("<strong>Tip</strong>: Looking for something specific? Try a quick search.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71"}),n.a.createElement(ma["c"],{className:"p-message_pane__search_tip_banner_action","aria-label":ei.t("Close",{ns:"toast"}),onClick:this.onClickClose},n.a.createElement(Et["b"],{inline:true,type:"times"})))))}}]);return t}(r["PureComponent"]);ri.displayName="SearchTipBanner";ri.defaultProps=ai;var ni=function e(t){return{showSearchScrollbackTip:Object(v["searchInProductEducationShouldDisplay"])(t),clogger:Object(m["a"])({state:t}),channelForCurrentInFilterQuery:Object(Zn["a"])(t)}};var ii={searchInProductEducationDismiss:v["searchInProductEducationDismiss"]};var si=Object(i["connect"])(ni,ii)(ri);var oi=a(1668);var li=a(442);var ci=new Xe["b"]("messages");var ui={displayModelOrViewById:g["b"].func.isRequired,isHighlightsBackButtonVisible:g["b"].bool};var di={isHighlightsBackButtonVisible:false};var pi=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.backToBriefings=a.backToBriefings.bind(a);return a}fe()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return n.a.createElement(ma["d"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},n.a.createElement(Et["b"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),ci.t("Back to my highlights"))}}]);return t}(r["PureComponent"]);pi.displayName="BriefingsBackButton";pi.defaultProps=di;var mi=function e(t){return{isHighlightsBackButtonVisible:Object(h["o"])(t)}};var hi=function e(t){return{displayModelOrViewById:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.id;return t(Object(li["a"])({id:r}))}}};var vi=Object(i["connect"])(mi,hi)(pi);var fi=a(223);var bi=a(1682);var gi={channelId:g["b"].string.isRequired,userAttentionIsOnChat:g["b"].bool.isRequired};var _i=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.triggerFileUpload=a.triggerFileUpload.bind(a);a.hiddenFileInputRef=n.a.createRef();a.commands=[{keys:["mod+u"],handler:a.triggerFileUpload}];return a}fe()(t,[{key:"componentDidMount",value:function e(){if(Object(Ie["a"])()&&!Ee.a.firefox){this.keyCommands=new fi["a"];this.keyCommands.bindAll(this.commands)}}},{key:"componentWillUnmount",value:function e(){if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}}},{key:"triggerFileUpload",value:function e(){var t=this.props.userAttentionIsOnChat;if(!t)return;this.hiddenFileInputRef&&this.hiddenFileInputRef.current.click()}},{key:"render",value:function e(){var t=this.props.channelId;if(!Object(Ie["a"])())return null;return n.a.createElement(bi["a"],{ref:this.hiddenFileInputRef,channelId:t,viewContext:Ne["MESSAGE_CONTAINERS"].MESSAGE_PANE})}}]);return t}(r["Component"]);_i.displayName="FileUploadShortcut";function yi(e){return{userAttentionIsOnChat:Object(Z["e"])(e)}}var ki=Object(i["connect"])(yi)(_i);var Oi=Object(Ie["a"])()?Object(wn["a"])(gn,"MessagePane",{index:0}):gn;var Ci={logger:g["b"].object,clogger:g["b"].object,channelId:g["b"].string,channelDisplayName:g["b"].string,type:g["b"].oneOf(["channel","private","im","mpim"]),theme:g["b"].oneOf(["light","dense"]),timestamps:g["b"].arrayOf(g["b"].string),reachedStart:g["b"].bool,reachedEnd:g["b"].bool,prevReachedEnd:g["b"].bool,oldest:g["b"].string,latest:g["b"].string,fetchHistory:g["b"].func,fetchSliHighlights:g["b"].func,onMount:g["b"].func,callAppHomeOpenEventByChannelId:g["b"].func,lastReadTs:g["b"].string,isGhostLastRead:g["b"].bool,unreadCount:g["b"].number,unreadCountKnown:g["b"].bool,startTs:g["b"].string,startTsOffset:g["b"].number,highlightTs:g["b"].string,highlightLazy:g["b"].bool,focusRequestedTs:g["b"].string,rollups:g["b"].objectOf(Se["a"].Rollup()),isLoading:g["b"].bool,isLoadingOlder:g["b"].bool,setUnreadPoint:g["b"].func,markMostRecentMsgRead:g["b"].func,setUnreadLineVisibility:g["b"].func,clearHighlightTs:g["b"].func,jumpToTimestamp:g["b"].func,saveScrollmark:g["b"].func,isArchived:g["b"].bool,isLimited:g["b"].bool,isSlackbotIm:g["b"].bool,isAppIm:g["b"].bool,overlayVisible:g["b"].bool,channelSessionId:g["b"].string,prevChannelSwitchTs:g["b"].string,newxpOnboardingStep:g["b"].string,firstUnreadTs:g["b"].string,featureReactMessages:g["b"].bool,featureTinyspeck:g["b"].bool,featureClassicNav:g["b"].bool,featureAriaApplicationMode:g["b"].bool,teamId:g["b"].string,enterpriseId:g["b"].string,sessionId:g["b"].string,msgTriggers:g["b"].object,hasMessagePaneUnmounted:g["b"].bool,setMessagePaneHasUnmounted:g["b"].func,currentUserId:g["b"].string,isAppSpaceOpen:g["b"].bool,isShared:g["b"].bool,isOrgShared:g["b"].bool,isYou:g["b"].bool,isMuted:g["b"].bool,hasUnreads:g["b"].bool,hasDraft:g["b"].bool,badgeCount:g["b"].number,screenReaderOverride:g["b"].bool,windowLastBlurEvent:g["b"].number,windowLastFocusEvent:g["b"].number,makeMessageSummary:g["b"].func,isScreenReaderEnabled:g["b"].bool,setFocusRequestedTs:g["b"].func,showThreadIfThreadable:g["b"].func,currentThreadKey:g["b"].string,isThreadable:g["b"].func,unavailableTeamId:g["b"].string,canPostInChannel:g["b"].bool,featureAnnounceOnly:g["b"].bool,featureSonicInputs:g["b"].bool,featureTriggerUserDmClick:g["b"].bool,telemeter:g["b"].object.isRequired,searchInProductEducationReset:g["b"].func,bootInFlight:g["b"].bool,bootType:g["b"].oneOf(["warm","cold"]),isFileExpanding:g["b"].bool,featureOfflineMode:g["b"].bool,isOffline:g["b"].bool,userAttentionIsOnChat:g["b"].bool,composerVisible:g["b"].bool,clientTheme:g["b"].string,impressionLoggingWebGroup:g["b"].string};var Ei={logger:{error:c.a.noop},clogger:{track:c.a.noop},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:c.a.noop,fetchSliHighlights:c.a.noop,onMount:c.a.noop,callAppHomeOpenEventByChannelId:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:c.a.noop,markMostRecentMsgRead:c.a.noop,setUnreadLineVisibility:c.a.noop,clearHighlightTs:c.a.noop,jumpToTimestamp:c.a.noop,saveScrollmark:c.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,isAppIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureClassicNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:c.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,currentThreadKey:void 0,isThreadable:c.a.noop,unavailableTeamId:"",canPostInChannel:true,featureAnnounceOnly:false,featureSonicInputs:false,featureTriggerUserDmClick:false,searchInProductEducationReset:c.a.noop,bootInFlight:false,bootType:null,isFileExpanding:false,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,composerVisible:false,clientTheme:"light",impressionLoggingWebGroup:"control"};var Si=function(e){ye()(t,e);function t(e){he()(this,t);var a=ge()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.list=null;a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(a);a.onUnreadBannerHide=a.onUnreadBannerHide.bind(a);a.setListRef=a.setListRef.bind(a);a.shouldIgnoreScrollKeys=a.shouldIgnoreScrollKeys.bind(a);a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(a);a.requestHistory=a.requestHistory.bind(a);a.jumpToMostRecent=a.jumpToMostRecent.bind(a);a.jumpToUnread=a.jumpToUnread.bind(a);a.focus=a.focus.bind(a);a.state={showingArchiveBanner:false,showingUnreadBanner:false,unreadPlacement:mn.VISIBLE};a.historyRateLimiter=new Tn["a"];a.prqMetrics={usableVisible:{}};a.sendSessionFrameStats=a.sendSessionFrameStats.bind(a);a.recordSessionFrameStats=a.recordSessionFrameStats.bind(a);a.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger);return a}fe()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var a=!!this.props.timestamps.length;var r=!!(this.props.unreadCount||this.props.unreadCountKnown);a&&r&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:c.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages");this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=this.props.channelId;this.setState(function(e){var r=a.getUnreadLinePlacement();if(!t.isLoading&&!c.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return b()({},e,{unreadPlacement:r,showingArchiveBanner:n})}if(e.unreadPlacement!==r)return b()({},e,{unreadPlacement:r});return e});this.setState(function(e){var t=a.getUnreadBannerDisplayCount();var r=t>0;return b()({},e,{showingUnreadBanner:r})});this.setState(function(e){var t=a.getUnreadBannerDisplayCount();var r=t>0;return b()({},e,{showingUnreadBanner:r})});if(r&&t.channelId!==r){try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:r,scrollmark:n});this.historyRateLimiter.reset();this.recordAndTrackTimeToUsable(Ae["v"].ABANDONED);this.state.caughtError&&this.setState(function(){return{caughtError:false}});t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages")}t.channelId===r&&t.isAppIm!==this.props.isAppIm&&t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages");var i=this.props.timestamps.length!==t.timestamps.length;var s=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!s||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:c.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});t.teamId!==this.props.teamId&&this.attachMessageImpressionsLogger(t.teamId,t.impressionLoggingWebGroup,t.clogger)}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(Ae["v"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){if(Object(Ie["a"])()){var t=this.list&&this.list.getScrollmark();var a=this.props.channelId;this.props.saveScrollmark({channelId:a,scrollmark:t})}this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true);try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(t,a){var r=this;if(!this.list)return;var n=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:n}});var i=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(i);try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a.filter(function(e){return"message"===e.type}).map(function(e){return{ts:e.ts,channel:r.props.channelId}}))}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.list.isAtBottom()&&this.props.searchInProductEducationReset()}},{key:"onUnreadBannerHide",value:function e(){this.setState(function(){return{showingUnreadBanner:false}})}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return mn.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"getUnreadBannerDisplayCount",value:function e(){var t=this.props,a=t.timestamps,r=t.lastReadTs,n=t.unreadCount,i=t.reachedEnd;return a.length&&i?a.filter(function(e){return e>r}).length:n}},{key:"setListRef",value:function e(t){this.list=t}},{key:"attachMessageImpressionsLogger",value:function e(t,a,r){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.messageImpressionLogger=new In["a"]({teamId:t,experimentGroup:a,clogger:r,messageViewLocation:jn["a"].CHANNEL})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted&&!this.props.bootInFlight)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(Ie["a"])()){if(!Object(we["shouldLogTTVMetrics"])(Object(o["e"])()))return;Object(o["a"])(Object(we["setShouldLogTTVMetrics"])(false))}var t=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:true}).unprocessed;Object(Ie["a"])()&&this.props.telemeter.store("prq_time_to_visible_"+this.props.bootType,t);this.prqMetrics.usableVisible=pe()({},this.props.channelId,t);Object(je["j"])(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);this.props.setMessagePaneHasUnmounted(true);this.props.logger.info("PERF","Logged time to visible (TTV): "+t)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(Object(Ie["a"])()&&this.props.bootInFlight){this.staleTimestamps||(this.staleTimestamps=this.props.timestamps);return}if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(Ie["a"])()){if(!Object(we["shouldLogTTUMetrics"])(Object(o["e"])()))return;Object(o["a"])(Object(we["setShouldLogTTUMetrics"])(false))}var a=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:true}).unprocessed;Object(Ie["a"])()&&this.props.telemeter.store("prq_time_to_usable_"+this.props.bootType,a);var r=!!this.staleTimestamps&&!c.a.isEqual(this.props.timestamps.sort(),this.staleTimestamps.sort());r&&this.props.telemeter.count("prq_time_to_usable_required_sync");Object(je["i"])(a,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t);this.prqMetrics.usableVisible={};this.props.logger.info("PERF","Logged time to usable (TTU): "+a)}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);Object(je["e"])(this.props.teamId,this.props.enterpriseId,Ae["l"].PRQ_SESSION_FRAME_STATS)&&Object(Te["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(Te["e"])())return;Object(Te["i"])();var t=Object(Te["a"])();if(0===t.durationMs)return;Object(je["h"])(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var a=t.target;var r=a===document.body;var n=this.hasFocus;var i=Object(Pe["e"])();var s=this.props,o=s.channelId,l=s.featureSonicInputs;if(l){var c=Object(Me["a"])({viewContext:Ne["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:o});i=!!c&&c.hasFocus()}return!(r||n||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var a=t.target;var r=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=r&&r.contains(a);var s=n&&n.contains(a);var o=this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(Pe["f"])();return!o||s||i||Object(Cn["b"])()||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,a=t.isGhostLastRead,r=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!a&&this.list.getUnreadLinePlacement()===mn.VISIBLE)return true;if(!r&&n&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});this.props.logger.error("MessagePane componentDidCatch:",t,"message_pane_componentDidCatch")}},{key:"requestHistory",value:function e(t){var a=t.oldest,r=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,l=n.reachedEnd,c=n.logger;if(o&&l)return false;var u=a;var d=r;if(d&&o){if(!u)return false;d=null}if(u&&l){if(!d)return false;u=null}if(this.historyRateLimiter.isRequestPending({oldest:a,latest:r}))return false;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:a,latest:r})){if(this.beaconedRateLimit)c.warn("MESSAGE_PANE","message_pane_request_rate_limited "+i+" "+a+"_"+r);else{c.error({channelId:i,latestTs:d,oldestTs:u},"message_pane_request_rate_limited");this.beaconedRateLimit=true}return false}this.beaconedRateLimit=false;var p="message-pane/requestHistory";var m=this.props.fetchHistory({channelId:i,type:s,oldest:u,latest:d,reason:p});m&&this.historyRateLimiter.logHistoryRequest({oldest:u,latest:d,promise:m});return m}},{key:"logAppHomeRequest",value:function e(t,a){this.props.featureTriggerUserDmClick&&this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:a})}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(c.a.isEmpty(t))return null;return n.a.createElement(Dn,{firstTimestamp:c.a.first(t),lastTimestamp:c.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,a=t.unreadCount,r=t.unreadCountKnown,i=t.lastReadTs,s=t.channelId,o=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.newxpOnboardingStep,u=t.overlayVisible,d=t.isArchived;if(u)return null;if(c&&c!==Er.CANCELLED&&c!==Er.COMPLETE)return null;if(d)return null;return n.a.createElement(Yn,{channelId:s,hasUnreads:a>0,displayCount:this.getUnreadBannerDisplayCount(),known:r,since:i,ghost:o,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,onHide:this.onUnreadBannerHide})}},{key:"renderDegradedBanner",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(Re["a"],null,n.a.createElement(oi["a"],null))}},{key:"renderSearchScrollbackTip",value:function e(){return n.a.createElement(si,null)}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(_n["a"],null)}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Er.START)return n.a.createElement(wr,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return n.a.createElement(Sn["a"],{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var t=Ee.a.msie||Ee.a.msedge;var a=!this.props.overlayVisible&&!t;var r=Oe()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--classic-nav":Object(Ie["a"])()&&this.props.featureClassicNav});var i=this.props,s=i.type,o=i.channelDisplayName,l=i.isShared,c=i.isOrgShared,u=i.isYou,d=i.isMuted,p=i.hasUnreads,m=i.hasDraft,h=i.isArchived,v=i.unreadCount,f=i.badgeCount,b=i.canPostInChannel,g=i.featureAnnounceOnly,_=i.isFileExpanding,y=i.userAttentionIsOnChat,k=i.composerVisible,O=i.clientTheme;var C=Object(En["a"])({type:s,displayName:o,isShared:l,isOrgShared:c,isYou:u,isMuted:d,hasUnreads:p,hasDraft:m,isArchived:h,unreadCount:v,badgeCount:f,canPost:b,featureAnnounceOnly:g,isSelected:false,userActive:false,isTyping:false});var E=Object(te["makeIdForThreadList"])(this.props.currentThreadKey);var S=n.a.createElement("div",{className:r,"data-qa":"message_pane"},n.a.createElement("div",{className:"p-message_pane__top_banners"},n.a.createElement(yn["a"],null),this.renderDegradedBanner(),n.a.createElement(vi,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),n.a.createElement(Oi,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:C,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:a,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:Ne["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:E,isFileExpanding:_,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:y,composerVisible:k,clientTheme:O}),this.renderArchivesBanner(),Object(Ie["a"])()?n.a.createElement(ki,{channelId:this.props.channelId}):null);if(Object(Ie["a"])())return S;return n.a.createElement(kn["a"],{component:this,order:0},S)}}]);return t}(r["PureComponent"]);Si.displayName="BaseMessagePane";Si.defaultProps=Ei;var wi=Object(On["a"])(Si,{updateStore:function e(t){var a=t.instance,r=t.dispatch;var n=a.list&&a.list.getScrollmark();r(P({channelId:a.props.channelId,scrollmark:n}))}});var Ii=a(1419);var ji=Object(u["createSelectorCreator"])(u["defaultMemoize"],re["a"]);var Ti=20;var Ai=ji([function(e){return e},function(e,t){return t},function(e,t,a){return a}],function(e,t,a){var r=e.timestamps,n=e.start,i=e.end,s=e.reachedStart,o=e.reachedEnd,l=e.prevReachedEnd;if(!o&&!l&&r&&r.length-c.a.sortedLastIndex(r,a)<Ti)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var u=c.a.reject(c.a.map(r,function(e){return t[e]}),ee["isHidden"]);var d=Object(Ii["a"])(u),p=d.rollups,m=d.messages;return{messages:m,timestamps:c.a.map(m,function(e){return e.ts}),rollups:p,reachedStart:s,reachedEnd:o,prevReachedEnd:l,oldest:n,latest:i}});function Ni(e){var t=e.state,a=e.channelId,r=e.timestamps,n=e.rollups,i=e.lastReadTs;return c.a.find(r,function(e){var r=Object(U["a"])(t,a,e);var s=Object(E["getCurrentUserId"])(t);if(!r)return false;if(n[e]){var o=c.a.values(n[e]);var l=c.a.map(o,"ts");var u=c.a.map(l,function(e){return Object(U["a"])(t,a,e)});return c.a.some(u,function(e){return Object(ee["isMessageUnread"])(e,i,s)})}return Object(ee["isMessageUnread"])(r,i,s)})}var Mi=function e(t){var a=Object(H["a"])(t);var r=Object(N["e"])(t,a);var n=Object(L["getGroupForUser"])(t,"context_bar");var i=Object(E["isFeatureEnabled"])(t,"feature_react_messages");var s=Object(E["isFeatureEnabled"])(t,"feature_tinyspeck");var o=Object(E["isFeatureEnabled"])(t,"feature_classic_nav");var l=Object(E["isFeatureEnabled"])(t,"feature_aria_application_mode");var u=Object(E["isFeatureEnabled"])(t,"feature_context_bar");var v=Object(E["getCurrentUserId"])(t);var f=Object(ne["b"])(t);var b=Object(ne["a"])(t);var g=Object(h["b"])(t);var _=Object(W["getChannelTriggers"])(t);var y=Object(h["e"])(t);var k=Object(ie["getWindowLastBlurEvent"])(t);var C=Object(ie["getWindowLastFocusEvent"])(t);var S=Object(te["getCurrentThreadKey"])(t);var w=Object(d["c"])({state:t});var I=Object(p["a"])({state:t});var j=Object(m["a"])({state:t});var T=Object(J["isBootInFlight"])(t);var A=Object(ie["getBootType"])(t);var P=Object(L["getGroupForUser"])(t,"impression_logging_web");if(!r)return{featureReactMessages:i,featureTinyspeck:s,featureClassicNav:o,impressionLoggingWebGroup:P,currentUserId:v,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:y,windowLastBlurEvent:k,windowLastFocusEvent:C,telemeter:w,logger:I,clogger:j,bootInFlight:T,bootType:A};var x=Object(O["isChannelLoading"])(t,a);var D=Object(O["isChannelLoadingOlder"])(t,a);var B=Object(M["getLastReadTs"])(r);var G=false;var V=Object(h["d"])(t);if(V&&V!==B){B=V;G=true}var K=Object(h["h"])(t);var z=Object(h["i"])(t);var Q=Object(h["g"])(t);var Y=Object(h["f"])(t);var ee=Object(M["getUnreadCount"])(r);var re=Object(F["getTimestampsByChannelId"])(t,a,B);var de=re&&re.reachedEnd;var pe=Object(h["b"])(t);var me=Object(h["l"])(t);var he=Object(q["a"])(t);var ve=Object(F["getPotentiallyOutdatedTimestamps"])(t,a,K);var fe=Object(U["d"])(t,a,ve.timestamps);var be=Ai(ve,fe,K),ge=be.timestamps,_e=be.rollups,ye=be.reachedStart,ke=be.reachedEnd,Oe=be.prevReachedEnd,Ce=be.oldest,Ee=be.latest;(Object(M["isPublicChannel"])(r)&&!Object(M["isMemberOfChannel"])(r)||Object(M["isArchived"])(r))&&(B=c.a.last(ge));var Se=Ni({state:t,channelId:a,timestamps:ge,rollups:_e,lastReadTs:B});var we=Object(se["isScreenReaderEnabled"])(t);var Ie=Object(h["n"])(t)&&Object(oe["a"])(t,a);var je=void 0;Object(M["isUnavailable"])(t,r)&&(je=Object(M["getUnavailableTeamId"])(t,r));var Te=Object(ue["isAnyFileExpanding"])(t);var Ae=Object(Z["e"])(t);return{isFileExpanding:Te,channelId:a,type:Object(M["getChannelType"])(r),channelDisplayName:Object(M["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),timestamps:ge,reachedStart:ye,reachedEnd:ke,prevReachedEnd:Oe,oldest:Ce,latest:Ee,lastReadTs:B,isGhostLastRead:G,unreadCount:ee,unreadCountKnown:de,startTs:K,startTsOffset:z,highlightTs:Q,highlightLazy:Y,focusRequestedTs:Object(h["c"])(t),rollups:_e,isAppSpaceOpen:Ie,isArchived:Object(M["isArchived"])(r),isLoading:x,isLoadingOlder:D,isLimited:Object(F["getIsLimited"])(t,a),isSlackbotIm:Object(M["isSlackbot"])(r),isAppIm:Object(M["isImWithApp"])(t,a),overlayVisible:Object(h["p"])(t),channelSessionId:pe,prevChannelSwitchTs:me,theme:he,newxpOnboardingStep:Object(h["j"])(t),firstUnreadTs:Se,featureReactMessages:i,featureTinyspeck:s,featureClassicNav:o,featureAriaApplicationMode:l,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:y,windowLastBlurEvent:k,windowLastFocusEvent:C,currentUserId:v,badgeCount:Object(N["d"])(t,r),isShared:Object(M["isExternallySharedChannel"])(r),isOrgShared:Object(M["isOrgShared"])(r),isYou:Object(M["isYou"])(t,r),isMuted:Object(R["isChannelMutedById"])(t,a),hasUnreads:!!Object(M["getUnreadCount"])(r),hasDraft:Object(M["getHasDraft"])(t,a),isScreenReaderEnabled:we,currentThreadKey:S,unavailableTeamId:je,canPostInChannel:Object(ae["s"])(t,a),featureAnnounceOnly:Object(E["isFeatureEnabled"])(t,"feature_announce_only"),featureTriggerUserDmClick:Object(E["isFeatureEnabled"])(t,"feature_trigger_user_dm_click"),featureContextBar:u,featureSonicInputs:Object(E["isFeatureEnabled"])(t,"feature_sonic_inputs"),telemeter:w,logger:I,clogger:j,bootInFlight:T,bootType:A,featureOfflineMode:Object(E["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(X["c"])(t),userAttentionIsOnChat:Ae,contextBarExperimentGroup:n,composerVisible:(Object(ce["a"])(t)||"composer_toolbar"===Object(L["getGroupForUser"])(t,"composer_toolbar"))&&Object(le["isComposerVisible"])(t),clientTheme:Object($["getClientTheme"])(t),impressionLoggingWebGroup:P}};function Pi(e){return function(t,a){var r=Object(h["q"])(a());if(r!==e){Object(p["a"])({getState:a}).info("CHECK-UNREADS","unreadLineVisible updated: "+r+" -> "+e);t(Object(A["n"])(e))}}}var Ri=function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return ee["isThreadable"].apply(void 0,[t()].concat(a))}};var xi={fetchHistory:T,fetchSliHighlights:D["fetchSliHighlights"],setUnreadPoint:B["setUnreadPoint"],markMostRecentMsgRead:B["markMostRecentMsgRead"],setUnreadLineVisibility:Pi,clearHighlightTs:A["a"],jumpToTimestamp:A["c"],saveScrollmark:P,onMount:x["b"],setMessagePaneHasUnmounted:A["k"],makeMessageSummary:V["a"],setFocusRequestedTs:A["h"],callAppHomeOpenEventByChannelId:Q,isThreadable:Ri,showThreadIfThreadable:G["showThreadIfThreadable"],searchInProductEducationReset:v["searchInProductEducationReset"]};var Di=Object(i["connect"])(Mi,xi)(wi);var Fi=Di;var Li=a(161);var Bi=function e(t,a){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(Li["a"],null,n.a.createElement(Fi,null))),a)};var Ui=Bi;var qi=a(46);Object(qi["a"])("interop.mountMessagePane",Ui)},4476:function(e,t,a){"use strict";a.r(t);var r=a(3740);var n=a(46);Object(n["a"])("interop.experiments_unauthed",{fetchInviteAssignments:r["a"],fetchLeadAssignments:r["b"],fetchVisitorAssignments:r["d"],fetchUserAssignments:r["c"],getGroup:r["e"]})},4477:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(1831);var c=a(0);var u=a(13);var d=a.n(u);var p=a(9);var m=a(38);var h=a(6);var v=a(33);var f=a(32);var b=a(3);var g=a.n(b);var _=a(5);var y=a.n(_);var k=a(4);var O=a.n(k);var C=a(7);var E=a.n(C);var S=a(8);var w=a.n(S);var I=a(2);var j=a(23);var T=a(69);var A=a(501);var N=a(1161);var M=a(821);var P=a(14);var R=a(39);var x=a(223);var D=a(2e3);var F=a(496);var L=a(228);var B=a(27);var U=a(54);var q=300;var W={children:c["b"].node,className:c["b"].string,disabled:c["b"].bool,tooltip:c["b"].oneOfType([c["b"].string,c["b"].func]),"aria-label":c["b"].string.isRequired,onClick:c["b"].func.isRequired,onTrigger:c["b"].func};var H={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:I["noop"]};var G=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseDown=a.onMouseDown.bind(a);a.onMouseUp=a.onMouseUp.bind(a);a.pressTimer=void 0;return a}O()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var a=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return a.props.onTrigger(t)},q);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,a=t.disabled,r=t.tooltip,i=t["aria-label"];var s=d()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":a});var o=function e(t){var r=t.tip,i=t.children;if(a||!r)return i;return n.a.createElement(U["c"],{tip:r,delay:800,position:"bottom",offsetY:jr,tipClassName:"p-global_nav__top_history_tip"},i)};return n.a.createElement(o,{tip:r},n.a.createElement(B["c"],{className:s,disabled:a,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":i},this.props.children))}}]);return t}(r["PureComponent"]);G.displayName="HistoryButton";G.defaultProps=H;var V=G;var K=a(22);var z=a(152);var Q=new h["b"]("global_nav");var Y={viewId:c["b"].string,viewName:c["b"].string,teamId:c["b"].string,teamName:c["b"].string,teamIcon:c["b"].string,currentTeamId:c["b"].string,featureGlobalNav:c["b"].bool};var J={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false};var X=function(e){w()(t,e);function t(){y()(this,t);return E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,a=t.teamIcon,r=t.teamName;return n.a.createElement(U["c"],{tip:r,position:"bottom",zIndex:"above_fs"},n.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+a+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=a===i?n.a.createElement(j["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Q.t("Threads");return n.a.createElement(r["Fragment"],null,o,l)}},{key:"renderUnreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=a===i?n.a.createElement(j["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Q.t("All Unreads");return n.a.createElement(r["Fragment"],null,o,l)}},{key:"render",value:function e(){var t=this.props,a=t.viewId,i=t.viewName,s=t.teamId,o=t.currentTeamId;if("Vall_threads"===a)return this.renderThreads();if("Vall_unreads"===a)return this.renderUnreads();if(s===o)return n.a.createElement(z["a"],{channelId:a,className:"p-global_nav__top_history_item_channel_name"});return n.a.createElement(r["Fragment"],null,this.renderTeamIcon(),i)}}]);return t}(r["Component"]);X.displayName="HistoryItem";X.defaultProps=J;var Z=function e(t){return{currentTeamId:Object(K["b"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var $=Object(i["connect"])(Z)(X);var ee=new h["b"]("global_nav");var te={history:c["b"].object.isRequired,back:c["b"].func,forward:c["b"].func,index:c["b"].func,sync:c["b"].func,action:c["b"].func,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var ae={back:I["noop"],forward:I["noop"],index:I["noop"],sync:I["noop"],action:c["b"].func,featureGlobalNav:false};var re=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);a.onForwardClick=a.onForwardClick.bind(a);a.renderBackMenu=a.renderBackMenu.bind(a);a.renderForwardMenu=a.renderForwardMenu.bind(a);a.renderBackTooltip=a.renderBackTooltip.bind(a);a.renderForwardTooltip=a.renderForwardTooltip.bind(a);return a}O()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!Object(L["c"])())return;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var a=Object(v["isWindows"])();var r=[{keys:a?"alt+left":["command+[","command+left"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}})}},{keys:a?"alt+right":["command+]","command+right"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}})}}];this.keyCommands||(this.keyCommands=new x["a"]);this.keyCommands.bindAll(r)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function e(){this.props.back();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function e(){this.props.forward();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function e(t){if(t.metaKey&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){var a=Object(D["a"])()&&Object(F["g"])(document.activeElement)||document.activeElement===document.body;if(!a)return true}return false}},{key:"renderStackMenu",value:function e(t,a){var r=this;var i=function e(t){return t.viewId+":"+t.teamId};var s=Object(I["uniqBy"])(t,i);var o=s.map(function(e){return{label:n.a.createElement($,e),key:i(e),click:function t(){r.props.index({target:e.index});r.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return n.a.createElement(T["a"],g()({},a,{template:o}))}},{key:"renderBackMenu",value:function e(t){var a=Object(M["a"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}});return this.renderStackMenu(a.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var a=Object(M["b"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}});return this.renderStackMenu(a,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(v["isMac"])()?"\u2318[":ee.t("Alt+Left Arrow");return n.a.createElement(r["Fragment"],null,ee.t("Go back"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(v["isMac"])()?"\u2318]":"Alt+Right Arrow";return n.a.createElement(r["Fragment"],null,ee.t("Go forward"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props,a=t.history,i=t.featureGlobalNav;if(!i)return null;if(!Object(L["c"])())return null;var s=!Object(M["a"])(a)||!Object(M["a"])(a).length;var o=!Object(M["b"])(a)||!Object(M["b"])(a).length;var l={position:"bottom-left",offsetX:-12,offsetY:Tr,customTrigger:true};return n.a.createElement(r["Fragment"],null,n.a.createElement(T["e"],g()({renderMenu:this.renderBackMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:s,tooltip:this.renderBackTooltip,"aria-label":ee.t("Go back")},n.a.createElement(j["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),n.a.createElement(T["e"],g()({renderMenu:this.renderForwardMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:o,tooltip:this.renderForwardTooltip,"aria-label":ee.t("Go forward")},n.a.createElement(j["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(r["Component"]);re.displayName="History";re.defaultProps=ae;var ne=function e(t){return{history:Object(A["getNavigationHistory"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),action:Object(P["a"])({state:t}).action,clogger:Object(R["a"])({state:t})}};var ie={back:N["a"],forward:N["b"],index:N["c"],sync:N["f"]};var se=Object(i["connect"])(ne,ie)(re);var oe=a(35);var le=a(28);var ce=a(1210);var ue=a(37);var de=a.n(ue);var pe=a(45);var me=a(1281);var he=a(1990);var ve=a(1450);var fe=a(581);var be=a(1436);var ge=a(24);var _e=Object(ge["b"])("TS.ui.workspaces.start");var ye=a(17);var ke=a(41);var Oe=a(1690);var Ce=Object(ye["b"])("Opens the help modal",function(e,t,a){e(Object(ke["openModal"])({element:n.a.createElement(Oe["a"],a)}))});Ce.meta={name:"openHelpModal",key:"actionsHelpActionsOpenHelpModal",description:"Opens the help modal"};Ce.propTypes={trigger:c["b"].string.isRequired};var Ee=a(2026);var Se=Object(ge["b"])("TS.magic_login.execute");var we=a(3664);var Ie=new h["b"]("workflow_builder");var je=function e(){return n.a.createElement("div",{className:"p-launch_workflow_builder"},Ie.t("Workflow Builder")," ",n.a.createElement("div",{className:"p-launch_workflow_builder__pill"},Ie.t("PILOT")))};je.displayName="LaunchWorkflowBuilder";var Te=je;var Ae={name:c["b"].string.isRequired,org:c["b"].string,icon:c["b"].string,url:c["b"].string};var Ne={org:void 0,icon:void 0,url:void 0};var Me=function e(t){var a=t.name,r=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:r&&"url("+r+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};Me.displayName="TeamHeader";Me.defaultProps=Ne;var Pe=function e(t){var a=Object(oe["d"])(t);return{name:Object(le["getTeamDisplayName"])(a),org:a.enterprise_name,icon:a.icon&&a.icon.image_88||void 0,url:a.domain+".slack.com"}};var Re=Object(i["connect"])(Pe)(Me);var xe=a(25);var De=a(1836);var Fe=a(1347);var Le=new h["b"]("global_nav");var Be={menuProps:c["b"].object,team:c["b"].object.isRequired,isEnterprise:c["b"].bool,enterpriseURL:c["b"].string,isAppmin:c["b"].bool,featureGlobalNav:c["b"].bool};var Ue={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var qe=function e(t){var a=t.featureGlobalNav,r=t.team,i=t.isEnterprise,s=t.enterpriseURL,o=t.isAppmin,l=t.menuProps;if(!a)return null;var c=[{label:Le.t("Manage members"),href:Object(le["getTeamUrl"])(r,"/admin")},{label:Le.t("Workspace settings"),href:Object(le["getTeamUrl"])(r,"/admin/settings")},{label:Le.t("Organization settings"),href:"https://"+s+"/manage",hide:!i},{label:Le.t("Manage apps"),href:Object(le["getTeamUrl"])(r,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:i||!o},{label:Le.t("Manage shared channels"),click:function e(){return Object(De["a"])(r.id)},hide:!Object(Fe["a"])()}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},l,{template:c}))};qe.displayName="TeamAdminSubmenu";qe.defaultProps=Ue;var We=function e(t){var a=Object(oe["d"])(t);return{team:a,isEnterprise:Object(le["isEnterpriseTeam"])(a),enterpriseURL:Object(p["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(xe["l"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var He=Object(i["connect"])(We)(qe);var Ge=a(26);var Ve=a.n(Ge);var Ke=a(2047);var ze=Object(ye["b"])("Opens the Find More Workspaces modal.",function(e,t,a){if(!Object(p["isFeatureEnabled"])(t(),"feature_sonic_find_more_wksps"))return;e(Object(ke["openModal"])({element:n.a.createElement(Ke["b"],{userId:a}),name:"find-more-workspaces",isStackable:true}))});ze.meta={name:"openFindMoreWorkspacesModal",key:"actionsOpenFindMoreWorkspacesModalOpenFindMoreWorkspacesModal",description:"Opens the Find More Workspaces modal."};ze.propTypes={userId:c["b"].string.isRequired};var Qe=ze;var Ye=a(55);var Je=a(583);var Xe=new h["b"]("global_nav");var Ze=3;var $e={menuProps:c["b"].object,enterprises:c["b"].arrayOf(c["b"].shape({id:c["b"].string,name:c["b"].string,teams:c["b"].arrayOf(c["b"].object)})),others:c["b"].arrayOf(c["b"].shape({id:c["b"].string,name:c["b"].string,url:c["b"].string})),currentEnterpriseId:c["b"].string,currentUserId:c["b"].string,signinURL:c["b"].string,featureGlobalNav:c["b"].bool,featureClassicNav:c["b"].bool,openFindMoreWorkspacesModal:c["b"].func.isRequired};var et={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:false,featureClassicNav:false};var tt=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getTeamItem=a.getTeamItem.bind(a);a.getEnterpriseItems=a.getEnterpriseItems.bind(a);a.getOtherItems=a.getOtherItems.bind(a);return a}O()(t,[{key:"getTeamItem",value:function e(t){var a=this.props,i=a.featureGlobalNav,s=a.featureClassicNav;if(!i&&!s)return null;if(!t.url)return null;var o=Object(f["a"])()?Object(le["getTeamUrl"])({domain:"app"},"client/"+t.id+window.location.search):t.url+("/"===t.url.substr(-1)?"messages":"/messages");var l=t.icons&&(t.icons.image_44||t.icons.image_88);return{label:n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+l+")"}}),n.a.createElement("strong",null,t.name)),href:o,target:"_self",showLinkIndicatorIcon:false}}},{key:"getEnterpriseItems",value:function e(){var t=this;var a=this.props,r=a.enterprises,n=a.currentEnterpriseId,i=a.currentUserId,s=a.featureGlobalNav,o=a.featureClassicNav;if(!s&&!o)return[];return Object(I["flatten"])(r.map(function(e){var a=e.teams.map(t.getTeamItem);var r=e.id===n&&e.overLimit?{label:Xe.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return t.props.openFindMoreWorkspacesModal(i)}}:null;return[{type:"header",label:e.name}].concat(Ve()(a),[r,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var a=this.props,r=a.others,n=a.featureGlobalNav,i=a.featureClassicNav;if(!n&&!i)return[];if(!r||!r.length)return[];var s=r.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:Xe.t("Your other workspaces")}].concat(Ve()(s))}},{key:"render",value:function e(){var t=this.props,a=t.signinURL,r=t.featureGlobalNav,i=t.featureClassicNav,s=t.menuProps;if(!r&&!i)return null;var o=a&&[{type:"separator"},{label:Xe.t("Sign in to another workspace"),href:a}];var l=[].concat(Ve()(this.getEnterpriseItems()),Ve()(this.getOtherItems()),Ve()(o||[]));return n.a.createElement(T["a"],g()({},s,{template:l,stripTerminalSeparators:true}))}}]);return t}(r["Component"]);tt.displayName="SwitchWorkspacesSubmenu";tt.defaultProps=et;var at=function e(t){var a=Object(p["getOtherAccounts"])(t).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(Ye["a"])()){var r=Object(xe["b"])(t);(Object(I["get"])(r,"enterprise_user.teams")||[]).map(function(e){return Object(oe["j"])(t,e)}).forEach(function(e){a.push({id:e.id,enterpriseId:Object(I["get"])(r,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(Je["b"])(t,e.domain),name:Object(le["getTeamDisplayName"])(e),enterpriseName:Object(I["get"])(r,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(le["isUnknown"])(e)})})}var n=Object(oe["d"])(t);var i=n.enterprise_id;a=a.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(h["r"])(e.name,t.name)});var s=n.id;a=a.filter(function(e){return e.id!==s});return Object(I["uniqBy"])(a,"id")};var rt=function e(t){var a={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;a[t]?a[t].teams.length<Ze?a[t].teams.push(e):a[t].overLimit=true:a[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(a)};var nt=function e(t){var a=at(t);var r=rt(a);var n=a.filter(function(e){return!e.enterpriseId});var i=Object(oe["d"])(t).enterprise_id;var s=Object(p["getCurrentUserId"])(t);var o=Object(p["getFromBootData"])(t,"signin_url");return{enterprises:r,others:n,currentEnterpriseId:i,currentUserId:s,signinURL:o,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureClassicNav:Object(p["isFeatureEnabled"])(t,"feature_classic_nav")}};var it={openFindMoreWorkspacesModal:function e(){return Qe.apply(void 0,arguments)}};var st=Object(i["connect"])(nt,it)(tt);var ot=a(61);var lt=a(213);var ct=a(16);var ut=a(68);var dt=a(1403);function pt(e){var t=Object(xe["b"])(e);var a=Object(oe["d"])(e);var r=Object(ct["isAdmin"])(t);var n=Object(ct["isOwner"])(t);var i=Object(ct["isRestricted"])(t);var s=Object(p["pageNeedsEnterprise"])(e);var o=Object(le["isPaidTeam"])(a);var l=r;var c=Object(dt["d"])();var u=Object(p["isFeatureEnabled"])(e,"feature_builder_can_access");var d=r||!i&&(!Object(ot["a"])(e,"emoji_only_admins")||!Object(ot["a"])(e,"slackbot_responses_only_admins")||!Object(ot["a"])(e,"loading_only_admins"));var h=s&&Object(lt["isAppSpaceEnabled"])(e)&&Object(xe["l"])(e);var f=r||!Object(ot["a"])(e,"stats_only_admins")&&!i;var b=n||Object(m["h"])(e,"purchaser")||Object(ot["a"])(e,"all_users_can_purchase");var g=b&&o;var _=!o&&!Object(pe["isAppStoreBuild"])();var y=s&&!Object(ct["isRestricted"])(t);var k=o&&Object(ut["n"])(e);var O=Object(p["getFromBootData"])(e,"help_url");var C=Object(p["isFeatureEnabled"])(e,"feature_tinyspeck")||v["isDev"];var E=s&&!i;var S=Object(p["getOtherAccounts"])(e).length-1;var w=Object(Ye["a"])()?S:S+Object(I["get"])(t,"enterprise_user.teams.length",1);var j=w>=1&&!pe["isDesktop"];var T=!j&&!!Object(p["getFromBootData"])(e,"signin_url");return{administration:l,invite:c,launchWorkflowBuilder:u,customize:d,manageApps:h,analytics:f,billing:g,plans:_,orgShared:y,externalShared:k,help:O,version:C,findWorkspaces:E,switchWorkspaces:j,signin:T}}var mt={},ht=mt.removeWorkspace;var vt=new h["b"]("global_nav");var ft={actions:c["b"].object,team:c["b"].object.isRequired,signOut:c["b"].func,openPrefsModal:c["b"].func,signoutName:c["b"].string.isRequired,signoutURL:c["b"].string,signinURL:c["b"].string,launchWorkflowBuilder:c["b"].func,openSharedChannelIntroductionModal:c["b"].func,openInviteModal:c["b"].func,renderSonicMenu:c["b"].func,featureGlobalNav:c["b"].bool,featureSharedChannelsRemoveBetaLabel:c["b"].bool};var bt={actions:{},signOut:I["noop"],openPrefsModal:I["noop"],launchWorkflowBuilder:I["noop"],openSharedChannelIntroductionModal:I["noop"],openInviteModal:I["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false,featureSharedChannelsRemoveBetaLabel:false};var gt=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSigninClick=a.onSigninClick.bind(a);a.onOpenAppClick=a.onOpenAppClick.bind(a);a.renderAdminSubmenu=a.renderAdminSubmenu.bind(a);a.renderWorkspacesSubmenu=a.renderWorkspacesSubmenu.bind(a);return a}O()(t,[{key:"onSigninClick",value:function e(t){if(pe["isDesktop"]){t.preventDefault();Object(pe["signInTeam"])()}}},{key:"onOpenAppClick",value:function e(t){t.preventDefault();Se({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function e(t){return n.a.createElement(He,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return n.a.createElement(st,{menuProps:t})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.renderSonicMenu,s=a.featureGlobalNav,o=a.signoutName,l=a.signoutURL,c=a.signinURL,u=a.team,d=a.launchWorkflowBuilder,p=a.featureSharedChannelsRemoveBetaLabel,m=de()(a,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team","launchWorkflowBuilder","featureSharedChannelsRemoveBetaLabel"]);if(!s)return null;var h=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:n.a.createElement(Re,{key:"team-header"})},{type:"separator"},{label:vt.t("Preferences"),shortcut:Object(v["isMac"])()&&pe["isDesktop"]&&"\u2318,",click:function e(){return t.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:vt.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!r.administration},{label:vt.t("Analytics"),hide:!r.analytics,href:Object(le["getTeamUrl"])(u,"/stats")},{label:vt.t("Billing"),hide:!r.billing,href:Object(le["getTeamUrl"])(u,"/admin/billing")},{label:vt.t("See paid plans"),hide:!r.plans,href:Object(le["getTeamUrl"])(u,"/pricing")},{key:"launch-workflow-builder",hide:!r.launchWorkflowBuilder,click:d,children:n.a.createElement(Te,null)},{label:vt.t("Customize Slack"),hide:!r.customize,href:Object(le["getTeamUrl"])(u,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:vt.t("Invite people"),hide:!r.invite,click:function e(){return t.props.openInviteModal({source:"team_menu"})}},{label:vt.t("Manage apps"),hide:!r.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:p?vt.t("Shared channels"):vt.t("Shared channels (beta)"),hide:!r.externalShared,click:function e(){return Object(f["a"])()?t.props.openSharedChannelIntroductionModal():Object(he["a"])()}},{type:"separator"},{label:vt.t("Help & feedback"),hide:!r.help,click:Ce},{label:"Version info (TS only)",hide:!r.version,click:Ee["a"]},{type:"separator"},{label:vt.t("Find more workspaces"),hide:!r.findWorkspaces,click:function e(){return _e()}},{type:"submenu",label:vt.t("Switch workspaces"),hide:Object(f["a"])()||!r.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:vt.t("Sign in to another workspace"),hide:!r.signin,href:c,click:this.onSigninClick},{label:vt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(f["a"])(),click:function e(){return t.props.signOut(u.id)},dataQa:"logout"},{label:vt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(f["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:vt.rt("Open the Slack App"),hide:pe["isDesktop"],href:Object(le["getTeamUrl"])(u,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},m,{template:h,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(r["Component"]);gt.displayName="TeamMenu";gt.defaultProps=bt;var _t=function e(t){return{signOut:function e(){return t(ht.apply(void 0,arguments))},openPrefsModal:function e(){return t(Object(fe["a"])())},launchWorkflowBuilder:function e(){return t(Object(be["a"])({source:"global_nav_workspace_menu"}))},openSharedChannelIntroductionModal:function e(){return t(ve["a"].apply(void 0,arguments))},openInviteModal:function e(){return t(me["a"].apply(void 0,arguments))}}};var yt=function e(t){var a=Object(oe["d"])(t);return{actions:pt(t),team:a,signoutName:a.enterprise_name||Object(le["getTeamDisplayName"])(a),signoutURL:Object(le["isEnterpriseTeam"])(a)?Object(p["getFromBootData"])(t,"enterprise_logout_url"):Object(p["getFromBootData"])(t,"logout_url"),signinURL:Object(p["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureSharedChannelsRemoveBetaLabel:Object(p["isFeatureEnabled"])(t,"feature_shared_channels_remove_beta_label")}};var kt=Object(i["connect"])(yt,_t)(gt);var Ot=kt;var Ct=new h["b"]("global_nav");var Et={name:c["b"].string,featureGlobalNav:c["b"].bool,featureOfflineMode:c["b"].bool,clogger:c["b"].object.isRequired,renderSonicMenu:c["b"].func};var St={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var wt=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);a.renderIcon=a.renderIcon.bind(a);return a}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(Ot,g()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["b"],null,n.a.createElement(j["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),n.a.createElement(ce["a"],null,n.a.createElement(U["c"],{tip:Ct.t("No network connection"),position:"bottom"},n.a.createElement(j["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return n.a.createElement(j["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function e(){var t=this.props,a=t.name,r=t.featureGlobalNav;if(!a||!r)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},n.a.createElement(B["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":Ct.t("Team menu")},n.a.createElement("div",{className:"overflow_ellipsis"},a),this.renderIcon()))}}]);return t}(r["Component"]);wt.displayName="Name";wt.defaultProps=St;var It=function e(t){var a=Object(oe["d"])(t);return{name:a?Object(le["getTeamDisplayName"])(a):void 0,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(p["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(R["a"])({state:t})}};var jt=Object(i["connect"])(It)(wt);var Tt=a(1310);var At=a(191);var Nt=a(449);var Mt=a(280);var Pt=a(606);var Rt=a(1441);var xt=a(292);var Dt=a(82);var Ft=a(21);var Lt=a(203);var Bt=a(187);var Ut=a(1943);var qt={name:c["b"].string,secondary:c["b"].string,userId:c["b"].string,inDnd:c["b"].bool,inDndBySnooze:c["b"].bool};var Wt={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Ht=function e(t){var a=t.name,r=t.secondary,i=t.userId,s=t.inDnd,o=t.inDndBySnooze;var l=r?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},r):null;var c=d()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":s&&o,"p-global_nav__top_menu_schedule_background":s&&!o});return n.a.createElement("div",{className:c},n.a.createElement(At["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),l))};Ht.displayName="UserHeader";Ht.defaultProps=Wt;var Gt=function e(t){var a=Object(xe["b"])(t);var r=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),n=r.snoozeEnabled;return{name:Object(ct["getPrefCompliantMemberName"])(t,a),secondary:Object(ct["getMemberSecondaryName"])(t,a),userId:a.id,inDnd:!!Object(Lt["getDndByMemberId"])(t,a.id),inDndBySnooze:n}};var Vt=Object(i["connect"])(Gt)(Ht);var Kt=a(1209);var zt=a(1870);var Qt=new h["b"]("do_not_disturb");var Yt={inDndBySnooze:c["b"].bool.isRequired,snoozeEndTs:c["b"].number,dndEndTs:c["b"].number,do24hrTime:c["b"].bool};var Jt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false};var Xt=function(e){w()(t,e);function t(){y()(this,t);return E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"render",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,i=t.dndEndTs,s=t.do24hrTime;var o=d()("p-dnd_header",{"p-dnd_header__snooze_background":a,"p-dnd_header__schedule_background":!a});var l=a?r:i;var c=Object(Kt["b"])(l,{do24hrTime:s});return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-dnd_header__status"},n.a.createElement("div",null,n.a.createElement("strong",null,Qt.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),n.a.createElement("div",{className:"p-dnd_header__sub_text"},c)))}}]);return t}(r["PureComponent"]);Xt.displayName="DndHeader";Xt.defaultProps=Jt;var Zt=function e(t){var a=Object(p["getCurrentUserId"])(t);var r=Object(Lt["getDndScheduleByMemberId"])(t,a),n=r.nextDndEndTs;var i=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(m["h"])(t,"time24")}};var $t=Object(i["connect"])(Zt)(Xt);function ea(e){var t=Object(p["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(p["getFromBootData"])(e,"help_url"),version:t||v["isDev"]}}var ta=new h["b"]("global_nav");var aa={actions:c["b"].object,currentMember:c["b"].object,currentPresence:c["b"].string,onTriggerClose:c["b"].func,openCustomStatusDialog:c["b"].func,currentChannel:c["b"].object,inDnd:c["b"].bool,inDndBySnooze:c["b"].bool,endDndSnooze:c["b"].func,endDndSchedule:c["b"].func,featureGlobalNav:c["b"].bool,toggleUserPresence:c["b"].func,updateCurrentMemberProfile:c["b"].func,openPrefsModal:c["b"].func};var ra={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:I["noop"],openCustomStatusDialog:I["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:I["noop"],endDndSchedule:I["noop"],featureGlobalNav:false,toggleUserPresence:I["noop"],updateCurrentMemberProfile:I["noop"],openPrefsModal:I["noop"]};var na=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderDndMenu=a.renderDndMenu.bind(a);a.renderPresenceLabel=a.renderPresenceLabel.bind(a);return a}O()(t,[{key:"renderDndMenu",value:function e(t){var a=this.props.currentChannel;return n.a.createElement(Ut["a"],{currentChannel:a,menuProps:t,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,a=t.currentPresence,r=t.featureGlobalNav;if(!r)return null;switch(a){case"active":return ta.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,a=e.key;return n.a.createElement("strong",{key:a},t)});case"away":return ta.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,a=e.text,r=e.key;switch(t){case"status":return n.a.createElement("strong",{className:"half_opacity",key:r},a);case"strong":return n.a.createElement("strong",{key:r},a);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.currentMember,s=a.inDnd,o=a.inDndBySnooze,l=a.featureGlobalNav,c=de()(a,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:n.a.createElement(Vt,{key:"user-header"})},{type:"custom",children:n.a.createElement($t,{key:"dnd-header"}),hide:!s},{type:"submenu",label:ta.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:s},{label:ta.t("Resume notifications now"),key:"turn-off-dnd",hide:!s,click:o?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:ta.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!s||s&&!o},{label:ta.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!s||s&&o,click:function e(){return t.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!s},{label:ta.t("Clear status"),hide:!Object(ct["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(ct["hasCustomStatusSet"])(i)?ta.t("Edit status"):ta.t("Set a status"),shortcut:Object(v["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:ta.t("Profile & account"),click:function e(){return Object(Bt["i"])(i.id)}},{label:ta.rt("Notification preferences"),key:"notification-preferences",click:function e(){return t.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:n.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var p=d()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":s});return n.a.createElement(T["a"],g()({},c,{template:u,menuClassNames:p,noMargin:true}))}}]);return t}(r["Component"]);na.displayName="UserMenu";na.defaultProps=ra;var ia=function e(t){var a=Object(xe["b"])(t);var r=Object(Dt["a"])(t);var n=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),i=n.snoozeEnabled;return{actions:ea(t),currentMember:a,currentPresence:Object(xt["getCurrentMemberPresence"])(t),currentChannel:Object(Ft["e"])(t,r,false)||void 0,inDnd:!!Object(Lt["getDndByMemberId"])(t,a.id),inDndBySnooze:i,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var sa={openCustomStatusDialog:Tt["a"],toggleUserPresence:xt["toggleUserPresence"],updateCurrentMemberProfile:Rt["a"],endDndSnooze:Pt["b"],endDndSchedule:Pt["a"],openPrefsModal:fe["a"]};var oa=Object(i["connect"])(ia,sa)(na);var la=oa;var ca=new h["b"]("global_nav");var ua={userId:c["b"].string,hasCustomStatus:c["b"].bool,openCustomStatusDialog:c["b"].func,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var da={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:I["noop"],featureGlobalNav:false};var pa=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUserClick=a.onUserClick.bind(a);a.onStatusClick=a.onStatusClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}O()(t,[{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(la,t)}},{key:"render",value:function e(){var t=this.props,a=t.userId,r=t.hasCustomStatus,i=t.featureGlobalNav;if(!a||!i)return null;var s=r&&n.a.createElement(B["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":ca.t("Edit status")},n.a.createElement(Nt["b"],{memberId:a,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),n.a.createElement(j["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return n.a.createElement("div",{className:"p-global_nav__top_user"},s,n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},n.a.createElement(B["c"],{"aria-label":ca.t("User menu")},n.a.createElement(At["b"],{userId:a,size:32,showBadge:false,isInteractive:false,className:d()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":r}),tabIndex:"-1"}),n.a.createElement(Mt["a"],{memberId:a,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(r["Component"]);pa.displayName="User";pa.defaultProps=da;var ma=function e(t){return{userId:Object(p["getCurrentUserId"])(t),hasCustomStatus:Object(ct["hasCustomStatusSet"])(Object(xe["b"])(t)),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var ha={openCustomStatusDialog:Tt["a"]};var va=Object(i["connect"])(ma,ha)(pa);var fa=a(75);var ba=a.n(fa);var ga=a(1290);var _a=a(1076);var ya=a(102);var ka=a(103);var Oa=a(97);var Ca=a(432);var Ea={icon:c["b"].string.isRequired,pane:c["b"].string.isRequired,tooltip:c["b"].node.isRequired,"aria-label":c["b"].string.isRequired,active:c["b"].bool,children:c["b"].node,className:c["b"].string,toggleActivityFlexpane:c["b"].func.isRequired,showStarredItemsList:c["b"].func.isRequired,closeFlexpane:c["b"].func.isRequired,clogger:c["b"].object.isRequired};var Sa={active:false,children:void 0,className:void 0};var wa=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}O()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.pane,r=t.active,n=t.clogger;"team"===a?Object(Bt["m"])():"starred_items"===a&&Object(f["a"])()?r?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===a?this.props.toggleActivityFlexpane():Object(Ca["d"])(a);"mentions"===a?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===a&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,a=t.icon,r=t.tooltip,i=t.pane,s=t.active,o=t.children,l=t["aria-label"];var c=d()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,s&&"p-global_nav__top_flex--active",this.props.className);return n.a.createElement(U["c"],{tip:r,delay:U["a"],position:"bottom",offsetY:jr},n.a.createElement(B["c"],{className:c,onClick:this.onClick,"aria-label":l},n.a.createElement(j["b"],{type:a,className:"p-global_nav__top_button_icon"}),o))}}]);return t}(r["PureComponent"]);wa.displayName="FlexButton";wa.defaultProps=Sa;var Ia=function e(t,a){var r=a.pane;return{active:Object(ka["i"])(t)===r,clogger:Object(R["a"])({state:t})}};var ja=function e(t){return{toggleActivityFlexpane:function e(){return t(Object(Oa["q"])())},showStarredItemsList:function e(){return t(Object(Oa["k"])())},closeFlexpane:function e(){return t(Object(Oa["a"])())}}};var Ta=Object(i["connect"])(Ia,ja)(wa);var Aa=new h["b"]("global_nav");var Na={reactionToast:c["b"].shape({emoji:c["b"].string,memberName:c["b"].string,channelName:c["b"].string}),noAnimation:c["b"].bool,featureGlobalNav:c["b"].bool};var Ma={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var Pa=function e(t){var a=t.reactionToast,i=t.noAnimation,s=t.featureGlobalNav;if(!s)return null;var o=a&&n.a.createElement(ya["b"],{text:":"+a.emoji+":",emojiSize:ya["a"].LARGE,className:"p-global_nav__top_activity_toast"});var l=ba.a.chrome&&!pe["isDesktop"];var c=!l&&n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var u=a?n.a.createElement(r["Fragment"],null,Object(_a["a"])(a.memberName),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_high"},Object(_a["a"])(a.channelName))):n.a.createElement(r["Fragment"],null,Aa.t("Activity"),c);var p=d()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":i,"p-global_nav__top_activity--toasting":a});return n.a.createElement("div",{className:p},n.a.createElement(Ta,{icon:"mentions",pane:"activity",tooltip:u,"aria-label":Aa.t("Activity")}),o)};Pa.displayName="ActivityButton";Pa.defaultProps=Ma;var Ra=function e(t){return{reactionToast:Object(ga["getReactionToast"])(t),noAnimation:!Object(m["h"])(t,"a11y_animations"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var xa=Object(i["connect"])(Ra)(Pa);var Da=new h["b"]("global_nav");var Fa={isUserRestricted:c["b"].bool,isPaid:c["b"].bool,isEnterprise:c["b"].bool,userId:c["b"].string,showFileList:c["b"].func,showDownloads:c["b"].func,showKeyboardShortcuts:c["b"].func,showWhatsNew:c["b"].func,showUserGroupList:c["b"].func,showUserCalendar:c["b"].func,featureCalendarSimpleAgendaView:c["b"].bool,featureGlobalNav:c["b"].bool,featureSonicUserGroups:c["b"].bool,openHelpModal:c["b"].func,clogger:c["b"].object.isRequired};var La={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:I["noop"],showDownloads:I["noop"],showKeyboardShortcuts:I["noop"],showWhatsNew:I["noop"],showUserGroupList:I["noop"],showUserCalendar:I["noop"],featureCalendarSimpleAgendaView:false,featureGlobalNav:false,featureSonicUserGroups:false,openHelpModal:I["noop"]};var Ba=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTriggerClick=a.onTriggerClick.bind(a);a.clogItem=a.clogItem.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}O()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.featureGlobalNav,s=r.featureSonicUserGroups,o=r.isUserRestricted,l=r.isPaid,c=r.isEnterprise,u=r.userId;if(!i)return null;var d=[{label:Da.t("Your events"),icon:n.a.createElement(j["b"],{type:"all-files-alt"}),click:function e(){a.props.showUserCalendar();a.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Da.t("Files"),icon:n.a.createElement(j["b"],{type:"all-files-alt"}),click:function e(){a.props.showFileList({user:u});a.clogItem("files_user")}},{label:Da.t("Downloads"),icon:n.a.createElement(j["b"],{type:"cloud-download"}),click:function e(){a.props.showDownloads({user:u});a.clogItem("downloads")},hide:!pe["isDesktop"]},{type:"separator"},{label:c?Da.t("Organization Directory"):Da.t("Workspace Directory"),icon:n.a.createElement(j["b"],{type:"team-directory"}),shortcut:!ba.a.firefox&&(Object(v["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(Bt["m"])();a.clogItem("team")}},{label:Da.t("User Groups"),icon:n.a.createElement(j["b"],{type:"user-groups"}),click:function e(){s?a.props.showUserGroupList():Object(Bt["l"])();a.clogItem("groups")},hide:o||!l},{type:"separator"},{label:Da.t("What\u2019s New"),icon:n.a.createElement(j["b"],{type:"emoji-celebration"}),click:function e(){a.props.showWhatsNew();a.clogItem("whats_new")}},{label:Da.t("Keyboard Shortcuts"),icon:n.a.createElement(j["b"],{type:"keyboard"}),shortcut:Object(v["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){a.props.showKeyboardShortcuts();a.clogItem("shortcuts")}},{label:Da.t("Help"),icon:n.a.createElement(j["b"],{type:"question-circle"}),click:function e(){a.props.openHelpModal({trigger:"flex_menu"});a.clogItem("help")}}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(v["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:Tr,onClick:this.onTriggerClick},n.a.createElement(U["c"],{tip:Da.t("More options"),position:"bottom",delay:U["a"],offsetY:jr},n.a.createElement(B["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Da.t("More options")},n.a.createElement(j["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(r["PureComponent"]);Ba.displayName="FlexpanesMenu";Ba.defaultProps=La;var Ua=function e(t){return{isUserRestricted:Object(ct["isRestricted"])(Object(xe["b"])(t)),isPaid:Object(le["isPaidTeam"])(Object(oe["d"])(t)),isEnterprise:Object(p["pageNeedsEnterprise"])(t),userId:Object(p["getCurrentUserId"])(t),featureCalendarSimpleAgendaView:Object(p["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(p["isFeatureEnabled"])(t,"feature_sonic_user_groups"),clogger:Object(R["a"])({state:t})}};var qa={showFileList:Oa["g"],showKeyboardShortcuts:function e(){return Oa["h"].apply(void 0,arguments)},showDownloads:Oa["f"],showWhatsNew:Oa["p"],showUserGroupList:Oa["o"],showUserCalendar:Oa["m"],openHelpModal:Ce};var Wa=Object(i["connect"])(Ua,qa)(Ba);var Ha=a(277);var Ga=a(1677);var Va=a(2064);var Ka=a(85);var za=a(31);var Qa=a(299);var Ya=a(243);var Ja=a(197);var Xa=a(856);var Za=a(1699);var $a=a(63);var er=a(2092);var tr=a(322);var ar=a(2090);var rr={autocompleteIsOpen:c["b"].bool.isRequired,openSearchAutocomplete:c["b"].func.isRequired,closeSearchAutocomplete:c["b"].func.isRequired,searchAutocompleteSuggestionAccept:c["b"].func.isRequired,searchPrecache:c["b"].func.isRequired,displayQuery:c["b"].string,telemeter:c["b"].object};var nr={displayQuery:"",telemeter:$a["d"]};var ir=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(za["a"])(a,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);a.precacheSearch=Object(I["throttle"])(a.precacheSearch.bind(a),6e4);return a}O()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Xa["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=d()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!pe["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return n.a.createElement(Ja["a"],{enabled:["feature_primary_search"]},n.a.createElement(B["c"],{className:t,onClick:this.onClick},n.a.createElement(ar["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(r["PureComponent"]);ir.displayName="AutocompleteInputInPrimarySearch";ir.defaultProps=nr;var sr=function e(t){return{autocompleteIsOpen:Object(Ya["isSearchAutocompleteOpen"])(t),displayQuery:Object(Ha["getSearchInputBoxDisplayQuery"])(t),telemeter:Object($a["c"])({state:t})}};var or={searchPrecache:tr["n"],openSearchAutocomplete:Ya["openSearchAutocomplete"],closeSearchAutocomplete:Ya["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Za["a"]};var lr=Object(i["connect"])(sr,or)(ir);var cr={isOpen:c["b"].bool.isRequired,userQuery:c["b"].string.isRequired,closeAutocomplete:c["b"].func.isRequired,searchAutocompleteSuggestionAccept:c["b"].func.isRequired,telemeter:c["b"].object};var ur={telemeter:$a["d"]};var dr=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(za["a"])(a,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);a.calculatePopoverConstraints=Object(I["throttle"])(a.calculatePopoverConstraints.bind(a),1e3);a.searchHeaderBackdrop=Object(r["createRef"])();a.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};a.autocompleteInputRef=null;return a}O()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Xa["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(Ka["findDOMNode"])(this.autocompleteInputRef);var a=t.getBoundingClientRect();var r=t.parentElement.getBoundingClientRect();var n=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:r.bottom},contentStyle:{top:0,left:a.left-n,width:a.width+2*n}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,a=t.isOpen,r=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var s=a&&this.state.hasCalculatedConstraints;return n.a.createElement(Ja["a"],{enabled:["feature_primary_search"]},s&&n.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),n.a.createElement(lr,{ref:this.handleAutocompleteRef}),n.a.createElement(Qa["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:s,position:"bottom-right",onClose:r,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},a&&n.a.createElement("div",{className:"c-search-autocomplete"},n.a.createElement(er["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(r["PureComponent"]);dr.displayName="AutocompleteInPrimarySearch";dr.defaultProps=ur;var pr=function e(t){return{userQuery:Object(Ha["getSearchInputBoxUserQuery"])(t),isOpen:Object(Ya["isSearchAutocompleteOpen"])(t),telemeter:Object($a["c"])({state:t})}};var mr={closeAutocomplete:Ya["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Za["a"]};var hr=Object(i["connect"])(pr,mr)(dr);var vr=a(118);var fr=a(781);var br=a(575);function gr(e){return"Vsearch"===Object(Dt["a"])(e)}var _r=new h["b"]("search");var yr={displayQuery:c["b"].string,clearSearchInputField:c["b"].func,orgName:c["b"].string,teamName:c["b"].string,clogger:c["b"].object.isRequired,openFromClick:c["b"].func,openSearchAutocomplete:c["b"].func.isRequired,isPrimarySearchFeatureEnabled:c["b"].bool.isRequired,showSearchAsActive:c["b"].bool.isRequired};var kr={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:I["noop"],clearSearchInputField:I["noop"]};var Or=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.onClearClick=a.onClearClick.bind(a);return a}O()(t,[{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,a=t.displayQuery,i=t.orgName,s=t.teamName,o=t.isPrimarySearchFeatureEnabled,l=t.showSearchAsActive;var c=a?n.a.createElement(r["Fragment"],null,n.a.createElement(vr["a"],{text:a,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),n.a.createElement(B["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:_r.t("Clear")},n.a.createElement(j["b"],{type:"times-small"}))):n.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},_r.rt("Search {teamName}",{teamName:i||s||""}));var u=d()({"p-global_nav__top_search":true,"p-global_nav__top_search--no_history":!Object(L["c"])()});var p=!o||!l;return n.a.createElement(r["Fragment"],null,p&&n.a.createElement(B["c"],{className:u,onClick:this.onClick},n.a.createElement(j["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!o&&n.a.createElement(Va["a"],null),!p&&n.a.createElement(hr,null))}}]);return t}(r["Component"]);Or.displayName="SearchPlaceholderInput";Or.defaultProps=kr;var Cr=function e(t){return{displayQuery:Object(Ha["getSearchInputBoxDisplayQuery"])(t),orgName:Object(oe["f"])(t)||"",teamName:Object(le["getTeamDisplayName"])(Object(oe["d"])(t)),clogger:Object(R["a"])({state:t}),isPrimarySearchFeatureEnabled:Object(br["a"])(t),showSearchAsActive:gr(t)||Object(Ya["isSearchAutocompleteOpen"])(t)}};var Er={openSearchAutocomplete:Ya["openSearchAutocomplete"],openFromClick:fr["a"],clearSearchInputField:Ga["a"]};var Sr=Object(i["connect"])(Cr,Er)(Or);var wr=a(2477);var Ir=new h["b"]("global_nav");var jr=-12;var Tr=-4;var Ar={theme:c["b"].string,renderSonicMenu:c["b"].func,featureGlobalNav:c["b"].bool};var Nr={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var Mr=function e(t){var a=t.theme,i=t.renderSonicMenu,s=t.featureGlobalNav;if(!s)return null;var o=d()("p-global_nav__top",a&&"p-global_nav__top--theme-"+a);return n.a.createElement("div",{className:o},n.a.createElement(jt,{renderSonicMenu:i}),n.a.createElement(se,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(Sr,null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(xa,null),n.a.createElement(Ta,{icon:"star-o",pane:Object(f["a"])()?"starred_items":"stars",tooltip:n.a.createElement(r["Fragment"],null,Ir.t("Starred items"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":Ir.t("Starred items")}),n.a.createElement(Wa,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(va,null))};Mr.displayName="TopNav";Mr.defaultProps=Nr;var Pr=function e(t){return{theme:Object(m["h"])(t,"sidebar_theme"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Rr=Object(i["connect"])(Pr)(Mr);var xr=a(2029);var Dr=a(11);var Fr=a(253);var Lr=a(1367);var Br=a(233);var Ur=a(122);var qr=a(649);var Wr=a(1315);var Hr=a(1553);var Gr=a(1244);var Vr=a(1437);var Kr=Object(ge["b"])("TS.ui.invite.showInviteMemberToChannelDialog");var zr=Object(ge["b"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var Qr=a(1897);var Yr=Object(ge["b"])("TS.ui.apps_browser.startAddApps");var Jr=Object(ge["b"])("TS.notifs.canModelObHaveChannelMentions",function(){return false});var Xr=Object(ge["b"])("TS.notifs.muteOrUnmuteCorG");var Zr=a(340);var $r=a(40);var en=a.n($r);var tn=a(892);var an=new h["b"]("global_nav");var rn={channelId:c["b"].string.isRequired,channel:c["b"].object,close:c["b"].func,back:c["b"].func,featureGlobalNav:c["b"].bool};var nn={channel:void 0,close:I["noop"],back:I["noop"],featureGlobalNav:false};var sn=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDateChange=a.onDateChange.bind(a);return a}O()(t,[{key:"onDateChange",value:function e(t){var a=this.props,r=a.channelId,n=a.close;var i=en()(t,"YYYY-MM-DD").format("X");Object(Bt["q"])(r,i);n()}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.back,i=t.featureGlobalNav;if(!i)return null;var s=a.created?en()(a.created,"X").format("YYYY-MM-DD"):void 0;return n.a.createElement(T["f"],g()({},this.props,{width:325}),n.a.createElement(tn["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:en()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),n.a.createElement(B["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:r},an.t("Back to menu")))}}]);return t}(r["Component"]);sn.displayName="JumpToDate";sn.defaultProps=nn;var on=function e(t,a){var r=a.channelId;return{channel:Object(Ft["e"])(t,r),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var ln=Object(i["connect"])(on)(sn);var cn=a(1245);function un(e,t){var a=Object(Ft["e"])(e,t);if(!e||!a)return null;var r=Object(xe["e"])(e,Object(Dr["getMemberIdFromIm"])(a));var n=Object(xe["b"])(e);var i=Object(Dr["getChannelType"])(a);var s="im"===i;var o="mpim"===i;var l="channel"===i;var c="private"===i;var u=l||c;var d=Object(Dr["isYou"])(n.id,a);var m=Object(cn["c"])(e,a);var h=true;var v=!s&&!Object(ct["isUltraRestricted"])(n);var f=d;var b=s&&!d;var g=s&&!d&&!Object(Dr["isSlackbot"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isUltraRestricted"])(r)&&!Object(ct["isDeleted"])(r)&&!Object(ct["isExternal"])(r);var _=true;var y=u&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n)&&Object(Dr["isMemberOfChannel"])(a)&&(!Object(Dr["isRequired"])(a)||Object(dt["c"])(a))&&(!Object(p["pageNeedsEnterprise"])(e)||!(Object(Dr["isOrgShared"])(a)&&!Object(dt["b"])()));var k=Object(ut["S"])(e,t);var O=o&&Object(ut["G"])(e)&&!Object(Dr["isExternallySharedChannel"])(a);var C=!s&&(o||Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a));var E=C;var S=true;var w=Object(ot["a"])(e,"allow_email_ingestion");var I=u&&Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a)&&!Object(Dr["isRequired"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var j=u&&!Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var T=!l&&Object(ut["L"])(e,t);var A=Object(Dr["isArchived"])(a)&&!Object(Dr["isFrozen"])(a)&&!Object(Dr["getIsChannelMoved"])(a);var N=Object(Dr["isArchived"])(a)&&Object(ct["isAdmin"])(n)&&l&&!Object(Dr["isRequired"])(a);return{call:m,jump:h,invite:v,editProfile:f,viewProfile:b,addMember:g,details:_,options:y,retention:k,convertToPrivate:O,notifications:C,mute:E,apps:S,email:w,leave:I,join:j,exportHistory:T,unarchive:A,delete:N}}var dn=a(99);var pn=a(370);var mn=new h["b"]("global_nav");var hn=Object(ye["b"])("Un-archive a channel",function(e,t,a){var r=a.channelId;if(!Object(p["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(dn["Q"])({channelId:r})).catch(function(a){Object(P["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);var r=Object(I["get"])(a,"data.error");var i="restricted_action"===r?mn.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):mn.t("Sorry, something went wrong. Try again in a moment.");e(Object(ke["openModal"])({element:n.a.createElement(pn["a"],{title:mn.t("Un-archive failed")},i)}))})});hn.meta={name:"unarchiveChannel",key:"componentsGlobalNavChannelModelUtilityUnarchiveChannelUnarchiveChannel",description:"Un-archive a channel"};hn.propTypes={channelId:c["b"].string.isRequired};var vn=hn;var fn=new h["b"]("global_nav");var bn={channelId:c["b"].string.isRequired,channel:c["b"].object.isRequired,onMenuItemSelected:c["b"].func,team:c["b"].object,canManagePostingPermissions:c["b"].bool,actions:c["b"].object,displayName:c["b"].string,isMuted:c["b"].bool,joinChannel:c["b"].func,unarchiveChannel:c["b"].func,gantryStartCall:c["b"].func,openChannelNotificationPrefsModal:c["b"].func,featureGlobalNav:c["b"].bool,featureAnnounceOnly:c["b"].bool};var gn={onMenuItemSelected:I["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:I["noop"],unarchiveChannel:I["noop"],gantryStartCall:I["noop"],openChannelNotificationPrefsModal:I["noop"],team:void 0,canManagePostingPermissions:false,featureGlobalNav:false,featureAnnounceOnly:false};var _n=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuItemSelected=a.onMenuItemSelected.bind(a);a.getMuteLabel=a.getMuteLabel.bind(a);a.getItems=a.getItems.bind(a);a.preventClose=false;a.state={mode:"menu"};return a}O()(t,[{key:"onMenuItemSelected",value:function e(t,a){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,a)}},{key:"getMuteLabel",value:function e(){var t=this.props,a=t.isMuted,r=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(Dr["getChannelType"])(r);if(!i)return null;if(a&&s)return fn.t("Unmute this conversation");if(a&&!s)return fn.t("Unmute {channelName}",{channelName:n});if(!a&&s)return fn.t("Mute this conversation");if(!a&&!s)return fn.t("Mute {channelName}",{channelName:n});return null}},{key:"getItems",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.channel,i=a.actions,s=a.displayName,o=a.joinChannel,l=a.team,c=a.canManagePostingPermissions,u=a.featureGlobalNav,d=a.featureAnnounceOnly;var p=Object(Dr["getChannelType"])(n);var m=Object(Dr["getMemberIdFromIm"])(n);if(!i||!p||!u)return[];var v="mpim"===p;var f="channel"===p;var b="private"===p;var g=f||b;var _=[{label:fn.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:v?fn.t("Invite another member\u2026"):fn.rt("Add people to {channelName}\u2026",{channelName:s}),show:i.invite,key:"invite",click:function e(){return v?Object(Qr["a"])(n):Object(Hr["a"])(r)}},{label:fn.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Object(Gr["a"])()}},{label:fn.t("View {userPossesive} profile",{userPossesive:Object(h["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(Bt["i"])(m)}},{label:fn.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return Kr(m)}},{label:g?fn.t("View channel details"):fn.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(Ca["c"])("details")}},{label:fn.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return zr(n)}},{label:fn.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(Vr["a"])(r,"retention")}},{label:fn.t("Manage posting permissions"),show:d&&c&&i.options,key:"managePostingPermissions",click:function e(){return Object(Vr["a"])(r,"posting_privilege")}},{label:fn.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(Vr["a"])(r)}},{type:"separator",key:"separator-1"},{label:fn.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return t.props.openChannelNotificationPrefsModal({channelId:r,entryPoint:"global_nav_menu"})}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Xr(r)}},{type:"separator",key:"separator-2"},{label:fn.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Yr()}},{label:v?fn.t("Send email to this conversation\u2026"):fn.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:Object(le["getTeamUrl"])(l,"/services/new/email"),target:"_blank"},{type:"separator",key:"separator-3"},{label:fn.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(Zr["r"])(r)}},{label:fn.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:r})}},{type:"separator",key:"separator-4"},{label:fn.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(Vr["a"])(r,"export")}},{type:"separator",key:"separator-5"},{label:fn.t("Un-archive {channelName}",{channelName:s}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:r})}},{label:fn.t("Delete {channelName}",{channelName:s}),show:i.delete,key:"unarchive",click:function e(){return Object(Vr["a"])(r,"delete")}}];return _.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return n.a.createElement(T["a"],g()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return n.a.createElement(ln,g()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(r["Component"]);_n.displayName="Menu";_n.defaultProps=gn;var yn=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);var i=Object(oe["d"])(t);var s=Object(ut["N"])(t,r);return{channel:n,actions:un(t,r),displayName:Object(Dr["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(Br["isChannelMutedById"])(t,r),team:i,canManagePostingPermissions:s,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureAnnounceOnly:Object(p["isFeatureEnabled"])(t,"feature_announce_only")}};var kn={joinChannel:Ur["joinConversationApi"],unarchiveChannel:vn,gantryStartCall:qr["d"],openChannelNotificationPrefsModal:Wr["a"]};var On=Object(i["connect"])(yn,kn)(_n);var Cn=new h["b"]("channel_header");var En={channelId:c["b"].string,name:c["b"].string,type:c["b"].string.isRequired,userId:c["b"].string,members:c["b"].oneOfType([c["b"].array,c["b"].bool]),presences:c["b"].oneOfType([c["b"].object,c["b"].bool]),currentUser:c["b"].string.isRequired,isMuted:c["b"].bool,isOrgShared:c["b"].bool.isRequired,isExternallyShared:c["b"].bool.isRequired,isPendingExternallyShared:c["b"].bool.isRequired,sharedTeamIds:c["b"].arrayOf(c["b"].string),className:c["b"].string,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var Sn={channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var wn=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderChannel=a.renderChannel.bind(a);a.renderPrivate=a.renderPrivate.bind(a);a.renderIM=a.renderIM.bind(a);a.renderMPIM=a.renderMPIM.bind(a);a.renderMenu=a.renderMenu.bind(a);a.onClick=a.onClick.bind(a);return a}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){return n.a.createElement(t,null,this.props.name)}},{key:"renderPrivate",value:function e(t){return n.a.createElement(r["Fragment"],null,n.a.createElement(j["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),n.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var a=this.props.userId;return n.a.createElement(r["Fragment"],null,n.a.createElement(t,null,n.a.createElement(Fr["a"],{id:a,key:"name"})),n.a.createElement(Mt["a"],{memberId:a,className:"p-global_nav__channel_name_presence",key:"presence"}),n.a.createElement(Nt["b"],{memberId:a,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var a=this;var i=this.props,s=i.members,o=i.presences;var l=Object(I["flatMap"])(Object(I["filter"])(s,function(e){return e!==a.props.currentUser}),function(e,t){var a=o[e]===xt["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return n.a.createElement(r["Fragment"],{key:e},t>0?", ":null,n.a.createElement(Fr["a"],{id:e,className:a}),n.a.createElement(Nt["b"],{memberId:e,tooltip:false,noText:true}))});return n.a.createElement(t,null,l)}},{key:"renderShared",value:function e(){var t=this.props,a=t.isOrgShared,r=t.isExternallyShared,i=t.isPendingExternallyShared,s=t.sharedTeamIds;if(a)return n.a.createElement(U["c"],{tip:Cn.t("Shared channel"),position:"bottom"},n.a.createElement(j["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(r)return n.a.createElement(Lr["a"],{sharedTeamIds:s,pending:i,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(t){return n.a.createElement(On,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.type,i=a.className,s=a.isMuted,o=a.featureGlobalNav;if(!o)return null;var l=function e(a){var r=a.children;return n.a.createElement(T["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},n.a.createElement(B["c"],{className:"p-global_nav__channel_name_name"},r))};var c=void 0;switch(r){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=d()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+r,s&&"p-global_nav__channel_name--muted",i);return n.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(r["Component"]);wn.displayName="Name";wn.defaultProps=Sn;var In=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);var i=Object(Dr["getMemberIdsFromMpim"])(n);var s=i&&Object(I["mapValues"])(Object(I["keyBy"])(i),function(e){return Object(xt["getPresenceByMemberId"])(t,e)});return{channelId:r,name:Object(Dr["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),type:Object(Dr["getChannelType"])(n),userId:Object(Dr["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(p["getCurrentUserId"])(t),isMuted:Object(Br["isChannelMutedById"])(t,r),members:i,presences:s,isOrgShared:Object(Dr["isOrgSharedPublicOrPrivateChannel"])(n),isExternallyShared:Object(Dr["isExternallySharedChannel"])(n),isPendingExternallyShared:Object(Dr["isPendingExternallySharedChannel"])(n),sharedTeamIds:Object(Dr["getPendingAndConnectedTeamIds"])(t,n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var jn=Object(i["connect"])(In)(wn);var Tn=Object(ge["b"])("TS.ui.channel_topic_dialog.start");var An={start:Tn};var Nn=new h["b"]("global_nav");var Mn={topic:c["b"].string,isChannel:c["b"].bool.isRequired,canEdit:c["b"].bool,featureGlobalNav:c["b"].bool.isRequired};var Pn={topic:void 0,canEdit:true};var Rn=function e(t){if(t.target&&"A"===t.target.tagName)return;Tn()};var xn=function e(t){var a=t.topic,i=t.isChannel,s=t.canEdit,o=t.featureGlobalNav;if(!o||!i)return null;var l=void 0;if(a){var c=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},Nn.t("edit"));l=n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(vr["a"],{text:a,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),s&&c)}else l=s?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},Nn.t("Add a topic\u2026")):null;var u=d()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!a});return n.a.createElement(B["c"],{className:u,onClick:Rn},l)};xn.displayName="Topic";xn.defaultProps=Pn;var Dn=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n)),canEdit:Object(ut["A"])(t,r).ok,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Fn=Object(i["connect"])(Dn)(xn);var Ln=a(911);var Bn=new h["b"]("global_nav");var Un={channelId:c["b"].string.isRequired,type:c["b"].oneOf(["channel","private","im","mpim"]),starred:c["b"].bool,show:c["b"].bool.isRequired,updateStar:c["b"].func.isRequired,featureGlobalNav:c["b"].bool.isRequired,clogger:c["b"].object.isRequired};var qn={starred:false,type:"channel"};var Wn=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}O()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.starred,n=t.clogger;this.props.updateStar(!r,{channel:a});n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,a=t.type,r=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===a||"mpim"===a)return r?Bn.t("Unstar this conversation"):Bn.t("Star this conversation");return r?Bn.t("Unstar this channel"):Bn.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,a=t.starred,r=t.show;if(!r)return null;return n.a.createElement(U["c"],{position:"bottom",tip:this.getTip()},n.a.createElement(B["c"],{className:d()("p-global_nav__channel_star",a&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},n.a.createElement(j["b"],{type:a?"star":"star-o",size:"inherit"})))}}]);return t}(r["Component"]);Wn.displayName="Star";Wn.defaultProps=qn;var Hn=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);return{type:Object(Dr["getChannelType"])(n),show:Object(Dr["canStarOrUnstarChannel"])(n),starred:Object(Dr["isStarred"])(n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var Gn={updateStar:Ln["a"]};var Vn=Object(i["connect"])(Hn,Gn)(Wn);var Kn=a(323);var zn=a(240);var Qn=new h["b"]("global_nav");var Yn={count:c["b"].number,isChannel:c["b"].bool,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var Jn={count:void 0,isChannel:true,featureGlobalNav:false};var Xn=function e(t){var a=t.count,i=t.isChannel,s=t.clogger,o=t.featureGlobalNav;if(!o)return null;if(!a&&!i)return null;var l=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(I["isNumber"])(a)?Qn.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:a},l):Qn.rt("<span>\u2013</span>Pins",{count:a},l);var u=Object(I["isNumber"])(a)?Qn.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:a},l):Qn.t("View pinned items");var d=function e(){if(Object(f["a"])()){var t=Object(Kn["b"])();Object(Kn["c"])(zn["d"],t.params)}Object(Ca["f"])();s.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:Qn.t("View pinned items"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};Xn.displayName="Pins";Xn.defaultProps=Jn;var Zn=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);return{count:n&&n.pinned_items_count,isChannel:Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var $n=Object(i["connect"])(Zn)(Xn);var ei=a(317);var ti=new h["b"]("global_nav");var ai={count:c["b"].number,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var ri={count:void 0,featureGlobalNav:false};var ni=function e(t){var a=t.count,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(I["isNumber"])(a)?ti.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:a},o):ti.rt("<span>\u2013</span>Members",{count:a},o);var c=Object(I["isNumber"])(a)?ti.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:a},o):ti.t("View member list");var u=function e(){Object(Ca["e"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:ti.t("View member list"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};ni.displayName="Members";ni.defaultProps=ri;var ii=function e(t,a){var r=a.channelId;var n=Object(ei["getMemberCounts"])(t,r);return{count:n&&n.counts&&n.counts.member_count,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var si=Object(i["connect"])(ii)(ni);var oi=new h["b"]("channel_header");var li={channelId:c["b"].string.isRequired,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var ci={featureGlobalNav:false};var ui=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(On,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},n.a.createElement(U["c"],{position:"bottom-right",tip:oi.t("Channel settings"),offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item","aria-label":oi.t("Channel settings")},n.a.createElement(j["b"],{type:"cog-o"}))))}}]);return t}(r["Component"]);ui.displayName="Actions";ui.defaultProps=ci;var di=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var pi=Object(i["connect"])(di)(ui);var mi=a(1824);var hi=new h["b"]("global_nav");var vi={isBot:c["b"].bool,activeTab:c["b"].oneOf(["messages","about"]),featureGlobalNav:c["b"].bool};var fi={isBot:false,activeTab:"messages",featureGlobalNav:false};var bi=function e(t){var a=t.isBot,i=t.activeTab,s=t.featureGlobalNav;if(!s||!a)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(B["c"],{className:d()("p-global_nav__channel_bot_tab","messages"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(mi["a"])("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},hi.t("Messages")),n.a.createElement(B["c"],{className:d()("p-global_nav__channel_bot_tab","about"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(mi["a"])("about")},"data-qa":"global_nav_channel_bot_tabs_about"},hi.t("About"))),n.a.createElement("div",{className:"p-global_nav__channel_divider"}))};bi.displayName="BotTabs";bi.defaultProps=fi;var gi=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);var i=Object(Dr["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(xe["e"])(t,i);return{isBot:Object(ct["isAppOrBot"])(s),activeTab:Object(ga["getActiveAppTab"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var _i=Object(i["connect"])(gi)(bi);var yi=a(1296);var ki=new h["b"]("global_nav");var Oi={show:c["b"].bool,channel:c["b"].object,tooltipMessage:c["b"].string,featureGlobalNav:c["b"].bool,startCall:c["b"].func};var Ci={show:false,channel:void 0,tooltipMessage:void 0,featureGlobalNav:false,startCall:I["noop"]};var Ei=function e(t){var a=t.show,r=t.channel,i=t.tooltipMessage,s=t.featureGlobalNav,o=t.startCall;if(!a||!r||!s)return null;return n.a.createElement(U["c"],{position:"bottom",tip:i,offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(f["a"])()?o():Object(yi["c"])(r)},"aria-label":ki.t("Start a call")},n.a.createElement(j["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};Ei.displayName="CallButton";Ei.defaultProps=Ci;var Si=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);if(!n)return null;return{show:Object(cn["c"])(t,n),channel:n,tooltipMessage:Object(cn["b"])(t,n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var wi={startCall:qr["d"]};var Ii=Object(i["connect"])(Si,wi)(Ei);var ji=new h["b"]("channel_header");var Ti={isChannel:c["b"].bool,active:c["b"].bool,featureGlobalNav:c["b"].bool,clogger:c["b"].object.isRequired};var Ai={isChannel:true,active:false,featureGlobalNav:false};var Ni=function e(t){var a=t.isChannel,r=t.active,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=void 0;a&&r&&(o=ji.t("Hide channel details"));a&&!r&&(o=ji.t("View channel details"));!a&&r&&(o=ji.t("Hide conversation details"));a||r||(o=ji.t("View conversation details"));var l=d()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":r});var c=function e(){if(Object(f["a"])()){var t=Object(Kn["b"])();Object(Kn["c"])(zn["d"],t.params)}Object(Ca["d"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return n.a.createElement(U["c"],{position:"bottom-right",tip:o,offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:l,onClick:c},ji.t("Details")))};Ni.displayName="Details";Ni.defaultProps=Ai;var Mi=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);if(!n)return null;return{isChannel:Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n),active:"details"===Object(ka["i"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(R["a"])({state:t})}};var Pi=Object(i["connect"])(Mi)(Ni);var Ri={channelId:c["b"].string.isRequired,channelType:c["b"].oneOf(["channel","private","mpim","im"])};var xi={channelType:void 0};var Di=function e(t){var a=t.channelId,r=t.channelType;if(!a||!r)return null;var i=d()("p-global_nav__channel");return n.a.createElement("div",{className:i},n.a.createElement(Vn,{channelId:a}),n.a.createElement(jn,{channelId:a}),n.a.createElement(Fn,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(_i,{channelId:a}),"im"!==r&&n.a.createElement(si,{channelId:a}),n.a.createElement($n,{channelId:a}),n.a.createElement(Pi,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_divider"}),n.a.createElement(Ii,{channelId:a}),n.a.createElement(pi,{channelId:a}))};Di.displayName="ModelHeader";Di.defaultProps=xi;var Fi=function e(t,a){var r=a.channelId;var n=Object(Ft["e"])(t,r);if(!n)return{};return{channelType:Object(Dr["getChannelType"])(n)}};var Li=Object(i["connect"])(Fi)(Di);var Bi=a(192);var Ui=new h["b"]("global_nav");var qi={featureGlobalNav:c["b"].bool};var Wi={featureGlobalNav:false};var Hi=function e(t){var a=t.featureGlobalNav;if(!a)return null;var r=Ui.t("Threads");var i="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var s=d()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true});return n.a.createElement("div",{className:s,"data-qa":"channel_name"},n.a.createElement("div",{className:i},r))};Hi.displayName="AllThreadsHeader";Hi.defaultProps=Wi;var Gi=Object(Bi["a"])("feature_global_nav")(Hi);var Vi=a(129);var Ki=a(1458);var zi=a(460);var Qi=a(1825);var Yi=new h["b"]("global_nav");var Ji={hasUnreads:c["b"].bool,sortOrder:c["b"].string,newUnreads:c["b"].number,setUserPrefByApi:c["b"].func,featureGlobalNav:c["b"].bool};var Xi={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:I["noop"],featureGlobalNav:false};var Zi=function(e){w()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSortButton=a.renderSortButton.bind(a);a.renderSortMenu=a.renderSortMenu.bind(a);return a}O()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(Qi["b"])()}},{key:"renderSortMenu",value:function e(t){var a=this;if(!this.props.featureGlobalNav)return null;var r=[{label:Yi.t("Alphabetically"),click:function e(){return a.changeSort("alphabetical")}},{label:Yi.t("Scientifically"),click:function e(){return a.changeSort("priority")}},{label:Yi.t("Newest channel"),click:function e(){return a.changeSort("newest")}},{label:Yi.t("Oldest channel"),click:function e(){return a.changeSort("oldest")}}];return n.a.createElement(T["a"],g()({},t,{template:r}))}},{key:"renderSortButton",value:function e(){var t=this.props,a=t.hasUnreads,r=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!a)return null;var s={alphabetical:Yi.rt("<strong>Sort:</strong> Alphabetically"),priority:Yi.rt("<strong>Sort:</strong> Scientifically"),oldest:Yi.rt("<strong>Sort:</strong> Oldest channel"),newest:Yi.rt("<strong>Sort:</strong> Newest channel")};var o=s[r];return n.a.createElement(T["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},n.a.createElement(B["c"],{className:"p-global_nav__unread_sort"},o,n.a.createElement(j["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,a=t.newUnreads,r=t.featureGlobalNav;if(!r||!a)return null;var i=Yi.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:a});return n.a.createElement(B["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:Qi["c"]},n.a.createElement(j["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=d()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},Yi.t("All Unreads")),this.renderRefreshButton(),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(r["Component"]);Zi.displayName="AllUnreadsHeader";Zi.defaultProps=Xi;var $i=function e(t){return{hasUnreads:Object(zi["hasUnreads"])(t),sortOrder:Object(Ki["a"])(t),newUnreads:Object(ga["getNewUnreads"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var es={setUserPrefByApi:Vi["d"]};var ts=Object(i["connect"])($i,es)(Zi);var as={id:c["b"].string};var rs={id:void 0};var ns=function e(t){var a=t.id;if(!a)return null;if("Vall_threads"===a)return n.a.createElement(Gi,null);if("Vall_unreads"===a)return n.a.createElement(ts,null);if("Vsearch"===a)return n.a.createElement(xr["a"],null);return n.a.createElement(Li,{channelId:a})};ns.displayName="ChannelHeader";ns.defaultProps=rs;var is=function e(t){return{id:Object(Dt["a"])(t)}};var ss=Object(i["connect"])(is)(ns);var os=Object(ge["b"])("TS.ui.jumper.start",function(){return null});var ls=Object(ge["b"])("TS.ui.jumper.getSessionId",function(){return null});var cs={start:os};var us=a(1692);var ds=new h["b"]("global_nav");var ps={featureGlobalNav:c["b"].bool,maybeShowQuickSwitcher:c["b"].func};var ms={featureGlobalNav:false,maybeShowQuickSwitcher:I["noop"]};var hs=function e(t){var a=t.featureGlobalNav;if(!a)return null;var r=Object(f["a"])()?t.maybeShowQuickSwitcher:os;var i=n.a.createElement(B["c"],{className:"p-global_nav__sidebar_jumper",onClick:r},n.a.createElement(j["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),ds.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var s=d()("p-global_nav__sidebar");return n.a.createElement("div",{className:s},i)};hs.displayName="SidebarHeader";hs.defaultProps=ms;var vs=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var fs=function e(t){return{maybeShowQuickSwitcher:function e(){return t(us["a"].apply(void 0,arguments))}}};var bs=Object(i["connect"])(vs,fs)(hs);var gs=a(10);var _s=a.n(gs);var ys={closeFlexpane:c["b"].func};var ks={closeFlexpane:I["noop"]};var Os=function e(t){return n.a.createElement(B["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(j["b"],{type:"times"}))};Os.displayName="FlexClose";Os.defaultProps=ks;var Cs=Object(i["connect"])(null,{closeFlexpane:Oa["a"]})(Os);var Es=a(1659);var Ss=a(44);var ws=a(105);var Is=a(42);var js=new h["b"]("global_nav");var Ts=function e(t){var a=t.channelId,r=t.threadTs,i=t.name,s=t.isChannel,o=t.featureGlobalNav;if(!o)return null;var l=Object(Is["constructMsgPermalink"])(a,r);var c=void 0;if(i){var u=n.a.createElement(Ss["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=s?js.rt("Thread in {channelName}",{channelName:u}):js.rt("Thread with {displayName}",{displayName:u})}else c=js.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};Ts.displayName="ThreadHeader";Ts.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var As=function e(t){var a=Object(ka["e"])(t)[0];var r=Object(ws["decodeThreadKey"])(a),n=r.channelId,i=r.threadTs;var s=Object(Ft["e"])(t,n);if(!s)return null;return{channelId:n,threadTs:i,name:Object(Dr["getDisplayNameForChannel"])(t,s),isChannel:Object(Dr["isPublicChannel"])(s)||Object(Dr["isPrivateChannel"])(s),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ns=Object(i["connect"])(As)(Ts);var Ms=new h["b"]("global_nav");var Ps=function e(t){var a=t.name,r=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return r&&a?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},Ms.t("About {channelName}",{channelName:a})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},Ms.t("About this conversation"))};Ps.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var Rs=function e(t){var a=Object(Dt["a"])(t);var r=Object(Ft["e"])(t,a);if(!r)return null;return{name:Object(Dr["getDisplayNameForChannel"])(t,r),isChannel:Object(Dr["isPrivateChannel"])(r)||Object(Dr["isPublicChannel"])(r),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var xs=Object(i["connect"])(Rs)(Ps);var Ds=new h["b"]("global_nav");var Fs={isAdminUser:c["b"].bool,isEnterprise:c["b"].bool,isDetailPane:c["b"].bool,featureGlobalNav:c["b"].bool};var Ls={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var Bs=function e(t){var a=t.isAdminUser,i=t.isEnterprise,s=t.isDetailPane,o=t.featureGlobalNav;if(!o)return null;var l=i?Ds.t("Organization Directory"):Ds.t("Workspace Directory");var c=a&&!s&&n.a.createElement(r["Fragment"],null,n.a.createElement(U["c"],{tip:Ds.t("Manage members"),position:"bottom-right"},n.a.createElement(B["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(j["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},l),c)};Bs.displayName="DirectoryHeader";Bs.defaultProps=Ls;var Us=function e(t){return{isAdminUser:Object(ct["isAdmin"])(Object(xe["b"])(t)),isEnterprise:Object(le["isEnterpriseTeam"])(Object(oe["d"])(t)),isDetailPane:!Object(I["isEmpty"])(Object(ka["e"])(t)),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var qs=Object(i["connect"])(Us)(Bs);var Ws=a(1430);var Hs=new h["b"]("global_nav");var Gs={featureGlobalNav:c["b"].bool,dispatchOpenModal:c["b"].bool};var Vs={featureGlobalNav:false,dispatchOpenModal:false};var Ks=function e(t){var a=t.featureGlobalNav,i=t.dispatchOpenModal;if(!a)return null;var s=Hs.t("User Groups");var o=function e(){i({element:n.a.createElement(Ws["a"],null)})};var l=Object(dt["a"])()?n.a.createElement(r["Fragment"],null,n.a.createElement(U["c"],{tip:Hs.t("Create a user group"),position:"bottom-right"},n.a.createElement(B["c"],{"data-qa":"user_group_create_button",onClick:o,className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(j["b"],{type:"compose-dm"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"})):null;return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},s),l)};Ks.displayName="UserGroupsHeader";Ks.defaultProps=Vs;var zs=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Qs=function e(t){return{dispatchOpenModal:function e(){return t(ke["openModal"].apply(void 0,arguments))}}};var Ys=Object(i["connect"])(zs,Qs)(Ks);var Js=a(244);var Xs=new h["b"]("global_nav");var Zs={numDownloads:c["b"].number,featureGlobalNav:c["b"].bool,clearDownloads:c["b"].func};var $s={numDownloads:0,featureGlobalNav:false,clearDownloads:I["noop"]};var eo=function e(t){var a=t.numDownloads,i=t.featureGlobalNav,s=t.clearDownloads;if(!i)return null;var o=a>1&&n.a.createElement(r["Fragment"],null,n.a.createElement(B["c"],{onClick:s,className:"p-global_nav__flex_btn"},Xs.t("Clear all")),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},Xs.t("Downloads")),o)};eo.displayName="DownloadsHeader";eo.defaultProps=$s;var to=function e(t){return{numDownloads:(Object(Js["getTeamDownloadIds"])(t)||[]).length,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var ao={clearDownloads:function e(){return Object(Js["clearTeamDesktopDownloads"])()}};var ro=Object(i["connect"])(to,ao)(eo);var no=new h["b"]("global_nav");var io={flexName:c["b"].string,featureGlobalNav:c["b"].bool,featureSonicUserGroups:c["b"].bool,flexOrigin:c["b"].string};var so={flexName:void 0,featureGlobalNav:void 0,featureSonicUserGroups:void 0,flexOrigin:void 0};var oo=function(e){w()(t,e);function t(){y()(this,t);return E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.flexName,r=t.featureGlobalNav,i=t.flexOrigin,s=t.featureSonicUserGroups;if(!r)return null;var o="p-global_nav__flex_title";switch(a){case"convo":case"thread":return n.a.createElement(Ns,null);case"files":if("starred_items"===i)return n.a.createElement("h2",{className:o},no.t("Starred Items"));return n.a.createElement("h2",{className:o},no.t("Files"));case"stars":case"starred_items":return n.a.createElement("h2",{className:o},no.t("Starred Items"));case"mentions":return n.a.createElement("h2",{className:o},no.t("Activity"));case"team":return n.a.createElement(qs,null);case"whats_new":return n.a.createElement("h2",{className:o},no.t("What\u2019s New"));case"groups":case"user_groups":if(s)return n.a.createElement(Ys,null);return n.a.createElement("h2",{className:o},no.t("User Groups"));case"shortcuts":return n.a.createElement("h2",{className:o},no.t("Keyboard Shortcuts"));case"downloads":return n.a.createElement(ro,null);case"details":return n.a.createElement(xs,null);case"apps":return n.a.createElement("h2",{className:o},no.t("About this app"));default:return n.a.createElement("h2",{className:o},"Unimplemented: ",a)}}},{key:"render",value:function e(){var t=this.props.flexName;if(!t)return null;var a=d()(_s()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(f["a"])(),"p-global_nav__flex--legacy":!Object(f["a"])()},"p-global_nav__flex--"+t,true));return n.a.createElement("div",{className:a},n.a.createElement(Es["a"],null),this.renderTitle(),n.a.createElement(Cs,null))}}]);return t}(r["Component"]);oo.displayName="FlexHeader";oo.defaultProps=so;var lo=function e(t){return{flexName:Object(ka["i"])(t),flexOrigin:Object(ka["c"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(p["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var co=Object(i["connect"])(lo)(oo);var uo=function e(){return n.a.createElement(r["Fragment"],null,n.a.createElement(l["a"],null),n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(Rr,null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(bs,null),n.a.createElement(ss,null),n.a.createElement(co,null))))};uo.displayName="GlobalNav";var po=uo;var mo=function e(t,a){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(po,null)),a)};var ho=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ss,null)),a)};var vo=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(co,null)),a)};var fo=a(46);Object(fo["a"])("interop.globalNav",{mountGlobalNav:mo,mountGlobalNavChannel:ho,mountGlobalNavFlex:vo})},4478:function(e,t,a){},4481:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(48);var p=a.n(d);var m=a(3);var h=a.n(m);var v=a(9);var f=a(1594);var b=a(239);var g=a(322);var _=a(771);var y=function e(t,a){return(t.items||[]).map(function(e){return{value:e.id,label:e.id,entity:e,type:a}})};var k=function e(t){return{featureAuditLogsView:Object(v["isFeatureEnabled"])(t,"feature_audit_logs_view")}};var O=function e(t){return{getAuditLogs:function e(a){return t(Object(f["b"])(h()({},a,{reason:"OrgAuditLogsView_getAuditLogs"})))},searchUsers:function e(a){return t(Object(b["t"])({searchTerm:a,count:"20",reason:"OrgAuditLogsView_searchUsers",includeGuests:true,includeDeleted:true})).then(function(e){return y(e,_["a"].USER)})},searchAffected:function e(a){return Promise.all([t(Object(b["t"])({searchTerm:a,count:"5",reason:"OrgAuditLogsView_searchAffected_users",includeGuests:true,includeDeleted:true})),t(Object(g["c"])({module:"channels",query:a||"a",count:5,highlight:false,reason:"enterprise-audit-logs",omitSessionArgs:true})),t(Object(b["u"])({searchTerm:a,count:"5",reason:"OrgAuditLogsView_searchAffected_teams",includeDeleted:true}))]).then(function(e){var t=p()(e,3),a=t[0],r=t[1],n=t[2];var i=[];var s=y(a,_["a"].USER);s.length&&i.push({label:Object(_["c"])(_["a"].USER),options:s});var o=y(r,_["a"].CHANNEL);o.length&&i.push({label:Object(_["c"])(_["a"].CHANNEL),options:o});var l=y(n,_["a"].WORKSPACE);l.length&&i.push({label:Object(_["c"])(_["a"].WORKSPACE),options:l});return i})},getAuditLogActions:function e(){return t(Object(f["a"])({reason:"OrgAuditLogsView_getAuditLogLogActions"}))}}};var C=Object(o["connect"])(k,O)(_["b"]);var E=C;Object(c["a"])("interop.auditLogs",{render:function e(t,a){if(!t)throw new Error("auditLogs render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(E,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4484:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(26);var d=a.n(u);var p=a(10);var m=a.n(p);var h=a(37);var v=a.n(h);var f=a(3);var b=a.n(f);var g=a(5);var _=a.n(g);var y=a(7);var k=a.n(y);var O=a(4);var C=a.n(O);var E=a(8);var S=a.n(E);var w=a(2);var I=a(31);var j=a(0);var T=a(4647);var A=a(13);var N=a.n(A);var M=a(6);var P=a(20);var R=a(39);var x=a(32);var D=a(453);var F=a(9);var L=a(424);var B=a(443);var U=a(21);var q=a(141);var W=a(73);var H=a(411);var G=a(788);var V=a(1304);var K=a(137);var z=a(810);var Q=a(105);var Y=a(42);var J=a(11);var X=a(2037);var Z=a(14);var $=a(515);var ee=a(1913);var te=a(210);var ae=a(53);var re=a(176);var ne=a(59);var ie=a(1073);var se=a(300);var oe=a(551);var le=a(1465);var ce=a(1428);var ue=a(1668);var de=a(1320);var pe=a(44);var me=a(2007);var he=a(2008);var ve=a(1669);var fe=a(1303);var be=a(1401);var ge=a(421);var _e=a(94);var ye=a(851);var ke=a(200);var Oe=a(1193);var Ce=a(1194);var Ee=100;var Se=8;function we(e){var t=e.timestamps;return Object(w["last"])(t)}function Ie(e){var t=e.messages,a=e.timestamps,r=e.threadTs,n=e.lastRead,i=e.reachedStart;var s=t[r];if(!s)return"0000000000.000000";var o=Object(w["filter"])(a,function(e){return e!==r});if(Object(Y["getReplyCount"])(s)<=4)return"0000000000.000000";var l=Object(w["takeWhile"])(o,function(e){return e<=n});if(i&&l.length<=2)return"0000000000.000000";if(l.length===o.length)return Object(w["first"])(Object(w["takeRight"])(l,2));return Object(w["last"])(l)}var je=Ie;function Te(e){var t=e.threads,a=e.minimumVisibleTsByThread,r=e.maximumVisibleTsByThread,n=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,s=e.currentUserId,o=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?w["noop"]:c;var d=[];var p=[];if(i){d.push("global-loading");p.push({type:"loading"})}var m=Object(w["dropWhile"])(t,function(e){return e.threadKey!==n});var h=m.some(function(e){return Object(w["values"])(e.messages).some(function(t){if(!t){u("Missing message in "+e.threadKey);return false}return t.ts>o[e.threadKey]&&t.user!==s})});t.forEach(function(e){var t=e.channelId,s=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,m=e.reachedStart;var v=a[c];var f=r[c];if(!i&&!h&&c===n){d.push("divider-"+c);p.push({type:"divider"})}var g={channelId:t,threadTs:s,threadKey:c};var _=l.some(function(e){return e>f});d.push("heading-"+c);p.push(b()({type:"heading"},g));d.push("root-"+c);p.push(b()({type:"root"},g));var y=!m||Object(w["some"])(l,function(e){return e!==s&&e<v});if(y){d.push("load_older-"+c);p.push(b()({type:"load_older",messages:u},g))}l.forEach(function(t){if(t===s)return;if(t<v)return;if(t>f)return;var a=u[t];if(Object(Y["isHiddenInThread"])(a))return;var r=o&&t>o[e.threadKey];d.push(c+"-"+t);p.push(b()({type:"reply",ts:t,isNewReply:r},g))});if(_){d.push("load_newer-"+c);p.push(b()({type:"load_newer"},g))}d.push("footer-"+c);p.push(b()({type:"footer"},g))});if(l&&t){var v=Object(w["last"])(t);var f=v&&v.threadKey;d.push("loading_more_threads-"+f);p.push({type:"loading_more_threads"})}return{keys:d,rows:p}}var Ae=Te;function Ne(e){var t=Object(w["filter"])(e,"subscribed");var a=Object(w["sortBy"])(t,function(e){var t=e.maxMarkableTs>e.lastRead;return(t?1:0)+"-"+e.maxMarkableTs});return a.reverse()}var Me=a(152);var Pe=a(1698);var Re={channelId:j["b"].string,threadTs:j["b"].string,replyUsers:j["b"].array,replyUsersCount:j["b"].number,firstItem:j["b"].bool,clogLinkClick:j["b"].func};var xe={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,firstItem:false,clogLinkClick:w["noop"]};var De=function(e){S()(t,e);function t(e){_()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogClick=a.clogClick.bind(a);return a}C()(t,[{key:"clogClick",value:function e(){var t=this.props.clogLinkClick;t("CLICK_CHANNEL_NAME")}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,i=t.replyUsers,s=t.replyUsersCount,o=t.firstItem;var l=Object(Y["constructMsgPermalink"])(a,r);var c=N()("p-threads_view_header",{"p-threads_view_header--first":o});return n.a.createElement("div",{className:c},n.a.createElement(pe["a"],{href:l,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},n.a.createElement(Me["a"],{channelId:a,className:"p-threads_view_header__channel_name"})),n.a.createElement(Pe["a"],{replyUsers:i,replyUsersCount:s,className:"p-threads_view_header__participant_list"}))}}]);return t}(r["Component"]);De.displayName="Header";De.defaultProps=xe;function Fe(e,t){var a=t.channelId,r=t.threadTs;var n=Object(W["a"])(e,a,r);if(!n)return null;var i=Object(Y["getReplyUsers"])(n);var s=Object(Y["getReplyUsersCount"])(n);if(n.replies){i=Object(w["map"])(n.replies,"user");n.user&&i.push(n.user);s=Object(w["uniq"])(i).length}else n.user&&i.push(n.user);return{replyUsers:i,replyUsersCount:s}}var Le=Object(o["connect"])(Fe)(De);var Be=a(155);var Ue=a(1041);var qe=a(650);var We=a(552);var He=a(562);var Ge=a(531);var Ve=a(563);var Ke=a(603);var ze=a(1671);var Qe=a(1042);var Ye=a(1305);var Je=a(917);var Xe=a(918);var Ze=a(1198);var $e=a(915);var et=a(1071);var tt=a(1307);var at=a(1308);var rt=a(1309);var nt={first:j["b"].bool,last:j["b"].bool,children:j["b"].node};var it={first:false,last:false,children:void 0};var st=function(e){S()(t,e);function t(){_()(this,t);return k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C()(t,[{key:"render",value:function e(){var t=this.props,a=t.first,r=t.last;var i=N()("p-threads_view__default_background",{"p-threads_view__default_background--first":a,"p-threads_view__default_background--last":r});return n.a.createElement("div",{className:i},this.props.children)}}]);return t}(r["PureComponent"]);st.displayName="ThreadsDefaultBackground";st.defaultProps=it;var ot=st;var lt=new M["b"]("message_kit");var ct={msg:j["b"].object.isRequired,className:j["b"].string,theme:j["b"].oneOf(["light","dense"]),clogLinkClick:j["b"].func,clogThreadEvent:j["b"].func,focused:j["b"].bool,renderActionsOffscreen:j["b"].bool,itemId:j["b"].string};var ut={className:void 0,theme:"light",clogLinkClick:w["noop"],clogThreadEvent:w["noop"],focused:false,renderActionsOffscreen:false,itemId:void 0};var dt=function(e){S()(t,e);function t(){_()(this,t);return k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(He["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Ge["a"],{msg:t,relative:true,clickable:true},lt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(Ve["a"],{msg:t}),n.a.createElement(Ke["a"],{msg:t,blocksContainerContext:Be["a"].all_threads}),n.a.createElement(We["b"],{msg:t}),n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(Qe["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(rt["a"],null,n.a.createElement(He["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(Ve["a"],{msg:t}),n.a.createElement(ze["a"],{msg:t,blocksContainerContext:Be["a"].all_threads}),n.a.createElement(We["b"],{msg:t}),n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(Qe["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.clogLinkClick,s=t.focused,o=t.renderActionsOffscreen,l=t.clogThreadEvent,c=t.itemId;var u="dense"===r;var d=N()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);var p=u?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Ge["a"],{msg:a,relative:true,compact:true,clickable:true},lt.t("Open in channel"))):null;var m=u?"above":"default";var h=u?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(Ye["a"],{msg:a},n.a.createElement(ot,{first:true},n.a.createElement(Je["a"],{msg:a,className:d},n.a.createElement(Xe["a"],{hovered:s},n.a.createElement(Ze["a"],{msg:a,showComment:true,showShare:false,showJump:true,messageContainerType:P["MESSAGE_CONTAINERS"].THREADS_VIEW,renderOffscreen:o,position:m,clogLinkClick:i,clogThreadEvent:l,itemId:c},n.a.createElement(et["a"],{msg:a},n.a.createElement(tt["a"],{msg:a},n.a.createElement($e["a"],{light:n.a.createElement(qe["a"],{msg:a}),compact:p},n.a.createElement(at["a"],{msg:a},h)))))))))}}]);return t}(r["PureComponent"]);dt.displayName="RootMessage";var pt=dt;dt.defaultProps=ut;var mt=a(1833);var ht=new M["b"]("threads");var vt={msg:j["b"].object.isRequired,className:j["b"].string,highlight:j["b"].bool,clearHighlight:j["b"].func,focused:j["b"].bool,renderActionsOffscreen:j["b"].bool,isNewReply:j["b"].bool,theme:j["b"].oneOf(["light","dense"]),clogThreadEvent:j["b"].func,itemId:j["b"].string};var ft={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,isNewReply:false,theme:"light",clogThreadEvent:w["noop"],itemId:void 0};var bt=function(e){S()(t,e);function t(){_()(this,t);return k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(He["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Ge["a"],{msg:t,relative:true,clickable:true},ht.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),n.a.createElement("br",null),n.a.createElement(mt["a"],{msg:t},n.a.createElement(Ve["a"],{msg:t}),n.a.createElement(Ke["a"],{msg:t,blocksContainerContext:Be["a"].all_threads}),n.a.createElement(We["b"],{msg:t}),n.a.createElement(Ue["a"],{msg:t})),n.a.createElement(Qe["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(rt["a"],null,n.a.createElement(He["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(mt["a"],{msg:t},n.a.createElement(Ve["a"],{msg:t}),n.a.createElement(ze["a"],{msg:t,blocksContainerContext:Be["a"].all_threads}),n.a.createElement(We["b"],{msg:t}),n.a.createElement(Ue["a"],{msg:t})),n.a.createElement(Qe["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.isNewReply,c=t.theme,u=t.clogThreadEvent,d=t.itemId;var p="dense"===c;var m=N()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":l},this.props.className);var h=p?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Ge["a"],{msg:a,relative:true,compact:true,clickable:true},ht.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null;var v=p?"above":"default";var f=p?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(Ye["a"],{msg:a},n.a.createElement(ot,null,n.a.createElement(Je["a"],{msg:a,className:m,highlight:r,clearHighlight:i},n.a.createElement(Xe["a"],{hovered:s},n.a.createElement(Ze["a"],{msg:a,showComment:false,showShare:false,messageContainerType:P["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o,position:v,clogThreadEvent:u,itemId:d},n.a.createElement(tt["a"],{msg:a,showBroadcast:true},n.a.createElement($e["a"],{light:n.a.createElement(qe["a"],{msg:a}),compact:h},n.a.createElement(at["a"],{msg:a},f))))))))}}]);return t}(r["PureComponent"]);bt.displayName="ReplyMessage";var gt=bt;bt.defaultProps=ft;var _t=a(86);var yt=new M["b"]("threads");var kt={channelId:j["b"].string,threadTs:j["b"].string,minimumVisibleTs:j["b"].string,rootMsg:j["b"].object,messages:j["b"].object,loadOlderReplies:j["b"].func,theme:j["b"].oneOf(["light","dense"])};var Ot={channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:w["noop"],theme:"light"};var Ct=function(e){S()(t,e);function t(e){_()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isLoading:false};a.onClick=a.onClick.bind(a);return a}C()(t,[{key:"onClick",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.loadOlderReplies;if(!this.state.isLoading&&i){this.setState(function(){return{isLoading:true}});i(r,n).then(function(){t.setState(function(){return{isLoading:false}})})}}},{key:"render",value:function e(){var t=this.props,a=t.minimumVisibleTs,r=t.rootMsg,i=t.messages,s=t.theme;var o="dense"===s;var l=[];var c=Object(Y["getMessageTs"])(r);var u=Object(Y["getLatestReply"])(r);Object(w["each"])(i,function(e,t){!Object(Y["isEphemeral"])(e)&&!Object(Y["isTempMsg"])(e)&&t!==c&&t<=u&&l.push(t)});var d=Object(Y["getReplyCount"])(r);var p=d-l.length;var m=l.filter(function(e){return e<a});var h=Object(w["clamp"])(p+m.length,0,Ee);if(!h)return null;var v=N()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":o});return n.a.createElement(ot,null,n.a.createElement("div",{className:v},n.a.createElement(pe["a"],{onClick:this.onClick},yt.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:h})),this.state.isLoading?n.a.createElement(_t["a"],{size:"medium",className:"margin_left_25",inline:true}):null))}}]);return t}(r["Component"]);Ct.displayName="LoadOlderButton";Ct.defaultProps=Ot;function Et(e,t){var a=t.channelId,r=t.threadTs,n=t.messages;var i=Object(W["a"])(e,a,r);return{rootMsg:i,messages:n}}var St=Object(o["connect"])(Et)(Ct);var wt=new M["b"]("threads");var It={channelId:j["b"].string,threadTs:j["b"].string,maximumVisibleTs:j["b"].string,timestamps:j["b"].arrayOf(j["b"].string),loadNewerReplies:j["b"].func,theme:j["b"].oneOf(["light","dense"])};var jt={channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:w["noop"],theme:"light"};var Tt=function(e){S()(t,e);function t(e){_()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}C()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.loadNewerReplies;n(a,r)}},{key:"render",value:function e(){var t=this.props,a=t.maximumVisibleTs,r=t.timestamps,i=t.theme;var s="dense"===i;var o=r.filter(function(e){return e>a});if(!o.length)return null;var l=wt.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:o.length});var c=N()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":s});return n.a.createElement(ot,null,n.a.createElement("div",{className:c},n.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),n.a.createElement(pe["a"],{onClick:this.onClick},l)))}}]);return t}(r["Component"]);Tt.displayName="LoadNewerButton";Tt.defaultProps=jt;function At(e,t){var a=t.channelId,r=t.threadTs;var n=Object(Q["getThreadKey"])(a,r);var i=Object(q["getTimestampsByChannelId"])(e,n)||{timestamps:[]},s=i.timestamps;return{timestamps:s}}var Nt=Object(o["connect"])(At)(Tt);var Mt=a(2087);function Pt(e){return n.a.createElement(ot,{last:true},n.a.createElement("div",{className:"p-threads_view__footer"},n.a.createElement(Mt["a"],e)))}Pt.displayName="Footer";var Rt=Pt;var xt=a(225);var Dt=a(102);var Ft=new M["b"]("threads");function Lt(){var e=Object(ae["a"])();var t="115000769927";var a=Object(xt["b"])({zdLocale:e,articleId:t});return n.a.createElement("div",{className:"p-threads_view_empty"},n.a.createElement("div",{className:"p-threads_view_empty__contents"},n.a.createElement("div",{className:"p-threads_view_empty__emoji"},n.a.createElement(Dt["b"],{text:":seedling:",emojiSize:Dt["a"].LARGE})),n.a.createElement("p",{className:"p-threads_view_empty__header"},Ft.t("Tend to your threads")),n.a.createElement("p",{className:"p-threads_view_empty__message"},Ft.t("Threads you\u2019re involved in will be collected right here.")," ",n.a.createElement("br",null),n.a.createElement(pe["a"],{href:a},Ft.t("Learn about threads")))))}Lt.displayName="ThreadsEmptyState";var Bt=Lt;var Ut={className:j["b"].string,label:j["b"].string,showSpinner:j["b"].bool};var qt={className:void 0,label:void 0,showSpinner:false};var Wt=function(e){S()(t,e);function t(){_()(this,t);return k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.label,i=t.showSpinner;return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-threads_view__divider_line"}),n.a.createElement("div",{className:"p-threads_view__divider_label"},i&&n.a.createElement(_t["a"],{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),r))}}]);return t}(r["PureComponent"]);Wt.displayName="Divider";var Ht=Wt;Wt.defaultProps=qt;var Gt=new M["b"]("threads");var Vt={slowLoadingMore:j["b"].bool};var Kt={slowLoadingMore:false};var zt=function(e){S()(t,e);function t(){_()(this,t);return k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C()(t,[{key:"render",value:function e(){var t=this.props.slowLoadingMore;return n.a.createElement("div",{className:"p-threads_view__loading_more_threads"},t?Gt.t("Still loading... sorry for the long wait!"):Gt.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]);return t}(r["PureComponent"]);zt.displayName="LoadingMoreThreadsIndicator";var Qt=zt;zt.defaultProps=Kt;var Yt=a(460);var Jt=a(236);var Xt=a(27);var Zt=new M["b"]("threads");var $t={totalNewThreads:j["b"].number,userHasUnreadThreads:j["b"].bool,onClick:j["b"].func};var ea={totalNewThreads:0,userHasUnreadThreads:false,onClick:w["noop"]};var ta=function(e){S()(t,e);function t(e){_()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}C()(t,[{key:"onClick",value:function e(){this.props.onClick()}},{key:"render",value:function e(){var t=this.props,a=t.totalNewThreads,r=t.userHasUnreadThreads;if(!a)return null;if(!r)return null;var i=Zt.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:a});return n.a.createElement(Xt["c"],{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},i)}}]);return t}(r["Component"]);ta.displayName="NewThreadsBanner";ta.defaultProps=ea;function aa(e){return{totalNewThreads:Object(D["getTotalNewThreads"])(e),userHasUnreadThreads:Object(F["isFeatureEnabled"])(e,"feature_incremental_unread_counts")?Object(Jt["hasUnreadThreads"])(e):Object(Yt["hasUnreadThreads"])(e)}}var ra=Object(o["connect"])(aa)(ta);var na=a(3794);var ia="THREADS-VIEW";var sa=new M["b"]("threads");var oa=Object(de["b"])(pt);var la=Object(de["b"])(gt);var ca={threadKey:j["b"].string,channelId:j["b"].string,threadTs:j["b"].string,reachedStart:j["b"].bool,timestamps:j["b"].arrayOf(j["b"].string),messages:j["b"].objectOf(j["b"].object),lastRead:j["b"].string,subscribed:j["b"].bool,maxMarkableTs:j["b"].string};var ua={threads:j["b"].arrayOf(j["b"].shape(ca)),threadsPresent:j["b"].bool,hasMore:j["b"].bool,refreshId:j["b"].string,currentUserId:j["b"].string,cursorTs:j["b"].string,refreshThreads:j["b"].func,loadMoreThreads:j["b"].func,truncateThreads:j["b"].func,logger:j["b"].shape({error:j["b"].func,info:j["b"].func}),requestReplies:j["b"].func,markThread:j["b"].func,markAllThreads:j["b"].func,featureAriaApplicationMode:j["b"].bool,theme:j["b"].oneOf(["light","dense"]),makeMessageSummary:j["b"].func,clearTotalNewThreads:j["b"].func,clogger:j["b"].object,allThreadsRefreshCount:j["b"].number,showThreadOrRefresh:j["b"].func,focusRequestedThreadKey:j["b"].string,setFocusRequestedThreadKey:j["b"].func,totalUnreadReplies:j["b"].number,featureOfflineMode:j["b"].bool,isOffline:j["b"].bool,userAttentionIsOnChat:j["b"].bool,composerVisible:j["b"].bool,removeFromSectionNavigation:j["b"].func,addToSectionNavigation:j["b"].func,setInitialActiveSection:j["b"].func,clientTheme:j["b"].oneOf(["light","dark"])};var da={threads:void 0,threadsPresent:false,hasMore:true,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:w["noop"],loadMoreThreads:w["noop"],truncateThreads:w["noop"],logger:{error:w["noop"],info:w["noop"]},requestReplies:w["noop"],markThread:w["noop"],markAllThreads:w["noop"],featureAriaApplicationMode:false,theme:"light",makeMessageSummary:w["noop"],clearTotalNewThreads:w["noop"],clogger:{track:w["noop"]},allThreadsRefreshCount:void 0,showThreadOrRefresh:w["noop"],focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:w["noop"],totalUnreadReplies:void 0,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,composerVisible:false,removeFromSectionNavigation:w["noop"],addToSectionNavigation:w["noop"],setInitialActiveSection:w["noop"],clientTheme:"light"};var pa=function(e){S()(t,e);C()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.threads,n=t.currentUserId,i=t.refreshId,s=t.logger;var o=a.minimumVisibleTsByThread,l=a.maximumVisibleTsByThread,c=a.initialLastReadByThread,u=a.firstReadThreadKey,d=a.threadKeysOrdered;if(i!==a.currentRefreshId){o={};l={};c={};u=null;d=[]}if(Object(w["isEmpty"])(d)){var p=Ne(r);d=Object(w["map"])(p,"threadKey");if(a.currentRefreshId){var m=Object(w["map"])(r,"threadKey");Object(w["isEqual"])(d,m)||s.error(ia,"Thread order different after refreshing: "+d+" - "+m)}}if(!u){var h=Object(w["keyBy"])(r,"threadKey");u=Object(w["find"])(d,function(e){return h[e].maxMarkableTs<=h[e].lastRead})}var v={};r.forEach(function(e){if(o[e.threadKey])return;var t=je(e);v[e.threadKey]=t});var f={};r.forEach(function(e){var t=l[e.threadKey];if(t){if(!e.messages[t]){t=Object(w["findLast"])(e.timestamps,function(e){return e<t});f[e.threadKey]=t}var a=Object(w["filter"])(e.timestamps,function(e){return e>t});var r=Object(w["some"])(a,function(t){var a=e.messages[t];return a&&a.user===n});var i=Object(w["some"])(a,function(t){var a=e.messages[t];return Object(Y["isEphemeral"])(a)});if(!r&&!i)return}var s=we(e);f[e.threadKey]=s});var g={};r.forEach(function(e){if(c[e.threadKey])return;g[e.threadKey]=e.lastRead});if(Object(w["isEmpty"])(v)&&Object(w["isEmpty"])(f)&&Object(w["isEmpty"])(g)&&i===a.currentRefreshId&&u===a.firstReadThreadKey&&(d===a.threadKeysOrdered||Object(w["isEqual"])(d,a.threadKeysOrdered)))return null;return b()({},a,{currentRefreshId:i,firstReadThreadKey:u,threadKeysOrdered:d,minimumVisibleTsByThread:b()({},o,v),maximumVisibleTsByThread:b()({},l,f),initialLastReadByThread:b()({},c,g)})}}]);function t(e){_()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["a"])(a,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getAriaLabelForRow","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onArrowKeyRight","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus"]);a.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:true,slowLoadingMore:false,errored:false,hasKeyboardFocus:false};a.pendingPromises=[];a.threadsEventSeqId=0;a.initializedTime=Date.now();a.clogThreadCloseHasBeenCalled=false;a.listRef=n.a.createRef();return a}C()(t,[{key:"componentDidMount",value:function e(){this.logInfo("mounting");this.clogThreadEvent({event:"THREADS_VIEW_OPEN"});this.loadThreads()}},{key:"shouldComponentUpdate",value:function e(t,a){if(!Object(re["a"])(this.state,a))return true;var r=this.props,n=r.threads,i=v()(r,["threads"]);var s=t.threads,o=v()(t,["threads"]);if(!Object(re["a"])(i,o))return true;var l=3;if(!Object(re["a"])(n,s,l))return true;return false}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Oe["a"])(a)&&this.props.addToSectionNavigation();Object(Ce["a"])(a)&&this.props.removeFromSectionNavigation();t.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&false===this.loading&&this.reloadThreads();if(t.refreshId!==this.props.refreshId&&Object(w["isNumber"])(this.nextScrollTop)&&this.listRef.current){this.listRef.current.scrollToOffset(this.nextScrollTop);this.nextScrollTop=null}}},{key:"componentWillUnmount",value:function e(){this.logInfo("unmounting");this.clogThreadCloseEvent("OTHER");this.pendingPromises.forEach(function(e){return e.cancel()});this.props.truncateThreads()}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){var e=a.props.focusRequestedThreadKey;var t=a.listRef.current;if(!t||!e)return;var r=t.getActiveItem();var n=a.threadKeyForListKey(r);if(e&&n===e){a.logInfo("Focused "+e);a.props.setFocusRequestedThreadKey(null)}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onKeyDown",value:function e(t){var a=this;if(Object($["a"])(document.activeElement))return;if(!Object(ee["a"])(t))return;var r=this.getKeyboardFocusedThreadKey();if(!r)return;var n=Object(Q["decodeThreadKey"])(r),i=n.channelId,s=n.threadTs;var o=Object(te["a"])({viewContext:P["MESSAGE_CONTAINERS"].THREADS_VIEW,channelId:i,threadTs:s});if(o){var l=function e(){a.blur();o.focus()};Object(ae["c"])()?setTimeout(l,0):l()}}},{key:"onArrowKeyRight",value:function e(){var t=this.getKeyboardFocusedThreadKey();var a=Object(Q["decodeThreadKey"])(t),r=a.channelId,n=a.threadTs;if(!r||!n)return;this.props.showThreadOrRefresh({channelId:r,threadTs:n,requestFocus:true});this.blur()}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"getKeyboardFocusedThreadKey",value:function e(){var t=this.listRef.current;if(!t)return null;var a=t.getInitialActiveItem();var r=this.threadKeyForListKey(a);return r}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;if("root"!==a.type&&"reply"!==a.type)return null;var r="root"===a.type?a.threadTs:a.ts;return this.props.makeMessageSummary({channelId:a.channelId,ts:r,hasFocus:this.state.hasKeyboardFocus,day:{ts:r,isFirstDay:false,isLastDay:false},viewContext:P["MESSAGE_CONTAINERS"].THREADS_VIEW})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object($["a"])(t.target))return true;return!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function e(t){if(!t)return null;var a=this.keys.indexOf(t);var r=this.rows[a];if(r)return r.threadKey;return null}},{key:"focus",value:function e(){var t=this.listRef.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current;t&&t.blur()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;var n=["root","reply","heading","load_older","load_newer"];return Object(w["includes"])(n,r.type)}},{key:"clogThreadCloseEvent",value:function e(t){if(this.clogThreadCloseHasBeenCalled)return;var a={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:t};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:a});this.clogThreadCloseHasBeenCalled=true}},{key:"incrementTrackingSeqId",value:function e(){this.threadsEventSeqId+=1}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,b()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},r));this.incrementTrackingSeqId()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.logError("Threads view componentDidCatch");this.props.logger.error(ia,t,"threads_view_did_catch")}},{key:"loadThreads",value:function e(){var t=this;this.loading&&this.logError("Unexpectedly already loading");if(!this.props.refreshThreads)return;this.loading=true;var a=this.props.refreshThreads({limit:Se,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.maxTs;t.listRef&&t.listRef.current&&(t.nextScrollTop=t.listRef.current.getScrollTop());if(a){t.logInfo("marking all: "+a);t.props.markAllThreads({maxTs:a})}else t.logInfo("no threads to mark");t.setState(function(){return{isDoingGlobalRefresh:false,errored:false}})}).catch(function(e){t.setState(function(){return{errored:true}});t.logError("refreshThreads caught error");t.props.logger.error(ia,e,"threads_view_loading_error")}).finally(function(){t.loading=false;Object(w["remove"])(t.pendingPromises,a)});this.pendingPromises.push(a)}},{key:"reloadThreads",value:function e(){var t=this;this.logInfo("Reloading threads");this.setState(function(){return{currentRefreshId:null}},function(){t.listRef&&t.listRef.current&&t.listRef.current.scrollToOffset(0);t.props.clearTotalNewThreads();t.loadThreads()})}},{key:"tryAgain",value:function e(){var t=this;this.setState(function(e){return b()({},e,{errored:false})},function(){return t.loadThreads()})}},{key:"loadOlderReplies",value:function e(t,a){var r=this;var n=Object(Q["getThreadKey"])(t,a);var i=Object(w["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadOlderReplies");return Promise.resolve()}this.logInfo("Loading older replies in "+n);var s=i.timestamps;var o=this.state.minimumVisibleTsByThread[i.threadKey];var l=Object(w["filter"])(s,function(e){return e<o&&e!==a});if(l.length>=Ee){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,m()({},n,Object(w["first"])(Object(w["takeRight"])(l,Ee))))})});return Promise.resolve()}if(i.reachedStart){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,m()({},n,"0000000000.000000"))})});return Promise.resolve()}var c=this.props.requestReplies({channelId:t,threadTs:a,latest:Object(w["first"])(s),limit:Ee}).then(function(e){var t=e.msgs;var a=Object(w["first"])(Object(w["takeRight"])(t,Ee-l.length));r.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,m()({},n,a.ts))})})}).finally(function(){Object(w["remove"])(r.pendingPromises,c)});this.pendingPromises.push(c);return c}},{key:"loadNewerReplies",value:function e(t,a){var r=this;var n=Object(Q["getThreadKey"])(t,a);var i=Object(w["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadNewerReplies");return}this.setState(function(e){return b()({},e,{maximumVisibleTsByThread:b()({},e.maximumVisibleTsByThread,m()({},n,we(i)))})},function(){r.logInfo("Marking "+n+" to "+i.maxMarkableTs);r.props.markThread({channelId:t,ts:a,lastRead:i.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})})}},{key:"fetchAround",value:function e(){return false}},{key:"fetchPre",value:function e(){return false}},{key:"fetchPost",value:function e(){var t=this;var a=this.props,r=a.threads,n=a.hasMore,i=a.cursorTs;if(this.loading||!n||!r||!r.length||!i)return false;var s=setTimeout(function(){t.setState(function(e){return b()({},e,{slowLoadingMore:true})})},P["SLOW_API_RESPONSE_TIME"]);this.loading=true;this.logInfo("Loading more from "+i);var o=this.props.loadMoreThreads({currentTs:i,limit:Se}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.threads;if(!r)return;t.setState(function(e){var t=Object(w["map"])(a,"threadKey");return{threadKeysOrdered:Object(w["uniq"])([].concat(d()(e.threadKeysOrdered),d()(t)))}})}).finally(function(){var e=t.state.slowLoadingMore;t.loading=false;Object(w["remove"])(t.pendingPromises,o);clearTimeout(s);e&&t.setState(function(e){return b()({},e,{slowLoadingMore:false})})});this.pendingPromises.push(o);return o}},{key:"determineFocusItemForRender",value:function e(t,a){var r=this.props.focusRequestedThreadKey;if(r)return"root-"+r;var n=this.listRef.current;if(!n)return null;var i=n.getInitialActiveItem();if(!i)return null;var s=Object(w["startsWith"])(i,"load_older-")||Object(w["startsWith"])(i,"load_newer-");if(s&&!Object(w["includes"])(a,i)){var o=t.indexOf(i);if(-1===o)return null;var l=t[o-1];var c=a.indexOf(l);if(-1===c)return null;var u=a[c+1];if(u)return u}return null}},{key:"logInfo",value:function e(t){this.props.logger.info(ia,t)}},{key:"logError",value:function e(t){this.props.logger.error(ia,t)}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.itemId;var s=this.rows[t];var o=this.state,l=o.minimumVisibleTsByThread,c=o.maximumVisibleTsByThread,u=o.slowLoadingMore,d=o.hasKeyboardFocus;var p=this.props,m=p.theme,h=p.featureOfflineMode,v=p.isOffline;var f=N()("p-threads_view__divider",{"p-threads_view__divider--first":0===t});var b=sa.t("Loading threads\u2026");switch(s.type){case"heading":return n.a.createElement(Le,{channelId:s.channelId,threadTs:s.threadTs,firstItem:0===t,clogLinkClick:this.clogThreadCloseEvent});case"root":return n.a.createElement(oa,{channelId:s.channelId,ts:s.threadTs,theme:m,clogLinkClick:this.clogThreadCloseEvent,focused:r,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,itemId:i});case"load_older":return n.a.createElement(St,{messages:s.messages,channelId:s.channelId,threadTs:s.threadTs,minimumVisibleTs:l[s.threadKey],loadOlderReplies:this.loadOlderReplies,theme:m});case"load_newer":return n.a.createElement(Nt,{channelId:s.channelId,threadTs:s.threadTs,maximumVisibleTs:c[s.threadKey],loadNewerReplies:this.loadNewerReplies,theme:m});case"reply":return n.a.createElement(la,{channelId:s.channelId,ts:s.ts,minimumVisibleTs:l[s.threadKey],isNewReply:s.isNewReply,theme:m,focused:r,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,itemId:i});case"divider":return n.a.createElement(Ht,{className:f,label:sa.t("You\u2019re up to date")});case"loading":return n.a.createElement(Ht,{className:f,label:b,showSpinner:true});case"footer":return n.a.createElement(Rt,{channelId:s.channelId,threadTs:s.threadTs,focusInputOnMount:false,viewContext:P["MESSAGE_CONTAINERS"].THREADS_VIEW,clogThreadEvent:this.clogThreadEvent});case"loading_more_threads":if(h&&v)return n.a.createElement(be["a"],{caption:sa.t("Go online to load more threads.")});return n.a.createElement(Qt,{slowLoadingMore:u});default:this.logError("Unknown row type "+s.type);return null}}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-threads_view__top_banners"},n.a.createElement(le["a"],null),n.a.createElement(ce["a"],null,n.a.createElement(ue["a"],null)),n.a.createElement(ra,{onClick:this.reloadThreads})),n.a.createElement(ve["a"],null))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.threads,i=a.threadsPresent,s=a.currentUserId,o=a.hasMore,l=a.featureAriaApplicationMode,c=a.totalUnreadReplies,u=a.featureOfflineMode,d=a.isOffline;var p=this.state,m=p.minimumVisibleTsByThread,h=p.maximumVisibleTsByThread,v=p.firstReadThreadKey,f=p.threadKeysOrdered,b=p.isDoingGlobalRefresh,g=p.initialLastReadByThread,_=p.errored;if(_)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement("div",{className:"p-threads_view"},n.a.createElement(he["a"],{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},sa.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",n.a.createElement("br",null),sa.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(pe["a"],{href:"https://slack.com/help/contact"},t)}))));if(u&&d&&!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(fe["a"],{caption:sa.t("Go online to get the latest threads.")}));if(!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(me["a"],{clientTheme:this.props.clientTheme}));var y=Object(w["keyBy"])(r,"threadKey");var k=Object(w["compact"])(Object(w["map"])(f,function(e){return y[e]}));var O=this.keys;var C=Ae({threads:k,minimumVisibleTsByThread:m,maximumVisibleTsByThread:h,firstReadThreadKey:v,isDoingGlobalRefresh:b,currentUserId:s,initialLastReadByThread:g,hasMore:o,logError:this.logError}),E=C.rows,S=C.keys;this.rows=E;this.keys=S;var I=this.determineFocusItemForRender(O,this.keys);if(0===k.length)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(Bt,null));var j=this.keys.filter(function(e){return Object(w["startsWith"])(e,"footer-")});var A=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];var N=void 0;N=sa.t("Threads");Object(w["isNumber"])(c)&&(N=sa.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:c}));var M=n.a.createElement(se["a"],{id:P["MESSAGE_CONTAINERS"].THREADS_VIEW},n.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),n.a.createElement(T["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(oe["a"],{id:"p-threads_view",ref:t.listRef,width:a,height:r,keys:t.keys,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,persistentKeys:j,getAriaLabelForRow:t.getAriaLabelForRow,ariaLabel:N,useAriaApplicationMode:l,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:t.onItemTabWithin,keyCommands:A,activeItem:I})})));if(Object(x["a"])())return M;return n.a.createElement(ie["a"],{component:this,order:.1},M)}}]);return t}(r["Component"]);pa.displayName="ThreadsView";pa.defaultProps=da;var ma=Object(x["a"])()?Object(z["a"])(pa,"ThreadsView",{index:0}):pa;function ha(e){var t=Object(Z["a"])({state:e});var a=Object(R["a"])({state:e});var r=Object(D["getThreads"])(e);var n=Object(w["compact"])(Object(w["map"])(r,function(a){var r=a.threadKey;var n=Object(Q["decodeThreadKey"])(r),i=n.channelId,s=n.threadTs;var o=Object(U["e"])(e,i);if(!o||Object(ne["e"])(o)){t.warn("Skipping "+r+" in unknown or non-existent channel");return null}if(Object(J["isPublicChannel"])(o)&&!Object(J["isMemberOfChannel"])(o)){t.warn("Skipping "+r+" in non-member public channel");return null}var l=Object(q["getPotentiallyOutdatedTimestamps"])(e,r)||{timestamps:[],reachedStart:true},c=l.timestamps,u=l.reachedStart;var d={};var p=Object(W["a"])(e,i,s);if(!p){t.warn("Skipping "+r+" with missing root message");return null}d[s]=p;c.forEach(function(t){var a=Object(W["a"])(e,i,t);a&&(d[t]=a)});var m=Object(B["getSubscriptionState"])(e,{channelId:i,ts:s});return{threadKey:r,channelId:i,threadTs:s,reachedStart:u,timestamps:c,messages:d,lastRead:m.lastRead,subscribed:m.subscribed,maxMarkableTs:Object(X["a"])(e,i,c)||s}}));return{logger:t,clogger:a,featureAriaApplicationMode:Object(F["isFeatureEnabled"])(e,"feature_aria_application_mode"),threadsPresent:void 0!==r,threads:n,hasMore:Object(D["getThreadsHasMore"])(e),refreshId:Object(D["getThreadsRefreshId"])(e),cursorTs:Object(D["getThreadsCursorTs"])(e),currentUserId:Object(F["getCurrentUserId"])(e),theme:Object(H["a"])(e),allThreadsRefreshCount:Object(D["getAllThreadsRefreshCounter"])(e),focusRequestedThreadKey:Object(D["getFocusRequestedThreadKey"])(e),totalUnreadReplies:Object(D["getTotalUnreadReplies"])(e),featureOfflineMode:Object(F["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(K["c"])(e),userAttentionIsOnChat:Object(ge["e"])(e),composerVisible:(Object(ke["a"])(e)||"composer_toolbar"===Object(_e["getGroupForUser"])(e,"composer_toolbar"))&&Object(ye["isComposerVisible"])(e)}}function va(e){return{refreshThreads:function t(){return e(D["refreshThreads"].apply(void 0,arguments))},loadMoreThreads:function t(){return e(D["loadMoreThreads"].apply(void 0,arguments))},truncateThreads:function t(){return e(D["truncateThreads"].apply(void 0,arguments))},requestReplies:function t(){return e(L["requestReplies"].apply(void 0,arguments))},clearTotalNewThreads:function t(){return e(D["clearTotalNewThreads"].apply(void 0,arguments))},markThread:function t(){return e(B["markThread"].apply(void 0,arguments))},markAllThreads:function t(){return e(G["c"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(V["a"].apply(void 0,arguments))},showThreadOrRefresh:function t(){return e(L["showThreadOrRefresh"].apply(void 0,arguments))},setFocusRequestedThreadKey:function t(){return e(D["setFocusRequestedThreadKey"].apply(void 0,arguments))}}}var fa=Object(o["connect"])(ha,va)(ma);var ba=fa;var ga=a(161);var _a=function e(t,a){if(!t)throw new Error("mountThreadsView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(ga["a"],null,n.a.createElement(ba,null))),a)};var ya=function e(t){s.a.unmountComponentAtNode(t)};var ka=a(46);Object(ka["a"])("interop.mountThreadsView",_a);Object(ka["a"])("interop.unmountThreadsView",ya)},4486:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(3);var p=a.n(d);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(2);var O=a(0);var C=a(13);var E=a.n(C);var S=a(6);var w=a(836);var I=a(192);var j=a(23);var T={action:O["b"].node.isRequired};var A=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(r["PureComponent"]);A.displayName="AppProfileHeaderActionItem";var N=A;var M=a(3126);var P={appName:O["b"].string.isRequired,appImageSrc:O["b"].string.isRequired,appByline:O["b"].string,headerActions:O["b"].array,actions:O["b"].object.isRequired,dispatch:O["b"].func.isRequired};var R={appByline:"",headerActions:[]};var x=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);return a}f()(t,[{key:"onBackClick",value:function e(){var t=this.props,a=t.actions,r=t.dispatch;r(a.router.navigateTo("/organization/apps"));r(a.apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(k["map"])(t,function(e,t){return n.a.createElement(N,{key:t,action:e})});return a}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.appName,i=a.appImageSrc,s=a.appByline;return n.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},n.a.createElement(j["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),n.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:i,alt:r}),n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("h3",{className:"black"},r),n.a.createElement("span",{className:"p-app_profile_header__app_byline sk_foreground_max"},s))),n.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);x.displayName="AppProfileHeader";x.defaultProps=R;var D=x;var F=D;var L=a(48);var B=a.n(L);var U=a(31);var q=a(41);var W=a(27);var H=a(69);var G=a(1423);var V=a(578);var K=a(52);var z=a(170);var Q=new S["b"]("enterprise_dashboard");var Y={appIcon:O["b"].string.isRequired,appName:O["b"].string.isRequired,channelScopeInfo:O["b"].arrayOf(V["a"]),featureWtaOrgLevelApps:O["b"].bool,installOnAllWorkspaces:O["b"].bool,onCancel:O["b"].func,onGo:O["b"].func.isRequired,workspaceName:O["b"].string,workspaceScopeInfo:O["b"].arrayOf(V["a"]).isRequired,workspacesToInstallOnCount:O["b"].number};var J={channelScopeInfo:[],featureWtaOrgLevelApps:false,installOnAllWorkspaces:false,onCancel:k["noop"],workspaceName:void 0,workspacesToInstallOnCount:1};var X=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={step:0,wildcardEnabled:true};Object(U["a"])(a,["handleGoClick","handleRadioButtonChange"]);return a}f()(t,[{key:"handleGoClick",value:function e(){var t=this.state.wildcardEnabled;if(this.shouldGoToNextStep()){this.setState(function(){return{step:1}});return}this.props.onGo({wildcardEnabled:t})}},{key:"handleRadioButtonChange",value:function e(){this.setState(function(e){var t=e.wildcardEnabled;return{wildcardEnabled:!t}})}},{key:"shouldGoToNextStep",value:function e(){return 0===this.state.step&&this.props.channelScopeInfo.length>0}},{key:"renderScopeInfo",value:function e(){var t=this.props,a=t.channelScopeInfo,r=t.workspaceScopeInfo;if(1===this.state.step)return a;return r}},{key:"renderTitle",value:function e(){var t=this.props,a=t.appName,r=t.featureWtaOrgLevelApps,n=t.installOnAllWorkspaces,i=t.workspaceName,s=t.workspacesToInstallOnCount;if(!r)return"";if(1===this.state.step)return Q.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a});if(n)return Q.t("On all workspaces, {appName} would like to:",{appName:Object(S["q"])(a)});if(s>1)return Q.t("On {workspacesToInstallOnCount} workspaces, {appName} would like to:",{appName:Object(S["q"])(a),workspacesToInstallOnCount:s});return Q.t("On {workspaceName}, {appName} would like to:",{appName:Object(S["q"])(a),workspaceName:Object(S["q"])(i)})}},{key:"renderGoButtonText",value:function e(){if(!this.props.featureWtaOrgLevelApps)return"";return this.shouldGoToNextStep()?"Continue":"Install"}},{key:"renderRadioButtons",value:function e(){var t=this.props,a=t.featureWtaOrgLevelApps,r=t.appName,i=t.installOnAllWorkspaces,s=t.workspaceName,o=t.workspacesToInstallOnCount;var l=this.state,c=l.step,u=l.wildcardEnabled;if(!a||0===c)return null;var d=void 0;d=i?Q.t("Any channel accessible to full members on all workspaces."):o>1?Q.t("Any channel accessible to full members on {workspacesToInstallOnCount} workspaces.",{workspacesToInstallOnCount:o}):Q.t("Any channel accessible to full members on {workspaceName}.",{workspaceName:Object(S["q"])(s)});return n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"bold"},Q.t("Select channels")),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(K["a"],{text:Q.t("All Public Channels"),htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},n.a.createElement(z["a"],{name:"channels",id:"all-channels",checked:u,onChange:this.handleRadioButtonChange}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(K["a"],{text:Q.t("No channels"),htmlFor:"no-channels",type:"inline",subtext:Q.t("{app_name} will still be able to access a private conversation with you.",{app_name:Object(S["q"])(r)}),cursor:"pointer"},n.a.createElement(z["a"],{name:"channels",id:"no-channels",checked:!u,onChange:this.handleRadioButtonChange}))))}},{key:"render",value:function e(){var t=this.props,a=t.appIcon,r=t.onCancel;return n.a.createElement(G["b"],{appIcon:a,goButtonText:this.renderGoButtonText(),onDismiss:r,onAuthorize:this.handleGoClick,scopeInfo:this.renderScopeInfo(),shouldCloseOnGo:!this.shouldGoToNextStep(),title:this.renderTitle()},this.renderRadioButtons())}}]);return t}(r["PureComponent"]);X.displayName="OrgAppInstallDialog";X.defaultProps=J;var Z=X;var $=Object(I["a"])("feature_wta_org_level_apps")(X);var ee=$;var te=a(2083);var ae=new S["b"]("enterprise_dashboard");var re={appName:O["b"].string.isRequired,appIcon:O["b"].string.isRequired,featureWtaOrgLevelApps:O["b"].bool,onCancel:O["b"].func,onGo:O["b"].func.isRequired,uninstallFromAllWorkspaces:O["b"].bool,workspaceName:O["b"].string,workspacesToUninstallFromCount:O["b"].number};var ne={featureWtaOrgLevelApps:false,onCancel:k["noop"],uninstallFromAllWorkspaces:false,workspaceName:void 0,workspacesToUninstallFromCount:1};var ie=function e(t){var a=t.appName,r=t.appIcon,i=t.featureWtaOrgLevelApps,s=t.onCancel,o=t.onGo,l=t.uninstallFromAllWorkspaces,c=t.workspaceName,u=t.workspacesToUninstallFromCount;var d=void 0;var p=void 0;var m=void 0;if(i)if(l){d=ae.t("Uninstall {appName} from all workspaces?",{appName:Object(S["q"])(a)});p=ae.rt("I understand that members of <strong>all workspaces</strong> will no longer be able to use {appName}.",{appName:a});m=ae.rt("I understand that {appName} will lose <strong>all access</strong> to all workspaces, including access to channels.",{appName:a})}else if(u>1){d=ae.t("Uninstall {appName} from {workspacesToUninstallFromCount} workspaces?",{appName:Object(S["q"])(a),workspacesToUninstallFromCount:u});p=ae.rt("I understand that members of <strong>{workspacesToUninstallFromCount} workspaces</strong> will no longer be able to use {appName}.",{appName:a,workspacesToUninstallFromCount:u});m=ae.rt("I understand that {appName} will lose <strong>all access</strong> to {workspacesToUninstallFromCount} workspaces, including access to channels.",{appName:a,workspacesToUninstallFromCount:u})}else m=ae.rt("I understand that {appName} will lose <strong>all access</strong> to {workspaceName}, including access to channels.",{appName:a,workspaceName:c});var h={appName:a,appIcon:r,workspaceName:c,title:d,workspaceAccessCheckboxText:p,channelAccessCheckboxText:m,onGo:o,onCancel:s};return n.a.createElement(te["a"],h)};ie.displayName="OrgAppUninstallDialog";ie.defaultProps=ne;var se=ie;var oe=Object(I["a"])("feature_wta_org_level_apps")(ie);var le=oe;var ce=new S["b"]("enterprise_dashboard");var ue={appIcon:O["b"].string.isRequired,appName:O["b"].string.isRequired,featureWtaOrgLevelApps:O["b"].bool,isInstalledEverywhere:O["b"].bool,openModal:O["b"].func,scopes:O["b"].arrayOf(O["b"].object)};var de={featureWtaOrgLevelApps:false,isInstalledEverywhere:false,openModal:k["noop"],scopes:[]};var pe=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(U["a"])(a,["showInstallDialog","showUninstallDialog","renderMenu"]);return a}f()(t,[{key:"showInstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName,i=t.scopes;var s=Object(k["partition"])(i.map(function(e){return p()({},e,{scopes:[e.scope]})}),["is_channel_scope",true]),o=B()(s,2),l=o[0],c=o[1];var u={appIcon:a,appName:r,channelScopeInfo:l,installOnAllWorkspaces:true,onGo:k["noop"],workspaceScopeInfo:c};this.props.openModal({element:n.a.createElement(ee,u)})}},{key:"showUninstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName;var i={appIcon:a,appName:r,onGo:k["noop"],uninstallFromAllWorkspaces:true};this.props.openModal({element:n.a.createElement(le,i)})}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.isInstalledEverywhere,i=a.featureWtaOrgLevelApps;if(!i)return null;return n.a.createElement(H["f"],t,!r&&n.a.createElement(H["b"],{"data-qa":"ent_app_profile_install_everywhere",onSelected:this.showInstallDialog,label:ce.t("Install on all workspaces")}),n.a.createElement(H["b"],{"data-qa":"ent_app_profile_uninstall_everywhere",onSelected:this.showUninstallDialog,danger:true,label:ce.t("Uninstall on all workspaces")}))}},{key:"render",value:function e(){var t=this.props,a=t.isInstalledEverywhere,r=t.featureWtaOrgLevelApps;if(!r)return null;return n.a.createElement("div",{className:"p-app_profile_header__install_menu"},!a&&n.a.createElement(W["d"],{"data-qa":"ent_app_profile_install",className:"margin_right_75",type:"outline",onClick:k["noop"]},ce.t("Install")),n.a.createElement(H["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(W["d"],{"data-qa":"ent_app_profile_install_menu",className:"p-app_profile_header__install_menu_trigger",type:"outline",icon:"ellipsis"})))}}]);return t}(r["PureComponent"]);pe.displayName="AppProfileHeaderInstallMenu";pe.defaultProps=de;var me=pe;var he={openModal:q["openModal"]};var ve=Object(o["connect"])(null,he)(pe);var fe=a(37);var be=a.n(fe);var ge=a(1837);var _e=a(857);var ye=a(1298);var ke=new S["b"]("enterprise_dashboard");var Oe={appId:O["b"].string,workspacesByApp:O["b"].array,workspacesByAppApiCursor:O["b"].string,workspacesByAppApiTotal:O["b"].number,workspacesByAppLoading:O["b"].bool,headerItemOnClick:O["b"].func,pageSize:O["b"].number,sortBy:O["b"].string,sortDir:O["b"].string,searchQuery:O["b"].string,rowHeaderItemClassName:O["b"].string,rowClassName:O["b"].string,columns:O["b"].array.isRequired,actions:O["b"].object.isRequired,isSelectionBarShowing:O["b"].bool};var Ce={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:k["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",isSelectionBarShowing:false};var Ee="asc";var Se="desc";var we="caret_down";var Ie="caret_up";var je={};je[Ee]=we;je[Se]=Ie;var Te=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.sortBy,s=r.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,paddingBottom:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=ke.rt("No workspaces were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};return a}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.workspacesByApp,r=t.sortBy,n=t.actions;var i=this.state.offset;a.length?this.updateRowListItemsData(i):n.setWorkspacesByAppLoading(true);n.setWorkspacesByAppSortBy(r)}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.workspacesByApp,n=a.workspacesByAppApiTotal;if(n&&r.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props,r=a.appId,n=a.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=r&&r!==t.appId;r&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props,r=a.searchQuery,n=a.actions;if(t.searchQuery!==r){this.resetWorkspacesByAppsState();n.setWorkspacesByAppLoading(true)}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.workspacesByApp,s=r.workspacesByAppLoading,o=r.columns;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s&&t.columns===o||this.updateRowListItemsData(a)}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.appId,s=n.pageSize,o=n.searchQuery,l=n.workspacesByAppApiCursor,c=n.actions;if(!i)return;var u={limit:s,app:i};a&&(u.sort=a);r&&(u.sort_dir=r);null!==o&&void 0!==o&&Object(k["trim"])(o).length&&(u.query=o);l&&(u.cursor=l);c.getWorkspacesByApp(u)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var s=this.props,e=s.headerItemOnClick,o=s.actions;var l=n;var c=i;if(t.id===n){c=i&&i!==Ee?Ee:Se;o.setWorkspacesByAppSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===Ee?Se:Ee:Se;o.setWorkspacesByAppSortDir(c);o.setWorkspacesByAppSortBy(l)}var u={sortBy:l,sortDir:c};this.setState(function(){return u},function(){a.resetWorkspacesByAppsState();e&&e(t);o.setWorkspacesByAppLoading(true)})}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props.actions;t.setWorkspacesByApp([]);t.setWorkspacesByAppApiCursor(null);t.setWorkspacesByAppLoading(false);t.setWorkspacesByAppApiTotal(null)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var r=a.getBoundingClientRect();var n=this.props.isSelectionBarShowing?ye["a"]:1;var i=t-(r&&r.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px",paddingBottom:n};this.setState(l)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){a.iconType=this.determineSortState(a.id,t.header);a.onClick=this.headerItemOnClick;t.header.defaultSortType&&(a.defaultSortType=t.header.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;return t.map(function(e){return a.makeHeader(e)})}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||Ee;var o=je[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Ee?we:Ie:je[s];return l}},{key:"updateRowListItemsData",value:function e(){var t=this.props,a=t.workspacesByApp,r=t.workspacesByAppLoading,n=t.columns;var i=[];if(a&&a.length)i=a.map(function(e){var t=e.team_id;return{id:"row_"+t,items:n.map(function(a){return{id:"row_"+t+"_col_"+a.id,value:a.rowTemplate.value(e),className:a.rowTemplate.className}})}});else if(!r){var s=this.props.searchQuery;if(null===s||void 0===s||!s.length){this.setState(function(){return{rowListItems:i}});return}i=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:s})}]}]}this.setState(function(){return{rowListItems:i}})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.height,o=a.rowListItems,l=a.offset,c=a.paddingBottom;var u=this.props,d=u.rowHeaderItemClassName,p=u.rowClassName,m=u.workspacesByAppLoading,h=u.columns;var v=this.makeHeaders(h);return n.a.createElement("div",{style:{paddingBottom:c}},n.a.createElement(_e["a"],{rows:o,headers:v,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,height:s,isLoading:m,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);Te.displayName="WorkspacesByAppList";Te.defaultProps=Ce;var Ae=Te;var Ne=a(145);var Me=a(1657);var Pe=a(760);var Re=a(2093);var xe=a(2427);var De=new S["b"]("enterprise_dashboard");var Fe={orgName:O["b"].string};var Le={orgName:""};var Be=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.orgName;var a=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var r=De.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return n.a.createElement("div",{className:"p-app_profile_empty_state_container"},n.a.createElement("img",{src:a,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}}]);return t}(r["PureComponent"]);Be.displayName="AppProfileInstallationsEmptyState";Be.defaultProps=Le;var Ue=Be;var qe=new S["b"]("enterprise_dashboard");var We={orgName:O["b"].string,appId:O["b"].string,workspacesByApp:O["b"].array,workspacesByAppFullCount:O["b"].number,workspacesByAppApiCursor:O["b"].string,workspacesByAppApiTotal:O["b"].number,workspacesByAppLoading:O["b"].bool,workspacesByAppSortBy:O["b"].string,workspacesByAppSortDir:O["b"].string,searchQuery:O["b"].string,selectCount:O["b"].number,undoSearchSelectionState:O["b"].object,columns:O["b"].array.isRequired,actions:O["b"].object.isRequired,featureWtaOrgLevelApps:O["b"].bool,toggleAllWorkspacesByApp:O["b"].func};var He={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,selectCount:0,undoSearchSelectionState:void 0,searchQuery:"",featureWtaOrgLevelApps:false,toggleAllWorkspacesByApp:void 0};var Ge=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.undoFilterAndSelection=a.undoFilterAndSelection.bind(a);return a}f()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,a=t.columns,r=t.appId,n=t.workspacesByApp,i=t.workspacesByAppApiCursor,s=t.workspacesByAppApiTotal,o=t.workspacesByAppLoading,l=t.searchQuery,c=t.actions,u=t.selectCount;return{columns:a,appId:r,workspacesByApp:n,workspacesByAppApiCursor:i,workspacesByAppApiTotal:s,workspacesByAppLoading:o,searchQuery:l,actions:c,isSelectionBarShowing:u>0}}},{key:"undoFilterAndSelection",value:function e(){var t=this.props,a=t.actions,r=t.undoSearchSelectionState;r&&a.undoWorkspacesByAppSearchSelection(r)}},{key:"renderAppFilterInput",value:function e(){var t=this.props,a=t.searchQuery,r=t.workspacesByAppLoading,i=t.actions;var s=qe.t("Filter by name...");var o=!!(a&&r);return n.a.createElement(Me["a"],{placeholder:s,icon:"search",autoFocus:false,isLoading:o,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,"data-qa":"ent-app-profile-installations-filter"})}},{key:"renderUndoFilterAndSelectionAlert",value:function e(t,a){if(null===a)return null;var r=void 0;if(t){var i=a.workspaces_by_app_search_query;r=i?qe.t('Restore previous selection for filter "{filter}".',{filter:i}):qe.t("Restore previous selection and clear filter.")}return n.a.createElement(Ne["d"],{className:"p-app_management_workspaces_by_app_alert",level:"warning"},n.a.createElement(Pe["a"],{onClick:this.undoFilterAndSelection},r))}},{key:"renderSelectionBar",value:function e(t){var a=t.featureWtaOrgLevelApps,r=t.workspacesByApp,i=t.workspacesByAppFullCount,s=t.selectCount,o=t.toggleAllWorkspacesByApp;if(!a)return null;var l=[{id:"uninstall",label:qe.t("Uninstall"),disabled:0===s,isDanger:true}];return n.a.createElement(Re["a"],{position:"absolute",availableCount:i,selectedCount:s,items:r,actions:l,onToggleSelect:o,onToggleShowingSelection:k["noop"],onAction:k["noop"]})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var a=this.props,r=a.orgName,i=a.searchQuery,s=a.workspacesByAppApiTotal,o=a.workspacesByAppLoading,l=a.workspacesByAppApiCursor,c=a.undoSearchSelectionState,u=a.featureWtaOrgLevelApps;var d=this.getWorkspacesByAppListProps();var p=null===s||isNaN(s)?null:parseInt(s,10);var m=qe.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:p});if(0===s&&!i&&!o&&l)return n.a.createElement("div",null,n.a.createElement(ge["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:m,actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Ue,{orgName:r})));return n.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},n.a.createElement(ge["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:m,actions:t}),this.renderUndoFilterAndSelectionAlert(u,c),n.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},n.a.createElement(Ae,d)),this.renderSelectionBar(this.props))}}]);return t}(r["PureComponent"]);Ge.displayName="AppManageWorkspaces";Ge.defaultProps=He;var Ve=Ge;var Ke=a(296);var ze=a(116);var Qe=a(123);var Ye=new S["b"]("enterprise_dashboard");function Je(e){var t=e.toggleAllWorkspacesByApp,a=e.toggleWorkspacesByApp,r=e.onWorkspaceNameClick,n=e.workspacesByApp,i=e.selectionState,s=e.showOrgLevelAppsUI;var o=[$e({onWorkspaceNameClick:r}),et()];var l=s?[Ze({selectionState:i,workspacesByApp:n,toggleAllWorkspacesByApp:t,toggleWorkspacesByApp:a})].concat(o):o.concat(tt());return{columns:l,toggleAllWorkspacesByApp:t}}function Xe(e,t){var a=t.actions,r=t.dispatch;var n=a.apps;var i=333;var s=Object(Ke["bindActionCreators"])(n[e],r);var o=Object(k["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";s.setWorkspacesByAppSearchQuery(t);s.resetWorkspacesByAppApiCursor()},i,{trailing:true});function l(e){var t=e.target.value;o(t)}return p()({},s,{onSearchInputChange:l})}function Ze(e){var t=e.selectionState,a=e.workspacesByApp,r=void 0===a?[]:a,i=e.toggleAllWorkspacesByApp,s=e.toggleWorkspacesByApp;var o=function e(){return i("NONE"===t||"SOME"===t)};var l=function e(t){return s(!!t.target.checked,t.target.value)};var c=r.map(function(e){return e.team_id}).join(" ");return{id:"checkbox",header:{value:n.a.createElement(Qe["a"],{checked:"ALL"===t,indeterminate:"SOME"===t,"aria-controls":c,onChange:o,className:"p-app_management_workspaces_by_app_checkbox"}),sortable:false,"data-qa":"ent-app-profile-installations-header-name",className:"p-app_management_workspaces_by_app_checkbox_col"},rowTemplate:{value:function e(t){return n.a.createElement(Qe["a"],{id:t.team_id,checked:!!t.isSelected,value:t.team_id,onChange:l,className:"p-app_management_workspaces_by_app_checkbox"})},className:"p-app_management_workspaces_by_app_checkbox_col"}}}function $e(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:Ye.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(a){var r=a&&a.icons&&a.icons.image_68;return n.a.createElement(ze["a"],{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(a.team_id)}},r&&n.a.createElement("img",{src:r,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:a.name}),n.a.createElement("span",{className:"bold"},a.team_name))}}}}function et(){return{id:"installed_on",header:{value:Ye.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return n.a.createElement("div",null,r)}}}}function tt(){return{id:"installed_by",header:{value:Ye.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by.count||1;var r=Ye.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:a});return n.a.createElement("div",null,r)}}}}var at={orgName:O["b"].string,appId:O["b"].string,workspacesByApp:O["b"].array,workspacesByAppFullCount:O["b"].number,workspacesByAppApiCursor:O["b"].string,workspacesByAppApiTotal:O["b"].number,workspacesByAppLoading:O["b"].bool,workspacesByAppSortBy:O["b"].string,workspacesByAppSortDir:O["b"].string,searchQuery:O["b"].string,selectionState:O["b"].string,selectCount:O["b"].number,actions:O["b"].object.isRequired,dispatch:O["b"].func.isRequired,featureWtaOrgLevelApps:O["b"].bool,showOrgLevelAppsUI:O["b"].bool,undoSearchSelectionState:O["b"].object};var rt={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,featureWtaOrgLevelApps:false,showOrgLevelAppsUI:false,undoSearchSelectionState:null};var nt=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.actions,n=e.dispatch;a.actions=Xe("installations",{actions:r,dispatch:n});a.generateAppsCSV=a.generateAppsCSV.bind(a);a.onWorkspaceNameClick=a.onWorkspaceNameClick.bind(a);a.toggleAllWorkspacesByApp=a.toggleAllWorkspacesByApp.bind(a);a.toggleWorkspacesByApp=a.toggleWorkspacesByApp.bind(a);return a}f()(t,[{key:"onWorkspaceNameClick",value:function e(t){var a=this.props,r=a.actions,n=a.dispatch;return n(r.router.navigateTo("/organization/teams/"+t))}},{key:"toggleAllWorkspacesByApp",value:function e(t){var a=this.props,r=a.workspacesByAppApiTotal,n=a.searchQuery;this.actions.toggleAllWorkspacesByApp({select:t,searchQuery:n,count:r})}},{key:"toggleWorkspacesByApp",value:function e(t,a){this.actions.toggleWorkspacesByApp({select:t,workspaces:[a]})}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.searchQuery,r=t.workspacesByAppSortBy,n=t.workspacesByAppSortDir,i=t.appId,s=t.actions,o=t.dispatch;var l={type:"teams_by_app",app_id:i};a&&(l.query=a);if(r){l.sort_prefix=r;n&&(l.sort_dir=n)}o(s.apps.generateAppsCSVForSlackbotDM(l))}},{key:"render",value:function e(){var t=this.props,a=t.actions,r=t.dispatch,i=t.showOrgLevelAppsUI,s=be()(t,["actions","dispatch","showOrgLevelAppsUI"]);var o=Je({selectionState:s.selectionState,workspacesByApp:s.workspacesByApp,toggleAllWorkspacesByApp:this.toggleAllWorkspacesByApp,toggleWorkspacesByApp:this.toggleWorkspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick,showOrgLevelAppsUI:i});return n.a.createElement(Ve,p()({},o,s,{actions:this.actions}))}}]);return t}(r["PureComponent"]);nt.displayName="AppProfileInstallations";nt.defaultProps=rt;var it=nt;var st=a(1159);var ot=new S["b"]("enterprise_dashboard");var lt=function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state_restricted.png";var a=ot.t("Permissions can\u2019t be shown for this app");var r=ot.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=ot.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},r),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};lt.displayName="AppProfilePermissionsEmptyState";var ct=lt;var ut=new S["b"]("enterprise_dashboard");var dt={permissionsItems:O["b"].array,isDirectoryPublished:O["b"].bool,isXoxaApp:O["b"].bool,appId:O["b"].string};var pt={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var mt=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={permissions:[],channelScopePermissions:[]};a.formatPermissions=a.formatPermissions.bind(a);return a}f()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var a=0;function r(){a+=1;return"scope_"+a+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=r();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var a=this.state,r=a.channelScopePermissions,i=a.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return n.a.createElement(ct,null);var s=void 0;s=t?ut.t("On workspaces, this app will be able to:"):ut.t("This app will be able to:");var o=ut.t("When added to a channel, this app will also be able to:");if(r.length)return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},s),n.a.createElement(st["a"],{scopeInfo:i,key:"permissions"}),n.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},o),n.a.createElement(st["a"],{scopeInfo:r,key:"channelScopePermissions"}));return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},s),n.a.createElement(st["a"],{scopeInfo:i}))}}]);return t}(r["PureComponent"]);mt.displayName="AppProfilePermissions";mt.defaultProps=pt;var ht=mt;var vt=a(2696);var ft=a(2693);var bt={appId:O["b"].string.isRequired,isDirectoryPublished:O["b"].bool.isRequired,scopeInfo:ft["a"].isRequired};var gt=function e(t){var a=t.appId,r=t.isDirectoryPublished,i=t.scopeInfo;if(!r&&"A02"!==a)return n.a.createElement(ct,null);return n.a.createElement("div",{className:"p-app_profile_permission padding_top_175"},n.a.createElement(vt["a"],{scopeInfo:i,smallHeadings:true}))};gt.displayName="AppProfileScopeInfo";var _t=gt;var yt=a(1202);var kt=a(109);var Ot=a(91);var Ct=new S["b"]("enterprise_dashboard");var Et={appName:O["b"].string.isRequired,appIcon:O["b"].string.isRequired,featureWtaOrgLevelApps:O["b"].bool,onDisable:O["b"].func,onEnable:O["b"].func,orgName:O["b"].string.isRequired};var St={onDisable:k["noop"],onEnable:k["noop"],featureWtaOrgLevelApps:false};var wt=function e(t){var a=t.appIcon,r=t.appName,i=t.featureWtaOrgLevelApps,s=t.onEnable,o=t.onDisable,l=t.orgName;if(!i)return null;var c=Ct.t("Automatically install {appName} on new workspaces?",{appName:Object(S["q"])(r)});var u=Ct.t("{appName} will be automatically installed on newly created workspaces and workspaces that are migrated into {orgName}. You can change this policy later",{appName:Object(S["q"])(r),orgName:Object(S["q"])(l)});return n.a.createElement(Ot["a"],{cancelText:Ct.t("No"),contentLabel:c,"data-qa":"app_automatic_install_dialog",goButtonText:Ct.t("Yes"),onCancel:o,onGo:s,showCancelButton:true,title:c,titleImage:a,truncateTitle:false},u)};wt.displayName="AppAutomaticInstallDialog";wt.defaultProps=St;var It=Object(kt["pure"])(wt);var jt=new S["b"]("enterprise_dashboard");var Tt={appIcon:O["b"].string.isRequired,appName:O["b"].string.isRequired,automaticInstallEnabled:O["b"].bool,featureWtaOrgLevelApps:O["b"].bool,orgName:O["b"].string.isRequired,openModal:O["b"].func};var At={automaticInstallEnabled:false,featureWtaOrgLevelApps:false,openModal:k["noop"]};var Nt=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showAutomaticInstallDialog=a.showAutomaticInstallDialog.bind(a);return a}f()(t,[{key:"showAutomaticInstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName,i=t.featureWtaOrgLevelApps,s=t.orgName;var o={appIcon:a,appName:r,featureWtaOrgLevelApps:i,orgName:s};this.props.openModal({element:n.a.createElement(It,o)})}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.automaticInstallEnabled,i=t.featureWtaOrgLevelApps,s=t.orgName;if(!i)return null;var o={className:"no_border",control:{editOnly:true,onEdit:this.showAutomaticInstallDialog,type:"button"},description:jt.t("Set whether {appName} will be automatically installed on newly created workspaces and any workspaces migrated into {orgName}.",{appName:Object(S["q"])(a),orgName:Object(S["q"])(s)}),label:jt.t("Automatic Installation"),onClick:this.showAutomaticInstallDialog,state:r?jt.t("Enabled"):jt.t("Disabled")};return n.a.createElement("div",{className:"c-app_management_indent_half border_top"},n.a.createElement(yt["a"],o))}}]);return t}(r["PureComponent"]);Nt.displayName="AppProfilePolicies";Nt.defaultProps=At;var Mt=Nt;var Pt={openModal:q["openModal"]};var Rt=Object(o["connect"])(null,Pt)(Nt);var xt=new S["b"]("enterprise_dashboard");var Dt=O["b"].shape({workspacesByApp:O["b"].array,workspacesByAppFullCount:O["b"].number,workspacesByAppApiCursor:O["b"].string,workspacesByAppApiTotal:O["b"].number,workspacesByAppLoading:O["b"].bool,workspacesByAppSortBy:O["b"].string,workspacesByAppSortDir:O["b"].string,searchQuery:O["b"].string,selectionState:O["b"].string,selectCount:O["b"].number,undoSearchSelectionState:O["b"].object});var Ft={appName:O["b"].string.isRequired,appId:O["b"].string,appImageSrc:O["b"].string.isRequired,appImageSrcLarge:O["b"].string,appByline:O["b"].string,appScope:O["b"].oneOfType([O["b"].object,O["b"].string,O["b"].array]),automaticInstallEnabled:O["b"].bool,userIsCreationTeamMember:O["b"].bool,headerActions:O["b"].array,isOpen:O["b"].bool,isDirectoryPublished:O["b"].bool,isInstalledEverywhere:O["b"].bool,isSlackIntegration:O["b"].bool,orgName:O["b"].string,installations:Dt,appsDetailViewSelectedTab:O["b"].string,appsDetailViewWorkspaceContext:O["b"].string,appsDetailViewWorkspaceDomain:O["b"].string,currentUserTeams:O["b"].array,rootURL:O["b"].string.isRequired,isXoxaApp:O["b"].bool,isDistributedApp:O["b"].bool,orgTeams:O["b"].array,actions:O["b"].object.isRequired,dispatch:O["b"].func.isRequired,featureWtaOrgLevelApps:O["b"].bool,featureGroupScopes:O["b"].bool};var Lt={appId:"",appByline:"",appImageSrcLarge:void 0,appScope:[],automaticInstallEnabled:false,userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isInstalledEverywhere:false,isSlackIntegration:false,orgName:"",installations:{workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,undoSearchSelectionState:null},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureWtaOrgLevelApps:false,featureGroupScopes:false};var Bt=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.navigateToProfileTab=a.navigateToProfileTab.bind(a);a.navigateToAppDirectory=a.navigateToAppDirectory.bind(a);return a}f()(t,[{key:"navigateToProfileTab",value:function e(t){var a=this.props,r=a.actions,n=a.dispatch;return n(r.router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,a=t.appsDetailViewWorkspaceContext,r=t.appsDetailViewWorkspaceDomain,n=t.userIsCreationTeamMember,i=t.currentUserTeams,s=t.rootURL,o=t.orgTeams;var l=void 0;if(a&&i&&Object(k["includes"])(i,a)){var c="https://"+(r||"my")+"."+s.replace(/(http:\/\/|https:\/\/)/,"");l=c+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(n)l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(k["find"])(o,function(e){return e.id===i[0]});l="https://"+u.domain+"."+s.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(l,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t=this.props,a=t.installations,r=t.orgName,i=t.appId,s=t.isXoxaApp,o=t.actions,l=t.dispatch,c=t.featureWtaOrgLevelApps;return n.a.createElement(it,p()({},a,{orgName:r,appId:i,actions:o,dispatch:l,featureWtaOrgLevelApps:c,showOrgLevelAppsUI:s&&c}))}},{key:"renderPermissionsContent",value:function e(){var t=this.props,a=t.appId,r=t.appScope,i=t.featureGroupScopes,s=t.isDirectoryPublished,o=t.isXoxaApp;if(i&&!o)return n.a.createElement(_t,{appId:a,isDirectoryPublished:s,scopeInfo:Object(k["isEmpty"])(r)?{}:r});return n.a.createElement(ht,{permissionsItems:r,isDirectoryPublished:s,isXoxaApp:o,appId:a})}},{key:"renderPoliciesContent",value:function e(){var t=this.props,a=t.appImageSrc,r=t.appName,i=t.automaticInstallEnabled,s=t.featureWtaOrgLevelApps,o=t.orgName;return n.a.createElement(Rt,{appIcon:a,appName:r,automaticInstallEnabled:i,featureWtaOrgLevelApps:s,orgName:o})}},{key:"renderHeaderActions",value:function e(){var t=this.props,a=t.appImageSrcLarge,r=t.appName,i=t.appScope,s=t.featureWtaOrgLevelApps,o=t.headerActions,l=t.isInstalledEverywhere,c=t.isXoxaApp;return s&&c?o.concat(n.a.createElement(ve,{appName:r,appIcon:a,featureWtaOrgLevelApps:s,isInstalledEverywhere:l,scopes:i})):o}},{key:"render",value:function e(){var t=this.props,a=t.actions,r=t.appByline,i=t.appImageSrc,s=t.appName,o=t.currentUserTeams,l=t.dispatch,c=t.featureWtaOrgLevelApps,u=t.isDistributedApp,d=t.isOpen,p=t.isSlackIntegration,m=t.isXoxaApp,h=t.userIsCreationTeamMember;var v=u&&o&&o.length||h;var f=[{title:xt.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];p||f.push({title:xt.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});c&&m&&f.push({title:xt.t("Policies"),id:"policies",content:this.renderPoliciesContent(),onClick:this.navigateToProfileTab});v&&f.push({title:xt.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var b={actions:a,appByline:r,appImageSrc:i,appName:s,dispatch:l,headerActions:this.renderHeaderActions(),isOpen:d};return n.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},n.a.createElement(F,b),n.a.createElement(w["a"],{tabs:f,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(r["PureComponent"]);Bt.displayName="BaseAppProfile";Bt.defaultProps=Lt;var Ut=Object(I["a"])("feature_wta_org_level_apps","feature_group_scopes")(Bt);var qt=a(9);var Wt=new S["b"]("enterprise_dashboard");var Ht={openApproveAppsModal:O["b"].func.isRequired,openRestrictAppsModal:O["b"].func.isRequired,featureEntAdminApprovedApps:O["b"].bool};var Gt={featureEntAdminApprovedApps:false};var Vt=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"renderApproveAppsBtn",value:function e(){var t=this.props.featureEntAdminApprovedApps;if(!t)return null;var a=Wt.t("Approve Apps");return n.a.createElement("div",{"data-qa":"approve_apps_button"},n.a.createElement(W["d"],{onClick:this.props.openApproveAppsModal,type:"outline"},a))}},{key:"renderRestrictAppsBtn",value:function e(){var t=this.props.featureEntAdminApprovedApps;if(!t)return null;var a=Wt.t("Restrict Apps");return n.a.createElement("div",{"data-qa":"restrict_apps_button"},n.a.createElement(W["d"],{onClick:this.props.openRestrictAppsModal,type:"outline",className:"margin_left_50"},a))}},{key:"render",value:function e(){var t=Wt.t("Apps");return n.a.createElement("div",{className:"c-app_management_indent display_flex align_items_center justify_content_between"},n.a.createElement("h1",null,t),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderApproveAppsBtn(),this.renderRestrictAppsBtn()))}}]);return t}(r["Component"]);Vt.displayName="AppManagementHeader";Vt.defaultProps=Gt;var Kt=Vt;var zt=a(166);var Qt=a(1398);var Yt=a(497);var Jt=a(2428);var Xt={isOpen:O["b"].bool.isRequired,title:O["b"].string.isRequired,subtext:O["b"].string.isRequired,contextButtonLabel:O["b"].string.isRequired,onDownloadClick:O["b"].func,contextCaption:O["b"].string,onContextBlur:O["b"].func};var Zt={onDownloadClick:k["noop"],contextCaption:"",onContextBlur:k["noop"]};var $t=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleOnContextUnfocus=a.handleOnContextUnfocus.bind(a);return a}f()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isOpen,i=a.title,s=a.subtext,o=a.contextButtonLabel,l=a.onDownloadClick,c=a.contextCaption;var u=E()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!r});return n.a.createElement("div",{className:u,ref:function e(a){t.node=a}},n.a.createElement("div",{className:"p-export_csv_context_subtext"},n.a.createElement("h4",{className:"black"},i),n.a.createElement("p",{className:"break_word"},s),n.a.createElement(W["d"],{onClick:l,className:"p-export_csv_context_button"},o)),c&&n.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(r["PureComponent"]);$t.displayName="ExportContext";$t.defaultProps=Zt;var ea=$t;var ta=new S["b"]("enterprise_dashboard");var aa={title:O["b"].string.isRequired,subtext:O["b"].string.isRequired,contextButtonLabel:O["b"].string.isRequired,onDownloadClick:O["b"].func,contextCaption:O["b"].string,buttonSize:O["b"].string};var ra={onDownloadClick:k["noop"],contextCaption:"",buttonSize:"medium"};var na=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);a.onDownloadButtonClick=a.onDownloadButtonClick.bind(a);a.onContextBlur=a.onContextBlur.bind(a);a.state={contextIsOpen:false};return a}f()(t,[{key:"onButtonClick",value:function e(){this.setState(function(e){return{contextIsOpen:!e.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,a){a&&!a.contains(t.target)&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,a=t.title,r=t.subtext,i=t.contextButtonLabel,s=t.contextCaption,o=t.buttonSize;var l=ta.t("Export CSV");return n.a.createElement("div",null,n.a.createElement(W["d"],{type:"outline",onClick:this.onButtonClick,size:o,className:"p-export_csv_button"},l,n.a.createElement(j["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),n.a.createElement(ea,{isOpen:this.state.contextIsOpen,title:a,subtext:r,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:s,onContextBlur:this.onContextBlur}))}}]);return t}(r["PureComponent"]);na.displayName="ExportCSVButton";na.defaultProps=ra;var ia=na;var sa=ia;var oa=new S["b"]("enterprise_dashboard");var la={title:O["b"].string.isRequired,onDownloadClick:O["b"].func,buttonSize:O["b"].string};var ca={onDownloadClick:k["noop"],buttonSize:"small"};var ua=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var a=oa.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var r=oa.t("Includes everything");var i=oa.t("Generate CSV");return n.a.createElement(sa,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:r,contextButtonLabel:i,contextCaption:a,buttonSize:t})}}]);return t}(r["PureComponent"]);ua.displayName="AppManagementCSVPopup";ua.defaultProps=ca;var da=ua;var pa=da;var ma=new S["b"]("enterprise_dashboard");var ha={orgName:O["b"].string};var va={orgName:""};var fa=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var a=Object(S["q"])(this.props.orgName);var r=ma.t("{orgName} has no apps installed.",{orgName:a});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}}]);return t}(r["PureComponent"]);fa.displayName="InstalledAppsEmptyState";fa.defaultProps=va;var ba=fa;var ga=a(26);var _a=a.n(ga);var ya=a(54);var ka=a(14);var Oa=a(1664);var Ca=a(2085);var Ea=new S["b"]("enterprise_dashboard");var Sa={INSTALLED:"installed",APPROVED:"approved",RESTRICTED:"restricted"};var wa={orgApps:O["b"].array,orgAppsApiCursor:O["b"].string,orgAppsLoading:O["b"].bool,orgAppsApiTotal:O["b"].number,headerItemOnClick:O["b"].func,pageSize:O["b"].number,sortBy:O["b"].string,sortDir:O["b"].string,searchQuery:O["b"].string,rowHeaderItemClassName:O["b"].string,rowClassName:O["b"].string,showInstallationPolicy:O["b"].bool,featureEntAdminApprovedApps:O["b"].bool,featureWtaOrgLevelApps:O["b"].bool,type:O["b"].oneOf([Sa.INSTALLED,Sa.APPROVED,Sa.RESTRICTED]),highlightId:O["b"].string};var Ia={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:k["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",showInstallationPolicy:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAdminApprovedApps:false,featureWtaOrgLevelApps:false,type:Sa.INSTALLED,highlightId:void 0};var ja="asc";var Ta="desc";var Aa="caret_down";var Na="caret_up";var Ma={};Ma[ja]=Aa;Ma[Ta]=Na;var Pa=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.featureEntAdminApprovedApps,s=r.showInstallationPolicy,o=r.sortBy,l=r.sortDir;a.state={rowListItems:[],sortBy:o,sortDir:l,offset:0,activeMenuForAppId:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onToggleMenuClick=a.onToggleMenuClick.bind(a);a.maybeHideMenu=a.maybeHideMenu.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.nodeHasClass=a.nodeHasClass.bind(a);a.nodeIsChildOfClassName=a.nodeIsChildOfClassName.bind(a);a.appSources={internal:Ea.t("Internal"),"app directory":Ea.t("App Directory"),unknown:Ea.t("Unknown")};a.sourceTooltipStrings={"app directory":Ea.t("This app has been installed from the Slack App Directory."),internal:Ea.t("This app was created by someone within your organization."),unknown:Ea.t("This app was installed from an unknown external source.")};a.installationPolicyTypes={set_by_workspace:{iconType:"circle-minus-filled",label:i?Ea.t("Set by workspace"):"",className:"p-app_management_permission_icon--set_by_workspace"},approved:{iconType:"circle-checkbox-checked",label:i?Ea.t("Approved"):"",className:"p-app_management_permission_icon--approved"},restricted:{iconType:"warning-filled",label:i?Ea.t("Restricted"):"",className:"p-app_management_permission_icon--restricted"}};var c={name:{value:function e(t){return a.renderRowName(t)}},numInstalled:{value:function e(t){return a.renderRowWorkspaceInstalledCount(t)}},source:{value:function e(t){return a.renderRowAppSource(t)},className:!i&&"c-table_view_row_item_source"},automaticInstall:{value:function e(t){return a.maybeRenderAutomaticInstall(t)}},installPolicy:{value:function e(t){return a.maybeRenderInstallationPolicy(t)}},menu:{value:function e(t){return a.maybeRenderTripleDotMenu(t)},className:"p-app_management_table_menu"},approvedOn:{value:function e(t){return a.maybeRenderApprovedOn(t)}},approvedBy:{value:function e(t){return a.maybeRenderApprovedBy(t)}}};a.rowTemplate={items:[]};if(a.props.type===Sa.INSTALLED){var u;(u=a.rowTemplate.items).push.apply(u,[c.name,c.numInstalled,c.source].concat(_a()(a.props.featureWtaOrgLevelApps&&[c.automaticInstall]),_a()(i&&s&&[c.installPolicy]),_a()(i&&s&&[c.menu])))}if(a.props.type===Sa.APPROVED){var d;(d=a.rowTemplate.items).push.apply(d,[c.name].concat(_a()(i&&[c.approvedOn]),_a()(i&&[c.approvedBy]),[c.numInstalled,c.source,c.menu]))}a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=Ea.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};var p={name:{id:"name",value:Ea.t("Name"),sortable:true,className:"p-app_management_table_header_name"},numInstalled:{id:"num_installed",value:Ea.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},source:{id:"source",value:Ea.t("Source"),sortable:true,className:i&&"p-app_management_table_header_source"},automaticInstall:{id:"automatic_install_enabled",value:a.props.featureWtaOrgLevelApps?Ea.t("Automatic Install"):"",sortable:true},installPolicy:{id:"installation_policy",value:i?Ea.t("Installation policy"):"",sortable:true},menu:{id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"},approvedOn:{id:"approved_on",value:i?Ea.t("Approved On"):"",sortable:true},approvedBy:{id:"approved_by",value:i?Ea.t("Approved By"):"",sortable:true}};a.headerData=[];if(a.props.type===Sa.INSTALLED){var m;(m=a.headerData).push.apply(m,[p.name,p.numInstalled,p.source].concat(_a()(a.props.featureWtaOrgLevelApps&&[p.automaticInstall]),_a()(i&&s&&[p.installPolicy]),_a()(i&&s&&[p.menu])))}if(a.props.type===Sa.APPROVED){var v;(v=a.headerData).push.apply(v,[p.name].concat(_a()(i&&[p.approvedOn]),_a()(i&&[p.approvedBy]),[p.numInstalled,p.source,p.menu]))}return a}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.orgApps,r=t.sortBy;var n=this.state.offset;if(a.length){this.updateRowListItemsData(n);Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsLoading(false))}else Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsLoading(true));Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSortBy(r))}},{key:"componentDidMount",value:function e(){this.props.featureEntAdminApprovedApps&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeUpdateListRowItems(t,a);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.orgApps,n=a.orgAppsApiTotal;if(n&&r.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(ka["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(zt["b"])(Object(zt["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var a=t.target.getAttribute("data-app-id");var r=this.state.activeMenuForAppId;var n=a===r?null:a;var i={activeMenuForAppId:n};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var a=this.state.activeMenuForAppId;if(!a)return false;var r=t&&t.target;if(!r)return false;var n=this.nodeIsChildOfClassName(r,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(r,"c-menu");if(n)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,a){if(!t||void 0===a||!a.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(a);return!!(t.className&&t.className.length&&t.className.split(" ").includes(a))}},{key:"nodeIsChildOfClassName",value:function e(t,a){var r=t;if(!r||!a)return false;if(this.nodeHasClass(r,a))return true;if(!r.parentNode)return false;while(!this.nodeHasClass(r,a)&&r.parentNode)r=r.parentNode;return this.nodeHasClass(r,a)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.orgAppsLoading;a&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,a){var r=this.state,n=r.offset,i=r.activeMenuForAppId;var s=this.props,o=s.searchQuery,l=s.orgApps,c=s.orgAppsLoading,u=s.highlightId;t.orgApps===l&&t.searchQuery===o&&t.orgAppsLoading===c&&a.activeMenuForAppId===i&&t.highlightId===u||this.updateRowListItemsData(n)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==ja?ja:Ta;Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===ja?Ta:ja:Ta;Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSortDir(o));Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsApiTotal(null));Object(zt["b"])(Object(zt["a"])().apps.resetOrgAppsApiCursor());Object(zt["b"])(Object(zt["a"])().apps.resetOrgApps());Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsLoading(true))}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||ja;var o=Ma[s];if(!n||n!==t)return o;var l=void 0;l=i?i===ja?Aa:Na:Ma[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.orgAppsApiCursor;var l={limit:i};a&&(l.sort=a);r&&(l.sort_dir=r);null!==s&&void 0!==s&&Object(k["trim"])(s).length&&(l.query=s);o&&(l.cursor=o);Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsLoading(true));Object(zt["b"])(Object(zt["a"])().apps.getOrgApps(l))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=[];var n=t||0;var i=0;var s=this.props,o=s.orgApps,l=s.orgAppsLoading,c=s.highlightId;var u={rowListItems:r};function d(){i+=1;return"row_"+n+"_item"+i}function p(e,t){if(!e||!t||!t.items)return[];var a={id:"row_"+n,items:[],highlight:c===e.id};t.items.forEach(function(t){var r={value:t.value(e),id:d()};t.className&&(r.className=t.className);a.items.push(r)});n+=1;return a}if(o&&o.length)o.forEach(function(e){r.push(p(e,a.rowTemplate))});else if(!l){var m=this.props.searchQuery;if(null===m||void 0===m||!m.length){this.setState(u);return}var h=[{searchQuery:m}];h.forEach(function(e){r.push(p(e,a.emptyRowTemplate))})}this.setState(u)}},{key:"maybeRenderApprovedOn",value:function e(){return n.a.createElement("div",null,"Approved on Oct 20, 2019")}},{key:"maybeRenderApprovedBy",value:function e(){return n.a.createElement("div",null,"Approved By Al Fredo")}},{key:"maybeRenderTripleDotMenu",value:function e(t){var a=this;var r=this.state.activeMenuForAppId;var i={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var s=void 0;if(r&&r===t.id){var o=n.a.createElement("span",null,"Restrict this app...");var l=n.a.createElement("span",null,"View in App Directory");s=n.a.createElement("div",{className:"p-app_management_menu_container"},n.a.createElement(H["f"],i,n.a.createElement(H["b"],{key:"org_app_menu_1",label:o,onSelected:function e(){a.onRestrictAppClick(t.id)}}),n.a.createElement(H["d"],{key:"org_app_menu_separator"}),n.a.createElement(H["b"],{key:"org_app_menu_2",label:l,href:"https://example.com",target:"_blank"})))}return n.a.createElement("div",null,n.a.createElement(ze["a"],{className:"c-app_management_menu_trigger",onClick:this.onToggleMenuClick,"data-app-id":t.id},"\u2026"),s)}},{key:"maybeRenderInstallationPolicy",value:function e(){var t=this.installationPolicyTypes;var a=Object.keys(t);var r=t[a[parseInt(Math.random()*a.length,10)]];var i="p-app_management_permission_icon "+r.className;return n.a.createElement("div",null,n.a.createElement(j["b"],{type:r.iconType,className:i})," ",r.label)}},{key:"maybeRenderAutomaticInstall",value:function e(t){return t.automatic_install_enabled?Ea.t("Yes"):Ea.t("No")}},{key:"renderRowName",value:function e(t){var a=this;var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(ze["a"],{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{key:"renderRowWorkspaceInstalledCount",value:function e(t){var a=t.teams_installed_on&&t.teams_installed_on.count||0;return Ea.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:a})}},{key:"renderRowAppSource",value:function e(t){var a=this.sourceTooltipStrings[t.source];var r=this.appSources[t.source]||this.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(ya["c"],{tip:a,position:"top"},n.a.createElement("span",null,r)))}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.orgAppsLoading,u=l.searchQuery,d=l.rowHeaderItemClassName,p=l.rowClassName;var m=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(_e["a"],{autoHeight:true,rows:s,headers:m,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:u,isLoading:c,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);Pa.displayName="OrgAppsList";Pa.defaultProps=Ia;var Ra=function e(t){return{highlightId:Object(Oa["b"])(t)}};var xa=Object(o["connect"])(Ra)(Object(I["a"])("feature_wta_org_level_apps")(Pa));var Da=new S["b"]("enterprise_dashboard");var Fa="installed";var La="approved";var Ba="restricted";var Ua={featureEntAdminApprovedApps:O["b"].bool,type:O["b"].oneOf([Fa,La,Ba]).isRequired,orgAppCount:O["b"].number.isRequired,isLoading:O["b"].bool,onChange:O["b"].func,value:O["b"].string,orgAppsSortDir:O["b"].string,orgAppsSortBy:O["b"].string,searchQuery:O["b"].string};var qa={featureEntAdminApprovedApps:false,isLoading:false,onChange:k["noop"],value:"",orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:""};var Wa=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,r=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(r){i.sort_prefix=r;a&&(i.sort_dir=a)}Object(zt["b"])(Object(zt["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"maybeRenderExportCSVButton",value:function e(){var t=this.props,a=t.featureEntAdminApprovedApps,r=t.orgAppCount;var i=Da.t("Installed Apps");if(!r||!a)return null;return n.a.createElement(pa,{title:i,query:this.props.value,onDownloadClick:this.generateAppsCSV})}},{key:"maybeRenderExportButton",value:function e(){var t=this.props,a=t.type,r=t.featureEntAdminApprovedApps;if(!r||a===Ba)return null;return n.a.createElement(W["d"],{type:"outline",size:"small"},"Export")}},{key:"renderSearch",value:function e(){var t=this.props,a=t.type,r=t.featureEntAdminApprovedApps,i=t.orgAppCount,s=t.value,o=t.isLoading,l=t.onChange;if(!r)return null;var c=void 0;a===Fa?c=Da.t("Search {orgAppCount, plural, =1 {# installed app...} other {# installed apps...}}",{orgAppCount:i}):a===La?c=Da.t("Search {orgAppCount, plural, =1 {# approved app...} other {# approved apps...}}",{orgAppCount:i}):a===Ba&&(c=Da.t("Search {orgAppCount, plural, =1 {# restricted app...} other {# restricted apps...}}",{orgAppCount:i}));return n.a.createElement(Yt["a"],{placeholder:c,icon:"search",autoFocus:false,isLoading:o,onChange:l,value:s,size:"small",className:"p-app_management_app_search_bar"})}},{key:"render",value:function e(){var t=this.props.type;var a=[this.maybeRenderExportCSVButton()];return n.a.createElement(Qt["a"],{title:this.renderSearch(),actions:a,"data-qa":"ent-apps-"+t+"-list-header"})}}]);return t}(r["Component"]);Wa.displayName="AppManagementListHeader";Wa.defaultProps=qa;var Ha=Wa;var Ga=new S["b"]("enterprise_dashboard");var Va=333;var Ka={orgName:O["b"].string.isRequired,orgApps:O["b"].array,orgAppsApiCursor:O["b"].string,orgAppsApiTotal:O["b"].number,orgAppsLoading:O["b"].bool,orgAppsSortDir:O["b"].string,orgAppsSortBy:O["b"].string,searchQuery:O["b"].string,featureEntAdminApprovedApps:O["b"].bool};var za={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAdminApprovedApps:false};var Qa=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={searchValue:""};a.onSearchInputChange=a.onSearchInputChange.bind(a);a.onSearchInputChangeDelayed=Object(k["debounce"])(a.onSearchInputChangeDelayed,Va,{trailing:true}).bind(a);a.generateAppsCSV=a.generateAppsCSV.bind(a);return a}f()(t,[{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.onSearchInputChangeDelayed(a);this.props.featureEntAdminApprovedApps&&this.setState(function(){return{searchValue:a}})}},{key:"onSearchInputChangeDelayed",value:function e(t){var a=null!==t&&void 0!==t&&t.length?t:null;Object(zt["b"])(Object(zt["a"])().apps.setOrgAppsSearchQuery(a));Object(zt["b"])(Object(zt["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t=this.props,a=t.orgApps,r=t.orgAppsApiCursor,n=t.orgAppsApiTotal,i=t.orgAppsLoading,s=t.searchQuery,o=t.featureEntAdminApprovedApps;var l={orgApps:a,orgAppsApiCursor:r,orgAppsApiTotal:n,orgAppsLoading:i,searchQuery:s,featureEntAdminApprovedApps:o,showInstallationPolicy:o&&true};return l}},{key:"formatTitleString",value:function e(t){if(null!==t&&!Number.isNaN(t)&&t>0)return Ga.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return Ga.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,r=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(r){i.sort_prefix=r;a&&(i.sort_dir=a)}Object(zt["b"])(Object(zt["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var a=Ga.t("Installed Apps");if(!t)return null;return n.a.createElement(pa,{title:a,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=Ga.t("Filter by name...");return n.a.createElement("div",null,n.a.createElement(Yt["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery||"",size:"small"}))}},{key:"renderHeader",value:function e(){var t=this.props,a=t.featureEntAdminApprovedApps,r=t.orgAppsApiTotal;var i=[this.renderExportButton(),this.renderAppFilterInput()];if(a)return n.a.createElement(Ha,{type:Fa,featureEntAdminApprovedApps:a,orgAppCount:r||0,value:this.state.searchValue,onChange:this.onSearchInputChange});return n.a.createElement(Qt["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(r),actions:i})}},{key:"render",value:function e(){var t=this.props,a=t.orgAppsApiTotal,r=t.orgAppsLoading,i=t.searchQuery,s=t.orgAppsApiCursor;var o=this.getOrgAppsListProps();if(0===a&&!i&&!r&&s)return n.a.createElement("div",{className:"p-app_management_installed_apps"},this.renderHeader(),n.a.createElement(ba,{orgName:this.props.orgName}));return n.a.createElement("div",{className:"p-app_management_installed_apps"},this.renderHeader(),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(xa,o)))}}]);return t}(r["PureComponent"]);Qa.displayName="AppManagementInstalledApps";Qa.defaultProps=za;var Ya=Qa;var Ja=Ya;var Xa={featureEntAdminApprovedApps:O["b"].bool};var Za={featureEntAdminApprovedApps:false};var $a=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={searchValue:""};a.onSearchChange=a.onSearchChange.bind(a);return a}f()(t,[{key:"onSearchChange",value:function e(t){this.setState(function(){return{searchValue:t.target.value}})}},{key:"render",value:function e(){var t=this.props.featureEntAdminApprovedApps;return n.a.createElement("div",{className:"p-app_management_restricted_apps"},n.a.createElement(Ha,{type:Ba,featureEntAdminApprovedApps:t,orgAppCount:0,value:this.state.searchValue,onChange:this.onSearchChange}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(xa,null)))}}]);return t}(r["PureComponent"]);$a.displayName="AppManagementRestrictedApps";$a.defaultProps=Za;var er=$a;var tr=er;var ar=a(35);var rr=a(30);var nr=a(34);var ir=Object(rr["a"])("Fetch list of approved apps",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,n=void 0===r?"fetchApprovedAppsList":r,i=be()(a,["reason"]);return e(Object(nr["a"])({method:"admin.apps.approved.list",args:p()({},i),reason:n}))});ir.meta={name:"fetchApprovedAppsList",key:"fetchersAdminApprovedAppsApiFetchApprovedAppsList",description:"Fetch list of approved apps"};ir.propTypes={options:O["b"].object};var sr=a(4813);var or={featureEntAdminApprovedApps:O["b"].bool,fetchApprovedAppsList:O["b"].func,enterpriseId:O["b"].string};var lr={featureEntAdminApprovedApps:false,fetchApprovedAppsList:k["noop"],enterpriseId:""};var cr=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:0,orgAppsLoading:false,searchQuery:""};a.onSearchChange=a.onSearchChange.bind(a);return a}f()(t,[{key:"componentDidMount",value:function e(){this.fetchApps()}},{key:"onSearchChange",value:function e(t){this.setState(function(){return{searchQuery:t.target.value}},this.fetchApps)}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.orgApps,r=t.orgAppsApiCursor,n=t.orgAppsApiTotal,i=t.orgAppsLoading,s=t.searchQuery;var o=this.props.featureEntAdminApprovedApps;var l={orgApps:a,orgAppsApiCursor:r,orgAppsApiTotal:n,orgAppsLoading:i,searchQuery:s,featureEntAdminApprovedApps:o,showInstallationPolicy:o&&true,type:Sa.APPROVED};return l}},{key:"fetchApps",value:function e(){var t=this;var a={limit:50,enterprise_id:this.props.enterpriseId,cursor:this.state.orgAppsApiCursor||""};this.props.fetchApprovedAppsList(a).then(function(e){t.setState(function(){return{orgApps:e.approved_apps}})});return null}},{key:"render",value:function e(){var t=this.props.featureEntAdminApprovedApps;var a=this.getOrgAppsListProps();return n.a.createElement("div",{className:"p-app_management_approved_apps"},n.a.createElement(Ha,{type:La,featureEntAdminApprovedApps:t,orgAppCount:0,value:this.state.searchQuery,onChange:this.onSearchChange}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(xa,a)))}}]);return t}(r["PureComponent"]);cr.displayName="AppManagementApprovedApps";cr.defaultProps=lr;var ur=function e(t){var a=Object(ar["h"])(t);return{enterpriseId:a.id}};var dr={fetchApprovedAppsList:ir};var pr=Object(o["connect"])(ur,dr)(cr);var mr=pr;var hr=function e(){return[{scopes:["emoji:read"],short_description:"View your workspace\u2019s custom emoji",is_dangerous:false},{scopes:["users:write"],short_description:"Change your profile information",is_dangerous:false},{scopes:["users:red"],short_description:"View your workspace\u2019s list of members and their contact information",is_dangerous:true}]};var vr=function e(){return[{scopes:["pins:read","pins:write"],short_description:"View your workspace's pinned items, and add or remove pins",long_description:"View your workspace's pinned items (including contents of files and sharing information).",is_dangerous:false},{scopes:["commands"],short_description:"Add slash commands",is_dangerous:false},{scopes:["channels:history"],short_description:"View messages, activity, and files in this channel",is_dangerous:true},{scopes:["channels:read"],short_description:"View the channel name, member list, topic, and purpose",is_dangerous:false},{scopes:["chat:write"],short_description:"Post messages as the app",is_dangerous:false}]};var fr=function e(){return[{scopes:["dnd:write:user"],short_description:"Change the user\u2019s Do Not Disturb settings and schedule, as well as view the workspace\u2019s settings",is_dangerous:false},{scopes:["reminders:write:user"],short_description:"Add, remove, or complete reminders for user",long_description:"App will be able to add, remove, or complete reminders for individual workspace members, as user.",is_dangerous:false},{scopes:["users.profile:write"],short_description:"Change a user\u2019s profile fields and any data entered in them",is_dangerous:false}]};var br=function e(){return[{scopes:["dnd:write:user"],short_description:"Change your Do Not Disturb settings and schedule, as well as view your workspace\u2019s settings",is_dangerous:false}]};var gr=function e(){return fr().map(function(e){return e.scopes[0]})};var _r=function e(t){return{content:{heading:"What will "+t+" be able to view?",secondary_groups:{channel_content:{heading:"Content and info about channels & conversations",scopes_info:[{scopes:["channels:history","groups:history","im:history","mpim:history"],description:"View messages and other content in your public channels, private channels, direct messages, and group direct messages"},{scopes:["channels:read","groups:read","im:read","mpim:read"],description:"View basic information about your public channels, private channels, direct messages, and group direct messages"},{scopes:["reactions:read"],description:"View emoji reactions in your channels and conversations and their associated content"},{scopes:["search:read"],description:"Search your workspace\u2019s content"},{scopes:["stars:read"],description:"View your starred messages and files"},{scopes:["pins:read"],description:"View pinned content in your channels and conversations"},{scopes:["links:read"],description:"View some URLs in messages"}]},user_content:{heading:"Content and info about you",scopes_info:[{scopes:["identify"],description:"View information about your identity"},{scopes:["reminders:read"],description:"View reminders created by "+t},{scopes:["users.profile:read"],description:"View profile details about people in your workspace"}]},workspace_content:{heading:"Content and info about your workspace",scopes_info:[{scopes:["files:read"],description:"View files shared in channels and conversations that you have access to"},{scopes:["team:read"],description:"View the name, email domain and icon for workspaces you\u2018re connected to"},{scopes:["users:read"],description:"View people in your workspace"},{scopes:["users:read.email"],description:"View email addresses of people in your workspace"},{scopes:["usergroups:read"],description:"View user groups in your workspace"},{scopes:["dnd:read"],description:"View Do Not Disturb settings for people in your workspace"},{scopes:["remote_files:read"],description:"View remote files added by this app in your workspace"},{scopes:["calls:read"],description:"View information about ongoing and past calls"}]}}},actions:{heading:"What will "+t+" be able to do?",secondary_groups:{user_actions:{heading:"Perform actions as you",scopes_info:[{scopes:["channels:write","groups:write"],description:"Manage your public and private channels and create new ones on your behalf"},{scopes:["im:write","mpim:write"],description:"Start direct and group direct messages with people on your behalf"},{scopes:["chat:write:user"],description:"Send messages on your behalf"},{scopes:["files:write:user"],description:"Upload, edit, and delete files on your behalf"},{scopes:["reactions:write"],description:"Add and remove emoji reactions"},{scopes:["stars:write"],description:"Add or remove stars for you"},{scopes:["users:write"],description:"Set your presence"},{scopes:["pins:write"],description:"Add and remove pinned messages and files"},{scopes:["dnd:write"],description:"Edit your Do Not Disturb settings"},{scopes:["users.profile:write"],description:"Edit your profile information and status"},{scopes:["remote_files:share"],description:"Share remote files on your behalf"}]},admin_actions:{heading:"Administer Slack for your organization",scopes_info:[{scopes:["admin"],description:"Administer your workspace"}]},workspace_actions:{heading:"Perform actions in your workspace",scopes_info:[{scopes:["commands"],description:"Adds actions and/or slash commands that people can use"},{scopes:["incoming-webhook"],description:"Post messages to specific channels in Slack"},{scopes:["reminders:write"],description:"Add, remove, or mark reminders as complete"},{scopes:["usergroups:write"],description:"Create and manage user groups"},{scopes:["calls:write"],description:"Start and manage calls in this workspace"}]},channel_actions:{heading:"Perform actions in channels & conversations",scopes_info:[{scopes:["chat:write:bot"],description:"Send messages as "+t},{scopes:["links:write"],description:"Show previews of URLs in messages"}]}}}}};var yr=function e(){return[{id:"admin.conversations:write",description:"Make changes to the workspace",methods:[],is_required:false,is_selected:true,is_deprecated:false,reason:""},{id:"bot",description:"Add a bot user",methods:[],is_required:false,is_selected:true,is_deprecated:true,reason:""},{id:"channels:history",description:"Access user\u2019s public channels",methods:["channels.history","channels.replies"],is_required:false,is_selected:true,is_deprecated:false,reason:""},{id:"channels:read",description:"Access information about user\u2019s public channels",methods:["channels.info","channels.list"],is_required:true,is_selected:true,is_deprecated:false,reason:"We need this to read your channels"},{id:"channels:write",description:"Modify your public channels",methods:["channels.archive","channels.create","channels.invite","channels.join","channels.kick","channels.leave","channels.mark","channels.rename","channels.setPurpose","channels.setTopic","channels.unarchive","conversations.join"],is_required:false,is_selected:true,is_deprecated:false,reason:""},{id:"users.profile:read",description:"Access user\u2019s profile and workspace profile fields",methods:["team.profile.get","users.profile.get"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"users.profile:write",description:"Modify user\u2019s profile",methods:["users.deletePhoto","users.profile.set","users.setPhoto"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"users:read",description:"Access your workspace\u2019s profile information",methods:["bots.info","users.getPresence","users.info","users.list"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"users:read.email",description:"View email addresses of people on this workspace",methods:["users.lookupByEmail"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"users:write",description:"Change user\u2019s profile information",methods:["users.setActive","users.setPresence"],is_required:false,is_selected:false,is_deprecated:false,reason:""}]};var kr=function e(){return{userTokenScopes:[{id:"identity.avatar",description:"View user\u2019s Slack avatar",methods:[],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"identity.basic",description:"View the user\u2019s name",methods:["users.identity"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"identity.email",description:"View user\u2019s email address",methods:[],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"users.profile:read",description:"Access user\u2019s profile and workspace profile fields",methods:["team.profile.get","users.profile.get"],is_required:false,is_selected:true,is_deprecated:false,reason:""},{id:"users.profile:write",description:"Modify user\u2019s profile",methods:["users.deletePhoto","users.profile.set","users.setPhoto"],is_required:false,is_selected:true,is_deprecated:false,reason:""}],botTokenScopes:[{id:"channels:read",description:"Access information about user\u2019s public channels",methods:["channels.info","channels.list"],is_required:true,is_selected:false,is_deprecated:false,reason:"We need this to read your channels"},{id:"channels:write",description:"Modify your public channels",methods:["channels.archive","channels.create","channels.invite","channels.join","channels.kick","channels.leave","channels.mark","channels.rename","channels.setPurpose","channels.setTopic","channels.unarchive","conversations.join"],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"commands",description:"Add slash commands and add actions to messages (and view related content)",methods:[],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"incoming-webhook",description:"Post to specific channels in Slack",methods:[],is_required:false,is_selected:false,is_deprecated:false,reason:""},{id:"im:read",description:"Access information about user\u2019s direct messages",methods:["im.list"],is_required:false,is_selected:true,is_deprecated:false,reason:""},{id:"im:write",description:"Modify user\u2019s direct messages",methods:["im.close","im.mark","im.open"],is_required:true,is_selected:true,is_deprecated:false,reason:"We need this to read your channels"}]}};var Or=a(1203);var Cr=a(117);var Er=a(354);var Sr=function e(t){var a=t.term,r=t.limit,n=void 0===r?6:r;var i=new URL("/api/search.appDirectory",window.location.origin);var s={term:a,limit:n};i.search=new URLSearchParams(s);return fetch(i).then(function(e){return e.json()}).then(function(e){return e.suggestions.map(wr)})};function wr(e){var t=e.name,a=e.desc,r=e.is_slack_owned,n=e.encoded_id,i=e.payload;var s=i&&i.icons&&i.icons.image_48?i.icons.image_48:cdn_url+"/80588/img/apps/default_new_app_icon.png";return{name:t,description:a,isSlackOwned:r,encodedId:n,icon:s}}var Ir=66;var jr=22;var Tr="search_select_default_option";var Ar={approve:"approve",restrict:"restrict"};var Nr=new S["b"]("enterprise_dashboard");var Mr={featureEntAdminApprovedApps:O["b"].bool,mode:O["b"].string,switchPane:O["b"].func,onSetSelectedApp:O["b"].func};var Pr={featureEntAdminApprovedApps:false,mode:Ar.approve,switchPane:k["noop"],onSetSelectedApp:k["noop"]};var Rr=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props.mode;a.state={emptyImgSrc:vvv(r===Ar.approve?"/img/enterprise/app_approval_empty@2x.jpg":"/img/enterprise/app_restriction_empty@2x.jpg"),isLoading:false,optionsRowHeight:jr,selectState:{filterQuery:"",options:a.getDefaultOptions(),selectId:"apps-list-select",isExpanded:true,selectedOption:null}};a.inputRef=n.a.createRef();a.fetchApps=a.fetchApps.bind(a);a.debouncedFetchApps=Object(k["debounce"])(a.fetchApps,250);a.setSelectState=a.setSelectState.bind(a);a.handleSelectApp=a.handleSelectApp.bind(a);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.setSelectState(function(){return t.state.selectState})}},{key:"getDefaultOptions",value:function e(){if(!this.props.featureEntAdminApprovedApps)return null;var t=this.props.mode;var a=t===Ar.approve?Nr.rt("Find any app in the <strong>App Directory</strong> to approve."):Nr.rt("Find any app in the <strong>App Directory</strong> to restrict.");return[{label:a,value:Tr,isDisabled:true}]}},{key:"setSelectState",value:function e(t,a){var r=t();var n=this.state.selectState;if(void 0!==r.filterQuery&&r.filterQuery!==this.state.filterQuery)if(""===r.filterQuery){r.options=this.getDefaultOptions();r.optionsRowHeight=jr;this.setState(function(){return{optionsRowHeight:jr,isLoading:false}})}else this.fetchApps(r.filterQuery);this.setState(function(){return{selectState:p()({},n,r)}},a)}},{key:"handleSelectApp",value:function e(t){var a=this.props.mode;this.props.onSetSelectedApp(t);var r=a===Ar.approve?Xr.PERMISSION:Xr.CONFIRM;this.props.switchPane(r)}},{key:"fetchApps",value:function e(t){var a=this;if(!t)return;this.setState(function(){return{isLoading:true}});Sr({term:t,limit:50}).then(function(e){var r=a.state.selectState.filterQuery;if(t!==r)return;var n=e.map(function(e){return{id:e.encodedId,label:e.name,value:e.encodedId,name:e.name,icons:{image_72:e.icon},installedOn:[],isSlackOwned:e.isSlackOwned}});var i=p()({},a.state.selectState,{options:n,optionsRowHeight:Ir});a.setState(function(){return{isLoading:false,optionsRowHeight:Ir,selectState:i}})})}},{key:"renderSearchSelectOption",value:function e(t){if(t.value===Tr)return n.a.createElement("div",null,t.label);return n.a.createElement("div",null,t.icons&&t.icons.image_72&&n.a.createElement("img",{src:t.icons.image_72,style:{float:"left",width:"36px",height:"36px",verticalAlign:"middle",marginTop:"5px",marginRight:"1rem"},alt:""}),n.a.createElement("div",null,n.a.createElement("strong",null,t.name)),n.a.createElement("div",null,t.isSlackOwned?n.a.createElement("span",null,"Built by Slack"):n.a.createElement("span",null,"Not built by Slack")))}},{key:"renderSearchBar",value:function e(){if(!this.props.featureEntAdminApprovedApps)return null;var t=Nr.t("Search apps");var a=Nr.t("Search for an app");var r=this.state,i=r.isLoading,s=r.optionsRowHeight,o=r.selectState;return n.a.createElement("div",{className:"p-app_management_modal_search_select"},n.a.createElement(Er["b"],{isLoading:i,selectState:o,setSelectState:this.setSelectState,optionsRowHeight:s,renderOption:this.renderSearchSelectOption,inputRef:this.inputRef,ariaLabel:a,placeholderText:t,selectId:o.selectId,focusOnMount:true,width:"100%",classPrefix:"p-app_management",selectDataQa:"app_management_modal_search_input",onOptionSelected:this.handleSelectApp}))}},{key:"render",value:function e(){if(!this.props.featureEntAdminApprovedApps)return null;var t=this.props.mode;var a=void 0;var r=void 0;if(t===Ar.approve){a=Nr.t("Approve Apps");r=Nr.t("By approving an app for the organization, members will be able to install the app on any workspace without needing admin approval.")}else{a=Nr.t("Restrict Apps");r=Nr.t("By restricting an app for the organization, members will be able to install the app on any workspace without needing admin approval.")}return n.a.createElement(n.a.Fragment,null,n.a.createElement(Cr["g"],null,n.a.createElement(Cr["i"],{title:a})),n.a.createElement(Cr["c"],{"data-qa":"app_management_modal_search",className:"padding_bottom_100"},n.a.createElement(Cr["d"],null,r),n.a.createElement(Cr["d"],{className:"margin_top_100 margin_bottom_200"},this.renderSearchBar()),n.a.createElement(Cr["d"],null,n.a.createElement(Cr["h"],{width:470,height:194,alt:"",src:this.state.emptyImgSrc}))))}}]);return t}(r["PureComponent"]);Rr.displayName="AppManagementModalSearch";Rr.defaultProps=Pr;var xr=Rr;var Dr=a(4536);var Fr=new S["b"]("enterprise_dashboard_org_app_management");var Lr={featureEntAdminApprovedApps:O["b"].bool,switchPane:O["b"].func,orgName:O["b"].string,orgIcon:O["b"].string,appName:O["b"].string,appIcon:O["b"].string,scopeInfo:ft["a"]};var Br={featureEntAdminApprovedApps:false,switchPane:k["noop"],appIcon:"",appName:"",orgIcon:"",orgName:"",scopeInfo:null};var Ur=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"maybeRenderFooterActions",value:function e(){var t=this.props,a=t.switchPane,r=t.featureEntAdminApprovedApps;if(!r)return null;return n.a.createElement(Cr["f"],null,n.a.createElement(W["d"],{type:"outline","data-qa":"app-management-modal-permission-back-button",onClick:function e(){return a(Xr.SEARCH)}},Fr.t("Back")),n.a.createElement(W["d"],{onClick:function e(){return a(Xr.CONFIRM)},"data-qa":"app-management-modal-permission-next-button"},Fr.t("Next")))}},{key:"render",value:function e(){var t=this.props,a=t.orgName,r=t.orgIcon,i=t.appName,s=t.appIcon,o=t.scopeInfo,l=t.featureEntAdminApprovedApps;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Cr["g"],null,n.a.createElement(Cr["i"],{title:l?Fr.rt("Review Requested Permissions"):""})),n.a.createElement(Cr["c"],null,n.a.createElement(Cr["d"],null,n.a.createElement(Dr["a"],{appIcon:s,appName:i,teamIcon:r,teamName:a}),n.a.createElement("div",{className:"app-management-modal-permission-header-desc"},l?Fr.rt("When <b>{appName}</b> is installed in a workspace, it will require specific permissions to work.",{appName:i}):"")),n.a.createElement(Cr["d"],null,n.a.createElement(vt["a"],{scopeInfo:o}))),n.a.createElement(Cr["e"],null,this.maybeRenderFooterActions()))}}]);return t}(r["PureComponent"]);Ur.displayName="AppManagementPermissions";Ur.defaultProps=Br;var qr=Ur;var Wr=a(95);var Hr=a(905);var Gr={approve:"approve",restrict:"restrict"};var Vr={appName:O["b"].string,appURL:O["b"].string,featureEntAdminApprovedApps:O["b"].bool,mode:O["b"].string,switchPane:O["b"].func,isSlackOwned:O["b"].bool,icons:O["b"].object,workspaceInstallations:O["b"].number};var Kr={appName:"",appURL:null,featureEntAdminApprovedApps:false,mode:Gr.approve,switchPane:k["noop"],isSlackOwned:false,icons:{image_72:"/img/apps/default_new_app_icon.png"},workspaceInstallations:0};var zr=new S["b"]("enterprise_dashboard");var Qr=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.appURL,i=t.featureEntAdminApprovedApps,s=t.icons,o=t.isSlackOwned,l=t.mode,c=t.switchPane,u=t.workspaceInstallations;if(!i)return null;var d=void 0;var p=void 0;var m=void 0;var h=void 0;var v=void 0;var f=void 0;var b=l===Gr.approve?Xr.PERMISSION:Xr.SEARCH;if(Gr.approve){d=zr.t("Confirm approval");p=n.a.createElement("div",null,n.a.createElement("p",{className:"margin_top_100"},zr.rt("Once approved, anyone in your organization will be able to install this app on their workspace. Are you sure you want to approve <b>{appName}</b>?",{appName:a})),n.a.createElement(Wr["a"],{type:"boxed",level:"warning",align:"left"},n.a.createElement("span",null,zr.rt("<b>Note</b>: As your org does not have a policy requiring the use of Approved Apps by your workspaces, this approval will only affect workspaces who have enabled that feature."))));h=zr.t("Approve");v="primary"}else{d=zr.t("Confirm restriction");p=n.a.createElement("div",{className:"margin_top_100"},zr.rt("Once restricted, nobody in your organization will be able to install or request installation of this app in their workspace. Are you sure you want to restrict <b>{appName}</b>?",{appName:a}));m=n.a.createElement(Cr["d"],{className:"margin_top_100 margin_bottom_200"},n.a.createElement(Wr["a"],{type:"boxed",level:"warning",align:"left"},zr.rt("<b>Note</b>: Restricting this app will <b>not</b> affect existing installations. They can be uninstalled by the workspace.")));h=zr.t("Restrict");v="danger"}return n.a.createElement(n.a.Fragment,null,n.a.createElement(Cr["g"],null,n.a.createElement(Hr["a"],{title:d})),n.a.createElement(Cr["c"],{"data-qa":"app_management_modal_confirm",className:"padding_bottom_100"},n.a.createElement(Cr["d"],null,n.a.createElement("div",{style:{position:"relative",background:"#eee",padding:"0.5rem"}},n.a.createElement("div",{style:{position:"absolute",top:"0.5rem",right:"0.75rem"}},n.a.createElement(ze["a"],{className:"c-app_management_menu_trigger","data-app-url":r},n.a.createElement("b",null,"\u2026"))),s&&n.a.createElement("div",{style:{float:"left",minHeight:"5rem"}},n.a.createElement("img",{src:s.image_72,style:{width:"36px",height:"36px",marginLeft:"0.33rem",marginTop:"0.33rem",marginRight:"0.75rem"},alt:""})),n.a.createElement("div",null,n.a.createElement("strong",{style:{fontSize:"16px"}},a)),n.a.createElement("div",{style:{fontSize:"14px",color:"#666"}},n.a.createElement("div",null,o?n.a.createElement("span",null,zr.t("Built by Slack")):n.a.createElement("span",null,zr.t("Not built by Slack"))),n.a.createElement("div",null,zr.rt("{workspaceInstallations, plural, =1 {# workspace installation} other {# workspace installations}}",{workspaceInstallations:u}))))),n.a.createElement(Cr["d"],null,p),m),n.a.createElement(Cr["e"],null,n.a.createElement(Cr["f"],null,n.a.createElement(W["d"],{type:"outline",onClick:function e(){return c(b)}},zr.t("Back")),n.a.createElement(W["d"],{type:v,onClick:f},h))))}}]);return t}(r["PureComponent"]);Qr.displayName="AppManagementModalConfirm";Qr.defaultProps=Kr;var Yr=Qr;var Jr={approve:"approve",restrict:"restrict"};var Xr={SEARCH:"searchPane",PERMISSION:"permissionsPane",CONFIRM:"confirmPane"};var Zr={closeModal:O["b"].func.isRequired,featureEntAdminApprovedApps:O["b"].bool,mode:O["b"].string,orgName:O["b"].string,orgIcon:O["b"].string};var $r={featureEntAdminApprovedApps:false,mode:Jr.approve,orgName:"",orgIcon:""};var en=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedApp:{}};a.onSetSelectedApp=a.onSetSelectedApp.bind(a);return a}f()(t,[{key:"onSetSelectedApp",value:function e(t){this.setState(function(){return{selectedApp:t}})}},{key:"getPanes",value:function e(){var t=this;var a=this.state.selectedApp;var r=this.props,i=r.mode,s=r.featureEntAdminApprovedApps,o=r.orgName,l=r.orgIcon;var c={};c[Xr.SEARCH]={render:function e(a){return n.a.createElement(xr,p()({featureEntAdminApprovedApps:s,mode:i,onSetSelectedApp:t.onSetSelectedApp},a))}};c[Xr.PERMISSION]={render:function e(t){return n.a.createElement(qr,p()({appName:a.name&&a.name,appIcon:a.icons&&a.icons.image_72,scopeInfo:_r("Flaming Hot Cheetos"),orgName:o,orgIcon:l,featureEntAdminApprovedApps:s},t))}};c[Xr.CONFIRM]={render:function e(t){return n.a.createElement(Yr,p()({appName:a.name&&a.name,appIcon:a.icons&&a.icons.image_72,featureEntAdminApprovedApps:s,mode:i,orgName:o,orgIcon:l},t))}};return c}},{key:"render",value:function e(){var t=this.getPanes();return n.a.createElement(Or["b"],{closeModal:this.props.closeModal,defaultPane:Xr.SEARCH,panes:t,"data-qa":"app-management-approve-apps-modal"})}}]);return t}(r["PureComponent"]);en.displayName="AppManagementModal";en.defaultProps=$r;var tn=function e(t){var a=Object(ar["e"])(t);return{orgName:a.name,orgIcon:a.icon&&a.icon.image_102}};var an=function e(t){return{closeModal:function e(){return t(q["closeModal"].apply(void 0,arguments))}}};var rn=Object(o["connect"])(tn,an)(en);var nn=a(4786);var sn=new S["b"]("enterprise_dashboard");var on={approve:"approve",restrict:"restrict"};var ln={orgName:O["b"].string.isRequired,actions:O["b"].object.isRequired,defaultTabId:O["b"].string,profileIsOpen:O["b"].bool,openModal:O["b"].func,orgApps:O["b"].array,orgAppsApiCursor:O["b"].string,orgAppsApiTotal:O["b"].number,orgAppsSortDir:O["b"].string,orgAppsSortBy:O["b"].string,orgAppsLoading:O["b"].bool,searchQuery:O["b"].string,featureEntAdminApprovedApps:O["b"].bool,appProfile:O["b"].object};var cn={defaultTabId:"",profileIsOpen:false,openModal:k["noop"],orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAdminApprovedApps:false,appProfile:null};var un=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.tabActionOnClick=function(t){return e.actions.router.navigateTo("/organization/apps/"+t)};a.openApproveAppsModal=a.openApproveAppsModal.bind(a);a.openRestrictAppsModal=a.openRestrictAppsModal.bind(a);return a}f()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAdminApprovedApps:this.props.featureEntAdminApprovedApps};return t}},{key:"openApproveAppsModal",value:function e(){var t=this.props,a=t.featureEntAdminApprovedApps,r=t.openModal;r({element:n.a.createElement(rn,{featureEntAdminApprovedApps:a,mode:on.approve})})}},{key:"openRestrictAppsModal",value:function e(){var t=this.props,a=t.featureEntAdminApprovedApps,r=t.openModal;r({element:n.a.createElement(rn,{featureEntAdminApprovedApps:a,mode:on.restrict})})}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return n.a.createElement("div",null,n.a.createElement(Ja,t))}},{key:"renderApprovedAppsContent",value:function e(){var t=this.props.featureEntAdminApprovedApps;return n.a.createElement(mr,{featureEntAdminApprovedApps:t})}},{key:"renderRestrictedAppsContent",value:function e(){var t=this.props.featureEntAdminApprovedApps;return n.a.createElement(tr,{featureEntAdminApprovedApps:t})}},{key:"render",value:function e(){var t=this.tabActionOnClick;var a=this.props,r=a.defaultTabId,i=a.appProfile,s=a.actions,o=a.featureEntAdminApprovedApps,l=a.profileIsOpen;var c=[{title:sn.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:t}];if(o){c.push({title:sn.t("Approved Apps"),id:"approved",content:this.renderApprovedAppsContent(),onClick:t});c.push({title:sn.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:t})}var u=E()("p-app-panel",{open:l});return n.a.createElement("div",{className:"p-app_management padding_top_200"},n.a.createElement(Kt,{openApproveAppsModal:this.openApproveAppsModal,openRestrictAppsModal:this.openRestrictAppsModal,featureEntAdminApprovedApps:o}),n.a.createElement(w["a"],{tabs:c,defaultTabId:r}),n.a.createElement("div",{className:u},i?n.a.createElement(Ut,p()({},i,{actions:s})):null))}}]);return t}(r["PureComponent"]);un.displayName="AppManagement";un.defaultProps=cn;var dn=function e(t){return{openModal:function e(){return t(q["openModal"].apply(void 0,arguments))}}};var pn=function e(t){var a=Object(qt["isFeatureEnabled"])(t,"feature_ent_admin_approved_apps");return{featureEntAdminApprovedApps:a}};var mn=Object(o["connect"])(pn,dn)(un);var hn=mn;Object(c["a"])("interop.appManagement",{render:function e(t,a,r){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(hn,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4488:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(3);var d=a.n(u);var p=a(5);var m=a.n(p);var h=a(4);var v=a.n(h);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(0);var k=a(2);var O=a(6);var C=a(836);var E=a(26);var S=a.n(E);var w=a(10);var I=a.n(w);var j=a(1398);var T=a(921);var A=a(23);var N=a(86);var M=a(44);var P=a(162);var R=a(526);var x=a(239);var D=a(37);var F=a.n(D);var L=a(123);var B=a(3280);var U={id:y["b"].string.isRequired,headers:y["b"].array,rows:y["b"].arrayOf(y["b"].shape({id:y["b"].string.isRequired,items:y["b"].array,selectable:y["b"].bool})),selectedRows:y["b"].array,onSelect:y["b"].func,getCheckboxId:y["b"].func};var q={headers:[],rows:[],selectedRows:[],onSelect:k["noop"],getCheckboxId:null};var W=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getCheckboxId=a.getCheckboxId.bind(a);return a}v()(t,[{key:"getValidSelectedRows",value:function e(t){return Object(k["map"])(this.props.rows,"id").filter(function(e){return t.includes(e)})}},{key:"getCheckboxId",value:function e(t){var a=void 0;a=this.props.getCheckboxId?this.props.getCheckboxId(t.id):this.props.id+"-"+t.id+"-checkbox";return a}},{key:"getHeaders",value:function e(t){var a=this.props,r=a.id,i=a.headers,s=a.rows,o=a.onSelect;var l=s.filter(function(e){return false!==e.selectable});var c=l.length>0;var u=c&&t.length===l.length;return[{id:r+"-select-all-checkbox",value:n.a.createElement(L["a"],{checked:u,disabled:!c,indeterminate:t.length>0&&t.length<l.length,onChange:function e(){return o(u?[]:Object(k["map"])(l,"id"))},"aria-controls":l.map(this.getCheckboxId).join(" "),className:"p-ent_multi_select_table__checkbox"}),noHover:true,className:"p-ent_multi_select_table__checkbox_item"}].concat(S()(i))}},{key:"getRows",value:function e(t){var a=this;var r=this.props,i=r.rows,s=r.onSelect;return i.map(function(e){var r=t.includes(e.id);var i=a.getCheckboxId(e);return d()({},e,{selected:r,items:[{id:i+"-item",value:n.a.createElement(L["a"],{id:i,checked:r,disabled:false===e.selectable,value:e.id,onChange:function a(){return s(r?Object(k["without"])(t,e.id):[].concat(S()(t),[e.id]),e.id)},className:"p-ent_multi_select_table__checkbox"}),className:"p-ent_multi_select_table__checkbox_item"}].concat(S()(e.items))})})}},{key:"render",value:function e(){var t=this.props,a=t.selectedRows,r=t.onSelect,i=F()(t,["selectedRows","onSelect"]);var s=this.getValidSelectedRows(a);return n.a.createElement(T["b"],d()({},i,{headers:this.getHeaders(s),rows:this.getRows(s)}))}}]);return t}(r["PureComponent"]);W.displayName="MultiSelectTable";W.defaultProps=q;var H=W;var G=H;var V=a(2093);var K=a(1298);var z=a(1975);var Q=z["a"];var Y=a(583);var J=a(9);var X=a(144);var Z=a(41);var $=a(196);var ee=a(209);var te=function e(t){var a=t.date;return n.a.createElement(r["Fragment"],null,Object($["a"])(a),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_max"},Object(ee["a"])(a)))};te.displayName="MigrationTableDate";var ae=te;var re=ae;var ne=a(27);var ie=a(54);var se=new O["b"]("migration_table");var oe={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onApprove:y["b"].func,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var le={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:k["noop"],onDecline:k["noop"]};var ce=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderStatusLink",value:function e(){var t=this.props,a=t.statusPageURL,r=t.featureMigrationOrgApprovals;var i=void 0;i=r?n.a.createElement(M["a"],{href:a},se.t("View status")):n.a.createElement("div",{className:"p-migration_table__link"},n.a.createElement(M["a"],{href:a},n.a.createElement("span",null,se.t("View Migration Status"))),n.a.createElement(A["b"],{type:"chevron-right"}));return i}},{key:"renderPendingResponse",value:function e(){var t=this.props,a=t.isOrgOwner,i=t.disableActions,s=t.onApprove,o=t.onDecline,l=t.migrationInfo,c=t.featureMigrationOrgApprovals;if(!c)return null;var u=null;u=a?n.a.createElement("div",{className:"p-migration_table__buttons"},n.a.createElement(ne["d"],{type:"outline",size:"small",disabled:i,onClick:function e(){return o(l.id)}},se.t("Decline")),n.a.createElement(ne["d"],{type:"primary",size:"small",disabled:i,onClick:function e(){return s(l.id)},className:"margin_left_50"},se.t("Approve"))):n.a.createElement(r["Fragment"],null,se.t("Pending approval")," ",n.a.createElement(ie["c"],{tip:se.t("Migrations can only be approved by an Organization Owner"),position:"top"},n.a.createElement(A["b"],{type:"question-circle",inline:true,className:"sk_foreground_high"})));return u}},{key:"renderInviteResponse",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;var i=null;r&&(a.date_declined?i=n.a.createElement("span",{className:"sk_raspberry_red"},se.t("Declined")):a.date_approved&&a.approver&&(i=se.rt("Approved <div>by {name}</div>",{name:a.approver.real_name},function(e){var t=e.key,a=e.text;return n.a.createElement("div",{key:t,className:"sk_foreground_max"},a)})));return i}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var a=t+28800;var i=this.props,s=i.migrationInfo,o=i.featureMigrationOrgApprovals;var l=null;l=s.date_approved||s.date_declined?s.date_scheduled>t&&s.date_scheduled<=a?o?n.a.createElement(r["Fragment"],null,se.t("Starting soon"),n.a.createElement("br",null),this.renderStatusLink()):this.renderStatusLink():this.renderInviteResponse():s.date_scheduled<=t&&o?n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"sk_raspberry_red"},se.t("Canceled")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_max"},se.t("Contact Slack to reschedule"))):this.renderPendingResponse();return l}},{key:"renderInProgress",value:function e(){var t=void 0;t=this.props.featureMigrationOrgApprovals?n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("div",null,se.rt("In progress"),n.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"render",value:function e(){var t=this.props.migrationInfo;var a=null;switch(t.status){case"scheduled":a=this.renderScheduled();break;case"in_progress":a=this.renderInProgress();break;case"complete":case"invite_rejected":a=this.renderInviteResponse();break;default:break}return a}}]);return t}(r["PureComponent"]);ce.displayName="MigrationStatusRowItem";ce.defaultProps=le;var ue=ce;var de=ue;var pe=a(69);var me=new O["b"]("migration_table");var he={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var ve={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:k["noop"]};var fe=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}v()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.migrationInfo,i=a.statusPageURL,s=a.isOrgOwner,o=a.onDecline,l=a.disableActions;return n.a.createElement(pe["f"],d()({},t,{width:"auto"}),n.a.createElement(pe["b"],{label:me.t("View status"),href:i,disabled:l}),s?n.a.createElement(pe["b"],{danger:true,label:me.t("Decline"),onSelected:function e(){return o(r.id)},disabled:l}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return n.a.createElement(pe["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(ne["c"],{disabled:t},n.a.createElement(A["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;if(!r)return null;var n=null;"scheduled"!==a.status||!a.date_approved||(n=this.renderMenuTrigger());return n}}]);return t}(r["PureComponent"]);fe.displayName="MigrationTableRowMenu";fe.defaultProps=ve;var be=fe;var ge=be;var _e=a(91);var ye=a(450);var ke=a(3282);var Oe=new O["b"]("migration_table");var Ce="approve";var Ee="decline";var Se={action:y["b"].oneOf([Ce,Ee]).isRequired,migrations:y["b"].array.isRequired,onSubmit:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var we={onSubmit:k["noop"]};var Ie=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isPending:false};a.handleSubmit=a.handleSubmit.bind(a);return a}v()(t,[{key:"getTextTitle",value:function e(){var t=this.props,a=t.migrations,r=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;i=r===Ce?Oe.t("{count, plural, =1 {Approve migration?} other {Approve # migrations?}}",{count:a.length}):Oe.t("{count, plural, =1 {Decline migration?} other {Decline # migrations?}}",{count:a.length});return i}},{key:"getBulkConfirmTableRows",value:function e(t){var a=this.props.migrations;var r={workspace:function e(t){return n.a.createElement(Q,{team:t.team})},date:function e(t){return n.a.createElement(re,{date:t.migration_info.date_scheduled})}};return a.map(function(e){return{id:"mig-"+e.migration_info.id,items:t.map(function(t){var a=t.id,n=t.className;return{id:a,className:n,value:r[a]&&r[a](e)}})}})}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderTitle",value:function e(){var t=this.props,a=t.migrations,r=t.featureMigrationOrgApprovals;if(!r)return null;var i=this.getTextTitle();1===a.length&&(i=n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement(ye["a"],{entityType:"workspace",dimension:24,entityData:a[0].team,customClasses:"margin_right_75"}),i));return i}},{key:"renderBulkConfirmList",value:function e(){if(!this.props.featureMigrationOrgApprovals)return null;var t=[{id:"workspace",value:Oe.t("Workspace"),className:"p-migration_response_confirm_dialog__workspace_item",noHover:true},{id:"date",value:Oe.t("Scheduled for"),className:"p-migration_response_confirm_dialog__date_item",noHover:true}];return n.a.createElement("div",{className:"p-migration_response_confirm_dialog__table"},n.a.createElement(T["b"],{headers:t,rows:this.getBulkConfirmTableRows(t),disableHover:true,height:"35vh"}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.migrations,i=t.action,s=t.featureMigrationOrgApprovals;if(!s)return null;var o=null;if(a.length>1)o=n.a.createElement(r["Fragment"],null,i===Ce?Oe.t("Would you like to approve these migrations?"):Oe.t("If you decline these migrations, you'll need to contact Slack to reschedule them."),this.renderBulkConfirmList());else{var l=a[0];o=i===Ce?Oe.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:l.team.name,date:Object($["a"])(l.migration_info.date_scheduled),time:Object(ee["a"])(l.migration_info.date_scheduled)}):Oe.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:l.team.name})}return o}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.featureMigrationOrgApprovals;if(!r)return null;return n.a.createElement(_e["a"],{cancelText:Oe.t("Cancel"),goButtonText:a===Ce?Oe.t("Approve"):Oe.t("Decline"),goButtonType:a===Ce?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:this.renderTitle(),titleAria:this.getTextTitle(),useSlackScrollbar:false},this.renderContent())}}]);return t}(r["PureComponent"]);Ie.displayName="MigrationResponseConfirmDialog";Ie.defaultProps=we;var je=Ie;var Te=je;var Ae=new O["b"]("migration_table");var Ne={enterpriseName:y["b"].string.isRequired,orgURL:y["b"].string,scheduled:y["b"].bool,isOrgOwner:y["b"].bool,fetchCompletedMigrations:y["b"].func.isRequired,fetchScheduledMigrations:y["b"].func.isRequired,approveMigrations:y["b"].func.isRequired,declineMigrations:y["b"].func.isRequired,enqueueToast:y["b"].func,openModal:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var Me={enqueueToast:k["noop"],openModal:k["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var Pe="approve";var Re="decline";function xe(e){return"mig-"+e}function De(e){return"migration-table-"+e+"-checkbox"}function Fe(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;return"scheduled"===a.status&&a.date_scheduled>t}function Le(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;var r="invite_rejected"===a.status;var n="scheduled"===a.status&&a.date_scheduled<=t&&!a.date_approved&&!a.date_declined;return r||n}var Be=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedRows:[],completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false,tableHeight:null,tablePaddingBottom:0,showingSelection:false};a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);return a}v()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.selectedRows;var n=this.props.scheduled;var i=r.length>0;var s=a&&a.selectedRows&&a.selectedRows.length>0;i!==s&&this.refreshTableHeightPolitely();if(n!==t.scheduled){if(n)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return k["noop"]}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.featureMigrationOrgApprovals;a||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var a=Object(k["sortBy"])(e,[function(e){var t=void 0;t=!r||e.migration_info.date_approved||e.migration_info.date_declined?["in_progress","scheduled","invite_rejected"].indexOf(e.migration_info.status):-Infinity;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:a,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var a=Object(k["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:a,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"showResponseConfirmDialog",value:function e(t,a){var r=this;this.props.openModal({element:n.a.createElement(Te,{migrations:t,action:a,onSubmit:function e(){return r.respondToInvite(t,a)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=this.state.selectedRows;var a=window.innerHeight;if(!this.tableViewRef)return;var r=this.tableViewRef.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var n=r.getBoundingClientRect();var i=t.length>0?K["a"]:0;var s=a-(n&&n.top);var o=64;var l=Math.max(o,s-i);this.setState(function(){return{tableHeight:l,tablePaddingBottom:i}})}},{key:"respondToInvite",value:function e(t,a){var r,i=this;if(!this.props.featureMigrationOrgApprovals)return null;var s=(r={},I()(r,Pe,this.props.approveMigrations),I()(r,Re,this.props.declineMigrations),r)[a];var o=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(k["union"])(t,o)}});return s({migrationIds:o}).then(function(){return i.fetchScheduledMigrations(true)}).then(function(){var e=null;e=a===Pe?Ae.t("{count, plural, =1 {Migration approved} other {# migrations approved}}",{count:o.length}):Ae.t("{count, plural, =1 {Migration declined} other {# migrations declined}}",{count:o.length});i.props.enqueueToast({element:n.a.createElement(P["b"],null,e)});i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:Object(k["union"])(t,o),selectedRows:[],showingSelection:false}});setTimeout(function(){i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:k["without"].apply(void 0,[t].concat(S()(o)))}})},T["b"].HIGHLIGHT_DURATION)}).catch(function(){i.props.enqueueToast({element:n.a.createElement(P["b"],null,Ae.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}).finally(function(){return i.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:k["without"].apply(void 0,[t].concat(S()(o)))}})})}},{key:"createHeaders",value:function e(){var t=this.props,a=t.featureMigrationOrgApprovals,r=t.scheduled;var n=r?Ae.t("Scheduled for"):Ae.t("Completed on");var i="";a&&(i=r?Ae.t("Status"):Ae.t("Approved by"));var s=[{id:"workspace",value:Ae.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:n,className:"p-migration_table__date",noHover:true},{id:"status",value:i,className:"p-migration_table__status",noHover:true}];a&&r&&s.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return s}},{key:"makeTableRows",value:function e(t,a){var r=this;var i=this.props,s=i.isOrgOwner,o=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated,d=l.selectedRows,p=l.showingSelection;var m={workspace:function e(t){return n.a.createElement(Q,{team:t.team,inactive:Le(t)})},date:function e(t){return r.renderDateRow(t.migration_info)},status:function e(t){return r.renderStatusRow(t)},contextMenu:function e(t){return n.a.createElement(ge,{statusPageURL:r.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return r.showResponseConfirmDialog([t],Re)}})}};var h=t;p&&(h=h.filter(function(e){return d.includes(xe(e.migration_info.id))}));return h.map(function(e){return{id:xe(e.migration_info.id),highlight:u.includes(e.migration_info.id),selectable:Fe(e),inactive:Le(e),items:a.map(function(t){var a=t.id,r=t.className;return{id:a,className:r,value:m[a]&&m[a](e)}})}})}},{key:"displayErrorAlert",value:function e(){return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-table-error-alert"},n.a.createElement("span",{className:"p-migration_table__empty_state_icon"},n.a.createElement(A["b"],{type:"warning-filled"})),n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("Unable to load past migrations")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(M["a"],{key:t,href:"https://slack.com/help/contact"},a)})))}},{key:"renderMigrationCount",value:function e(t){var a=Ae.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return a}},{key:"renderSelectionBar",value:function e(t){var a=this;var r=this.props.featureMigrationOrgApprovals;if(!r)return null;var i=this.state,s=i.selectedRows,o=i.pendingUpdates,l=i.showingSelection;var c=t.filter(Fe);var u=t.filter(function(e){return s.includes(xe(e.migration_info.id))&&!e.migration_info.date_approved});return n.a.createElement(V["b"],{position:"absolute",items:c,itemMapper:function e(t){return{selectionElementId:De(xe(t.migration_info.id)),previewText:t.team.name,isSelected:s.includes(xe(t.migration_info.id))}},actions:[{id:Re,label:Ae.t("Decline"),disabled:o.length>0},{id:Pe,label:Ae.t("Approve"),isPrimary:true,disabled:o.length>0||0===u.length,appliesToCount:u.length!==s.length?u.length:void 0}],titleFormatter:function e(t){return Ae.t("{count, plural, =1 {# migration selected} other {# migrations selected}}",{count:t})},showingSelection:l,onToggleSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t?c.map(function(e){return xe(e.migration_info.id)}):[],showingSelection:!!t&&a}})},onAction:function e(t){a.showResponseConfirmDialog(u,t)},onToggleShowingSelection:function e(t){return a.setState(function(){return{showingSelection:t}})},"data-qa":"migration-table-selection-bar"})}},{key:"renderTable",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state,c=l.tableHeight,u=l.selectedRows,p=l.tablePaddingBottom;var m=this.createHeaders();var h=this.makeTableRows(t,m);var v={headers:m,rows:h,height:c+"px","data-qa":"migration-table-rows"};return n.a.createElement("div",{className:"p-migration_table__table_view_container",ref:function e(t){a.tableViewRef=t}},i&&s&&o?n.a.createElement("div",{style:{paddingBottom:p}},n.a.createElement(G,d()({},v,{id:"migration-table",selectedRows:u,onSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t,showingSelection:t.length>0&&a}})},getCheckboxId:De})),this.renderSelectionBar(t)):n.a.createElement(T["b"],v))}},{key:"renderDateRow",value:function e(t){var a=this.props.featureMigrationOrgApprovals;var r=void 0;switch(t.status){case"in_progress":r=a?n.a.createElement(re,{date:t.date_scheduled}):n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("b",null,Ae.rt("In Progress")));break;case"scheduled":r=n.a.createElement(re,{date:t.date_scheduled});break;case"complete":r=n.a.createElement(re,{date:t.date_finished});break;default:break}return r}},{key:"renderStatusRow",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state.pendingUpdates;var c=null;c=i?n.a.createElement(de,{statusPageURL:this.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:l.includes(t.migration_info.id),onApprove:function e(){return a.showResponseConfirmDialog([t],Pe)},onDecline:function e(){return a.showResponseConfirmDialog([t],Re)}}):t.migration_info.approver?t.migration_info.approver.real_name:null;return c}},{key:"renderLoadingState",value:function e(){return n.a.createElement("div",{className:"p-migration_table__loading"},n.a.createElement(N["a"],{color:"blue",size:"jumbo","data-qa":"migration-loading-spinner"}))}},{key:"renderScheduled",value:function e(){var t=this.state,a=t.isScheduledLoading,i=t.scheduledMigrations;if(!a){var s=0===i.length?this.renderEmptyScheduled():n.a.createElement(r["Fragment"],null,n.a.createElement(j["a"],{title:this.renderMigrationCount(i.length),"data-qa":"migration-count-action-bar"}),this.renderTable(i));return s}return this.renderLoadingState()}},{key:"renderCompleted",value:function e(){var t=this.state,a=t.isCompletedLoading,r=t.completedMigrations;if(!a){var n=0===r.length?this.renderEmptyCompleted():this.renderTable(r);return n}return this.renderLoadingState()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-scheduled"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No scheduled migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-completed"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No past migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"render",value:function e(){var t=this.props.scheduled;var a=this.state.errorAlert;if(a)return this.displayErrorAlert();return n.a.createElement(r["Fragment"],null,t?this.renderScheduled():this.renderCompleted(),n.a.createElement(R["a"],null))}}]);return t}(r["PureComponent"]);Be.displayName="MigrationTableView";Be.defaultProps=Me;var Ue=function e(t,a){var r=a.enterpriseDomain;return{orgURL:Object(Y["a"])(t,r),featureMigrationOrgApprovals:Object(J["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var qe={enqueueToast:X["enqueueToast"],openModal:Z["openModal"],fetchCompletedMigrations:x["j"],fetchScheduledMigrations:x["n"],approveMigrations:x["b"],declineMigrations:x["h"]};var We=Be;var He=Object(o["connect"])(Ue,qe)(Be);var Ge=He;var Ve=a(3284);var Ke=new O["b"]("migration_table");var ze={enterpriseName:y["b"].string.isRequired,enterpriseDomain:y["b"].string.isRequired,isOrgOwner:y["b"].bool,tabActionOnClick:y["b"].func,defaultTabId:y["b"].string};var Qe={isOrgOwner:false,tabActionOnClick:k["noop"],defaultTabId:""};var Ye=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderHeader",value:function e(){var t=Ke.t("Migrations");return n.a.createElement("div",{className:"p-migration_table_indent","data-qa":"migration-header"},n.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,a=t.tabActionOnClick,r=t.defaultTabId;var i=[{title:Ke.t("Scheduled Migrations"),id:"scheduled",content:n.a.createElement(Ge,d()({},this.props,{scheduled:true})),onClick:a,"data-qa":"migration-tab-scheduled"},{title:Ke.t("Past Migrations"),id:"past",content:n.a.createElement(Ge,this.props),onClick:a,"data-qa":"migration-tab-completed"}];return n.a.createElement("div",{className:"p-migration_table","data-qa":"migration-page"},this.renderHeader(),n.a.createElement("div",{className:"p-migration_table_migrations"},n.a.createElement(C["a"],{"data-qa":"migration-tabs",tabs:i,defaultTabId:r,fullHeight:true})))}}]);return t}(r["PureComponent"]);Ye.displayName="MigrationTable";Ye.defaultProps=Qe;var Je=Ye;var Xe=Je;Object(c["a"])("interop.migrationTable",{render:function e(t,a,r){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Xe,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4491:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=2;var l=1e4;var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.limit,r=void 0===a?o:a,i=t.duration,s=void 0===i?l:i;n()(this,e);this.historyRequests={};this.promise=null;this.requestLimit=r;this.initialDuration=s}s()(e,[{key:"reset",value:function e(){this.historyRequests={};this.promise=null}},{key:"logHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n,s=t.promise;var o=a+"_"+r;var l=this.historyRequests[o];if(!l){l={count:0,time:0,duration:this.initialDuration};this.historyRequests[o]=l}if(s){l.promise=s;s.finally(function(){l.promise=null})}if(i-l.duration>l.time){l.count>=this.requestLimit?l.duration=Math.min(2*l.duration,16e4):l.duration=this.initialDuration;l.count=1;l.time=i}else l.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[a+"_"+r];if(!s)return false;if(s.count<this.requestLimit)return false;if(s.time<i-s.duration)return false;return true}},{key:"isRequestPending",value:function e(t){var a=t.oldest,r=t.latest;var n=this.historyRequests[a+"_"+r];if(!n)return false;return n.promise&&n.promise.isPending()}}]);return e}();t["a"]=c},4492:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(5);var p=a.n(d);var m=a(4);var h=a.n(m);var v=a(7);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(0);var y=a(13);var k=a.n(y);var O=a(2);var C=a.n(O);var E=a(27);var S=a(3151);var w={name:_["b"].string,avatar:_["b"].string,onClick:_["b"].oneOfType([_["b"].func,_["b"].string]).isRequired,scrollTop:_["b"].bool};var I={name:"",avatar:"",scrollTop:false};var j=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a=k()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var r={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("div",{className:a},n.a.createElement(E["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:r,type:"link"}),n.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(r["PureComponent"]);j.displayName="DashboardNavHeader";j.defaultProps=I;var T=j;var A=T;var N=a(10);var M=a.n(N);var P=a(23);var R=a(3153);var x={isOpen:_["b"].bool,icon:_["b"].string.isRequired,iconColor:_["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_["b"].string.isRequired,onClick:_["b"].func.isRequired};var D={isOpen:false};var F=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t,a=this;var r=k()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},M()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),M()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-primary-"+Object(O["camelCase"])(this.props.name);return n.a.createElement(E["c"],{onClick:function e(){return a.props.onClick(a.props.name)},className:r,"data-qa":i},n.a.createElement(P["a"],{type:this.props.icon}),n.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(r["PureComponent"]);F.displayName="DashboardNavItemPrimary";F.defaultProps=D;var L=F;var B=L;var U=a(3155);var q={parentName:_["b"].string.isRequired,subItems:_["b"].array.isRequired,animateClose:_["b"].bool};var W={animateClose:false};var H=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSecondaryItems=a.renderSecondaryItems.bind(a);return a}h()(t,[{key:"renderSecondaryItems",value:function e(){var t=this;var a=C.a.map(this.props.subItems,function(e){var a=k()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var r="ent-nav-secondary-"+C.a.camelCase(t.props.parentName)+"-"+C.a.camelCase(e.name);return n.a.createElement(E["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:a,"data-qa":r},e.name," ",n.a.createElement(P["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return a}},{key:"render",value:function e(){var t=k()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return n.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(r["PureComponent"]);H.displayName="DashboardNavItemSecondary";H.defaultProps=W;var G=H;var V=G;var K=a(3157);var z={isOpen:_["b"].bool,animateClose:_["b"].bool,icon:_["b"].string.isRequired,iconColor:_["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_["b"].string.isRequired,onClick:_["b"].func.isRequired,subItems:_["b"].array};var Q={isOpen:false,animateClose:false,subItems:null};var Y=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleAnimation=a.toggleAnimation.bind(a);a.shouldAnimateClosed=a.shouldAnimateClosed.bind(a);return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=C.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var a=C.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=C.a.head(a)+"px");this.props.isOpen&&(t.style.maxHeight=C.a.sum(a)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var a=C.a.head(t.children).offsetHeight;var r=1;var n=a-r;var i=a+r;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var a=M()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var r=k()("p-ent_nav_item",a);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=n.a.createElement(V,{parentName:this.props.name,subItems:this.props.subItems,animateClose:this.props.animateClose}));return n.a.createElement("div",{ref:function e(a){t.element=a},className:r},n.a.createElement(B,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),n.a.createElement("div",null,i))}}]);return t}(r["PureComponent"]);Y.displayName="DashboardNavItem";Y.defaultProps=Q;var J=Y;var X=J;var Z=a(116);var $=a(3159);var ee={avatar:_["b"].string,name:_["b"].string,onClick:_["b"].func.isRequired};var te={name:"",avatar:""};var ae=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement(Z["a"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},n.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:a}),n.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),n.a.createElement(P["a"],{type:"chevron-down"}))}}]);return t}(r["PureComponent"]);ae.displayName="DashboardNavUserMenu";ae.defaultProps=te;var re=ae;var ne=re;var ie=a(3161);var se={header:_["b"].shape({name:_["b"].string,avatar:_["b"].string,onClick:_["b"].oneOfType([_["b"].func,_["b"].string]).isRequired,scrollTop:_["b"].bool}).isRequired,navItems:_["b"].arrayOf(_["b"].shape({isOpen:_["b"].bool,toClose:_["b"].bool,icon:_["b"].string.isRequired,iconColor:_["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_["b"].string.isRequired,onClick:_["b"].func.isRequired,subItems:_["b"].array})).isRequired,userMenu:_["b"].shape({avatar:_["b"].string,name:_["b"].string,onClick:_["b"].func.isRequired}).isRequired};var oe=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderNavItems=a.renderNavItems.bind(a);a.makeScrollable=a.makeScrollable.bind(a);a.onWindowResize=a.onWindowResize.bind(a);a.state={scrollTop:false,scrollBottom:false};return a}h()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var a=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(a===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=C.a.map(this.props.navItems,function(e){return n.a.createElement(X,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var a=this.props.header,r=a.name,i=a.avatar,s=a.onClick;var o=k()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return n.a.createElement("div",{className:"p-ent_nav"},n.a.createElement(A,{name:r,avatar:i,onClick:s,scrollTop:this.state.scrollTop}),n.a.createElement("div",{ref:function e(a){t.element=a},onScroll:this.makeScrollable,className:o},this.renderNavItems()),n.a.createElement(ne,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(r["PureComponent"]);oe.displayName="DashboardNav";var le=oe;var ce=le;Object(c["a"])("interop.dashboardNav",{render:function e(t,a,r){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ce,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4493:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(0);var c=a(103);var u=a(648);var d=a(5);var p=a.n(d);var m=a(4);var h=a.n(m);var v=a(7);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(2);var y=a.n(_);var k=a(31);var O=a(4647);var C=a(13);var E=a.n(C);var S=a(98);var w=a(38);var I=a(25);var j=a(221);var T=a(1068);var A=a(77);var N=a(16);var M=a(62);var P=a(169);var R=a(6);var x=a(458);var D=a(572);var F=a(1029);var L=a(59);var B=a(1197);var U=a(1446);var q=a(44);var W=a(1034);var H=a(1693);var G=a(512);var V=a(2025);var K=a(2473);var z={comments:l["b"].array,fileId:l["b"].string};var Q={comments:void 0,fileId:void 0};var Y=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggle=a.toggle.bind(a);a.state={expanded:false};return a}h()(t,[{key:"toggle",value:function e(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function e(){var t=this.props,a=t.comments,r=t.fileId;var i=this.state.expanded;if(Object(_["isEmpty"])(a))return null;var s=a.map(function(e){var t=e.id;return n.a.createElement(H["a"],{key:t,comment:e,fileId:r})});var o=E()("p-comment_list",{"p-comment_list--expanded":i});return n.a.createElement("div",{className:o},n.a.createElement(V["a"],{expanded:i,commentCount:a.length,toggleList:this.toggle}),n.a.createElement("div",{className:"p-comment_list__comments"},s))}}]);return t}(G["a"]);Y.displayName="CommentList";Y.propTypes=z;Y.defaultProps=Q;var J=Y;var X=H["a"];var Z=a(9);var $=a(573);var ee=a(1463);var te=a(1274);var ae=a(514);var re=a(32);var ne=a(14);var ie=a(97);var se=a(35);var oe=a(913);var le=a(42);var ce=a(28);var ue=a(373);var de=new R["b"]("file-details");var pe={fileId:l["b"].string.isRequired,share:l["b"].shape({sharedTeamIds:l["b"].arrayOf(l["b"].string),teamId:l["b"].string,channelId:l["b"].string,channelName:l["b"].string,isPublic:l["b"].bool,ts:l["b"].string,threadTs:l["b"].string,replyCount:l["b"].number}).isRequired,teamIdForIcon:l["b"].string,teamDomain:l["b"].string,openThread:l["b"].func};var me={teamIdForIcon:void 0,teamDomain:void 0,openThread:y.a.noop};var he=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onShareClick=a.onShareClick.bind(a);return a}h()(t,[{key:"onShareClick",value:function e(t){var a=this.props,r=a.share,n=a.fileId,i=a.openThread;t.preventDefault();var s=r.threadTs||r.ts;var o=s!==r.ts?r.ts:null;var l="file_details";var c=n;i({channelId:r.channelId,threadTs:s,highlightTs:o,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,a,r){var i=t||{},s=i.replyCount,o=i.ts,l=i.threadTs;if(!s)return null;var c="";c=l&&o!==l?de.t("from a thread"):de.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s});return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),n.a.createElement(q["a"],{href:a,onClick:r},n.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"render",value:function e(){var t=this.props,a=t.share,r=t.teamIdForIcon,i=t.teamDomain;var s=void 0;var o=void 0;var l=void 0;r?s={id:a.channelId,name:a.channelName,is_channel:true,is_private:!a.isPublic,shared_team_ids:a.sharedTeamIds,team_id:r}:l=this.onShareClick;i&&(o=Object(le["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:a.channelId,ts:a.ts,threadTs:a.threadTs}));return n.a.createElement("div",{className:"p-file_details__share",key:a.channelId+"_"+a.ts},n.a.createElement(q["a"],{href:o,onClick:l,className:"p-file_details__share_channel_link"},n.a.createElement(ue["a"],{channel:s,channelId:a.channelId,className:"p-file_details__share_channel",truncate:true,truncateWidth:"100%"})),n.a.createElement("span",{className:"p-file_details__share_metadata"},n.a.createElement(oe["a"],{timestamp:a.ts,relative:true}),this.getReplyCountText(a,o,l)))}}]);return t}(r["Component"]);he.displayName="FileDetailsShareLocation";he.defaultProps=me;function ve(e,t){var a=t.share;var r=Object(se["d"])(e);if(!r)return{};var n=r.id;var i=r.enterprise_id;var s=r.domain;var o=void 0;var l=a.teamId===i&&!y.a.isEmpty(a.sharedTeamIds)&&!y.a.includes(a.sharedTeamIds,n);var c=a.teamId&&a.teamId!==n&&a.teamId!==i;if(l||c){o=y.a.first(a.sharedTeamIds)||a.teamId;var u=Object(se["k"])(e,[o]);s=Object(ce["isExistent"])(u&&u[0])?u[0].domain:null}return{teamIdForIcon:o,teamDomain:s}}var fe=Object(i["connect"])(ve,{openThread:ie["l"]})(he);var be=new R["b"]("file-details");var ge={file:M["a"].File()};var _e={file:null};var ye=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"getFormattedSharesData",value:function e(t){var a=this;var r=[];y.a.forEach(t.public,function(e,t){y.a.forEach(e,function(e){var n=true;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var n=[];y.a.forEach(t.private,function(e,t){y.a.forEach(e,function(e){var n=false;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var i=r.concat(n);return y.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,a,r){if("0000000000.000000"===t.ts){Object(ne["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var n=t.reply_count||null;var i=t.reply_users;var s=t.reply_users_count;var o=t.latest_reply||t.ts;var l=t.internal_team_ids;return{channelId:a,replyCount:n,replyUsers:i,replyUsersCount:s,latest:o,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:l,isPublic:r}}},{key:"render",value:function e(){var t=this.props.file;if(!t||!t.shares)return null;var a=t.shares;var r=!!Object.keys(t.shares).length;var i=r&&this.getFormattedSharesData(a);return r&&n.a.createElement("div",{className:"p-file_details__shares"},n.a.createElement("div",{className:"p-file_details__share_divider"},n.a.createElement("span",null,be.rt("Shared in")),n.a.createElement("hr",null)),i.map(function(e){return n.a.createElement(fe,{key:e.ts+"-"+e.channelId,share:e,fileId:t.id})}))}}]);return t}(r["PureComponent"]);ye.displayName="FileDetailsShares";var ke=ye;ye.defaultProps=_e;var Oe=a(812);var Ce=a(27);var Ee=new R["b"]("file-details");var Se={tryAgain:l["b"].func};var we={tryAgain:_["noop"]};function Ie(e){var t=e.tryAgain;return n.a.createElement("div",{role:"alert",className:"p-file_details__error"},n.a.createElement("p",{className:"p-file_details__error_header"},Ee.t("Couldn't load file")),n.a.createElement("p",null,Ee.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(q["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(Ce["d"],{type:"primary",onClick:t},Ee.t("Try Again")))}Ie.displayName="FileDetailsError";Ie.defaultProps=we;var je=a(23);var Te=new R["b"]("file-details");function Ae(){return n.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(je["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,Te.t("This file was deleted.")))}Ae.displayName="FileDetailsTombstone";var Ne=a(3657);var Me=a(2474);var Pe=new R["b"]("file-details");var Re={file:M["a"].File(),origin:l["b"].string,do24hrTime:l["b"].bool,fileIsFetching:l["b"].bool,reloadFile:l["b"].func,userId:l["b"].string,botId:l["b"].string,isWorkflow:l["b"].bool,ownerName:l["b"].string,featureReactMemberProfileCard:l["b"].bool,clogFileClick:l["b"].func};var xe={file:null,origin:null,do24hrTime:false,fileIsFetching:false,reloadFile:_["noop"],isWorkflow:false,userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:false,clogFileClick:_["noop"]};var De=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(a,["renderPreview","onNameClick","clogLinkClick","renderBody"]);return a}h()(t,[{key:"onNameClick",value:function e(t){if(Object(x["a"])(t))return;var a=this.props,r=a.userId,n=a.botId,i=a.featureReactMemberProfileCard;if(!r&&!n)return;t.preventDefault();t.persist();if(i)return;n?Object(F["a"])(t,n):Object(D["a"])(t,r)}},{key:"clogLinkClick",value:function e(t){var a=this.props.file;this.props.clogFileClick({file:a,payload:t})}},{key:"isImage",value:function e(){return"image"===Object(A["getFileType"])(this.props.file)}},{key:"renderPreview",value:function e(){return n.a.createElement(te["a"],{file:this.props.file,showActions:false,forceExpanded:true,largeImage:true,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,a=t.file,r=t.do24hrTime,i=t.ownerName,s=t.userId,o=t.botId,l=t.isWorkflow,c=t.featureReactMemberProfileCard;var u="";Object(A["isFilePublic"])(a)||(u=n.a.createElement("div",{className:"p-file_details__private"},Pe.t("Private file")));var d="";d=o?"/services/"+o:"/team/"+s;var p=void 0;p=c?n.a.createElement(ae["a"],{botId:o,userId:s,onClick:this.onNameClick},n.a.createElement(q["a"],{href:d,className:"p-file_details__user_link"},i)):n.a.createElement(q["a"],{href:d,className:"p-file_details__user_link",onClick:this.onNameClick},i);return n.a.createElement("div",{className:"p-file_details__user_meta"},p,o&&n.a.createElement($["a"],{isWorkflow:l}),n.a.createElement("div",{className:"p-file_details__upload_date"},Pe.t("{date} at {time}",{date:Object(P["l"])(a.timestamp),time:Object(P["p"])(a.timestamp,{do24hrTime:r})})),u)}},{key:"renderComments",value:function e(){var t=this.props.file;if(Object(_["isEmpty"])(t.comments))return null;return n.a.createElement("div",{className:"p-file_details__comments"},n.a.createElement("hr",{className:"p-file_details__comment_separator"}),n.a.createElement(J,{comments:t.comments,fileId:t.id}))}},{key:"renderFileDetails",value:function e(){var t=this.props,a=t.file,r=t.fileIsFetching,i=t.reloadFile;if(r&&(!a||Object(L["d"])(a)&&!Object(L["c"])(a)))return null;if(!a||Object(L["c"])(a))return n.a.createElement(Ie,{tryAgain:i});if(Object(A["isTombstone"])(a))return n.a.createElement(Ae,null);var s=!Object(A["isHiddenByStorageLimit"])(a);var o={};if(this.isImage()){o.maxWidth=(a.thumb_480_w||a.thumb_360_w)+"px";o.maxHeight=(a.thumb_480_h||a.thumb_360_h)+"px"}var l=Object(A["getFileType"])(a);var c="image"===l||"snippet"===l;var u=E()("p-file_details__meta",{"p-file_details__meta--show_filename":c});return n.a.createElement(n.a.Fragment,null,s?n.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},n.a.createElement("div",{className:u},c?n.a.createElement(B["a"],{file:a,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),n.a.createElement(ee["a"],{file:a,clogLinkClick:this.clogLinkClick,inFileDetails:true})):null,n.a.createElement("div",{className:"p-file_details__preview",style:o},this.renderPreview()),this.renderComments(),n.a.createElement(ke,{file:a}))}},{key:"renderBody",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__content"},n.a.createElement(O["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(W["b"],{width:a,height:r,fade:true},n.a.createElement("div",{className:"p-file_details"},t.renderFileDetails()))}))}},{key:"render",value:function e(){var t=this.props.origin;var a={member_preview:Pe.t("Member"),starred_items:Pe.t("Starred Items"),search_results:Pe.t("Search Results"),channel_page:Pe.t("Channel Details"),group_page:Pe.t("Channel Info"),im_page:Pe.t("Conversation Details"),mentions:Pe.t("Activity")};var r=Pe.t("Files");var i=a[t]||r;var s=E()("p-file_flexpane","p-file_flexpane--detail");return n.a.createElement(Oe["a"],{flexOrigin:t,className:s,title:i,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(re["a"])()?void 0:4.9})}}]);return t}(r["PureComponent"]);De.displayName="FileDetails";De.defaultProps=xe;var Fe=function e(t,a){var r=a.fileId;if(!r)return{};var n=Object(S["getFileById"])(t,r);if(!n)return{};var i=Object(A["getFileEntityId"])(n),s=i.userId,o=i.botId;var l=s?Object(I["e"])(t,s):null;var c=l?Object(N["getBotIdFromMember"])(l):null;var u=o||c;var d="";if(u){var p=Object(j["getBotById"])(t,u);p&&p.name&&(d=p.name)}!d&&l&&(d=Object(N["getPrefCompliantMemberName"])(t,l));d||(d=n.username);return{file:Object(S["getFileById"])(t,r),do24hrTime:Object(w["h"])(t,"time24"),featureEmailWorkobjectUi:Object(Z["isFeatureEnabled"])(t,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(Z["isFeatureEnabled"])(t,"feature_react_member_profile_card"),userId:s,botId:u,ownerName:d,isWorkflow:Object(N["isWorkflowBot"])(l)}};var Le={clogFileClick:function e(){return T["a"].apply(void 0,arguments)}};var Be=Object(i["connect"])(Fe,Le)(De);var Ue=Object(U["a"])(Be,{alwaysFetchOnMount:true});var qe=a(3);var We=a.n(qe);var He=a(37);var Ge=a.n(He);var Ve=a(26);var Ke=a.n(Ve);var ze=a(787);var Qe=a(18);var Ye=a(551);var Je=a(891);var Xe=a(1306);var Ze=a(1675);var $e=a(39);var et=a(1855);var tt=a(1388);var at=a(1676);var rt=a(261);var nt=a(543);var it=a(429);var st=new R["b"]("files");var ot={member:l["b"].object,onChange:l["b"].func,searchMembers:l["b"].func.isRequired};var lt={member:null,onChange:_["noop"]};var ct=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.state={value:e.member?e.member.id:null,selectedOption:e.member?ut(e.member.id):null};return a}h()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?ut(t.member.id):null}})}},{key:"onChange",value:function e(t,a){this.setState(function(){return{value:t,selectedOption:{value:t,label:a}}});this.props.onChange(t)}},{key:"render",value:function e(){return n.a.createElement(nt["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:st.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]);return t}(r["PureComponent"]);ct.displayName="FilesFlexpaneMembersSelect";ct.defaultProps=lt;function ut(e){return{value:e,label:n.a.createElement("div",{className:"p-file_list__select__member"},n.a.createElement(it["b"],{id:e,size:"small"}))}}var dt=function e(t){return{searchMembers:function e(a){return t(Object(rt["e"])({query:a,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true}})).then(function(e){return{options:e.map(function(e){return ut(e.id)})}})}}};var pt=Object(i["connect"])(function(e,t){var a=t.userId;return{member:Object(I["e"])(e,a)}},dt)(ct);var mt=a(3662);var ht=new R["b"]("files");var vt=Object(Ze["a"])(Xe["a"]);var ft={files:l["b"].arrayOf(l["b"].shape({id:l["b"].string,ts:l["b"].number})),filetype:l["b"].string,user:l["b"].string,scrollmark:l["b"].shape({key:l["b"].string,offset:l["b"].number}),fetchFilesPre:l["b"].func,fetchFilesPost:l["b"].func,saveScrollmark:l["b"].func,setFiletype:l["b"].func,setUser:l["b"].func,previewFile:l["b"].func,clogger:l["b"].object.isRequired,focusKey:l["b"].string,clogFileClick:l["b"].func,overStorageLimit:l["b"].bool.isRequired,setFocusKey:l["b"].func};var bt={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:_["noop"],fetchFilesPost:_["noop"],saveScrollmark:_["noop"],setFiletype:_["noop"],setUser:_["noop"],previewFile:_["noop"],focusKey:null,clogFileClick:_["noop"],setFocusKey:_["noop"]};var gt=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(a,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]);a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.layout=new Je["a"];a.list=n.a.createRef();a.flexpane=n.a.createRef();a.layout.heightCache.DEFAULT_HEIGHT=69;return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.scrollmark,r=t.clogger,n=t.overStorageLimit;if(a){var i=a.key,s=a.offset;this.layout.setAnchor(i,s);this.props.saveScrollmark(null)}n&&r.track(Qe["l"].GROWTH_PRICING,{contexts:{ui_context:{action:Qe["w"].IMPRESSION,step:Qe["A"].FILE_PANE,ui_component:Qe["x"].FILE_STORAGE_LIMIT_BANNER}}});var o=this.props,l=o.focusKey,c=o.files;if("files"===l&&c.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.files;if("files"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}if("files"===n&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.list.current;if(!r)return;if(!a)return;var n=this.props.clogger;n.track(Qe["l"].FLEXPANE_FILE_CLICKED,{click_file_id:a});this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-r.getScrollTop()});this.props.previewFile({fileId:a,flexOrigin:"files"})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"setFocusOnFirstItem",value:function e(){var t=this.keys[0];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPre=this.props.fetchFilesPre({types:r,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;1===r&&(t.reachedStart=true)}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPost=this.props.fetchFilesPost({types:r,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"clogFileClick",value:function e(t,a){this.props.clogFileClick({file:a,payload:t})}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(Qe["l"].GROWTH_PRICING,{contexts:{ui_context:{action:Qe["w"].CLICK,step:Qe["A"].FILE_PANE,ui_element:Qe["z"].PRICING_LINK,ui_component:Qe["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isEmpty",value:function e(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"isFocusableItem",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.key;return Object(u["a"])(a)}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},ht.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},ht.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var a=this.props.files[t]&&this.props.files[t].id;if(!a)return null;var r=t===this.props.files.length-1;var i=E()("p-file_list__file",{"p-file_list__file--last":r});return n.a.createElement(vt,{fileId:a,className:i,clogLinkClick:this.clogFileClick,fullWidth:true,useRowAction:true})}},{key:"renderStorageWarningBanner",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},n.a.createElement("div",{className:"display_flex"},n.a.createElement(je["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),n.a.createElement("div",null,n.a.createElement("span",null,ht.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var a=e.text;return n.a.createElement(q["a"],{href:"/pricing?ui_step="+Qe["A"].FILE_PANE+"&ui_element="+Qe["z"].PRICING_LINK,onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},a)})))))}},{key:"renderBody",value:function e(){var t=this;var a=this.props,r=a.files,i=a.overStorageLimit;var s=r.map(function(e){return e.id});this.keys=[].concat(Ke()(s));this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n.a.createElement(n.a.Fragment,null,i&&this.renderStorageWarningBanner(),n.a.createElement("div",{className:"p-file_list"},n.a.createElement(O["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(Ye["a"],{width:a,height:r,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemTabWithin:t.onItemTabWithin,onItemClick:t.onFileClick,isFocusableItem:t.isFocusableItem})})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.filetype,i=a.user;return n.a.createElement(Oe["a"],{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:ht.t("Files"),className:E()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function e(){return n.a.createElement("div",{className:"p-file_list__filters"},n.a.createElement(at["a"],{filetype:r,onChange:t.props.setFiletype}),n.a.createElement(pt,{userId:i,onChange:function e(a){t.props.setUser(a)}}))},viewId:"file-list",kbNavOrder:Object(re["a"])()?void 0:4.8})}}]);return t}(r["PureComponent"]);gt.displayName="FileList";gt.defaultProps=bt;var _t=function e(t){return{files:Object(ze["getFlexpaneFiles"])(t),scrollmark:Object(ze["getScrollmark"])(t),filetype:Object(ze["getFiletype"])(t),user:Object(ze["getUser"])(t),clogger:Object($e["a"])({state:t}),overStorageLimit:Object(ce["isOverStorageLimit"])(Object(se["d"])(t)),focusKey:Object(et["a"])(t)}};var yt={fetchFilesPre:function e(){return ze["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return ze["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return ze["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return ze["setFiletype"].apply(void 0,arguments)},setUser:function e(){return ze["setUser"].apply(void 0,arguments)},previewFile:function e(){return ie["c"].apply(void 0,arguments)},clogFileClick:function e(){return T["a"].apply(void 0,arguments)},setFocusKey:function e(t){return Object(tt["a"])(t)}};var kt=Object(i["connect"])(_t,yt)(function(e){var t=e.forwardedRef,a=Ge()(e,["forwardedRef"]);return n.a.createElement(gt,We()({ref:t},a))});var Ot=n.a.forwardRef(function(e,t){return n.a.createElement(kt,We()({forwardedRef:t},e))});function Ct(e){if(e.fileId)return n.a.createElement(Ue,e);if(e.list)return n.a.createElement(Ot,e);return null}Ct.defaultProps={fileId:null,list:false,origin:null};function Et(e){var t=Object(c["i"])(e);var a=Object(c["e"])(e)[0];var r=Object(c["c"])(e);var n=Object(u["a"])(a);return{list:"files"===t&&!n,fileId:"files"===t&&n?a:null,origin:"files"===t?r:null}}var St=Object(i["connect"])(Et)(Ct);var wt=St;var It=a(161);var jt=function e(t,a){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(It["a"],null,n.a.createElement(wt,null))),a)};var Tt=jt;var At=a(46);Object(At["a"])("interop.mountFilesFlexpane",Tt)},4494:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(29);var d=a(46);var p=a(1874);var m=a(26);var h=a.n(m);var v=a(5);var f=a.n(v);var b=a(4);var g=a.n(b);var _=a(7);var y=a.n(_);var k=a(8);var O=a.n(k);var C=a(2);var E=a(0);var S=a(9);var w=a(41);var I=a(239);var j=a(144);var T=a(526);var A=a(6);var N=new A["b"]("external_shared_channels");var M=function(e){O()(t,e);function t(){f()(this,t);return y()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"render",value:function e(){return s.a.createElement("div",{className:"c-shared_channels_indent"},s.a.createElement("div",{className:"p-shared_channels__header"},s.a.createElement("h1",null,N.t("External Sharing"))))}}]);return t}(s.a.Component);M.displayName="SharedChannelsHeader";var P=M;var R=a(1398);var x=a(497);var D=new A["b"]("external_shared_channels");var F={searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired};var L={};var B=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=300;a.onInputChange=a.onInputChange.bind(a);a.onSearchInputChangeDebounced=Object(C["debounce"])(function(e){a.props.onSearchInputChange(e)},r);return a}g()(t,[{key:"onInputChange",value:function e(t){var a=t.target.value||"";this.onSearchInputChangeDebounced(a)}},{key:"render",value:function e(){var t=D.t("Search organizations...");return s.a.createElement("div",null,s.a.createElement(x["a"],{className:"p-app_management_filter_search_bar",placeholder:t,icon:"search",autoFocus:false,isLoading:false,onChange:this.onInputChange,value:this.props.searchQuery,size:"small"}))}}]);return t}(i["PureComponent"]);B.displayName="SharedChannelsSearch";B.defaultProps=L;var U=B;var q=new A["b"]("external_shared_channels");var W={orgsCount:E["b"].number.isRequired,searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired};function H(e){var t=e.orgsCount,a=e.searchQuery,r=e.onSearchInputChange;var n=q.t("Organizations");t>0&&(n=q.t("{orgsCount, plural, =1 {# Organization} other {# Organizations}}",{orgsCount:t}));return s.a.createElement("div",{className:"p-shared_channels padding_top_100"},s.a.createElement(R["a"],{"data-qa":"shared-channels-action-bar",title:n,actions:[s.a.createElement(U,{searchQuery:a,onSearchInputChange:r})]}))}H.displayName="SharedChannelsActionBar";var G=H;var V=a(28);var K=a(857);var z=a(1975);var Q=new A["b"]("external_shared_channels");function Y(){return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},Q.rt("No Results")),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},Q.rt("Slack couldn't find any organizations matching your search."))))}Y.displayName="EmptySearchResults";var J=Y;var X=a(2498);var Z=a.n(X);var $=a(2499);var ee=a.n($);var te=a(2403);var ae=a.n(te);var re=a(2500);var ne=a.n(re);var ie=a(54);var se=new A["b"]("external_shared_channels");var oe={workspaces:E["b"].array.isRequired};var le=function e(t,a){return Z()(ee()(function(e){var t=e.workspace_name;return t}),ne()(1,a))(t)};var ce=function e(t){var a=t.length;var r=le(t);if(a>50)return se.t("{rem, plural, =1 {{spaces}} other {{spaces} and # others...}}",{spaces:ae()(", ")(r),rem:a-51});if(3===a)return se.t("{secondWorkSpace} and {thirdWorkspace}",{secondWorkSpace:r[0],thirdWorkspace:r[1]});if(2===a)return r[0];return ae()(", ")(r)};var ue=function e(t,a){var r=se.t("{len, plural, =1 {# other} other {# others...}}",{len:t-1});return s.a.createElement(ie["c"],{tip:a},s.a.createElement("span",{className:"sk_primary_foreground p-shared_channels__table_tooltip"},r))};ue.displayName="renderWorkspaces";var de=function e(t){var a=t.workspaces;var r=a.length;var n=ce(a);return r>=1?s.a.createElement("div",null,s.a.createElement("span",{className:"sk_primary_foreground"},a[0].workspace_name),r>=2&&se.rt("<span> {ampSym} </span>",{ampSym:"&"}),r>=2&&ue(r,n)):null};var pe=de;var me=a(23);var he=a(27);var ve=a(69);var fe=new A["b"]("external_shared_channels");var be={teamName:E["b"].string.isRequired,onStopSharing:E["b"].func.isRequired};var ge=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}g()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.onStopSharing,i=a.teamName;return s.a.createElement(ve["f"],n()({},t,{width:"auto"}),s.a.createElement(ve["b"],{danger:true,label:fe.rt("Stop sharing with {teamName}",{teamName:i}),onSelected:function e(){return r()}}))}},{key:"render",value:function e(){return s.a.createElement(ve["e"],{renderMenu:this.renderMenu,position:"bottom-right"},s.a.createElement(he["c"],null,s.a.createElement(me["b"],{type:"ellipsis"})))}}]);return t}(i["PureComponent"]);ge.displayName="SharedChannelsRowMenu";var _e=ge;var ye=new A["b"]("external_shared_channels");var ke={totalCount:E["b"].number.isRequired,privateCount:E["b"].number.isRequired,directConversationCount:E["b"].number.isRequired};var Oe=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderChannelCount=a.renderChannelCount.bind(a);a.renderDirectConversationCount=a.renderDirectConversationCount.bind(a);return a}g()(t,[{key:"renderDirectConversationCount",value:function e(){var t=this.props.directConversationCount;return s.a.createElement("span",{"data-qa":"dm_mpdm_counts"},ye.t("{directConversationCount, plural, =0 {No direct message conversations} =1 {# direct message conversation} other {# direct message conversations}}",{directConversationCount:t}))}},{key:"renderChannelCount",value:function e(){var t=this.props,a=t.totalCount,r=t.privateCount;var n=ye.t("{totalCount, plural, =0 {No channels} =1 {# channel} other {# channels}}",{totalCount:a});var i=r?ye.t(" ({privateCount, plural, =1 {# private} other {# private}})",{privateCount:r}):"";var o=""+n+i;return s.a.createElement("span",{"data-qa":"channel_counts"},o)}},{key:"render",value:function e(){return s.a.createElement(i["Fragment"],null,this.renderChannelCount(),this.renderDirectConversationCount())}}]);return t}(s.a.Component);Oe.displayName="SharedChannelTableChannelCounts";var Ce=function e(t,a){var r=a.team;var n=Object(C["get"])(r,"public_channel_count",0);var i=Object(C["get"])(r,"private_channel_count",0);var s=Object(C["get"])(r,"im_channel_count",0);var o=Object(C["get"])(r,"mpim_channel_count",0);var l=n+i;var c=s+o;return{totalCount:l,privateCount:i,directConversationCount:c}};var Ee=Object(c["connect"])(Ce)(Oe);var Se={isLoading:E["b"].bool,onSortChange:E["b"].func,organizations:E["b"].arrayOf(E["b"].object).isRequired,onStopSharing:E["b"].func,onRequestNextPage:E["b"].func};var we={isLoading:false,onStopSharing:C["noop"],onSortChange:C["noop"],onRequestNextPage:C["noop"]};var Ie="asc";var je="desc";var Te="caret_down";var Ae="caret_up";var Ne={};Ne[Ie]=Te;Ne[je]=Ae;var Me=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={headers:[],rowData:[],sortBy:"",sortDir:""};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);return a}g()(t,[{key:"componentDidMount",value:function e(){this.rebuildHeaders()}},{key:"componentWillReceiveProps",value:function e(t){var a=t.organizations;if(a&&a.length){var r={rowData:this.formatData(a)};this.setState(function(){return r})}}},{key:"rebuildHeaders",value:function e(){var t={headers:this.buildHeaders()};this.setState(function(){return t})}},{key:"buildHeaders",value:function e(){var t=this;var a=[{id:"header_organization",value:"Organization",className:"p-shared_channels__table__org",sortable:true},{id:"header_channels",value:"Channels",className:"p-shared_channels__table__channels"},{id:"header_workspaces",value:"Workspaces",className:"p-shared_channels__table__workspaces"},{id:"header_row_menu",value:"",className:"p-shared_channels__table__row_menu",noHover:true,sortable:false}].map(function(e){if(!e.sortable)return e;return n()({},e,{iconType:t.determineSortState(e.id,e),onClick:t.headerItemOnClick})});return a}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a&&a.defaultSortType||Ie;var o=Ne[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Ie?Te:Ae:Ne[s];return l}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var s=this.props.onSortChange;var o=n;var l=i;if(t.id===n)l=i&&i!==Ie?Ie:je;else{o=t.id;l=t.defaultSortType?t.defaultSortType===Ie?je:Ie:je}var c=this.state.rowData;c.sort(function(e,t){var a=l===je?1:-1;if(e.items[0].value>t.items[0].value)return-1*a;if(e.items[0].value<t.items[0].value)return 1*a;return 0});var u={rowData:c,sortBy:o,sortDir:l};this.setState(function(){return u},function(){s&&s(l);a.rebuildHeaders()})}},{key:"formatData",value:function e(t){if(!t)return[];var a=this.props.onStopSharing;var r=t.map(function(e){var t="row_"+e.team_id;return{id:t,items:[{value:s.a.createElement(z["a"],{dimension:34,team:{name:e.team_name,domain:Object(V["getEnterpriseFormattedDomain"])(e.team_id,e.team_domain),icon:e.team_icon}}),className:"p-shared_channels__table__org",id:t+"_team_name"},{value:s.a.createElement(Ee,{team:e}),className:"p-shared_channels__table__channels",id:t+"_channels"},{value:s.a.createElement(pe,{workspaces:e.connected_workspaces}),className:"p-shared_channels__table__workspaces",id:t+"_workspaces"},{value:s.a.createElement(_e,{teamName:e.team_name,onStopSharing:function t(){return a(e)}}),className:"p-shared_channels__table__row_menu",id:t+"_row_menu"}]}});return r}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.headers,n=a.paddingBottom,i=a.rowData;var o=this.props,l=o.isLoading,c=o.organizations;if(!l&&!c.length)return s.a.createElement(J,null);return s.a.createElement("div",{style:{paddingBottom:n},className:"c-shared_channels_table_indent"},s.a.createElement(K["a"],{autoHeight:true,headers:r,isLoading:l,newQuery:l,onRequestNextPage:this.props.onRequestNextPage,rows:i,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(i["PureComponent"]);Me.displayName="SharedChannelsTableView";Me.defaultProps=we;var Pe=Me;var Re=a(91);var xe=a(95);var De=a(123);var Fe=a(52);var Le=new A["b"]("external_shared_channels");var Be={onStopSharing:E["b"].func.isRequired,orgItem:E["b"].shape({team_id:E["b"].string.isRequired,team_name:E["b"].string.isRequired,private_channel_count:E["b"].number.isRequired,public_channel_count:E["b"].number.isRequired}).isRequired};var Ue={hasClickedStopSharing:false,isButtonDisabled:true,isCheckboxChecked:false};var qe=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=n()({},Ue);a.onStopSharing=a.onStopSharing.bind(a);a.handleCheckboxChange=a.handleCheckboxChange.bind(a);return a}g()(t,[{key:"onStopSharing",value:function e(){this.setState(function(){return n()({},Ue,{hasClickedStopSharing:true})});this.props.onStopSharing()}},{key:"handleCheckboxChange",value:function e(t){var a=!!t.target.checked;this.setState(function(){return{isCheckboxChecked:a,isButtonDisabled:!a}})}},{key:"render",value:function e(){var t=this.state,a=t.hasClickedStopSharing,r=t.isButtonDisabled,n=t.isCheckboxChecked;var i=this.props.orgItem;var o=i.team_name;var l=Le.rt("Stop sharing with {teamName}",{teamName:o});var c=Le.t("Stop sharing with {teamName}",{teamName:o});var u=Le.rt("<strong>Yes, stop sharing with {teamName}</strong>",{teamName:o,fallbackHash:"dcdf67715146b5e0c681eccadd3f02d9f4df9c2b"});var d=Le.rt("<strong>This can\u2019t be undone.</strong> You won\u2019t be able to reshare any of these channels.");var p=s.a.createElement("p",null,Le.rt("Note: channels that were originally created by <strong>{targetWorkspaceName}</strong> will become read-only.",{targetWorkspaceName:o,fallbackHashNs:"connected_workspaces",fallbackHash:"0fd82d0aefa51f9f85afab8776920d5655f78aca"}));return s.a.createElement(Re["a"],{goButtonType:"danger",cancelText:Le.t("Cancel"),goButtonIsDisabled:r,goButtonIsPending:a,goButtonText:Le.t("Stop Sharing"),goOnEnterPressed:!r,onGo:this.onStopSharing,title:l,titleAria:c,useSlackScrollbar:false},s.a.createElement(xe["a"],{level:"error",type:"inline",className:"margin_bottom_100"},d),s.a.createElement("p",{"data-qa":"stop_sharing_description"},Le.rt("This will disconnect all the channels you currently share with {teamName}. Members of the two organizations will no longer be able to direct message each other.",{teamName:s.a.createElement("strong",null,o)})),s.a.createElement("p",{className:"margin_bottom_25"},Le.t("You\u2019re disconnecting...")),s.a.createElement("ul",null,i.public_channel_count>0&&s.a.createElement("li",{"data-qa":"public_channel_count"},Le.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:i.public_channel_count})),i.private_channel_count>0&&s.a.createElement("li",{"data-qa":"private_channel_count"},Le.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:i.private_channel_count})),s.a.createElement("li",null,Le.t("All direct and group messages"))),p,s.a.createElement(Fe["a"],{text:u,type:"inline",cursor:"pointer"},s.a.createElement(De["a"],{"data-qa":"stop_sharing_confirm",checked:n,onChange:this.handleCheckboxChange})))}}]);return t}(s.a.Component);qe.displayName="StopSharingDialog";var We=qe;var He=a(162);var Ge=new A["b"]("external_shared_channels");var Ve={disconnectionStatus:E["b"].oneOf(["error","success"]).isRequired,teamName:E["b"].string,onCloseComplete:E["b"].func};var Ke={teamName:"[teamName]",onCloseComplete:C["noop"]};var ze=function e(t){var a=t.disconnectionStatus,r=t.teamName,n=t.onCloseComplete;if(!a)return null;var i="";"error"===a&&(i=s.a.createElement("span",null,Ge.t("Something\u2019s gone wrong. Mind trying again in a moment?")));"success"===a&&(i=s.a.createElement("span",null,Ge.rt("Disconnecting all channels and conversations with {teamName}",{teamName:s.a.createElement("span",{className:"p-shared_channels__stopped_sharing_toast"},r)})));return s.a.createElement(He["b"],{position:"bottom-right",onCloseComplete:n,shouldAutoFade:true},i)};ze.displayName="StopSharingToast";ze.defaultProps=Ke;var Qe=ze;var Ye=a(3266);var Je=a(1584);var Xe=new A["b"]("external_shared_channels");function Ze(e){var t=e.orgName;var a=s.a.createElement(Je["a"],{href:"https://get.slack.help/hc/en-us/articles/115004151203-create-shared-channels"},Xe.t("Learn more about shared channels"));return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},Xe.rt("{orgName} isn't sharing any channels",{orgName:t})),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},Xe.rt("When your organization shares a channel with another organization, you\u2019ll see that connection here. {learnMoreUrl}",{learnMoreUrl:a}))))}Ze.displayName="NoSharedChannels";var $e=Ze;var et={featureSharedChannels:E["b"].bool.isRequired,searchConnectedOrgs:E["b"].func.isRequired,disconnectSharedTeam:E["b"].func.isRequired,openModal:E["b"].func.isRequired,closeModal:E["b"].func.isRequired,enqueueToast:E["b"].func.isRequired,orgName:E["b"].string.isRequired};var tt={};var at="asc";var rt=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={orgsCount:0,searchQuery:"",sortDir:at,organizations:[],isLoading:false,nextPageId:"",initCount:null};a._isMounted=false;a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleRequestNextPage=a.handleRequestNextPage.bind(a);a.handleTableSortChange=a.handleTableSortChange.bind(a);a.openStopSharingDialog=a.openStopSharingDialog.bind(a);a.stopSharingWorkspace=a.stopSharingWorkspace.bind(a);return a}g()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureSharedChannels)return;this._isMounted=true;this.fetchSharedChannels()}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleSearchInputChange",value:function e(t){var a={searchQuery:t.trim(),nextPageId:""};this.setState(function(){return a},this.fetchSharedChannels)}},{key:"handleTableSortChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;this.setState(function(){return{sortDir:t}},this.fetchSharedChannels)}},{key:"fetchSharedChannels",value:function e(){var t=this;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir,i=e.initCount;var s={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(s).then(function(e){var a=e.organizations,r=e.nextCursor;if(t._isMounted){var n=a.length;t.setState(function(){return{organizations:a,nextPageId:r,orgsCount:n,isLoading:false,initCount:null===i?n:i}})}}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"handleRequestNextPage",value:function e(){var t=this;if(!this.state.nextPageId)return;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir;var i={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(i).then(function(e){var a=e.organizations,r=e.nextCursor;t._isMounted&&t.setState(function(e){return{organizations:[].concat(h()(e.organizations),h()(a)),orgsCount:e.organizations.length+a.length,nextPageId:r}})}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"removeOrg",value:function e(t){var a=this.state.organizations.filter(function(e){return e.team_id!==t});this._isMounted&&this.setState(function(){return{organizations:a,orgsCount:a.length}})}},{key:"showSharingStatusToast",value:function e(t,a){this.props.enqueueToast({element:s.a.createElement(Qe,{disconnectionStatus:a,teamName:t,onCloseComplete:C["noop"]})})}},{key:"stopSharingWorkspace",value:function e(t,a){var r=this;this.props.disconnectSharedTeam({teamId:t}).then(function(){r.props.closeModal();r.removeOrg(t);r.showSharingStatusToast(a,"success")}).catch(function(){console.log("error while stop sharing");r.showSharingStatusToast(a,"error")})}},{key:"openStopSharingDialog",value:function e(t){var a=this;var r=function e(){a.stopSharingWorkspace(t.team_id,t.team_name)};this.props.openModal({element:s.a.createElement(We,{onStopSharing:r,orgItem:t,openModal:this.props.openModal})})}},{key:"renderTableView",value:function e(){var t=this.props.orgName;var a=this.state,r=a.orgsCount,n=a.searchQuery,o=a.initCount,l=a.organizations,c=a.isLoading;if(0===o)return s.a.createElement($e,{orgName:t});return s.a.createElement(i["Fragment"],null,s.a.createElement(G,{onSearchInputChange:this.handleSearchInputChange,orgsCount:r,searchQuery:n}),s.a.createElement(Pe,{isLoading:c,onStopSharing:this.openStopSharingDialog,onRequestNextPage:this.handleRequestNextPage,onSortChange:this.handleTableSortChange,organizations:l}),s.a.createElement(T["a"],null))}},{key:"render",value:function e(){var t=this.props.featureSharedChannels;if(!t)return null;return s.a.createElement("div",{className:"p-shared_channels padding_top_200"},s.a.createElement(P,null),this.renderTableView())}}]);return t}(i["PureComponent"]);rt.displayName="SharedChannels";rt.defaultProps=tt;var nt=function e(t){return{featureSharedChannels:!Object(S["isFeatureEnabled"])(t,"feature_shared_channels_block_large_orgs")}};var it={openModal:w["openModal"],closeModal:w["closeModal"],enqueueToast:j["enqueueToast"],searchConnectedOrgs:I["s"],disconnectSharedTeam:I["i"]};var st=Object(c["connect"])(nt,it)(rt);Object(d["a"])("interop.sharedChannels",{render:function e(t,a,r){if(!t)throw new Error("sharedChannels render must be called with a teamId parameter");var i=Object(u["f"])(t);var o=r.org.enterprise.name;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["a"],null,s.a.createElement(st,n()({},r,{orgName:o})))),a)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},4495:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(0);var c=a(2);var u=a(580);var d=a(82);var p=a(59);var m=a(1981);var h=a(347);var v=a(1956);var f=a(193);var b=a(39);var g=a(889);var _=a(32);var y=a(1186);var k=a(232);var O=a(27);var C=a(6);var E=a(330);var S={appProfile:l["b"].object};var w={appProfile:void 0};function I(e){var t=e.appProfile;if(!t)return null;var a=Object(E["b"])(t.profile,512);return n.a.createElement("div",{className:"p-app_space_profile__side__avatar"},n.a.createElement("img",{className:"rounded",src:a,alt:"app avatar","data-qa":"app_profile_avatar"}))}I.displayName="AppSpaceProfileSideAvatar";I.defaultProps=w;var j=I;var T=a(5);var A=a.n(T);var N=a(4);var M=a.n(N);var P=a(7);var R=a.n(P);var x=a(8);var D=a.n(x);var F=a(9);var L=a(18);var B=a(1688);var U=a(1436);var q=new C["b"]("app_space");var W={showSettingsUrl:l["b"].bool.isRequired,settingsUrl:l["b"].string,homepageUrl:l["b"].string,openAppManagementModal:l["b"].func,launchWorkflowBuilder:l["b"].func.isRequired,appProfile:l["b"].object,clogger:l["b"].object,showWorkflowBuilderButton:l["b"].bool,featureBuilderIsWorkflowApp:l["b"].bool.isRequired};var H={showWorkflowBuilderButton:false,settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:c["noop"],appProfile:void 0,clogger:{track:c["noop"]}};var G=function(e){D()(t,e);function t(e){A()(this,t);var a=R()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSettingsButtonClick=a.onSettingsButtonClick.bind(a);a.onWebsiteButtonClick=a.onWebsiteButtonClick.bind(a);return a}M()(t,[{key:"onWebsiteButtonClick",value:function e(){this.props.clogger.track(L["l"].APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:L["A"].APP_SPACE_ABOUT_TAB,action:L["w"].CLICK,ui_element:L["z"].LINK_APP_HOMEPAGE}}})}},{key:"onSettingsButtonClick",value:function e(t){var a=this.props.appProfile;this.props.clogger.track(L["l"].APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:L["A"].APP_SPACE_ABOUT_TAB,action:L["w"].CLICK,ui_element:L["z"].LINK_APP_SETTINGS}}});if(Object(f["I"])(a)){t.preventDefault();this.props.openAppManagementModal({serviceId:Object(f["o"])(a),referringEventId:"APP_SPACE_ABOUT_OPEN"})}}},{key:"renderSettingsButton",value:function e(){var t=this.props,a=t.showSettingsUrl,r=t.settingsUrl,i=t.appProfile;var s=q.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});if(a)return n.a.createElement(O["d"],{type:"outline",size:"medium",href:Object(f["I"])(i)?void 0:r,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:s},s);return null}},{key:"renderWorkFlowBuilderButton",value:function e(){var t=this.props,a=t.showWorkflowBuilderButton,r=t.appProfile,i=t.launchWorkflowBuilder,s=t.featureBuilderIsWorkflowApp;if(a&&s)return n.a.createElement(O["d"],{type:"outline",size:"medium",className:"p-app_space_profile__side_link",onClick:function e(){return i({subPath:"slack-apps/"+r.app_id})}},s?q.t("Open in Builder"):"");return null}},{key:"renderWebsiteUrl",value:function e(){var t=this.props.homepageUrl;var a=q.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});if(t)return n.a.createElement(O["d"],{type:"outline",size:"medium",href:t,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:a,onClick:this.onWebsiteButtonClick},a);return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWorkFlowBuilderButton(),this.renderWebsiteUrl())}}]);return t}(r["PureComponent"]);G.displayName="BaseAppSpaceProfileSideLinks";G.defaultProps=H;var V=function e(t,a){var r=a.appProfile;return{clogger:Object(b["a"])({state:t}),showSettingsUrl:Object(f["z"])(t,r),settingsUrl:Object(f["y"])(t,r),homepageUrl:Object(f["k"])(r),featureBuilderIsWorkflowApp:Object(F["isFeatureEnabled"])(t,"feature_builder_is_workflow_app")}};var K={openAppManagementModal:B["a"],launchWorkflowBuilder:U["a"]};var z=Object(i["connect"])(V,K)(G);var Q=a(48);var Y=a.n(Q);var J=a(109);var X=a(118);var Z=a(44);var $=a(1979);var ee=a(291);var te=a(22);var ae=new C["b"]("app_space");var re={appProfile:l["b"].object,truncatedDescription:l["b"].string,formattedDescription:l["b"].string};var ne={appProfile:void 0,truncatedDescription:"",formattedDescription:""};function ie(e){var t=e.appProfile,a=e.formattedDescription,i=e.truncatedDescription;var s=Object(r["useState"])(false),o=Y()(s,2),l=o[0],c=o[1];if(!t||!a)return null;var u=Object(f["J"])(t);var d=n.a.createElement($["a"],{formattedDescription:a});return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},u?d:n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},l?d:n.a.createElement(X["a"],{emoji:true,text:i}))," ",n.a.createElement(Z["a"],{onClick:function e(){return c(!l)},"data-qa":"toggle-app-description-expansion"},l?ae.t("Show less"):ae.t("Read more")))))}ie.displayName="AppSpaceProfileDescription";ie.defaultProps=ne;var se=function e(t,a){var r=a.appProfile;return{truncatedDescription:Object(ee["a"])(t,{messageText:Object(f["r"])(r),teamId:Object(te["b"])(t)}),formattedDescription:Object(f["h"])(r)}};var oe=Object(i["connect"])(se)(Object(J["pure"])(ie));var le=a(1962);var ce=new C["b"]("app_space");var ue={isWorkflowApp:l["b"].bool,isPublished:l["b"].bool,isDistributed:l["b"].bool,appType:l["b"].string,installedUserId:l["b"].string,installerIsYou:l["b"].bool,appName:l["b"].string,appProfile:l["b"].object.isRequired,appHomeTeamDisplayName:l["b"].string,featureAddAppHomeTeamName:l["b"].bool};var de={isWorkflowApp:false,isPublished:false,isDistributed:false,appType:"",installedUserId:"",installerIsYou:false,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:false};function pe(e){var t=e.isWorkflowApp,a=e.isPublished,i=e.isDistributed,s=e.appType,o=e.installedUserId,l=e.installerIsYou,u=e.appName,d=e.appHomeTeamDisplayName,p=e.featureAddAppHomeTeamName,m=e.appProfile;if(!a)return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},i?n.a.createElement(r["Fragment"],null,ce.t("This app has not been reviewed or approved by Slack.")," ",n.a.createElement(Z["a"],{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},ce.t("Learn more")),"."):n.a.createElement(le["a"],{displayCustomCreator:true,isWorkflowApp:t,isError:false,appType:s,memberId:o,installerIsYou:l,appName:u,creatorsId:Object(c["get"])(m,"legacy_app.auth.created_by",""),appHomeTeamDisplayName:d,featureAddAppHomeTeamName:p})));return null}pe.defaultProps=de;function me(e,t){var a=t.appProfile;return{isPublished:Object(f["G"])(a),isDistributed:Object(f["D"])(a),isWorkflowApp:Object(y["d"])(a),appType:Object(f["s"])(a),installedUserId:Object(f["v"])(a),installerIsYou:Object(f["w"])(e,a),appName:Object(f["m"])(a),appHomeTeamDisplayName:Object(f["i"])(e,a),featureAddAppHomeTeamName:Object(F["isFeatureEnabled"])(e,"feature_add_app_home_team_name")}}var he=Object(i["connect"])(me)(pe);var ve=new C["b"]("app_space");var fe=function e(){var t=Object(k["a"])(),a=t.featureBuilderIsWorkflowApp;return a?n.a.createElement("div",{className:"p-app_space_profile__privacy_disclaimer"},ve.rt("Apps made using our Workflow Builder only use data Slack already has access to (view our <a>Privacy Policy</a> to learn more).",{fallbackHash:"66b014ac2efc6359bc9644c6ba5fe9aac4e3cddb"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"http://slack.com/privacy-policy"},a)})):null};var be=fe;var ge=new C["b"]("app_space");var _e={appProfile:l["b"].object.isRequired,appName:l["b"].string,isCustomIntegration:l["b"].bool,isWorkflowApp:l["b"].bool.isRequired,manageUrl:l["b"].string,installerIsYou:l["b"].bool.isRequired};var ye={appName:"",isCustomIntegration:false,manageUrl:""};function ke(e){var t=e.appProfile,a=e.appName,r=e.installerIsYou,i=e.isCustomIntegration,s=e.isWorkflowApp,o=e.manageUrl;var l=Object(k["a"])(),c=l.featureBuilderIsWorkflowApp;var u=s&&!!c;var d=t.profile.tagline;return n.a.createElement("div",{className:"p-app_space_profile__info"},n.a.createElement("div",{className:"p-app_space_profile__side"},n.a.createElement(j,{appProfile:t}),n.a.createElement(z,{appProfile:t,showWorkflowBuilderButton:u&&r})),n.a.createElement("div",{className:"p-app_space_profile__about"},!!a&&n.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},a),n.a.createElement(oe,{appProfile:t}),n.a.createElement(he,{appProfile:t}),u&&d&&n.a.createElement("div",null,d),u&&n.a.createElement(be,null),i&&n.a.createElement(O["d"],{type:"outline",href:o},ge.t("Manage",{note:"Manage permissions"}))))}ke.displayName="AppSpaceProfileInfo";ke.defaultProps=ye;var Oe=function e(t,a){var r=a.appProfile;return{appName:Object(f["m"])(r),isCustomIntegration:Object(f["C"])(r),installerIsYou:Object(f["w"])(t,r),manageUrl:Object(f["x"])(t,r),isWorkflowApp:Object(y["d"])(r)}};var Ce=Object(i["connect"])(Oe)(ke);var Ee=a(1462);var Se=a(187);var we=a(23);var Ie=new C["b"]("app_space");var je={appName:l["b"].string,appIcon:l["b"].string,appScreenshots:l["b"].array,youtubeUrl:l["b"].string,featureReactFileViewer:l["b"].bool,openFileViewer:l["b"].func};var Te={appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:false,openFileViewer:c["noop"]};var Ae=function(e){D()(t,e);function t(e){A()(this,t);var a=R()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleYoutubeClick=a.handleYoutubeClick.bind(a);a.handleImageClick=a.handleImageClick.bind(a);return a}M()(t,[{key:"handleYoutubeClick",value:function e(){var t=this.props,a=t.appName,r=t.appScreenshots,n=t.appIcon,i=t.youtubeUrl,s=t.featureReactFileViewer;if(s)this.props.openFileViewer({title:a,youtube:{src:i}});else{var o=Object(f["A"])(i);Object(Se["g"])({youtubeId:o,screenshots:r,appName:a,appIcon:n},0)}}},{key:"handleImageClick",value:function e(t){var a=this.props,r=a.appName,n=a.appScreenshots,i=a.appIcon,s=a.youtubeUrl,o=a.featureReactFileViewer;if(o)this.props.openFileViewer({title:r,image:{src:n[t].image_1600,altText:r,thumbnailUrl:n[t].image_440,height:400,width:600}});else{var l=Object(f["A"])(s);var c=s?t+1:t;Object(Se["g"])({youtubeId:l,screenshots:n,appName:r,appIcon:i},c)}}},{key:"generateThumbnailUrl",value:function e(t){var a=Object(f["A"])(t);if(""===a)return false;return"https://i.ytimg.com/vi/"+a+"/hqdefault.jpg"}},{key:"renderYoutubeVideo",value:function e(){var t=this.props,a=t.youtubeUrl,r=t.appName;if(!a)return null;var i=this.generateThumbnailUrl(a);if(!i)return null;var s=Ie.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:r});return n.a.createElement(O["c"],{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:i,alt:s,className:"p-app_space_profile__youtube_thumbnail"}),n.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},n.a.createElement(we["b"],{type:"play",size:"inherit"})))}},{key:"renderScreenshots",value:function e(){var t=this;var a=this.props,r=a.appScreenshots,i=a.appName;if(!r||!r.length)return null;var s=Ie.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:i});return r.map(function(e,a){return n.a.createElement(O["c"],{key:e.id,onClick:function e(){return t.handleImageClick(a)},className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:e.image_440,alt:s}))})}},{key:"render",value:function e(){var t=this.props,a=t.youtubeUrl,r=t.appScreenshots;if((!r||!r.length)&&(!a||""===a))return null;return n.a.createElement("div",{className:"p-app_space__screenshots"},n.a.createElement("h3",{className:"p-app_space__subheader"},Ie.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),n.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots()))}}]);return t}(r["PureComponent"]);Ae.displayName="AppSpaceScreenshots";Ae.defaultProps=Te;Ae.displayName="AppSpaceScreenshots";var Ne=Ae;function Me(e,t){var a=t.appProfile;return{youtubeUrl:Object(f["t"])(a),appScreenshots:Object(f["n"])(a),appName:Object(f["m"])(a),appIcon:Object(E["b"])(a.profile,512),featureReactFileViewer:Object(F["isFeatureEnabled"])(e,"feature_react_file_viewer")}}var Pe=function e(t){return{openFileViewer:function e(a){return t(Object(Ee["a"])(a))}}};var Re=Object(i["connect"])(Me,Pe)(Ne);var xe=a(266);var De=a(1158);var Fe=new C["b"]("app_space");var Le={autoFillSlashCommand:l["b"].func,clogger:l["b"].object,command:l["b"].shape({name:l["b"].string.isRequired,usage:l["b"].string.isRequired,description:l["b"].string.isRequired}).isRequired,appId:l["b"].string,botId:l["b"].string};var Be={autoFillSlashCommand:c["noop"],clogger:{track:c["noop"]},appId:"",botId:""};function Ue(e){var t=e.autoFillSlashCommand,a=e.clogger,i=e.appId,s=e.botId,o=e.command;var l=Object(xe["g"])(o);var c=Object(xe["i"])(o);var u=Object(xe["e"])(o);var d=Object(r["useCallback"])(function(){t({commandName:l});a.track(L["l"].APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:i,bot_id:s,contexts:{core:{app_id:i,bot_id:s}}})},[t,l,a,i,s]);return n.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("strong",null,l),n.a.createElement("span",null,c)),n.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},u)),n.a.createElement("div",null,n.a.createElement(O["d"],{type:"outline","data-qa":l,onClick:d},Fe.t("Start command"))))}Ue.displayName="AppSpaceSlashCommand";Ue.defaultProps=Be;var qe=function e(t){return{clogger:Object(b["a"])({state:t})}};var We={autoFillSlashCommand:function e(){return De["a"].apply(void 0,arguments)}};var He=Object(i["connect"])(qe,We)(Ue);var Ge=new C["b"]("app_space");var Ve={appProfile:l["b"].object.isRequired};function Ke(e){var t=e.appProfile;var a=Object(f["c"])(t);var i=Object(f["l"])(t);var s=Object(f["o"])(t);if(!a||!a.length)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"p-app_space__subheader"},n.a.createElement("span",null,Ge.t("Commands",{note:"Slash commands the app responds to"})),n.a.createElement("span",{className:"p-app_space__subheader__helper"},Ge.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),n.a.createElement("div",{className:"p-app_space_profile__slash_commands"},n.a.createElement("section",null,a.map(function(e){return n.a.createElement(He,{key:e.name,command:e,appId:i,botId:s})}))))}Ke.displayName="AppSpaceSlashCommands";var ze=n.a.memo(Ke);var Qe=a(3505);var Ye={appProfile:l["b"].object,clogger:l["b"].object,showSlashCommands:l["b"].bool};var Je={appProfile:void 0,clogger:{track:c["noop"]},showSlashCommands:false};function Xe(e){var t=e.clogger,a=e.appProfile,i=e.showSlashCommands;var s=Object(f["l"])(a);var o=Object(f["o"])(a);var l=Object(r["useCallback"])(function(){t.track("APP_SPACE_ABOUT_OPEN",{app_id:s,bot_id:o,contexts:{core:{app_id:s,bot_id:o}}})},[t,s,o]);var c=Object(r["useCallback"])(function(){return Object(v["b"])(a,o)},[a,o]);Object(r["useEffect"])(function(){if(s&&o){c();l()}},[s,o,l,c]);if(!a||Object(p["e"])(a))return null;return n.a.createElement("div",{className:"p-app_space_profile","data-qa":"app_space_profile"},n.a.createElement(Ce,{appProfile:a}),n.a.createElement(Re,{appProfile:a}),i?n.a.createElement(ze,{appProfile:a}):null)}Xe.displayName="BaseAppSpace";Xe.defaultProps=Je;var Ze=function e(t){var a=Object(d["a"])(t);var r=Object(m["a"])(t,a);var n=Object(g["a"])(t);if((!Object(_["a"])()||!n)&&(!r||!Object(h["n"])(t)))return{};var i=Object(u["getAppProfileByChannelId"])(t,a);var s=Object(f["K"])(t,i);return{appProfile:i,showSlashCommands:s,clogger:Object(b["a"])({state:t})}};var $e=Object(i["connect"])(Ze)(Xe);var et=a(161);var tt=function e(t,a){if(!t)throw new Error("mountAppSpace must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(et["a"],null,n.a.createElement($e,null))),a)};var at=tt;var rt=a(46);Object(rt["a"])("interop.mountAppSpace",at)},4498:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(0);var c=a(34);var u=a(30);var d=Object(u["a"])("Fetches org retention settings",function(e,t,a){return e(Object(c["a"])({method:"mc.enterprise.retention.get",args:{enterprise:a}}))});d.meta={name:"fetchOrgRetention",key:"fetchersOrgRetentionApiFetchOrgRetention",description:"Fetches org retention settings"};d.propTypes=l["b"].string.isRequired;var p=Object(u["a"])("Submits retention request to API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.requestData;return e(Object(c["a"])({method:"newRequest"===r?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:n}))});p.meta={name:"submitRetentionRequest",key:"fetchersOrgRetentionApiSubmitRetentionRequest",description:"Submits retention request to API"};p.propTypes={type:l["b"].string.isRequired,requestData:l["b"].object};var m=a(352);var h=a(10);var v=a.n(h);var f=a(3);var b=a.n(f);var g=a(5);var _=a.n(g);var y=a(4);var k=a.n(y);var O=a(7);var C=a.n(O);var E=a(8);var S=a.n(E);var w=a(2);var I=a.n(w);var j=a(6);var T=a(27);var A=a(192);var N=a(13);var M=a.n(N);var P=a(23);var R=a(751);var x=new j["b"]("policy-retention");function D(e){return{channels:x.t("Channel Retention"),private_channels:x.t("Private Channel Retention"),dms:x.t("Direct Message Retention"),allow_override:e?x.t("Member & Admin Override"):x.t("Direct Message and Private Channel Override"),files:x.t("File Retention")}}function F(e){return{channels:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):x.t("No policy; teams can modify their own retention settings")},{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):x.t("No policy; teams can modify their own retention settings")},{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):x.t("No policy; teams can set their own override policy")},{value:0,label:e?x.t("Don\u2019t allow channel and DM overrides"):x.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?x.t("Always allow channel and DM overrides"):x.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?x.t("Keep files"):x.t("Retain all files")},{value:1,label:e?x.t("Keep files, but only for a set number of days"):x.t("Retain all files for only a specific number of days"),showDuration:true}]}}function L(e){var t=e.policyType,a=e.featureGdprExports;var r=D(a);return r[t]}function B(e){var t=e.policyType,a=e.featureGdprExports;var r=F(a);return r[t]}function U(e){return I.a.includes(["channels","private_channels","allow_override"],e)}function q(e){var t=e.policyType,a=e.retentionType,r=e.featureGdprExports;var n=B({policyType:t,featureGdprExports:r});return I.a.get(I.a.find(n,function(e){return e.value===a}),"showDuration",false)}function W(e){var t=e.policyType,a=e.retentionType,r=e.policyDurationValue,n=e.featureGdprExports;if(I.a.isUndefined(t)||I.a.isUndefined(a))return"";var i=q({policyType:t,retentionType:a,featureGdprExports:n});var s=i?r:0;if(0===I.a.parseInt(s)||4===I.a.parseInt(a)){var o=B({policyType:t,featureGdprExports:n});var l=I.a.find(o,function(e){return e.value===a}),c=l.label;return c}if("files"===t)return n?x.t("Keep files for {policyDurationValue} days",{policyDurationValue:r}):x.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:r});switch(I.a.parseInt(a)){case 2:return n?x.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:r}):x.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:r});case 3:return n?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:r}):x.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:r});default:return""}}function H(e){var t=e.policyType,a=e.settingValues,r=e.featureGdprExports;var n=a.retention_type;if(4===n){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=b()({},a,{is_locked:true});if(!q({policyType:t,retentionType:n,featureGdprExports:r}))return b()({},i,{retention_duration:0});return i}var G=new j["b"]("policy-retention");var V={orgName:l["b"].string.isRequired,requesterName:l["b"].string.isRequired,onConfirm:l["b"].func.isRequired,onCancel:l["b"].func.isRequired,requestedPolicies:l["b"].object,currentPolicies:l["b"].object,requestDate:l["b"].string,cancelRequest:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var K={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var z=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickCloseOrCancelButton=a.onClickCloseOrCancelButton.bind(a);a.onClickSubmitButton=a.onClickSubmitButton.bind(a);return a}k()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,a=t.requesterName,r=t.orgName;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},n.a.createElement("p",{className:"p-org_retention_request--font_bump"},n.a.createElement("strong",null,a,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",n.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",r," to confirm the change."),n.a.createElement("p",null,n.a.createElement("strong",null,"Your name will be included with this request."))),n.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(R["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return n.a.createElement("div",null,n.a.createElement("h2",{className:"margin_bottom_150"},G.t("Are you sure you\u2019d like to cancel the retention policy update request?")),n.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",n.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",n.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var a=this.props.featureGdprExports;return I.a.map(this.props.requestedPolicies,function(e,r){var i=e.retention_type,s=e.retention_duration,o=e.is_locked;var l=0!==i&&"allow_override"!==r||o?i:4;var c=I.a.get(t.props.currentPolicies,r);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var m=0!==u&&"allow_override"!==r||p?u:4;return n.a.createElement("div",{key:r,className:"p-org_retention_request__modal_section"},n.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},L({policyType:r,featureGdprExports:a})),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe"," ",n.a.createElement("span",{className:"margin_left_50"},G.t("New:")," ",W({policyType:r,retentionType:l,policyDurationValue:s,featureGdprExports:a}))),n.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb"," ",n.a.createElement("span",{className:"margin_left_50"},G.t("Old:")," ",W({policyType:r,retentionType:m,policyDurationValue:d,featureGdprExports:a})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":G.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var a=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var r=this.props.cancelRequest?G.t("Confirm Cancellation"):G.t("Confirm with Customer");var i=M()("btn",{btn_danger:this.props.cancelRequest});return n.a.createElement("div",{className:"c-modal c-modal--active"},n.a.createElement("div",{className:"c-modal__background"}),n.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},n.a.createElement(P["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),n.a.createElement("div",{className:"c-modal__header"},n.a.createElement("h2",{className:"margin_bottom_0"},t)),n.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},a,n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement(T["d"],{type:"outline",className:"margin_right_75",onClick:this.onClickCloseOrCancelButton},G.t("Cancel")),n.a.createElement(T["d"],{className:i,onClick:this.onClickSubmitButton},r)))))}}]);return t}(n.a.PureComponent);z.displayName="PolicyRequestModal";z.defaultProps=K;var Q=Object(A["a"])("feature_gdpr_exports")(z);var Y=a(109);var J=new j["b"]("policy-retention");var X=function e(t){var a=Object(R["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var r=J.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:a});var i=J.t("If you need to modify this request, please cancel it and initiate a new one. ");return n.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},n.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),n.a.createElement("strong",null,r),n.a.createElement("p",{className:"no_margin"},i))};X.displayName="PendingRequestAlert";var Z=Object(Y["pure"])(X);var $=new j["b"]("policy-retention");var ee={users:l["b"].object.isRequired,onUpdateUserSelection:l["b"].func,currentSelectionValue:l["b"].string,isFormPending:l["b"].bool};var te={onUpdateUserSelection:I.a.noop,currentSelectionValue:"",isFormPending:false};var ae=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onOptionSelection=a.onOptionSelection.bind(a);return a}k()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:a})}},{key:"renderOptions",value:function e(){return I.a.map(this.props.users,function(e){return n.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy-requester"},$.t("Requester")),n.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},n.a.createElement("option",{value:"",disabled:true},$.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(n.a.Component);ae.displayName="RequesterSelect";ae.defaultProps=te;var re=ae;var ne=new j["b"]("policy-retention");var ie={onUpdateUserInput:l["b"].func,currentUserValue:l["b"].string,placeholder:l["b"].string,isDisabled:l["b"].bool};var se={onUpdateUserInput:I.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var oe=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdateInput=a.onUpdateInput.bind(a);return a}k()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"mc-user"},ne.t("Your Full Name")),n.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},n.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(n.a.Component);oe.displayName="McUserInput";oe.defaultProps=se;var le=oe;var ce=new j["b"]("policy-retention");var ue={options:l["b"].array.isRequired,onUpdatePolicySelection:l["b"].func,currentSelectionValue:l["b"].number,currentDurationValue:l["b"].oneOfType([l["b"].string,l["b"].number]),isDeactivated:l["b"].bool};var de={onUpdatePolicySelection:I.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var pe=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTextInput=a.onTextInput.bind(a);a.onOptionSelection=a.onOptionSelection.bind(a);return a}k()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target.value;var r=4!==I.a.parseInt(a);this.props.onUpdatePolicySelection({retention_type:I.a.parseInt(a),is_locked:r})}},{key:"onTextInput",value:function e(t){var a=I.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:a})}},{key:"maybeRenderDuration",value:function e(){var t=this;var a=I.a.find(this.props.options,function(e){return e.value===I.a.parseInt(t.props.currentSelectionValue)}),r=a.showDuration;if(r)return n.a.createElement("div",{className:"p-org_retention_request__duration_group "},n.a.createElement("span",{className:"p-org_retention_request__duration_label"},ce.t("Duration")),n.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),n.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return I.a.map(this.props.options,function(e){return n.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},n.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(n.a.Component);pe.displayName="PolicySelect";pe.defaultProps=de;var me=pe;var he=new j["b"]("policy-retention");var ve={displaySettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].oneOfType([l["b"].string,l["b"].number]),retention_type:l["b"].number}).isRequired,policyType:l["b"].oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:l["b"].string.isRequired,currentSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),onUpdatePolicy:l["b"].func,pendingSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),isFormPending:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var fe={pendingSettings:{},currentSettings:{},onUpdatePolicy:I.a.noop,isFormPending:false};var be=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdatePolicy=a.onUpdatePolicy.bind(a);return a}k()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,a=t.featureGdprExports,r=t.policyType;if(!I.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,s=i.retention_type,o=i.retention_duration,l=i.is_locked;var c=0!==s&&"allow_override"!==this.props.policyType||l?s:4;var u=W({policyType:r,retentionType:c,policyDurationValue:o,featureGdprExports:a});var d=he.t("Current:");return n.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,a=t.isFormPending,r=t.policyType,i=t.featureGdprExports;var s=B({policyType:r,featureGdprExports:i});var o=this.props.displaySettings;!I.a.isEmpty(this.props.pendingSettings)&&a&&(o=this.props.pendingSettings);var l=o,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===r&&!c||0===d&&!c&&U(r)?4:d;return n.a.createElement(me,{id:"policy_select_"+this.props.policyType,options:s,currentSelectionValue:p,currentDurationValue:u,isDeactivated:a,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(n.a.Component);be.displayName="PolicyItem";be.defaultProps=fe;var ge=Object(A["a"])("feature_gdpr_exports")(be);var _e=a(3763);var ye=new j["b"]("policy-retention");var ke={orgId:l["b"].string.isRequired,hasPermission:l["b"].bool.isRequired,orgName:l["b"].string.isRequired,orgOwners:l["b"].object.isRequired,currentSettings:l["b"].object.isRequired,submitRequest:l["b"].func.isRequired,pendingData:l["b"].object,featureGdprExports:l["b"].bool.isRequired};var Oe={pendingData:{}};var Ce=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false};a.onUpdatePolicySelect=a.onUpdatePolicySelect.bind(a);a.onUpdateRequesterSelect=a.onUpdateRequesterSelect.bind(a);a.onMcUserInput=a.onMcUserInput.bind(a);a.onSubmitRequest=a.onSubmitRequest.bind(a);a.onCancelRequest=a.onCancelRequest.bind(a);a.onCloseModal=a.onCloseModal.bind(a);a.onOpenModal=a.onOpenModal.bind(a);return a}k()(t,[{key:"onUpdatePolicySelect",value:function e(t){var a=t.policyType,r=t.data;var n=this.props.featureGdprExports;var i=this.state.requestedSettings;var s=i[a]||{};var o=this.props.currentSettings[a];var l=b()({},o,s,r);var c=void 0;var u=H({policyType:a,settingValues:l,featureGdprExports:n});c=I.a.isEqual(o,u)?I.a.omit(i,a):b()({},this.state.requestedSettings,v()({},a,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var a=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",a)})}},{key:"onCancelRequest",value:function e(){var t=this;var a={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",a)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var a=this.state,r=a.requestedSettings,n=a.mcUser,i=a.requester;var s=I.a.reduce(r,function(e,a,r){e[r]=H({policyType:r,settingValues:a,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var a=this.state.requestedSettings;return I.a.every(a,function(e,a){var r=e.retention_duration,n=e.retention_type;return!(q({policyType:a,retentionType:n,featureGdprExports:t})&&(0===r||""===r))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,a=t.requestedSettings,r=t.mcUser,n=t.requester;return this.isFormDataValid()&&!I.a.isEmpty(a)&&!I.a.isUndefined(r)&&!I.a.isEmpty(r)&&!I.a.isUndefined(n)&&!I.a.isEmpty(n)}},{key:"maybeRenderPendingAlert",value:function e(t,a,r){if(t)return n.a.createElement(Z,{requestTimestamp:I.a.parseInt(r),requesterName:a});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var a=!I.a.isEmpty(this.props.pendingData);var r=this.props.pendingData,i=r.date_create,s=r.requester;if(a){var o=s.name;t=n.a.createElement(Q,{orgName:this.props.orgName,requestDate:i,requesterName:o,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=n.a.createElement(Q,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,a,r){var i=this.props.featureGdprExports;return n.a.createElement(ge,{displaySettings:I.a.get(this.state.requestedSettings,t)||I.a.get(this.props.currentSettings,t),currentSettings:r?I.a.get(this.props.currentSettings,t):{},pendingSettings:I.a.get(a,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:L({policyType:t,featureGdprExports:i}),isFormPending:r})}},{key:"renderButtons",value:function e(){var t=!I.a.isEmpty(this.props.pendingData);var a=this.isFormSubmittable();var r=void 0;r=t?n.a.createElement("div",null,n.a.createElement(T["d"],{type:"outline",className:"margin_right_75",disabled:true},ye.t("Request Submitted")),n.a.createElement(T["d"],{type:"outline",onClick:this.onOpenModal},ye.t("Cancel"))):a?n.a.createElement("div",null,n.a.createElement(T["d"],{onClick:this.onOpenModal},ye.t("Continue"))):n.a.createElement("div",null,n.a.createElement(T["d"],{type:"outline",disabled:true},ye.t("Continue")));return r}},{key:"render",value:function e(){var t=!I.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var a=this.props.pendingData,r=a.requested_settings,i=a.mc_user,s=a.requester,o=a.date_create;return n.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),n.a.createElement("div",null,this.maybeRenderPendingAlert(!I.a.isEmpty(this.props.pendingData),i,o),n.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("Message Retention")),n.a.createElement("div",null,this.renderPolicyItem("channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("private_channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("dms",r,t)),n.a.createElement("div",null,this.renderPolicyItem("allow_override",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("File Retention")),n.a.createElement("div",null,this.renderPolicyItem("files",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},ye.t("Authorization")),n.a.createElement("p",{className:"margin_bottom_200"},ye.t("Please include information about who is requesting this update, and your name.")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(re,{users:this.props.orgOwners,currentSelectionValue:I.a.get(this.state.requester,"id")||I.a.get(s,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),n.a.createElement(le,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:ye.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(n.a.Component);Ce.displayName="OrgRetentionRequest";Ce.defaultProps=Oe;var Ee=Object(A["a"])("feature_gdpr_exports")(Ce);var Se=Ee;var we=a(161);var Ie=function e(t,a,r,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(o["f"])(t);var u=function n(i,s){Object(o["b"])(t,p({type:i,requestData:s})).then(function(){e(t,a,r,l)}).catch(function(e){return Object(m["e"])("Failed to submit retention request:",e)})};Object(o["b"])(t,d(r)).then(function(e){var t=e.id,r=e.has_permission,o=e.all_org_owners,d=e.current_settings,p=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(we["a"],null,n.a.createElement(Se,{submitRequest:u,orgId:t,orgName:l,hasPermission:r,orgOwners:o,currentSettings:d,pendingData:p}))),a)}).catch(function(e){return Object(m["e"])("Failed to fetch retention settings:",e)})};var je=Ie;var Te=a(46);Object(Te["a"])("interop.mountOrgRetentionRequest",je)},4499:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(4647);var b=a(0);var g=a(1034);var _=a(580);var y=a(193);var k=a(3);var O=a.n(k);var C=a(296);var E=a(25);var S=a(1205);var w=a(2);var I=a(18);var j=a(59);var T=a(16);function A(e,t){return{appProfile:e,appId:Object(y["l"])(e),botId:Object(y["o"])(e),isPublished:Object(y["G"])(e),customIntegrationType:Object(y["d"])(e),dateCreated:Object(y["e"])(e),isUserRestricted:Object(T["isRestricted"])(t)||Object(T["isUltraRestricted"])(t),installedUserId:Object(y["v"])(e),commands:Object(y["c"])(e),description:Object(y["f"])(e),formattedDescription:Object(y["h"])(e),hideDescriptionExpansion:Object(y["J"])(e)}}var N=a(187);var M=a(456);var P=a(6);var R=a(39);var x=a(48);var D=a.n(x);var F=a(13);var L=a.n(F);var B=a(31);var U=a(339);var q=a(27);var W=a(1961);var H=a(69);var G=a(9);var V=a(22);var K=a(35);var z=a(28);var Q=a(41);var Y=a(1690);var J=new P["b"]("app_profile");function X(e){var t=e.appId,a=e.serviceId,r=e.appHomepageUrl,i=e.supportUrl,s=e.isSlackIntegration,l=e.dispatch,c=e.currentTeamId,u=e.currentUserId,d=e.locale,p=e.currentEnterpriseId;var m=Object(R["a"])({userId:u,teamId:c,locale:d,enterpriseId:p});var h=Object(K["d"])(Object(o["d"])(c));var v={app_id:t,bot_id:a};var f=function e(){return m.track(I["l"].USER_PROFILE_CLICK,v)};var b=[{key:"app_homepage",label:J.t("App Homepage"),href:r,click:function e(){f();m.track(I["l"].APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:I["A"].USER_PROFILE,action:I["w"].CLICK,ui_element:I["z"].APP_HOMEPAGE}}})},show:!!r,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:J.t("View in App Directory"),href:Object(z["getTeamUrl"])(h,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click"),click:function e(){f();m.track(I["l"].APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:I["A"].USER_PROFILE,action:I["w"].CLICK,ui_element:I["z"].LINK_APP_DIRECTORY}}})},show:true,dataQA:"app_profile_app_directory_page"},{key:"support",label:J.t("Support for this app"),href:i||void 0,click:function e(){f();m.track(I["l"].APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:I["A"].USER_PROFILE,action:I["w"].CLICK,ui_element:I["z"].LINK_APP_SUPPORT}}});s&&l(Object(Q["openModal"])({element:n.a.createElement(Y["a"],{trigger:"app_support_profile_button"})}))},show:true}];return b.filter(function(e){return e.show})}var Z=X;var $={isDistributed:b["b"].bool.isRequired,customIntegrationType:b["b"].string,appProfile:b["b"].object,dispatch:b["b"].func,currentTeamId:b["b"].string,currentUserId:b["b"].string,currentEnterpriseId:b["b"].string};var ee={customIntegrationType:"",appProfile:void 0,dispatch:b["b"].noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""};var te=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(B["a"])(a,["renderMenu"]);return a}d()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.dispatch,i=a.appProfile,s=a.currentTeamId,o=a.currentUserId,l=a.currentEnterpriseId;var c=Z({appId:Object(y["l"])(i),serviceId:Object(y["o"])(i),appHomepageUrl:Object(y["k"])(i),supportUrl:Object(y["p"])(i),isSlackIntegration:Object(y["H"])(i),dispatch:r,currentTeamId:s,currentUserId:o,locale:Object(P["s"])(),currentEnterpriseId:l});if(!c.length)return null;return n.a.createElement(H["a"],{template:c,stripTerminalSeparators:true,onMenuItemSelected:t.onMenuItemSelected})}},{key:"render",value:function e(){if(this.props.isDistributed&&!this.props.customIntegrationType)return n.a.createElement(H["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(q["d"],{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"}));return null}}]);return t}(r["Component"]);te.displayName="AppProfileOverflowMenuButton";te.defaultProps=ee;var ae=function e(t,a){var r=a.appProfile;return{isDistributed:Object(y["D"])(r),customIntegrationType:Object(y["d"])(r),currentTeamId:Object(V["b"])(t),currentUserId:Object(G["getCurrentUserId"])(t),currentEnterpriseId:Object(G["pageNeedsEnterprise"])(t)?Object(K["h"])(t).id:void 0}};var re=Object(i["connect"])(ae)(te);var ne=a(3337);var ie=new P["b"]("app_card");var se={isAvatarEmoji:b["b"].bool,isExternal:b["b"].bool.isRequired,isUserRestricted:b["b"].bool.isRequired,appProfile:b["b"].object,color:b["b"].string,name:b["b"].string,tagline:b["b"].string,settingsUrl:b["b"].string,avatarUrl:b["b"].string.isRequired,clogger:b["b"].object,externalTeam:b["b"].object};var oe={appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:w["noop"]},externalTeam:void 0,isAvatarEmoji:false};var le=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(B["a"])(a,["calculateStyle","renderSettingsButton","onSettingsButtonClick"]);return a}d()(t,[{key:"onSettingsButtonClick",value:function e(){this.props.clogger.track(I["l"].USER_PROFILE_CLICK,{app_id:Object(y["l"])(this.props.appProfile),bot_id:Object(y["o"])(this.props.appProfile)});this.props.clogger.track(I["l"].APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:I["A"].USER_PROFILE,action:I["w"].CLICK,ui_element:I["z"].LINK_APP_SETTINGS}}})}},{key:"calculateStyle",value:function e(){var t=this.props.color;var a=Object(U["f"])(t);if(a&&t){var r=D()(a,3),n=r[0],i=r[1],s=r[2];return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, "+t+" 0%, rgba("+n+","+i+","+s+",0.75) 100%)",backgroundColor:t}}return}},{key:"renderSettingsButton",value:function e(){var t=this.props,a=t.isExternal,r=t.isUserRestricted,i=t.settingsUrl;if(!a&&!r&&i)return n.a.createElement(q["d"],{"data-qa":"app_header_settings_button",href:i+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},ie.t("Settings"));return null}},{key:"render",value:function e(){var t=this.props,a=t.avatarUrl,r=t.isAvatarEmoji,i=t.color,s=t.isExternal,o=t.name,l=t.tagline,c=t.appProfile,u=t.externalTeam;return n.a.createElement("div",{className:L()({"p-app_profile_flexpane_header":!s,"p-app_profile_flexpane_header--external":s}),style:this.calculateStyle(i)},!!s&&n.a.createElement(W["a"],{externalTeam:u}),n.a.createElement("img",{className:L()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":r}),alt:"app avatar","data-qa":"app_header_icon",src:a}),n.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},n.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},o),n.a.createElement("div",null,n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},ie.t("APP")))),!!l&&n.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},l),n.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),n.a.createElement(re,{appProfile:c}))))}}]);return t}(r["Component"]);le.displayName="AppProfileHeader";le.defaultProps=oe;var ce=function e(t,a){var r=a.appProfile;var n=Object(y["g"])(r);var i=Object(y["a"])(t,r);return{clogger:Object(R["a"])({state:t}),avatarUrl:i,isAvatarEmoji:!!n,customIntegrationType:Object(y["d"])(r),color:Object(y["b"])(r),tagline:Object(y["q"])(r),isExternal:Object(y["E"])(t,r),isDistributed:Object(y["D"])(r),isUserRestricted:Object(T["isRestricted"])(self)||Object(T["isUltraRestricted"])(self),settingsUrl:Object(y["y"])(t,r),name:Object(y["m"])(r),externalTeam:Object(y["u"])(t,r)}};var ue=Object(i["connect"])(ce)(le);var de=a(109);var pe=a(23);var me=a(3339);var he=a(1979);var ve=new P["b"]("app_profile");var fe={formattedDescription:b["b"].string,hideExpandButton:b["b"].bool,clogLinkClick:b["b"].func};var be={formattedDescription:"",hideExpandButton:false,clogLinkClick:w["noop"]};function ge(e){var t=e.formattedDescription,a=e.hideExpandButton,i=e.clogLinkClick;var s=Object(r["useState"])(false),o=D()(s,2),l=o[0],c=o[1];if(!t)return null;return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},ve.t("How to use this app")),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},n.a.createElement("div",{className:L()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!a&&!l})},n.a.createElement(he["a"],{formattedDescription:t,clogLinkClick:i}),!a&&n.a.createElement(r["Fragment"],null,!l&&n.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),n.a.createElement(q["c"],{className:L()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!l,"p-app_profile_flexpane__description__button--collapse":l}),onClick:function e(){c(!l)}},l?ve.t("Collapse"):ve.t("Expand"),n.a.createElement(pe["b"],{type:l?"arrow-up-medium":"arrow-down-medium"}))))))}ge.displayName="AppProfileDescription";ge.defaultProps=be;var _e=Object(de["pure"])(ge);var ye=a(1158);var ke={appId:b["b"].string.isRequired,command:b["b"].shape({name:b["b"].string,usage:b["b"].string,description:b["b"].string}).isRequired,autoFillSlashCommand:b["b"].func,clogger:b["b"].object.isRequired};var Oe={autoFillSlashCommand:w["noop"]};var Ce=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"autoFillSlashCommand",value:function e(t){this.props.autoFillSlashCommand({commandName:t});var a=this.props,r=a.appId,n=a.clogger;n.track(I["l"].USER_PROFILE_CLICK,{app_id:r});n.track(I["l"].APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:r,contexts:{core:{app_id:r}}})}},{key:"render",value:function e(){var t=this;var a=this.props.command,r=a.name,i=a.usage,s=a.description;return n.a.createElement(q["c"],{type:"outline","data-qa":r,onClick:function e(){return t.autoFillSlashCommand(r)},className:"p-app_profile_flexpane__slash_command"},n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},n.a.createElement("span",{className:"bold"},r)," ",n.a.createElement("span",null,i)),n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},s))}}]);return t}(r["PureComponent"]);Ce.displayName="AppProfileSlashCommandItem";Ce.defaultProps=Oe;var Ee=function e(t){return{clogger:Object(R["a"])({state:t})}};var Se=function e(t){return Object(C["bindActionCreators"])({autoFillSlashCommand:ye["a"]},t)};var we=Object(i["connect"])(Ee,Se)(Ce);var Ie=new P["b"]("app_profile");var je={isPublished:b["b"].bool,installedUserId:b["b"].string,appProfile:b["b"].object,appId:b["b"].string,botId:b["b"].string,customIntegrationType:b["b"].string,isUserRestricted:b["b"].bool,dateCreated:b["b"].number,commands:b["b"].arrayOf(b["b"].object),formattedDescription:b["b"].string,hideDescriptionExpansion:b["b"].bool,showSlashCommands:b["b"].bool,clogger:b["b"].object};var Te={isPublished:false,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:false,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:false,showSlashCommands:false,clogger:{track:w["noop"]}};var Ae=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogLinkClick=a.clogLinkClick.bind(a);return a}d()(t,[{key:"getSectionHeaderText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"incoming-webhook":return Ie.t("About this Incoming Webhook");case"outgoing-webhook":return Ie.t("About this Outgoing Webhook");case"bot":return Ie.t("How to use this Bot");case"slash-commands":return Ie.t("How to use this Slash Command");default:return null}}},{key:"getSectionText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"outgoing-webhook":return null;case"bot":return Ie.t("You can message bots and invite them to channels like other members.");case"slash-commands":return Ie.t("Slash commands take actions when you post them in a conversation.");default:return null}}},{key:"clogLinkClick",value:function e(){var t=this.props,a=t.clogger,r=t.appId,n=t.botId;a.track(I["l"].USER_PROFILE_CLICK,{appId:r,botId:n})}},{key:"renderAboutSection",value:function e(){var t=this;var a=this.props,r=a.customIntegrationType,i=a.dateCreated,s=a.isUserRestricted,o=a.installedUserId;if(r){var l=n.a.createElement(M["a"],{id:o,onClick:function e(a){a.preventDefault();t.clogLinkClick();Object(N["i"])(o)}});return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(r)),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(r)," ",!s&&Ie.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:l,date_created:1e3*i})))}return null}},{key:"renderCommandsSection",value:function e(){var t=this.props,a=t.appId,r=t.commands,i=t.showSlashCommands;if(r&&r.length&&i)return n.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},Ie.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),r.map(function(e){return n.a.createElement(we,{key:e.name,command:e,appId:a})}));return null}},{key:"renderMetaSection",value:function e(){if(!this.props.isPublished)return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},n.a.createElement("p",null,n.a.createElement("i",{className:"sk_foreground_max"},Ie.t("This app has not been reviewed by Slack."))));return null}},{key:"render",value:function e(){var t=this.props,a=t.appProfile,r=t.appId,i=t.botId,s=t.formattedDescription,o=t.hideDescriptionExpansion;if(!a||Object(j["e"])(a))return null;return n.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":r,"data-bot_id":i},n.a.createElement(ue,{appProfile:a}),n.a.createElement("div",{className:"sk_primary_foreground large_bottom_margin"},this.renderAboutSection(),n.a.createElement(_e,{formattedDescription:s,hideExpandButton:o,clogLinkClick:this.clogLinkClick}),this.renderCommandsSection(),this.renderMetaSection()))}}]);return t}(r["PureComponent"]);Ae.displayName="BaseAppProfile";Ae.defaultProps=Te;var Ne=function e(t,a){var r=a.serviceId;var n=Object(_["getAppProfileByIds"])(t,{serviceId:r});return O()({},A(n,Object(E["b"])(t)),{showSlashCommands:Object(y["K"])(t,n),clogger:Object(R["a"])({state:t})})};var Me=Object(i["connect"])(Ne)(Ae);var Pe={appId:b["b"].string,currentMember:b["b"].object.isRequired,fetchLegacyAppProfile:b["b"].func};var Re={appId:"",fetchLegacyAppProfile:void 0};var xe=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={appProfile:void 0};a.getAppProfileProps=a.getAppProfileProps.bind(a);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.appId&&this.fetchAppProfile()}},{key:"componentDidUpdate",value:function e(t){this.props.appId!==t.appId&&this.fetchAppProfile()}},{key:"getAppProfileProps",value:function e(){var t=this.state.appProfile;var a=this.props.currentMember;return O()({},A(t,a),{showSettingsSection:false})}},{key:"fetchAppProfile",value:function e(){var t=this;this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(function(e){t.setState(function(){return{appProfile:Object(ye["c"])(null,e)}})})}},{key:"render",value:function e(){return n.a.createElement(Ae,this.getAppProfileProps())}}]);return t}(r["Component"]);xe.displayName="GenericAppProfile";xe.defaultProps=Re;var De=function e(t){return{currentMember:Object(E["b"])(t)}};var Fe=function e(t){return Object(C["bindActionCreators"])({fetchLegacyAppProfile:S["b"]},t)};var Le=Object(i["connect"])(De,Fe)(xe);var Be=a(32);var Ue=a(812);var qe=a(3345);var We=new P["b"]("app_profile");var He={serviceId:b["b"].string,appId:b["b"].string,customIntegrationType:b["b"].string};var Ge={serviceId:void 0,appId:void 0,customIntegrationType:""};var Ve=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this;var a={"incoming-webhook":We.t("About this Incoming Webhook"),"outgoing-webhook":We.t("About this Outgoing Webhook"),bot:We.t("About this Bot"),"slash-commands":We.t("About this Slash Command")};var r=We.t("About this app");var i=a[this.props.customIntegrationType]||r;return n.a.createElement(Ue["a"],{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:i,viewId:"app-profile-flepane",kbNavOrder:Object(Be["a"])()?void 0:4.7,renderBody:function e(){return n.a.createElement(f["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(g["b"],{width:a,height:r,fade:true},t.props.serviceId?n.a.createElement(Me,{serviceId:t.props.serviceId}):n.a.createElement(Le,{appId:t.props.appId}))})}})}}]);return t}(r["PureComponent"]);Ve.displayName="AppProfilePane";Ve.defaultProps=Ge;var Ke=function e(t,a){var r=a.serviceId;var n=r?Object(_["getAppProfileByIds"])(t,{serviceId:r}):void 0;return{customIntegrationType:Object(y["d"])(n)}};var ze=Object(i["connect"])(Ke)(Ve);var Qe=ze;var Ye=a(161);var Je=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("mountAppProfileFlexpane must be called with a teamId parameter");var l=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(Ye["a"],null,n.a.createElement(Qe,r))),a)};var Xe=Je;var Ze=a(46);Object(Ze["a"])("interop.mountAppProfileFlexpane",Xe)},4502:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(2);var s=a(1078);var o=a(48);var l=a.n(o);var c=a(5);var u=a.n(c);var d=a(4);var p=a.n(d);var m=a(39);var h=a(45);var v=function(){function e(){u()(this,e)}p()(e,[{key:"reportLocale",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetLocaleInformation"])();t&&Object(m["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetCrashInformation"])();t&&Object(m["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetHangInformation"])();t&&Object(m["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!h["isDesktop"])return;var t=Object(h["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var a=t.displays,r=t.windowFrame;var n=r.size,i=r.position;var s=l()(n,2),o=s[0],c=s[1];var u=l()(i,2),d=u[0],p=u[1];var v=[o||0,c||0,d||0,p||0];var f=[];a.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){f.push(e.size.width);f.push(e.size.height)}f.push(e.scaleFactor||1)});Object(m["a"])().track("DISPLAY_INFO",{display_resolutions:f,window_frame:v})}}]);return e}();var f=a(33);var b=function(){function e(){u()(this,e)}p()(e,[{key:"updateElements",value:function e(t){var a=this;var r=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return r.push(a.updateElement(e))});return r}},{key:"updateElement",value:function e(t,a){var r=a||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var n=t.getBoundingClientRect();var i={id:r,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)};var s=Object(f["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&s){var o=Object(h["legacyGetNoDragRegions"])();var l=o.filter(function(e){return e.id!==i.id});o.length>l.length&&Object(h["legacyUpdateNoDragRegion"])(l)}else Object(h["legacyUpdateNoDragRegion"])(i);return i}}]);return e}();var g=a(1976);var _=a(445);var y=a(1988);var k=a(187);var O=a(1997);var C=a(24);var E=Object(C["b"])("TS.inline_videos.maybeStopInlineVideoPlayback");var S=a(2026);var w=a(496);var I=a(1296);var j=a(97);var T=a(1666);var A=a(581);var N=a(1410);var M=a(781);var P=a(855);var R=a(9);var x=a(244);var D=a(38);var F=a(292);var L=a(82);var B=a(22);var U=a(25);var q=a(73);var W=a(35);var H=a(28);var G=a(550);var V=a(339);var K=a(14);var z=a(1634);var Q=a(228);var Y=a(287);var J=a(58);var X={},Z=X.setFocusedWorkspace,$=X.focusNextWorkspace,ee=X.focusPreviousWorkspace;var te=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//,"https://login.microsoftonline.com/"];var ae=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive","files/import/onedrive/redirect",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/];var re=Object(K["b"])();function ne(){return Object(P["setScreenReaderEnabled"])(Object(h["isScreenReaderEnabled"])())}function ie(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object(J["isGantryUrl"])(t))return true;if(te.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return true;var a=Object(H["getTeamUrl"])(Object(W["d"])(e));var r=Object(J["parseUrl"])(t);var n=r.hostname;return ae.some(function(e){if(e instanceof RegExp&&Object(J["isValidSlackHostName"])(n)&&e.test(t))return t.startsWith(r.protocol+"//"+r.hostname);return e instanceof RegExp?t.startsWith(""+a)&&e.test(t):t.startsWith(""+a+e)})}function se(e,t,a,r){re.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:r});e(Object(s["a"])({channelId:t,messageTs:a,threadTs:r}))}function oe(e){var t=Object(L["a"])(e);var a=[];if(t){a=Object(i["take"])(Object(i["values"])(Object(q["b"])(e,t)),50);Object(f["isMac"])()||Object(f["isSSBAndAtLeastVersion"])("3.3.0")||(a=a.map(function(e){return e.subtype?e:Object(i["omit"])(e,"subtype")}))}return{user_id:Object(R["getCurrentUserId"])(e),msgs:a}}function le(){var e=void 0;var t=void 0;var a=void 0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(4===n.length){e=n[0];t=n[1];a=n[3]}else{e=n[0];t=n[1];a=n[2]}return Object(N["a"])({channelId:e,text:t,replyToTs:a})}function ce(e){return Object(U["b"])(e).name}function ue(e){try{var t=JSON.parse(Object(D["h"])(e,"sidebar_theme_custom_values"));return Object(Q["b"])(e)?n()({},t,Object(Q["a"])(t)):t}catch(e){return V["a"]}}function de(){var e=document.activeElement;var t=Object(w["b"])(e);return Object(w["d"])(e,t.start,t.length)}function pe(){return false}function me(e,t,a){switch(a){case"prefs":e(Object(A["a"])());break;case"shortcuts":e(Object(j["h"])());break;default:re.warn("openDialog failed, unrecognized dialog: "+a);break}}function he(){Object(z["a"])({bustCache:true})}function ve(e,t){Object(S["b"])();Object(k["b"])();E();e(Object(x["setActiveTeam"])(t))}var fe=t["a"]=n()({analytics:new v,nodrag:new b},O,{accessibilitySupportChanged:ne,canOpenURLInWindow:ie,closeCall:I["a"],focusNextWorkspace:$,focusPreviousWorkspace:ee,getCurrentUserId:R["getCurrentUserId"],getCurrentUserName:ce,getEnterpriseId:B["a"],getSelectedInputText:de,getThemeValues:ue,getTokenFromBootData:R["getTokenFromBootData"],getUserPref:D["h"],getWebappVersionUid:R["getWebappVersionUid"],handleDeepLinkWithArgs:_["g"],handleDeepLinkFromDesktop:T["b"],isOnBetaReleaseChannel:pe,maybeTickleMS:g["a"],notificationActivated:se,notificationClicked:s["a"],openDialog:me,openFromCmdF:M["b"],recentMessagesFromCurrentChannel:oe,reload:Y["b"],replyToNotification:le,setCurrentMemberPresence:F["setCurrentMemberPresence"],setFocusedWorkspace:Z,ssbChromeClicked:i["noop"],systemTextSettingsChanged:he,teamSelectionChanged:ve,track:G["c"],updateDownloadsView:y["b"],updateState:x["updateFromDesktop"]})},4504:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(5);var p=a.n(d);var m=a(4);var h=a.n(m);var v=a(7);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(0);var y=a(9);var k=a(2);var O=a(6);var C=a(23);var E=a(27);var S=a(54);var w=a(28);var I=a(35);var j=new O["b"]("enterprise_dashboard");var T={teamVisibility:_["b"].string,teamDomain:_["b"].string,available:_["b"].bool.isRequired,teamName:_["b"].string.isRequired,teamUrl:_["b"].string.isRequired};var A={teamVisibility:null,teamDomain:null};var N={teamName:"team_name",teamDomainName:"team_domain_name",teamVisibilityLabel:"team_visibility_label",openSlackBtn:"open_slack_btn",disabledOpenSlackBtn:"disabled_open_slack_btn"};var M=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"getWorkspaceVisibilityLabel",value:function e(){var t=this.props.teamVisibility;switch(t){case"open":return j.t("Open");case"unlisted":return j.t("Hidden");case"closed":return j.t("By Request");case"invite_only":return j.t("Invite Only");default:return t}}},{key:"renderOpenSlackBtn",value:function e(){var t=this.props,a=t.available,r=t.teamUrl;if(!r)return null;if(a)return n.a.createElement(E["d"],{type:"primary",size:"medium",href:r,className:"no_underline","data-qa":N.openSlackBtn},n.a.createElement("div",{className:"p-ent_overview__header_btn"},j.t("Open in Slack")),n.a.createElement(C["b"],{type:"external-link",size:"inherit",inline:true}));return n.a.createElement(S["c"],{tip:j.t("You are not a member of this workspace."),position:"bottom"},n.a.createElement("div",null,n.a.createElement(E["d"],{type:"primary",size:"medium",disabled:true,"data-qa":N.disabledOpenSlackBtn,className:"no_underline"},n.a.createElement("div",{className:"p-ent_overview__header_btn"},j.t("Open in Slack")),n.a.createElement(C["b"],{type:"external-link",size:"inherit",inline:true}))))}},{key:"render",value:function e(){var t=this.props,a=t.teamDomain,r=t.teamName;return n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("div",{className:"p-ent_team_overview__header"},n.a.createElement("h2",{className:"p-ent_overview__header_title","data-qa":N.teamName},r),n.a.createElement("div",{className:"p-ent_overview__header_domain"},a?n.a.createElement("span",{"data-qa":N.teamDomainName},a+".slack.com"):null),this.renderOpenSlackBtn()),n.a.createElement("div",{className:"p-ent_overview__header_subtitle","data-qa":N.teamVisibilityLabel},this.getWorkspaceVisibilityLabel()))}}]);return t}(r["PureComponent"]);M.displayName="TeamOverviewHeader";M.defaultProps=A;var P=function e(t,a){var r=a.teams,n=a.org;var i=r.team_settings_team_id;var s=Object(I["j"])(t,i);var o=Object(w["getTeamDomain"])(s);var l=Object(w["getTeamUrl"])(s);return{teamUrl:l,teamDomain:o,teamName:Object(w["getTeamDisplayName"])(s),teamVisibility:Object(w["getTeamDiscoverable"])(s),available:Object(k["get"])(n,"user.enterprise_user.teams",[]).indexOf(i)>-1}};var R=M;var x=Object(o["connect"])(P)(M);var D=a(921);var F=a(191);var L=a(3);var B=a.n(L);var U=a(37);var q=a.n(U);var W=a(30);var H=a(34);var G=a(14);var V="SEARCH_TEAM";var K={type:"is",value:"user"};var z={type:"or",clauses:[{type:"level",value:"admin"},{type:"level",value:"owner"},{type:"level",value:"primary_owner"}]};var Q=Object(W["a"])("Fetch workspace admins by query from the API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,n=void 0===r?"fetchWorkspaceAdmins":r,i=q()(a,["reason"]);var s=JSON.stringify({type:"and",clauses:[K,z]});return e(Object(H["a"])({method:"search.team",args:B()({query:s},i),reason:n})).catch(function(e){var a="failed to call search.team with query "+s+": "+JSON.stringify(e&&e.data);e&&e.data&&"post_failed"===e.data.error?Object(G["a"])({getState:t}).warn(V,a):Object(G["a"])({getState:t}).error(V,a);return{items:[]}})});Q.meta={name:"fetchWorkspaceAdmins",key:"fetchersEnterpriseSearchTeamFetchWorkspaceAdmins",description:"Fetch workspace admins by query from the API"};Q.propTypes={options:_["b"].object};var Y={DEFAULT_WORKSPACE_QUERY:K,DEFAULT_ADMINS_QUERY:z};var J=new O["b"]("enterprise_dashboard");var X={navigateToMemberProfile:_["b"].func,fetchWorkspaceAdmins:_["b"].func,teams:_["b"].object};var Z={navigateToMemberProfile:k["noop"],fetchWorkspaceAdmins:k["noop"],teams:{}};function $(e){if(!e)return"";if(e.is_primary_owner)return"Primary Owner";if(e.is_owner)return"Workspace Owner";if(e.is_admin)return"Workspace Admin";return"Member"}var ee={items:[{value:function e(t){var a=t.profile.image_72;if(a)return n.a.createElement("div",{"data-member-id":t.id},n.a.createElement("div",{className:"p-team_overview_table__avatar_image"},n.a.createElement(F["a"],{size:36,imageUrl:a})),t.real_name&&n.a.createElement("div",null,n.a.createElement("b",{className:"p-team_overview_table__avatar_realname"},t.real_name)),n.a.createElement("div",{className:"p-team_overview_table__avatar_name"},"@",t.profile&&t.profile.display_name||t.name));return n.a.createElement("b",{"data-member-id":t.id},t.name)},className:"p-team_overview_table__item p-team_overview_table__user_profile"},{value:function e(t){if(!t)return"";return n.a.createElement("b",{"data-member-id":t.id},$(t))},className:"p-team_overview_table__item p-team_overview_table__user_type"}]};var te=function(e){g()(t,e);function t(){p()(this,t);var e=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={members:[],isLoading:true,nextCursorMark:null};e.fetchTeamDetails=e.fetchTeamDetails.bind(e);e.parseTeamDetails=e.parseTeamDetails.bind(e);e.parseMembers=e.parseMembers.bind(e);e.onMemberRowClick=e.onMemberRowClick.bind(e);e.onRequestNextPage=e.onRequestNextPage.bind(e);return e}h()(t,[{key:"componentDidMount",value:function e(){this.fetchTeamDetails()}},{key:"onMemberRowClick",value:function e(t){var a=this.props.navigateToMemberProfile;if(!a)return;a(t)}},{key:"onRequestNextPage",value:function e(){if(!this.state.nextCursorMark)return;this.fetchTeamDetails()}},{key:"fetchTeamDetails",value:function e(){var t=this;var a=this.props.teams&&this.props.teams.team_settings_team_id;var r=this.state.nextCursorMark;var n={isLoading:true};this.setState(n);var i={team:a,reason:"admin_dashboard_team_overview",count:100};r&&(i.cursor_mark=r);this.props.fetchWorkspaceAdmins(i).then(function(e){return t.parseTeamDetails(e)})}},{key:"parseTeamDetails",value:function e(t){var a={teamData:t.team,adminOwnerCount:t.num_found,members:this.parseMembers(t.items),isLoading:false,nextCursorMark:t.items.length&&t.next_cursor_mark};this.setState(a)}},{key:"parseMembers",value:function e(t){var a=this.state.members;if(!t||!t.length)return a;var r=a.concat(t);return r}},{key:"render",value:function e(){var t=this;var a=this.state,i=a.isLoading,s=a.members,o=a.adminOwnerCount;var l=0;var c=s&&s.map(function(e){l+=1;var a="member"+l;var r=0;return{id:"row_"+a,onClick:t.onMemberRowClick,items:ee.items.map(function(t){r+=1;return{id:"row_"+a+"_col_"+r,value:t.value(e),className:t.className}})}});return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-team_overview_table__header"},J.t("{count, plural, =1 {# Workspace Admin} other {# Workspace Admins}}",{count:o||0})),n.a.createElement("div",{className:"p-team_overview_table"},n.a.createElement(D["b"],{autoHeight:true,headers:[{id:"header_0",value:J.t("Admin Name")},{id:"header_1",value:J.t("Admin Type")}],isLoading:i,onRequestNextPage:this.onRequestNextPage,rows:c,rowClassName:"p-team_overview_table__row",rowHeaderItemClassName:"p-team_overview_table__row_header c-table_view_hover_disabled",listClassName:"p-team_overview_table__list",useKeyboardNavigableTable:true})))}}]);return t}(n.a.PureComponent);te.displayName="TeamOverviewTable";te.defaultProps=Z;var ae={fetchWorkspaceAdmins:Q};var re=Object(o["connect"])(null,ae)(te);var ne=a(15);var ie=a(3272);var se=a(3274);var oe={label:_["b"].string,value:_["b"].number};var le={label:"[Enter label here]",value:0};var ce=function e(t){var a=t.label,r=t.value;return n.a.createElement("div",{className:"p-team_overview__details_pane"},n.a.createElement("h1",{className:"p-team_overview__details_pane__value"},r),n.a.createElement("p",{className:"p-team_overview__details_pane__label"},a))};ce.displayName="DetailsPane";ce.displayName="DetailsPane";ce.defaultProps=le;var ue=ce;var de=a(3276);var pe=new O["b"]("enterprise_dashboard");var me=function e(t,a){if(!a)return null;return pe.t("{membersCount, plural, =0 {No Members} =1 {Member} other {Members}}",{membersCount:t})};var he={featureM11nOrgTeamOverview:_["b"].bool.isRequired,membersCount:_["b"].number.isRequired};var ve=function e(t){var a=t.membersCount,r=t.featureM11nOrgTeamOverview;return n.a.createElement("div",{className:"p-team_overview__members_count","data-qa":"team-overview-members-count"},n.a.createElement(ue,{label:me(a,r),value:a}))};ve.displayName="MembersCount";ve.displayName="MembersCount";var fe=ve;var be=new O["b"]("enterprise_team_overview");var ge=function e(t,a,r){if(!r)return null;var n=t||be.t("IDP");return be.t("{idpGroupsCount, plural, =0 {No {idp} Groups} =1 {{idp} Group} other {{idp} Groups}}",{idpGroupsCount:a,idp:n})};var _e={featureM11nOrgTeamOverview:_["b"].bool.isRequired,idpGroupsCount:_["b"].number.isRequired,idpGroupsLabel:_["b"].string.isRequired};var ye=function e(t){var a=t.idpGroupsCount,r=t.idpGroupsLabel,i=t.featureM11nOrgTeamOverview;return n.a.createElement(ue,{"data-qa":"team-overview-groups-count",label:ge(r,a,i),value:a})};ye.displayName="IdpGroupsCount";ye.displayName="IdpGroupsCount";var ke=ye;var Oe={featureM11nOrgTeamOverview:_["b"].bool.isRequired,membersCount:_["b"].number.isRequired,idpGroupsCount:_["b"].number.isRequired,idpGroupsLabel:_["b"].string.isRequired};var Ce=function e(t){var a=t.featureM11nOrgTeamOverview,r=t.membersCount,i=t.idpGroupsCount,s=t.idpGroupsLabel;return n.a.createElement("div",{className:"p-team_overview__details_wrapper"},n.a.createElement(fe,{featureM11nOrgTeamOverview:a,membersCount:r}),n.a.createElement(ke,{featureM11nOrgTeamOverview:a,idpGroupsCount:i,idpGroupsLabel:s}))};Ce.displayName="DetailsWrapper";Ce.displayName="DetailsWrapper";var Ee=Ce;var Se=Object(ne["b"])(function(e,t){var a=t.enterprise,r=void 0===a?{}:a;return r});Se.meta={name:"getEnterpriseFromOrg",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetEnterpriseFromOrg"};var we=Object(ne["b"])(function(e,t){var a=Se(e,t).sso_provider||{};return a.label||""});we.meta={name:"getSSOProviderLabel",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetSSOProviderLabel"};var Ie=Object(ne["b"])(function(e,t){var a=t.teams,r=t.team_settings_team_id;return a.find(function(e){return e.id===r})||{}});Ie.meta={name:"getSelectedTeam",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetSelectedTeam"};var je=function e(t,a){var r=a.teams,n=a.org;var i=Ie(t,r),s=i.count_members_all,o=void 0===s?0:s,l=i.count_groups_enterprise,c=void 0===l?0:l;return{featureM11nOrgTeamOverview:Object(y["isFeatureEnabled"])(t,"feature_m11n_org_team_overview"),idpGroupsLabel:we(t,n),membersCount:o,idpGroupsCount:c}};var Te=Object(o["connect"])(je)(Ee);var Ae=a(3278);var Ne={featureM11nOrgTeamOverview:_["b"].bool.isRequired,teams:_["b"].object.isRequired,org:_["b"].object.isRequired};var Me=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return this.props.featureM11nOrgTeamOverview&&n.a.createElement("div",{"data-qa":"team_overview"},n.a.createElement(x,this.props),n.a.createElement(Te,{teams:this.props.teams,org:this.props.org}),n.a.createElement("div",{"data-qa":"team_overview_table"},n.a.createElement(re,this.props)))}}]);return t}(n.a.PureComponent);Me.displayName="TeamOverview";var Pe=function e(t){return{featureM11nOrgTeamOverview:Object(y["isFeatureEnabled"])(t,"feature_m11n_org_team_overview")}};var Re=Object(o["connect"])(Pe)(Me);Object(c["a"])("interop.teamOverview",{render:function e(t,a,r){if(!t)throw new Error("team overview render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(Re,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4505:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(342);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(2);var _=a(6);var y=a(25);var k=a(35);var O=a(16);var C=a(28);var E=a(647);var S=a(230);var w=a(27);var I=a(23);var j=a(246);function T(e){return!!Object(g["has"])(e,"activeCall")}var A=a(278);var N=a(1375);var M=a(462);var P=a(3510);var R=new _["b"]("incoming_call_window");var x=function(e){b()(t,e);function t(){d()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"componentDidMount",value:function e(){Object(N["a"])(M["g"],{loop:true})}},{key:"componentWillUnmount",value:function e(){Object(N["b"])(M["g"])}},{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return n.a.createElement(I["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return n.a.createElement(I["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,a=t.imageUrl,r=t.imageUrl2x;if(a||r)return n.a.createElement("img",{className:"p-incoming_call__member_image",src:a||r,srcSet:this.getSrcSetAttribute(r),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__external_team_banner"},n.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),n.a.createElement(S["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},n.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=R.t("is calling you");return n.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return n.a.createElement("div",{className:"p-incoming_call__button_container"},n.a.createElement(w["d"],{type:"danger",size:"medium",onClick:function e(){return t.props.onRejectCall(t.props.callId)},className:"p-incoming_call__button","aria-label":"Decline"},n.a.createElement(I["b"],{type:"times"})),n.a.createElement(w["d"],{type:"primary",size:"medium",onClick:function e(){return t.props.onAcceptCall(t.props.callId)},className:"p-incoming_call__button","aria-label":"Accept"},n.a.createElement(I["b"],{type:"phone"})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),n.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]);return t}(r["PureComponent"]);x.displayName="IncomingCall";function D(e,t){if(T(e))return e.activeCall.incomingInviterUserId;var a=Object(A["b"])(e,t).incomingInvite;if(!a){Object(j["d"])("No incoming invite");return}return a.userId}var F=function e(t,a){var r=D(t,a.callId);if(!r)throw new Error("No inviter user id for callId: "+a.callId);var n=Object(y["e"])(t,r);var i=Object(O["getMemberTeamId"])(n);var s=Object(k["j"])(t,i);var o=Object(O["isExternal"])(n);var l=Object(O["getPrefCompliantMemberName"])(t,n);var c=Object(C["getTeamDisplayName"])(s);var u=Object(g["get"])(n,"profile.avatar_hash");var d=Object(E["a"])({size:200,teamId:i,memberId:r,avatarHash:u});return{avatarUrls:d,prefCompliantMemberName:l,memberTeamId:i,externalTeamName:c,isRestricted:Object(O["isRestricted"])(n),isUltraRestricted:Object(O["isUltraRestricted"])(n),isExternal:o}};var L={mapStateToProps:F};Object.defineProperty(L,"mapStateToProps",{get:function e(){return F},set:function e(t){F=t}});var B=Object(i["connect"])(F)(x);var U=a(884);var q=a(14);var W=a(3512);var H=a(840);var G=a(245);var V=a(114);var K=a(26);var z=a.n(K);var Q=a(10);var Y=a.n(Q);var J=a(3);var X=a.n(J);var Z=a(163);var $=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"];var ee=function(){function e(){d()(this,e);this.startIndex=Math.floor(Math.random()*($.length-1))}m()(e,[{key:"getSelfColor",value:function e(){return $[this.startIndex]}},{key:"getColorForJoinIndex",value:function e(t){return $[(this.startIndex+1+t)%$.length]}}]);return e}();var te=a(34);var ae=a(485);var re=Object(V["b"])("Sends an invite to the web API from the call window",function(e,t,a){var r=a.id,n=a.invitedUserIds;Object(j["d"])(Object(ae["a"])(),"We expect this to run in a call window context");return Promise.all([n.map(function(t){return e(Object(te["a"])({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:r,should_share:true,cancelable:true}}))})])});re.meta={name:"sendInvites",key:"appCallsFetchersSendInvitesSendInvites",description:"Sends an invite to the web API from the call window"};var ne=new ee;function ie(e,t){return"Could not "+t+": problem with peerId "+e+"."}function se(e){return"self"===e.id}function oe(e){return se(e)}function le(e){return se(e)}var ce=Object(V["a"])("Add a remote peer");ce.meta={name:"addRemotePeer",key:"appCallsReduxPeersStoreAddRemotePeer",description:"Add a remote peer"};var ue=Object(V["a"])("Remove a remote peer");ue.meta={name:"removeRemotePeer",key:"appCallsReduxPeersStoreRemoveRemotePeer",description:"Remove a remote peer"};var de=Object(V["a"])("Update a peer");de.meta={name:"updatePeer",key:"appCallsReduxPeersStoreUpdatePeer",description:"Update a peer"};var pe=Object(V["a"])("Add an invited user");pe.meta={name:"addInvitedUser",key:"appCallsReduxPeersStoreAddInvitedUser",description:"Add an invited user"};var me=Object(V["a"])("Update a response for an invited user");me.meta={name:"updateResponseForInvitedUser",key:"appCallsReduxPeersStoreUpdateResponseForInvitedUser",description:"Update a response for an invited user"};var he=Object(V["a"])("Remove an invited user");he.meta={name:"markInviteExpired",key:"appCallsReduxPeersStoreMarkInviteExpired",description:"Remove an invited user"};var ve=Object(V["a"])("Update a peer's connection");ve.meta={name:"setRemotePeerIsConnected",key:"appCallsReduxPeersStoreSetRemotePeerIsConnected",description:"Update a peer's connection"};var fe=Object(V["a"])("Update the screen share of a peer");fe.meta={name:"setRemotePeerScreenshareDoNotDispatch",key:"appCallsReduxPeersStoreSetRemotePeerScreenshareDoNotDispatch",description:"Update the screen share of a peer"};var be=Object(V["a"])("Set the ID of the peer selected by the user");be.meta={name:"setUserSelectedPeerId",key:"appCallsReduxPeersStoreSetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var ge=Object(V["a"])("Set the ID of the peer selected by the user");ge.meta={name:"unsetUserSelectedPeerId",key:"appCallsReduxPeersStoreUnsetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var _e=Object(V["a"])("Set the ID of the active speaker");_e.meta={name:"setSpeakingPeerId",key:"appCallsReduxPeersStoreSetSpeakingPeerId",description:"Set the ID of the active speaker"};var ye=Object(V["a"])("Add an emoji reaction");ye.meta={name:"addEphemeralMessage",key:"appCallsReduxPeersStoreAddEphemeralMessage",description:"Add an emoji reaction"};var ke=Object(V["a"])("Remove an emoji reaction");ke.meta={name:"removeEmojiReaction",key:"appCallsReduxPeersStoreRemoveEmojiReaction",description:"Remove an emoji reaction"};var Oe=Object(V["a"])("Send an emoji reaction");Oe.meta={name:"sendEphemeralMessage",key:"appCallsReduxPeersStoreSendEphemeralMessage",description:"Send an emoji reaction"};var Ce={self:{id:"self",isMicrophoneEnabled:true,isDrawEnabled:true,reactionColor:ne.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0};var Ee=Object(V["c"])({},Ce,{storeKey:"peers",persistenceEnabled:false}).on(ce,function(e,t){Object(j["d"])(!e.byId[t.id],ie(t.id,"addRemotePeer"));var a=e.remotePeerJoinedCounter;return X()({},e,{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:tt(e,t),byId:X()({},e.byId,Y()({},t.id,X()({},t,{joinIndex:a,reactionColor:ne.getColorForJoinIndex(a)})))},e.invitedUsers[t.userId]?{invitedUsers:X()({},e.invitedUsers,Y()({},t.userId,X()({},e.invitedUsers[t.userId],{isExpired:true})))}:null)}).on(ue,function(e,t){var a=e.byId[t];Object(j["d"])(!!a,"Peer should exist in order to remove");return X()({},e,{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:X()({},Object(g["omit"])(e.byId,t)),leftById:X()({},e.leftById,Y()({},a.id,X()({},a)))})}).on(pe,function(e,t){var a=t.userId,r=t.isCancelable,n=void 0===r||r;return X()({},e,{invitedUsers:X()({},e.invitedUsers,Y()({},a,{response:"pending",isCancelable:n,isExpired:false}))})}).on(me,function(e,t){var a=t.userId,r=t.response;return X()({},e,{invitedUsers:X()({},e.invitedUsers,Y()({},a,X()({},e.invitedUsers[a],{response:r})))})}).on(he,function(e,t){return X()({},e,{invitedUsers:X()({},e.invitedUsers,Y()({},t,X()({},e.invitedUsers[t],{isExpired:true})))})}).on(de,function(e,t){if(oe(t))return X()({},e,{self:X()({},e.self,t,!Object(g["isUndefined"])(t.isScreenshareEnabled)&&{isHostDrawEnabled:false})});Object(j["d"])(!!e.byId[t.id],ie(t.id,"updatePeer"));return X()({},e,{byId:X()({},e.byId,Y()({},t.id,X()({},e.byId[t.id],t)))})}).on(fe,function(e,t){Object(j["d"])(!!e.byId[t.id],ie(t.id,"setRemotePeerScreenshare"));return X()({},e,{lastRemoteScreensharePeerId:tt(e,t),byId:X()({},e.byId,Y()({},t.id,X()({},e.byId[t.id],t)))})}).on(ve,function(e,t){var a=t.id,r=t.isConnected;Object(j["d"])(!!e.byId[a],ie(a,"setRemotePeerIsConnected"));return X()({},e,!r&&{lastRemoteScreensharePeerId:tt(e,{id:a,isScreenshareEnabled:false})},{byId:X()({},e.byId,Y()({},a,X()({},e.byId[a],{isConnected:r},!r&&{isCameraEnabled:false,isScreenshareEnabled:false})))})}).on(be,function(e,t){"self"!==t&&Object(j["d"])(!!e.byId[t],ie(t,"setUserSelectedPeerId"));return X()({},e,{userSelectedPeerId:t})}).on(ge,function(e){return X()({},e,{userSelectedPeerId:void 0})}).on(_e,function(e,t){Object(j["d"])(!!e.byId[t],ie(t,"setSpeakingPeerId"));return X()({},e,{speakingPeerId:t})}).on(ye,function(e,t){var a=e.reacjiShownCounter+1;return X()({},e,{reacjiShownCounter:a,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:a,isEmoji:t.isEmoji}].concat(z()(e.reacjis))})}).on(ke,function(e,t){var a=e.reacjis.filter(function(e){return e.id!==t});return X()({},e,{reacjis:a})});var Se=Ee;var we=Object(V["d"])(function(e,t){var a=e.peers;if("self"===t)return a.self;var r=a.byId[t];Object(j["d"])(!!r,ie(t,"getPeer"));return r});we.meta={name:"getPeer",key:"appCallsReduxPeersStoreGetPeer"};var Ie=Object(V["d"])(function(e,t){var a=e.peers.byId[t];Object(j["d"])(!!a,ie(t,"getPeer"));return a});Ie.meta={name:"getRemotePeer",key:"appCallsReduxPeersStoreGetRemotePeer"};var je=Object(V["d"])(function(e){return e.peers.self});je.meta={name:"getSelf",key:"appCallsReduxPeersStoreGetSelf"};var Te=Object(V["d"])(function(e,t){if("self"===t)return e.peers.self;return Ae(e,t)});Te.meta={name:"getMaybeLeftPeer",key:"appCallsReduxPeersStoreGetMaybeLeftPeer"};var Ae=Object(V["d"])(function(e,t){var a=e.peers;var r=a.byId[t];var n=a.leftById[t];Object(j["d"])(!!r||!!n,"No record of peer ever existing with id: "+t);return r||n});Ae.meta={name:"getMaybeLeftRemotePeer",key:"appCallsReduxPeersStoreGetMaybeLeftRemotePeer"};var Ne=Object(V["d"])(function(e){return e.peers.leftById});Ne.meta={name:"getLeftPeers",key:"appCallsReduxPeersStoreGetLeftPeers"};var Me=Object(V["d"])(function(e){return e.peers.invitedUsers});Me.meta={name:"getAllInvitedUsers",key:"appCallsReduxPeersStoreGetAllInvitedUsers"};var Pe=Object(Z["createSelector"])(Me,function(e){return Object(g["pickBy"])(e,function(e){var t=e.isExpired;return!t})});var Re=Object(Z["createSelector"])(Me,function(e){return Object.keys(e)});var xe=Object(Z["createSelector"])(Pe,function(e){return Object.keys(e)});var De=Object(Z["createSelector"])(Me,function(e){return 0!==Object(g["size"])(e)&&Object(g["every"])(e,function(e){return e.response===G["c"].DoNotDisturb})});var Fe=Object(V["d"])(function(e){return e.peers.byId});Fe.meta={name:"getRemotePeers",key:"appCallsReduxPeersStoreGetRemotePeers"};var Le=Object(Z["createSelector"])(Fe,function(e){return Object(g["map"])(e,"userId")});var Be=Object(Z["createSelector"])(Fe,function(e){return Object(g["orderBy"])(e,"joinIndex","desc")});var Ue=Object(Z["createSelector"])(Be,function(e){return Object(g["map"])(e,"id")});var qe=Object(Z["createSelector"])(Be,function(e){return Object(g["map"])(e,"userId")});var We=Object(V["d"])(function(e){return!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length});We.meta={name:"getHasRemotePeerEverJoined",key:"appCallsReduxPeersStoreGetHasRemotePeerEverJoined"};var He=Object(Z["createSelector"])(Fe,function(e){return Object(g["some"])(e,function(e){var t=e.isScreenshareEnabled;return!!t})});var Ge=Object(Z["createSelector"])(Pe,function(e){return Object(g["reduce"])(e,function(e,t,a){var r=t.response,n=t.isExpired;("pending"===r||r===G["c"].Accept&&!n)&&e.push(a);return e},[])});var Ve=Object(Z["createSelector"])(Pe,function(e){return Object(g["filter"])(e,function(e){var t=e.isCancelable;return t})});var Ke=Object(Z["createSelector"])(Me,Fe,Ne,function(e){return e.activeCall.conversationId},function(e,t,a,r){return!Object(g["size"])(t)&&!Object(g["size"])(a)&&Object(g["size"])(e)&&!!r&&!Object(G["k"])(r)&&Object(g["every"])(e,function(e){return"pending"!==e.response&&e.response!==G["c"].Accept})});var ze=Object(V["d"])(function(e){return Xe(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0])});ze.meta={name:"getActivePeerId",key:"appCallsReduxPeersStoreGetActivePeerId"};var Qe=Object(Z["createSelector"])(Ge,function(e){return e[0]});var Ye=Object(V["d"])(function(e){var t=ze(e);if(!t)return false;return!!we(e,t).isScreenshareEnabled});Ye.meta={name:"getIsActivePeerScreenSharing",key:"appCallsReduxPeersStoreGetIsActivePeerScreenSharing"};var Je=Object(V["d"])(function(e){var t=ze(e);if(!t)return false;return!!we(e,t).isCameraEnabled});Je.meta={name:"getIsActivePeerCameraEnabled",key:"appCallsReduxPeersStoreGetIsActivePeerCameraEnabled"};var Xe=Object(V["d"])(function(e){return e.peers.userSelectedPeerId});Xe.meta={name:"getUserSelectedPeerId",key:"appCallsReduxPeersStoreGetUserSelectedPeerId"};var Ze=Object(V["d"])(function(e){var t=je(e);if(!t.isScreenshareEnabled||!t.screens)return;return t.screens[t.thumbnailIndex||0]});Ze.meta={name:"getCurrentlySharedScreen",key:"appCallsReduxPeersStoreGetCurrentlySharedScreen"};var $e=Object(V["d"])(function(e){return e.peers.reacjis});$e.meta={name:"getReactions",key:"appCallsReduxPeersStoreGetReactions"};var et=Object(V["d"])(function(e,t){return Object(O["getPrefCompliantMemberNameById"])(e,Ae(e,t).userId)});et.meta={name:"getMemberNameByRemotePeerId",key:"appCallsReduxPeersStoreGetMemberNameByRemotePeerId"};function tt(e,t){var a=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId===t.id&&!a)return;return a&&t.id||e.lastRemoteScreensharePeerId}var at=Object(V["e"])("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",function(e,t,a){var r=a.id,n=a.isScreenshareEnabled;e(fe({id:r,isScreenshareEnabled:n}));n&&e(de({id:"self",isScreenshareEnabled:false}))});at.meta={name:"setRemoteScreenshareAndDisableForSelf",key:"appCallsReduxPeersStoreSetRemoteScreenshareAndDisableForSelf",description:"Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share"};var rt=Object(V["e"])("Invite new members to an existing call",function(e,t,a){var r=t();if(!Object(j["b"])(r.activeCall.id,"Must have an active call to send an invite"))return;a.forEach(function(t){return e(pe({userId:t}))});e(re({id:r.activeCall.id,invitedUserIds:a}))});rt.meta={name:"inviteMembersToCall",key:"appCallsReduxPeersStoreInviteMembersToCall",description:"Invite new members to an existing call"};var nt=a(1279);var it=Object(V["a"])("Update part or all of the call");it.meta={name:"update",key:"appCallsReduxActiveCallStoreUpdate",description:"Update part or all of the call"};var st=Object(V["a"])("Update the active call token");st.meta={name:"setServerToken",key:"appCallsReduxActiveCallStoreSetServerToken",description:"Update the active call token"};var ot=Object(V["a"])("Update the elapsed call time");ot.meta={name:"tickCallTime",key:"appCallsReduxActiveCallStoreTickCallTime",description:"Update the elapsed call time"};var lt=Object(V["a"])("Store gleaned contextual information from the url");lt.meta={name:"setInitialContext",key:"appCallsReduxActiveCallStoreSetInitialContext",description:"Store gleaned contextual information from the url"};var ct=Object(V["c"])({},{hasJoined:false,hasSelfConnected:false,hasRemotePeerConnected:false,hasVideoBeenEnabled:false,elapsedDisplayTime:Object(nt["a"])(0)},{storeKey:"activeCall",persistenceEnabled:false}).on(lt,function(e,t){var a=t.callOrConversationId,r=t.inviterUserId;var n=Object(G["g"])(a);return X()({},e,{id:n?a:void 0,conversationId:n?void 0:a,incomingInviterUserId:r,incomingInviteResponse:Object(U["a"])()?void 0:G["c"].Accept})}).on(it,function(e,t){return X()({},e,t)}).on(ot,function(e){if(!e.callStartedTimestamp)return e;return X()({},e,{elapsedDisplayTime:Object(nt["a"])(Date.now()-1e3*e.callStartedTimestamp)})}).on(st,function(e,t){var a=t.token,r=t.tokenExpiry;if(!e.server){Object(j["d"])("Cannot set server token without a server");return e}return X()({},e,{server:X()({},e.server,{token:a,tokenExpiry:r})})}).on(de,function(e,t){return X()({},e,{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!(t.isCameraEnabled||oe(t)&&t.isScreenshareEnabled),hasSelfConnected:e.hasSelfConnected||!!(oe(t)&&t.isConnected)})}).on(ve,function(e,t){return X()({},e,{hasRemotePeerConnected:e.hasRemotePeerConnected||!!t.isConnected})}).on(fe,function(e,t){return X()({},e,{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!t.isScreenshareEnabled})});var ut=ct;var dt=function e(t){return!!t.activeCall.incomingInviterUserId&&!t.activeCall.incomingInviteResponse};var pt=function e(t){return!!t.activeCall.incomingInviterUserId};var mt=function e(t){return!!t.activeCall.conversationId&&Object(G["i"])(t.activeCall.conversationId)};var ht=function e(t){return t.activeCall.id};var vt=function e(t){return t.activeCall.hasSelfConnected&&t.activeCall.hasRemotePeerConnected};var ft=new _["b"]("calls");var bt=Object(V["d"])(function(e){var t=e.activeCall.incomingInviterUserId&&Object(O["getPrefCompliantMemberNameById"])(e,e.activeCall.incomingInviterUserId);var a=e.activeCall.name;var r=e.activeCall.conversationId;var n=e.activeCall.hasJoined;var i=qe(e);var s=i.length;var o=dt(e);var l=Re(e);if(a&&n)return a;if(o)return ft.t("{inviterName} is calling you",{inviterName:t});if(r&&!s&&l.length){var c=Object(O["getPrefCompliantMemberNameById"])(e,l[0]);var u=l.length-1;if(l.length>1)return ft.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:c,remainingInvitedUserCount:u,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"});return ft.t("Calling {namedInvitedUser}",{namedInvitedUser:c})}if(!s)return ft.t("Slack call, waiting for others to join");var d=Object(O["getPrefCompliantMemberNameById"])(e,i[0]);var p=i.length-1;if(i.length>1)return ft.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:d,remainingJoinedPeers:p,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"});return ft.t("Slack call with {namedPeer}",{namedPeer:d})});bt.meta={name:"getCallWindowTitle",key:"callsReduxSelectorsGetCallWindowTitleGetCallWindowTitle"};var gt=Object(V["d"])(function(e){var t=Object(A["c"])(e);var a=t&&t.incomingInvite&&Object(O["getPrefCompliantMemberNameById"])(e,t.incomingInvite.userId);return a?ft.t("{inviterName} is calling you",{inviterName:a}):ft.t("Incoming call")});gt.meta={name:"getIncomingCallAriaLabelForBrowser",key:"callsReduxSelectorsGetCallWindowTitleGetIncomingCallAriaLabelForBrowser"};var _t=function e(t){var a=t.invitingCall,r=t.onAcceptCall,i=t.onRejectCall,s=t.callTitle;Object(U["a"])()&&Object(q["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!a)return null;var o={content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}};return n.a.createElement(c.a,{isOpen:true,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:true,shouldReturnFocusAfterClose:true,style:o,contentLabel:s},n.a.createElement("div",{className:"p-browser_incoming_call"},n.a.createElement(B,{callId:a,onAcceptCall:r,onRejectCall:i})))};var yt=function e(t){var a=Object(A["c"])(t);var r=gt(t);return{invitingCall:a&&a.id,callTitle:r}};var kt=function e(t){return{onAcceptCall:function e(a){return t(Object(H["a"])(a))},onRejectCall:function e(a){return t(Object(H["b"])({id:a,response:G["c"].Reject}))}}};var Ot=Object(i["connect"])(yt,kt)(_t);var Ct=a(161);var Et=function e(t,a){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(Ct["a"],null,n.a.createElement(Ot,null))),a)};var St=Et;var wt=a(46);Object(wt["a"])("interop.mountBrowserIncomingCall",St)},4507:function(e,t,a){"use strict";a.r(t);var r=a(657);var n=a(658);var i=a(659);var s=a(660);var o=a(661);var l=a(662);var c=a(663);var u=a(664);var d=a(665);var p=a(666);var m=a(667);var h=a(668);var v=a(669);var f=a(670);var b=a(671);var g=a(672);var _=a(673);var y=a(674);var k=a(675);var O=a(676);var C=a(677);var E=a(678);var S=a(679);var w=a(680);var I=a(681);var j=a(682);var T=a(683);var A=a(684);var N=a(685);var M=a(686);var P=a(687);var R=a(688);var x=a(689);var D=a(690);var F=a(691);var L=a(692);var B=a(693);var U=a(694);var q=a(695);var W=a(696);var H=a(697);var G=a(698);var V=a(699);var K=a(700);var z=a(701);var Q=a(702);var Y=a(703);var J=a(704);var X=a(705);var Z=a(706);var $=a(707);var ee=a(708);var te=a(709);var ae=a(710);var re=a(711);var ne=a(712);var ie=a(713);var se=a(714);var oe=a(715);var le=a(554);var ce=a(716);var ue=a(717);var de=a(718);var pe=a(719);var me=a(720);var he=a(721);var ve=a(722);var fe=a(723);var be=a(724);var ge=a(725);var _e=a(726);var ye=a(727);var ke=a(728);var Oe=a(729);var Ce=a(730);var Ee=a(731);var Se=a(732);var we=a(733);var Ie=a(734);var je=a(735);var Te=a(736);var Ae=a(737);var Ne=a(738);var Me=a(739);var Pe=a(740);var Re=a(741);var xe=a(742);var De=a(743);var Fe=a(744);var Le=a(745);var Be=a(746);var Ue=a(747);var qe=a(748);var We=a(749);var He=a(1);var Ge=a.n(He);var Ve=a(85);var Ke=a.n(Ve);var ze=a(526);var Qe=a(3);var Ye=a.n(Qe);var Je=a(5);var Xe=a.n(Je);var Ze=a(4);var $e=a.n(Ze);var et=a(7);var tt=a.n(et);var at=a(8);var rt=a.n(at);var nt=a(12);var it=a(13);var st=a.n(it);var ot=a(0);var lt=a(6);var ct=a(9);var ut=a(203);var dt=a(82);var pt=a(21);var mt=a(69);var ht=a(116);var vt=a(23);var ft=a(54);var bt=a(39);var gt=a(18);var _t=a(2);var yt=a(31);var kt=a(1943);var Ot=a(38);var Ct=a(129);var Et=a(1143);var St=a(152);var wt=a(11);var It=a(1209);var jt=a(606);var Tt=a(581);var At=a(2074);var Nt=a(1315);var Mt=a(1870);var Pt=new lt["b"]("do_not_disturb");var Rt={inDndBySnooze:ot["b"].bool.isRequired,snoozeNotifications:ot["b"].func.isRequired,endDndSnooze:ot["b"].func.isRequired,endDndSchedule:ot["b"].func.isRequired,snoozeEndTs:ot["b"].number,dndEndTs:ot["b"].number,do24hrTime:ot["b"].bool,currentChannel:ot["b"].object,menuProps:ot["b"].object,openPrefsModal:ot["b"].func,openDndDialog:ot["b"].func,openChannelNotificationPrefsModal:ot["b"].func,clogger:ot["b"].object,setUserPrefByApi:ot["b"].func,showNotificationScheduleNewBadge:ot["b"].bool,featureGranularDnd:ot["b"].bool};var xt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},menuProps:{},openPrefsModal:_t["noop"],openDndDialog:_t["noop"],openChannelNotificationPrefsModal:_t["noop"],clogger:{track:_t["noop"]},showNotificationScheduleNewBadge:false,setUserPrefByApi:_t["noop"],featureGranularDnd:false};var Dt=function(e){rt()(t,e);function t(e){Xe()(this,t);var a=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(a);a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(a);return a}$e()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderDndMenuHeader",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureGranularDnd;var o=a?r:n;var l=Object(It["b"])(o,{do24hrTime:i});var c=st()({"p-dnd_menu__snooze_header":a||s,"p-dnd_menu__schedule_header":!a&&!s});return Ge.a.createElement("div",{className:c},Ge.a.createElement("div",{className:"p-dnd_menu__header_status"},Ge.a.createElement("div",null,Ge.a.createElement("strong",null,s?Pt.t("Do Not Disturb"):Pt.t("Do Not Disturb: ON"))),Ge.a.createElement("div",null,l)))}},{key:"renderSubmenu",value:function e(t){var a=this;var r=this.props.clogger;return Ge.a.createElement(mt["f"],Ye()({},t,{width:200}),Ge.a.createElement(mt["b"],{label:Pt.t("30 minutes"),onSelected:function e(){var t=30;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:30m"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_30_MINUTES,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("1 hour"),onSelected:function e(){var t=60;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:1hr"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_1_HOUR,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("2 hours"),onSelected:function e(){var t=120;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:2hr"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_2_HOURS,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("4 hours"),onSelected:function e(){var t=240;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:4hr"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_4_HOURS,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("Until tomorrow"),onSelected:function e(){var t=Object(It["d"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:tomorrow"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_TOMORROW,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("Until next week"),onSelected:function e(){var t=Object(It["c"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:week"});r.track(gt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:gt["i"].DURATION_NEXT_WEEK,dnd_snooze_type:gt["j"].SNOOZE_ADJUST})}}),Ge.a.createElement(mt["b"],{label:Pt.t("Custom\u2026"),onSelected:function e(){a.props.openDndDialog();r.track(gt["l"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.featureGranularDnd;if(a||r)return Ge.a.createElement(Et["a"],{label:Pt.t("Adjust time"),renderSubmenu:this.renderSubmenu});return Ge.a.createElement(mt["b"],{label:Pt.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(wt["isIm"])(a))return null;var r=Ge.a.createElement(St["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=Pt.rt("Settings for {name}\u2026",{name:Ge.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return Ge.a.createElement(mt["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id,entryPoint:"dnd_enabled_menu"})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.inDndBySnooze,n=a.menuProps,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge;var o=void 0;var l=void 0;if(i){o=Ge.a.createElement("span",{className:"p-dnd_menu__new_pill"},Pt.t("NEW"));l=s?Ge.a.createElement("span",null,Pt.t("Notification schedule\u2026")," ",o):Pt.t("Notification schedule\u2026")}var c=function e(){r?t.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):t.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})};return Ge.a.createElement("div",null,this.renderDndMenuHeader(),Ge.a.createElement(mt["f"],Ye()({},n,{menuClassNames:"p-dnd_menu"}),Ge.a.createElement(mt["b"],{label:i?Pt.t("Turn off"):Pt.t("Resume notifications now"),onSelected:c,danger:i}),this.renderAdjustMenuItem(),Ge.a.createElement(mt["d"],null),i&&Ge.a.createElement(mt["b"],{label:i?l:Pt.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&this.renderSettingsMenuItem(),!i&&Ge.a.createElement(mt["b"],{label:Pt.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences})))}}]);return t}(He["PureComponent"]);Dt.displayName="DndEnabledMenu";Dt.defaultProps=xt;var Ft=function e(t){var a=Object(ct["getCurrentUserId"])(t);var r=Object(ut["getDndScheduleByMemberId"])(t,a),n=r.nextDndEndTs;var i=Object(ut["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(Ot["h"])(t,"time24"),clogger:Object(bt["a"])({state:t}),featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(Ot["h"])(t,"dnd_notification_schedule_new_badge_seen")}};var Lt=function e(t){return{snoozeNotifications:function e(a){return t(Object(jt["e"])(a))},openDndDialog:function e(){return t(Object(At["a"])())},endDndSnooze:function e(a){return t(Object(jt["b"])(a))},endDndSchedule:function e(a){return t(Object(jt["a"])(a))},openChannelNotificationPrefsModal:function e(a){return t(Object(Nt["a"])(a))},setUserPrefByApi:function e(a){return t(Object(Ct["d"])(a))},openPrefsModal:function e(a){return t(Object(Tt["a"])(a))}}};var Bt=Object(nt["connect"])(Ft,Lt)(Dt);var Ut=new lt["b"]("do_not_disturb");var qt={inDnd:ot["b"].bool.isRequired,currentChannel:ot["b"].object,className:ot["b"].string,featureGranularDnd:ot["b"].bool,featureClassicNav:ot["b"].bool,clogger:ot["b"].object};var Wt={currentChannel:{},className:void 0,featureGranularDnd:false,featureClassicNav:false,clogger:{track:_t["noop"]}};var Ht=function(e){rt()(t,e);function t(e){Xe()(this,t);var a=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);Object(yt["a"])(a,["onClick"]);return a}$e()(t,[{key:"onClick",value:function e(){var t=this.props.clogger;t.track(gt["l"].DND_MENU_OPEN,{})}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.inDnd,n=a.currentChannel,i=a.featureClassicNav;var s=void 0;i&&(s={menuProps:Ye()({},t,{onMenuItemSelected:function e(a,r){r.stopPropagation();t.onMenuItemSelected(a,r)}})});if(r)return Ge.a.createElement(Bt,Ye()({currentChannel:n,menuProps:t},s));return Ge.a.createElement(kt["a"],Ye()({currentChannel:n,menuProps:t},s))}},{key:"render",value:function e(){var t=this.props,a=t.inDnd,r=t.className,n=t.featureGranularDnd;var i=a?"snooze-outline":"bell-o";return Ge.a.createElement(mt["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},Ge.a.createElement(ft["c"],{tip:n?Ut.t("Do Not Disturb"):Ut.t("Notifications"),position:"bottom"},Ge.a.createElement(ht["a"],{className:st()("p-dnd_button",r),"data-qa":"do_not_disturb_btn","aria-label":n?Ut.t("Do Not Disturb"):Ut.t("Notifications")},Ge.a.createElement(vt["b"],{type:i}))))}}]);return t}(He["PureComponent"]);Ht.displayName="DndButton";Ht.defaultProps=Wt;var Gt=function e(t){var a=Object(dt["a"])(t);return{inDnd:!!Object(ut["getCurrentMemberDnd"])(t),currentChannel:Object(pt["e"])(t,a)||void 0,featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),featureClassicNav:Object(ct["isFeatureEnabled"])(t,"feature_classic_nav"),clogger:Object(bt["a"])({state:t})}};var Vt=Object(nt["connect"])(Gt)(Ht);var Kt=a(355);var zt=a(88);var Qt=/\.spec\.jsx?$/;function Yt(e){return!Qt.test(e)}function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={};if(!e||!Object(_t["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var r=t?e.keys():e.keys().filter(Yt);r.forEach(function(t){a[t]=e(t)});return a}var Xt=a(1397);var Zt=a(2056);var $t=a(25);var ea=a(16);var ta=a(336);var aa=a(28);var ra=a(35);var na=a(97);var ia=a(232);var sa=a(1147);var oa=a(1963);var la=a(2079);var ca=a(1965);var ua=a(1966);var da=a(1967);var pa=a(1591);var ma=a(1052);var ha=a(283);var va=a(1630);var fa=a(134);var ba=a(300);var ga=a(68);var _a=a(1957);var ya=new lt["b"]("member_profile");var ka={memberId:ot["b"].string.isRequired,onMenuItemSelected:ot["b"].func,canRemoveFromChannel:ot["b"].bool,channelId:ot["b"].string,dispatchOpenRemoveMemberDialog:ot["b"].func.isRequired,featureModernProfileFlexpane:ot["b"].bool};var Oa={onMenuItemSelected:_t["noop"],canRemoveFromChannel:false,channelId:void 0,featureModernProfileFlexpane:false};function Ca(e){var t=e.memberId,a=e.onMenuItemSelected,r=e.canRemoveFromChannel,n=e.channelId,i=e.dispatchOpenRemoveMemberDialog,s=e.featureModernProfileFlexpane;if(r&&n){var o=Ge.a.createElement("strong",null,Ge.a.createElement(St["a"],{className:"p-member_profile_card__context_action_channel_name",inline:true,channelId:n,iconProps:{inherit:true,align:"baseline"}}));var l=s?ya.rt("Remove from {channelName}",{channelName:o}):"";var c=function e(){i({memberId:t,channelId:n});a()};var u="member_profile_card_remove_from_channel";return Ge.a.createElement("div",{className:"p-member_profile_card__context_action_container"},Ge.a.createElement(fa["a"],{className:"p-member_profile_card__context_action","data-qa":u,onClick:c},l))}return null}Ca.defaultProps=Oa;function Ea(e,t){var a=t.memberId,r=t.viewContext;var n=Object(_a["a"])(e,r),i=n.channelId;var s=i&&Object(ha["getChannelMembershipInfoForUser"])(e,i,a);var o=Object(ct["getCurrentUserId"])(e)===a;var l=!o&&s&&s.isKnown&&s.isMember&&Object(ga["h"])(e,i)&&Object(ea["canMemberBeRemoved"])(e,a);return{canRemoveFromChannel:l,channelId:i,featureModernProfileFlexpane:Object(ct["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var Sa={dispatchOpenRemoveMemberDialog:function e(){return va["a"].apply(void 0,arguments)}};var wa=Object(ba["b"])(Object(nt["connect"])(Ea,Sa)(Ca));var Ia=a(2424);var ja=new lt["b"]("member_profile");var Ta={currentMember:ot["b"].object,member:ot["b"].object,memberTeam:ot["b"].object,onClose:ot["b"].func,showMemberProfile:ot["b"].func,team:ot["b"].object,includeRemoveFromChannelAction:ot["b"].bool,canInteract:ot["b"].bool,clogger:ot["b"].object};var Aa={currentMember:void 0,member:void 0,memberTeam:void 0,onClose:_t["noop"],showMemberProfile:_t["noop"],team:void 0,includeRemoveFromChannelAction:false,canInteract:true,clogger:{track:_t["noop"]}};function Na(e){var t=e.currentMember,a=e.member,r=e.memberTeam,n=e.onClose,i=e.showMemberProfile,s=e.team,o=e.includeRemoveFromChannelAction,l=e.canInteract,c=e.clogger;var u=Object(sa["a"])(function(){var e=[ma["a"].STATUS];t!==a&&e.push(ma["a"].TIME);return e},[t,a]);var d=Object(ia["a"])(),p=d.featureModernProfileFlexpane;var m=Object(He["useCallback"])(function(){c.track(gt["l"].USER_CARD_CLICK);n()},[c,n]);if(!p)return null;var h=Ge.a.createElement(oa["a"],{className:"p-member_profile_card__picture",member:a});var v=Ge.a.createElement(ca["a"],{className:"p-member_profile_card__restriction",member:a,team:r});var f=Ge.a.createElement(pa["a"],{className:"p-member_profile_card__name",member:a});if(Object(aa["isUnavailable"])(r))return Ge.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ge.a.createElement("div",{className:"p-member_profile_card__header"},h,v),f,Ge.a.createElement(ua["a"],{memberTeam:r}));if(!l)return Ge.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ge.a.createElement("div",{className:"p-member_profile_card__header"},h,v),f,Ge.a.createElement(da["a"],{member:a}));return Ge.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ge.a.createElement("div",{className:"p-member_profile_card__header"},Ge.a.createElement(ht["a"],{className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:function e(){i({memberId:a.id});m()}},Ge.a.createElement("span",{className:"p-member_profile_card__picture_hint"},ja.t("Click to view profile")),h),v),Ge.a.createElement(pa["a"],{className:"p-member_profile_card__name",member:a,onClick:function e(){i({memberId:a.id});m()}}),Ge.a.createElement(ma["b"],{member:a,onClick:m,team:s,types:u}),Ge.a.createElement(la["a"],{className:"p-member_profile_card__buttons",member:a,onClick:m,showCallButton:true}),o?Ge.a.createElement(wa,{memberId:a.id,onMenuItemSelected:m}):null)}Na.displayName="MemberProfileCard";Na.defaultProps=Aa;function Ma(e,t){var a=t.memberId;var r=Object($t["e"])(e,a);if(!r)return{};var n=Object(ct["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(ta["canMemberInteractById"])(e,a):!Object(ea["isStranger"])(r);return{currentMember:Object($t["b"])(e),member:r,memberTeam:Object(ra["j"])(e,Object(ea["getMemberTeamId"])(r)),team:Object(ra["d"])(e),canInteract:n,clogger:Object(bt["a"])({state:e})}}var Pa={showMemberProfile:function e(){return na["j"].apply(void 0,arguments)}};var Ra=Object(nt["connect"])(Ma,Pa)(Na);var xa=Ra;var Da=a(221);var Fa=a(22);var La=a(457);var Ba={menuProps:ot["b"].object,serviceId:ot["b"].string,memberId:ot["b"].string,homeWorkspaceId:ot["b"].string,memberIsHuman:ot["b"].bool,includeRemoveFromChannelAction:ot["b"].bool};var Ua={serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:false,includeRemoveFromChannelAction:false};function qa(e){var t=e.serviceId,a=e.memberId,r=e.homeWorkspaceId,n=e.menuProps,i=e.memberIsHuman,s=e.includeRemoveFromChannelAction;if(t&&!i)return Ge.a.createElement(Zt["a"],{serviceId:t,memberId:a,homeWorkspaceId:r,menuProps:n});if(a&&i){var o=n||{},l=o.onClose;return Ge.a.createElement(xa,{memberId:a,onClose:l,includeRemoveFromChannelAction:s})}return null}qa.defaultProps=Ua;var Wa={userId:ot["b"].string,botId:ot["b"].string,botProfile:ot["b"].object};var Ha=function e(t,a){var r=a.userId,n=a.botId,i=a.botProfile;var s=Object(Da["maybeGetBotAndMemberByIds"])(t,{userId:r,botId:n,botProfile:i}),o=s.member,l=s.bot,c=s.memberIsHuman;var u=Object(Fa["b"])(t);var d=Object(La["getTeamIdFromBotOrUser"])({member:o,bot:l,botProfile:i,currentTeamId:u});return{serviceId:l&&l.id,memberId:o&&o.id,homeWorkspaceId:d,memberIsHuman:c}};var Ga=Object(nt["connect"])(Ha)(qa);Ga.propTypes=Wa;var Va=function e(t){return Ge.a.createElement(Ga,t)};Va.displayName="renderProfileCard";var Ka=Ga;var za=a(1185);za["a"].register(Xt["a"]);za["b"].register(Va);Object(Kt["a"])({ToastContainer:ze["a"],DndButton:Vt});Jt(a(3105));window.React=Ge.a;window.ReactDOM=Ke.a;window.moment=zt["a"]},4509:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(0);var _=a(2);var y=a(31);var k=a(9);var O=a(25);var C=a(103);var E=a(35);var S=a(1381);var w=a(16);var I=a(28);var j=a(32);var T=a(6);var A=a(15);var N=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});N.meta={name:"getFlexpaneMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneMemberIds"};var M=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});M.meta={name:"getFlexpaneNonExactMatchMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneNonExactMatchMemberIds"};var P=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});P.meta={name:"getScrollmark",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetScrollmark"};var R=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});R.meta={name:"getMarker",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetMarker"};var x=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});x.meta={name:"getSearchQuery",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetSearchQuery"};var D=Object(A["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});D.meta={name:"getFilter",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFilter"};var F=a(586);var L=a(497);var B=a(69);var U=a(420);var q=a(812);var W=a(3);var H=a.n(W);var G=a(37);var V=a.n(G);var K=a(17);var z=a(251);var Q=a(124);var Y=a(53);var J=a(38);var X=a(1638);var Z=a(61);var $=10;var ee=100;var te=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.searchQuery,r=void 0===a?"":a,n=t.marker,i=void 0===n?"":n,s=t.index,o=void 0===s?"":s,l=t.filter,c=void 0===l?"":l;var u=Object(Q["a"])(c)||Object(Q["b"])(c);var d={count:r?ee:$,index:o,locale:Object(Y["f"])(),external_team:u?c:void 0,filter:u?"people":c};if(r){d.query=r;d.search_profile_fields=true}else d.marker=i;return d};var ae=Object(K["b"])("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.isNonExactMatchMembersSearch,n=void 0!==r&&r,i=V()(a,["isNonExactMatchMembersSearch"]);var s=t();var o=Object(X["a"])(s)&&Object(Z["a"])(s,"display_email_addresses");var l=i.searchQuery||"";var c=l.indexOf("@")>0||l.indexOf("\uff20")>0;var u=te(i);return e(Object(z["e"])({query:u})).then(function(t){var a=t.members,r=void 0===a?[]:a,s=t.next_marker;var u=r;"deactivated"===i.filter&&(u=r.filter(function(e){return e&&!e.is_bot}));o&&c&&(u=r.filter(function(e){return Object(w["getMemberEmail"])(e).startsWith(l)}));var d=u.map(function(e){return e.id});e(n?Object(F["b"])(d):Object(F["a"])(d));s&&e(Object(F["e"])(s));return{members:r,nextMarker:s}})});ae.meta={name:"listAndUpsertMembers",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksListAndUpsertMembers",description:"Fetch and upsert membersIds displayed in member directory flexpane"};ae.propTypes={searchQuery:g["b"].string,marker:g["b"].string,index:g["b"].string,filter:g["b"].string,isNonExactMatchMembersSearch:g["b"].bool};var re=Object(K["b"])("Fetch and upsert members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.isNonExactMatchMembersSearch,n=void 0!==r&&r;var i=t();var s=x(i);var o=R(i);var l=n?"people":D(i);var c=Object(J["i"])(i)?"users_by_realname":"users_by_display_name";return e(ae({searchQuery:s,marker:o,index:c,filter:l,isNonExactMatchMembersSearch:n}))});re.meta={name:"fetchMembersPost",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksFetchMembersPost",description:"Fetch and upsert members"};re.propTypes={isNonExactMatchMembersSearch:g["b"].bool};var ne={};Object.defineProperty(ne,"buildQueryParams",{get:function e(){return te}});var ie=a(781);var se=a(231);var oe=a(39);var le=a(1038);var ce=a(551);var ue=a(891);var de=a(1045);var pe=a(760);var me=a(97);var he=a(3567);var ve=a(2089);var fe={id:g["b"].string.isRequired,saveScrollmarkForKey:g["b"].func,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,index:g["b"].number.isRequired,numResults:g["b"].number.isRequired,searchQuery:g["b"].string.isRequired,member:g["b"].object.isRequired,featureFantailNurture:g["b"].bool,showMemberProfile:g["b"].func};var be={showMemberProfile:_["noop"],saveScrollmarkForKey:_["noop"],featureFantailNurture:false};var ge=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}m()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.id,r=t.member,n=t.searchQuery,i=t.featureFantailNurture,s=t.clogger;this.props.showMemberProfile({memberId:a});this.props.saveScrollmarkForKey(a);var o=new he["a"]({query:n,options:{entities:{members:{matchEmailField:i}},sort:{preferExactMatch:true}}});var l=o.scoreMember(r),c=l.scoreDetails;var u=o.isMemberExactMatch(r);var d=o.getMemberExactMatchDetails(r);s.track("ORGANIZATION_DIRECTORY_CLICK",{organization_directory_query_length:n.length,organization_directory_results_length:this.props.numResults,organization_directory_selected_position:this.props.index,organization_directory_selected_id:r.id,organization_directory_selected_match_details:{is_exact_match:u,exact_match_details:d,score_details:c}})}},{key:"render",value:function e(){var t=this.props.id;return n.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":t,role:"presentation",onClick:this.onClick},n.a.createElement(ve["a"],{id:t}))}}]);return t}(r["Component"]);ge.displayName="SearchableMemberListMember";ge.defaultProps=be;var _e=function e(t,a){var r=a.id;return{clogger:Object(oe["a"])({state:t}),member:Object(O["e"])(t,r),searchQuery:x(t),featureFantailNurture:Object(X["a"])(t)}};var ye={showMemberProfile:function e(){return me["j"].apply(void 0,arguments)},saveScrollmark:function e(){return F["c"].apply(void 0,arguments)}};var ke=Object(o["connect"])(_e,ye)(ge);var Oe=a(3710);var Ce=new T["b"]("member_directory");var Ee={memberIds:g["b"].arrayOf(g["b"].string),scrollmark:g["b"].shape({key:g["b"].string,offset:g["b"].number}),searchQuery:g["b"].string,setSearchQuery:g["b"].func,filter:g["b"].string,setFilter:g["b"].func,fetchMembersPost:g["b"].func,saveScrollmark:g["b"].func,nonExactMatchMemberIds:g["b"].arrayOf(g["b"].string),isEnterprise:g["b"].bool,isFreeTeamAdmin:g["b"].bool,ariaLabel:g["b"].string,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,openFromOrgDirectory:g["b"].func,displayEmailAddresses:g["b"].bool,featureSonicMemberDirectory:g["b"].bool,featureFantailNurture:g["b"].bool,onItemTabWithin:g["b"].func};var Se={memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:_["noop"],filter:"people",setFilter:_["noop"],fetchMembersPost:_["noop"],saveScrollmark:_["noop"],nonExactMatchMemberIds:[],isEnterprise:false,isFreeTeamAdmin:false,ariaLabel:void 0,openFromOrgDirectory:_["noop"],featureSonicMemberDirectory:false,featureFantailNurture:false,onItemTabWithin:_["noop"],displayEmailAddresses:false};var we=100;var Ie="SearchInProductEducation";var je=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(a,["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]);a.requestPost=null;a.requestNonExactMatchMembers=null;a.keys=null;a.list=n.a.createRef();a.layout=new ue["a"];a.layout.heightCache.DEFAULT_HEIGHT=60;a.state={reachedEnd:false};a.debouncedFetchPost=Object(_["debounce"])(a.fetchPost,we);return a}m()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.searchQuery,n=a.filter,i=a.clogger;if(t.searchQuery===r&&t.filter===n)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.layout&&this.layout.setAnchor(false);this.setReachedEnd(false,this.fetchAround);t.searchQuery!==r&&i.track("ORGANIZATION_DIRECTORY_KEYPRESS",{});t.filter!==n&&i.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:n})}},{key:"componentWillUnmount",value:function e(){this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onClearSearch",value:function e(){this.props.setSearchQuery("");this.props.setFilter("people")}},{key:"onClickSearchInProductEducation",value:function e(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}},{key:"onViewMatchesClick",value:function e(){this.props.setFilter("people")}},{key:"onPricingClick",value:function e(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"setReachedEnd",value:function e(t,a){this.setState(function(){return{reachedEnd:t}},a)}},{key:"getListKeys",value:function e(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getNonExactMatchEmptyStateLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,a=t.filter,r=t.isEnterprise,i=t.searchQuery;var s={query:n.a.createElement("strong",null,i)};switch(a){case"admins":if(r)return Ce.rt("No workspace admins match {query}, but there are other members who do.",s);return Ce.rt("No admins match {query}, but there are other members who do.",s);case"bots":return Ce.rt("No bots match {query}, but there are other members who do.",s);case"org_members":return Ce.rt("No members match {query}, but there are other members who do.",s);case"org_admins":return Ce.rt("No org admins match {query}, but there are other members who do.",s);case"guests":return Ce.rt("No guests match {query}, but there are other members who do.",s);case"deactivated":return Ce.rt("No deactivated members match {query}, but there are other members who do.",s);default:return Ce.rt("No members match {query}, but there are other members who do.",s)}}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"saveScrollmarkForKey",value:function e(t){var a=this.list.current;if(!a)return;if(!t)return;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"shouldFetchNonExactMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=this.props,r=a.filter,n=a.searchQuery;return!Object(_["isEmpty"])(n)&&"people"!==r&&0===t.length}},{key:"fetchMembers",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:a}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.nextMarker,r=e.members;!t.props.searchQuery&&a||t.setReachedEnd(true);t.shouldFetchNonExactMembers(r)&&t.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var a=true;this.requestNonExactMatchMembers=this.fetchMembers(a);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"isFocusableItem",value:function e(t){var a=t.key;return a!==this.loadingIndicatorKey&&a!==Ie}},{key:"renderRow",value:function e(t){if(!this.props.featureSonicMemberDirectory)return null;var a=this.keys[t];if(!a)return null;if(a===this.loadingIndicatorKey)return n.a.createElement("div",{className:"p-member-directory__loading"},Ce.t("Loading\u2026"));if(a===Ie)return this.renderSearchInProductEducation();return this.renderMember({id:a,index:t})}},{key:"renderSearchInProductEducation",value:function e(){var t=this.props.searchQuery.indexOf("@")>0;if(this.props.featureFantailNurture&&!this.props.displayEmailAddresses&&t)return n.a.createElement(de["a"],{"data-qa":"workspace-directory-search-email-hint",className:"p-member-directory__empty_list",description:Ce.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin.",{ns:"search"})});return n.a.createElement(de["a"],{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:Ce.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:Ce.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}},{key:"renderMember",value:function e(t){var a=t.id,r=t.index;return n.a.createElement(ke,{id:a,index:r,numResults:this.keys.length,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderEmptyListView",value:function e(){var t=this;if(!this.props.featureSonicMemberDirectory)return null;var a=this.props,r=a.searchQuery,i=a.nonExactMatchMemberIds,s=a.filter,o=a.isFreeTeamAdmin,l=a.clogger;var c=Ce.t("Clear Search");var u=Ce.t("View Matches");if(i.length)return n.a.createElement(de["a"],{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:u,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:c,onClickSecondaryAction:this.onClearSearch});if(!r&&"guests"===s&&o){var d=Ce.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(e){var a=e.key,r=e.text;return n.a.createElement(pe["a"],{key:a,href:"/pricing?ui_step=86&ui_element=5",class:"no_underline",target:"_blank",onClick:t.onPricingClick},r)});l.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}});return n.a.createElement(de["a"],{className:"p-member-directory__empty_list",description:d,primaryActionText:c,onClickPrimaryAction:this.onClearSearch})}return this.renderSearchInProductEducation()}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();if(this.state.reachedEnd)this.keys.push(Ie);else{this.loadingIndicatorKey="Loading"+this.keys.length;this.keys.push(this.loadingIndicatorKey)}return n.a.createElement(le["a"],null,function(e){var a=e.measureRef,r=e.width,i=e.height;return n.a.createElement("div",{className:"p-member_directory__member_list",ref:a},n.a.createElement(ce["a"],{width:r,height:i,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost,isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin,ariaLabel:t.props.ariaLabel}))})}}]);return t}(r["PureComponent"]);je.displayName="SearchableMemberList";je.defaultProps=Se;var Te=function e(t){return{scrollmark:P(t),searchQuery:x(t),filter:D(t),memberIds:N(t),nonExactMatchMemberIds:M(t),isEnterprise:Object(se["e"])(t),isFreeTeamAdmin:!Object(I["isPaidTeam"])(Object(E["d"])(t))&&Object(w["isAdmin"])(Object(O["b"])(t)),clogger:Object(oe["a"])({state:t}),featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(t,"feature_sonic_member_directory"),featureFantailNurture:Object(X["a"])(t),displayEmailAddresses:Object(Z["a"])(t,"display_email_addresses")}};var Ae={fetchMembersPost:re,saveScrollmark:F["c"],setSearchQuery:F["f"],setFilter:F["d"],openFromOrgDirectory:ie["g"]};var Ne=Object(o["connect"])(Te,Ae)(function(e){var t=e.forwardedRef,a=V()(e,["forwardedRef"]);return n.a.createElement(je,H()({ref:t},a))});var Me=n.a.forwardRef(function(e,t){return n.a.createElement(Ne,H()({forwardedRef:t},e))});var Pe=a(26);var Re=a.n(Pe);var xe=a(23);var De=a(3712);var Fe=new T["b"]("member_directory");var Le={featureSonicMemberDirectory:g["b"].bool,isEnterprise:g["b"].bool,selectedFilter:g["b"].string,onMenuItemSelected:g["b"].func,workspaceName:g["b"].string,enterpriseOrgName:g["b"].string,externalWorkspaces:g["b"].array,menuProps:g["b"].object,featureMemberDirWorkspaceFilterFirst:g["b"].bool};var Be={featureSonicMemberDirectory:false,isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:_["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0,featureMemberDirWorkspaceFilterFirst:false};var Ue={people:"people",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var qe=function(e){b()(t,e);m()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.memberDirectoryStrings=a.props.featureSonicMemberDirectory?{people:Fe.t("Everyone"),org_members:Fe.t("All Members"),org_admins:Fe.t("Org Admins"),members:Fe.t("All Members"),admins:a.props.isEnterprise?Fe.t("Workspace Admins"):Fe.t("Admins"),bots:Fe.t("Bots"),guests:Fe.t("Guests"),deactivated:Fe.t("Deactivated accounts")}:null;return a}m()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,a=t.isEnterprise,r=t.externalWorkspaces,n=t.workspaceName,i=t.featureSonicMemberDirectory;if(!i)return null;var s=r.length>0;if(a)return Fe.t("{workspaceName} (current workspace)",{workspaceName:n});return s?n:""}},{key:"buildMenuItemTemplate",value:function e(t){var a=this.props,r=a.selectedFilter,i=a.onMenuItemSelected;var s=n.a.createElement(xe["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var o="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return i(t)},icon:r===t?s:null,className:r===t?o:""}}},{key:"maybeBuildOrgFilterSection",value:function e(){var a=this.props,r=a.isEnterprise,n=a.enterpriseOrgName;if(!r)return[];var i={type:"header",label:n};return[t.menuSeparator(),i,this.buildMenuItemTemplate(Ue.orgMembers),this.buildMenuItemTemplate(Ue.orgAdmins)]}},{key:"buildWorkspaceFilterSection",value:function e(){var a=this.getWorkspaceSectionLabel();var r={type:"header",label:a};return[t.menuSeparator(),r,this.buildMenuItemTemplate(Ue.workspaceMembers),this.buildMenuItemTemplate(Ue.workspaceAdmins),this.buildMenuItemTemplate(Ue.guests),this.buildMenuItemTemplate(Ue.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var a=this.props,r=a.externalWorkspaces,i=a.selectedFilter,s=a.onMenuItemSelected,o=a.featureSonicMemberDirectory;if(!o)return null;var l=r.length>0;var c=n.a.createElement(xe["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var u="p-member_directory_menu--selected-item";if(!l)return[];var d=Fe.t("External Organizations");var p={type:"header",label:d};var m=r.map(function(e){var t=Object(I["getTeamId"])(e);return{label:Object(I["getTeamDisplayName"])(e),click:function e(){return s(t)},icon:i===t?c:null,className:i===t?u:""}});return[t.menuSeparator(),p].concat(Re()(m))}},{key:"render",value:function e(){var a=this.props,r=a.featureSonicMemberDirectory,i=a.menuProps,s=a.featureMemberDirWorkspaceFilterFirst;if(!r)return null;var o=void 0;o=s?[].concat(Re()(this.buildWorkspaceFilterSection()),Re()(this.maybeBuildOrgFilterSection())):[].concat(Re()(this.maybeBuildOrgFilterSection()),Re()(this.buildWorkspaceFilterSection()));var l=[this.buildMenuItemTemplate(Ue.people)].concat(Re()(o),Re()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(Ue.deactivatedMembers)]);return n.a.createElement(B["a"],H()({},i,{template:l}))}}]);return t}(r["PureComponent"]);qe.displayName="MemberDirectoryMenu";var We=function e(t,a){var r=a.externalTeams;var n=Object(E["d"])(t);var i=Object(k["pageNeedsEnterprise"])(t);var s={featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(t,"feature_sonic_member_directory"),workspaceName:Object(I["getTeamDisplayName"])(n),isEnterprise:i,externalWorkspaces:r.map(function(e){return Object(E["j"])(t,e)}),featureMemberDirWorkspaceFilterFirst:Object(k["isFeatureEnabled"])(t,"feature_member_dir_workspace_filter_first")};i&&(s.enterpriseOrgName=Object(E["f"])(t));return s};qe.defaultProps=Be;var He=Object(o["connect"])(We)(qe);var Ge=a(3714);var Ve=new T["b"]("member_directory");var Ke={isEnterprise:g["b"].bool,isAdmin:g["b"].bool,setSearchQuery:g["b"].func,searchQuery:g["b"].string,setFilter:g["b"].func,filter:g["b"].string,featureSonicMemberDirectory:g["b"].bool,isVisible:g["b"].bool,flexParams:g["b"].arrayOf(g["b"].string),teamUrl:g["b"].string,fetchMemberCountsForTeam:g["b"].func,isRestricted:g["b"].bool};var ze={isEnterprise:false,isAdmin:false,isRestricted:false,setSearchQuery:_["noop"],setFilter:_["noop"],searchQuery:"",filter:"people",featureSonicMemberDirectory:false,isVisible:false,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:_["noop"]};var Qe=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(a,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]);a.state={externalTeams:[]};a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}m()(t,[{key:"componentDidMount",value:function e(){this.fetchExternalTeams()}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value||"";this.props.setSearchQuery(a)}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getTitle",value:function e(){var t=this.props,a=t.featureSonicMemberDirectory,r=t.isEnterprise;if(!a)return null;return r?Ve.t("Organization Directory"):Ve.t("Workspace Directory")}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchExternalTeams",value:function e(){var t=this;this.props.fetchMemberCountsForTeam().then(function(e){if(!e||!e.external_teams)return;t.setState(function(){return{externalTeams:Object.keys(e.external_teams)}})})}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;return n.a.createElement("div",{className:"p-member_directory__search"},n.a.createElement(L["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:Ve.t("Search by name or title"),icon:"search",autoFocus:true,inputAriaLabel:Ve.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})}))}},{key:"renderMenu",value:function e(t){return n.a.createElement(He,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:t,externalTeams:this.state.externalTeams})}},{key:"renderFilterIconButton",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;var t="people"!==this.props.filter;var a=t?Ve.t("Filter members (filter active)"):Ve.t("Filter members");return n.a.createElement(B["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(U["a"],{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:t,"aria-label":a}))}},{key:"renderBody",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),n.a.createElement(Me,{ref:this.list,onItemTabWithin:this.onItemTabWithin,ariaLabel:this.getTitle()}))}},{key:"render",value:function e(){var t=this.props,a=t.isVisible,r=t.flexParams,i=t.teamUrl,s=t.featureSonicMemberDirectory;if(!s)return null;if(!a)return null;if(r.length)return null;return n.a.createElement(q["a"],{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(j["a"])()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?i+"admin":void 0,optionsIconType:"cog-o",optionsTooltipText:Ve.t("Manage members")}})}}]);return t}(r["Component"]);Qe.displayName="MemberDirectoryFlexpane";Qe.defaultProps=ze;var Ye=function e(t){var a=Object(C["i"])(t);var r=!Object(j["a"])()&&"team"===a||"directory"===a;return{featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(t,"feature_sonic_member_directory"),isEnterprise:Object(k["pageNeedsEnterprise"])(t),isAdmin:Object(w["isAdmin"])(Object(O["b"])(t)),isRestricted:Object(w["isRestricted"])(Object(O["b"])(t)),searchQuery:x(t),filter:D(t),flexParams:Object(C["e"])(t),teamUrl:Object(I["getTeamUrl"])(Object(E["d"])(t)),isVisible:r}};var Je={setSearchQuery:function e(){return F["f"].apply(void 0,arguments)},setFilter:function e(){return F["d"].apply(void 0,arguments)},fetchMemberCountsForTeam:function e(){return S["a"].apply(void 0,arguments)}};var Xe=Object(o["connect"])(Ye,Je)(Qe);var Ze=Xe;var $e=a(161);var et=function e(t,a){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement($e["a"],null,n.a.createElement(Ze,null))),a)};var tt=function e(t){s.a.unmountComponentAtNode(t)};var at=a(46);Object(at["a"])("interop.mountMemberDirectoryFlexpane",et);Object(at["a"])("interop.unmountMemberDirectoryFlexpane",tt)},4512:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(3);var d=a.n(u);var p=a(26);var m=a.n(p);var h=a(10);var v=a.n(h);var f=a(5);var b=a.n(f);var g=a(4);var _=a.n(g);var y=a(7);var k=a.n(y);var O=a(8);var C=a.n(O);var E=a(0);var S=a(2);var w=a(27);var I=a(25);var j=a(352);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(a,r){var n=Object(j["i"])(a.email).error_key;if(!n&&("invite"===a.mapping||"create"===a.mapping)){var i=e.some(function(e,t){return t!==r&&e.email===a.email});var s=!i&&t.some(function(e){return e.profile.email===a.email});var o=i||s;n=o?"duped":n}return d()({},a,{email_state:n||"ok"})})}function A(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var N={makeUserLFSItem:A,validateEmails:T};var M=a(23);var P=a(1178);var R=a(6);var x=a(1639);function D(e){if(e.member)return n.a.createElement(x["a"],{item:e});return e.label}var F=a(1640);function L(e){if(e.member)return n.a.createElement(F["a"],{item:e});return e.label}var B=a(2481);var U=new R["b"]("imports");var q={userMapping:E["b"].shape({id:E["b"].oneOfType([E["b"].string,E["b"].number]).isRequired,name:E["b"].string.isRequired,import_email:E["b"].string.isRequired,email:E["b"].string.isRequired,email_state:E["b"].string.isRequired,mapping:E["b"].string.isRequired}).isRequired,allMembers:E["b"].object.isRequired,onUserMappingChange:E["b"].func};var W={onUserMappingChange:S["noop"]};function H(e){var t=[{label:U.t("Choose one:"),value:"-",id:"-"},{label:U.t("Create & invite user"),value:"invite",id:"invite"},{label:U.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:U.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:U.t("Skip user completely, importing no messages"),value:"0",id:"0"}];return[].concat(t,m()(Object.values(e.allMembers).map(A))).map(function(t){return t.value===e.userMapping.mapping?d()({},t,{preselected:true}):t})}function G(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var V=function(e){C()(t,e);function t(e){b()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEmailChange=a.onEmailChange.bind(a);a.onMappingChange=a.onMappingChange.bind(a);return a}_()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(H(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(d()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var a=void 0;var r=this.props.allMembers[t];a=r&&r.profile&&r.profile.email?r.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(d()({},this.props.userMapping,{mapping:t,email:a}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var a=this.props.userMapping,r=a.mapping,i=a.email,s=a.email_state,o=a.import_email,l=a.id;if(i===o&&"ok"===s)return null;if(i===o&&"create"!==r&&"invite"!==r)return null;if(G(r))return null;return n.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(a){return t.onEmailChange(a.target.value)},placeholder:Object(j["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=U.t("Another user has this email.");break;case"empty":t=U.t("An email address is required.");break;case"invalid":t=U.t("This address is invalid.");break;case"ok":default:break}var a=["control-group","small_top_margin",{error:!G(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return n.a.createElement("div",{className:a},t&&n.a.createElement("span",{className:"small_left_margin help-inline"},n.a.createElement(M["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return n.a.createElement(P["a"],{ref:function e(a){t.lazyFilterSelect=a},items:H(this.props),template:D,tokenTemplate:L,onValueChange:function e(a){return t.onMappingChange(a[0].value)},single:true})}},{key:"renderAction",value:function e(){return n.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},n.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||U.t("no email")),this.renderAction())}}]);return t}(r["PureComponent"]);V.displayName="ServiceImportUserMapping";V.defaultProps=W;var K=V;var z={service:E["b"].string.isRequired,crumb:E["b"].string.isRequired,allMembers:E["b"].object.isRequired,initialUserMappings:E["b"].arrayOf(E["b"].shape({id:E["b"].oneOfType([E["b"].string,E["b"].number]).isRequired,name:E["b"].string.isRequired,import_email:E["b"].string.isRequired,email:E["b"].string.isRequired,email_state:E["b"].string.isRequired,mapping:E["b"].string.isRequired})).isRequired,initialChannelMappings:E["b"].array.isRequired};var Q={};var Y=function(e){C()(t,e);function t(e){b()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={batchUserAction:"-",userMappings:e.initialUserMappings};a.onUserMappingChange=a.onUserMappingChange.bind(a);a.onChange=a.onChange.bind(a);a.renderUserMapping=a.renderUserMapping.bind(a);a.onApplyBatchUserActionToAll=a.onApplyBatchUserActionToAll.bind(a);a.onApplyBatchUserActionToUnmapped=a.onApplyBatchUserActionToUnmapped.bind(a);return a}_()(t,[{key:"onChange",value:function e(t,a){this.setState(function(){return v()({},t,a)})}},{key:"onUserMappingChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.id)return;var r=this.state.userMappings;var n=Object(S["findIndex"])(r,function(e){return e.id===a.id});if(-1===n)return;var i=[].concat(m()(r.slice(0,n)),[a],m()(r.slice(n+1)));this.setState(function(){return{userMappings:T(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:T(e.userMappings.map(function(a,r){return d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:T(e.userMappings.map(function(a,r){return G(a.mapping)?a:d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"renderUserMapping",value:function e(t){return n.a.createElement(K,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var a=JSON.stringify(this.props.initialChannelMappings);var r=this.state.userMappings.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),n.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return n.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});return n.a.createElement("div",null,n.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),n.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),r,i,n.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),n.a.createElement("input",{type:"hidden",value:a,name:"channel_list"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},n.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),n.a.createElement(w["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(r["PureComponent"]);Y.displayName="ServiceImportMappingForm";Y.defaultProps=Q;function J(e){var t=Object(I["a"])(e);return{allMembers:t}}var X=Object(o["connect"])(J)(Y);var Z=X;var $=a(161);var ee=function e(t,a,r){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement($["a"],null,n.a.createElement(Z,r))),a)};var te=s.a.unmountComponentAtNode;var ae={mountServiceImportMappingForm:ee,unmountServiceImportMappingForm:te};var re=a(46);Object(re["a"])("interop.mountServiceImportMappingForm",ee);Object(re["a"])("interop.unmountServiceImportMappingForm",te)},4513:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(5);var p=a.n(d);var m=a(4);var h=a.n(m);var v=a(7);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(0);var y=a(2);var k=a(6);var O=a(166);var C=a(497);var E=a(27);var S=a(54);var w=a(23);var I=a(13);var j=a.n(I);var T={headerAction:_["b"].node};var A={headerAction:null};var N=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(r["PureComponent"]);N.displayName="OrgDashboardHeaderItem";N.defaultProps=A;var M=N;var P={title:_["b"].node.isRequired,headerActions:_["b"].array,headerClassName:_["b"].string};var R={headerActions:[],headerClassName:""};var x=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(y["map"])(t,function(e,t){return n.a.createElement(M,{key:t,headerAction:e})});return a}},{key:"render",value:function e(){var t=this.props.headerClassName;var a=j()("margin_left_75","display_flex","justify_content_between",""+t);return n.a.createElement("div",{className:a},n.a.createElement("h1",null,this.props.title),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);x.displayName="OrgDashboardHeader";x.defaultProps=R;var D=x;var F=D;var L=a(3270);var B=new k["b"]("enterprise_dashboard");var U={pageHeader:_["b"].string};var q={pageHeader:""};var W=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var a=B.t("No apps have been installed on this workspace.");return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},n.a.createElement(F,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a)))}}]);return t}(r["PureComponent"]);W.displayName="TeamAppsEmptyState";W.defaultProps=q;var H=W;var G=a(116);var V=a(857);var K=a(192);var z=new k["b"]("enterprise_dashboard");var Q={teamApps:_["b"].array,teamId:_["b"].string.isRequired,teamAppsApiCursor:_["b"].string,teamAppsApiTotal:_["b"].number,teamAppsLoading:_["b"].bool,headerItemOnClick:_["b"].func,pageSize:_["b"].number,sortBy:_["b"].string,sortDir:_["b"].string,searchQuery:_["b"].string,rowHeaderItemClassName:_["b"].string,rowClassName:_["b"].string,featureWtaOrgLevelApps:_["b"].bool};var Y={teamApps:[],headerItemOnClick:y["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureWtaOrgLevelApps:false};var J="asc";var X="desc";var Z="caret_down";var $="caret_up";var ee={};ee[J]=Z;ee[X]=$;var te=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.featureWtaOrgLevelApps,s=r.sortBy,o=r.sortDir;a.state={rowListItems:[],sortBy:s,sortDir:o,offset:0};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.appSources={internal:z.t("Internal"),"app directory":z.t("App Directory"),unknown:z.t("Unknown")};a.sourceTooltipStrings={"app directory":z.t("This app has been installed from the Slack App Directory."),internal:z.t("This app was created by someone within your organization."),unknown:z.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(G["a"],{className:"p-app_management_table_view_app_name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.installed_by&&t.installed_by.count;return z.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:a})}},{value:function e(t){var a=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return""+r}},{value:function e(t){var r=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(S["c"],{tip:r,position:"top"},n.a.createElement("span",null,i)))}}]};a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=z.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};a.headerData=[{id:"name",value:z.t("Name"),sortable:true},{id:"installed_by",value:i?z.t("Authorized By"):z.t("Installed By"),sortable:true},{id:"installed_on",value:i?z.t("Authorized On"):z.t("Installed On"),sortable:true},{id:"source",value:z.t("Source"),sortable:true}];return a}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.teamApps,r=t.sortBy;var n=this.state.offset;a.length?this.updateRowListItemsData(n):Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(r))}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.teamApps,n=a.teamAppsApiTotal;if(n&&r.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(O["b"])(Object(O["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.teamAppsLoading;a&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.teamApps,s=r.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(a)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==J?J:X;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===J?X:J:X;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiTotal(null));Object(O["b"])(Object(O["a"])().teams.resetTeamAppsApiCursor());Object(O["b"])(Object(O["a"])().teams.resetTeamApps());Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||J;var o=ee[s];if(!n||n!==t)return o;var l=void 0;l=i?i===J?Z:$:ee[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,l=n.teamId;var c={limit:i};a&&(c.sort=a);r&&(c.sort_dir=r);null!==s&&void 0!==s&&Object(y["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);c.team=l;Object(O["b"])(Object(O["a"])().teams.getAppsByWorkspace(l,c))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=this.props,n=r.teamApps,i=r.teamAppsLoading;var s=[];var o=t||0;var l=0;var c={rowListItems:s};function u(){l+=1;return"row_"+o+"_item"+l}function d(e,t){var a={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var r={value:t.value(e),id:u()};t.className&&(r.className=t.className);a.items.push(r)});o+=1;return a}if(n&&n.length)n.forEach(function(e){s.push(d(e,a.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var m=[{searchQuery:p}];m.forEach(function(e){s.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.rowHeaderItemClassName,u=l.rowClassName,d=l.searchQuery,p=l.teamAppsLoading;var m=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(V["a"],{autoHeight:true,rows:s,headers:m,rowHeaderItemClassName:c,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:d,isLoading:p,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);te.displayName="TeamAppsList";te.defaultProps=Y;var ae=Object(K["a"])("feature_wta_org_level_apps")(te);var re=new k["b"]("enterprise_dashboard");var ne={teamId:_["b"].string.isRequired,teamApps:_["b"].array,teamAppsApiCursor:_["b"].string,teamAppsApiTotal:_["b"].number,teamAppsCount:_["b"].number,teamAppsLoading:_["b"].bool,teamAppsSearchQuery:_["b"].string,teamAppsTeamUrl:_["b"].string,teamAppsSortBy:_["b"].string,teamAppsSortDir:_["b"].string};var ie={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var se=333;var oe=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSearchInputChange=Object(y["debounce"])(a.onSearchInputChange,se,{trailing:true}).bind(a);a.generateTeamsForAppCSV=a.generateTeamsForAppCSV.bind(a);return a}h()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var a=Object(y["get"])(t,"target.value","");Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!Number.isNaN(t))return re.t("{count} Apps",{count:this.props.teamAppsCount});return re.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(O["b"])(Object(O["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var a=t&&t+"apps/manage"||null;var r=re.t("Manage Apps");if(a)return n.a.createElement(E["d"],{href:a,target:"_blank",rel:"noopener noreferrer",type:"outline"},r,n.a.createElement(w["a"],{type:"external_link",className:"p-export_csv_button_caret"}));var i=re.t("You must join this workspace to manage its apps.");return n.a.createElement(S["c"],{tip:i,position:"top"},n.a.createElement("div",null,n.a.createElement(E["d"],{type:"outline",disabled:true},r,n.a.createElement(w["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=re.t("Filter by name...");return n.a.createElement(C["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(y["isNull"])(this.props.teamAppsSearchQuery)){var a=re.t("Apps");return n.a.createElement(H,{pageHeader:a})}var r=this.getTeamAppListProps();return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},n.a.createElement(F,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_team_apps_list"},n.a.createElement(ae,r)))}}]);return t}(r["PureComponent"]);oe.displayName="TeamApps";oe.defaultProps=ie;var le=oe;var ce=le;Object(c["a"])("interop.teamApps",{render:function e(t,a,r){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ce,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4514:function(e,t,a){},4515:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(128);var c=a(29);var u=a(163);var d=a(103);var p=a(244);var m=a(9);var h=a(3);var v=a.n(h);var f=a(385);function b(e,t){var a=t||Object(f["e"])(e.id)||{};return v()({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})}var g=a(5);var _=a.n(g);var y=a(4);var k=a.n(y);var O=a(7);var C=a.n(O);var E=a(8);var S=a.n(E);var w=a(31);var I=a(0);var j=a(6);var T=a(32);var A=a(1045);var N=a(23);var M=a(812);var P=a(37);var R=a.n(P);var x=a(4647);var D=a(1206);var F=a(1855);var L=a(1388);var B=a(13);var U=a.n(B);var q=a(88);var W=a(1030);var H=a(134);var G=a(420);var V=a(33);var K=a(925);var z=a(1295);var Q=a(3650);var Y=new j["b"]("downloads");var J={id:I["b"].string.isRequired,downloadPath:I["b"].string,downloadState:I["b"].string,startTime:I["b"].number,progress:I["b"].number,fileName:I["b"].string,imageSource:I["b"].string,fileType:I["b"].string,prettyType:I["b"].string,fileSize:I["b"].number,highlight:I["b"].bool,showDownload:I["b"].func,cancelDownload:I["b"].func,retryDownload:I["b"].func,removeDownload:I["b"].func,pauseDownload:I["b"].func,resumeDownload:I["b"].func,hasKeyboardFocusWithin:I["b"].bool,onFocus:I["b"].func,onBlur:I["b"].func};var X={downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false,showDownload:s["noop"],cancelDownload:s["noop"],retryDownload:s["noop"],removeDownload:s["noop"],pauseDownload:s["noop"],resumeDownload:s["noop"],hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"]};var Z=function(e){S()(t,e);k()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var a=t.downloadState,r=t.progress,n=t.startTime;if(!["progressing","paused"].includes(a))return"";if(r>=1)return"";if(-1===r)return"";if(!r)return"";var i=Date.now()-n;var s=i*(1/r);var o=s-i;return Y.t("{duration} remaining",{duration:q["a"].duration(o,"milliseconds").humanize()})}}]);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]);return a}k()(t,[{key:"onShowClick",value:function e(t){t.stopPropagation();this.props.showDownload(this.props.id)}},{key:"onCancel",value:function e(t){t.stopPropagation();this.props.cancelDownload(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();this.props.retryDownload(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();this.props.removeDownload(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();this.props.pauseDownload(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();this.props.resumeDownload(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,a=t.fileType,r=t.imageSource;var i=function e(){return n.a.createElement(N["b"],{type:a,file:true})};if(r)return n.a.createElement(W["a"],{src:r,renderPending:i,width:"32",height:"32",className:"p-download_item__image",alt:""});return i()}},{key:"renderExtraActions",value:function e(){var t="paused"===this.props.downloadState?n.a.createElement(H["a"],{className:"p-download_item__link--resume",onClick:this.onResume},Y.t("Resume")):n.a.createElement(H["a"],{className:"p-download_item__link--pause",onClick:this.onPause},Y.t("Pause"));return n.a.createElement("span",{className:"p-download_item__extra_actions"},t,n.a.createElement(H["a"],{className:"p-download_item__link--cancel",onClick:this.onCancel},Y.t("Cancel")))}},{key:"render",value:function e(){var a=this.props,r=a.downloadPath,i=a.downloadState,s=a.fileName,o=a.imageSource,l=a.fileType,c=a.prettyType,u=a.fileSize,d=a.highlight,p=a.hasKeyboardFocusWithin;var m=Math.max(this.props.progress,0);var h=s||r.split(/\/|\\/).reverse()[0];var v="completed"===i?100:100*m;var f=["progressing","paused"].includes(i)&&m?m*u:void 0;var b=void 0;b=f?Y.t("{partialSize} of {size} {prettyType}",{partialSize:Object(K["a"])(f,{decimalPlaces:2}),size:Object(K["a"])(u),prettyType:c}):Object(K["a"])(u)+" "+c;var g=t.getEstimatedTimeRemaining(this.props);var _=U()("p-download_item",i,{highlight:d,"p-download_item--focus-within":p});var y=U()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!o,fileType:l});var k=Object(V["isMac"])()?Y.t("Show in Finder"):Y.t("Open containing folder");var O={width:v+"%"};var C=Y.t("Remove {file}",{file:h,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return n.a.createElement("div",{role:"presentation",className:_,onFocus:this.props.onFocus,onBlur:this.props.onBlur},n.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),n.a.createElement(N["b"],{className:y})),n.a.createElement("div",{className:"p-download_item__container"},n.a.createElement("div",{className:"p-download_item__name_row"},n.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},h),this.renderExtraActions()),n.a.createElement("div",{className:"p-download_item__size_row"},n.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},n.a.createElement("span",{className:"p-download_item__partial_size"},b)),n.a.createElement("span",{className:"p-download_item__actions"},n.a.createElement(H["a"],{className:"p-download_item__link--show",onClick:this.onShowClick},k),n.a.createElement(H["a"],{className:"p-download_item__link--retry",onClick:this.onRetry},Y.t("Retry"))),n.a.createElement("span",{className:"p-download_item__time_remaining"},g)),n.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},n.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:O}))),n.a.createElement(G["a"],{"aria-label":C,icon:"close-filled",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]);return t}(n.a.Component);Z.displayName="DownloadItem";Z.defaultProps=X;var $={showDownload:p["showDesktopDownload"],cancelDownload:p["cancelDesktopDownload"],retryDownload:p["retryDesktopDownload"],removeDownload:p["removeDesktopDownload"],pauseDownload:p["pauseDesktopDownload"],resumeDownload:p["resumeDesktopDownload"]};var ee=Object(z["a"])(Object(i["connect"])(null,$)(Z));var te=new j["b"]("page_client");var ae={items:I["b"].arrayOf(I["b"].object.isRequired),onItemTabWithin:I["b"].func,openDownload:I["b"].func,retryDownload:I["b"].func,focusKey:I["b"].string,setFocusKey:I["b"].func};var re={items:void 0,onItemTabWithin:s["noop"],openDownload:s["noop"],retryDownload:s["noop"],focusKey:null,setFocusKey:s["noop"]};var ne=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["renderItem","onFileClick","focus"]);a.list=n.a.createRef();return a}k()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;if("downloads"===a&&r.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.items;if("downloads"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.getItemKeys();var n=Object(s["indexOf"])(r,a);var i=this.props.items[n];if(!i)return;var o=i.downloadState;if("completed"===o){this.props.openDownload(a);return}"cancelled"!==o&&"interrupted"!==o||this.props.retryDownload(a)}},{key:"getItemKeys",value:function e(){return this.props.items.map(function(e){return e.id})}},{key:"setFocusOnFirstItem",value:function e(){var t=this.getItemKeys()[0];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderItem",value:function e(t){var a=this.props.items[t];return n.a.createElement(ee,v()({key:a.id},a))}},{key:"render",value:function e(){var t=this;var a=this.getItemKeys();return n.a.createElement(x["a"],null,function(e){var r=e.width,i=e.height;return n.a.createElement(D["a"],{ref:t.list,width:r,height:i,keys:a,rowRenderer:t.renderItem,animateOnScroll:false,ariaLabel:te.t("Downloads"),onItemTabWithin:t.props.onItemTabWithin,onItemClick:t.onFileClick})})}}]);return t}(r["PureComponent"]);ne.displayName="DownloadsList";ne.defaultProps=re;var ie=function e(t){return{focusKey:Object(F["a"])(t)}};var se=function e(t){return{openDownload:function e(){return t(p["openDesktopDownload"])},retryDownload:function e(){return t(p["retryDesktopDownload"])},setFocusKey:function e(a){return t(Object(L["a"])(a))}}};var oe=Object(i["connect"])(ie,se)(function(e){var t=e.forwardedRef,a=R()(e,["forwardedRef"]);return n.a.createElement(ne,v()({ref:t},a))});var le=n.a.forwardRef(function(e,t){return n.a.createElement(oe,v()({forwardedRef:t},e))});var ce=a(3652);var ue={downloads:I["b"].array.isRequired,fileIdsToFetch:I["b"].array.isRequired,fetchFileInfo:I["b"].func.isRequired,isShowing:I["b"].bool,clearDownloads:I["b"].func,featureDownloadsPolish:I["b"].bool};var de={clearDownloads:s["noop"],isShowing:true,featureDownloadsPolish:false};var pe=new j["b"]("page_client");var me=function(e){S()(t,e);function t(e){_()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(a,["focus","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}k()(t,[{key:"componentWillUpdate",value:function e(t){var a=t.fileIdsToFetch;if(this.props.fileIdsToFetch===a)return;if(0===a.length)return;if(Object(s["isEqual"])(this.props.fileIdsToFetch,a))return;this.props.fetchFileInfo({ids:a})}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.clearDownloads,i=a.downloads,o=a.featureDownloadsPolish,l=a.isShowing;if(!l)return null;var c=void 0;Object(s["isEmpty"])(i)||(c={onOptionsClick:r,optionsIconType:"clear",optionsTooltipText:pe.t("Clear all")});return n.a.createElement(M["a"],{isEmpty:Object(s["isEmpty"])(i),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:pe.t("Downloads"),renderBody:function e(){return n.a.createElement(le,{ref:t.list,ariaLabel:pe.t("Downloads"),items:i,onItemTabWithin:t.onItemTabWithin})},renderEmpty:function e(){if(!o)return null;return n.a.createElement(A["a"],{imageUrl:cdn_url+"/80588/img/downloads_empty.png",imageUrl2x:cdn_url+"/80588/img/downloads_empty@2x.png",title:pe.t("Downloaded files"),description:pe.rt("You can download files by selecting the {icon} icon.",{icon:n.a.createElement(N["b"],{inline:true,type:"cloud-download"})})})},headerProps:c,viewId:"downloads-list",kbNavOrder:Object(T["a"])()?void 0:6})}}]);return t}(n.a.Component);me.displayName="DownloadsFlexpane";me.defaultProps=de;var he=me;var ve=function e(t){return t.files};var fe=function e(t,a){return a.startTime-t.startTime};var be=Object(u["createSelector"])([p["getTeamDownloads"],ve],function(e,t){return e.map(function(e){return b(e,t[e.id])}).sort(fe)});var ge=Object(u["createSelector"])([p["getTeamDownloadIds"],ve],function(e,t){return e.filter(function(e){return!t[e]})});var _e=function e(t){var a=Object(d["i"])(t);return{downloads:be(t),fileIdsToFetch:ge(t),isShowing:"downloads"===a,featureDownloadsPolish:Object(m["isFeatureEnabled"])(t,"feature_downloads_polish")}};var ye={fetchFileInfo:p["fetchFileInfo"],clearDownloads:p["clearTeamDesktopDownloads"]};var ke=Object(i["connect"])(_e,ye)(he);var Oe=ke;var Ce=a(161);var Ee=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(Ce["a"],null,n.a.createElement(Oe,null))),a,r)};var Se=Ee;var we=a(46);Object(we["a"])("interop.mountDownloadsView",Se)},4516:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(0);var b=a(2084);var g=a(2);var _=a(14);var y=a(176);var k={href:f["b"].string.isRequired,sizes:f["b"].string,type:f["b"].string,logger:f["b"].object.isRequired};var O={sizes:"16x16 32x32 48x48",type:"image/png"};var C=0;var E=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.originalFavicon=a.findFavicon();return a}d()(t,[{key:"componentDidMount",value:function e(){C&&this.props.logger.error("Multiple Favicons mounted");C+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(y["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){C-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var a=document.querySelector("head");if(!a){this.logger.error("<head> not found");return}var r=this.findFavicon();r?t?a.replaceChild(t,r):r.remove():t&&a.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(g["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(g["forEach"])(this.getFaviconProps(this.props),function(e,a){t.setAttribute(a,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);E.displayName="Favicon";E.defaultProps=O;var S=function e(t){return{logger:Object(_["a"])({state:t})}};var w=Object(i["connect"])(S)(E);var I=w;var j=a(137);var T=a(236);var A=a(316);var N={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};var M={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var P=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(j["d"])(t);var r=!!Object(T["getTotalUnreadHighlights"])(t);var i=Object(T["teamHasUnreads"])(t);var s=void 0;if(a)s=r?N.onlineMentions:i?N.onlineUnreads:Object(A["a"])()?N.posts:N.online;else{s=N.offline;s=r?N.offlineMentions:i?N.offlineUnreads:N.offline}return n.a.createElement(I,{href:s})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);P.displayName="WorkspaceFavicon";var R=P;var x=R;var D=function e(t,a){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(x,{store:r})),a)};var F=D;var L=a(46);Object(L["a"])("interop.mountFavicon",F)},4518:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(0);var p=a(9);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(40);var O=a.n(k);var C=a(6);var E=a(144);var S=a(819);var w=a(27);var I=a(162);var j=a(526);var T=a(95);var A=a(1814);var N=a(1576);var M=a(3147);var P=new C["b"]("enterprise_dashboard");var R={enqueueToast:d["b"].func.isRequired,orgName:d["b"].string,configured:d["b"].bool,featureEKMPhase2:d["b"].bool,getClearCacheTs:d["b"].func.isRequired,setClearCacheTs:d["b"].func.isRequired,lastCacheClearTs:d["b"].number};var x={orgName:"",configured:false,featureEKMPhase2:false,lastCacheClearTs:0};var D=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPushClick=a.onPushClick.bind(a);a.state={lastCacheClearTs:e.lastCacheClearTs};return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.configured&&this.props.getClearCacheTs().then(function(e){var a=e.timestamp;t.setState(function(){return{lastCacheClearTs:a}})})}},{key:"onPushClick",value:function e(){var t=this;var a=this.props.featureEKMPhase2;this.props.setClearCacheTs({timestamp:O()().unix(),reason:"EKMPurchasedView_setClearCacheTs"}).then(function(e){var r=e.timestamp;t.setState(function(){return{lastCacheClearTs:r}});t.props.enqueueToast({element:n.a.createElement(I["b"],{position:"bottom-right"},n.a.createElement("div",null,a?P.rt("<b>Caches cleared.</b> Key changes will be reflected across all clients in a few minutes."):P.rt("Policy changes pushed to {teamName}.",{teamName:t.props.orgName})))})})}},{key:"renderCacheClearControls",value:function e(){var t=this.props.featureEKMPhase2;return n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("div",null,n.a.createElement("h2",{className:"p-ekm_purchased_view__subtitle"},P.t("Made key policy changes in AWS?")),n.a.createElement("div",{className:"sk_foreground_max margin_bottom_100"},n.a.createElement("span",{className:"bold"},t?P.t("Last Cleared: "):P.t("Last Push: ")),n.a.createElement("span",null,n.a.createElement(N["a"],{timestamp:this.state.lastCacheClearTs})))),n.a.createElement("div",null,n.a.createElement(w["d"],{type:"primary",onClick:this.onPushClick},t?P.t("Clear Cache"):P.t("Push to Slack")))),n.a.createElement("p",null,t?P.t("Clearing client caches is recommended when making any key changes in AWS as different Slack clients cache data for varying amounts of time. This will ensure key changes are reflected across all clients within 24 hours. Any offline devices will update the next time they\u2019re online."):P.rt("Pushing key policy changes made in AWS will force all clients to reload, ensuring those changes are reflected in Slack. This may take <b>up to 24 hours.</b> Offline devices will update when they\u2019re next online.")),n.a.createElement(j["a"],null))}},{key:"renderUnconfiguredMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement(T["a"],{type:"boxed",level:"info",icon:"info-circle",align:"left",className:"margin_bottom_100"},n.a.createElement("span",{className:"bold"},P.t("Contact your Slack Customer Success Manager to enable EKM")),n.a.createElement("div",null,P.t("To start encrypting all data using your own keys, you\u2019ll need to enable EKM by providing the ARN for your key family.")))}},{key:"render",value:function e(){var t=this.props,a=t.featureEKMPhase2,r=t.configured,i=t.orgName;return n.a.createElement("div",{className:"p-ekm_purchased_view"},n.a.createElement("h1",{className:"p-ekm_purchased_view__title"},P.t("Enterprise Key Management")),a?n.a.createElement("p",null,P.t("Enterprise Key Management (EKM) encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")):n.a.createElement("p",null,P.t("EKM encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")),!r&&this.renderUnconfiguredMessage(),a&&r&&n.a.createElement("hr",null),n.a.createElement(A["a"],{orgName:i}),r&&n.a.createElement("hr",null),r&&this.renderCacheClearControls())}}]);return t}(r["PureComponent"]);D.displayName="EKMPurchasedView";D.defaultProps=x;var F=function e(t){return{featureEKMPhase2:Object(p["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var L=function e(t){return{enqueueToast:function e(a){return t(Object(E["enqueueToast"])(a))},getClearCacheTs:function e(){return t(Object(S["c"])({reason:"EKMPurchasedView_getClearCacheTs"}))},setClearCacheTs:function e(a){return t(Object(S["i"])(a))}}};var B=Object(o["connect"])(F,L)(D);var U=B;var q=a(3149);var W=new C["b"]("enterprise_dashboard");var H={orgName:d["b"].string,featureEKMPhase2:d["b"].bool};var G={orgName:"",featureEKMPhase2:false};var V="https://slack.com/enterprise-key-management";var K=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,a=t.orgName,r=t.featureEKMPhase2;if(!r)return null;return n.a.createElement("div",{className:"p-ekm_status_view__not_purchased display_flex flex_direction_column align_items_center"},n.a.createElement("div",{className:"p-ekm_status_view__not_purchased_img"}),n.a.createElement("h2",{"data-qa":"p-ekm-status-title",className:"p-ekm_status_view__title"},W.t("Enterprise Key Management")),n.a.createElement("p",{className:"p-ekm_status_view__not_purchased_text align_center"},W.rt("Adding Enterprise Key Management (EKM) to <strong>{orgName}</strong> allows you to encrypt all messages and files in your organization using your own encryption keys, giving you complete control of your data in Slack.",{orgName:a})),n.a.createElement(w["d"],{href:V,className:"no_underline"},W.t("Learn More")))}}]);return t}(r["PureComponent"]);K.displayName="EKMNotPurchasedView";K.defaultProps=G;var z=K;var Q=z;var Y={purchased:d["b"].bool,featureEKMPhase2:d["b"].bool};var J={purchased:false,featureEKMPhase2:false};function X(e){var t=e.featureEKMPhase2,a=e.purchased;if(t&&!a)return n.a.createElement(Q,e);return n.a.createElement(U,e)}X.displayName="EKMView";X.defaultProps=J;var Z=function e(t){return{featureEKMPhase2:Object(p["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var $=Object(o["connect"])(Z)(X);var ee=$;Object(c["a"])("interop.ekmStatus",{render:function e(t,a,r){if(!t)throw new Error("ekmStatus render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ee,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4519:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(3);var d=a.n(u);var p=a(49);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(0);var O=a(2);var C=a(31);var E=a(13);var S=a.n(E);var w=a(166);var I=a(6);var j=a(1643);function T(e){var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc,n=e.accessSetting;var i={name:t,domain:a};if(r||n)return d()({},i,{description:r,access_setting:n});return i}var A=a(37);var N=a.n(A);var M=a(10);var P=a.n(M);var R=a(52);var x=a(150);var D=a(441);var F=a(168);var L=new I["b"]("enterprise_dashboard");var B=/^[a-z0-9-]+$/i;var U=/[a-z]+/i;var q=/^[a-z0-9]/i;var W=/[a-z0-9]$/i;var H=void 0;function G(){H={empty_domain:L.t("Please fill in a workspace domain."),invalid_domain_characters:L.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:L.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:L.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(F["b"])(ie),empty_name:L.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(F["b"])(se),empty_description:L.t("Please fill in a workspace description."),maximum_description_length_reached:Object(F["b"])(oe)};return null}function V(e){return W.test(e)}function K(e){return e.length<=ie}function z(e){return e.length<=se}function Q(e){return e.length<=oe}function Y(e){return q.test(e)}function J(e){return e.trim().length>0}function X(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!J(e))return H.empty_name;if(!z(e))return H.maximum_workspace_name_length_reached;return""}function Z(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!J(e)||"organization"===e)return H.empty_domain;if(!K(e))return H.maximum_domain_length_reached;if(!B.test(e))return H.invalid_domain_characters;if(!U.test(e))return H.domain_minimum_one_letter;if(!Y(e)||!V(e))return H.domain_no_start_end_dash;return""}function $(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!J(e))return H.empty_description;if(!Q(e))return H.maximum_description_length_reached;return""}function ee(e){G();var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc;var n=X(t);var i=Z(a);var s=$(r);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var te={};Object.defineProperty(te,"isValidWorkspaceName",{get:function e(){return X},set:function e(t){X=t}});Object.defineProperty(te,"isValidWorkspaceDomain",{get:function e(){return Z},set:function e(t){Z=t}});Object.defineProperty(te,"isValidWorkspaceDescription",{get:function e(){return $},set:function e(t){$=t}});var ae=new I["b"]("enterprise_dashboard");var re={workspaceName:k["b"].string,workspaceDomain:k["b"].string,workspaceDesc:k["b"].string,errors:k["b"].object,onSubmit:k["b"].func.isRequired};var ne={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null};var ie=21;var se=255;var oe=255;var le=function e(t){Object(w["b"])(Object(w["a"])().teams.setCreateTeamErrors(t))};var ce=function e(t,a){Object(w["b"])(Object(w["a"])().teams.setCreateTeamError(t,a))};var ue=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={values:{workspaceDomain:a.props.workspaceDomain,workspaceName:a.props.workspaceName,workspaceDesc:a.props.workspaceDesc},errors:a.props.errors};return a}f()(t,[{key:"onInputChanged",value:function e(t,a){this.setFormValue(t,a);ce(t,"")}},{key:"setFormValue",value:function e(t,a){this.setState(function(e){return{values:d()({},e.values,P()({},t,a))}})}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.bind.apply(t,[this].concat(r))}},{key:"submit",value:function e(t){var a=ee(this.state.values);if(!Object(O["isEmpty"])(a)){le(a);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var a=t.suffix,r=t.name,i=N()(t,["suffix","name"]);return n.a.createElement(x["a"],d()({},i,{name:r,suffix:a,onChange:this.bindArgs(this.onInputChanged,r)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var a=Object(O["get"])(this.props.errors,"workspaceName");var r="workspace_input_name";var n={name:"workspaceName",inputLabel:ae.t("Workspace Name"),maxCharacterLimit:se,value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var a=Object(O["get"])(this.props.errors,"workspaceDomain");var r="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:ae.t("Workspace Domain"),hintText:ae.t("Letters, numbers, and hyphens only."),maxCharacterLimit:ie,suffix:ae.t(".slack.com"),placeholder:ae.t("workspace-url"),value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var a=Object(O["get"])(this.props.errors,"workspaceDesc");var r="workspace_input_description";var n={name:"workspaceDesc",inputLabel:ae.t("Workspace Description"),hintText:ae.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:oe,value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextareaElement(n)}},{key:"renderTextareaElement",value:function e(t){var a=t.labelId,r=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=N()(t,["labelId","inputLabel","sublabelText","id","name"]);return n.a.createElement(R["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},n.a.createElement(D["a"],d()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var a=t.inputLabel,r=t.labelId,i=t.sublabelText,s=t.id,o=N()(t,["inputLabel","labelId","sublabelText","id"]);return n.a.createElement(R["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},this.renderTextInput(d()({id:s},o)))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(r["Component"]);ue.displayName="CreateWorkspaceModalNameForm";ue.defaultProps=ne;var de=ue;var pe=a(170);var me=a(295);var he=new I["b"]("enterprise_dashboard");var ve={accessSetting:k["b"].string,onSubmit:k["b"].func.isRequired};var fe={accessSetting:null};var be=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={accessSetting:a.props.accessSetting};Object(C["a"])(a,["renderAccessSettingRadio","handleAccessSettingChange"]);return a}f()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var a=t.accessSetting!==this.props.accessSetting;a&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var a=this.getAccessSetting();this.props.onSubmit(a,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var a=this.state.accessSetting;var r=t.accessType,i=t.accessName,s=t.descriptionText;return n.a.createElement("div",{key:r},n.a.createElement(R["a"],{id:r,htmlFor:"workspace_access_type_"+r,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:s},n.a.createElement(pe["a"],{id:"workspace_access_type_"+r,value:r,onChange:this.handleAccessSettingChange,checked:r===a})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:he.t("Open"),descriptionText:he.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:he.t("By Request"),descriptionText:he.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:he.t("Invite Only"),descriptionText:he.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:he.t("Hidden"),descriptionText:he.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var a=t.map(this.renderAccessSettingRadio);return n.a.createElement(me["a"],{field:"workspaceAccessSetting",noTouch:true},a)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(r["Component"]);be.displayName="CreateWorkspaceModalAccessForm";be.defaultProps=fe;var ge=be;var _e=a(3123);var ye=new I["b"]("enterprise_dashboard");var ke={workspaceName:k["b"].string,workspaceDomain:k["b"].string,accessSetting:k["b"].string,workspaceDesc:k["b"].string,errors:k["b"].object,ui:k["b"].object,open:k["b"].bool,onSubmit:k["b"].func.isRequired,onCancel:k["b"].func.isRequired};var Oe={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",errors:{},ui:{},open:true};var Ce=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={workspaceName:a.props.workspaceName,workspaceDomain:a.props.workspaceDomain,workspaceDesc:a.props.workspaceDesc,accessSetting:a.props.accessSetting,isPending:false};Object(C["a"])(a,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return a}f()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,a){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},a)}},{key:"setAccessSetting",value:function e(t,a){this.setState(function(){return{accessSetting:t}},a)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnModalClose",value:function e(t){var a=this.props.open&&!t.open;a&&this.reset()}},{key:"reset",value:function e(){var t=Oe.workspaceName,a=Oe.workspaceDomain,r=Oe.workspaceDesc,n=Oe.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:a,workspaceDesc:r},O["noop"]);this.setAccessSetting(n);this.setPendingState(false)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function(){var e=Object(p["coroutine"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(p["resolve"])(this.props.onSubmit(t));case 2:this.setPendingState(false);case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"buildModalSteps",value:function e(){var t=this;var a=function e(){var a={header:ye.t("Set up your workspace"),subtitle:ye.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(a)};var r=function e(){var a={header:ye.t("Set access for this workspace"),subtitle:ye.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(a)};var n=function e(){var a=function e(){var a=t.state,r=a.workspaceName,n=a.workspaceDomain;Object(w["b"])(Object(w["a"])().teams.getWorkspaceInfoAvailability({workspaceName:r,workspaceDomain:n}))};t.chooseNameForm.submit(a)};var i=function e(){var a=t.getWorkspaceInfo();t.setPendingState(true);t.submit(T(a));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:a,goButtonText:ye.t("Next"),title:ye.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel,shouldCloseOnGo:false},{children:r,goButtonText:ye.t("Create Workspace"),title:ye.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(w["b"])(Object(w["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:ye.t("Cancel"),onCancel:this.props.onCancel,shouldCloseOnGo:false}];return o}},{key:"renderSubtitle",value:function e(t){if(t)return n.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var a=this.state,r=a.workspaceName,i=a.workspaceDomain,s=a.workspaceDesc;var o=this.props.errors;return n.a.createElement(de,{workspaceName:r,workspaceDomain:i,workspaceDesc:s,errors:o,onSubmit:this.setWorkspaceInfo,ref:function e(a){t.chooseNameForm=a}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var a=this.state.accessSetting;return n.a.createElement(ge,{accessSetting:a,onSubmit:this.setAccessSetting,ref:function e(a){t.accessSettingForm=a}})}},{key:"renderModalPane",value:function e(t){var a=t.header,r=t.subtitle,i=t.renderInnerPane;var s=S()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":r});return n.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},n.a.createElement("div",{className:"p-ent_workspace_create__pane"},n.a.createElement("div",{className:"p-ent_workspace_create__form"},n.a.createElement("h3",{className:s},a),this.renderSubtitle(r),i())))}},{key:"render",value:function e(){var t=this;var a=ye.t("Set up");var r=ye.t("Set access");var i=[a,r];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return n.a.createElement(j["a"],d()({},s,{ref:function e(a){t.createWorkspaceModalRef=a}}))}}]);return t}(r["Component"]);Ce.displayName="CreateWorkspaceModal";Ce.defaultProps=Oe;var Ee=Ce;var Se=Ee;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,a,r){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Se,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4523:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(0);var b=a(2084);var g=a(21);var _=a(35);var y=a(235);var k=a(236);var O=a(82);var C=a(11);var E=a(412);var S=a(6);var w=a(14);var I=new S["b"]("view");var j={title:f["b"].string.isRequired,totalUnreadHighlights:f["b"].number,logger:f["b"].object.isRequired};var T={totalUnreadHighlights:null};var A=0;var N=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){A&&this.props.logger.error("Multiple DocumentTitles mounted");A+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title===this.props.title&&t.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}},{key:"componentWillUnmount",value:function e(){A-=1;document.title=this.originalTitle}},{key:"updateTitle",value:function e(){var t=this.props,a=t.totalUnreadHighlights,r=t.title;var n=I.t("Slack");if(0===r.length){document.title=n;return}document.title=a?n+" | "+r+" | "+this.unreadHighlightsCountString():n+" | "+r}},{key:"unreadHighlightsCountString",value:function e(){return I.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);N.displayName="DocumentTitle";N.defaultProps=T;var M=function e(t){return{logger:Object(w["a"])({state:t}),totalUnreadHighlights:Object(k["getTotalUnreadHighlights"])(t)}};var P=Object(i["connect"])(M)(N);var R=P;var x={viewName:f["b"].string,teamName:f["b"].string,isWindowFocused:f["b"].bool.isRequired,highlightCount:f["b"].number.isRequired,unreadCount:f["b"].number.isRequired};var D={viewName:"",teamName:""};var F=function(e){v()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=!t.isWindowFocused&&(a.showHighlights||t.highlightCount>a.highlightCount);var n=!t.isWindowFocused&&(a.showUnreads||t.unreadCount>a.unreadCount);return{highlightCount:t.highlightCount,unreadCount:t.unreadCount,showHighlights:r,showUnreads:n}}}]);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={highlightCount:0,unreadCount:0,showHighlights:false,showUnreads:false};return a}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.viewName,r=t.teamName;if(!r)return null;var i=a?a+" | "+r:r;this.state.showHighlights?i="! "+i:this.state.showUnreads&&(i="* "+i);return n.a.createElement(R,{title:i})}}]);return t}(r["PureComponent"]);F.displayName="WorkspaceDocumentTitle";F.defaultProps=D;var L=F;var B=new S["b"]("view");var U=new S["b"]("welcome_place");var q={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var W=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(O["a"])(t);var r=Object(g["e"])(t,a);var i=Object(_["d"])(t);var s="";a===E["a"].allUnreads||"Punreads"===a?s=B.t("Unread Messages"):a===E["a"].allThreads?s=B.t("Threads"):"Pwelcome"===a?s=U.t("Get Started"):r&&(s=Object(C["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}));return n.a.createElement(L,{viewName:s,teamName:i&&i.name,isWindowFocused:!!Object(y["isWindowFocused"])(t),highlightCount:Object(k["getTotalUnreadHighlights"])(t),unreadCount:Object(k["getTotalUnreads"])(t)})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);W.displayName="ConnectedWorkspaceDocumentTitle";var H=W;var G=H;var V=function e(t,a){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(G,{store:r})),a)};var K=V;var z=a(46);Object(z["a"])("interop.mountDocumentTitle",K)},4524:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(237);var i=a(817);var s=a(392);var o=a(38);var l=a(82);var c=function e(t){if(false===Object(o["h"])(t,"seen_welcome_2"))return true;var a=Object(i["d"])(t);var r=Object(l["a"])(t);return!!(a.id&&a.id===r)};var u=a(17);var d=a(32);var p=a(332);var m=Object(u["b"])("Starts creator onboarding",function(e){return e(Object(n["fetchTeamCreationWorkflow"])()).then(function(t){var a=t&&"completed"!==t.state;return e(Object(s["a"])(a))})});m.meta={name:"startCreatorOnboarding",key:"onboardingStoreThunksStartCreatorOnboardingStartCreatorOnboarding",description:"Starts creator onboarding"};var h=a(49);var v=a(1167);var f=a(242);var b=a(764);var g=a(1472);var _=a(1593);var y=a(2);var k=a(317);var O=a(131);var C=void 0;var E=25;var S=Object(u["b"])("Starts the Joiner Landing Place onboarding experience",function(){var e=Object(h["coroutine"])(regeneratorRuntime.mark(function e(t,a){var r,n,i,o;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:r=a();n=Object(l["a"])(r);if(!Object(O["a"])(n)){c.next=8;break}i=t(Object(k["getOrFetchMemberCounts"])({channelId:n}));c.next=6;return Object(h["resolve"])(i.promise||Promise.resolve(i));case 6:o=c.sent;Object(y["get"])(o,"counts.member_count",E+1)<=E&&t(Object(s["c"])(true));case 8:return c.abrupt("return",t(Object(_["a"])()));case 9:case"end":return c.stop()}},e,C)}));return function(t,a){return e.apply(this,arguments)}}());S.meta={name:"startJoinerLandingPlace",key:"onboardingStoreThunksStartJoinerLandingPlaceStartJoinerLandingPlace",description:"Starts the Joiner Landing Place onboarding experience"};var w=Object(u["b"])("Starts joiner onboarding",function(){var e=Object(h["method"])(function(e,t){var a=t();if(Object(d["a"])()){e(Object(s["b"])(true));if(Object(p["n"])(a)){e(Object(_["a"])());return Promise.resolve()}return e(S())}if(Object(p["n"])(a)){e(Object(s["b"])(true));e(Object(_["a"])());if(Object(p["o"])(a)&&!Object(g["a"])(a)){e(Object(b["c"])());return e(Object(f["a"])({id:"Pwelcome",fromHistory:false,replaceHistoryState:false}))}return Promise.resolve()}return Object(v["f"])()});return function(t,a){return e.apply(this,arguments)}}());w.meta={name:"startJoinerOnboarding",key:"onboardingStoreThunksStartJoinerOnboardingStartJoinerOnboarding",description:"Starts joiner onboarding"};var I=Object(u["b"])("Start user onboarding if necessary",function(e,t){if(Object(d["a"])())return;var a=t();var r=Object(i["g"])(a);var n=Object(o["h"])(a,"onboarding_complete");if(r||n)return;var s=Object(o["h"])(a,"tractor_enabled");var l=!Object(o["h"])(a,"seen_welcome_2")||Object(p["n"])(a);s?e(m()):l&&e(w())});I.meta={name:"maybeStartOnboarding",key:"onboardingStoreThunksMaybeStartOnboardingMaybeStartOnboarding",description:"Start user onboarding if necessary"};var j=a(2010);Object(r["a"])("interop.onboarding",{fetchTeamCreationWorkflow:function e(){return TS.redux.dispatch(Object(n["fetchTeamCreationWorkflow"])())},showSecondAccountSetupBanner:function e(){return TS.redux.dispatch(Object(n["showSecondAccountSetupBanner"])())},isInOnboarding:function e(){return Object(i["g"])(TS.redux.getState())},isInCreatorOnboarding:function e(){return Object(i["e"])(TS.redux.getState())},isInJoinerOnboarding:function e(){return Object(i["f"])(TS.redux.getState())},setNoLongerInOnboarding:function e(){TS.redux.dispatch(Object(s["d"])())},shouldShowFirstWelcome:function e(){return c(TS.redux.getState())},setInJoinerOnboarding:function e(t){TS.redux.dispatch(Object(s["b"])(!!t))},getWelcomeModel:function e(){return Object(i["d"])(TS.redux.getState())},setWelcomeModel:function e(t){TS.redux.dispatch(Object(s["h"])(t))},maybeStartOnboarding:function e(){TS.redux.dispatch(I())},cancelOnboarding:function e(){TS.redux.dispatch(Object(j["a"])())}})},4526:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(0);var d=a(82);var p=a(427);var m=a(1312);var h={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired};var v=function e(t){var a=t.id,r=t.isEnabled;if(!a||!r)return null;var n=Object(m["a"])(a);return n.view(a)};v.propTypes=h;var f=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(p["e"])(t,a)}};var b=Object(o["connect"])(f)(v);var g=a(161);var _=function e(t,a){if(!t)throw new Error("mountPageView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(g["a"],null,n.a.createElement(b,null))),a)};var y=function e(t){s.a.unmountComponentAtNode(t)};var k=a(2027);var O=a(13);var C=a.n(O);var E=a(2023);var S={id:u["b"].string.isRequired,className:u["b"].string,legacy:u["b"].bool};var w={className:void 0,legacy:false};var I=function e(t){var a=t.id,r=t.className,i=t.legacy;if(!a)return null;var s=Object(m["a"])(a);if(s.header)return s.header({className:r});var o=C()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":i},r);return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},s.label()),n.a.createElement(E["a"],{regionId:"main",flex:true}))};I.displayName="PageHeader";I.defaultProps=w;var j=I;var T=a(3765);var A=a(3767);var N={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired};var M=function e(t){var a=t.id,i=t.isEnabled;Object(r["useEffect"])(function(){Object(k["b"])()},[]);if(!a||!i)return null;return n.a.createElement("div",{className:"p-pages__legacy_page_header"},n.a.createElement(j,{id:a,legacy:true}))};M.displayName="LegacyPageHeader";var P=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(p["e"])(t,a)}};var R=Object(o["connect"])(P)(M);var x=function e(t,a){if(!t)throw new Error("mountPageHeader must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(g["a"],null,n.a.createElement(R,null))),a)};var D=function e(t){s.a.unmountComponentAtNode(t)};var F=a(46);Object(F["a"])("interop.mountPageView",_);Object(F["a"])("interop.unmountPageView",y);Object(F["a"])("interop.mountPageHeader",x);Object(F["a"])("interop.unmountPageHeader",D)},4527:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(3);var p=a.n(d);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(0);var O=a(6);var C=a(86);var E=a(9);var S=a(34);var w=a(30);var I=a(14);var j=a(2);var T=function e(t){if(!t||"invalid_auth"===t.error)throw new Error("something is wrong");return t};var A=Object(w["a"])("Set Enterprise Security preferences",function(e,t,a){var r=a.disableUnmanagedDownloads,n=a.mobilePasscodeTimeout,i=a.requiredBrowserId,s=a.reason;var o={enterprise_mdm_disable_file_download:r,mobile_passcode_timeout_in_seconds:n};Object(j["isUndefined"])(i)||(o.ent_required_browser={browser_id:i});var l={prefs:JSON.stringify(Object(j["omitBy"])(o,j["isUndefined"]))};return e(Object(S["a"])({method:"enterprise.prefs.set",args:l,reason:s})).then(T).catch(function(e){var a="failed to set enterprise security preferences";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});A.meta={name:"setEnterpriseSecurityPrefs",key:"fetchersEnterpriseSecurityPreferencesApiSetEnterpriseSecurityPrefs",description:"Set Enterprise Security preferences"};A.propTypes={disableUnmanagedDownloads:k["b"].bool,mobilePasscodeTimeout:k["b"].number,reason:k["b"].string};var N=Object(w["a"])("Get Enterprise Security preferences",function(e,t,a){var r=a.reason;return e(Object(S["a"])({method:"enterprise.prefs.get",reason:r})).catch(function(e){var a="failed to get enterprise security preferences";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});N.meta={name:"getEnterpriseSecurityPrefs",key:"fetchersEnterpriseSecurityPreferencesApiGetEnterpriseSecurityPrefs",description:"Get Enterprise Security preferences"};N.propTypes={reason:k["b"].string};var M=Object(w["a"])("Set Enterprise Security preferences",function(e,t,a){var r=a.message,n=a.reason;return e(Object(S["a"])({method:"enterprise.auth.twofactor.enable",args:{message:r},reason:n})).then(T).catch(function(e){var a="failed to disable two-factor authentication";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});M.meta={name:"enable2FA",key:"fetchersEnterpriseSecurityPreferencesApiEnable2FA",description:"Set Enterprise Security preferences"};M.propTypes={message:k["b"].string,reason:k["b"].string};var P=Object(w["a"])("Set Enterprise Security preferences",function(e,t,a){var r=a.reason;return e(Object(S["a"])({method:"enterprise.auth.twofactor.disable",reason:r})).then(T).catch(function(e){var a="failed to disable two-factor authentication";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});P.meta={name:"disable2FA",key:"fetchersEnterpriseSecurityPreferencesApiDisable2FA",description:"Set Enterprise Security preferences"};P.propTypes={reason:k["b"].string};var R=Object(w["a"])("Set Enterprise Security preferences",function(e,t,a){var r=a.sessionDurationLength,n=a.sessionDurationType,i=a.reason;return e(Object(S["a"])({method:"enterprise.auth.session.set",args:{session_duration:r,session_duration_type:n},reason:i})).then(T).catch(function(e){var a="failed to set session duration";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});R.meta={name:"setSessionDuration",key:"fetchersEnterpriseSecurityPreferencesApiSetSessionDuration",description:"Set Enterprise Security preferences"};R.propTypes={sessionDurationLength:k["b"].number,sessionDurationType:k["b"].number,reason:k["b"].string};var x=Object(w["a"])("Set Enterprise Security preferences",function(e,t,a){var r=a.forceLogout,n=a.reason;return e(Object(S["a"])({method:"enterprise.auth.password.reset",args:{force_logout:r},reason:n})).then(T).catch(function(e){var a="failed to reset passwords";Object(I["a"])({getState:t}).error("Enterprise",a);throw e})});x.meta={name:"forcePasswordReset",key:"fetchersEnterpriseSecurityPreferencesApiForcePasswordReset",description:"Set Enterprise Security preferences"};x.propTypes={reason:k["b"].string};var D=a(526);var F=a(10);var L=a.n(F);var B=a(123);var U=a(170);var q=a(295);var W=a(52);var H=a(117);var G=a(118);var V=a(144);var K=a(162);var z=a(150);var Q=a(441);var Y=a(27);var J=a(95);var X=a(191);var Z=a(31);var $=a(1202);var ee=new O["b"]("enterprise_dashboard");var te={featureOrgModernSecurityPreferencesPage:k["b"].bool,mandatoryTwoFactorAuthentication:k["b"].bool,sessionDurationType:k["b"].number,forcePasswordReset:k["b"].bool,enable2FaMessage:k["b"].string.isRequired,enable2FA:k["b"].func.isRequired,disable2FA:k["b"].func.isRequired,setSessionDuration:k["b"].func.isRequired,forcePasswordResetFunction:k["b"].func.isRequired,enqueueToast:k["b"].func.isRequired,prefs:k["b"].object.isRequired};var ae={featureOrgModernSecurityPreferencesPage:false,mandatoryTwoFactorAuthentication:false,sessionDurationType:-1,forcePasswordReset:false};var re=Symbol("MANDATORY_TWO_FACTOR_AUTHENTICATION_SETTING");var ne=Symbol("LOGIN_SESSION_DURATION_SETTING");var ie=Symbol("FORCE_PASSWORD_RESET_SETTING");var se="radio";var oe=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={settingsItems:[{id:re,value:a.props.mandatoryTwoFactorAuthentication,saving:false,open:false,custom2FAMessage:""},{id:ne,value:a.props.sessionDurationType,saving:false,open:false,sessionDurationValue:"12"},{id:ie,value:a.props.forcePasswordReset,saving:false,open:false}],loading:true,custom2FAMessage:""};Object(Z["a"])(a,["onDisable","onEdit","onCancel","settingClicked"]);return a}f()(t,[{key:"componentDidMount",value:function e(){this.loadStateFromPrefs()}},{key:"componentDidUpdate",value:function e(t){Object(j["isEqual"])(t.prefs,this.props.prefs)||this.loadStateFromPrefs()}},{key:"onDisable",value:function e(t){var a=this;return function(){a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id===ne&&-1===e.value?0:e.value;a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:true},{k:"tempValue",v:r}])}}},{key:"onCancel",value:function e(t){var a=this;return function(){a.setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var a=this;return function(e){a.setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onRadioChange",value:function e(t){var a=this;return function(e){e.target.checked&&a.setSettingsItemKeys(t,[{k:"tempValue",v:parseInt(e.target.value,10)}])}}},{key:"settingClicked",value:function e(t){var a=this;return function(){return a.onEdit(t)()}}},{key:"setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(j["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,p()({},r[t],n));return{settingsItems:r}})}},{key:"loadStateFromPrefs",value:function e(){var t=this.props.prefs,a=t.two_factor_auth_required,r=t.session_duration,n=t.session_duration_type;this.setState(function(e){var t=e.settingsItems.slice();Object(j["find"])(t,{id:re}).value=!!a;var i=Object(j["find"])(t,{id:ne});i.value=n;i.sessionDurationValue=1===n?""+r:"12";return{settingsItems:t,loading:false}})}},{key:"saveSetting",value:function e(t){var a=this;return function(){return a.persistToApi(t)}}},{key:"persistToApi",value:function e(t){var a=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var r=this.state.settingsItems[t];var i={};var s=void 0;var o="";var l=this.props,c=l.enable2FA,u=l.disable2FA,d=l.setSessionDuration,p=l.forcePasswordResetFunction;switch(r.id){case re:if(r.editing){i.message=r.custom2FAMessage;r.tempValue=true;s=c;var m=ee.t("Mandatory two-factor authentication enabled");var h=ee.t("Mandatory two-factor authentication updated");o=r.value?h:m}else{r.tempValue=false;s=u;o=ee.t("Mandatory two-factor authentication disabled")}break;case ne:if(r.editing){i.sessionDurationType=r.tempValue;i.sessionDurationLength=1!==r.tempValue?r.tempValue:parseInt(r.sessionDurationValue,10);var v=ee.t("Session duration enabled");var f=ee.t("Session duration updated");o=-1!==r.value?f:v}else{r.tempValue=-1;i.sessionDurationLength=-1;i.sessionDurationType=-1;o=ee.t("Session duration disabled")}s=d;break;case ie:i.forceLogout=r.tempValue;s=p;o=ee.t("Password reset forced");break;default:return null}this.setSettingsItemKeys(t,[{k:"saving",v:true}]);return s(i).then(function(){a.setSettingsItemKeys(t,[{k:"value",v:r.tempValue}]);o&&a.props.enqueueToast({element:n.a.createElement(K["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,o))});a.setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}])}).catch(function(){a.setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}]);var e=ee.t("Something went wrong.");e&&a.props.enqueueToast({element:n.a.createElement(K["b"],null,n.a.createElement("strong",null,e))})})}},{key:"isInvalid",value:function e(t){var a=void 0;switch(t.id){case ne:a=parseFloat(t.sessionDurationValue);return!Object(j["isInteger"])(a)||a<12;default:return false}}},{key:"renderAlert",value:function e(t,a){if(a[t.id].alertText)return n.a.createElement(J["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,a[t.id].alertText));return null}},{key:"renderControl",value:function e(t,a,r){var i=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var s=ee.t("Add a message...");var o=ee.t("Your custom message goes here.");var l=ee.t("Slackbot");var c=ee.t("Customize Slackbot Message");switch(t.id){case ie:return n.a.createElement("p",null,n.a.createElement(W["a"],{text:r[t.id].controlText,type:"inline",cursor:"pointer"},n.a.createElement(B["a"],{name:"checkbox-"+a,checked:t.tempValue,onChange:this.onCheckboxChange(a)})));case ne:return n.a.createElement("div",{className:"p-security-preferences-view__div__session-duration"},n.a.createElement(q["a"],{field:se+"-"+a},n.a.createElement(W["a"],{text:ee.t("Sign users out when they close the application"),type:"inline",cursor:"pointer"},n.a.createElement(U["a"],{name:se+"-"+a,value:"0",checked:0===t.tempValue,onChange:this.onRadioChange(a)})),n.a.createElement(W["a"],{text:ee.t("Sign users out after a specific amount of hours (minimum 12)"),type:"inline",cursor:"pointer"},n.a.createElement(U["a"],{name:se+"-"+a,value:"1",checked:1===t.tempValue,onChange:this.onRadioChange(a)}))),1===t.tempValue&&n.a.createElement(z["a"],{className:"p-security-preferences-view__session-duration-input",min:"12",pattern:"\\d*",id:"login-session-duration",name:"login-session-duration",type:"number",useInlineAlert:true,value:t.sessionDurationValue,title:this.isInvalid(t)?ee.t("You must enter a whole number that is at least 12"):"",errorText:ee.t("You must enter a whole number that is at least 12"),onChange:function e(t){return i.setSettingsItemKeys(a,[{k:"sessionDurationValue",v:t}])}}));case re:return n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_container"},n.a.createElement("p",{className:"bold"}," ",c," "),n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_message"},n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_avatar"},n.a.createElement(X["a"],{size:36,imageUrl:"/img/slackbot/slackbot_72.png"})),n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_message_column"},n.a.createElement("p",{className:"bold"},l),n.a.createElement("p",null,n.a.createElement(G["a"],{text:this.props.enable2FaMessage})),n.a.createElement("p",{className:"p-security_preferences_view__2fa__message"},t.custom2FAMessage||n.a.createElement("em",null,o)))),n.a.createElement(Q["a"],{className:"p-security_preferences_view__2fa__slackbot_message_input",ariaDescribedby:"text-label-1",placeholder:s,size:"medium",id:"custom-slackbot-message",name:"custom-slackbot-message",onChange:function e(t){i.setSettingsItemKeys(a,[{k:"custom2FAMessage",v:t}])},value:t.custom2FAMessage}));default:return null}}},{key:"renderParagraphs",value:function e(t){return t.map(function(e){return n.a.createElement("p",{key:e},e)})}},{key:"renderSignInSettings",value:function e(){var t,a=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var r=(t={},L()(t,re,{label:ee.t("Mandatory Two-Factor Authentication"),disabledDescription:ee.t("You can choose to make two-factor authentication mandatory for all guests and owners signing in with an email address and password."),enabledDescription:ee.t("Guests and owners signing in with an email address and password must use two-factor authentication to sign in."),enabledState:ee.t("Enabled"),disabledState:ee.t("Disabled"),editModalText:[ee.t("Thanks for keeping your org's accounts safe and secure with mandatory two-factor authentication (2FA). Next, all members who don't use SSO and don't yet have 2FA set up will receive a Slackbot notification and an email about how to get set up."),ee.t("Members who don't set up 2FA within 24 hours will be logged out and prompted to set up 2FA before logging in again.")],disableModalText:[ee.t("This will allow guests and owners to sign in with an email address and password, and not require the use of two-factor authentication.")],modalButtonType:"primary",modalButtonConfirmationText:ee.t("Enable"),messge:""}),L()(t,ne,{label:ee.t("Session Duration"),disabledDescription:ee.t("You can choose to sign users out after a specific amount of time or upon closing the app."),enabledDescription:function e(t){var a=ee.rt("<strong>Sign users out when they close the application</strong>{break}Members will be signed out when they close Slack.",{break:n.a.createElement("br",null)});var r=ee.rt("<strong>Sign users out after {hours} hours</strong>{break}Members will be signed out after the specified time.",{hours:t.sessionDurationValue,break:n.a.createElement("br",null)});return 0===t.value?a:r},enabledState:ee.t("Enabled"),disabledState:ee.t("Disabled"),editModalText:[ee.t("Limiting session durations requires members to re-authenticate periodically. This can help increase security and prevent unauthorized access to your workspace.")],disableModalText:[ee.t("This will allow members to remain signed in to your organzation indefinitely without re-authenticating.")],alertText:ee.t("Note: Session duration only applies to the Slack desktop app and in a web browser. With session duration turned on, members won't be signed out of their Slack mobile apps."),modalButtonType:"primary",modalButtonConfirmationText:ee.t("Enable")}),L()(t,ie,{label:ee.t("Force Password Reset"),disabledDescription:ee.t("Force members who sign in with an email address and password to create a new password."),enabledState:"",disabledState:"",editModalText:[ee.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],disableModalText:[ee.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],editOnly:true,editButtonText:ee.t("Reset"),alertText:ee.t("Note: This will only reset passwords for members who don\u2019t sign in with SSO."),modalButtonType:"danger",modalButtonConfirmationText:ee.t("Reset Passwords"),controlText:ee.t("Also sign these members out of Slack")}),t);var i=function e(t){switch(t.id){case re:return t.value;case ne:return-1!==t.value;case ie:return false;default:return false}};var s=ee.t("Save");var o=function e(t){if(t.editing)return i(t)?s:r[t.id].modalButtonConfirmationText;return ee.t("Disable")};var l=function e(t){var a=r[t.id];var n=i(t)?a.enabledDescription:a.disabledDescription;if("function"===typeof n)return n(t);return n};return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},ee.t("Sign-in Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},ee.t("Choose how you want to secure users\u2019 sign in experience.")),this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement($["a"],{label:r[e.id].label,state:i(e)?r[e.id].enabledState:r[e.id].disabledState,description:l(e),onClick:a.settingClicked(t),type:"button",control:{enabled:i(e),type:"button",onEdit:a.onEdit(t),editOnly:r[e.id].editOnly,editButtonText:r[e.id].editButtonText,onEnable:a.onEdit(t),onDisable:a.onDisable(t)}}),n.a.createElement(H["a"],{closeModal:a.onCancel(t),isOpen:e.open,centered:true},n.a.createElement(H["g"],null,n.a.createElement(H["i"],{title:r[e.id].label})),n.a.createElement(H["c"],null,n.a.createElement(H["d"],null,e.editing?a.renderParagraphs(r[e.id].editModalText):a.renderParagraphs(r[e.id].disableModalText),e.editing?a.renderControl(e,t,r):null,a.renderAlert(e,r))),n.a.createElement(H["e"],null,n.a.createElement(H["f"],null,n.a.createElement(H["b"],{type:"outline"},ee.t("Cancel")),n.a.createElement(Y["b"],{type:e.editing?r[e.id].modalButtonType:"danger",onClick:a.saveSetting(t),loading:e.saving,disabled:a.isInvalid(e)},o(e))))))}))}},{key:"render",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",null,this.renderSignInSettings()))}}]);return t}(r["PureComponent"]);oe.displayName="SigninSettings";oe.defaultProps=ae;var le=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(E["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page")}};var ce=function e(t){return{enqueueToast:function e(){return t(V["enqueueToast"].apply(void 0,arguments))},enable2FA:function e(a){return t(M(p()({},a,{reason:"SecurityPreferencesView_enable2FA"})))},disable2FA:function e(a){return t(P(p()({},a,{reason:"SecurityPreferencesView_disable2FA"})))},setSessionDuration:function e(a){return t(R(p()({},a,{reason:"SecurityPreferencesView_setSessionDuration"})))},forcePasswordResetFunction:function e(a){return t(x(p()({},a,{reason:"SecurityPreferencesView_forcePasswordReset"})))}}};var ue=Object(o["connect"])(le,ce)(oe);var de=a(561);var pe=a(44);var me=a(16);var he;var ve=new O["b"]("enterprise_dashboard");var fe={featureOrgModernSecurityPreferencesPage:k["b"].bool,featureFeatBrowserControl:k["b"].bool,mobileDeviceApproval:k["b"].bool,disableUnmanagedDownloads:k["b"].bool,mobilePasscodeTimeout:k["b"].string,requiredBrowserId:k["b"].string,prefs:k["b"].object.isRequired,setEnterpriseSecurityPrefs:k["b"].func.isRequired,enqueueToast:k["b"].func.isRequired,user:k["b"].object};var be={featureOrgModernSecurityPreferencesPage:false,featureFeatBrowserControl:false,mobileDeviceApproval:false,disableUnmanagedDownloads:false,mobilePasscodeTimeout:"-1",requiredBrowserId:"",user:{}};var ge=Symbol("MOBILE_DEVICE_APPROVAL");var _e=Symbol("BLOCK_FILE_DOWNLOADS");var ye=Symbol("MOBILE_PASSCODE");var ke=Symbol("REQUIRED_BROWSER_ID");var Oe=(he={},L()(he,_e,"disableUnmanagedDownloads"),L()(he,ye,"mobilePasscodeTimeout"),L()(he,ke,"requiredBrowserId"),he);var Ce=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=[{id:ge,value:a.props.mobileDeviceApproval,saving:false,open:false},{id:_e,value:a.props.disableUnmanagedDownloads,saving:false,open:false},{id:ye,value:a.props.mobilePasscodeTimeout,saving:false,open:false}];e.featureFeatBrowserControl&&r.push({id:ke,value:a.props.requiredBrowserId,saving:false,open:false});a.state={settingsItems:r,loading:true};Object(Z["a"])(a,["onEnable","onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange"]);return a}f()(t,[{key:"componentDidMount",value:function e(){this.loadStateFromPrefs()}},{key:"componentDidUpdate",value:function e(t){Object(j["isEqual"])(t.prefs,this.props.prefs)||this.loadStateFromPrefs()}},{key:"onEnable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=void 0;switch(e.id){case _e:r=true;break;case ye:r="-1"===e.value?"900":e.value;break;case ke:a.props.featureFeatBrowserControl&&(r=e.value);break;default:break}a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:r}])}}},{key:"onDisable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=void 0;switch(e.id){case _e:r=false;break;case ye:r="-1";break;case ke:a.props.featureFeatBrowserControl&&(r="");break;default:break}a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false},{k:"disabling",v:true},{k:"tempValue",v:r}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:true},{k:"tempValue",v:e.value}])}}},{key:"onCancel",value:function e(t){var a=this;return function(){a.resetSettingItem(t)}}},{key:"settingClicked",value:function e(t){var a=this;return function(){a.isOn(a.state.settingsItems[t])?a.onDisable(t)():a.onEnable(t)()}}},{key:"setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(j["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,p()({},r[t],n));return{settingsItems:r}})}},{key:"resetSettingItem",value:function e(t){this.setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false},{k:"disabling",v:false},{k:"saving",v:false}])}},{key:"loadStateFromPrefs",value:function e(){var t=this;var a=this.props.prefs,r=a.enterprise_mdm_disable_file_download,n=a.mobile_passcode_timeout_in_seconds,i=a.ent_required_browser,s=a.enterpriseMdmLevel;this.setState(function(e){var a=e.settingsItems.slice();Object(j["find"])(a,{id:ge}).value=s;Object(j["find"])(a,{id:_e}).value=r;Object(j["find"])(a,{id:ye}).value=""+n;t.props.featureFeatBrowserControl&&(Object(j["find"])(a,{id:ke}).value=i&&i.browser_id);return{settingsItems:a,loading:false}})}},{key:"saveSetting",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id;var n=L()({},Oe[r],e.tempValue);n.mobilePasscodeTimeout&&(n.mobilePasscodeTimeout=+n.mobilePasscodeTimeout);a.persistToApi(n,t)}}},{key:"persistToApi",value:function e(t,a){var r=this;var i=this.state.settingsItems[a];var s=void 0;var o=void 0;var l=void 0;var c=void 0;if(this.props.featureOrgModernSecurityPreferencesPage){switch(i.id){case _e:o=ve.t("File downloads and copying blocked");l=ve.t("File downloads and copying allowed");break;case ye:o=ve.t("Mobile passcode enabled");l=ve.t("Mobile passcode disabled");c=ve.t("Mobile passcode updated");break;case ke:if(this.props.featureFeatBrowserControl){o=ve.t("Blackberry Access is now mandatory for unmanaged devices");l=ve.t("Mandatory mobile browser disabled")}break;default:break}s=i.editing?c:i.disabling?l:o}this.setSettingsItemKeys(a,[{k:"saving",v:true}]);return this.props.setEnterpriseSecurityPrefs(t).then(function(){r.setSettingsItemKeys(a,[{k:"value",v:i.tempValue}]);s&&r.props.enqueueToast({element:n.a.createElement(K["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,s))});r.resetSettingItem(a)}).catch(function(){var e=r.props.featureOrgModernSecurityPreferencesPage?ve.t("Something went wrong."):"";e&&r.props.enqueueToast({element:n.a.createElement(K["b"],null,n.a.createElement("strong",null,e))});r.resetSettingItem(a)})}},{key:"isOn",value:function e(t){switch(t.id){case ge:return!!t.value;case _e:return t.value;case ye:return"-1"!==t.value;case ke:return!!t.value;default:return false}}},{key:"renderAlert",value:function e(t,a){if(a[t.id].alertText)return n.a.createElement(J["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,a[t.id].alertText));return null}},{key:"renderControl",value:function e(t,a){var r=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var i=ve.t("Immediately");var s=ve.t("After 5 minutes");var o=ve.t("After 15 minutes");var l=ve.t("After 30 minutes");var c=ve.t("After 1 hour");var u=[{label:i,value:"0"},{label:s,value:"300"},{label:o,value:"900"},{label:l,value:"1800"},{label:c,value:"3600"}];var d=ve.t("Please select an option");var p=ve.t("Require mobile passcode:");switch(t.id){case ye:return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__mobile_passcode__select_label"},p),n.a.createElement(de["a"],{className:"p-security_preferences_view__mobile_passcode__select",options:u,ariaLabel:d,selectId:"mobile-passcode-timeframe",width:"100%",selectedOption:Object(j["find"])(u,{value:t.tempValue}),onOptionSelected:function e(t){return r.setSettingsItemKeys(a,[{k:"tempValue",v:t.value}])}}));case ke:if(!this.props.featureFeatBrowserControl)return null;var m=ve.t("Select a browser\u2026");var h=[{label:ve.t("Blackberry Access"),value:"blackberry_access"}];var v=function e(t){return n.a.createElement("div",{className:"p-security_preferences_view__required_browser__select__item"},n.a.createElement("div",{className:"p-security_preferences_view__required_browser__select__item__icon p-security_preferences_view__required_browser__select__item__icon--"+t.value}),n.a.createElement("div",null,t.label))};return n.a.createElement(de["a"],{className:"p-security_preferences_view__required_browser__select",options:h,ariaLabel:m,selectId:"required-browser-name",width:"100%",selectedOption:Object(j["find"])(h,{value:t.tempValue}),onOptionSelected:function e(t){return r.setSettingsItemKeys(a,[{k:"tempValue",v:t.value}])},renderOption:v,renderSelectedOption:v});default:return null}}},{key:"renderParagraphs",value:function e(t){if(Object(j["isEmpty"])(t))return null;return t.map(function(e){return n.a.createElement("p",{key:e},e)})}},{key:"renderDeviceSettings",value:function e(){var t,a=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var i=Object(me["isEnterpriseOwner"])(this.props.user);var s=i?"":ve.t("Only Org Owners can change this setting");var o=(t={},L()(t,ge,{label:ve.t("Mobile Device Approval"),enabledDescription:function e(t){if(1===t.value)return ve.rt("<strong> Required for all users</strong><br></br> All users must use an approved mobile device.");if(2===t.value)return ve.rt("<strong>Required for all users, except guests</strong><br></br> All users must use an approved mobile device, except guest accounts.");return ve.rt("<strong>Optional for all users</strong><br></br> Members can opt-in to mobile device management, but they can still access Slack from an unmanaged device.")},disabledDescription:ve.t("Any mobile device can be used to access Slack."),onState:ve.t("Enabled"),offState:ve.t("Disabled"),modalButtonType:"primary",modalButtonConfirmationText:ve.t("Enable"),descriptionAlerts:[ve.t("Enterprise mobility management settings at the organization level require a two-step confirmation to ensure Slack is set up with your EMM tool correctly."),ve.rt("<Link>Contact Slack</Link> to change your mobile security settings.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(pe["a"],{key:t,href:"mailto:feedback@slack.com"},a)})],noButton:true,readOnly:true,managedByEMM:false}),L()(t,_e,{label:ve.t("Block File Downloads and Copying"),enabledDescription:ve.t("Users on unmanaged mobile devices will not be able to download files or copy data out of Slack."),disabledDescription:ve.t("You can choose to prevent members from downloading files or copying data out of Slack."),onState:ve.t("Enabled"),offState:ve.t("Disabled"),alertText:ve.t("Note: This will only apply to downloads and copying on mobile devices."),modalButtonType:"primary",modalButtonConfirmationText:ve.t("Enable"),toggleOnly:true,editModalText:[ve.t("When enabled, downloading of files and copying of content will be blocked on any mobile device that isn\u2019t enrolled in mobile device management.")],disableModalText:[ve.t("This will allow members of your organization to download files and copy data out of the Slack mobile app on unmanaged devices.")],readOnly:!i,readonlyTooltip:s,managedByEMM:true}),L()(t,ye,{label:ve.t("Mobile Passcode"),enabledDescription:function e(t){if("0"===t.value)return ve.rt("<strong>Required immediately for unmanaged devices</strong><br></br>Members using unmanaged mobile devices will be immediately prompted for additional authentication when opening Slack.");return ve.rt("<strong>Required after {minutes} minutes for unmanaged devices</strong><br></br>Members using unmanaged mobile devices will be prompted for additional authentication when opening Slack after the specified time.",{minutes:Math.round(t.value/60)})},disabledDescription:ve.t("You can choose to have members set a passcode to access Slack from unmanaged mobile devices."),onState:ve.t("Enabled"),offState:ve.t("Disabled"),alertText:ve.t("Note: This setting will only apply to members who access Slack from an unmanaged mobile device. Settings for other members are controlled by your EMM service."),modalButtonConfirmationText:ve.t("Save"),controlText:ve.t("Also sign these members out of Slack"),editModalText:[ve.t("When enabled, all members who access Slack from a unmanaged mobile device will be required to enter a passcode after a set amount of time away from the app."),ve.t("Depending on their device, members may also have the option to use biometric authentication such as a fingerprint or facial scan.")],disableModalText:[ve.t("This will allow members on unmanaged mobile devices to access Slack without the use of a passcode.")],readOnly:!i,readonlyTooltip:s,managedByEMM:true}),t);this.props.featureFeatBrowserControl&&(o[ke]={label:ve.t("Mandatory Mobile Browser"),enabledDescription:n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"bold"},ve.t("Blackberry Access")),n.a.createElement("div",null,ve.t("Members on unmanaged mobile devices must use this browser to sign in with SSO and open external links."))),disabledDescription:ve.t("You can force the use of a specific browser for external links and SSO authentication on unmanaged mobile devices."),onState:ve.t("Enabled"),offState:ve.t("Disabled"),alertText:ve.t("Note: This setting will only apply to members who access Slack from an unmanaged mobile device. Settings for other members are controlled by your EMM service."),modalButtonConfirmationText:ve.t("Enable"),editModalText:[ve.t("If enabled, all SSO sign-in attempts and outbound links will go through the specified browser for members using unmanaged devices.")],disableModalText:[ve.t("Once disabled, members on unmanaged mobile devices will be able to use whatever browser they choose to sign in with SSO and open external links.")],toggleOnly:true,readOnly:!i,readonlyTooltip:s,managedByEMM:true});var l=ve.t("Save");var c=function e(t){if(!t.disabling)return a.isOn(t)?l:o[t.id].modalButtonConfirmationText;return ve.t("Disable")};var u=1===Object(j["find"])(this.state.settingsItems,{id:ge}).value;var d=function e(t){return o[t.id].managedByEMM&&u};var p=function e(t){if(d(t))return"";return a.isOn(t)?o[t.id].onState:o[t.id].offState};var m=ve.t("This setting is controlled by your EMM service.");var h=function e(t){if(d(t))return m;var r=o[t.id];var n=a.isOn(t)?r.enabledDescription:r.disabledDescription;if("function"===typeof n)return n(t);return n};var v=function e(t){if(!a.props.featureFeatBrowserControl)return false;switch(t.id){case ke:return!t.disabling&&!t.tempValue;default:return false}};return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},ve.t("Device Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},ve.t("Configure settings for access to Slack and files from managed devices")),this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement($["a"],{label:o[e.id].label,state:p(e),readonly:o[e.id].readOnly||d(e),readonlyTooltip:o[e.id].readonlyTooltip,noButton:o[e.id].noButton||d(e),description:h(e),onClick:a.settingClicked(t),type:"button",descriptionAlerts:o[e.id].descriptionAlerts,control:{type:"button",enabled:a.isOn(e),onEnable:a.onEnable(t),onDisable:a.onDisable(t),onEdit:a.onEdit(t),toggleOnly:o[e.id].toggleOnly}}),n.a.createElement(H["a"],{closeModal:a.onCancel(t),isOpen:e.open,centered:true},n.a.createElement(H["g"],null,n.a.createElement(H["i"],{title:o[e.id].label})),n.a.createElement(H["c"],null,n.a.createElement(H["d"],null,e.disabling?a.renderParagraphs(o[e.id].disableModalText):a.renderParagraphs(o[e.id].editModalText),!e.disabling&&a.renderControl(e,t),a.renderAlert(e,o))),n.a.createElement(H["e"],null,n.a.createElement(H["f"],null,n.a.createElement(H["b"],{type:"outline"},ve.t("Cancel")),n.a.createElement(Y["b"],{type:e.disabling?"danger":o[e.id].modalButtonType,onClick:a.saveSetting(t),loading:e.saving,disabled:v(e)},c(e))))))}))}},{key:"render",value:function e(){return this.props.featureOrgModernSecurityPreferencesPage?n.a.createElement("div",null,n.a.createElement("div",null,this.renderDeviceSettings())):null}}]);return t}(r["PureComponent"]);Ce.displayName="DeviceSettings";Ce.defaultProps=be;var Ee=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(E["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page"),featureFeatBrowserControl:Object(E["isFeatureEnabled"])(t,"feature_feat_browser_control")}};var Se=function e(t){return{enqueueToast:function e(){return t(V["enqueueToast"].apply(void 0,arguments))},setEnterpriseSecurityPrefs:function e(a){return t(A(p()({},a,{reason:"SecurityPreferencesView_setEnterpriseSecurityPrefs"})))}}};var we=Object(o["connect"])(Ee,Se)(Ce);var Ie=a(3163);var je=new O["b"]("enterprise_dashboard");var Te={featureOrgModernSecurityPreferencesPage:k["b"].bool,getEnterpriseSecurityPrefs:k["b"].func.isRequired,enable2FaMessage:k["b"].string.isRequired,user:k["b"].object};var Ae={featureOrgModernSecurityPreferencesPage:false,user:{}};var Ne=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={lockedPrefs:{},orgPrefs:{},loading:true};return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEnterpriseSecurityPrefs().then(function(e){var a=e.locked_prefs,r=e.org_prefs;t.setState(function(){return{lockedPrefs:a,orgPrefs:r,loading:false}})});document.body.classList.add("p-security_preferences_view__body-position-static")}},{key:"componentWillUnmount",value:function e(){document.body.classList.remove("p-security_preferences_view__body-position-static")}},{key:"render",value:function e(){return this.props.featureOrgModernSecurityPreferencesPage?n.a.createElement("div",{className:"p-security_preferences_view"},n.a.createElement("h1",{className:"p-security_preferences_view__title"},je.t("Security Settings")),this.state.loading?n.a.createElement(C["a"],{color:"blue",size:"jumbo"}):n.a.createElement("div",null,n.a.createElement(ue,{enable2FaMessage:this.props.enable2FaMessage,prefs:this.state.lockedPrefs}),n.a.createElement(we,{prefs:p()({},this.state.lockedPrefs,{enterpriseMdmLevel:this.state.orgPrefs.enterprise_mdm_level}),user:this.props.user})),n.a.createElement(D["a"],{style:{position:"fixed",bottom:0,right:0}})):null}}]);return t}(r["PureComponent"]);Ne.displayName="SecurityPreferencesView";Ne.defaultProps=Ae;var Me=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(E["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page")}};var Pe=function e(t){return{getEnterpriseSecurityPrefs:function e(){return t(N({reason:"SecurityPreferencesView_getEnterpriseSecurityPrefs"}))}}};var Re=Object(o["connect"])(Me,Pe)(Ne);var xe=Re;Object(c["a"])("interop.securityPreferences",{render:function e(t,a,r){if(!t)throw new Error("securityPreferences render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(xe,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4528:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(26);var p=a.n(d);var m=a(3);var h=a.n(m);var v=a(48);var f=a.n(v);var b=a(5);var g=a.n(b);var _=a(4);var y=a.n(_);var k=a(7);var O=a.n(k);var C=a(8);var E=a.n(C);var S=a(0);var w=a(2);var I=a(9);var j=a(34);var T=a(30);var A=a(14);var N=Object(T["a"])("Get payment company info",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(j["a"])({reason:r,method:"enterprise.payments.companyGet"})).catch(function(e){var a="failed to get payment company info";Object(A["a"])({getState:t}).error("payments",a);throw e})});N.meta={name:"getCompany",key:"fetchersPaymentsApiGetCompany",description:"Get payment company info"};N.propTypes={reason:S["b"].string.isRequired};var M=Object(T["a"])("Get payments contact list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(j["a"])({reason:r,method:"enterprise.payments.contactsList"})).catch(function(e){var a="failed to get payment contact list";Object(A["a"])({getState:t}).error("payments",a);throw e})});M.meta={name:"getContacts",key:"fetchersPaymentsApiGetContacts",description:"Get payments contact list"};M.propTypes={reason:S["b"].string.isRequired};var P=a(1155);var R=a(166);var x=a(345);var D=a(191);var F=a(23);var L=a(13);var B=a.n(L);var U=a(6);var q=a(86);var W=a(3143);var H={loading:S["b"].bool};var G={loading:false};function V(e){var t=e.loading;if(!t)return null;return n.a.createElement("div",{className:"p-billing_loading"},n.a.createElement("div",{className:"p-billing_loading__overlay"}),n.a.createElement("div",{className:"p-billing_loading__content"},n.a.createElement(q["a"],null)))}V.displayName="LoadingState";V.defaultProps=G;var K=V;var z=K;var Q=a(3145);var Y={getTeamPaidFeatures:S["b"].func.isRequired,getPaymentsCompany:S["b"].func.isRequired,getPaymentsContacts:S["b"].func.isRequired,setOrgError:S["b"].func.isRequired,featureEKMPhase2:S["b"].bool,orgName:S["b"].string};var J={featureEKMPhase2:false,orgName:void 0};var X=new U["b"]("enterprise_dashboard");var Z=function(e){E()(t,e);function t(e){g()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={billingOverviewLoading:true};return a}y()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureEKMPhase2)return;this.getBillingOverview()}},{key:"getBillingOverview",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return;var a=this.props,r=a.getTeamPaidFeatures,n=a.getPaymentsCompany,i=a.getPaymentsContacts,s=a.setOrgError;this.setState(function(){return{billingOverviewLoading:true}});var o={reason:"enterprise-billing-dashboard"};Promise.all([r(o),n(o),i(o)]).then(function(e){var a=f()(e,3),r=a[0],n=a[1],i=a[2];t.setState(function(){return{billingOverviewLoading:false,billingCompanyName:n.billing_company_name,billingCompanyAddress:h()({},n.address_fields),billingContacts:i.billing_contacts,paidFeatures:r}})}).catch(function(){s({message:X.t("We couldn\u2019t load your organization\u2019s billing information."),retryAction:function e(){return t.getBillingOverview()},retry_message:X.t("Try again")});t.setState(function(){return{billingOverviewLoading:false}})})}},{key:"getMemberType",value:function e(t){if(t.is_primary_owner)return X.t("Primary Org Owner");if(t.is_owner)return X.t("Org Owner");if(t.is_admin)return X.t("Org Admin");if(t.profile)return X.t("Member");return X.t("Not In Organization")}},{key:"hasELA",value:function e(){var t=this.state.paidFeatures,a=void 0===t?{}:t;return a.is_ela}},{key:"renderNoELAMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;if(this.state.billingOverviewLoading)return null;var t=this.props.orgName;var a=void 0;a=t?X.rt("No ELA information available for <strong>{orgName}</strong>",{orgName:t}):X.t("No ELA information available for your organization.");return n.a.createElement("div",{className:"licensing_table_row--no_ela"},a)}},{key:"renderLicensingTable",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.hasELA();return n.a.createElement("div",{className:"p-billing_overview__licensing_table"},n.a.createElement("div",{className:"licensing_table_row licensing_table_header"},n.a.createElement("div",{className:"licensing_table_cell"},X.t("Annual license")),t&&n.a.createElement("div",{className:"licensing_table_cell"},X.t("Renewal date"))),t?this.renderLicensingTableRows():this.renderNoELAMessage())}},{key:"renderLicensingTableRows",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,a=t.billingOverviewLoading,r=t.paidFeatures;r=void 0===r?{}:r;var i=r.level,s=r.add_ons;if(a)return null;var o=[h()({},i,{typeName:X.t("Enterprise License Agreement")})].concat(p()(s.map(function(e){return h()({},e,{typeName:X.t("Add-on")})})));return o.map(function(e){return n.a.createElement("div",{key:Object(w["uniqueId"])(e.feature_id+"_"),className:"licensing_table_row"},n.a.createElement("div",{className:"licensing_table_cell"},n.a.createElement("div",{className:"bold"},e.name),n.a.createElement("div",{className:"sk_foreground_max"},e.typeName)),n.a.createElement("div",{className:"licensing_table_cell"},Object(x["a"])(e.term.end_ts,"{date}")))})}},{key:"renderBillingCompanyInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,a=t.billingOverviewLoading,r=t.billingCompanyName,i=t.billingCompanyAddress;if(a)return null;if(!r&&Object(w["isEmpty"])(i))return n.a.createElement("div",null,X.t("No company information"));return n.a.createElement("div",null,r&&n.a.createElement("div",{className:"bold"},r),i.street1&&n.a.createElement("div",{className:"sk_foreground_max"},i.street1),i.street2&&n.a.createElement("div",{className:"sk_foreground_max"},i.street2),(i.city||i.state)&&n.a.createElement("div",{className:"sk_foreground_max"},i.city&&i.city,i.city&&i.state&&", ",i.state&&i.state),i.zip&&n.a.createElement("div",{className:"sk_foreground_max"},i.zip),i.country&&n.a.createElement("div",{className:"sk_foreground_max"},i.country),i.vat_id&&n.a.createElement("div",{className:"sk_foreground_max"},"VAT ID: "+i.vat_id),i.abn_id&&n.a.createElement("div",{className:"sk_foreground_max"},"ABN ID: "+i.abn_id))}},{key:"renderAvatar",value:function e(t){var a=t.profile;var r=a&&a.image_48;var i=B()("p-biling_overview__billing_contact_avatar",{"p-biling_overview__billing_contact_avatar--no_profile":!r});if(r)return n.a.createElement("div",{className:i},n.a.createElement(D["a"],{size:36,imageUrl:a.image_48}));return n.a.createElement("div",{className:i},n.a.createElement(F["b"],{type:"user"}))}},{key:"renderBillingContact",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.real_name;var r=t.profile&&t.profile.email||t.email;return n.a.createElement("div",{key:t.id,className:"p-biling_overview__billing_contact"},this.renderAvatar(t),n.a.createElement("div",null,a&&n.a.createElement("div",{className:"bold"},a),r&&n.a.createElement("div",{className:"sk_foreground_max"},r),n.a.createElement("div",{className:"sk_foreground_max bold"},this.getMemberType(t))))}},{key:"renderBillingContacts",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return null;var a=this.state,r=a.billingOverviewLoading,i=a.billingContacts,s=void 0===i?[]:i;if(r)return null;if(!s.length)return n.a.createElement("div",{className:"p-biling_overview__billing_contact--none"},X.t("No billing contacts"));return s.map(function(e){return t.renderBillingContact(e)})}},{key:"renderBillingInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-biling_overview__billing_info_titles"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},X.t("Company")),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},X.t("Billing contacts"))),n.a.createElement("div",{className:"p-biling_overview__billing_info_content"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingCompanyInfo()),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingContacts())))}},{key:"render",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",{className:"p-billing_overview","data-enterprise-billing-overview":true,"data-name":"enterprise_billing_overview"},n.a.createElement("h1",{className:"p-billing_overview__title"},X.t("Billing Overview")),n.a.createElement("p",{className:"p-billing_overview__title_description"},X.t("Below is a summary of your billing information. Upon renewal of your Enterprise License Agreement, we\u2019ll review any increased usage or add-on products to calculate a new rate. For additional invoicing information, please reach out to your Account Executive.")),n.a.createElement("div",{className:"p-billing_overview__container"},n.a.createElement("div",{className:"p-billing_overview__content"},n.a.createElement("div",{className:"p-billing_overview__licensing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},X.t("Licensing")),this.renderLicensingTable()),n.a.createElement("div",{className:"p-billing_overview__billing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},X.t("Billing Information")),this.renderBillingInfo())),n.a.createElement(z,{loading:this.state.billingOverviewLoading})))}}]);return t}(r["PureComponent"]);Z.displayName="BillingOverview";Z.defaultProps=J;var $=function e(t){return{featureEKMPhase2:Object(I["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var ee=function e(t){return{getTeamPaidFeatures:function e(a){return t(Object(P["c"])(a))},getPaymentsCompany:function e(a){return t(N(a))},getPaymentsContacts:function e(a){return t(M(a))},setOrgError:function e(a){return t(Object(R["a"])().org.setOrgError(a))}}};var te=Object(o["connect"])($,ee)(Z);var ae=te;Object(c["a"])("interop.billingOverview",{render:function e(t,a,r){if(!t)throw new Error("billingOverview render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ae,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4529:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(3);var i=a.n(n);function s(e,t){return e.map(function(e){return i()({},e,{items:e.items.map(function(e){return{label:t[e],value:e}})})})}var o=a(2);function l(e){return Object(o["flatten"])(e.map(function(e){return e.items}))}function c(e,t){return e.map(function(e){return i()({},e,{items:Object(o["difference"])(e.items,t)})}).filter(function(e){var t=e.items;return t&&t.length})}function u(e,t,a){var r=Object(o["intersection"])(l(e),t);return r.map(function(e){return{label:a[e]}})}var d="interop.enterpriseAnalytics";Object(r["a"])(d+".addLabelAndValueToGroupItems",s);Object(r["a"])(d+".getItemKeysFromGroups",l);Object(r["a"])(d+".filterGroups",c);Object(r["a"])(d+".formatDisabledOptions",u)},4531:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(128);var p=a(29);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(0);var O=a(31);var C=a(6);var E=a(865);var S=a(921);var w=a(21);var I=a(751);var j=a(853);var T=a(16);var A=a(11);var N=a(23);var M=a(118);var P=a(102);var R=a(27);var x=a(189);var D=a(152);var F=a(3329);var L={invite:k["b"].object.isRequired,approveRequest:k["b"].func.isRequired,denyRequest:k["b"].func.isRequired,removeRow:k["b"].func.isRequired,channels:k["b"].array,requesterNames:k["b"].array};var B={channels:[],requesterNames:[]};var U=new C["b"]("admin");var q=1e3;var W=200;var H=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["onClickApprove","onClickDeny","onDeleteAnimationTick","onDeleteAnimationEnd","setRef","startDeleteAnimation"]);a.rowRef=null;a.deleteAnimation=null;a.rollupRequestsCutoff=3;a.state={isApproving:false,isApproved:false,isDenying:false,isDenied:false,height:null,opacity:1};return a}f()(t,[{key:"componentWillUnmount",value:function e(){if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClickApprove",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.approveRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isApproving:true}});n(r).then(function(){t.setState(function(){return{isApproving:false,isApproved:true}});setTimeout(t.startDeleteAnimation,q)})}},{key:"onClickDeny",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.denyRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isDenying:true}});n(r).then(function(){t.setState(function(){return{isDenying:false,isDenied:true}});setTimeout(t.startDeleteAnimation,q)})}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.rowRef)return;this.setState(function(){return{height:a,opacity:.01*a}},r)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.invite;this.props.removeRow(t);this.deleteAnimation=null}},{key:"setRef",value:function e(t){this.rowRef=t}},{key:"startDeleteAnimation",value:function e(){if(!this.rowRef)return;var t=this.rowRef.clientHeight;this.deleteAnimation=Object(j["a"])({fromValue:t,toValue:0,duration:W,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"maybeRenderGuestTimeLimit",value:function e(){var t=this.props.invite;if(t.expiration_ts){var a=Object(I["a"])(t.expiration_ts,{omitTime:true,dateFormat:"MMM D, YYYY"});return s.a.createElement("div",{className:"p-admin_invites_row__text"},U.t("Deactivate on {date}",{date:a}))}return null}},{key:"maybeRenderRequesterMessage",value:function e(){var t=this.props.invite;if(t.requester_message){var a=s.a.createElement(M["a"],{text:t.requester_message,emojiSize:P["a"].SMALL,noJumbomoji:true,noHighlights:true});return s.a.createElement("div",{className:"p-admin_invites_row__text"},U.rt('"{message}"',{message:a}))}return null}},{key:"renderInviteInfo",value:function e(){var t=this.props.invite;var a=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},t.email));t.real_name&&(a=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},t.real_name)," ",s.a.createElement("span",null,"(",t.email,")")));return s.a.createElement("div",{className:"p-admin_invites_row__info"},a,s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderMemberTypeAndChannels()),this.maybeRenderGuestTimeLimit(),s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderInviters()),this.maybeRenderRequesterMessage())}},{key:"renderMemberTypeAndChannels",value:function e(){var t=this.props,a=t.invite,r=t.channels;if("restricted"!==a.invite_type&&"ultra_restricted"!==a.invite_type)return U.t("Full Member");if(!r||!r.length)return null;var n=Object(u["filter"])(r,function(e){return Object(A["isUnknownOrNonExistent"])(e)});if(n.length){if("ultra_restricted"===a.invite_type)return U.rt("Single-Channel Guest: 1 private channel");var i=Object(u["filter"])(r,function(e){return!Object(A["isUnknownOrNonExistent"])(e)});var o=Object(C["i"])(i.map(function(e){return s.a.createElement(D["a"],{channel:e,inline:true})}),{react:true,noConj:true});if(0===i.length)return U.rt("Multi-Channel Guest: {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{hiddenPrivateChannelsCount:n.length});if(1===i.length)return U.rt("Multi-Channel Guest: {knownChannel} and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannel:o,hiddenPrivateChannelsCount:n.length});return U.rt("Multi-Channel Guest: {knownChannels}, and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannels:o,hiddenPrivateChannelsCount:n.length})}var l=Object(C["i"])(r.map(function(e){return s.a.createElement(D["a"],{channel:e,inline:true})},{react:true}));if("restricted"===a.invite_type)return U.rt("Multi-Channel Guest: {channels}",{channels:l});if("ultra_restricted"===a.invite_type)return U.rt("Single-Channel Guest: {channel}",{channel:l});return null}},{key:"renderInviters",value:function e(){var t=this.props,a=t.requesterNames,r=t.invite;var n=void 0;a.length<this.rollupRequestsCutoff&&(n=Object(C["i"])(a.map(function(e,t){var a=r.inviters[t];return s.a.createElement(x["a"],{href:"/team/"+a,target:"_blank",rel:"noopener noreferrer"},e)}),{react:true,noEscape:true}));var i=Object(I["a"])(r.date_create,{omitTime:true,dateFormat:"MMM D, YYYY"});if(a.length<this.rollupRequestsCutoff)return U.rt("Requested by {users} on {date}",{users:n,date:i});return U.rt("Requested by {user} and {numOtherRequesters, plural, =1 {# other} other {# others}} on {date}",{user:s.a.createElement(x["a"],{href:"/team/"+r.inviters[0],target:"_blank",rel:"noopener noreferrer"},a[0]),numOtherRequesters:a.length-1,date:i,fallbackHash:"38844e8506c2847e8978bd6feefe4a96c18fc874"})}},{key:"renderInviteActions",value:function e(){var t=this.state,a=t.isApproving,r=t.isDenying,n=t.isApproved,i=t.isDenied;if(a||n)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(R["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:a&&!n,disabled:true},n?s.a.createElement(N["b"],{type:"check-small",inline:true}):null,n?U.t("Invitation sent"):U.t("Sending")));if(r||i)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(R["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:r&&!i,disabled:true},i?U.t("Denied"):U.t("Denying")));return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(R["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickApprove,size:"small"},U.t("Send Invitation")),s.a.createElement(R["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickDeny,size:"small"},U.t("Deny")))}},{key:"render",value:function e(){var t=this.state,a=t.height,r=t.opacity;var n={};null!==a&&(n={height:a,opacity:r});return s.a.createElement("div",{className:"p-admin_invites_row",ref:this.setRef,style:n},this.renderInviteInfo(),this.renderInviteActions())}}]);return t}(i["Component"]);H.displayName="AdminInvitesRow";H.defaultProps=B;function G(e,t){var a=t.invite;var r=a.channels;"restricted"!==a.invite_type&&"ultra_restricted"!==a.invite_type||(r=a.channels.map(function(t){return Object(w["e"])(e,t)}));var n=a.inviters.map(function(t){return Object(T["getPrefCompliantMemberNameById"])(e,t)});return{channels:r,requesterNames:n}}var V=Object(c["connect"])(G)(H);var K=a(848);var z=a(24);var Q=Object(z["b"])("TS.web.admin.onApproveInviteRequest",function(){return null});var Y=Object(z["b"])("TS.web.admin.decrementInviteRequestsCount",function(){return null});var J=a(3331);var X=new C["b"]("admin");var Z={fetchInviteRequests:k["b"].func.isRequired,submitApproveInviteRequest:k["b"].func.isRequired,submitDenyInviteRequest:k["b"].func.isRequired};var $={};var ee={EMPTY_STATE:"empty-state"};var te=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["approveRequest","denyRequest","removeRow"]);a.headers=[{id:"invite_request",value:null,noHover:true}];a.state={invitesData:null};return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchInviteRequests().then(function(e){t.setState(function(){return{invitesData:e.requests}})})}},{key:"getHeight",value:function e(t){if(!t||0===t.length)return null;return(t.length<7?100*t.length:700)+"px"}},{key:"getRows",value:function e(){var t=this;var a=this.state.invitesData;if(!a)return null;return a.map(function(e){return{id:"inviteRequest-"+e.id,items:[{id:"invite_request",value:s.a.createElement(V,{invite:e,approveRequest:t.approveRequest,denyRequest:t.denyRequest,removeRow:t.removeRow})}]}})}},{key:"approveRequest",value:function e(t){return this.props.submitApproveInviteRequest({requestId:t.id}).then(function(e){var t=e.successful_requests[0];Q(t)})}},{key:"denyRequest",value:function e(t){return this.props.submitDenyInviteRequest({requestId:t.id}).then(function(){Y()})}},{key:"removeRow",value:function e(t){this.setState(function(e){var a=Object(u["reject"])(e.invitesData,{id:t.id});return{invitesData:a}})}},{key:"renderEmptyState",value:function e(){return s.a.createElement("div",{className:"p-admin_invites_table_empty_state","data-qa":ee.EMPTY_STATE},s.a.createElement(K["b"],{text:":tada:",emojiSize:K["a"].LARGE})," ",s.a.createElement(K["b"],{text:":confetti_ball:",emojiSize:K["a"].LARGE})," ",s.a.createElement(K["b"],{text:":tada:",emojiSize:K["a"].LARGE}),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_subtitle"},X.t("Done and Done")),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_text"},X.t("One way or another, you\u2019ve answered all the requests. What\u2019s next?")))}},{key:"render",value:function e(){var t=this.getRows();var a=this.getHeight(t);return s.a.createElement("div",{className:"p-admin_invites_table","data-qa":"admin_invites_table"},t&&0===t.length?this.renderEmptyState():s.a.createElement(S["b"],{height:a,useKeyboardNavigableTable:true,headers:this.headers,rows:t,rowClassName:"p-admin_invites_table__row",disableHover:true}))}}]);return t}(i["Component"]);te.displayName="AdminInvitesTable";te.defaultProps=$;var ae=function e(t){return{fetchInviteRequests:function e(a){return t(Object(E["e"])(a))},submitApproveInviteRequest:function e(a){return t(Object(E["i"])(a))},submitDenyInviteRequest:function e(a){return t(Object(E["k"])(a))}}};var re=Object(c["connect"])(null,ae)(te);var ne=function e(t,a){var r=document.getElementById("admin_invites_table_mount_point");if(!r||!t)return;var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(re,n()({},a,{onClose:o}))),r)};var ie={mountAdminInvitesTable:ne};var se=a(46);Object(se["a"])("interop.mountAdminInvitesTable",ne)},4532:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(582);var f=a(24);var b=Object(f["b"])("TS.generic_notification_banner.banner_to_show_sig.dispatch");var g=Object(f["b"])("TS.ui.banner.isDunningBanner",function(){return false});var _=Object(f["b"])("TS.ui.banner.show");var y=a(58);var k=a(3);var O=a.n(k);var C=a(31);var E=a(35);var S=a(28);var w=a(6);var I=a(39);var j=a(18);var T=a(2);var A=a(13);var N=a.n(A);var M=a(833);var P=a(27);var R=a(3547);var x=new w["b"]("notification_banner");var D={imgSrc:m["b"].string,imgAlt:m["b"].string,bannerAriaLabel:m["b"].string,headerText:m["b"].node,focusOnHeader:m["b"].bool,bodyText:m["b"].node,bodyClass:m["b"].string,goButtonText:m["b"].string,goButtonClass:m["b"].string,onGo:m["b"].func,showGoButton:m["b"].bool,isLearnMoreButton:m["b"].bool,shouldCloseOnGo:m["b"].bool,cancelButtonText:m["b"].string,cancelButtonClass:m["b"].string,onCancel:m["b"].func,showCancelButton:m["b"].bool,alwaysHideBannerAfterCancel:m["b"].bool,showCloseIcon:m["b"].bool,onCloseIcon:m["b"].func,closeBanner:m["b"].func.isRequired,onCloseBanner:m["b"].func,bannerPrefs:m["b"].shape({countPref:m["b"].string.isRequired,tsPref:m["b"].string.isRequired,hidePref:m["b"].string})};var F={imgSrc:"",imgAlt:"",bannerAriaLabel:"",headerText:"",bodyText:"",focusOnHeader:false,bodyClass:"",goButtonText:"",goButtonClass:"",onGo:T["noop"],showGoButton:true,isLearnMoreButton:false,shouldCloseOnGo:true,cancelButtonText:void 0,cancelButtonClass:"",onCancel:T["noop"],showCancelButton:true,alwaysHideBannerAfterCancel:false,showCloseIcon:false,onCloseIcon:T["noop"],onCloseBanner:T["noop"],bannerPrefs:{}};var L=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.headerRef=p.a.createRef();Object(C["a"])(a,["handleGoButton","handleCancelButton","handleCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.focusOnHeader&&this.headerRef.current&&this.headerRef.current.focus()}},{key:"closeBanner",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var a=this.props,r=a.onCloseBanner,n=a.bannerPrefs;this.props.closeBanner({bannerPrefs:n,alwaysHideBanner:t});r()}},{key:"handleGoButton",value:function e(){var t=this.props,a=t.onGo,r=t.shouldCloseOnGo;r&&this.closeBanner();a()}},{key:"handleCancelButton",value:function e(){var t=this.props,a=t.onCancel,r=t.alwaysHideBannerAfterCancel;this.closeBanner(r);a()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,a=t.headerText,r=t.imgSrc,n=t.imgAlt;if(!a)return null;return p.a.createElement("div",{className:"p-message_pane_banner__header"},r&&p.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},p.a.createElement("img",{src:r,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),p.a.createElement("div",{className:"display_flex justify_content_center"},p.a.createElement("h1",{className:"p-message_pane_banner__header_text",ref:this.headerRef,tabIndex:-1},a)))}},{key:"renderBody",value:function e(){var t=this.props,a=t.bodyText,r=t.bodyClass;if(!a)return null;var n=N()("p-message_pane_banner__body",r);return p.a.createElement("div",{className:n},a)}},{key:"renderGoButton",value:function e(){var t=this.props,a=t.goButtonText,r=t.goButtonClass,n=t.isLearnMoreButton;var i=n?x.t("Learn More"):x.t("Show Me");var s=N()("p-message_pane_banner__button ","p-message_pane_banner__button--go",r);return p.a.createElement(P["b"],{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},a||i)}},{key:"renderCancelButton",value:function e(){var t=this.props.cancelButtonClass;var a=N()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",t);var r=this.props.cancelButtonText||x.t("Skip for Now");return p.a.createElement(P["b"],{className:a,onClick:this.handleCancelButton,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},r)}},{key:"renderCloseIcon",value:function e(){return p.a.createElement(P["c"],{"aria-label":x.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},p.a.createElement(M["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,a=t.showGoButton,r=t.showCancelButton,n=t.showCloseIcon,i=t.bannerAriaLabel;return p.a.createElement("div",{className:"p-message_pane_banner",role:"banner","aria-label":i},this.renderHeader(),this.renderBody(),p.a.createElement("div",{className:"p-message_pane_banner__button_container"},r&&this.renderCancelButton(),a&&this.renderGoButton()),n&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);L.displayName="MessagePaneBanner";L.defaultProps=F;var B={closeBanner:v["closeBanner"]};var U=Object(h["connect"])(null,B)(L);var q=new w["b"]("client");var W="btn_show_me";var H="btn_close";var G={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"};var V=["keydown","mousedown","touchstart"];var K={team:m["b"].object.isRequired,clogger:m["b"].object.isRequired,totalUsers:m["b"].number.isRequired,totalChannels:m["b"].number.isRequired,messagesCount:m["b"].number.isRequired,teamName:m["b"].string.isRequired};var z=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.teamMenuEl=null;a.menuItemEls=null;a.limitMeterMenuItemEl=null;a.limitMeterInitialStyles=null;a.teamMenuInitialStyles=null;Object(C["a"])(a,["onGo","onClose","removeLimitMeterHighlight"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:j["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this;this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:W}});var a=document.querySelector("#team-menu-trigger");if(!a){Object(S["openAuthenticatedUrlInBrowser"])(this.props.team,"/admin/stats");return}a.click();setTimeout(function(){t.addLimitMeterHighlight()},100)}},{key:"onClose",value:function e(){this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:H}})}},{key:"addLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu");this.menuItemEls=document.getElementsByClassName("c-menu_item__li");var a=document.querySelector(".p-classic_nav__team_messages_limit_meter");this.limitMeterMenuItemEl=a&&a.closest(".c-menu_item__li");if(!this.teamMenuEl||!this.menuItemEls.length||!this.limitMeterMenuItemEl)return;this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style");this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style");this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)";this.limitMeterMenuItemEl.style.position="relative";this.limitMeterMenuItemEl.style.zIndex=99999;this.teamMenuEl.style.overflow="visible";for(var r=0;r<this.menuItemEls.length;r++)this.menuItemEls.item(r).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto";V.forEach(function(e){document.addEventListener(e,t.removeLimitMeterHighlight)})}},{key:"removeLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles);this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(var a=0;a<this.menuItemEls.length;a++)this.menuItemEls.item(a).style.pointerEvents="auto";V.forEach(function(e){document.removeEventListener(e,t.removeLimitMeterHighlight)})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.messagesCount,i=a.totalUsers,s=a.totalChannels;var o=O()({step:j["A"].BANNER_ACTIVATION_MSG_LIMIT},t);r.track(j["l"].UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:n,num_members_minus_bots:i,num_of_channels:s,contexts:{ui_context:o}})}},{key:"render",value:function e(){var t=this.props,a=t.totalUsers,r=t.totalChannels,n=t.messagesCount,i=t.teamName;var s=q.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(w["q"])(i)});var o=q.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:a,num_of_messages:n,num_of_channels:r});var l=q.t("Show Me");return p.a.createElement(U,{headerText:s,bodyText:o,goButtonText:l,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:G})}}]);return t}(d["PureComponent"]);z.displayName="ActivationMsgLimitBanner";var Q=function e(t){return{team:Object(E["d"])(t),clogger:Object(I["a"])({state:t})}};var Y=Object(h["connect"])(Q)(z);var J=a(38);var X=a(581);var Z=a(33);var $=a(44);var ee=new w["b"]("send_btn");var te={closeBanner:m["b"].func.isRequired,hasSendButton:m["b"].bool.isRequired,sendButtonAutoSet:m["b"].bool.isRequired,clogger:m["b"].object.isRequired,openPrefsModal:m["b"].func.isRequired};var ae={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var re=j["A"].BANNER_JAPAN_BETA_SEND_BTN;var ne=j["l"].UPGRDEXP_I18N_BANNER;var ie=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPrefLinkClick=a.onPrefLinkClick.bind(a);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(ne,{contexts:{ui_context:{step:re,action:j["w"].IMPRESSION}}})}},{key:"componentWillUpdate",value:function e(t){var a=this.props,r=a.hasSendButton,n=a.sendButtonAutoSet;n===t.sendButtonAutoSet&&r===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(ne,{contexts:{ui_context:{step:re,action:j["w"].CLICK,ui_element:j["z"].PREFS_BUTTON}}});this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"});this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;return p.a.createElement("div",null,ee.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return p.a.createElement("div",{className:"inline_block"},p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(Z["isMac"])()?"\u2318":"Ctrl"),p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),p.a.createElement("br",null),ee.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var a=e.text;return p.a.createElement($["a"],{onClick:t.onPrefLinkClick},a)}))}},{key:"render",value:function e(){var t=ee.t("Just for Japan: a button for sending");var a=ee.t("Got It");var r="p-message_pane_banner__body--taller-line-height";return p.a.createElement(U,{headerText:t,bodyText:this.renderBodyText(),bodyClass:r,goButtonText:a,showCancelButton:false,showCloseIcon:true,bannerPrefs:ae})}}]);return t}(d["PureComponent"]);ie.displayName="I18nJapanBetaSendBtnBanner";var se=function e(t){return{hasSendButton:Object(J["h"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(J["h"])(t,"msg_input_send_btn_auto_set"),clogger:Object(I["a"])({state:t})}};function oe(e){return{closeBanner:v["closeBanner"],openPrefsModal:function t(){return e(X["a"].apply(void 0,arguments))}}}var le={CLOG_STEP:re,CLOG_EVENT_ID:ne};var ce=Object(h["connect"])(se,oe)(ie);var ue=a(1476);var de=a(94);var pe=new w["b"]("notification_banner");var me={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"};var he=j["A"].BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER;var ve="pricing?ui_element="+j["z"].PRICING_BUTTON+"&ui_step="+he;var fe={discountPercent:m["b"].number.isRequired,showPricingPlans:m["b"].func.isRequired,country:m["b"].string.isRequired,clogger:m["b"].object.isRequired,localDiscountAwarenessExperiment:m["b"].string.isRequired};var be=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseIcon","onCancel"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:j["w"].IMPRESSION,ui_properties:{element_type:j["k"].BANNER,element_name:"local_discount_awareness_banner"}})}},{key:"onGo",value:function e(){this.clog({action:j["w"].CLICK,ui_element:j["z"].PRICING_BUTTON,is_primary_cta:true,ui_properties:{element_type:j["k"].BUTTON,element_name:"pricing_button"}},true);this.props.showPricingPlans({pricingPlansPageUrl:ve,source:"local_discount_awareness_banner"})}},{key:"onCancel",value:function e(){this.clog({action:j["w"].CLOSE,ui_element:j["z"].SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:j["k"].BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function e(){this.clog({action:j["w"].CLOSE,ui_element:j["z"].BTN_CLOSE,ui_properties:{element_type:j["k"].X,element_name:"btn_close"}})}},{key:"getContent",value:function e(){var t=this.props,a=t.discountPercent,r=t.country,n=t.localDiscountAwarenessExperiment;var i=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--"+r.toLowerCase());var s=p.a.createElement("div",null,p.a.createElement("div",{className:i}),"treatment1"===n?pe.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:a}):pe.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:a}));return{headerText:s,bodyText:pe.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:ue["a"][r].name,discountPercent:a}),cancelButtonText:pe.t("Not Now"),goButtonText:pe.t("See Upgrade Options")}}},{key:"clog",value:function e(t,a){var r=this.props.clogger;var n=Object(T["defaults"])(t,{step:he});r.track(j["l"].GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:n}});a&&r.track(j["l"].GROWTH_PRICING,{contexts:{ui_context:n}})}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{headerText:t.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,goButtonText:t.goButtonText,showCloseIcon:true,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:me})}}]);return t}(d["PureComponent"]);be.displayName="LocalDiscountAwarenessBanner";var ge=function e(t){return{clogger:Object(I["a"])({state:t}),localDiscountAwarenessExperiment:Object(de["getGroupForUser"])(t,"local_discount_awareness")}};var _e={showPricingPlans:v["showPricingPlans"]};var ye=Object(h["connect"])(ge,_e)(be);var ke=a(119);var Oe=a(82);var Ce=a(21);var Ee=a(11);var Se=a(646);var we={isSharedChannel:m["b"].bool,sharedTeamNames:m["b"].arrayOf(m["b"].node),bannerPrefs:m["b"].shape({countPref:m["b"].string,tsPref:m["b"].string}).isRequired,clogStep:m["b"].number.isRequired,clogEvent:m["b"].number.isRequired,onGoUrl:m["b"].string.isRequired,goButtonText:m["b"].string.isRequired,headerText:m["b"].node.isRequired,renderBodyText:m["b"].func.isRequired,clogger:m["b"].object.isRequired,team:m["b"].object.isRequired,bodyClass:m["b"].string};var Ie={isSharedChannel:false,sharedTeamNames:[],bodyClass:""};var je=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseIcon","renderBodyText"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:j["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this.props,a=t.onGoUrl,r=t.team;this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:"upgrade"}});Object(S["openAuthenticatedUrlInBrowser"])(r,a)}},{key:"onCloseIcon",value:function e(){this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:"close"}})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogStep,n=a.clogEvent,i=a.clogger;var s=[j["l"].GROWTH_PRICING,n];var o=O()({step:r},t);s.forEach(function(e){i.track(e,{contexts:{ui_context:o}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,a=t.sharedTeamNames;return e(a)}},{key:"render",value:function e(){var t=this.props,a=t.isSharedChannel,r=t.headerText,n=t.goButtonText,i=t.bannerPrefs,s=t.bodyClass;if(!a)return null;return p.a.createElement(U,{headerText:r,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i,bodyClass:s})}}]);return t}(d["PureComponent"]);je.displayName="EscTrialBanner";je.defaultProps=Ie;var Te=function e(t){var a=Object(Oe["a"])(t);var r=Object(Ce["e"])(t,a);var n=Object(Ee["isExternallySharedChannel"])(r);var i=[];if(n){var s=Object(Ee["getPendingAndConnectedTeamIds"])(t,r);Object(T["isEmpty"])(s)||(i=Object(T["map"])(s,function(e){var a=Object(E["j"])(t,e);return Object(S["isUnknown"])(a)?p.a.createElement(Se["a"],{type:"unknown"}):Object(S["getTeamDisplayName"])(a)}))}return{isSharedChannel:n,sharedTeamNames:i,clogger:Object(I["a"])({state:t}),team:Object(E["d"])(t)}};var Ae=Object(h["connect"])(Te)(je);var Ne=new w["b"]("trial_expiration_banners");var Me={productId:m["b"].string.isRequired,numDaysLeft:m["b"].number.isRequired,expirationDate:m["b"].string.isRequired};var Pe={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var Re=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(w["i"])(t,{noEscape:true,react:true});return Ne.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:a,shared_team_name:r})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return Ne.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=this.props.productId;var a=Ne.t("Upgrade Now");return p.a.createElement(Ae,{bannerPrefs:Pe,clogStep:j["A"].BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:j["l"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:ke["a"]+"?s=1&p="+t+"&entry_point=two_weeks_left_esc_banner",goButtonText:a,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);Re.displayName="TwoWeeksLeftEscTrialBanner";var xe={CHECKOUT_URL:ke["a"]};var De=Re;var Fe=new w["b"]("trial_expiration_banners");var Le={numDaysLeft:m["b"].number.isRequired,expirationDate:m["b"].string.isRequired,productId:m["b"].string.isRequired};var Be={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var Ue=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(w["i"])(t,{noEscape:true,react:true});return Fe.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:a,shared_team_name:r,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},function(e){var t=e.text,a=e.tag;if("b"===a)return p.a.createElement("strong",{className:"sk_raspberry_red"},t);return p.a.createElement("span",{className:"nowrap"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return Fe.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=this.props.productId;var a=Fe.t("Upgrade Now");return p.a.createElement(Ae,{bannerPrefs:Be,clogStep:j["A"].BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:j["l"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:ke["a"]+"?s=1&p="+t+"&entry_point=one_week_left_esc_trial_banner",goButtonText:a,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);Ue.displayName="OneWeekLeftEscTrialBanner";var qe={CHECKOUT_URL:ke["a"]};var We=Ue;var He=new w["b"]("trial_expiration_banners");var Ge={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};var Ve={expirationDate:m["b"].string.isRequired,productId:m["b"].string.isRequired};var Ke=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["renderBodyText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){return He.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(w["i"])(t,{noEscape:true,react:true})})}},{key:"render",value:function e(){var t=this.props.productId;return p.a.createElement(Ae,{bannerPrefs:Ge,clogStep:j["A"].BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:ke["a"]+"?s=1&p="+t+"&entry_point=three_days_left_esc_trial_banner",clogEvent:j["l"].GROWTH_PLANS_PAGE_TRIALS,goButtonText:He.t("Upgrade Now"),headerText:He.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}]);return t}(d["PureComponent"]);Ke.displayName="ThreeDaysLeftEscTrialBanner";var ze=Ke;var Qe=new w["b"]("trial_expiration_banners");var Ye="upgrade";var Je="close";var Xe={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};var Ze={clogger:m["b"].object.isRequired,team:m["b"].object.isRequired,expirationDate:m["b"].string.isRequired,productId:m["b"].string.isRequired};var $e=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onClose"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:j["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this.props,a=t.team,r=t.productId;this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:Ye}});Object(S["openAuthenticatedUrlInBrowser"])(a,ke["a"]+"?s=1&p="+r+"&entry_point=three_days_left_trial_banner")}},{key:"onClose",value:function e(){this.clog({action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:Je}})}},{key:"clog",value:function e(t){var a=this.props.clogger;var r=O()({step:j["A"].BANNER_TRIAL_THREE_DAY_REMINDER},t);a.track(j["l"].GROWTH_PLANS_PAGE_TRIALS,{contexts:{ui_context:r}})}},{key:"render",value:function e(){var t=this.props,a=t.team,r=t.expirationDate;var n=Object(S["isOnStandardPlan"])(a)?Qe.t("Standard"):Qe.t("Plus");var i=Qe.t("Your free trial ends soon");var s=Qe.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:n,expiration_date:r});var o=Qe.t("Upgrade Now");return p.a.createElement(U,{headerText:i,bodyText:s,goButtonText:o,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:Xe})}}]);return t}(d["PureComponent"]);$e.displayName="ThreeDaysLeftTrialBanner";var et=function e(t){return{team:Object(E["d"])(t),clogger:Object(I["a"])({state:t})}};var tt=Object(h["connect"])(et)($e);var at=new w["b"]("free_trial_banners");var rt={clogger:m["b"].object.isRequired,team:m["b"].object.isRequired};var nt={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var it=205;var st="UPGRDEXP_FREE_TRIAL_IN_PROD";var ot="trial";var lt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(st,{contexts:{ui_context:{step:it,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(st,{contexts:{ui_context:{step:it,action:"click",ui_element:"learn_more_btn"}}});Object(S["openAuthenticatedUrlInBrowser"])(r,ot)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(st,{contexts:{ui_context:{step:it,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){return{headerText:at.t("Start your free trial of the Standard plan"),bodyText:at.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(T["isEmpty"])(t))return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:nt})}}]);return t}(d["PureComponent"]);lt.displayName="InProdTrialMessagePaneBanner";var ct=function e(t){return{clogger:Object(I["a"])({state:t}),team:Object(E["d"])(t)}};var ut=Object(h["connect"])(ct)(lt);var dt=new w["b"]("free_trial_banners");var pt={expirationDate:m["b"].string.isRequired,clogger:m["b"].object.isRequired,team:m["b"].object.isRequired};var mt={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var ht=207;var vt="UPGRDEXP_FREE_TRIAL_IN_PROD";var ft="trial";var bt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(vt,{contexts:{ui_context:{step:ht,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(vt,{contexts:{ui_context:{step:ht,action:"click",ui_element:"learn_more_btn"}}});Object(S["openAuthenticatedUrlInBrowser"])(r,ft)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(vt,{contexts:{ui_context:{step:ht,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:dt.t("Your free trial offer is about to expire"),bodyText:dt.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:mt})}}]);return t}(d["PureComponent"]);bt.displayName="InProdTrialReminderBanner";var gt=function e(t){return{clogger:Object(I["a"])({state:t}),team:Object(E["d"])(t)}};var _t=Object(h["connect"])(gt)(bt);var yt=a(97);var kt=a(9);var Ot=new w["b"]("notification_banner");var Ct={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var Et=200;var St="UPGRDEXP_ENFORCE_FILE_LIMITS";var wt="pricing?ui_element=11&ui_step="+Et;var It={team:m["b"].object.isRequired,userId:m["b"].string.isRequired,closeBanner:m["b"].func.isRequired,showFileList:m["b"].func.isRequired,showPricingPlans:m["b"].func.isRequired,clogger:m["b"].object.isRequired};var jt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(St,{contexts:{ui_context:{step:Et,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(St,{contexts:{ui_context:{step:Et,action:"click",ui_element:"pricing_button"}}});t.track("GROWTH_PRICING",{contexts:{ui_context:{step:Et,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:wt,source:"approaching_file_limit_banner"})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(St,{contexts:{ui_context:{step:Et,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,a=t.userId,r=t.clogger;this.props.closeBanner({bannerPrefs:Ct});this.props.showFileList({user:a});r.track(St,{contexts:{ui_context:{step:Et,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.team;return Ot.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t.name})}},{key:"getBodyText",value:function e(){return Ot.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"render",value:function e(){var t=Ot.t("See Plans");return p.a.createElement(U,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ct})}}]);return t}(d["PureComponent"]);jt.displayName="ApproachingFileLimitBanner";var Tt=function e(t){return{team:Object(E["d"])(t),userId:Object(kt["getCurrentUserId"])(t),clogger:Object(I["a"])({state:t})}};var At={closeBanner:v["closeBanner"],showFileList:yt["g"],showPricingPlans:v["showPricingPlans"]};var Nt=Object(h["connect"])(Tt,At)(jt);var Mt=new w["b"]("client");var Pt={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var Rt=63;var xt="GROWTH_PRICING";var Dt="pricing?ui_element=11&ui_step="+Rt;var Ft={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired,showPricingPlans:m["b"].func.isRequired};var Lt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(xt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Rt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(xt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Rt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Dt,source:"approaching_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(xt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Rt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:Mt.t("Unlock unlimited messages for your team"),bodyText:Mt.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Pt})}}]);return t}(d["PureComponent"]);Lt.displayName="ApproachingMsgLimitBanner";var Bt=function e(t){return{clogger:Object(I["a"])({state:t})}};var Ut={showPricingPlans:v["showPricingPlans"]};var qt=Object(h["connect"])(Bt,Ut)(Lt);var Wt=new w["b"]("client");var Ht={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var Gt=64;var Vt="GROWTH_PRICING";var Kt="pricing?ui_element=11&ui_step="+Gt;var zt={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired,showPricingPlans:m["b"].func.isRequired};var Qt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Vt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Vt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Kt,source:"just_reached_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Vt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getCancelButtonText",value:function e(){return Wt.t("Not Now")}},{key:"getContent",value:function e(){return{headerText:Wt.t("You\u2019ve just reached the 10k message limit"),bodyText:Wt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Ht,cancelButtonText:this.getCancelButtonText()})}}]);return t}(d["PureComponent"]);Qt.displayName="JustReachedMsgLimitBanner";var Yt=function e(t){return{clogger:Object(I["a"])({state:t})}};var Jt={showPricingPlans:v["showPricingPlans"]};var Xt=Object(h["connect"])(Yt,Jt)(Qt);var Zt=a(547);var $t=new w["b"]("client");var ea={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var ta=65;var aa="GROWTH_PRICING";var ra="pricing?ui_element=11&ui_step="+ta;var na={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired,showPricingPlans:m["b"].func.isRequired};var ia=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(aa,{limit_meter_messages_count:a,contexts:{ui_context:{step:ta,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(aa,{limit_meter_messages_count:a,contexts:{ui_context:{step:ta,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:ra,source:"thirty_days_after_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(aa,{limit_meter_messages_count:a,contexts:{ui_context:{step:ta,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var a=t-1e4;var r=this.roundNumOfMsgsBeyondLimit(a);if(!r||r<0)return null;return{headerText:$t.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:r}),bodyText:$t.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. On a paid plan, you can easily find and view all past messages \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:r,fallbackHash:"db9e0ff0ad65ce2f75e98390bcfaec1c1fa6fd45"})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var a=100*Math.floor(t/100);return Object(w["n"])(a)}if(t>999999)return Object(Zt["a"])(t);return t}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:ea})}}]);return t}(d["PureComponent"]);ia.displayName="ThirtyDaysAfterMsgLimitBanner";var sa=function e(t){return{clogger:Object(I["a"])({state:t})}};var oa={showPricingPlans:v["showPricingPlans"]};var la=Object(h["connect"])(sa,oa)(ia);var ca=a(14);var ua=a(32);var da=a(22);var pa=a(41);var ma=a(237);var ha=a(25);var va=a(557);var fa=a(1829);var ba=a(589);var ga=a(4730);var _a=a(1281);var ya=new w["b"]("team_creation");var ka={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"};var Oa="team_creation_dialog_mount_point";var Ca={clogger:m["b"].object.isRequired,logger:m["b"].object.isRequired,teamId:m["b"].string.isRequired,hasInvited:m["b"].bool,workflow:m["b"].object,activeWorkflowTask:m["b"].string,completeWorkflowTask:m["b"].func,nonBotMembersCount:m["b"].number.isRequired,openTeamCreatorOnboardingDialog:m["b"].func,currentChannelId:m["b"].string,showSecondBanner:m["b"].func,openInviteDialog:m["b"].func,featureJiraNewxp1754:m["b"].bool,clientTheme:m["b"].oneOf(["light","dark"]),fetchWorkflow:m["b"].func};var Ea={hasInvited:false,workflow:null,activeWorkflowTask:"",completeWorkflowTask:T["noop"],openTeamCreatorOnboardingDialog:T["noop"],currentChannelId:"",showSecondBanner:T["noop"],openInviteDialog:T["noop"],featureJiraNewxp1754:false,clientTheme:"light",fetchWorkflow:T["noop"]};var Sa=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["openInviteDialog","openTeamCreatorDialog"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.activeWorkflowTask,r=t.workflow,n=t.fetchWorkflow;this.loadFirstImageForDialog();"start_team_creator_account_setup"===a&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"});this.clogBannerChanges({action:"impression"});r||n()}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.activeWorkflowTask,n=a.currentChannelId,i=a.showSecondBanner;r!==t.activeWorkflowTask&&this.clogBannerChanges({action:"impression"});n!==t.currentChannelId&&i()}},{key:"openInviteDialog",value:function e(){var e=this.props.openInviteDialog;this.clogBannerChanges({action:"click",ui_element:j["z"].BANNER_TRACTOR_PRIMARY_CTA});return e({source:"team_creation_account_setup_banner"})}},{key:"openTeamCreatorDialog",value:function e(){var t=this.props,a=t.teamId,r=t.openTeamCreatorOnboardingDialog;this.clogBannerChanges({action:"click",ui_element:j["z"].BANNER_TRACTOR_PRIMARY_CTA});if(Object(ua["a"])())return r();return Object(fa["a"])(a,document.getElementById(Oa))}},{key:"clogBannerChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.activeWorkflowTask,n=a.clogger;var i=r;"start_team_creator_account_setup"!==r&&"complete_team_creator_account_setup"!==r&&(i="invite_team_creator_account_setup");n.track(j["l"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:O()({},t,{step:ba["a"][i]})}})}},{key:"loadFirstImageForDialog",value:function e(){var t=new Image;var a=new Image;var r=ba["b"][this.props.clientTheme].profile;t.src=r;a.src=r.replace(".png","@2x.png")}},{key:"render",value:function e(){var t=this.props,a=t.hasInvited,r=t.workflow,n=t.activeWorkflowTask,i=t.featureJiraNewxp1754;if(null===r||"completed"===r.state&&(a||this.props.nonBotMembersCount>1))return null;var s={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:false,bannerPrefs:ka,shouldCloseOnGo:false};if("start_team_creator_account_setup"===n){var o=a?ya.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):ya.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return p.a.createElement(U,O()({},s,{bannerAriaLabel:i?ya.t("Account setup banner"):"",headerText:ya.t("Here it is! The first channel in your team\u2019s Slack workspace"),focusOnHeader:true,bodyText:o,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/first_setup@2x.png",goButtonText:ya.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===n){var l=a?ya.t("To see what teamwork is like in Slack, take a moment to save your account."):ya.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return p.a.createElement(U,O()({},s,{bannerAriaLabel:i?ya.t("Account setup banner"):"",headerText:ya.t("Save your account and start collaborating"),focusOnHeader:true,bodyText:l,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/second_setup@2x.png",goButtonText:ya.t("Finish Signing Up")}))}if(!a)return p.a.createElement(U,O()({},s,{bannerAriaLabel:i?ya.t("Invite teammates banner"):"",headerText:ya.t("Bring your team into Slack"),bodyText:ya.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/invite_others@2x.png",goButtonText:ya.t("Add People")}));return null}}]);return t}(d["PureComponent"]);Sa.displayName="TeamCreationAccountSetupBanner";Sa.defaultProps=Ea;var wa=function e(t){var a=Object(Oe["a"])(t);var r=false;var n=a&&Object(Ce["e"])(t,a,r);var i=Object(Ee["isChannel"])(n)?a:"";return{clogger:Object(I["a"])({state:t}),logger:Object(ca["a"])({state:t}),teamId:Object(da["b"])(t),hasInvited:Object(J["h"])(t,"has_invited"),workflow:Object(ma["getWorkflow"])(t),activeWorkflowTask:Object(ma["getActiveWorkflowTask"])(t),nonBotMembersCount:Object(T["size"])(Object(T["filter"])(Object(ha["a"])(t),function(e){return!e.is_bot&&!e.is_slackbot})),currentChannelId:i,featureJiraNewxp1754:Object(kt["isFeatureEnabled"])(t,"feature_jira_newxp_1754"),clientTheme:Object(va["getClientTheme"])(t)}};var Ia=function e(t){return{completeWorkflowTask:function e(){return t(ma["completeWorkflowTask"].apply(void 0,arguments))},fetchWorkflow:function e(){return t(Object(ma["fetchTeamCreationWorkflow"])({onlyActive:false}))},showSecondBanner:function e(){return t(ma["showSecondAccountSetupBanner"].apply(void 0,arguments))},openTeamCreatorOnboardingDialog:function e(){t(Object(pa["openModal"])({element:p.a.createElement(ga["a"]),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function e(){return t(_a["a"].apply(void 0,arguments))}}};var ja=Object(h["connect"])(wa,Ia)(Sa);var Ta=new w["b"]("paid_benefits_banners");var Aa={clogger:m["b"].object.isRequired,team:m["b"].object.isRequired};var Na={};var Ma={countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"};var Pa=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCancel","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track(j["l"].GROWTH_PRICING,{contexts:{ui_context:{step:j["A"].BANNER_PAID_BENEFITS_AWARENESS,action:j["w"].IMPRESSION}}})}},{key:"onGo",value:function e(){this.clogClick("learn_more");Object(S["openAuthenticatedUrlInBrowser"])(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}},{key:"onCancel",value:function e(){this.clogClick("not_now")}},{key:"onCloseIcon",value:function e(){this.clogClick("close")}},{key:"getContent",value:function e(){return{headerText:Ta.t("See all that Slack has to offer"),bodyText:Ta.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:Ta.t("Not Now")}}},{key:"clogClick",value:function e(t){this.props.clogger.track(j["l"].GROWTH_PRICING,{contexts:{ui_context:{step:j["A"].BANNER_PAID_BENEFITS_AWARENESS,action:j["w"].CLICK,ui_properties:{element_type:j["k"].BUTTON,element_name:t}}}})}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:t.headerText,bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,showCloseIcon:true,isLearnMoreButton:true,shouldCloseOnGo:false,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:Ma})}}]);return t}(d["PureComponent"]);Pa.displayName="PaidBenefitsAwarenessBanner";Pa.defaultProps=Na;var Ra=function e(t){return{clogger:Object(I["a"])({state:t}),team:Object(E["d"])(t)}};var xa=Object(h["connect"])(Ra)(Pa);var Da=a(192);var Fa=new w["b"]("trial_expiration_banners");var La={countPref:"shared_channels_trial_start_banner_cta_count",tsPref:"shared_channels_trial_start_banner_cta_last_ts"};var Ba={featureSharedChannelsFreeTrial:m["b"].bool.isRequired,numDaysLeft:m["b"].number.isRequired,expirationDate:m["b"].string.isRequired,productId:m["b"].string.isRequired};var Ua=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["renderBodyText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=Object(w["i"])(t,{noEscape:true,react:true});if(!this.props.featureSharedChannelsFreeTrial)return null;if(this.props.numDaysLeft<=3)return Fa.rt("You won\u2019t be able to use this channel with {sharedTeamNameString}. To keep sharing this channel, upgrade before {expirationDate}.",{sharedTeamNameString:a,expirationDate:this.props.expirationDate});return Fa.rt("After the 14 day trial this channel will <b>no longer be shared</b> with {sharedTeamNameString}. Upgrade to keep all the features of the Standard plan.",{sharedTeamNameString:a})}},{key:"renderHeaderText",value:function e(){if(!this.props.featureSharedChannelsFreeTrial)return"";if(this.props.numDaysLeft<=3)return Fa.t("Your trial is expiring soon");return Fa.t("Welcome to your shared channel")}},{key:"render",value:function e(){var t=this.props,a=t.productId,r=t.featureSharedChannelsFreeTrial;var n=Fa.t("Upgrade Now");if(!r)return null;return p.a.createElement(Ae,{bannerPrefs:La,clogStep:j["A"].BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:ke["a"]+"?s=1&p="+a+"&entry_point=shared_channels_trial_start_banner",goButtonText:n,clogEvent:j["l"].GROWTH_PLANS_PAGE_TRIALS,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);Ua.displayName="SharedChannelsTrialStartBanner";var qa=Object(Da["a"])("feature_shared_channels_free_trial")(Ua);var Wa={bannerName:m["b"].string,bannerData:m["b"].object,throttledLoadBanner:m["b"].func.isRequired};var Ha={bannerName:"",bannerData:{}};var Ga=function e(t){var a=t.bannerData;return p.a.createElement(Y,{totalUsers:a.total_users,totalChannels:a.total_channels,messagesCount:a.messages_count,teamName:a.team_name})};Ga.displayName="renderActivationMsgLimitBanner";var Va=function e(){return p.a.createElement(ce,null)};Va.displayName="renderI18nJapanBetaSendBtnBanner";var Ka=function e(t){var a=t.bannerData;return p.a.createElement(ye,{discountPercent:a.discount_pct,country:a.country})};Ka.displayName="renderLocalDiscountAwarenessBanner";var za=function e(t){var a=t.bannerData;return p.a.createElement(De,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next,productId:a.product_id})};za.displayName="renderTwoWeeksLeftEscTrialBanner";var Qa=function e(t){var a=t.bannerData;return p.a.createElement(We,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next,productId:a.product_id})};Qa.displayName="renderOneWeekLeftEscTrialBanner";var Ya=function e(t){var a=t.bannerData;return p.a.createElement(ze,{expirationDate:a.pay_date_next,productId:a.product_id})};Ya.displayName="renderThreeDaysLeftEscTrialBanner";var Ja=function e(t){var a=t.bannerData;return p.a.createElement(tt,{expirationDate:a.pay_date_next,productId:a.product_id})};Ja.displayName="renderThreeDaysLeftTrialBanner";var Xa=function e(t){var a=t.bannerData;return p.a.createElement(qa,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next,productId:a.product_id})};Xa.displayName="renderSharedChannelsTrialStartBanner";var Za=function e(){return p.a.createElement(Nt,null)};Za.displayName="renderApproachingFileLimitBanner";var $a=function e(t){var a=t.bannerData;return p.a.createElement(ut,{numMsgs:a.messages_count_abbrev})};$a.displayName="renderInProdTrialBanner";var er=function e(t){var a=t.bannerData;return p.a.createElement(_t,{expirationDate:a.expiration_date})};er.displayName="renderInProdTrialReminderBanner";var tr=function e(t){var a=t.bannerData;return p.a.createElement(qt,{messagesCount:a.messages_count})};tr.displayName="renderApproachingMsgLimitBanner";var ar=function e(t){var a=t.bannerData;return p.a.createElement(Xt,{messagesCount:a.messages_count})};ar.displayName="renderJustReachedMsgLimitBanner";var rr=function e(t){var a=t.bannerData;return p.a.createElement(la,{messagesCount:a.messages_count})};rr.displayName="renderThirtyDaysAfterMsgLimitBanner";var nr=function e(){return p.a.createElement(ja,null)};nr.displayName="renderTeamCreationAccountSetupBanner";var ir=function e(){return p.a.createElement(xa,null)};ir.displayName="renderPaidBenefitsAwarenessBanner";var sr={activation_msg_limit_banner:Ga,i18n_japan_beta_send_btn_banner:Va,local_discount_awareness_banner:Ka,two_weeks_left_esc_trial_banner:za,one_week_left_esc_trial_banner:Qa,three_days_left_esc_trial_banner:Ya,three_days_left_trial_banner:Ja,shared_channels_trial_start_banner:Xa,in_prod_trial_banner:$a,in_prod_trial_reminder_banner:er,approaching_file_limit_banner:Za,approaching_msg_limit_banner:tr,just_reached_msg_limit_banner:ar,thirty_days_after_msg_limit_banner:rr,team_creation_account_setup_banner:nr,paid_benefits_awareness_banner:ir};var or=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){var t=this.parseUrlDebugArgs();this.props.throttledLoadBanner(t)}},{key:"parseUrlDebugArgs",value:function e(){var t=Object(y["urlQueryStringParse"])(window.location);var a={};if(t.banner_type){a.qa_banner_type=t.banner_type;a.qa_banner_data={};Object.keys(t).forEach(function(e){var r=e.split("banner_data_")[1];if(r){var n=parseInt(t[e],10);isNaN(n)&&(n=t[e]);a.qa_banner_data[r]=n}});a.qa_banner_data=JSON.stringify(a.qa_banner_data)}return a}},{key:"render",value:function e(){var t=this.props,a=t.bannerName,r=t.bannerData;if(!a)return null;if(g(a)){_(a,r);return null}var n=sr[a];if(!n){b({name:a,data:r});return null}return n({bannerData:r})}}]);return t}(d["PureComponent"]);or.displayName="MessagePaneBannerContainer";or.defaultProps=Ha;var lr=function e(t){return{bannerName:Object(v["getMessagePaneBannerName"])(t),bannerData:Object(v["getMessagePaneBannerData"])(t)}};var cr={throttledLoadBanner:v["throttledLoadBanner"]};var ur=t["a"]=Object(h["connect"])(lr,cr)(or)},4533:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(0);var c=a(61);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(52);var _=a(170);var y=a(295);var k=a(1204);var O=a(21);var C=a(419);var E=a(31);var S=a(6);var w=a(3);var I=a.n(w);var j=a(11);var T=a(354);var A=a(1061);var N=new S["b"]("admin");var M={entities:{channels:{includeArchived:false,includeRequired:true}},allowEmptyQuery:true,returnMetadata:false,sort:{preferExactMatch:false,frecency:false,preferChannelsUserBelongsTo:true,flat:true}};var P={isDisabled:l["b"].bool.isRequired,onChangeChannel:l["b"].func.isRequired,selectedChannel:l["b"].object};var R={selectedChannel:null};var x=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(a,["renderEmptyStateMessage","processChannelSearchResults"]);return a}m()(t,[{key:"getChannelSelectObject",value:function e(t){if(!t)return null;return{entity:t,label:Object(j["getName"])(t),value:t.id}}},{key:"processChannelSearchResults",value:function e(t){var a=[];var r=[];t.forEach(function(e){Object(j["isExternallySharedChannel"])(e.entity)||(Object(j["isPrivateChannel"])(e.entity)?r.push(I()({},e,{label:Object(j["getName"])(e.entity)})):a.push(I()({},e,{label:Object(j["getName"])(e.entity)})))});var n=[];a.length&&n.push({label:N.t("Channels"),options:a});r.length&&n.push({label:N.t("Private Channels"),options:r});return Promise.resolve(n)}},{key:"renderEmptyStateMessage",value:function e(){return n.a.createElement("div",null,N.rt("No channels found"))}},{key:"renderOption",value:function e(t){var a="heading"===t.type;if(a)return t.label;return n.a.createElement(A["a"],{channel:t.entity})}},{key:"render",value:function e(){return n.a.createElement(T["e"],{ariaLabel:"",className:"admin_invite_settings_channel_select cursor_pointer nudge_left_2",classPrefix:"admin_invite_settings",emptyStateMessage:this.renderEmptyStateMessage,isDisabled:this.props.isDisabled,onOptionSelected:this.props.onChangeChannel,placeholderText:N.t("Choose a channel"),processOptions:this.processChannelSearchResults,renderOption:this.renderOption,searcherOptions:M,selectedOption:this.getChannelSelectObject(this.props.selectedChannel),selectId:"invites_channel_select",width:"100%"})}}]);return t}(r["PureComponent"]);x.displayName="AdminInviteSettingsChannelSelect";x.defaultProps=R;var D=x;var F=a(3327);var L={SLACKBOT:"slackbot",CHANNEL:"channel"};var B=new S["b"]("admin");var U={inviteRequestsApprovalChannel:"invite_requests_approval_channel",invitesOnlyAdmin:"invites_only_admins"};var q={invitesOnlyAdmin:l["b"].bool.isRequired,selectedChannel:l["b"].object,setMultipleTeamPrefsByApi:l["b"].func.isRequired};var W={selectedChannel:void 0};var H=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={inviteDeliveryMethod:e.selectedChannel?L.CHANNEL:L.SLACKBOT,isSaving:false,requireAdminApproval:e.invitesOnlyAdmin,selectedChannel:e.selectedChannel,submitButtonText:B.t("Save")};Object(E["a"])(a,["onChangeChannel","onSubmit"]);return a}m()(t,[{key:"onChangeAdminApproval",value:function e(t){this.setState(function(){return{requireAdminApproval:t,inviteDeliveryMethod:L.CHANNEL,submitButtonText:B.t("Save")}})}},{key:"onChangeChannel",value:function e(t){this.setState(function(){return{selectedChannel:t.entity,submitButtonText:B.t("Save")}})}},{key:"onRadioSelect",value:function e(t){this.setState(function(){return{inviteDeliveryMethod:t,submitButtonText:B.t("Save")}})}},{key:"onSubmit",value:function e(){var t=this;this.setState(function(){return{isSaving:true}});return this.props.setMultipleTeamPrefsByApi({invite_requests_approval_channel:this.getSelectedChannelIdForSubmit(),invites_only_admins:this.state.requireAdminApproval}).then(function(){t.setState(function(){return{submitButtonText:B.t("Saved")}})}).catch(function(){TS.generic_dialog.alert(B.t("Sorry! Something went wrong. Please try again."))}).finally(function(){t.setState(function(){return{isSaving:false}})})}},{key:"getSelectedChannelIdForSubmit",value:function e(){return this.state.requireAdminApproval&&this.state.inviteDeliveryMethod===L.CHANNEL?this.state.selectedChannel.id:null}},{key:"maybeRenderSubForm",value:function e(t){var a=this;if(!t)return null;var r=this.state,i=r.inviteDeliveryMethod,s=r.selectedChannel;return n.a.createElement("div",null,n.a.createElement("p",{className:"admin_invite_settings_delivery_instructions margin_top_200"},B.t("Send invitation requests to...")),n.a.createElement(y["a"],{className:"margin_bottom_0"},n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"invites_destination_slackbot",className:"admin_invite_settings_delivery_method",text:B.t("All admins, via Slackbot"),type:"inline",cursor:"pointer"},n.a.createElement(_["a"],{id:"invites_destination_slackbot",checked:i===L.SLACKBOT,onChange:function e(){return a.onRadioSelect(L.SLACKBOT)}}))),n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"invites_destination_channel",className:"admin_invite_settings_delivery_method",text:B.t("This channel:"),type:"inline",cursor:"pointer"},n.a.createElement(_["a"],{id:"invites_destination_channel",checked:i===L.CHANNEL,onChange:function e(){return a.onRadioSelect(L.CHANNEL)}})),n.a.createElement(D,{isDisabled:i!==L.CHANNEL,onChangeChannel:this.onChangeChannel,selectedChannel:s}))))}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.inviteDeliveryMethod,i=a.isSaving,s=a.requireAdminApproval,o=a.selectedChannel,l=a.submitButtonText;var c=s&&r===L.CHANNEL&&!o;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"change_invites_only_admins",className:"checkbox",text:B.t("Require admin approval"),type:"inline"},n.a.createElement("input",{type:"checkbox",name:"invites_only_admins",id:"change_invites_only_admins",checked:s,onChange:function e(){return t.onChangeAdminApproval(!s)}}))),this.maybeRenderSubForm(s),n.a.createElement(C["a"],{className:"admin_invite_settings_submit_button",disabled:c,onClick:this.onSubmit,loading:i},l))}}]);return t}(r["Component"]);H.displayName="AdminInviteSettings";H.defaultProps=W;function G(e){var t=Object(c["a"])(e,U.inviteRequestsApprovalChannel);return{selectedChannel:t&&Object(O["e"])(e,t,true),invitesOnlyAdmin:Object(c["a"])(e,U.invitesOnlyAdmin)}}var V={setMultipleTeamPrefsByApi:k["a"]};var K=Object(i["connect"])(G,V)(H);var z={invitesOnlyAdmin:l["b"].bool};var Q={invitesOnlyAdmin:void 0};function Y(e){if(void 0===e.invitesOnlyAdmin)return null;return n.a.createElement(K,null)}Y.displayName="AdminInviteSettingsContainer";function J(e){return{invitesOnlyAdmin:Object(c["a"])(e,"invites_only_admins")}}Y.defaultProps=Q;var X=Object(i["connect"])(J)(Y);function Z(e,t){var a=document.getElementById("admin_invite_settings_mount_point");if(!a||!e)return;var r=Object(o["f"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(X,t)),a)}var $={mountAdminInviteSettings:Z};var ee=a(46);Object(ee["a"])("interop.mountAdminInviteSettings",Z)},4534:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(347);var i=a(165);var s=a(1387);function o(){return Object(s["a"])({channelId:null,startTs:null})}var l=a(0);var c=a(17);var u=a(82);var d=Object(c["b"])("Switch to a channel if it is not currently active",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=Object(u["a"])(t());n!==r&&e(Object(s["a"])({channelId:r}))});d.meta={name:"switchToChannelIfNotActive",key:"messagePaneStoreSwitchToChannelIfNotActiveSwitchToChannelIfNotActive",description:"Switch to a channel if it is not currently active"};d.propTypes={channelId:l["b"].string};var p=d;var m=a(545);var h=a(422);var v=a(235);var f=Object(c["b"])("Conditionally animate a message deletion",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channel,n=a.ts,i=a.fromEvtLog,s=void 0!==i&&i;var o=t();Object(v["isWindowFocused"])(o)&&Object(u["a"])(o)===r?e(Object(h["animateDeleteMessage"])({channelId:r,ts:n})):e(Object(m["a"])({channelId:r,ts:n,fromEvtLog:s}))});f.meta={name:"deprecatedMaybeAnimateDeleteMessage",key:"messagePaneStoreDeprecatedMaybeAnimateDeleteMessageDeprecatedMaybeAnimateDeleteMessage",description:"Conditionally animate a message deletion"};f.propTypes={channel:l["b"].string,ts:l["b"].string,fromEvtLog:l["b"].bool};var b=f;var g=a(22);var _=a(9);function y(e,t,a){if(!e)return null;if(!t)return null;if(!a)return null;var r=Date.now();return e+"-"+t+"-"+a+"-"+r+"000"}var k=Object(c["b"])("Update the active channel session id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=t();var s=Object(g["b"])(n);var o=Object(_["getCurrentUserId"])(n);var l=y(s,o,r);e(Object(i["f"])(l))});k.meta={name:"updateActiveChannelSessionId",key:"messagePaneStoreUpdateActiveChannelSessionIdUpdateActiveChannelSessionId",description:"Update the active channel session id"};k.propTypes={channelId:l["b"].string};var O=k;function C(){return Object(n["b"])(TS.redux.getState())}function E(){return Object(n["k"])(TS.redux.getState())}function S(){return TS.redux.dispatch(o())}function w(){return TS.redux.dispatch(i["g"].apply(void 0,arguments))}function I(){return TS.redux.dispatch(i["c"].apply(void 0,arguments))}function j(){return TS.redux.dispatch(i["m"].apply(void 0,arguments))}function T(){return TS.redux.dispatch(p.apply(void 0,arguments))}function A(){return Object(n["h"])(TS.redux.getState())}function N(){return TS.redux.dispatch(i["i"].apply(void 0,arguments))}function M(){return TS.redux.dispatch(i["j"].apply(void 0,arguments))}function P(){return TS.redux.dispatch(i["l"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(b.apply(void 0,arguments))}function x(){return TS.redux.dispatch(O.apply(void 0,arguments))}function D(){return Object(n["c"])(TS.redux.getState())}Object(r["a"])("interop.messagePane",{getChannelSessionId:C,getPrevChannelId:E,hideMessagePane:S,setAppSpaceOpen:w,jumpToTimestamp:I,setOverlayVisible:j,switchToChannelIfNotActive:T,getMessagePaneStartTs:A,setGhostLastRead:N,setHighlightsBackButtonVisible:M,setNewxpOnboardingStep:P,deprecatedMaybeAnimateDeleteMessage:R,updateActiveChannelSessionId:x,getFocusRequestedTs:D})},4535:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(0);var b=a(13);var g=a.n(b);var _=a(27);var y=a(23);var k=a(6);var O=a(3755);var C=new k["b"]("migration_blocker_page");var E={enterpriseName:f["b"].string,sendEmail:f["b"].bool,teamName:f["b"].string,migrationID:f["b"].string,isOrgOwner:f["b"].bool,isWorkspaceOwner:f["b"].bool,isOrgAdmin:f["b"].bool,isWorkspaceAdmin:f["b"].bool,teamURL:f["b"].string};var S={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var w=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,a=t.teamName,r=t.enterpriseName;return n.a.createElement("h3",{className:"p-migration_blocker_page__title"},C.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:a,enterpriseName:r}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,a=t.enterpriseName,r=t.sendEmail;var i=C.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:a,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return n.a.createElement("div",{className:"p-migration_blocker_page__description"},i,r?C.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,a=t.migrationID,r=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,l=t.teamURL;if(!r&&!i&&!s&&!o)return null;return n.a.createElement(_["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+a+"/status"},n.a.createElement("div",{className:"p-migration_blocker_page__button__text"},n.a.createElement("span",{className:"p-migration_blocker_page__button__title"},C.t("View migration status")),n.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},C.t("Migration status is only visible to owners and admins."))),n.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},n.a.createElement(y["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=g()("p-migration_blocker_page","p-migration_blocker_page--large");return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-migration_blocker_text"},n.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(r["Component"]);w.displayName="MigrationBlockerPage";w.defaultProps=S;var I={};var j=w;var T=j;var A=a(161);var N=function e(t,a,r){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(A["a"],null,n.a.createElement(T,r))),a)};var M=N;var P=a(46);Object(P["a"])("interop.mountMigrationBlocker",M)},4536:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(109);var o=a(23);var l={appIcon:i["b"].string.isRequired,appName:i["b"].string.isRequired,teamIcon:i["b"].string.isRequired,teamName:i["b"].string.isRequired};var c=function e(t){var a=t.appIcon,r=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:a,alt:r,title:r}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_foreground_high"},n.a.createElement(o["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(o["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:r,title:s}))};c.displayName="OAuthPageLogos";t["a"]=Object(s["pure"])(c)},4539:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2);var s=a(34);var o=a(46);var l=a(2054);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function m(e){return p.includes(e)}var h=p;var v=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function f(e){return v.includes(e)}var b=v;function g(e){var t=e.data,a=e.method,r=e.args;var i=n()({},t,{args:null});var s=false===a.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,a,r&&r.channel);var o=false===a.startsWith("users.")&&false===m(a)&&TS.members.legacyEnsureMembersInDataArePresent(i,a);var l=false===a.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+a);var c=false===f(a)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,a);return TS.ensureFullyBooted().then(function(){return c}).then(function(){return Promise.join(s,o,l)}).catch(TS.error)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reason||e._x_reason||"legacy_no_reason_provided"}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,a=void 0!==t&&t;return function(e,t,r,i){var o={method:e,args:t,reason:_(t),EXPEDITED:a,SET_ACTIVE:!TS.client&&!i};var l=function a(r){return{ok:r.ok,request_id:r.request_id,data:r,method:e,args:t}};var c=TS.redux.dispatch(Object(s["a"])(o)).then(l).tap(u(e)&&g).catch(function(e){e.args=n()({_attempts:e.attempts},e.args);throw e});"function"===typeof r&&(c=c.then(function(e){return r(true,e.data,t)}).catch(function(e){return r(false,e.data,t)}));return c}}function k(){return Object(l["b"])(TS.redux.getState())}function O(){return k().isPaused()}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];k().awaitEmptyQ().then(e)}var E=y();var S=y({expedited:true});Object(o["a"])("interop.api",{call:E,callExpedited:S,callImmediately:S,getQueue:k,isPaused:O,callFuncWhenApiQisEmpty:C})},4540:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(4647);var c=a(2);var u=a(18);var d=a(0);var p=a(39);var m=a(16);var h=a(336);var v=a(28);var f=a(25);var b=a(35);var g=a(9);var _=a(69);var y=a(23);var k=a(27);var O=a(1034);var C=a(232);var E=a(1963);var S=a(2079);var w=a(1965);var I=a(1966);var j=a(1967);var T=a(1591);var A=a(3);var N=a.n(A);var M=a(6);var P=a(68);var R=a(284);var x=a(292);var D=a(581);var F=a(97);var L=a(1481);var B=new M["b"]("member_profile");var U={isPresenceActive:d["b"].bool,member:d["b"].object.isRequired,menuProps:d["b"].object.isRequired,openPrefsModal:d["b"].func,showFileList:d["b"].func,team:d["b"].object.isRequired,toggleUserPresence:d["b"].func,userCanEditCustomResponses:d["b"].bool,onClick:d["b"].func};var q={isPresenceActive:false,openPrefsModal:c["noop"],showFileList:c["noop"],toggleUserPresence:c["noop"],userCanEditCustomResponses:false,onClick:c["noop"]};function W(e){var t=e.isPresenceActive,a=e.member,r=e.menuProps,i=e.openPrefsModal,s=e.showFileList,o=e.team,l=e.toggleUserPresence,c=e.userCanEditCustomResponses,u=e.onClick;var d=Object(C["a"])(),p=d.featureModernProfileFlexpane;if(!p)return null;var h=void 0;if(Object(m["isSelf"])(a)){var f=void 0;f=t?B.t("Set yourself away"):B.t("[AWAY] Set yourself active");h=[{label:B.t("View preferences"),click:function e(){u();i()}},{label:B.t("Account settings"),click:function e(){Object(v["openAuthenticatedUrlInBrowser"])(o,"/account/settings")},showLinkIndicatorIcon:true},{type:"separator"},{label:B.t("View your files"),click:function e(){u();s({user:a.id})}},{label:f,click:function e(){u();l()}}]}else{h=[{label:B.t("View files"),click:function e(){u();s({user:a.id})}}];Object(m["isSlackbot"])(a)&&c&&h.push({label:B.t("Create/edit Slackbot responses"),href:Object(v["getTeamUrl"])(o,"/customize/slackbot")})}if(Object(R["canWriteText"])()){h.push({type:"separator"});h.push({label:B.t("Copy member ID"),description:a.id,click:function e(){u();Object(R["writeText"])(a.id)}})}return n.a.createElement(L["a"],N()({},r,{template:h}))}W.displayName="MemberProfileOverflowMenu";W.defaultProps=q;function H(e,t){var a=t.member;return{isPresenceActive:Object(x["getPresenceByMemberId"])(e,a.id)===x["PRESENCE_ACTIVE"],userCanEditCustomResponses:Object(P["K"])(e)}}var G={openPrefsModal:function e(){return D["a"].apply(void 0,arguments)},showFileList:function e(){return F["g"].apply(void 0,arguments)},toggleUserPresence:function e(){return x["toggleUserPresence"].apply(void 0,arguments)}};var V=Object(i["connect"])(H,G)(W);var K=a(1052);var z=a(2425);var Q={currentMemberId:d["b"].string,member:d["b"].object,memberTeam:d["b"].object,team:d["b"].object,canInteract:d["b"].bool,clogger:d["b"].object};var Y={currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:true,clogger:{track:c["noop"]}};function J(e){var t=e.currentMemberId,a=e.member,i=e.memberTeam,s=e.team,o=e.canInteract,c=e.clogger;var d=Object(r["useMemo"])(function(){var e=[K["a"].STATUS,K["a"].NAME,K["a"].TIME,K["a"].PHONE,K["a"].EMAIL,K["a"].CUSTOM,K["a"].GUEST,K["a"].SHARED_CHANNELS];a.id!==t&&e.push(K["a"].SHARED_WORKSPACES);return e},[t,a]);var p=Object(C["a"])(),m=p.featureModernProfileFlexpane;var h=Object(r["useCallback"])(function(){c.track(u["l"].USER_PROFILE_CLICK)},[c]);if(!m)return null;var f=n.a.createElement(E["a"],{className:"p-member_profile__picture",member:a});var b=n.a.createElement(w["a"],{className:"p-member_profile__restriction",member:a,team:i});var g=n.a.createElement(T["a"],{className:"p-member_profile__name",member:a,canInteract:o});if(Object(v["isUnavailable"])(i))return n.a.createElement(n.a.Fragment,null,f,b,g,n.a.createElement(I["a"],{memberTeam:i}));if(!o)return n.a.createElement(n.a.Fragment,null,f,b,g,n.a.createElement(j["a"],{member:a}));return n.a.createElement(l["a"],null,function(e){var t=e.width,r=e.height;return n.a.createElement(O["b"],{width:t,height:r,fade:true},f,b,n.a.createElement(S["a"],{className:"p-member_profile__buttons",includeOverflow:true,member:a,showCallButton:true,onClick:h},n.a.createElement(_["e"],{offsetY:8,position:"bottom-right",renderMenu:function e(t){return n.a.createElement(V,{member:a,menuProps:t,team:i,onClick:h})}},n.a.createElement(k["d"],{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},n.a.createElement(y["b"],{type:"vertical-ellipsis"})))),g,n.a.createElement(K["b"],{member:a,team:s,types:d,onClick:h}))})}J.displayName="MemberProfileDetails";J.defaultProps=Y;function X(e,t){var a=t.memberId;var r=Object(f["e"])(e,a);if(!r)return{};var n=Object(g["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(h["canMemberInteractById"])(e,a):!Object(m["isStranger"])(r);return{currentMemberId:Object(g["getCurrentUserId"])(e),member:r,memberTeam:Object(b["j"])(e,Object(m["getMemberTeamId"])(r)),team:Object(b["d"])(e),canInteract:n,clogger:Object(p["a"])({state:e})}}var Z=Object(i["connect"])(X)(J);var $=a(161);var ee=function e(t,a,r){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement($["a"],null,n.a.createElement(Z,r))),a)};var te=ee;var ae=a(46);Object(ae["a"])("interop.mountProfileFlexpane",te)},4541:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(0);var b=a(27);var g=a(2);var _=a(9);var y=a(6);var k=a(34);var O=a(30);var C=Object(O["a"])("Gets the access logs",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=void 0===r?"get-access-logs":r;return e(Object(k["a"])({method:"users.accessLogs",reason:n,args:{}})).then(function(e){return e}).catch(function(e){throw e})});C.meta={name:"getAccessLogs",key:"fetchersAccessLogsApiGetAccessLogs",description:"Gets the access logs"};C.propTypes={};var E=a(13);var S=a.n(E);var w=new y["b"]("download_access_logs");var I={getAccessLogs:f["b"].func,featureDownloadAccessLogs:f["b"].bool};var j={getAccessLogs:g["noop"],featureDownloadAccessLogs:true};var T=function(e){v()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"onDownloadAccessLogs",value:function e(){var t=this;this.props.getAccessLogs({}).then(function(e){var a=t.getAccessLogsAsString(e.logins);var r=document.createElement("a");var n=new Blob([a],{type:"text/csv;encoding:utf-8"});var i="access_logs.csv";if(navigator.msSaveBlob)navigator.msSaveBlob(n,i);else if(URL&&"download"in r){r.href=URL.createObjectURL(n);r.setAttribute("download",i);document.body.appendChild(r);r.click();document.body.removeChild(r)}else location.href="data:application/octet-stream,"+encodeURIComponent(a)}).catch(function(e){throw e})}},{key:"getAccessLogsAsString",value:function e(t){var a=[];var r=["Date Accessed","User Agent - Simple","User Agent - Full","IP Address","Number of Logins","Last Date Accessed"];a.push(r);t.forEach(function(e){var t=[];var r=new Date(1e3*e.date_first);var n=r.toString();var i=new Date(1e3*e.date_last);var s=i.toString();t.push(n);t.push(e.user_agent_simple);t.push('"'+e.user_agent_full+'"');t.push(e.ip);t.push(e.login_count);t.push(s);a.push(t)});return a.map(function(e){return e.join(",")}).join("\n")}},{key:"render",value:function e(){var t=this;var a=S()("float_right","margin_bottom_100");if(this.props.featureDownloadAccessLogs)return n.a.createElement(b["d"],{className:a,type:"outline",onClick:function e(){return t.onDownloadAccessLogs()}},w.t("Download Access Logs"));return null}}]);return t}(r["Component"]);T.displayName="DownloadAccessLogsButton";T.defaultProps=j;var A=function e(t){return{getAccessLogs:function e(a){return t(C(a))}}};var N=function e(t){return{featureDownloadAccessLogs:Object(_["isFeatureEnabled"])(t,"feature_download_access_logs")}};var M=Object(i["connect"])(N,A)(T);var P=a(161);var R=function e(t,a){var r=document.getElementById("download_access_logs_button_mount_point");if(!r)throw new Error("Could not find a valid download access logs mount point.");if(!t)throw new Error("mountDownloadAccessLogs must be called with a valid teamId parameter.");var l=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(P["a"],null,n.a.createElement(M,a))),r)};var x={mountDownloadAccessLogsButton:R};var D=a(46);Object(D["a"])("interop.mountDownloadAccessLogsButton",R)},4542:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(9);var _=a(0);var y=a(6);var k=a(20);var O=a(300);var C=a(1073);var E=a(1980);var S=a(1659);var w=a(3797);var I=new y["b"]("calendar");var j={featureCalendarSimpleAgendaView:_["b"].bool,isLoading:_["b"].bool};var T={featureCalendarSimpleAgendaView:true,isLoading:true};var A=function(e){b()(t,e);function t(){d()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"focus",value:function e(){return null}},{key:"blur",value:function e(){return null}},{key:"renderBody",value:function e(){var t=this.props,a=t.isLoading,r=t.featureCalendarSimpleAgendaView;if(!r)return null;if(a)return n.a.createElement("div",{className:"p-calendar_flexpane__loading"},I.t("Loading\u2026"));return n.a.createElement("div",null," This is user calendar ")}},{key:"render",value:function e(){var t=this.props.featureCalendarSimpleAgendaView;if(!t)return null;return n.a.createElement(C["a"],{component:this,order:4},n.a.createElement(O["a"],{id:k["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE},n.a.createElement("div",{className:"p-calendar_flexpane"},n.a.createElement(E["a"],null,n.a.createElement(S["a"],{size:"medium"}),n.a.createElement("div",null,I.t("Your calendar"))),this.renderBody())))}}]);return t}(n.a.Component);A.displayName="CalendarFlexpane";A.defaultProps=T;var N=function e(t){return{featureCalendarSimpleAgendaView:Object(g["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view")}};var M={};var P=Object(o["connect"])(N,M)(A);var R=P;var x=function e(t,a){if(!t)throw new Error("mountUserCalendar must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(R,null)),a)};var D=function e(t){s.a.unmountComponentAtNode(t)};var F={mountUserCalendarFlexPane:x,unmountUserCalendarFlexPane:D};var L=a(46);Object(L["a"])("interop.mountUserCalendarFlexPane",x);Object(L["a"])("interop.unMountUserCalendarFlexPane",D)},4543:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(3);var p=a.n(d);var m=a(5);var h=a.n(m);var v=a(4);var f=a.n(v);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var k=a(10);var O=a.n(k);var C=a(0);var E=a(6);var S=a(9);var w=a(34);var I=a(30);var j=a(14);var T=a(2);var A=Object(I["a"])("Get Entereprise Auth SSO preferences",function(e,t,a){var r=a.reason;return e(Object(w["a"])({method:"enterprise.auth.sso.get",reason:r})).catch(function(e){var a="failed to get enterprise auth sso preferences";Object(j["a"])({getState:t}).error("Enterprise",a);throw e})});A.meta={name:"getEnterpriseAuthSSOPrefs",key:"fetchersEnterpriseSsoPreferencesApiGetEnterpriseAuthSSOPrefs",description:"Get Entereprise Auth SSO preferences"};A.propTypes={reason:C["b"].string};var N=Object(I["a"])("Set Entereprise Auth SSO preferences",function(e,t,a){var r=a.syncWithProvider,n=a.changeEmail,i=a.chooseUsername,s=a.authRestrictions,o=a.samlProviderLabel,l=a.reason;var c=Object(T["omitBy"])({sync_with_provider:r,change_email:n,choose_username:i,auth_restrictions:s,saml_provider_label:o},T["isUndefined"]);return e(Object(w["a"])({method:"enterprise.auth.sso.set",args:c,reason:l})).catch(function(e){var a="failed to set enterprise auth SSO preferences";Object(j["a"])({getState:t}).error("Enterprise",a);throw e})});N.meta={name:"setEnterpriseAuthSSOPrefs",key:"fetchersEnterpriseSsoPreferencesApiSetEnterpriseAuthSSOPrefs",description:"Set Entereprise Auth SSO preferences"};N.propTypes={syncWithProvider:C["b"].bool,changeEmail:C["b"].bool,chooseUsername:C["b"].bool,authRestrictions:C["b"].number,reason:C["b"].string};var M=a(526);var P=a(144);var R=a(162);var x=a(86);var D=a(52);var F=a(150);var L=a(369);var B=a(123);var U=a(170);var q=a(295);var W=a(16);var H=a(27);var G=a(31);var V=a(1202);var K=a(3268);var z;var Q=new E["b"]("enterprise_dashboard");var Y={featureOrgModernSsoPreferencesPage:C["b"].bool,updateProfilesOnLogin:C["b"].bool,editableEmailAddresses:C["b"].bool,editableDisplayName:C["b"].bool,guestsMustSSO:C["b"].string,customSignInLabel:C["b"].string,getEnterpriseAuthSSOPrefs:C["b"].func.isRequired,setEnterpriseAuthSSOPrefs:C["b"].func.isRequired,enqueueToast:C["b"].func.isRequired,idpButtonLabel:C["b"].string,idpLabel:C["b"].string,user:C["b"].object};var J={featureOrgModernSsoPreferencesPage:false,updateProfilesOnLogin:false,editableEmailAddresses:false,editableDisplayName:false,customSignInLabel:"",guestsMustSSO:"",idpButtonLabel:"SAML",idpLabel:"IDP",user:{}};var X=Symbol("UPDATE_PROFILES_ON_LOGIN_SETTING");var Z=Symbol("EDITABLE_EMAIL_ADDRESSES_SETTING");var $=Symbol("EDITABLE_DISPLAY_NAME_SETTING");var ee=Symbol("GUEST_ACCOUNTS_REQUIRE_SSO_SETTING");var te=Symbol("CUSTOM_SIGN_IN_BUTTON_SETTING");var ae=(z={},O()(z,X,"syncWithProvider"),O()(z,Z,"changeEmail"),O()(z,$,"chooseUsername"),O()(z,ee,"authRestrictions"),O()(z,te,"samlProviderLabel"),z);var re="checkbox";var ne="radio";var ie="button_preview";var se=function(e){y()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={settingsItems:[{id:X,value:a.props.updateProfilesOnLogin,saving:false,open:false},{id:Z,value:a.props.editableEmailAddresses,saving:false,open:false},{id:$,value:a.props.editableDisplayName,saving:false,open:false},{id:ee,value:a.props.guestsMustSSO,saving:false,open:false},{id:te,value:a.props.customSignInLabel,saving:false,open:false}],loading:true};Object(G["a"])(a,["onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange"]);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEnterpriseAuthSSOPrefs().then(function(e){var a=e.sso;var r=a.sync_with_provider;var n=a.change_email;var i=a.choose_username;var s=""+(a.auth_restrictions||0);var o=a.saml_provider_label;t.setState(function(e){var t=e.settingsItems.slice();Object(T["find"])(t,{id:X}).value=r;Object(T["find"])(t,{id:Z}).value=n;Object(T["find"])(t,{id:$}).value=i;Object(T["find"])(t,{id:ee}).value=s;Object(T["find"])(t,{id:te}).value=o;return{settingsItems:t,loading:false}})});document.body.classList.add("p-sso_preferences_view__body-position-static")}},{key:"componentWillUnmount",value:function e(){document.body.classList.remove("p-sso_preferences_view__body-position-static")}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];a._setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:e.value}])}}},{key:"onCancel",value:function e(t){var a=this;return function(){a._setSettingsItemKeys(t,[{k:"open",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var a=this;return function(e){a._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onRadioChange",value:function e(t){var a=this;return function(e){e.target.checked&&a._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.value}])}}},{key:"onButtonPreviewChange",value:function e(t){var a=this;return function(e){a._setSettingsItemKeys(t,[{k:"tempValue",v:e}])}}},{key:"settingClicked",value:function e(t){var a=this;return function(){return a.onEdit(t)()}}},{key:"saveSetting",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id;var n=O()({},ae[r],e.tempValue);n.authRestrictions&&(n.authRestrictions=+n.authRestrictions);return a._apiSet(n,t)}}},{key:"_apiSet",value:function e(t,a){var r=this;this._setSettingsItemKeys(a,[{k:"saving",v:true}]);return this.props.setEnterpriseAuthSSOPrefs(t).then(function(){var e=r.state.settingsItems[a];r._setSettingsItemKeys(a,[{k:"value",v:e.tempValue}]);var t=r.props.featureOrgModernSsoPreferencesPage?Q.t("Setting saved."):"";t&&r.props.enqueueToast({element:n.a.createElement(R["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,t))});r._setSettingsItemKeys(a,[{k:"saving",v:false},{k:"open",v:false}])}).catch(function(){var e=r.props.featureOrgModernSsoPreferencesPage?Q.t("Something went wrong."):"";e&&r.props.enqueueToast({element:n.a.createElement(R["b"],null,n.a.createElement("strong",null,e))})})}},{key:"_toggleBooleanValue",value:function e(t,a){var r=this;var n=this.state.settingsItems[t].id;var i=Object(T["isBoolean"])(a)?a:!this.state.settingsItems[t].value;var s=O()({},ae[n],n===ee?Object(T["toNumber"])(!i):i);return this._apiSet(s,t).then(function(){r._setSettingsItemKeys(t,[{k:"value",v:i}])})}},{key:"_setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(T["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,p()({},r[t],n));return{settingsItems:r}})}},{key:"renderControl",value:function e(t,a,r){if(!this.props.featureOrgModernSsoPreferencesPage)return null;switch(r[t.id].type){case re:return n.a.createElement(D["a"],{text:r[t.id].onState,subtext:r[t.id].onDescription,type:"inline",cursor:"pointer"},n.a.createElement(B["a"],{name:"checkbox-"+a,checked:t.tempValue,onChange:this.onCheckboxChange(a)}));case ne:return n.a.createElement("div",null,n.a.createElement(q["a"],{field:ne+"-"+a,legendText:Q.t("SSO authentication must be used by:")},n.a.createElement(D["a"],{text:Q.t("All org members"),subtext:Q.t("All accounts in the organization must sign in with SSO."),type:"inline",cursor:"pointer"},n.a.createElement(U["a"],{name:ne+"-"+a,value:"0",checked:"0"===t.tempValue,onChange:this.onRadioChange(a)})),n.a.createElement(D["a"],{text:Q.t("All org members, except guests"),subtext:Q.t("Guest accounts can sign in with a Slack email and password"),type:"inline",cursor:"pointer"},n.a.createElement(U["a"],{name:ne+"-"+a,value:"1",checked:"1"===t.tempValue,onChange:this.onRadioChange(a)}))));case ie:return n.a.createElement("div",null,n.a.createElement("div",{className:"p-sso_preferences_view__custom_button_layout"},n.a.createElement(D["a"],{className:"elevation_2 rounded",text:Q.t("Button preview:"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(H["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button"},Q.t("Sign in with {label}",{label:t.tempValue||this.props.idpButtonLabel})),n.a.createElement("div",{className:"c-hint"},Q.t("This is what your button will look like."))),n.a.createElement(D["a"],{text:Q.t("Sign in button label"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(F["a"],{ariaDescribedby:"custom-text-label",name:"custom-text",id:"custom-text",value:t.tempValue,placeholder:Q.t("Sign in with {label}",{label:this.props.idpButtonLabel}),hintText:Q.t("Customize your button label"),onChange:this.onButtonPreviewChange(a),size:"medium",maxCharacterLimit:20,maxLength:"20"}))));default:return null}}},{key:"renderIdentitySettings",value:function e(){var t,a=this;if(!this.props.featureOrgModernSsoPreferencesPage)return null;var r=(t={},O()(t,X,{label:Q.t("User profiles"),prompt:Q.t("Choose whether profile fields are synced each time a user logs in."),onDescription:Q.t("Available user profile fields will be synced from your identity provider every time a user logs in."),offDescription:Q.t("User profile fields will not be synced from your identity provider on log in."),onState:Q.t("Update profile each time a user logs in"),offState:Q.t("Don\u2019t update profile each time a user logs in"),type:re}),O()(t,Z,{label:Q.t("Email addresses"),prompt:Q.t("Choose whether users can change their email addresses in Slack."),onDescription:Q.t("Users will be able to change their email address to something other than the one from their {idpLabel} account. They\u2019ll still log in with {idpLabel}.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their email address"),offState:Q.t("Don\u2019t allow users to change their email address"),type:re}),O()(t,$,{label:Q.t("Display names"),prompt:Q.t("Choose whether users can change their display name in Slack."),onDescription:Q.t("Users will be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their display name"),offState:Q.t("Don\u2019t allow users to change their display name"),type:re}),O()(t,ee,{label:Q.t("SSO authentication"),prompt:Q.t("Choose whether guest accounts need to sign in through your SSO provider."),onDescription:Q.t("All accounts in the organization must sign in with SSO."),offDescription:Q.t("Guest accounts can sign in with a Slack email and password."),onState:Q.t("Must be used by all org members"),offState:Q.t("Must be used by all org members, except guests"),type:ne}),O()(t,te,{label:Q.t("Custom sign-in button"),prompt:Q.t("Have a nickname for your SSO system? Add it here to help your members sign in."),onDescription:Q.t("This is what your sign in button will look like"),onState:Q.t("Button preview:"),offState:Q.t("Button preview:"),type:ie}),t);var i=Q.t("Save Setting");var s=function e(t){return true===t.value||"0"===t.value};var o=function e(t){var i=r[t.id];if(i.type===ie)return n.a.createElement("div",null,n.a.createElement(H["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button readonly"},Q.rt("Sign in with {label}",{label:t.value||a.props.idpButtonLabel})),i.onDescription);return s(t)?i.onDescription:i.offDescription};var l=Object(W["isEnterpriseOwner"])(this.props.user);return n.a.createElement("div",null,this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement(V["a"],{label:r[e.id].label,state:s(e)?r[e.id].onState:r[e.id].offState,description:o(e),onClick:a.settingClicked(t),type:"button",control:{type:"button",onEdit:a.onEdit(t),editOnly:true},readonly:!l,readonlyTooltip:l?"":Q.t("Only Org Owners can change this setting")}),n.a.createElement(L["a"],{title:r[e.id].label,isOpen:e.open,onCancel:a.onCancel(t),onGo:a.saveSetting(t),goButtonText:i,goButtonIsPending:e.saving,withHeader:true},n.a.createElement("p",null,r[e.id].prompt),a.renderControl(e,t,r)))}))}},{key:"render",value:function e(){return this.props.featureOrgModernSsoPreferencesPage?n.a.createElement("div",{className:"p-sso_preferences_view"},n.a.createElement("h1",{className:"p-sso_preferences_view__title"},Q.t("SSO Preferences")),this.state.loading?n.a.createElement(x["a"],{color:"blue",size:"jumbo"}):n.a.createElement("div",null,this.renderIdentitySettings()),n.a.createElement(M["a"],null)):null}}]);return t}(r["PureComponent"]);se.displayName="SSOPreferencesView";se.defaultProps=J;var oe=function e(t){return{featureOrgModernSsoPreferencesPage:Object(S["isFeatureEnabled"])(t,"feature_org_modern_sso_preferences_page")}};var le=function e(t){return{enqueueToast:function e(){return t(P["enqueueToast"].apply(void 0,arguments))},getEnterpriseAuthSSOPrefs:function e(){return t(A({reason:"SSOPreferencesView_getEnterpriseAuthSSOPrefs"}))},setEnterpriseAuthSSOPrefs:function e(a){return t(N(p()({},a,{reason:"SSOPreferencesView_setEnterpriseAuthSSOPrefs"})))}}};var ce=Object(o["connect"])(oe,le)(se);var ue=ce;Object(c["a"])("interop.ssoPreferences",{render:function e(t,a,r){if(!t)throw new Error("ssoPreferences render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ue,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4545:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1);var i=a.n(n);var s=a(12);var o=a(128);var l=a(29);var c=a(5);var u=a.n(c);var d=a(4);var p=a.n(d);var m=a(7);var h=a.n(m);var v=a(8);var f=a.n(v);var b=a(0);var g=a(2);var _=a(13);var y=a.n(_);var k=a(40);var O=a.n(k);var C=a(6);var E=a(542);var S=a(345);var w=a(35);var I=a(28);var j=a(45);var T=a(511);var A=a(425);var N=a(16);var M=a(25);var P=a(134);var R=a(230);var x=a(3809);var D=new C["b"]("classic_nav");var F={team:b["b"].object.isRequired,member:b["b"].object.isRequired,name:b["b"].string.isRequired,orgName:b["b"].string,url:b["b"].string.isRequired,onMouseEnter:b["b"].func,fetchPaymentsStatus:b["b"].func.isRequired,localDiscountOffer:b["b"].object};var L={orgName:void 0,onMouseEnter:g["noop"],localDiscountOffer:null};var B=function(e){f()(t,e);function t(e){u()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={paymentsStatusIsLoaded:false};return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchPaymentsStatus().then(function(){t.setState(function(){return{paymentsStatusIsLoaded:true}})})}},{key:"buildPlanInfoLink",value:function e(t){var a=t.path,r=t.tag,n=t.text;if("a"!==r)return null;var s=this.props.team;return i.a.createElement(P["a"],{target:"_blank",className:"bold",path:a,onClick:function e(){Object(I["openAuthenticatedUrlInBrowser"])(s,a)}},n)}},{key:"renderTeamPlanInfo",value:function e(){var t=this;var a=this.props,r=a.team,s=a.member,o=a.orgName,l=a.localDiscountOffer;if(!this.state.paymentsStatusIsLoaded)return null;if(Object(N["isGuest"])(s))return null;var c=void 0;var u=void 0;var d="p-classic_nav__team_menu__blurb_plan";var p=Object(I["isOnStandardPlan"])(r);var m=Object(I["isOnTrial"])(r);var h=Object(I["isOnFreePlan"])(r);if((m||h)&&l){c="pricing?ui_step=61&ui_element=5";u=i.a.createElement(n["Fragment"],null,D.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:l.discountPercent})," ",this.buildPlanInfoLink({path:c,tag:"a",text:D.t("See upgrade options")}));d=y()(d,"p-classic_nav__team_menu__blurb_plan--has_local_discount","p-classic_nav__team_menu__blurb_plan--has_local_discount_"+l.country.toLowerCase())}else if(m){var v=O()(1e3*Object(I["getProductTermEndTs"])(r)).subtract(1,"day");var f=Object(E["a"])(v,{timeZone:Object(N["getMemberTimezone"])(s),timeZoneOffset:Object(N["getMemberTimezoneOffset"])(s),returnMoment:true});var b=Object(S["a"])(f,"{date}");c="pricing?ui_step=61&ui_element=5";u=i.a.createElement(n["Fragment"],null,p?D.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:b}):D.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:b})," ",this.buildPlanInfoLink({path:c,tag:"a",text:D.t("See upgrade options")}))}else if(h){c="pricing?ui_step=61&ui_element=5";u=D.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},function(e){var a=e.tag,r=e.text;return t.buildPlanInfoLink({path:c,tag:a,text:r})})}else if(p){c="pricing/standard?ui_step=61&ui_element=5";u=D.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},function(e){var a=e.tag,r=e.text;return t.buildPlanInfoLink({path:c,tag:a,text:r})})}else if(Object(I["isOnPlusPlan"])(r)){c="pricing/plus?ui_step=61&ui_element=5";u=D.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},function(e){var a=e.tag,r=e.text;return t.buildPlanInfoLink({path:c,tag:a,text:r})})}else if(Object(I["isEnterpriseTeam"])(r)){c="account/workspace-settings";u=D.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:o},function(e){var a=e.tag,r=e.text;return t.buildPlanInfoLink({path:c,tag:a,text:r})})}else Object(I["isOnCompliancePlan"])(r)&&(u=D.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return u?i.a.createElement("p",{className:d,"data-qa":"classic_nav__team_menu__blurb_plan"},u):null}},{key:"render",value:function e(){var t=this.props,a=t.team,r=t.name,n=t.url,s=t.onMouseEnter;var o=Object(I["isEnterpriseTeam"])(a);var l=Object(j["isAppStoreBuild"])();return i.a.createElement("div",{onMouseEnter:s},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},i.a.createElement(R["b"],{id:a.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},r),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n))),o||!l?this.renderTeamPlanInfo():null)}}]);return t}(n["Component"]);B.displayName="TeamBlurb";B.defaultProps=L;var U=function e(t){var a=Object(w["d"])(t);return{team:a,member:Object(M["b"])(t),name:Object(I["getTeamDisplayName"])(a),orgName:a.enterprise_name,url:a.domain+".slack.com",localDiscountOffer:Object(I["getTeamLocalDiscountOffer"])(a)}};var q={fetchPaymentsStatus:A["d"]};var W=Object(s["connect"])(U,q)(Object(T["b"])(B));var H=a(161);function G(e,t,a){if(!e)throw new Error("mountTeamBlurb must be called with a teamId parameter");var r=Object(l["f"])(e);Object(o["a"])(i.a.createElement(s["Provider"],{store:r},i.a.createElement(H["a"],null,i.a.createElement(W,a))),t)}Object(r["a"])("interop.mountTeamBlurb",G)},4546:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(0);var _=a(2);var y=a(166);var k=a(52);var O=a(441);var C=a(123);var E=a(6);var S=new E["b"]("enterprise_moving_channels");var w=/\r?\n|\r/g;var I={onInputChange:g["b"].func,onCheckboxChange:g["b"].func,customMessageError:g["b"].string};var j={onInputChange:_["noop"],onCheckboxChange:_["noop"],customMessageError:null};var T=300;var A=void 0;var N=function e(t){return A[t]};var M=function e(t){t&&t.length>T?Object(y["b"])(Object(y["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(y["b"])(Object(y["a"])().channels.setMoveChannelMessageError())};var P=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={includeCustomMessage:false,customMessage:""};a.onInputChange=a.onInputChange.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.onCheckboxChange=a.onCheckboxChange.bind(a);A={message_too_long:S.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:T}),message_empty:S.t("Please fill in a custom message.")};return a}m()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var a=t.replace(w," ");this.setCustomMessage(a);this.props.onInputChange(a);M(a)}},{key:"onCheckboxChange",value:function e(t){t.persist();var a=t.target.checked;this.setIncludeCustomMessage(a);this.props.onCheckboxChange(a);a?M(this.state.customMessage):Object(y["b"])(Object(y["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){var t=this.state.includeCustomMessage;var a=S.t("Add a custom message to channel members");var r=S.t("This message will appear within the Slackbot notification that each member will receive.");return n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:a,subtext:r,type:"inline"},n.a.createElement(C["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){var t=this.state.customMessage;var a=this.props.customMessageError;var r=S.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(O["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:r,maxCharacterLimit:T,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:N(a)||a,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){var t=this.state.includeCustomMessage;return n.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(r["PureComponent"]);P.displayName="MoveChannelsCustomMessage";P.defaultProps=j;var R=P;var x=R;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,a,r){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(x,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4548:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(182);var i=a(104);var s=a(277);var o=a(1191);var l=a(761);var c=a(781);var u=a(2005);var d=a(1);var p=a.n(d);var m=a(85);var h=a.n(m);var v=a(12);var f=a(2);var b=a(128);var g=a(29);var _=a(1686);var y=a(161);var k=function e(){return document.getElementById("search_popover_container")};var O=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(b["a"])(p.a.createElement(v["Provider"],{store:Object(g["f"])(t)},p.a.createElement(y["a"],null,p.a.createElement(_["a"],{onClickRefreshSearch:f["noop"]}))),a)};var C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();h.a.unmountComponentAtNode(t)};var E={mountPrimarySearch:O};var S=a(2064);var w=function e(t,a){if(!t)throw new Error("mountSearch must be called with a teamId parameter");if(!a)throw new Error("mountSearch must be called with a reactRoot parameter");Object(b["a"])(p.a.createElement(v["Provider"],{store:Object(g["f"])(t)},p.a.createElement(y["a"],null,p.a.createElement(S["a"],null))),a)};var I={mountSearch:w};var j=a(575);var T=a(762);var A=a(243);var N=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(r["a"])("interop.searchUi",{getVisible:function e(){return Object(n["t"])(TS.redux.getState())}});Object(r["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(s["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(o["c"])(TS.redux.getState(),t)}});Object(r["a"])("interop.searchActions",{close:N(l["a"]),setFocusedViaTabKey:N(i["m"]),openFromCmdF:N(c["b"]),openFromCmdG:N(c["c"]),toggleFromQuickSwitcherCmd:N(u["a"]),openFromClick:N(c["a"]),openFromSlashCommand:N(c["i"]),openFromKeyDown:N(c["f"]),openFromFilesMenu:N(c["e"])});Object(r["a"])("interop.mountPrimarySearch",O);Object(r["a"])("interop.unmountPrimarySearch",C);Object(r["a"])("interop.mountSearch",w);Object(r["a"])("interop.usePrimarySearch",function(){return Object(j["a"])(TS.redux.getState())});Object(r["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(T["b"])(TS.redux.getState())});Object(r["a"])("interop.isSearchAutocompleteOpen",function(){return Object(A["isSearchAutocompleteOpen"])(TS.redux.getState())})},4550:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1921);var d=u["a"];var p=a(161);var m=function e(t,a,r){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(d,r))),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v={mountChannelOptions:m,unmountChannelOptions:h};var f=a(46);Object(f["a"])("interop.mountChannelOptions",m);Object(f["a"])("interop.unmountChannelOptions",h)},4551:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(2067);var d=a(10);var p=a.n(d);var m=a(3);var h=a.n(m);var v=a(5);var f=a.n(v);var b=a(4);var g=a.n(b);var _=a(7);var y=a.n(_);var k=a(8);var O=a.n(k);var C=a(0);var E=a(9);var S=a(61);var w=a(2058);var I=a(153);var j=a(1655);var T=a(2303);var A={dndDays:C["b"].string.isRequired,dndEnabledDays:C["b"].objectOf(C["b"].string).isRequired,dndBeforeDays:C["b"].objectOf(C["b"].string).isRequired,dndAfterDays:C["b"].objectOf(C["b"].string).isRequired,dndBaseBeforeTime:C["b"].string.isRequired,dndBaseAfterTime:C["b"].string.isRequired,featureGranularDnd:C["b"].bool};var N={featureGranularDnd:false};var M=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.dndDays,n=e.dndEnabledDays,i=e.dndBeforeDays,s=e.dndAfterDays,o=e.dndBaseBeforeTime,l=e.dndBaseAfterTime;a.state={dndDays:r,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,dndBaseBeforeTime:o,dndBaseAfterTime:l};a.handleDndDaysChange=a.handleDndDaysChange.bind(a);a.handleTimeChange=a.handleTimeChange.bind(a);a.handleAllDayChange=a.handleAllDayChange.bind(a);a.handleDayChange=a.handleDayChange.bind(a);return a}g()(t,[{key:"getDayOfTheWeek",value:function e(t){if(!t)return null;return t.split("_")[2]}},{key:"handleDndDaysChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.state,n=r.dndBaseBeforeTime,i=r.dndBaseAfterTime,s=r.dndEnabledDays;if(a===I["a"].CUSTOM){this.setState(function(){return{dndDays:a}});return}var o=Object(j["a"])({dndDays:a,dndEnabledDays:s});var l=o?I["b"].DISABLED:I["b"].PARTIAL;var c=a===I["a"].WEEKDAYS;this.setState(function(){return{dndDays:a,dndBeforeDays:{monday:n,tuesday:n,wednesday:n,thursday:n,friday:n,saturday:n,sunday:n},dndAfterDays:{monday:i,tuesday:i,wednesday:i,thursday:i,friday:i,saturday:i,sunday:i},dndEnabledDays:{monday:l,tuesday:l,wednesday:l,thursday:l,friday:l,saturday:c?I["b"].ALL_DAY:l,sunday:c?I["b"].ALL_DAY:l}}})}},{key:"handleTimeChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value,n=a.type,i=a.pref;var s=this.state.dndDays;var o="dndBeforeDays";var l="dndBaseBeforeTime";if("AFTER"===n){o="dndAfterDays";l="dndBaseAfterTime"}if(s===I["a"].CUSTOM){this.setState(function(e){return p()({},o,h()({},e[o],p()({},t.getDayOfTheWeek(i),r)))});return}this.setState(function(){var e;return e={},p()(e,o,{monday:r,tuesday:r,wednesday:r,thursday:r,friday:r,saturday:r,sunday:r}),p()(e,l,r),e})}},{key:"handleAllDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=this.state.dndDays;var s=t.target.checked?I["b"].DISABLED:I["b"].PARTIAL;if(i===I["a"].CUSTOM){this.setState(function(e){return{dndEnabledDays:h()({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),s))}});return}var o=i===I["a"].WEEKDAYS;this.setState(function(){return{dndEnabledDays:{monday:s,tuesday:s,wednesday:s,thursday:s,friday:s,saturday:o?I["b"].ALL_DAY:s,sunday:o?I["b"].ALL_DAY:s}}})}},{key:"handleDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=t.target.checked?I["b"].PARTIAL:I["b"].ALL_DAY;this.setState(function(e){return{dndEnabledDays:h()({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),i))}})}},{key:"render",value:function e(){var t=this.props.featureGranularDnd;var a=this.state,i=a.dndDays,s=a.dndEnabledDays,o=a.dndBeforeDays,l=a.dndAfterDays,c=a.dndBaseBeforeTime,u=a.dndBaseAfterTime;if(!t)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement(w["a"],{dndDays:i,dndEnabledDays:s,dndBeforeDays:o,dndAfterDays:l,dndBaseBeforeTime:c,dndBaseAfterTime:u,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:t}))}}]);return t}(r["Component"]);M.displayName="DndAdminPreferences";M.defaultProps=N;var P=function e(t){return{featureGranularDnd:Object(E["isFeatureEnabled"])(t,"feature_granular_dnd"),dndDays:Object(S["a"])(t,"dnd_days"),dndEnabledDays:{monday:Object(S["a"])(t,"dnd_enabled_monday"),tuesday:Object(S["a"])(t,"dnd_enabled_tuesday"),wednesday:Object(S["a"])(t,"dnd_enabled_wednesday"),thursday:Object(S["a"])(t,"dnd_enabled_thursday"),friday:Object(S["a"])(t,"dnd_enabled_friday"),saturday:Object(S["a"])(t,"dnd_enabled_saturday"),sunday:Object(S["a"])(t,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(S["a"])(t,"dnd_before_monday"),tuesday:Object(S["a"])(t,"dnd_before_tuesday"),wednesday:Object(S["a"])(t,"dnd_before_wednesday"),thursday:Object(S["a"])(t,"dnd_before_thursday"),friday:Object(S["a"])(t,"dnd_before_friday"),saturday:Object(S["a"])(t,"dnd_before_saturday"),sunday:Object(S["a"])(t,"dnd_before_sunday")},dndAfterDays:{monday:Object(S["a"])(t,"dnd_after_monday"),tuesday:Object(S["a"])(t,"dnd_after_tuesday"),wednesday:Object(S["a"])(t,"dnd_after_wednesday"),thursday:Object(S["a"])(t,"dnd_after_thursday"),friday:Object(S["a"])(t,"dnd_after_friday"),saturday:Object(S["a"])(t,"dnd_after_saturday"),sunday:Object(S["a"])(t,"dnd_after_sunday")},dndBaseBeforeTime:Object(S["a"])(t,"dnd_before_monday"),dndBaseAfterTime:Object(S["a"])(t,"dnd_after_monday")}};var R=Object(o["connect"])(P)(M);var x=a(161);var D=function e(t,a){if(!t)throw new Error("mountDndPreferences must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(x["a"],null,n.a.createElement(u["a"],null))),a)};var F=function e(t){s.a.unmountComponentAtNode(t)};var L=function e(t,a){if(!a)throw new Error("mountDndAdminPreferences needs a valid reactRoot to mount to");if(!t)throw new Error("mountDndAdminPreferences must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(x["a"],null,n.a.createElement(R,null))),a)};var B=a(46);Object(B["a"])("interop.mountDndPreferences",D);Object(B["a"])("interop.unmountDndPreferences",F);Object(B["a"])("interop.mountDndAdminPreferences",L)},4553:function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"supportsCallWindowStatus",function(){return N});a.d(r,"setCallWindowBusy",function(){return M});a.d(r,"isCallWindowBusy",function(){return P});a.d(r,"setCallWindowToken",function(){return R});a.d(r,"clearCallWindowToken",function(){return x});a.d(r,"getCallWindowToken",function(){return D});a.d(r,"setCallWindowTeamId",function(){return F});a.d(r,"clearCallWindowTeamId",function(){return L});a.d(r,"getCallWindowTeamId",function(){return B});a.d(r,"setCallWindowTeamName",function(){return U});a.d(r,"clearCallWindowTeamName",function(){return q});a.d(r,"getCallWindowTeamName",function(){return W});a.d(r,"setIncomingCallWindowBusy",function(){return H});a.d(r,"isIncomingCallWindowBusy",function(){return G});a.d(r,"setIncomingCallWindowToken",function(){return V});a.d(r,"clearIncomingCallWindowToken",function(){return K});a.d(r,"getIncomingCallWindowToken",function(){return z});a.d(r,"setIncomingCallWindowTeamId",function(){return Q});a.d(r,"clearIncomingCallWindowTeamId",function(){return Y});a.d(r,"getIncomingCallWindowTeamId",function(){return J});a.d(r,"setIncomingCallWindowTeamName",function(){return X});a.d(r,"clearIncomingCallWindowTeamName",function(){return Z});a.d(r,"getIncomingCallWindowTeamName",function(){return $});var n=a(3);var i=a.n(n);var s=a(46);var o=a(45);var l=a(1953);var c=a(533);var u=a(9);var d=a(17);var p=a(22);var m=a(33);var h=a(14);var v=a(63);var f=a(29);var b=a(219);var g="lastBootSonicValue";var _="sonicDowngradeTs";var y=432e5;var k=Object(d["b"])("Signal to the desktop that all delegates are ready",function(e,t){Object(o["didFinishLoading"])();S(t);j();T(t);E(t);w(t);I()});k.meta={name:"onWebappBooted",key:"desktopOnWebappBootedOnWebappBooted",description:"Signal to the desktop that all delegates are ready"};var O=k;function C(e){return Object(o["getAppLogFiles"])().then(function(t){var a=t&&t.length>0?t[0]:null;if(!a)return Promise.resolve();var r=a instanceof File?a:new File(a.buffer,a.name,a.options);var n=Object(f["d"])(e);var i=Object(u["getFromBootData"])(n,"api_token");if(!i)return Promise.resolve();return c["b"].fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:i,platform:"ssb",log_file:r},teamId:e})}).catch(function(t){Object(h["a"])({teamId:e}).error("Unable to upload app logs: "+t)})}function E(e){setTimeout(function(){var t=e();if(!Object(u["isFeatureEnabled"])(t,"feature_desktop_logs_upload"))return;var a="ssb";var r=Object(u["getFromBootData"])(t,"api_token");var n=Object(p["b"])(t);c["b"].fetch({method:"api.features",args:{token:r,platform:a},teamId:n}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&C(n)})},6e4)}function S(e){if(!Object(u["isFeatureEnabled"])(e(),"feature_desktop_force_production_channel"))return;Object(o["setPreference"])({name:"releaseChannel",value:"prod"})}function w(e){if(!Object(o["legacyCanAccessLocalPreferences"])())return;if(!Object(m["isSSBAndAtLeastVersion"])("4.0.0"))return;var t=Object(o["getLocalPreference"])("bootSonic");var a=localStorage.getItem(g);if(t===a)return;var r=e();var n=Object(v["c"])({state:r});var i="beta"===Object(o["getReleaseChannel"])();Object(h["b"])().info("Decision to boot Sonic changed since last session: '"+a+"' -> '"+t+"'");try{localStorage.setItem(g,t)}catch(e){Object(h["b"])().error("Unable to set '"+g+"'",e)}switch(t){case"once":n.count(i?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":n.count(i?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(_,Date.now())}catch(e){Object(h["b"])().error("Unable to set '"+_+"'",e)}!i&&Object(b["a"])(5)&&C(Object(p["b"])(r)).then(function(){n.count("sonic_rollout_downgrade_to_legacy_logs_available_3")});break;default:break}}function I(){if(!Object(o["legacyCanAccessLocalPreferences"])())return;if(!Object(m["isSSBAndAtLeastVersion"])("4.0.0"))return;var e=Object(o["getLocalPreference"])("bootSonic");if("once"===e)Object(o["setLocalPreference"])({name:"bootSonic",value:"always"});else if("never"===e){var t=localStorage.getItem(_);if(null===t)return;var a=Date.now()-t;a>y&&Object(o["setLocalPreference"])({name:"bootSonic",value:"once"})}}function j(){try{if(!Object(m["isWindows"])())return;if(!Object(m["isSSBAndAtLeastVersion"])("3.2"))return;if(Object(m["isSSBAndAtLeastVersion"])("3.3"))return;if(Object(o["getPreference"])("isOpenExternalShellForced"))return;Object(o["setPreference"])({name:"isOpenExternalShellForced",value:true})}catch(e){Object(h["b"])().error("Tried to set isOpenExternalShellForced, but failed",e)}}function T(e){try{if(!Object(u["isFeatureEnabled"])(e(),"feature_desktop_notifications_2018"))return;if(!Object(m["isSSBAndAtLeastVersion"])("3.3"))return;Object(o["setPreference"])({name:"notificationTimeout",value:6e3});Object(o["setPreference"])({name:"notificationAfterHoverTimeout",value:2e3});Object(o["setPreference"])({name:"notificationMaxItems",value:8});Object(o["setPreference"])({name:"notificationStyle",value:"2018"})}catch(e){Object(h["b"])().error("Tried to set notification style for 2018, but failed",e)}}var A=a(49);function N(){return Object(o["legacyHasDeviceStorage"])()}function M(e){Object(o["setItem"])("isCallWindowBusy",e)}var P=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("isCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function R(e){Object(o["setItem"])("callWindowToken",e)}function x(){Object(o["removeItem"])("callWindowToken")}var D=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("callWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function F(e){Object(o["setItem"])("callWindowTeamId",e)}function L(){Object(o["removeItem"])("callWindowTeamId")}var B=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("callWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function U(e){Object(o["setItem"])("callWindowTeamName",e)}function q(){Object(o["removeItem"])("callWindowTeamName")}var W=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("callWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function H(e){Object(o["setItem"])("isIncomingCallWindowBusy",e)}var G=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("isIncomingCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function V(e){Object(o["setItem"])("incomingCallWindowToken",e)}function K(){Object(o["removeItem"])("incomingCallWindowToken")}var z=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("incomingCallWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function Q(e){Object(o["setItem"])("incomingCallWindowTeamId",e)}function Y(){Object(o["removeItem"])("incomingCallWindowTeamId")}var J=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("incomingCallWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function X(e){Object(o["setItem"])("incomingCallWindowTeamName",e)}function Z(){Object(o["removeItem"])("incomingCallWindowTeamName")}var $=function(){var e=Object(A["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(A["resolve"])(Object(o["getItem"])("incomingCallWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();Object(s["a"])("interop.desktop",i()({},o,r,{getParsedNotificationWarnings:l["a"],onWebappBooted:O}))},4554:function(e,t,a){"use strict";a.r(t);var r=a(63);var n=a(46);var i=a(767);var s=a(48);var o=a.n(s);var l=a(2);var c=a(14);var u=a(45);var d=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];var p=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];var m=function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===t)return 0;if(a===r)return parseFloat(t.toFixed(n));var s=i?1024:1e3;var o=i?d:p;var l=o.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()});var c=o.findIndex(function(e){return e.toLowerCase()===r.toLowerCase()});if(-1===l)throw new Error("Unknown currentType '"+a+"' passed to convertToSize");if(-1===c)throw new Error("Unknown desiredType '"+r+"' passed to convertToSize");if(l<c)return parseFloat((t/Math.pow(s,c-l)).toFixed(n));return parseFloat((t*Math.pow(s,l-c)).toFixed(n))};var h=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B";var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(0===t)return{size:0,type:"B"};var i=n?1024:1e3;var s=n?d:p;var o=Math.log(t)/Math.log(i);o<1&&(o=-Math.floor(Math.log(Math.abs(o))/Math.log(10)+1));var l=s.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()});var c=Math.max(Math.min(l+Math.floor(o),s.length-1),0);if(-1===l)throw new Error("Unknown currentType '"+a+"' passed to convertToSize");return{size:m(t,a,s[c],r,n),type:s[c]}};var v=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(t,"B","KB",a,false)};var f=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(t,"B","MB",a,false)};var b=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(t,"B","GB",a,false)};var g=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(t,"KB","MB",a,false)};var _=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(t,"KB","GB",a,false)};var y=a(57);var k=a(33);var O=a(32);var C=Object(c["b"])();var E=function e(t){if(!Object(u["legacyCanRequestMetrics"])())return Promise.resolve(null);var a=Object(u["getMemoryUsage"])();var r=Object(u["getAppMetrics"])();var n=Object(u["getAppMemoryUsage"])()||Promise.resolve();return Promise.all([a,r,n]).then(function(e){var a=o()(e,3),r=a[0],i=a[1],s=a[2];var c={};if(navigator&&navigator.hardwareConcurrency){var d=Object(l["sumBy"])(i,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});c["cpu_v4_app_"+t+"_teams"]=d.toFixed(2)}if(Object(k["isElectronAndAtLeastVersion"])("4.0.0"))if(s){r&&(c.memory_v4_mb_full_client=Math.ceil(g(r.private)));var p=Object(l["sumBy"])(s,function(e){return e.memory.private});var m=Object(l["sumBy"])(s,function(e){return e.memory.shared});var h=p+m;var v=Math.ceil(g(p));var b=Math.ceil(g(h));c["memory_v4_app_mb_"+t+"_teams"]=b;c["memory_v4_app_private_mb_"+t+"_teams"]=v}else C.error("STATS","No memory stats collected getAppMemoryUsage:"+u["getAppMemoryUsage"]+" appMemoryMetricsUsage:"+n,{subtype:"stats_no_memory"});else{r&&(c.memory_v4_mb_full_client=Math.ceil(g(r.privateBytes)));var _=Object(l["sumBy"])(i,function(e){return e.memory.privateBytes});var y=Object(l["sumBy"])(i,function(e){return e.memory.workingSetSize});var O=Math.ceil(g(_));var E=Math.ceil(g(y));c["memory_v4_app_mb_"+t+"_teams"]=E;c["memory_v4_app_private_mb_"+t+"_teams"]=O}if(window.performance&&window.performance.memory){c["heap_v4_used_mb_"+t+"_teams"]=f(performance.memory.usedJSHeapSize);c["heap_v4_total_mb_"+t+"_teams"]=f(performance.memory.totalJSHeapSize)}return c}).catch(function(e){return C.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var S=function e(){if(!Object(u["legacyCanRequestMetrics"])())return Promise.resolve(null);var t=Object(u["getMemoryUsage"])();var a=Object(u["getAppMetrics"])();var r=Object(u["getAppMemoryUsage"])()||Promise.resolve();return Promise.all([t,a,r]).then(function(e){var t=o()(e,3),a=t[0],r=t[1],n=t[2];var i={};var s=r.filter(function(e){return"Tab"===e.type});var c=s.length-1;if(navigator&&navigator.hardwareConcurrency){var u=Object(l["sumBy"])(r,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});i["cpu_v3_app_"+c+"_teams"]=u.toFixed(2)}if(Object(k["isElectronAndAtLeastVersion"])("4.0.0")){if(n){a&&(i.memory_v3_team_mb_full_client=Math.ceil(g(a.private)));var d=Object(l["sumBy"])(n,function(e){return e.memory.private});var p=Object(l["sumBy"])(n,function(e){return e.memory.shared});var m=d+p;var h=Math.ceil(g(d));var v=Math.ceil(g(m));i["memory_v3_app_mb_"+c+"_teams"]=v;i["memory_v3_app_private_mb_"+c+"_teams"]=h}}else{a&&(i.memory_v3_team_mb_full_client=Math.ceil(g(a.privateBytes)));var f=Object(l["sumBy"])(r,function(e){return e.memory.privateBytes});var b=Object(l["sumBy"])(r,function(e){return e.memory.workingSetSize});var _=Math.ceil(g(f));var y=Math.ceil(g(b));i["memory_v3_app_mb_"+c+"_teams"]=y;i["memory_v3_app_private_mb_"+c+"_teams"]=_}return i}).catch(function(e){return C.warn("metrics: Invalid data returned by desktop.stats",e.message)})};function w(e){var t=e.state;if(!Object(u["legacyCanRequestMetrics"])()||!Object(u["legacyIsSelectedTeam"])()||Object(O["a"])())return null;return S().then(function(e){if(!e)return null;var a=t?Object(r["c"])({state:t}):Object(r["a"])();var n=Object.keys(e);n.forEach(function(t){return a.store(t,e[t])});return e})}Object(y["exportToGlobalDebugger"])("ssbMetrics",{fetchMemoryStatsV3:S,fetchMemoryStatsV4:E});var I=36e5;var j=6e5;var T=false;function A(e){var t=I+Math.floor(Math.random()*j);if(!e||T)return;T=true;setInterval(function(){w({state:TS.redux.getState()})},t)}Object(n["a"])("interop.getTelemeter",function(){return Object(r["c"])({state:TS.redux.getState()})});Object(n["a"])("interop.telemeter",{start:function e(){return i["a"].start()},sendDataAndEmptyQueue:function e(){return i["a"].sendDataAndEmptyQueue()},startMemoryStatsLogging:A})},4556:function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"hydrateStartData",function(){return _});a.d(r,"getStartData",function(){return y});var n=a(26);var i=a.n(n);var s=a(3);var o=a.n(s);var l=a(49);var c=a(2);var u=a(17);var d=a(0);var p=a(11);var m=a(37);var h=a.n(m);var v=a(30);var f=a(34);var b=Object(v["a"])("Fetch start data",function(e,t,a){var r=a.reason,n=h()(a,["reason"]);var i=o()({flannel_api_ver:4,only_self_subteams:1},n);return e(Object(f["b"])({method:"client.boot",args:i,reason:r}))});b.meta={name:"fetchStartData",key:"fetchersStartApiFetchStartData",description:"Fetch start data"};b.propTypes={reason:d["b"].string.isRequired,only_self_subteams:d["b"].oneOf([0,1])};var g=a(20);var _=Object(u["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(l["method"])(function(e,t,a){var r=a.startData;var n=o()({},r.rtm_start);var s=Object(c["get"])(r,"self",Object(c["get"])(n,"self"));var l=[].concat(i()(n.channels||[]),i()(n.ims||[]),i()(n.mpims||[]));var u=n.channels_latest;var d=[];var m=Object(c["get"])(n,"team.id");if(l&&u){var h=n.last_read,v=void 0===h?{}:h,f=n.channels_priority,b=void 0===f?{}:f,_=n.is_open,y=void 0===_?[]:_,k=n.starred,O=void 0===k?[]:k;var C=y.reduce(function(e,t){e[t]=true;return e},{});var E=O.reduce(function(e,t){e[t]=true;return e},{});var S=l.length;for(var w=0;w<S;w++){var I=l[w];var j=I.id;var T=Object(c["includes"])(g["TINYSPECK_TEAM_IDS"],m)?"0000000000.000000":u[j];var A=!!u[j];var N=Object(p["isIm"])(I)||Object(p["isMpim"])(I)||A;var M=v[j];var P=b[j];var R=!!E[j];var x=!!C[j];var D=Object(p["isIm"])(I)||Object(p["isMpim"])(I)?o()({},I,{is_member:N,latest:T,last_read:M,priority:P,is_starred:R,is_open:x}):o()({},I,{is_member:N,latest:T,last_read:M,priority:P,is_starred:R});d.push(D)}}delete n.users;delete n.updated_users;delete n.updated_bots;n.channels=d;n.bots=[];n.users=[s];return Promise.resolve(n)});return function(t,a,r){return e.apply(this,arguments)}}());_.meta={name:"hydrateStartData",key:"infraBootDataHydrateStartData",description:"Hydrate start data by fetching any required objects"};_.propTypes={startData:d["b"].object.isRequired};var y=Object(u["b"])("Fetch start data",function(){var e=Object(l["method"])(function(e,t,a){var r=a.reason,n=void 0===r?"legacy-fetch-start-data":r;return e(b({reason:n})).then(function(t){return e(_({startData:{rtm_start:t}}))})});return function(t,a,r){return e.apply(this,arguments)}}());y.meta={name:"getStartData",key:"infraBootDataGetStartData",description:"Fetch start data"};y.propTypes={};var k=a(46);Object(k["a"])("interop.boot",{data:r})},4558:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(128);var d=a(29);var p=a(299);var m=a(69);var h=a(63);var v=a(161);var f=function e(t,a,r,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=Object(d["f"])(t);var l=Object(h["c"])({state:o.getState()});var f=function e(){return a};var b="react_menu_render";l.mark(b+"_mark");Object(u["a"])(s.a.createElement(c["Provider"],{store:o},s.a.createElement(v["a"],null,s.a.createElement(p["a"],n()({},i,{parentSelector:f,shouldFade:false}),s.a.createElement(m["a"],r)))),a,function(){return l.measureAndClear(b+"_mark",b)})};var b=l.a.unmountComponentAtNode;var g={mountMenu:f,unmountMenu:b};var _=a(46);Object(_["a"])("interop.mountMenu",f);Object(_["a"])("interop.unmountMenu",b)},4559:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1);var i=a.n(n);var s=a(12);var o=a(128);var l=a(29);var c=a(2045);var u=a(299);var d=a(161);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(o["a"])(i.a.createElement(s["Provider"],{store:Object(l["f"])(e)},i.a.createElement(d["a"],null,i.a.createElement(u["a"],r,r.isOpen?i.a.createElement(c["a"],a):i.a.createElement("span",null)))),t)}var m=p;var h=a(20);Object(r["a"])("interop.mountMessageActionsMenu",m);Object(r["a"])("interop.mountMessageActionsMenu.actionIds",h["SLACK_ACTION_IDS"])},4560:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(4532);var d=a(161);var p=function e(t,a){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h=a(46);Object(h["a"])("interop.mountMessagePaneBanner",p);Object(h["a"])("interop.unmountMessagePaneBanner",m)},4561:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(2077);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=a(46);Object(m["a"])("interop.mountMessagePaneDragOverlay",d);Object(m["a"])("interop.unmountMessagePaneDragOverlay",p)},4562:function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var s=a(1374);var o=a(261);var l=a(513);var c=a(46);Object(c["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:s["a"],search:o["e"],recordFrecencyEvent:l["c"]})},4563:function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a(25);var i=a(431);var s=a(602);var o=a(1272);var l=a(1441);var c=a(499);var u=a(22);var d=a(38);var p=a(343);var m=a(1901);var h=a(251);var v=a(16);var f=a(1977);var b=a(1978);var g=a(194);var _=a(229);var y=a(516);function k(e,t){var a=Object(y["e"])(e);var r=Object(y["e"])(t);return Object(_["a"])(a,r)}var O=a(46);function C(e){var t=TS.redux.getState();return Object(n["e"])(t,e)}function E(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["e"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function S(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["j"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function w(e){return Object(r["isString"])(e)?E(e):e}function I(e){return Object(s["b"])(TS.redux.getState(),e)}function j(e){return TS.redux.dispatch(Object(h["b"])(e))}function T(e){return TS.redux.dispatch(Object(h["e"])(e))}function A(e){return TS.redux.dispatch(Object(h["d"])(e))}function N(e){return TS.redux.dispatch(Object(l["a"])(e))}function M(e){return TS.redux.dispatch(Object(o["a"])(e))}function P(e){return TS.redux.dispatch(Object(i["c"])(e))}function R(e){return TS.redux.dispatch(Object(i["d"])(e))}function x(e){var t=TS.redux.getState();var a=Object(u["b"])(t);Object(c["b"])(a,e)}function D(e){var t=TS.redux.getState();var a=Object(u["b"])(t);return Object(c["a"])(a,e)}function F(){return g["b"].pauseRefetch()}function L(e,t){return TS.redux.dispatch(Object(f["a"])({teamId:e,fields:t}))}function B(e,t){return TS.redux.dispatch(Object(b["a"])({teamId:e,fieldsToDelete:t}))}Object(O["a"])("interop.members",{getMemberById:E,getPotentiallyUnknownMemberById:C,getRawMemberById:S,dangerouslyAddMember:P,dangerouslyBulkAddMembers:R,membersSelectorsTest:n["q"],shouldDisplayRealNames:function e(){return Object(d["i"])(TS.redux.getState())},getCurrentMember:function e(){return Object(n["b"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["a"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["f"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByEmail:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["d"].apply(void 0,[TS.redux.getState()].concat(a))},memberExistsWithName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["p"].apply(void 0,[TS.redux.getState()].concat(a))},hasMemberWithId:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["k"].apply(void 0,[TS.redux.getState()].concat(a))},getAllMembers:function e(){return Object(n["a"])(TS.redux.getState())},isAppmin:function e(){return Object(n["l"])(TS.redux.getState())},isExternal:v["isExternal"],isExternalById:function e(t){return Object(v["isExternalById"])(TS.redux.getState(),t)},isMember:v["isMember"],isMemberOnTeam:v["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,a){return TS.redux.dispatch(Object(h["f"])({userId:t,keys:a}))},memberSorterByName:k,getMemberCurrentStatus:n["g"],getMemberMentionName:v["getMemberMentionName"],getMemberMentionRegExp:v["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(v["getMemberRealName"])(w(t))},getMemberRealNameLowerCase:function e(t){return Object(v["getMemberRealNameLowerCase"])(w(t))},getMemberProfileFieldDisplayName:function e(t){return Object(v["getMemberProfileFieldDisplayName"])(w(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(v["getMemberProfileFieldDisplayNameLowerCase"])(w(t))},getMemberSecondaryName:function e(t){return Object(v["getMemberSecondaryName"])(TS.redux.getState(),w(t))},ensureMembersArePresent:function e(t){return TS.redux.dispatch(Object(m["a"])({memberIds:t}))},processMemberForUpserting:I,fetchAndUpsertMembersById:j,fetchAndUpsertMembersWithQuery:T,fetchAndUpsertMembersFromFlannel:A,markObjectsAsFresh:x,isObjectFresh:D,pauseRefetch:F,updateCurrentMemberPresence:M,updateCurrentMemberProfile:N,updateProfileFields:L,deleteProfileFields:B,canMemberJoinChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["canMemberJoinChannel"].apply(void 0,[TS.redux.getState()].concat(a))},canMemberBeInvitedToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["canMemberBeInvitedToChannel"].apply(void 0,[TS.redux.getState()].concat(a))}})},4564:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(2);var i=a(14);var s=a(63);var o="CDN-DOWNLOAD-TEST";var l="https://a.slack-edge.com/bv1-4/cdn-download-test.838a524ba45462f63be8.min.js";var c="[1][3262]";function u(){var e=Object(i["b"])({label:o});e.info("Running test");var t=Object(s["a"])();var a=(Date.now()*Math.random()).toString(36);var r=l+"?_x="+a;var u=function a(){var i=Object(n["snakeCase"])(o+" success");t.count(i);e.info(r+" SUCCESS")};var d=function a(){var i=Object(n["snakeCase"])(o+" failure");t.count(i);e.info(r+" FAILED");e.error(i,"CDN download test failed: "+r)};var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",r);p.onload=function(){try{Object(n["get"])(Object(n["find"])(window.webpackJsonp,c),c)()}catch(e){return}window.cdnDownloadTestWorked?u(r):d(r)};p.onerror=function(){d(r)};document.body.appendChild(p)}Object(r["a"])("interop.runCdnDownloadTest",u)},4565:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(2);var i=a(1261);var s=a(17);var o=a(9);var l=a(38);var c=a(129);var u=a(63);var d=a(14);var p=["wss-primary","wss-backup","wss-mobile"];var m="_CONNECTION_TEST_TOKEN_";var h="failover_proxy_check";var v=4;var f=1e4;var b=3e3;var g=JSON.stringify({ok:true});function _(e){return new Promise(function(t,a){var r=void 0;var i=setTimeout(function(){a(new Error("Socket open timed out"))},f);var s=new WebSocket("wss://"+e+".slack.com/?flannel=1&token="+m);s.onopen=function(){clearTimeout(i);r=setTimeout(function(){a(new Error("Message response timed out"));s.close()},b);s.send(g)};s.onmessage=function(e){clearTimeout(r);try{var i=JSON.parse(e.data);if(!i.ok)throw new Error("Message response is not ok");t();s.onclose=n["noop"];s.close()}catch(e){a(e)}};s.onclose=function(){a(new Error("Socket closed unexpectedly"))}})}function y(){var e={};return Promise.each(p,function(t,a){var r=1e3*Object(i["b"])({attempts:a});return Promise.delay(r).then(function(){return _(t)}).catch(function(a){e[t]=a.message})}).then(function(){return e})}var k=Object(s["b"])("Tests if Flannel socket can be opened and send/receive a message",function(e,t){var a=t();var r=Object(u["c"])({state:a});if(!Object(o["isFeatureEnabled"])(a,"feature_failover_proxy_check")||Object(l["h"])(a,"failover_proxy_check_completed")===v)return;y().then(function(a){if(Object.keys(a).length){r.count(h+"_failed_"+v);var n=new Error(JSON.stringify(Object.keys(a)));var i=JSON.stringify(a);var s=h;Object(d["a"])({getState:t}).error(n,i,{subtype:s})}else r.count(h+"_passed_"+v);e(Object(c["d"])({pref:"failover_proxy_check_completed",value:v}))})});k.meta={name:"failoverProxyCheck",key:"infraFailoverProxyCheckFailoverProxyCheck",description:"Tests if Flannel socket can be opened and send/receive a message"};Object(r["a"])("interop.failoverProxyCheck",function(){return TS.redux.dispatch(k())})},4567:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(17);var i=a(487);var s=a(9);var o=a(38);var l=a(129);var c=a(63);var u=a(14);var d="https://app.slack.com/api/api.test";var p="app_subdomain_check";var m="app_subdomain_check_completed";var h=12;var v=Object(n["b"])("Tests whether `app.slack.com` is a blocked subdomain",function(e,t){var a=t();var r=Object(c["c"])({state:a});var n=Object(u["a"])({getState:t});if(!Object(s["isFeatureEnabled"])(a,"feature_app_subdomain_check")||Object(o["h"])(a,m)===h)return;i["b"].fetch({url:d+"?_x_"+p+"="+h}).then(function(){r.count(p+"_passed_"+h)}).catch(function(e){r.count(p+"_failed_"+h);var t="Check for `app.slack.com` failed";var a=p;n.error(e,t,{subtype:a})}).finally(function(){e(Object(l["d"])({pref:m,value:h}))})});v.meta={name:"appSubdomainCheck",key:"infraAppSubdomainCheckAppSubdomainCheck",description:"Tests whether `app.slack.com` is a blocked subdomain"};Object(r["a"])("interop.appSubdomainCheck",function(){return TS.redux.dispatch(v())})},4568:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(14);var i=Object(n["b"])();function s(){i.info("Greetings Earth!")}function o(){i.info("\ud83d\udc7d")}Object(r["a"])("interop.greetingsEarth",{greet:s,takeMeToYourLeader:o})},4569:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1074);var d=a(161);var p=function e(t,a){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountModalContainer:p,unmountModalContainer:m};var v=a(46);Object(v["a"])("interop.modalContainer",{mountModalContainer:p,unmountModalContainer:m})},4570:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1475);var d=a(63);var p=a(161);var m=function e(t,a,r){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i=Object(c["f"])(t);var s=Object(d["c"])({state:i.getState()});var m="react_custom_status_input_render";s.mark(m+"_mark");Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(u["c"],r))),a,function(){return s.measureAndClear(m+"_mark",m)})};var h=s.a.unmountComponentAtNode;var v=a(46);Object(v["a"])("interop.mountCustomStatusInput",m);Object(v["a"])("interop.unmountCustomStatusInput",h)},4571:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(85);var c=a.n(l);var u=a(161);var d=a(299);var p=a(128);var m=a(29);var h=a(2048);var v=function e(t,a,r,i){if(!t)throw new Error("unmountNewFileMenu must be called with a teamId parameter");var l=Object(m["f"])(t);var c=n()({onMenuItemSelected:r.onMenuItemSelected},i);Object(p["a"])(s.a.createElement(o["Provider"],{store:l},s.a.createElement(u["a"],null,s.a.createElement(d["a"],n()({shouldFade:false},i),s.a.createElement(h["a"],n()({menuProps:c},r))))),a)};var f=function e(t){c.a.unmountComponentAtNode(t)};var b={mountNewFileMenu:v,unmountNewFileMenu:f};var g=a(46);Object(g["a"])("interop.mountNewFileMenu",v)},4572:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(2076);var c=a(161);var u=function e(t,a,r){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var u=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:u},n.a.createElement(c["a"],null,n.a.createElement(l["a"],r))),a)};var d={mountNotificationBar:u};var p=a(46);Object(p["a"])("interop.mountNotificationBar",u)},4575:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(128);var d=a(29);var p=a(2047);var m=a(161);var h=function e(t,a,r){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["f"])(t);var o=n()({},r,{onClose:function e(){return l.a.unmountComponentAtNode(a)}});Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(m["a"],null,s.a.createElement(p["b"],o))),a)};var v=function e(t){l.a.unmountComponentAtNode(t)};var f={mountWorkspaceDirectory:h,unmountWorkspaceDirectory:v};var b=a(46);Object(b["a"])("interop.mountWorkspaceDirectory",h);Object(b["a"])("interop.unmountWorkspaceDirectory",v)},4576:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(2);var i=a.n(n);var s=a(9);var o=a(754);var l=a(39);var c=a(426);var u=0;var d=6e4;var p=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var a=function t(){return v(e)};var r=setInterval(a,d);var n=i.a.throttle(function(){document.hasFocus&&document.hasFocus()&&Object(c["e"])(Object(c["c"])(e()))},5e3,{leading:true,trailing:true});p.forEach(function(e){window.addEventListener(e,n,t)});var o=function e(){p.forEach(function(e){window.removeEventListener(e,n,t)});clearInterval(r)};return o}function h(e){return{uid:e.id,timestamp_start:Object(o["a"])(e.startTime),timestamp_refresh:Object(o["a"])(e.lastActivity),version:u}}function v(e){var t=e();var a=Object(c["a"])(Object(c["c"])(t));var r=Object(l["a"])({state:t});i.a.each(a,function(e){null===e.lastLogged?r.track("SESSION_START",{client_session:h(e)}):e.isActive&&e.needsRefresh&&r.track("SESSION_REFRESH",{client_session:h(e)});e.isActive||r.track("SESSION_END",{client_session:h(e)})})}Object(r["a"])("interop.activity_session",{listenForUserEvents:function e(){return m(TS.redux.getState)},recordUserActivity:c["e"]})},4577:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(1821);var c=a(161);function u(e,t,a){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var r=Object(o["f"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(c["a"],null,n.a.createElement(l["a"],a))),t)}var d=a(46);Object(d["a"])("interop.mountPricingCalculator",u)},4578:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1465);var d=a(161);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],a))),t)}function m(e){s.a.unmountComponentAtNode(e)}var h=a(46);Object(h["a"])("interop.mountFileUploadBanner",p);Object(h["a"])("interop.unmountFileUploadBanner",m)},4579:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(2);var h=a(31);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(13);var y=a.n(_);var k=a(145);var O=a(91);var C=a(123);var E=a(52);var S=a(1996);var w=a(17);var I=a(9);var j=a(22);var T=a(242);var A=a(1286);var N=a(922);var M=a(6);var P=a(234);var R=a(2420);var x=new M["b"]("snippet-dialog");var D="text/plain";var F=Object(w["b"])("Upload a Snippet, maybe share it too",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.broadcast,n=a.fileName,i=a.fileType,s=a.fileContent,o=a.channelOrMemberId,l=a.threadTs,c=a.introMessage,u=a.blocks;var d=t();var p=Object(I["isFeatureEnabled"])(d,"feature_sonic_snippets");var m=n||(p?x.t("Untitled"):"");var h=R["a"][i];var v=h&&h.mimeType||D;var f=new Blob([s],{type:v});f.name=m;f.snippetType=i;var b=Object(j["b"])(d);var g=Object(N["a"])(b);if(o)return e(Object(A["a"])({channelOrMemberId:o})).then(function(t){return g.uploadFiles({files:[f],shareData:{channelId:t,threadTs:t?l:void 0,clientMsgId:t?Object(P["a"])():void 0,introMessage:c,blocks:u,broadcast:!(!t||!l)&&r}}).then(function(){return e(Object(T["a"])({id:t}))})});return g.uploadFiles({files:[f]})});F.meta={name:"uploadSnippet",key:"actionsUploadSnippetUploadSnippet",description:"Upload a Snippet, maybe share it too"};F.propTypes={fileName:b["b"].string,fileType:b["b"].string,fileContent:b["b"].string.isRequired,channelOrMemberId:b["b"].string,threadTs:b["b"].string,introMessage:b["b"].string,blocks:b["b"].array,broadcast:b["b"].bool};var L=F;var B=a(1442);var U=a(20);var q=a(210);var W=a(498);var H=a(131);var G=a(254);var V=a(41);var K=a(1420);var z=a(1422);var Q=a(1211);var Y=a(1456);var J=a(1680);var X=a(1681);var Z=a(1911);a.d(t,"BaseSnippetDialog",function(){return ae});var $=new M["b"]("snippet-dialog");var ee={initialName:b["b"].string,initialType:b["b"].string,initialSnippetText:b["b"].string,initialChannelId:b["b"].string,initialShareWith:b["b"].bool,threadTs:b["b"].string,viewContext:b["b"].string,resetSnippetText:b["b"].string,initialContents:b["b"].object,resetChannelId:b["b"].string,uploadSnippet:b["b"].func.isRequired,closeModal:b["b"].func.isRequired,openModal:b["b"].func.isRequired,featureSonicSnippets:b["b"].bool,msgText:b["b"].string,setMsgText:b["b"].func.isRequired,selectedChannelId:b["b"].string,setSelectedChannel:b["b"].func.isRequired,disallowedKeywordInMsgText:b["b"].string,channelType:b["b"].oneOf(["mpim","im","channel","private"]),selectedChannelName:b["b"].node.isRequired,canPostInSelectedChannel:b["b"].bool.isRequired,canThread:b["b"].bool.isRequired,msgOps:b["b"].array,setMsgOps:b["b"].func.isRequired,converMsgOpsToRichTextMessage:b["b"].func.isRequired,featureWysiwygComposer:b["b"].bool};var te={initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,initialContents:void 0,resetChannelId:void 0,featureSonicSnippets:false,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0,featureWysiwygComposer:false};var ae=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["a"])(a,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]);a.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(m["isBoolean"])(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:false,broadcast:false};return a}l()(t,[{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,r=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.fileName,c=s.fileContent,u=s.shareWith;var d=l.length>U["MAX_FILENAME_LENGTH"];return u&&!r&&!n||u&&n&&!i||!!a||!c||o||d}},{key:"shouldShowSpeedBump",value:function e(t){if("cancel"===t||"close"===t){var a=this.state.fileContent;var r=this.props,n=r.resetSnippetText,i=r.initialSnippetText,s=r.featureWysiwygComposer;if(s)return a!==i;return a!==n}return false}},{key:"handleBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"handleFileNameChange",value:function e(t){this.setState(function(){return{fileName:t}})}},{key:"handleFileTypeChange",value:function e(t){this.setState(function(){return{fileType:t}})}},{key:"handleFileContentChange",value:function e(t){this.setState(function(){return{fileContent:t}})}},{key:"handleShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"handleMsgTextChange",value:function e(t){var a=t.text,r=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(r):this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"handleSubmit",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.msgText,n=t.msgOps,i=t.threadTs,s=t.featureWysiwygComposer;var o=this.state,l=o.broadcast,c=o.fileName,u=o.fileType,d=o.fileContent,p=o.shareWith;var m=void 0;s&&(m=this.props.converMsgOpsToRichTextMessage({msgOps:n,channelId:a,inThread:!!i}));this.props.uploadSnippet({fileName:Object(G["c"])({locale:Object(W["a"])(),text:c}),fileType:u,fileContent:d,channelOrMemberId:p?a:void 0,threadTs:p?i:void 0,introMessage:r,blocks:s?m:void 0,broadcast:l}).catch(this.handleSubmitError);this.props.closeModal()}},{key:"handleSubmitError",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.threadTs,n=t.msgText,i=t.initialContents,s=t.resetSnippetText,o=t.resetChannelId,l=t.viewContext;var c=this.state,u=c.fileName,d=c.fileType,p=c.fileContent,m=c.shareWith;this.props.openModal({element:f.a.createElement(se,{initialName:u,initialType:d,initialSnippetText:p,initialChannelId:a,initialShareWith:m,initialContents:i,initialText:n,threadTs:r,resetSnippetText:s,resetChannelId:o,viewContext:l})})}},{key:"handleCancel",value:function e(){var t=this.props,a=t.resetSnippetText,r=t.initialContents,n=t.resetChannelId,i=t.threadTs,s=t.viewContext,o=t.featureWysiwygComposer;var l=Object(q["a"])({channelId:n,threadTs:i,viewContext:s});if(!l)return;if(o){if(!r||!l.setContents||!l.focus)return;l.setContents(r);l.focus()}else if(a){if(!l.setText)return;l.setText(a)}}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var s=this.state.broadcast;if(!a||!r)return null;return f.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},f.a.createElement(X["a"],{channelType:n,selectedChannelName:i,value:s,onChange:this.handleBroadcastChange}))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var a=$.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});var r="create-snippet-share-with-checkbox";return f.a.createElement(E["a"],{text:a,htmlFor:r,type:"inline"},f.a.createElement(C["a"],{id:r,"data-qa":"share_with",checked:t,onChange:this.handleShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.setSelectedChannel;var n=this.state.shareWith;return f.a.createElement(z["a"],{onChange:r,initialChannelId:a,isDisabled:!n,optionsListOffsetBottom:window.innerHeight})}},{key:"renderShareWithPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.featureSonicSnippets,n=t.threadTs;if(n)return f.a.createElement(J["a"],{label:r?$.t("Sharing snippet in a thread"):"",channelId:a,threadTs:n});return f.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(Y["a"])(n()({},this.props));if(!a)return null;return f.a.createElement("div",{className:"p-share_dialog__section"},f.a.createElement(k["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},a))}},{key:"renderMessageInput",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.msgText;var n=this.state.shareWith;var i=$.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"});var s=y()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!n});var o=Object(H["a"])(a)?a:void 0;return f.a.createElement("div",{className:s},f.a.createElement(K["a"],{text:r,channelId:o,onTextChange:this.handleMsgTextChange,enabled:n,placeholder:i,ariaLabel:i,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}},{key:"render",value:function e(){var t=this.state,a=t.fileName,r=t.fileType,n=t.fileContent;var i=this.props.featureSonicSnippets;if(!i)return null;var s="p-snippet_dialog";var o=$.t("Create snippet");var l=$.t("Create Snippet");return f.a.createElement(O["a"],{className:s,title:o,goButtonText:l,useSlackScrollbarWithPadding:true,shouldCloseOnGo:false,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpTitleText:$.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:$.t("No, keep it"),speedBumpContinueButtonText:$.t("Yes, discard this snippet"),showCancelButton:false},f.a.createElement(S["a"],{fileName:a,onFileNameChange:this.handleFileNameChange,fileType:r,onFileTypeChange:this.handleFileTypeChange,fileContent:n,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(v["PureComponent"]);ae.displayName="SnippetDialog";ae.defaultProps=te;function re(e,t){return n()({},Object(Q["b"])(e,t),{featureSonicSnippets:Object(I["isFeatureEnabled"])(e,"feature_sonic_snippets")})}function ne(e){return{uploadSnippet:function t(){return e(L.apply(void 0,arguments))},closeModal:function t(){return e(V["closeModal"].apply(void 0,arguments))},openModal:function t(){return e(V["openModal"].apply(void 0,arguments))},converMsgOpsToRichTextMessage:function t(){return e(B["a"].apply(void 0,arguments))}}}var ie=Object(g["connect"])(re,ne)(ae);var se=Object(Q["a"])(ie);var oe=t["default"]=se},4580:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(128);var p=a(29);var m=a(4762);var h=a(161);var v=function e(t,a){var r=document.getElementById("channel_create_modal_mount_point");if(!r)throw new Error("Could not find a valid channel create modal mount point.");if(!t)throw new Error("mountChannelCreateModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountChannelCreateModal:v};var b=a(46);Object(b["a"])("interop.mountChannelCreateModal",v)},4581:function(e,t,a){"use strict";a.r(t);var r=a(37);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(128);var d=a(29);var p=a(1034);var m=function e(t,a,r){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["f"])(t);var o=r.safeHtml,l=n()(r,["safeHtml"]);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["b"],l,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),a)};var h=function e(t){l.a.unmountComponentAtNode(t)};var v={mountScrollbar:m,unmountScrollbar:h};var f=a(46);Object(f["a"])("interop.mountScrollbar",m);Object(f["a"])("interop.unmountScrollbar",h)},4582:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1683);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=a(46);Object(m["a"])("interop.mountThreadDragOverlay",d);Object(m["a"])("interop.unmountThreadDragOverlay",p)},4583:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(128);var c=a(29);var u=a(1822);var d=a(161);var p=function e(t,a,r){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h={mountTermsOfService:p,unmountTermsOfService:m};var v=a(46);Object(v["a"])("interop.mountTermsOfService",p);Object(v["a"])("interop.unmountTermsOfService",m)},4584:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(6);var i=new n["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isCurrent,r=e.hasNotifications,n=e.isStarred,s=e.isMuted,o=e.hasDraft;var l=function(){if(a&&r&&s&&n&&o)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!a&&r&&s&&n&&o)return i.t("has notifications, muted, starred, has a draft message");if(a&&!r&&s&&n&&o)return i.t("current conversation, muted, starred, has a draft message");if(!a&&!r&&s&&n&&o)return i.t("muted, starred, has a draft message");if(a&&r&&!s&&n&&o)return i.t("current conversation, has notifications, starred, has a draft message");if(!a&&r&&!s&&n&&o)return i.t("has notifications, starred, has a draft message");if(a&&!r&&!s&&n&&o)return i.t("current conversation, starred, has a draft message");if(!a&&!r&&!s&&n&&o)return i.t("starred, has a draft message");if(a&&r&&s&&!n&&o)return i.t("current conversation, has notifications, muted, has a draft message");if(!a&&r&&s&&!n&&o)return i.t("has notifications, muted, has a draft message");if(a&&!r&&s&&!n&&o)return i.t("current conversation, muted, has a draft message");if(!a&&!r&&s&&!n&&o)return i.t("muted, has a draft message");if(a&&r&&!s&&!n&&o)return i.t("current conversation, has notifications, has a draft message");if(!a&&r&&!s&&!n&&o)return i.t("has notifications, has a draft message");if(a&&!r&&!s&&!n&&o)return i.t("current conversation, has a draft message");if(!a&&!r&&!s&&!n&&o)return i.t("has a draft message");if(a&&r&&s&&n&&!o)return i.t("current conversation, has notifications, muted, starred");if(!a&&r&&s&&n&&!o)return i.t("has notifications, muted, starred");if(a&&!r&&s&&n&&!o)return i.t("current conversation, muted, starred");if(!a&&!r&&s&&n&&!o)return i.t("muted, starred");if(a&&r&&!s&&n&&!o)return i.t("current conversation, has notifications, starred");if(!a&&r&&!s&&n&&!o)return i.t("has notifications, starred");if(a&&!r&&!s&&n&&!o)return i.t("current conversation, starred");if(!a&&!r&&!s&&n&&!o)return i.t("starred");if(a&&r&&s&&!n&&!o)return i.t("current conversation, has notifications, muted");if(!a&&r&&s&&!n&&!o)return i.t("has notifications, muted");if(a&&!r&&s&&!n&&!o)return i.t("current conversation, muted");if(!a&&!r&&s&&!n&&!o)return i.t("muted");if(a&&r&&!s&&!n&&!o)return i.t("current conversation, has notifications");if(!a&&r&&!s&&!n&&!o)return i.t("has notifications");if(a&&!r&&!s&&!n&&!o)return i.t("current conversation");return""}();if(t&&l)return i.t("{name} ({context})",{name:t,context:l});if(t)return t;return""}var o=a(2028);var l=a(1679);var c=a(45);var u=a(1073);Object(r["a"])("interop.a11y",{makeAriaLabelForMPIM:s,makeAriaLabelForChannel:o["a"],makeAriaLabelForMember:l["a"],isScreenReaderEnabled:c["isScreenReaderEnabled"],focusableSectionManager:u["b"]})},4585:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(1056);var d=a(429);var p=function e(t,a,r,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(c["f"])(t);r?Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["b"],{id:r,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),a):Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountTooltipTip:p,unmountTooltipTip:m};var v=a(46);Object(v["a"])("interop.mountTooltipTip",p);Object(v["a"])("interop.unmountTooltipTip",m)},4587:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(128);var c=a(29);var u=a(1835);var d=a(161);var p=function e(t,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["f"],null))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h=a(46);Object(h["a"])("interop.mountUserGroupsFlexpane",p);Object(h["a"])("interop.unmountUserGroupsFlexpane",m)},4588:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(128);var c=a(29);var u=a(2057);var d=a(161);var p=function e(t,a,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h=a(46);Object(h["a"])("interop.mountUserGroupsList",p);Object(h["a"])("interop.unmountUserGroupsList",m)},4589:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(128);var p=a(29);var m=a(1690);var h=a(161);var v=function e(t,a){var r=document.getElementById("help_modal_mount_point");if(!r)throw new Error("Could not find a valid help modal mount point.");if(!t)throw new Error("mountHelpModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountHelpModal:v};var b=a(46);Object(b["a"])("interop.mountHelpModal",v)},4590:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(2055);var d=a(161);var p=function e(t,a,r){var i=r.image,s=r.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var p=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:p},n.a.createElement(d["a"],null,n.a.createElement(u["a"],{image:i,onDidZoomLevelChange:s}))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h=a(46);Object(h["a"])("interop.mountImageViewer",p);Object(h["a"])("interop.unmountImageViewer",m)},4591:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(360);var i=a(388);var s=a(2);var o=a(1385);var l=/[,\uff0c\u3001]/;function c(e){if(!Object(s["isString"])(e))return"";return Object(o["a"])(e).split(l).map(s["trim"]).filter(s["identity"]).join(",")}var u=a(129);var d=a(38);var p=a(386);var m=a(343);var h=a(1954);var v=a(326);var f=a(1293);var b=a(61);var g=a(1204);var _=a(1321);var y=a(1399);var k=a(4752);var O=a(1262);function C(){return TS.redux.dispatch(p["b"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(p["c"].apply(void 0,arguments))}function S(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}function w(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["d"].apply(void 0,[TS.redux.getState()].concat(t))}function I(){return Object(v["a"])(TS.redux.getState())}function j(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["c"].apply(void 0,[TS.redux.getState()].concat(t))}function T(){return TS.redux.dispatch(f["b"].apply(void 0,arguments))}function A(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return b["a"].apply(void 0,[TS.redux.getState()].concat(t))}function N(){return TS.redux.dispatch(g["b"].apply(void 0,arguments))}function M(){return TS.redux.dispatch(_["c"].apply(void 0,arguments))}function P(){return TS.redux.dispatch(y["c"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(y["d"].apply(void 0,arguments))}function x(){return TS.redux.dispatch(y["f"].apply(void 0,arguments))}function D(){return TS.redux.dispatch(y["e"].apply(void 0,arguments))}function F(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return d["h"].apply(void 0,[TS.redux.getState()].concat(t))}function L(e){return Object(O["f"])(TS.redux.getState(),e)}function B(){var e=Object(i["getEnterpriseSharedChannelsPref"])(TS.redux.getState()),t=e.users,a=e.userGroups;(t&&t.length||a&&a.length)&&TS.redux.dispatch(Object(k["a"])({query:"",userIds:t,userGroupIds:a}))}Object(r["a"])("interop.prefs",{setUserPref:C,setUserPrefs:E,setMultipleUserPrefs:S,getNotificationsGlobalPref:w,getAllNotificationOverrides:I,getNotificationsChannelPref:j,setChannelNotificationOverrideAndCallApi:T,getTeamPref:A,setTeamPrefs:M,setTeamPref:N,setEnterprisePrefs:P,setOrgDefaultChannels:R,setOrgWideChannels:x,setOrgMembersCount:D,getOrgPref:L,getHighlightWords:function e(){var t=TS.redux.getState();return Object(m["a"])(t)},getUserGroupHighlightById:n["e"],cleanHighlightWords:c,setUserPrefByApi:u["d"],getUserPref:F,getReadStateTrackingPref:function e(){return Object(h["a"])(TS.redux.getState())},prefetchMembersAndUserGroups:B})},4592:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(3);var i=a.n(n);var s=a(1);var o=a.n(s);var l=a(85);var c=a.n(l);var u=a(12);var d=a(2);var p=a(128);var m=a(29);var h=a(2060);var v=a(161);var f=function e(t,a){var r=document.getElementById("pricing_plans_modal_mount_point");if(!r)throw new Error("Could not find a valid pricing plans modal mount point.");if(!t)throw new Error("mountPricingPlansModal must be called with a valid teamId parameter.");var n=Object(m["f"])(t);var s=function e(){Object(d["defer"])(function(){c.a.unmountComponentAtNode(r)})};Object(p["a"])(o.a.createElement(u["Provider"],{store:n},o.a.createElement(v["a"],null,o.a.createElement(h["a"],i()({},a,{onClose:s})))),r)};var b={mountPricingPlansModal:f};Object(r["a"])("interop.mountPricingPlansModal",f)},4593:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(128);var p=a(29);var m=a(1922);var h=a(161);var v=function e(t,a){var r=document.getElementById("invite_modal_mount_point");if(!r)throw new Error("Could not find a valid invite modal mount point.");if(!t)throw new Error("mountInviteModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountInviteModal:v};var b=a(46);Object(b["a"])("interop.mountInviteModal",v)},4595:function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(299);var d=a(1923);var p=a(63);var m=a(161);var h=function e(t,a,r,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var h=Object(c["f"])(t);var v=Object(p["c"])({state:h.getState()});var f="react_emoji_menu_render";v.mark(f+"_mark");Object(l["a"])(s.a.createElement(o["Provider"],{store:h},s.a.createElement(m["a"],null,s.a.createElement(u["a"],n()({shouldFade:false},i),s.a.createElement(d["a"],r)))),a,function(){return v.measureAndClear(f+"_mark",f)})};var v=h;var f=a(46);Object(f["a"])("interop.mountEmojiPicker",v)},4596:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(1178);var c=function e(t,a,r){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(l["a"],r)),a)};var u=c;var d=a(46);Object(d["a"])("interop.mountLazyFilterSelect",u)},4597:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(1174);var i=a(885);var s=a(888);var o=a(2);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.prefix,r=e.suffix;if(!t)return t;var n=t;if(a&&!Object(o["startsWith"])(n,a)){var i=n.search(/\S/);n=i>0?n.slice(0,i)+a+n.slice(i):a+n}if(r&&!Object(o["endsWith"])(n,r)){var s=n.search(/\s+$/);s>0?n=n.slice(0,s)+r+n.slice(s):n+=r}return n};var c=a(1385);var u=a(344);Object(r["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],locateHighlightWords:s["a"],surroundTextWith:l,replaceUnicodeDoppelgangers:c["a"],cleanMessageTextWithState:u["b"]})},4705:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(213);var i=a(1703);var s=a(22);var o=a(580);var l=a(3);var c=a.n(l);var u=a(1);var d=a.n(u);var p=a(12);var m=a(128);var h=a(29);var v=a(2056);var f=a(299);var b=a(0);var g=a(39);var _=a(550);var y=d.a.createContext(new _["a"]);var k={children:b["b"].node.isRequired,clogger:b["b"].object.isRequired};function O(e){var t=e.children,a=e.clogger;return d.a.createElement(y.Provider,{value:a},t)}O.displayName="CloggerContextProvider";function C(e){return{clogger:Object(g["a"])({state:e})}}var E=Object(p["connect"])(C)(O);var S=a(14);var w=a(1960);var I={children:b["b"].node.isRequired,logger:b["b"].object.isRequired};function j(e){var t=e.children,a=e.logger;return d.a.createElement(w["a"].Provider,{value:a},t)}j.displayName="LoggerContextProvider";function T(e){return{logger:Object(S["a"])({state:e})}}var A=Object(p["connect"])(T)(j);var N=a(4487);var M=a(161);var P=function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!t)throw new Error("mountAppProfileCard must be called with a teamId parameter");var s=Object(h["f"])(t);var o=function r(){e(t,a,{},{},{isOpen:false})};var l={onMenuItemSelected:o,onTriggerClose:o};Object(m["a"])(d.a.createElement(p["Provider"],{store:s},d.a.createElement(N["a"],null,d.a.createElement(E,null,d.a.createElement(A,null,d.a.createElement(M["a"],null,d.a.createElement(f["a"],c()({isOpen:true,onClose:o,position:"right-bottom",targetBounds:n,allowanceX:24,offsetX:10},i),d.a.createElement(v["a"],c()({},r,{menuProps:l})))))))),a)};var R=P;var x=a(830);var D=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(r["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isAppSpaceEnabled:function e(){return Object(n["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},mountAppProfileCard:function e(t,a,r,n){return R(Object(s["b"])(TS.redux.getState()),document.getElementById("app_profile_card_mount_point"),{homeWorkspaceId:a,serviceId:t},r,n)},openAppProfileCard:function e(t,a,r,n,i){return TS.interop.apps.mountAppProfileCard(t,a,D(n),i)},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(o["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["a"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(x["b"])(t))}})},4719:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(296);var b=a(2);var g=a.n(b);var _=a(0);var y=a(6);var k=a(39);var O=a(1082);var C=a(822);var E=a(497);var S=new y["b"]("apps_browser");var w={clogger:_["b"].object.isRequired,isAppLauncher:_["b"].bool,forwardedRef:_["b"].oneOfType([_["b"].object,_["b"].func]),searchAppsIfNeeded:_["b"].func,setSearchInput:_["b"].func,isLoading:_["b"].bool,searchInput:_["b"].string};var I={isAppLauncher:false,forwardedRef:void 0,searchAppsIfNeeded:b["noop"],setSearchInput:b["noop"],isLoading:false,searchInput:""};var j=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.searchApps=a.searchApps.bind(a);a.debouncedSearchApps=Object(b["debounce"])(a.searchApps,300);return a}l()(t,[{key:"handleSearchInputChange",value:function e(t){var a="";t.target.value&&(a=t.target.value.trim());if(a!==this.props.searchInput){this.props.setSearchInput({searchInput:a});this.debouncedSearchApps(a)}}},{key:"searchApps",value:function e(){var t=this.props,a=t.clogger,r=t.searchInput,n=t.isAppLauncher;r.length>0&&a.track("APP_INDEX_SEARCH");this.props.searchAppsIfNeeded({isAppLauncher:n})}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,r=t.searchInput,n=t.forwardedRef;return h.a.createElement(E["a"],{ref:n,placeholder:S.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:a,onChange:this.handleSearchInputChange,value:r,"data-qa":"apps_browser__filter_input"})}}]);return t}(m["Component"]);j.displayName="AppsBrowserFilter";j.defaultProps=I;var T=function e(t){return{clogger:Object(k["a"])({state:t}),isLoading:Object(C["e"])(t),searchInput:Object(C["k"])(t)}};var A=function e(t){return Object(f["bindActionCreators"])({searchAppsIfNeeded:O["f"],setSearchInput:O["l"]},t)};var N=Object(v["connect"])(T,A)(j);t["a"]=h.a.forwardRef(function(e,t){return h.a.createElement(N,n()({},e,{forwardedRef:t}))})},4721:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(18);var u=a(29);var d=a(73);var p=function e(t){var a=t.channel,r=t.ts;return a&&r?a+"-"+r:r};var m=function(){function e(t){var a=t.teamId,r=t.experimentGroup,n=t.clogger,i=t.messageViewLocation;s()(this,e);this.teamId=a;this.visibleMessageIds={};this.messagesById={};this.experimentGroup=r;this.clogger=n;this.messageViewLocation=i}l()(e,[{key:"setCurrentlyVisibleMessages",value:function e(t){var a=this;var r=(new Date).getTime();var i=n()({},this.visibleMessageIds);t.forEach(function(e){var t=p(e);a.messagesById[t]=e;a.visibleMessageIds[t]=a.visibleMessageIds[t]||r;delete i[t]});Object.keys(i).forEach(function(e){var t=a.messagesById[e],n=t.ts,i=t.channel;var s=Object(d["a"])(Object(u["d"])(a.teamId),i,n);var o=r-a.visibleMessageIds[e];delete a.visibleMessageIds[e];delete a.messagesById[e];if(!a.shouldLog())return;if(o<500)return;if(!s)return;a.clogger.track(c["l"].MSG_IMPRESSION,{contexts:{ui_context:{action:c["w"].IMPRESSION},message_impression:{channel_id:s.channel,msg_timestamp:s.ts,msg_thread_ts:s.thread_ts,msg_author_user_id:null,duration_milliseconds:o,message_view_location:a.messageViewLocation}}})})}},{key:"flushAllVisibleMessages",value:function e(){this.setCurrentlyVisibleMessages([])}},{key:"isDisabled",value:function e(){return!this.experimentGroup||"control"===this.experimentGroup}},{key:"shouldLog",value:function e(){if(this.isDisabled())return false;switch(this.experimentGroup){case"enabled":return true;case"sample_001":return Math.random()<.01;default:return false}}}]);return e}();t["a"]=m},4722:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r={CHANNEL:0,DM:1,MPDM:2,THREAD:3,ALL_UNREAD:4,ALL_THREADS:5,SEARCH:6}},4723:function(e,t,a){},4726:function(e,t,a){},4727:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(128);var c=a(29);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(0);var _=a(2);var y=a(31);var k=a(6);var O=a(20);var C=a(926);var E=a(1045);var S=a(32);var w=a(812);var I=a(37);var j=a.n(I);var T=a(3);var A=a.n(T);var N=a(26);var M=a.n(N);var P=a(4647);var R=a(163);var x=a(13);var D=a.n(x);var F=a(1304);var L=a(17);var B=a(98);var U=a(77);var q=a(16);var W=a(38);var H=a(855);var G=a(1635);var V=a(169);var K=new k["b"]("files");var z=Object(L["b"])("build file summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.fileId,n=a.hasFocus;var i=t();if(!(Object(H["isScreenReaderEnabled"])(i)||n))return;var s=Object(B["getFileById"])(i,r);if(!s)return;var o=s.created,l=s.timestamp,c=s.user;var u=o||l;var d=Object(U["isExternal"])(s)?Object(G["a"])(s):Object(U["getFileType"])(s);var p=Object(U["getFileDisplayName"])(s);var m=Object(q["getPrefCompliantMemberNameById"])(i,c);var h=Object(V["k"])(u,{shortenMonth:false,excludeYear:Object(V["i"])(u)});var v=Object(W["h"])(i,"time24");var f=Object(V["p"])(u,{do24hrTime:v});var b=K.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:p,userName:m,dateStr:h,timeStr:f});return b});z.meta={name:"makeFileSummary",key:"actionsMakeFileSummaryMakeFileSummary",description:"build file summary for aria labels"};z.propTypes={fileId:g["b"].string.isRequired,hasFocus:g["b"].bool};var Q=z;var Y=a(1320);var J=a(551);var X=a(1855);var Z=a(1388);var $=a(86);var ee=a(3772);var te=function e(){return n.a.createElement("div",{className:"p-flexpane__loader_item"},n.a.createElement($["a"],{noMargin:true,size:"medium"}))};te.displayName="FlexpaneLoaderItem";var ae=te;var re=a(155);var ne=a(650);var ie=a(562);var se=a(531);var oe=a(563);var le=a(1452);var ce=a(552);var ue=a(603);var de=a(1041);var pe=a(915);var me=a(1071);var he=a(918);var ve=a(1313);var fe=a(1198);var be=a(1453);var ge=a(1454);var _e=a(337);var ye=a(371);var ke=a(42);var Oe={msg:g["b"].object.isRequired,hasReactionOrReplies:g["b"].bool};var Ce={hasReactionOrReplies:false};var Ee=function(e){b()(t,e);function t(){d()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.hasReactionOrReplies,r=t.msg;if(!a)return null;return n.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},n.a.createElement(be["a"],{msg:r}),n.a.createElement(ge["a"],{msg:r,flexOrigin:"starred_items"}))}}]);return t}(n.a.PureComponent);Ee.displayName="StarredItemReactionReplyBar";Ee.defaultProps=Ce;var Se=function e(t,a){var r=a.msg;var n=Object(ye["b"])(r);var i=Object(_e["getReactionsForKey"])(t,n);var s=Object(ke["getReplyCount"])(r);return{hasReactionOrReplies:!!(s>0||i&&i.length)}};var we=Object(i["connect"])(Se)(Ee);var Ie=a(1914);var je={msg:g["b"].object.isRequired,className:g["b"].string,"data-qa":g["b"].string};var Te={className:void 0,"data-qa":void 0};var Ae=function(e){b()(t,e);function t(){d()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t["data-qa"];var i=D()("p-starred_item__message",this.props.className);return n.a.createElement(he["a"],{className:i,"data-qa":r},n.a.createElement(fe["a"],{msg:a,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,showMoreActions:false,jumpOrigin:"starred_items"},n.a.createElement(me["a"],{msg:a},n.a.createElement(pe["a"],{light:n.a.createElement(ne["a"],{msg:a,size:36})},n.a.createElement(ie["a"],{msg:a}),"\xa0\xa0",n.a.createElement(se["a"],{msg:a,full:true}),n.a.createElement("br",null),n.a.createElement(oe["a"],{msg:a}),n.a.createElement(ue["a"],{msg:a,blocksContainerContext:re["a"].starred_message}),n.a.createElement(le["a"],{msg:a}),n.a.createElement(ce["b"],{msg:a}),n.a.createElement(de["a"],{msg:a}),n.a.createElement(ve["a"],{flexOrigin:"starred_items",msg:a}),n.a.createElement(we,{msg:a})))))}}]);return t}(r["PureComponent"]);Ae.displayName="StarredItemMessage";Ae.defaultProps=Te;var Ne=Ae;var Me=a(97);var Pe=a(1306);var Re={file:g["b"].object.isRequired,id:g["b"].string.isRequired,className:g["b"].string,useRowAction:g["b"].bool,previewFile:g["b"].func,"data-qa":g["b"].string};var xe={className:void 0,useRowAction:true,previewFile:_["noop"],"data-qa":void 0};var De=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFileClick=a.onFileClick.bind(a);return a}m()(t,[{key:"onFileClick",value:function e(t,a){if(!a)return;var r="starred_items";this.props.previewFile({fileId:a.id,flexOrigin:r})}},{key:"render",value:function e(){var t=D()("p-starred_item__message",this.props.className);var a=this.props["data-qa"];if(!this.props.file)return null;return n.a.createElement(Pe["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:false,includeRootStarAction:true,fullWidth:true,onClick:this.onFileClick,"data-qa":a})}}]);return t}(r["PureComponent"]);De.displayName="StarredItemFile";De.defaultProps=xe;var Fe=function e(t,a){var r=a.id;return{file:Object(B["getFileById"])(t,r)}};var Le=Object(i["connect"])(Fe,{previewFile:Me["c"]})(De);var Be={comment:g["b"].object,fileId:g["b"].string,className:g["b"].string,"data-qa":g["b"].string};var Ue={comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0};var qe=function(e){b()(t,e);function t(){d()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.fileId,i=t.className,s=t["data-qa"];if(!a)return null;var o={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[r]};return n.a.createElement(Ne,{msg:o,className:i,"data-qa":s})}}]);return t}(r["PureComponent"]);qe.displayName="StarredItemFileComment";qe.defaultProps=Ue;var We=function e(t,a){var r=a.fileId,n=a.commentId;return{comment:Object(B["getFileCommentById"])(t,r,n)}};var He=Object(i["connect"])(We)(qe);var Ge=new k["b"]("starred_items");var Ve=Object(Y["b"])(Ne);var Ke={fetchMoreItems:g["b"].func,isLoading:g["b"].bool,items:g["b"].arrayOf(g["b"].object.isRequired),makeMessageSummary:g["b"].func.isRequired,makeFileSummary:g["b"].func.isRequired,onItemTabWithin:g["b"].func,focusKey:g["b"].string,setFocusKey:g["b"].func};var ze={fetchMoreItems:_["noop"],isLoading:false,items:void 0,onItemTabWithin:_["noop"],focusKey:null,setFocusKey:_["noop"]};var Qe={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Ye=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(a,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]);a.getItemKeys=Object(R["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var r=["top-anchor-hack"];var n=e.map(function(e){return a.getStarredItemId(e)});r.push.apply(r,M()(n));t&&r.push("loader");return r});a.list=n.a.createRef();a.state={hasKeyboardFocus:false};return a}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;"stars"===a&&r.length&&this.setFocusOnFirstItem()}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"setFocusOnFirstItem",value:function e(){var t=this.props,a=t.isLoading,r=t.items;var n=this.getItemKeys({isLoading:a,items:r});var i=n[1];var s=this.list.current;s&&s.focusOnKey(i);this.props.setFocusKey(null)}},{key:"getStarredItemId",value:function e(t){switch(t.type){case Qe.MESSAGE:return t.channel+t.ts;case Qe.FILE:return t.id;case Qe.FILE_COMMENT:return t.id;default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var a=this.props.items;var r=this.state.hasKeyboardFocus;var n=a[t-1];if(!n||!n.type)return null;if(n.type===Qe.MESSAGE)return this.props.makeMessageSummary({channelId:n.channel,ts:n.ts,hasFocus:r,viewContext:O["MESSAGE_CONTAINERS"].STARS_FLEXPANE});return this.props.makeFileSummary({fileId:n.id,hasFocus:r})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[a];if(!o)return false;if("top-anchor-hack"===o)return false;if("loader"===o)return false;return true}},{key:"renderItem",value:function e(t){var a=this.props,r=a.isLoading,i=a.items;var s=this.getItemKeys({isLoading:r,items:i});if("top-anchor-hack"===s[t])return n.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===s[t])return n.a.createElement(ae,null);var o=i[t-1];var l={key:this.getStarredItemId(o),className:D()("c-message_kit__message","p-starred_item",{"p-starred_item--first":o===i[0]}),"data-qa":"starred_item_"+o.type};switch(o.type){case Qe.MESSAGE:return n.a.createElement(Ve,A()({},l,{channelId:o.channel,ts:o.ts}));case Qe.FILE:return n.a.createElement(Le,A()({},l,{id:o.id}));case Qe.FILE_COMMENT:return n.a.createElement(He,A()({},l,{fileId:o.fileId,commentId:o.id}));default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isLoading,i=a.items,s=a.onItemTabWithin;return n.a.createElement(P["a"],null,function(e){var a=e.width,o=e.height;return n.a.createElement(J["a"],{ref:t.list,width:a,height:o,keys:t.getItemKeys({isLoading:r,items:i}),rowRenderer:t.renderItem,loadPost:t.props.fetchMoreItems,animateOnScroll:false,ariaLabel:Ge.t("Starred Items"),getAriaLabelForRow:t.getAriaLabelForRow,isFocusableItem:t.isFocusableItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:s})})}}]);return t}(r["PureComponent"]);Ye.displayName="StarredItemsList";Ye.defaultProps=ze;var Je=function e(t){return{focusKey:Object(X["a"])(t)}};function Xe(e){return{makeMessageSummary:function t(){return e(F["a"].apply(void 0,arguments))},makeFileSummary:function t(){return e(Q.apply(void 0,arguments))},setFocusKey:function t(a){return e(Object(Z["a"])(a))}}}var Ze=Object(i["connect"])(Je,Xe)(function(e){var t=e.forwardedRef,a=j()(e,["forwardedRef"]);return n.a.createElement(Ye,A()({ref:t},a))});var $e=n.a.forwardRef(function(e,t){return n.a.createElement(Ze,A()({forwardedRef:t},e))});var et=new k["b"]("starred_items");var tt={fetchStarsList:g["b"].func,isLoading:g["b"].bool,starredItems:g["b"].arrayOf(g["b"].object.isRequired),cursorMark:g["b"].string};var at={fetchStarsList:_["noop"],isLoading:false,starredItems:void 0,cursorMark:void 0};var rt=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(a,["fetchMoreStarredItems","renderEmpty","focus","fetchStarredItems","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();a.requestStars=null;return a}m()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.starredItems,n=a.cursorMark;!Object(_["isEmpty"])(t.starredItems)&&Object(_["isEmpty"])(r)&&n&&this.fetchStarredItems(n)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchStarredItems",value:function e(t){var a=this;if(this.requestStars)return false;this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:t});return this.requestStars.finally(function(){a.requestStars=null})}},{key:"fetchMoreStarredItems",value:function e(){var t=this.props,a=t.isLoading,r=t.cursorMark;if(a)return;if(!r)return;this.fetchStarredItems(r)}},{key:"renderEmpty",value:function e(t){var a=t.isOffline;if(a)return n.a.createElement(E["a"],{title:et.t("Couldn\u2019t load your Starred Items"),description:et.t("Try again when you\u2019re online"),primaryActionText:et.t("Retry"),onClickPrimaryAction:this.fetchStarredItems});return n.a.createElement(E["a"],{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",title:et.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:et.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}},{key:"render",value:function e(){var t=this;return n.a.createElement(w["a"],{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(_["isEmpty"])(this.props.starredItems),isLoading:this.props.isLoading,renderBody:function e(){return n.a.createElement($e,{ref:t.list,fetchMoreItems:t.fetchMoreStarredItems,isLoading:t.props.isLoading,items:t.props.starredItems,onItemTabWithin:t.onItemTabWithin})},renderEmpty:this.renderEmpty,title:et.t("Starred Items"),viewId:O["MESSAGE_CONTAINERS"].STARS_FLEXPANE,kbNavOrder:Object(S["a"])()?void 0:4.3})}}]);return t}(r["PureComponent"]);rt.displayName="StarredItemsFlexpane";rt.defaultProps=at;var nt=function e(t){return{isLoading:Object(C["getLoadingState"])(t),starredItems:Object(C["getAllStarredItems"])(t),totalPages:Object(C["getTotalPages"])(t),cursorMark:Object(C["getCursorMark"])(t)}};var it={fetchStarsList:function e(){return C["fetchStarsList"].apply(void 0,arguments)}};var st=Object(i["connect"])(nt,it)(rt);var ot=st;var lt=a(161);var ct=function e(t,a){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(lt["a"],null,n.a.createElement(ot,null))),a)};var ut=function e(t){o.a.unmountComponentAtNode(t)};var dt=a(46);Object(dt["a"])("interop.mountStarredItemsFlexpane",ct);Object(dt["a"])("interop.unmountStarredItemsFlexpane",ut)},4730:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(0);var h=a(12);var v=a(2);var f=a(31);var b=a(13);var g=a.n(b);var _=a(237);var y=a(38);var k=a(41);var O=a(32);var C=a(557);var E=a(350);var S=a(6);var w=a(14);var I=a(39);var j=a(18);var T=a(91);var A={title:m["b"].string,children:m["b"].node.isRequired,step:m["b"].number.isRequired,currentStep:m["b"].number.isRequired,setModalTitle:m["b"].func.isRequired};var N={title:""};var M=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentWillReceiveProps",value:function e(){var t=this.props,a=t.title,r=t.currentStep,n=t.step;var i=r===n;i&&this.props.setModalTitle(a)}},{key:"render",value:function e(){var t=this.props,a=t.currentStep,r=t.step;var n=a===r;var i=g()({"p-onboarding__step":true,"p-onboarding__step--active":n,"p-onboarding__step--inactive":!n});var s=p.a.createElement("div",{className:i},n&&this.props.children);return n?s:null}}]);return t}(d["Component"]);M.displayName="Step";M.defaultProps=N;var P={setModalTitle:_["setModalTitle"]};var R=Object(h["connect"])(null,P)(M);var x=a(3);var D=a.n(x);var F=a(10);var L=a.n(F);var B=a(1602);var U=a(2053);var q=a(589);var W=a(150);var H=a(295);var G=a(170);var V=a(123);var K=a(1148);var z=a(52);var Q={src:m["b"].string.isRequired};var Y=function e(t){var a=t.src;return p.a.createElement(d["Fragment"],null,p.a.createElement("div",{className:"p-onboarding__step__header"},p.a.createElement("img",{src:a,srcSet:a+" 1x, "+a.replace(".png","@2x.png")+" 2x",alt:""})))};Y.displayName="StepHeader";var J=Y;var X={imgUrl:m["b"].string.isRequired,realName:m["b"].string,gdprPref:m["b"].bool,onPasswordSet:m["b"].func,gdpr:m["b"].bool.isRequired,inEU:m["b"].bool.isRequired,needsPasswordSet:m["b"].bool,updateRealName:m["b"].func,updateGdprPref:m["b"].func,updateStep:m["b"].func,setStepCallback:m["b"].func,submitCheckPasswordComplexity:m["b"].func};var Z={realName:"",gdprPref:false,onPasswordSet:v["noop"],needsPasswordSet:true,updateRealName:v["noop"],updateGdprPref:v["noop"],updateStep:v["noop"],setStepCallback:v["noop"],submitCheckPasswordComplexity:v["noop"]};var $=new S["b"]("team_creation");var ee=Object(w["b"])();var te="TEAM_CREATOR_ONBOARDING";var ae=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props.realName;Object(f["a"])(a,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]);a.nameInput=null;a.updateRealNameDebounced=Object(v["debounce"])(a.updateRealNameApi,500);a.checkPasswordComplexityDebounced=Object(v["debounce"])(a.checkPasswordComplexityApi,500);a.state={realName:r,realNameError:null,password:"",passwordError:null,gdpr:null};return a}s()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.validateAndSaveStep()}},{key:"onRealNameChange",value:function e(){this.updateRealNameDebounced(this.state.realName)}},{key:"onPasswordChange",value:function e(t){var a=this;this.setState(function(){return{password:t}},function(){a.checkPasswordComplexityDebounced(t)})}},{key:"onGdprPrefChange",value:function e(t){var a=this;var r=t.target.classList.contains("gdpr_pref_radio");var n=!!r||t.target.checked;var i=t.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:i}},function(){a.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function e(){var t=this;var a=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;a&&t.props.onPasswordSet(t.state.password);t.props.updateStep({number:q["d"].workspace})}).catch(function(e){ee.info(te,e)})}},{key:"setRealNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateRealName",value:function e(t){this.setState(function(){return{realName:t}})}},{key:"updateRealNameApi",value:function e(t){var a=this;this.props.updateRealName({realName:t}).then(function(){a.setState(function(){return{realNameError:null}})}).catch(function(e){a.setState(function(){return{realNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function e(t){var a=this;this.props.submitCheckPasswordComplexity({password:t}).then(function(){a.setState(function(){return{passwordError:null}})}).catch(function(e){var t=e.data;a.setState(function(){return{passwordError:t.error}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.realName,r=t.realNameError,n=t.password,i=t.passwordError;var s=this.props.needsPasswordSet;var o=!s||n;return this.props.updateStep({validated:!!(a&&o&&!r&&!i),forceValidation:true})}},{key:"renderRealNameField",value:function e(){var t=this.state,a=t.realName,r=t.realNameError;var n=r?r.message:null;var i=r?r.name:null;var s=g()("realName_input",L()({"c-input_text--with_error":n,"p-onboarding__step__real_name_input--success":!n},i,n));var o=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;var l={name:"real_name",hintText:$.t("Your name will be displayed with messages you send."),id:"real_name",className:s,"data-qa":"tractor-real-name-input",value:a,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef,isRequired:true};var c={text:$.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return p.a.createElement(z["a"],c,p.a.createElement(W["a"],D()({},l,o)))}},{key:"renderPasswordField",value:function e(){var t=this.state,a=t.password,r=t.passwordError;var n=g()("password_input",L()({"c-input_text--with_error":!!r,"p-onboarding__step__password_input--success":!r},r,!!r));var i={text:$.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"};var s={name:"password_field",hintText:$.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:n,onChange:this.onPasswordChange,value:a,type:"password",isRequired:true};var o="";r&&(o=Object(U["a"])(r));var l=r?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],i,p.a.createElement(W["a"],D()({},s,l)))}},{key:"renderGdprPref",value:function e(){var t=this.props.inEU;var a=this.props.gdpr;var r=this.state.gdpr;var n=p.a.createElement(z["a"],{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:$.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},p.a.createElement(V["a"],{id:"gdpr_field",checked:null===r?a:r,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange}));var i=p.a.createElement(H["a"],{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},p.a.createElement(K["a"],null,$.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),p.a.createElement(z["a"],{htmlFor:"gdpr_field_yes",text:$.t("Sure!"),cursor:"pointer",type:"inline"},p.a.createElement(G["a"],{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),p.a.createElement(z["a"],{htmlFor:"gdpr_field_no",text:$.t("No thanks"),cursor:"pointer",type:"inline"},p.a.createElement(G["a"],{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return t?i:n}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]);return t}(d["Component"]);ae.displayName="ProfileStep";ae.defaultProps=Z;var re=function e(t){return{realName:Object(_["getRealName"])(t),gdpr:Object(_["getGdprPref"])(t),inEU:Object(_["getInEurope"])(t),needsPasswordSet:Object(y["h"])(t,"needs_initial_password_set")}};var ne={updateRealName:_["updateRealName"],updateGdprPref:_["updateGdprPref"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"],submitCheckPasswordComplexity:B["d"]};var ie=Object(h["connect"])(re,ne)(ae);var se=a(9);var oe=a(134);var le=a(441);var ce={imgUrl:m["b"].string.isRequired,invites:m["b"].array,domainWhitelistingPref:m["b"].bool,workspaceName:m["b"].string,channelName:m["b"].string.isRequired,signupDomain:m["b"].string,onDialogFinish:m["b"].func,validateInvites:m["b"].func,sendInvites:m["b"].func,setDomainWhitelistingPref:m["b"].func,updateStep:m["b"].func,setStepCallback:m["b"].func,canWhitelistDomain:m["b"].bool,featureTractorSharedInviteLink:m["b"].bool,featureTractorBackupChannelnameCopy:m["b"].bool,sharedInviteLink:m["b"].string,fetchAndSetSharedInviteLink:m["b"].func};var ue={invites:[],workspaceName:"",domainWhitelistingPref:false,signupDomain:"",onDialogFinish:v["noop"],validateInvites:v["noop"],sendInvites:v["noop"],setDomainWhitelistingPref:v["noop"],updateStep:v["noop"],setStepCallback:v["noop"],canWhitelistDomain:false,featureTractorSharedInviteLink:true,featureTractorBackupChannelnameCopy:false,sharedInviteLink:"",fetchAndSetSharedInviteLink:v["noop"]};var de=new S["b"]("team_creation");var pe=Object(w["b"])();var me="TEAM_CREATOR_ONBOARDING";var he=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props.invites;var i=r instanceof Array?r.join(", "):r;Object(f["a"])(a,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]);a.invitesInput=null;a.validateInvitesDebounced=Object(v["debounce"])(a.validateInvites,250);a.state={invites:i,invitesError:null,domainWhitelistingPref:false,toggleSharedInviteLink:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.invitesInput.focus();var t=this.props,a=t.sharedInviteLink,r=t.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo);r&&!a&&this.props.fetchAndSetSharedInviteLink();this.props.updateStep({validated:true})}},{key:"onInvitesChange",value:function e(t){var a=this;this.setState(function(){return{invites:t}},function(){a.validateInvitesDebounced(t)})}},{key:"onDomainWhitelistingCheckboxChange",value:function e(t){var a=this;var r=t.target.checked;this.setState(function(){return{domainWhitelistingPref:r}},function(){a.props.setDomainWhitelistingPref(r)})}},{key:"onGo",value:function e(){var t=this;this.props.sendInvites().then(function(){t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})})}).catch(function(e){pe.info(me,e);t.setState(function(){return{invitesError:e}})})}},{key:"setInvitesInputRef",value:function e(t){this.invitesInput=t}},{key:"validateInvites",value:function e(t){var a=this;this.props.validateInvites({invites:t}).then(function(){a.setState(function(){return{invitesError:null}})}).catch(function(e){a.setState(function(){return{invitesError:e}})})}},{key:"toggleSharedInviteLinkView",value:function e(){var t=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!t}})}},{key:"renderInvitesInput",value:function e(){var t=this.state,a=t.invites,r=t.invitesError;var n=this.props,i=n.workspaceName,s=n.channelName,o=n.featureTractorBackupChannelnameCopy;var l=r?r.message:null;var c=r?r.name:null;var u=g()("invites_input",L()({"c-input_textarea--with_error":l,"p-onboarding__step__invites_input--success":!l},c,l));var d=void 0;d=o?s&&void 0!==s&&""!==s?de.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:i}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i});var m={name:"invites_field",id:"invites_field",className:u,onChange:this.onInvitesChange,value:a,"data-qa":"tractor-invites-input",hintText:r?null:d,ref:this.setInvitesInputRef};var h={className:"margin_bottom_150",text:de.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"};var v=l?{errorText:l,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],h,p.a.createElement(le["a"],D()({},m,v)))}},{key:"renderDomainWhitelistingCheckbox",value:function e(){var t=this.props.signupDomain;var a=this.state.domainWhitelistingPref;var r=this.props.domainWhitelistingPref;return p.a.createElement(z["a"],{className:"margin_bottom_150 normal tractor_checkbox_label",text:de.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:t}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},p.a.createElement(V["a"],{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===a?r:a,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderSharedInviteLink",value:function e(){if(!this.props.featureTractorSharedInviteLink)return null;var t=this.props.sharedInviteLink;var a=this.state.toggleSharedInviteLink;var r=de.t("invite link");var n=de.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:p.a.createElement(oe["a"],{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},r)});var i={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"};var s={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:de.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:t,onFocus:this.select};return p.a.createElement("div",{className:"margin_bottom_100"},!a&&p.a.createElement("span",null,n),a&&p.a.createElement(z["a"],i,p.a.createElement(W["a"],s)))}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]);return t}(d["Component"]);he.displayName="InvitesStep";he.defaultProps=ue;var ve=function e(t){return{invites:Object(_["getInvites"])(t),workspaceName:Object(_["getWorkspaceName"])(t),domainWhitelistingPref:Object(_["getDomainWhitelistingPref"])(t),channelName:Object(_["getChannelName"])(t),signupDomain:Object(_["getSignupDomain"])(t),canWhitelistDomain:Object(_["getCanWhitelistOwnerEmailDomain"])(t),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(se["isFeatureEnabled"])(t,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(_["getSharedInviteLink"])(t)}};var fe={validateInvites:_["validateInvites"],sendInvites:_["sendInvites"],setDomainWhitelistingPref:_["setDomainWhitelistingPref"],fetchAndSetSharedInviteLink:_["fetchAndSetSharedInviteLink"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"]};var be=Object(h["connect"])(ve,fe)(he);var ge={imgUrl:m["b"].string.isRequired,workspaceName:m["b"].string,workspaceDomain:m["b"].string,hasInvited:m["b"].bool,onDialogFinish:m["b"].func,updateWorkspaceName:m["b"].func,updateWorkspaceDomain:m["b"].func,updateStep:m["b"].func,setStepCallback:m["b"].func,fetchAndSetSharedInviteLink:m["b"].func,featureTractorSharedInviteLink:m["b"].bool};var _e={workspaceName:"",workspaceDomain:"",hasInvited:false,onDialogFinish:v["noop"],updateWorkspaceName:v["noop"],updateWorkspaceDomain:v["noop"],updateStep:v["noop"],setStepCallback:v["noop"],fetchAndSetSharedInviteLink:v["noop"],featureTractorSharedInviteLink:false};var ye=new S["b"]("team_creation");var ke=Object(w["b"])();var Oe="TEAM_CREATOR_ONBOARDING";var Ce=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.workspaceName,s=r.workspaceDomain;Object(f["a"])(a,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]);a.nameInput=null;a.updateWorkspaceNameDebounced=Object(v["debounce"])(a.updateWorkspaceNameApi,500);a.updateWorkspaceDomainDebounced=Object(v["debounce"])(a.updateWorkspaceDomainApi,500);a.state={workspaceName:i,workspaceNameError:null,workspaceDomain:s,workspaceDomainError:null};return a}s()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onWorkspaceNameChange",value:function e(t){var a=this;this.setState(function(){return{workspaceName:t}},function(){a.updateWorkspaceNameDebounced(t)})}},{key:"onWorkspaceNameBlur",value:function e(){var t=this.props.workspaceName;var a=this.state.workspaceName;a||this.onWorkspaceNameChange(t)}},{key:"onWorkspaceDomainChange",value:function e(t){var a=this;this.setState(function(){return{workspaceDomain:t}},function(){a.updateWorkspaceDomainDebounced(t)})}},{key:"onGo",value:function e(){var t=this;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;t.props.hasInvited?t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})}):t.props.updateStep({number:q["d"].invites})}).catch(function(e){ke.info(Oe,e)})}},{key:"setWorkspaceNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateWorkspaceNameApi",value:function e(t){var a=this;this.props.updateWorkspaceName({workspaceName:t}).then(function(){a.setState(function(){return{workspaceNameError:null}})}).catch(function(e){a.setState(function(){return{workspaceNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function e(t){var a=this;var r=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:t}).then(function(){a.setState(function(){return{workspaceDomainError:null}});r&&a.props.fetchAndSetSharedInviteLink()}).catch(function(e){a.setState(function(){return{workspaceDomainError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceNameError,n=t.workspaceDomainError;return this.props.updateStep({validated:!!(a&&!r&&!n),forceValidation:true})}},{key:"renderWorkspaceName",value:function e(){var t=this.state,a=t.workspaceName,r=t.workspaceNameError;var n=r?r.message:null;var i=r?r.name:null;var s=g()("workspaceName_input",L()({"c-input_text--with_error":n,"p-onboarding__step__workspace_name_input--success":!n},i,n));var o={className:"margin_bottom_150",text:ye.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"};var l={name:"workspace_name_field",id:"workspace_name_field",className:s,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:a,"data-qa":"tractor-workspace-name-input",hintText:ye.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef,isRequired:true};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],o,p.a.createElement(W["a"],D()({},l,c)))}},{key:"renderWorkspaceDomain",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceDomainError;var n=r?r.message:null;var i=r?r.name:null;var s=g()("workspaceDomain_input",L()({"c-input_text--with_error":n,"p-onboarding__step__workspace_domain_input--success":!n},i,n));var o={text:ye.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"};var l={name:"workspace_domain_field",id:"workspace_domain_field",className:s,hintText:ye.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:a,suffix:".slack.com",isRequired:true};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],o,p.a.createElement(W["a"],D()({},l,c)))}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]);return t}(d["Component"]);Ce.displayName="WorkspaceStep";Ce.defaultProps=_e;var Ee=function e(t){return{workspaceName:Object(_["getWorkspaceName"])(t),workspaceDomain:Object(_["getWorkspaceDomain"])(t),hasInvited:Object(y["h"])(t,"has_invited"),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link")}};var Se={updateWorkspaceName:_["updateWorkspaceName"],updateWorkspaceDomain:_["updateWorkspaceDomain"],fetchAndSetSharedInviteLink:_["fetchAndSetSharedInviteLink"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"]};var we=Object(h["connect"])(Ee,Se)(Ce);var Ie={imgUrl:m["b"].string.isRequired,invites:m["b"].array,channelName:m["b"].string.isRequired,updateStep:m["b"].func};var je={invites:[],updateStep:v["noop"]};var Te=new S["b"]("team_creation");var Ae=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.props.updateStep({validated:true})}},{key:"render",value:function e(){var t=this.props,a=t.imgUrl,r=t.invites,n=t.channelName;var i=n&&void 0!==n&&""!==n?r.length:0;var s=void 0;var o=void 0;switch(i){case 0:s=Te.t("Your Slack workspace is all set");o=Te.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:s=Te.t("Your invitation has been sent!");o=Te.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break;default:s=Te.t("Your {numInvites} invitations have been sent!",{numInvites:i});o=Te.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break}return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:a}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},p.a.createElement("h2",null,s),o))}}]);return t}(d["Component"]);Ae.displayName="CompletionStep";Ae.defaultProps=je;var Ne=function e(t){return{invites:Object(_["getInvites"])(t),channelName:Object(_["getChannelName"])(t)}};var Me={updateStep:_["updateStep"]};var Pe=Object(h["connect"])(Ne,Me)(Ae);var Re=a(3549);var xe={invites:m["b"].array,modalTitle:m["b"].string,onClose:m["b"].func,stepCallback:m["b"].func,stepNumber:m["b"].number,isCurrentStepValid:m["b"].bool,isPromiseRunning:m["b"].bool,hasInvited:m["b"].bool,needsPasswordSet:m["b"].bool,clogger:m["b"].object.isRequired,fetchAndSetChannelInfo:m["b"].func,fetchAndSetWorkspace:m["b"].func,fetchAndSetSignupDetails:m["b"].func,setInitialMarketingPref:m["b"].func,setStepNumber:m["b"].func,updatePassword:m["b"].func,submitDomainWhitelistingPref:m["b"].func,completeWorkflowTask:m["b"].func,closeModal:m["b"].func,clientTheme:m["b"].oneOf(["light","dark"])};var De={invites:[],modalTitle:"",onClose:v["noop"],stepCallback:v["noop"],stepNumber:0,isCurrentStepValid:false,isPromiseRunning:false,hasInvited:false,needsPasswordSet:true,fetchAndSetChannelInfo:v["noop"],fetchAndSetWorkspace:v["noop"],fetchAndSetSignupDetails:v["noop"],setInitialMarketingPref:v["noop"],setStepNumber:v["noop"],updatePassword:v["noop"],submitDomainWhitelistingPref:v["noop"],completeWorkflowTask:v["noop"],closeModal:v["noop"],clientTheme:"light"};var Fe=new S["b"]("team_creation");var Le=Object(w["b"])();var Be="TEAM_CREATOR_ONBOARDING";var Ue=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["a"])(a,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]);a.state={password:null};return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.fetchAndSetChannelInfo();this.props.fetchAndSetWorkspace();this.props.fetchAndSetSignupDetails();this.props.setInitialMarketingPref();this.preloadRemainingImages();Le.info(Be,"Onboarding dialog mounted.");var t=this.props.needsPasswordSet;t&&this.props.setStepNumber(0)}},{key:"onBack",value:function e(){var t=this.props,a=t.stepNumber,r=t.clogger;var n=void 0;n=a>0?a-1:q["c"]-1;r.track(j["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][a],action:"BACK"}}});r.track(E["k"],{contexts:{ui_context:{step:q["e"][a],action:"BACK"}}});this.props.setStepNumber(n)}},{key:"onGo",value:function e(){var t=this.props,a=t.stepCallback,r=t.isCurrentStepValid,n=t.clogger,i=t.stepNumber;r&&a();n.track(j["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][i],action:"CLICK"}}});n.track(E["k"],{contexts:{ui_context:{step:q["e"][i],action:"CLICK"}}})}},{key:"onClose",value:function e(){var t=this.props,a=t.clogger,r=t.stepNumber;a.track(j["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][r],action:"CLOSE"}}});a.track(E["k"],{contexts:{ui_context:{step:q["e"][r],action:"CLOSE"}}});Object(O["a"])()?this.props.closeModal():this.props.onClose()}},{key:"onPasswordSet",value:function e(t){this.setState(function(){return{password:t}})}},{key:"onDialogFinish",value:function e(){var t=this;var a=this.state.password;var r=void 0;r=this.props.needsPasswordSet?this.props.updatePassword({password:a}):Promise.resolve();var n=this.props.submitDomainWhitelistingPref();return Promise.all([r,n]).then(function(){return t.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Le.info(Be,e)})}},{key:"getGoButtonText",value:function e(){var t=this.props,a=t.stepNumber,r=t.invites,n=t.hasInvited;var i=r?r.length:0;switch(a){case 1:return n?Fe.t("Finish"):Fe.t("Next");case 2:return i>=1?Fe.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:i,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Fe.t("Finish");case 3:if(0===i)return Fe.t("Explore Slack");return Fe.t("Start the Conversation");default:return Fe.t("Next")}}},{key:"getFooterText",value:function e(){var t=this.props,a=t.stepNumber,r=t.hasInvited;if(a>=q["c"])return null;var n=a+1;var i=r?2:3;return Fe.t("Step {stepNumber} of {totalSteps}",{stepNumber:n,totalSteps:i})}},{key:"preloadRemainingImages",value:function e(){Object(v["map"])(q["b"][this.props.clientTheme],function(e,t){if("profile"===t)return null;var a=new Image;var r=new Image;a.src=e;r.src=e.replace(".png","@2x.png");return null})}},{key:"shouldShowBackButton",value:function e(t){if(t===q["d"].profile||t===q["d"].completion)return false;return true}},{key:"render",value:function e(){var t=this.props,a=t.modalTitle,r=t.stepNumber,n=t.isCurrentStepValid,i=t.isPromiseRunning,s=t.clientTheme;var o=g()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===r});return p.a.createElement(d["Fragment"],null,p.a.createElement(T["a"],{showGoButton:true,showCloseButton:true,showHeader:true,shouldCloseOnCancel:false,shouldCloseOnGo:r===q["d"].completion,truncateTitle:false,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(r),goButtonIsDisabled:!n,goButtonIsPending:i,goButtonText:this.getGoButtonText(),title:a,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:Fe.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:o,bodyClassName:"p-team_creator_onboarding_dialog__body"},p.a.createElement(R,{step:0,currentStep:r,title:Fe.t("Set your name and password")},p.a.createElement(ie,{imgUrl:q["b"][s].profile,onPasswordSet:this.onPasswordSet})),p.a.createElement(R,{step:1,currentStep:r,title:Fe.t("Review your team\u2019s details")},p.a.createElement(we,{imgUrl:q["b"][s].workspace,onDialogFinish:this.onDialogFinish})),p.a.createElement(R,{step:2,currentStep:r,title:Fe.t("Add people to your Slack workspace")},p.a.createElement("div",null),p.a.createElement(be,{imgUrl:q["b"][s].invites,onDialogFinish:this.onDialogFinish})),p.a.createElement(R,{step:3,currentStep:r},p.a.createElement("div",null),p.a.createElement(Pe,{imgUrl:q["b"][s].completion}))))}}]);return t}(p.a.Component);Ue.displayName="TeamCreatorOnboardingDialog";Ue.defaultProps=De;var qe=function e(t){return{hasInvited:Object(y["h"])(t,"has_invited"),needsPasswordSet:Object(y["h"])(t,"needs_initial_password_set"),stepNumber:Object(_["getStepNumber"])(t),modalTitle:Object(_["getModalTitle"])(t),stepCallback:Object(_["getStepCallback"])(t),isCurrentStepValid:Object(_["getCurrentStepValidity"])(t),isPromiseRunning:Object(_["getIsPromiseRunning"])(t),invites:Object(_["getInvites"])(t),clogger:Object(I["a"])({state:t}),clientTheme:Object(C["getClientTheme"])(t)}};var We={fetchAndSetChannelInfo:_["fetchAndSetChannelInfo"],fetchAndSetWorkspace:_["fetchAndSetWorkspace"],fetchAndSetSignupDetails:_["fetchAndSetSignupDetails"],setInitialMarketingPref:_["setInitialMarketingPref"],setStepNumber:_["setStepNumber"],updatePassword:_["updatePassword"],submitDomainWhitelistingPref:_["submitDomainWhitelistingPref"],completeWorkflowTask:_["completeWorkflowTask"],closeModal:k["closeModal"]};var He=t["a"]=Object(h["connect"])(qe,We)(Ue)},4751:function(e,t,a){"use strict";var r=a(49);var n=a(0);var i=a(17);var s=a(14);var o=a(323);var l=a(240);var c=a(4763);var u=a(234);var d=a(2024);var p=Object(i["b"])("Create a new composer draft",function(e){var t=Object(u["a"])();e(Object(d["d"])({id:t}));return Promise.resolve(t)});p.meta={name:"createComposerDraft",key:"draftsStoreThunksCreateComposerDraftCreateComposerDraft",description:"Create a new composer draft"};p.propTypes=null;var m=p;a.d(t,"a",function(){return v});var h=void 0;var v=Object(i["b"])("Opens the composer page",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.draftId;var u,d;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:u=Object(s["a"])({getState:a,label:"COMPOSER"});d=void 0;if(!i){n.next=6;break}d=i;n.next=10;break;case 6:n.next=8;return Object(r["resolve"])(t(m()));case 8:d=n.sent;u.info("Creating a new composer draft "+d);case 10:u.info("Opening the composer page to the following draft "+d);Object(o["c"])(l["a"],{entityId:"composer",draftId:Object(c["b"])(d)});case 12:case"end":return n.stop()}},e,h)}));return function(t,a,r){return e.apply(this,arguments)}}());v.meta={name:"openComposerPage",key:"actionsOpenComposerPageOpenComposerPage",description:"Opens the composer page"};v.propTypes={draftId:n["b"].string}},4752:function(e,t,a){"use strict";a.d(t,"a",function(){return b});a.d(t,"b",function(){return g});var r=a(48);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(0);var l=a(114);var c=a(239);var u=a(302);var d=a(6);var p=new d["b"]("enterprise_dashboard");var m="25";function h(e){var t=e.type,a=e.entities,r=void 0===a?[]:a,n=e.label;var i=(r||[]).map(function(e){return{value:e.id,label:e.id,entity:e,type:t}});return{label:n,options:i}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return;var t=e.map(function(e){return{type:"id",value:e}});return{type:"or",clauses:[{type:"is",value:"user"}].concat(s()(t))}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return;var t=e.map(function(e){return{type:"id",value:e}});return{type:"or",clauses:[{type:"is",value:"group"},{type:"is",value:"group_local"}].concat(s()(t))}}var b=Object(l["e"])("fetch user groups and members in the org context",function(e,t,a){var r=a.query,i=a.userIds,s=a.userGroupIds;var o=v(i);var l=f(s);var d=e(Object(c["r"])({searchTerm:r,count:m,query:o}));var b=e(Object(u["j"])({searchTerm:r,count:m,query:l}));return Promise.all([d,b]).then(function(e){var t=n()(e,2),a=t[0],r=t[1],i=void 0===r?[]:r;var s=p.t("Members");var o=p.t("User Groups");var l=h({entities:a,type:"member",label:s});var c=h({entities:i,type:"user_group",label:o});return[l,c]})});b.meta={name:"fetchMembersAndUserGroups",key:"componentsEnterpriseChannelAdministrationUtilitySearchUserGroupsAndMembersFetchMembersAndUserGroups",description:"fetch user groups and members in the org context"};b.propTypes=o["b"].shape({query:o["b"].string,userIds:o["b"].arrayOf(o["b"].string),userGroupIds:o["b"].arrayOf(o["b"].string)}).isRequired;var g=Object(l["e"])("Search for user groups and members in the org context",function(e,t,a){return e(b({query:a}))});g.meta={name:"searchUserGroupsAndMembers",key:"componentsEnterpriseChannelAdministrationUtilitySearchUserGroupsAndMembersSearchUserGroupsAndMembers",description:"Search for user groups and members in the org context"};g.propTypes={query:o["b"].string};var _=g;var y={};Object.defineProperty(y,"getOptionGroup",{get:function e(){return h},set:function e(t){h=t}})},4753:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(48);var c=a.n(l);var u=a(37);var d=a.n(u);var p=a(3);var m=a.n(p);var h=a(5);var v=a.n(h);var f=a(7);var b=a.n(f);var g=a(4);var _=a.n(g);var y=a(8);var k=a.n(y);var O=a(0);var C=a(2);var E=a(22);var S=a(235);var w=a(141);var I=a(21);var j=a(233);var T=a(98);var A=a(73);var N=a(9);var M=a(103);var P=a(82);var R=a(424);var x=a(443);var D=a(460);var F=a(236);var L=a(1304);var B=a(165);var U=a(920);var q=a(1246);var W=a(1838);var H=a(17);var G=a(453);var V=a(105);var K=a(412);var z=a(14);var Q=Object(H["b"])("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs;var i=Object(V["getThreadKey"])(r,n);var s=Object(z["a"])({getState:t,label:"MAYBE-JUMP-THREAD"});var o=t();var l=Object(P["a"])(t());var c=Object(M["j"])(t())||!Object(M["f"])(t());if(l!==K["a"].allThreads||!c){s.info("All Threads not open");return false}var u=Object(G["getThreads"])(o);if(!u){s.info("No threads");return false}var d=Object(C["find"])(u,{threadKey:i});if(!d){s.info("Thread not found");return false}s.info("Requesting "+i);e(Object(G["setFocusRequestedThreadKey"])(i));return true});Q.meta={name:"maybeFocusThreadInAllThreads",key:"actionsMaybeFocusThreadInAllThreadsMaybeFocusThreadInAllThreads",description:"If All Threads is open and the thread is present, request it to be focused via the all-threads-store"};Q.propTypes={channelId:O["b"].string,threadTs:O["b"].string};var Y=Q;var J=a(137);var X=a(557);var Z=a(94);var $=a(187);var ee=a(421);var te=a(42);var ae=a(11);var re=a(32);var ne=a(6);var ie=a(53);var se=a(39);var oe=a(20);var le=a(515);var ce=a(210);var ue=a(1457);var de=a(69);var pe=a(2033);var me=a(861);var he=a(1184);var ve=a(891);var fe=a(1144);var be=250;var ge={oldest:O["b"].string,latest:O["b"].string,timestamps:O["b"].arrayOf(O["b"].string).isRequired,listRenderer:O["b"].func.isRequired,startTs:O["b"].string,startTsOffset:O["b"].number,highlightKey:O["b"].string,requestHistory:O["b"].func,reachedStart:O["b"].bool,reachedEnd:O["b"].bool,layout:O["b"].object,isFileExpanding:O["b"].bool,onVisibleRowsChanged:O["b"].func};var _e={oldest:void 0,latest:void 0,startTs:void 0,startTsOffset:0,highlightKey:void 0,requestHistory:C["noop"],reachedStart:true,reachedEnd:true,layout:void 0,isFileExpanding:false,onVisibleRowsChanged:C["noop"]};var ye=function(e){k()(t,e);function t(e){v()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.loadAround=a.loadAround.bind(a);a.loadPre=a.loadPre.bind(a);a.loadPost=a.loadPost.bind(a);a.focus=a.focus.bind(a);a.onListScrolled=a.onListScrolled.bind(a);a.debouncedOnListScrolled=Object(fe["a"])(a.onListScrolled,150);a.list=null;a.layout=e.layout||new ve["a"];a.layout.setAnchor(e.startTs||false);e.startTsOffset&&(a.layout.anchorOffset=e.startTsOffset);a.layout.setStickToBottom(e.reachedEnd);a.state={isLoading:false};return a}_()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs))}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false);var a=!!t.isFileExpanding&&!this.props.isFileExpanding;a?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd);this.updateVisibleRows()}},{key:"onScroll",value:function e(){this.layout.setAnchor(false);this.debouncedOnListScrolled()}},{key:"onListScrolled",value:function e(){this.updateVisibleRows()}},{key:"getScrollmark",value:function e(){if(!this.list)return null;var t=this.list.getScrollTop();var a=this.layout.shouldStickToBottom(t);var r=this.props.timestamps;var n=this.layout.findAnchor(r,r,t);var i=this.layout.getTop(n)-t;return{mark:n,offset:i,stickToBottom:a}}},{key:"setListRef",value:function e(t){this.list=t}},{key:"updateVisibleRows",value:function e(){var t=this.list.getVisibleRange(void 0,false),a=t.start,r=t.end;var n=this.list.getVisibleRange(void 0,true),i=n.start,s=n.end;this.props.onVisibleRowsChanged(this.props.timestamps.slice(a,r),this.props.timestamps.slice(i,s))}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.latest,i=a.reachedStart,s=a.reachedEnd,o=a.timestamps,l=a.startTs;if(s)return this.loadPre();if(i)return this.loadPost();var c=n||Object(C["first"])(o)||l;var u=r||Object(C["last"])(o)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(be)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.reachedStart,i=a.timestamps,s=a.startTs;if(n)return false;var o=r||Object(C["first"])(i)||s;var l=this.props.requestHistory({latest:o});if(l){l.finally(function(){return Promise.delay(be)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.reachedEnd,i=a.timestamps,s=a.startTs;if(n)return false;this.isLoading=true;var o=r||Object(C["last"])(i)||s;var l=this.props.requestHistory({oldest:o});if(l){l.finally(function(){return Promise.delay(be)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"render",value:function e(){var t=this.props,a=t.reachedStart,r=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:a,reachedEnd:r,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(r["PureComponent"]);ye.displayName="MessageList";var ke=ye;ye.defaultProps=_e;var Oe=a(2035);var Ce=a(551);var Ee=a(2036);var Se=a(1446);var we=a(26);var Ie=a.n(we);var je=a(13);var Te=a.n(je);var Ae=a(61);var Ne=a(495);var Me=a(1460);var Pe=a(68);var Re=a(2077);var xe=a(1683);var De=a(300);var Fe=a(18);var Le=a(922);var Be=a(3778);var Ue={MESSAGE_PANE:"message_pane",THREAD:"thread"};var qe={location:O["b"].oneOf(Object(C["values"])(Ue)).isRequired,children:O["b"].node,channelId:O["b"].string.isRequired,threadTs:O["b"].string,viewContext:O["b"].string,className:O["b"].string,elementProps:O["b"].object,disableFileUploadsPref:O["b"].string,featureAnnounceOnly:O["b"].bool,userCanPostInChannel:O["b"].bool,teamId:O["b"].string,openFileUploadDialog:O["b"].func,filterFilesForUpload:O["b"].func};var We={children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:false,userCanPostInChannel:true,teamId:void 0,openFileUploadDialog:C["noop"],filterFilesForUpload:function e(){return Promise.resolve([])}};var He=function(e){k()(t,e);function t(e){v()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={dragging:false};a.activeElements=new Set;a.containerRef=n.a.createRef();a.onDrop=a.onDrop.bind(a);return a}_()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.containerRef.current;a.addEventListener("dragenter",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault();t.activeElements.add(e.target);1===t.activeElements.size&&t.setState(function(e){return m()({},e,{dragging:true})})});a.addEventListener("dragleave",function(e){e.preventDefault();t.activeElements.delete(e.target);0===t.activeElements.size&&t.setState(function(e){return m()({},e,{dragging:false})})});a.addEventListener("dragover",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault()});a.addEventListener("dragend",function(){t.setState(function(e){return m()({},e,{dragging:false})});t.activeElements.clear()});a.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext,s=a.teamId,o=a.userCanPostInChannel,l=a.featureAnnounceOnly;t.preventDefault();this.setState(function(e){return m()({},e,{dragging:false})});this.activeElements.clear();if(l&&!o)return;var c=t.dataTransfer.files;var u=Object(ce["a"])({viewContext:i,channelId:r,threadTs:n});var d={fileUploadAction:Fe["m"].DRAG_AND_DROP,fileUploadSrc:Fe["n"].LOCAL};t.shiftKey?this.props.filterFilesForUpload({selectedFiles:[].concat(Ie()(c)),channelId:r,threadTs:n}).then(function(e){if(!e||!e.length)return;var t=Object(Le["a"])(s);t.uploadFiles({files:e,shareData:{channelId:r,threadTs:n,metadata:d}})}):this.props.openFileUploadDialog({files:[].concat(Ie()(c)),threadTs:n,initialChannelId:r,inputProxy:u,metadata:d})}},{key:"shouldPreventDrag",value:function e(t){var a=this.props,r=a.disableFileUploadsPref,n=a.featureAnnounceOnly,i=a.userCanPostInChannel;var s=Object(C["get"])(t,"dataTransfer.types");if(!Object(C["includes"])(s.map(function(e){return e.toLowerCase()}),"files"))return true;if("disable_all"===r)return true;if(!n&&!i)return true;return false}},{key:"maybeRenderOverlay",value:function e(){if(!this.state.dragging)return null;var t=this.props.channelId;switch(this.props.location){case Ue.MESSAGE_PANE:return n.a.createElement(Re["a"],{channelId:t});case Ue.THREAD:return n.a.createElement(xe["a"],null);default:return null}}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.className,i=t.elementProps;return n.a.createElement("div",m()({className:Te()("p-file_drag_drop__container",r),ref:this.containerRef},i),a,this.maybeRenderOverlay())}}]);return t}(r["Component"]);He.displayName="FileDragDrop";He.defaultProps=We;var Ge=function e(t,a){var r=a.channelId;return{featureAnnounceOnly:Object(N["isFeatureEnabled"])(t,"feature_announce_only"),disableFileUploadsPref:Object(Ae["a"])(t,"disable_file_uploads"),userCanPostInChannel:Object(Pe["s"])(t,r),teamId:Object(E["b"])(t)}};var Ve=function e(t){return{openFileUploadDialog:function e(){return t(Ne["a"].apply(void 0,arguments))},filterFilesForUpload:function e(){return t(Me["a"].apply(void 0,arguments))}}};var Ke=Object(De["b"])(Object(i["connect"])(Ge,Ve)(He));var ze=a(812);var Qe=a(1038);var Ye=a(155);var Je=a(650);var Xe=a(562);var Ze=a(531);var $e=a(563);var et=a(603);var tt=a(1041);var at=a(552);var rt=a(1042);var nt=a(1305);var it=a(917);var st=a(918);var ot=a(1198);var lt=a(1307);var ct=a(915);var ut=a(1071);var dt=a(1308);var pt=a(1309);var mt=a(2337);var ht=a(2482);var vt=new ne["b"]("message_kit");var ft={msg:O["b"].object.isRequired,className:O["b"].string,highlight:O["b"].bool,clearHighlight:O["b"].func,focused:O["b"].bool,renderActionsOffscreen:O["b"].bool,itemId:O["b"].string};var bt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,itemId:void 0};var gt=function(e){k()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.itemId;var c=Te()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return n.a.createElement(nt["a"],{msg:a},n.a.createElement(it["a"],{msg:a,className:c,highlight:r,clearHighlight:i},n.a.createElement(st["a"],{hovered:s},n.a.createElement(ot["a"],{msg:a,showComment:false,showShare:false,showJump:true,messageContainerType:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside",renderOffscreen:o,itemId:l},n.a.createElement(ut["a"],{msg:a},n.a.createElement(lt["a"],{msg:a},n.a.createElement(ct["a"],{light:n.a.createElement(Je["a"],{msg:a})},n.a.createElement(dt["a"],{msg:a},n.a.createElement(Xe["a"],{msg:a}),"\xa0",n.a.createElement(Ze["a"],{msg:a,full:true,clickable:true},vt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(pt["a"],null,n.a.createElement($e["a"],{msg:a}),n.a.createElement(et["a"],{msg:a,blocksContainerContext:Ye["a"].threads_flexpane}),n.a.createElement(at["b"],{msg:a}),n.a.createElement(tt["a"],{msg:a,blocksContainerContext:Ye["a"].threads_flexpane}),n.a.createElement(rt["a"],{msg:a}))))))))))}}]);return t}(r["PureComponent"]);gt.displayName="ThreadRootMessage";var _t=gt;gt.defaultProps=bt;var yt=a(1833);var kt={msg:O["b"].object.isRequired,className:O["b"].string,highlight:O["b"].bool,clearHighlight:O["b"].func,focused:O["b"].bool,renderActionsOffscreen:O["b"].bool,itemId:O["b"].string};var Ot={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,itemId:void 0};var Ct=function(e){k()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.itemId;var c=Te()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return n.a.createElement(nt["a"],{msg:a},n.a.createElement(it["a"],{msg:a,className:c,highlight:r,clearHighlight:i},n.a.createElement(st["a"],{hovered:s},n.a.createElement(ot["a"],{msg:a,showComment:false,showShare:false,messageContainerType:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o,itemId:l},n.a.createElement(lt["a"],{msg:a,showBroadcast:true},n.a.createElement(ct["a"],{light:n.a.createElement(Je["a"],{msg:a})},n.a.createElement(dt["a"],{msg:a},n.a.createElement(Xe["a"],{msg:a}),"\xa0\xa0",n.a.createElement(Ze["a"],{msg:a,relative:true}),n.a.createElement("br",null),n.a.createElement(pt["a"],null,n.a.createElement(yt["a"],{msg:a},n.a.createElement($e["a"],{msg:a}),n.a.createElement(et["a"],{msg:a,blocksContainerContext:Ye["a"].threads_flexpane}),n.a.createElement(at["b"],{msg:a}),n.a.createElement(tt["a"],{msg:a,blocksContainerContext:Ye["a"].threads_flexpane})),n.a.createElement(rt["a"],{msg:a})))))))))}}]);return t}(r["PureComponent"]);Ct.displayName="ThreadReplyMessage";var Et=Ct;Ct.defaultProps=Ot;var St=a(1320);var wt=a(2025);var It=a(1693);var jt=a(3783);var Tt=new ne["b"]("flexpane");var At={clientTheme:O["b"].oneOf(["light","dark"])};var Nt={clientTheme:"light"};function Mt(e){var t=e.clientTheme;var a="light"===t?cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_@2x_vogue_dark.gif";var r="light"===t?cdn_url+"/80588/img/loading_hash_animation_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_vogue_dark.gif";var i=Tt.t("loading\u2026");var s=r+" 1x, "+a+" 2x";return n.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},n.a.createElement("img",{className:"p-flexpane_loading__spinner",src:a,alt:i,srcSet:s}),n.a.createElement("br",null),i)}Mt.displayName="FlexpaneLoading";Mt.defaultProps=Nt;var Pt=Mt;var Rt=a(2087);var xt=a(2061);var Dt=a(1303);var Ft=a(1401);var Lt=a(4721);var Bt=a(4722);var Ut=a(4491);var qt=a(1077);var Wt=a(176);var Ht=a(152);var Gt=a(44);var Vt=a(54);var Kt=a(3789);var zt=new ne["b"]("threads");var Qt={channelId:O["b"].string,threadTs:O["b"].string,isMpim:O["b"].bool,numMpimMembers:O["b"].number,mpimName:O["b"].string};var Yt={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function Jt(e){var t=e.channelId,a=e.threadTs,r=e.isMpim,i=e.numMpimMembers,s=e.mpimName;var o=void 0;o=r?n.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},n.a.createElement(Vt["c"],{tip:s},n.a.createElement("span",null,zt.t("Direct message with {count} others",{count:i})))):n.a.createElement(Ht["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return n.a.createElement(Gt["a"],{className:"p-threads_flexpane__header_permalink",href:Object(te["constructMsgPermalink"])(t,a)},o)}Jt.displayName="Header";Jt.defaultProps=Yt;function Xt(e,t){var a=t.channelId;var r=Object(I["e"])(e,a);var n={};if(r&&"mpim"===Object(ae["getChannelType"])(r)){n.isMpim=true;var i=Object(ae["getMemberIdsFromMpim"])(r)||[];n.numMpimMembers=i.length-1;n.mpimName=Object(ae["getDisplayNameForChannel"])(e,r)}return n}var Zt=Object(i["connect"])(Xt)(Jt);var $t=a(3791);var ea=new ne["b"]("threads");var ta={replyCount:O["b"].number};var aa={replyCount:0};function ra(e){var t=e.replyCount;var a=Math.max(1,t);var r=ea.t("{count, plural, =1 {# reply} other {# replies}}",{count:a,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return n.a.createElement("div",{className:"p-threads_flexpane__separator"},n.a.createElement("span",{className:"p-threads_flexpane__separator_count"},r),n.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}ra.displayName="Separator";ra.defaultProps=aa;function na(e,t){var a=t.channelId,r=t.threadTs;var n=Object(A["a"])(e,a,r);return{replyCount:Object(te["getReplyCount"])(n)}}var ia=Object(i["connect"])(na)(ra);var sa=a(27);var oa=a(102);var la=a(2483);var ca=new ne["b"]("threads");var ua={tryAgain:O["b"].func};var da={tryAgain:C["noop"]};function pa(e){var t=e.tryAgain;return n.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},n.a.createElement("div",{className:"p-threads_flexpane__error_contents"},n.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},n.a.createElement(oa["b"],{text:":mag:",emojiSize:oa["a"].LARGE})),n.a.createElement("p",{className:"p-threads_flexpane__error_header"},ca.t("Couldn't load thread")),n.a.createElement("p",{className:"p-threads_flexpane__error_body"},ca.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(Gt["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(sa["d"],{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},ca.t("Try Again"))))}pa.displayName="ThreadsError";pa.defaultProps=da;var ma=pa;var ha=a(2037);var va=new ne["b"]("threads");var fa=Object(St["b"])(_t);var ba=Object(St["b"])(Et);var ga={threadTs:O["b"].string,channelId:O["b"].string,teamId:O["b"].string,subscribed:O["b"].bool,lastRead:O["b"].string,maxMarkableTs:O["b"].string,oldest:O["b"].string,latest:O["b"].string,timestamps:O["b"].arrayOf(O["b"].string),reachedStart:O["b"].bool,reachedEnd:O["b"].bool,prevReachedEnd:O["b"].bool,userHasUnreadThreads:O["b"].bool,fileId:O["b"].string,comments:O["b"].array,messages:O["b"].object,startTs:O["b"].string,highlightTs:O["b"].string,highlightKey:O["b"].string,showDragOverlay:O["b"].bool,scrollMarkTs:O["b"].string,scrollMarkOffset:O["b"].number,serializationKey:O["b"].string,clearSerializedDataForKey:O["b"].func,requestHistory:O["b"].func,clearHighlight:O["b"].func,markThread:O["b"].func,primaryView:O["b"].string,windowFocused:O["b"].bool,userAttention:O["b"].string,featureAriaApplicationMode:O["b"].bool,clientTheme:O["b"].string,logInfo:O["b"].func,logWarn:O["b"].func,logError:O["b"].func,clogger:O["b"].object,jumpToMessage:O["b"].func,setFocusRequestedTs:O["b"].func,focusRequested:O["b"].string,setFocusRequested:O["b"].func,maybeFocusThreadInAllThreads:O["b"].func,maybeFocusThreadInAllUnreads:O["b"].func,focusInput:O["b"].string,setFocusInput:O["b"].func,makeMessageSummary:O["b"].func,channel:O["b"].object,channelIsYou:O["b"].bool,channelIsMuted:O["b"].bool,channelHasDraft:O["b"].bool,channelBadgeCount:O["b"].number,isChannelUnavailable:O["b"].bool,unavailableTeamId:O["b"].string,readOnly:O["b"].bool,featureAnnounceOnly:O["b"].bool,isFileExpanding:O["b"].bool,featureOfflineMode:O["b"].bool,isOffline:O["b"].bool,truncateThreadHistory:O["b"].func,impressionLoggingWebGroup:O["b"].string};var _a={threadTs:void 0,channelId:void 0,teamId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,userHasUnreadThreads:false,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:C["noop"],requestHistory:C["noop"],clearHighlight:C["noop"],markThread:C["noop"],primaryView:void 0,windowFocused:false,userAttention:"",featureAriaApplicationMode:false,clientTheme:"light",logInfo:C["noop"],logWarn:C["noop"],logError:C["noop"],clogger:{track:C["noop"]},jumpToMessage:C["noop"],setFocusRequestedTs:C["noop"],focusRequested:void 0,setFocusRequested:C["noop"],maybeFocusThreadInAllThreads:function e(){return false},maybeFocusThreadInAllUnreads:C["noop"],focusInput:null,setFocusInput:C["noop"],makeMessageSummary:C["noop"],channel:void 0,channelIsYou:false,channelIsMuted:false,channelHasDraft:false,channelBadgeCount:0,isChannelUnavailable:false,unavailableTeamId:"",readOnly:false,featureAnnounceOnly:false,isFileExpanding:false,featureOfflineMode:false,isOffline:false,truncateThreadHistory:C["noop"],impressionLoggingWebGroup:"control"};var ya="THREAD-FLEXPANE";var ka=function(e){k()(t,e);_()(t,null,[{key:"getRowsAndKeys",value:function e(t,a){var r=t.threadTs,n=t.reachedStart,i=t.reachedEnd,s=t.prevReachedEnd,o=t.timestamps,l=t.comments,c=t.messages;var u=a.commentsExpanded,d=a.degraded;var p=[];var m=[];if(Object(C["isEmpty"])(o))return{rows:m,keys:p};var h=Object(C["first"])(o)===r;var v=Object(C["without"])(o,r);if(!n&&!d){p.push("loading-start-"+Object(C["first"])(v));m.push({type:"loading"})}if(h){p.push(r);m.push({type:"root",ts:r});if(!Object(C["isEmpty"])(l)){p.push("comments-toggle");m.push({type:"comments-toggle"});u&&l.forEach(function(e){p.push(e.id);m.push({type:"comment",comment:e})})}if(v.length){p.push("separator");m.push({type:"separator"})}}v.forEach(function(e,t){var a=c[e];if(Object(te["isHiddenInThread"])(a))return;p.push(e);m.push({type:"reply",ts:e,prevTs:v[t-1]})});if(i||s){p.push("input");m.push({type:"input"})}else if(!d){p.push("loading-end");m.push({type:"loading"})}return{rows:m,keys:p}}}]);function t(e){v()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.requestHistory=a.requestHistory.bind(a);a.renderRow=a.renderRow.bind(a);a.renderList=a.renderList.bind(a);a.tryAgain=a.tryAgain.bind(a);a.toggleComments=a.toggleComments.bind(a);a.isFocusableItem=a.isFocusableItem.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.clogThreadEvent=a.clogThreadEvent.bind(a);a.onArrowKeyLeft=a.onArrowKeyLeft.bind(a);a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.renderBody=a.renderBody.bind(a);a.renderSubtitle=a.renderSubtitle.bind(a);a.focus=a.focus.bind(a);a.blur=a.blur.bind(a);a.onItemTabWithin=a.onItemTabWithin.bind(a);a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(a);a.keys=null;a.rows=null;a.historyRateLimiter=new Ut["a"];a.listRef=n.a.createRef();a.flexpane=n.a.createRef();a.state={degraded:Object(Ee["a"])(),commentsExpanded:false,hasKeyboardFocus:false,errored:false};e.scrollMarkTs||e.scrollMarkOffset?a.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:a.initialScrollMark={};a.attachMessageImpressionsLogger(e);return a}_()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads();Object(re["a"])()&&this.maybeFocus();var t=this.props,a=t.scrollMarkTs,r=t.scrollMarkOffset,n=t.serializationKey;(a||r)&&n&&this.props.clearSerializedDataForKey(n)}},{key:"componentWillReceiveProps",value:function e(t){var a=Object(V["getThreadKey"])(this.props.channelId,this.props.threadTs);var r=Object(V["getThreadKey"])(t.channelId,t.threadTs);this.state.errored&&a!==r&&this.setState(function(e){return m()({},e,{errored:false})});this.props.teamId!==t.teamId&&this.attachMessageImpressionsLogger(t)}},{key:"shouldComponentUpdate",value:function e(t,a){if(!Object(Wt["a"])(this.state,a))return true;var r=this.props,n=r.messages,i=d()(r,["messages"]);var s=t.messages,o=d()(t,["messages"]);if(!Object(Wt["a"])(i,o))return true;return false}},{key:"componentDidUpdate",value:function e(t){this.checkUnreads();var a=this.props,r=a.threadTs,n=a.channelId;var i=Object(V["getThreadKey"])(n,r);var s=t.threadTs,o=t.channelId;var l=Object(V["getThreadKey"])(o,s);i!==l&&this.historyRateLimiter.reset();l&&i!==l&&this.props.truncateThreadHistory({threadKey:l});this.maybeFocus()}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.focusInput,r=t.channelId,n=t.threadTs;a===Object(V["getThreadKey"])(r,n)&&this.props.setFocusInput(null);this.props.truncateThreadHistory({threadKey:Object(V["getThreadKey"])(r,n)});try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logError(ya,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}delete this.messageImpressionLogger}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onArrowKeyLeft",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.primaryView;if(Object(C["includes"])([me["a"].allUnreads,"Punreads"],i)){this.props.maybeFocusThreadInAllUnreads(Object(V["getThreadKey"])(r,n));return Promise.resolve()}if(i===me["a"].allThreads){var s=this.props.maybeFocusThreadInAllThreads({channelId:r,threadTs:n});if(s)return Promise.resolve()}return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){t.props.setFocusRequestedTs(t.props.threadTs)})}},{key:"onKeyDown",value:function e(t){var a=this;if(!Object(pe["a"])({e:t,isMenuVisible:Object(de["g"])()}))return;var r=Object(ce["a"])({viewContext:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(r){var n=function e(){a.blur();r.focus()};Object(ie["c"])()?setTimeout(n,0):n()}}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onVisibleRowsChanged",value:function e(t,a){var r=this;try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a.map(function(e){return r.props.messages[e]}))}catch(e){this.props.logError(ya,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;if("root"!==a.type&&"reply"!==a.type)return null;return this.props.makeMessageSummary({channelId:this.props.channelId,ts:a.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:a.ts,isFirstDay:false,isLastDay:false},viewContext:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE})}},{key:"attachMessageImpressionsLogger",value:function e(t){this.messageImpressionLogger=new Lt["a"]({teamId:t.teamId,experimentGroup:t.impressionLoggingWebGroup,clogger:t.clogger,messageViewLocation:Bt["a"].THREAD})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(le["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(re["a"])())return this.props.userAttention===ee["a"].MESSAGE_PANE;return Object($["f"])()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logError(ya,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",t)}},{key:"maybeFocus",value:function e(){var t=this.props,a=t.focusRequested,r=t.timestamps,n=t.channelId,i=t.threadTs;if(a===Object(V["getThreadKey"])(n,i)&&!Object(C["isEmpty"])(r)){this.focus();this.props.setFocusRequested(null)}}},{key:"focus",value:function e(){var t=this.listRef.current&&this.listRef.current.list;if(!t)return;this.setState(function(){return{hasKeyboardFocus:true}});var a=t.getInitialActiveItem();if(a){t.scrollToKey(a);t.setActiveItem(a);return}t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.blur()}},{key:"checkUnreads",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.maxMarkableTs,l=t.userAttention,c=t.userHasUnreadThreads,u=t.logInfo;if(!n||!s||!o)return;var d=Object(V["getThreadKey"])(a,r);if(!i||i<o){if(Object(re["a"])()){if(l!==ee["a"].MESSAGE_PANE){u(ya,"Not marking "+d+" to "+o+" because "+l);return}}else if(!Object($["f"])()){u(ya,"Not marking "+d+" to "+o+" because "+Object($["c"])());return}if(!c){u(ya,"Not marking "+d+" to "+o+" because no unread threads yet");return}u(ya,"Marking "+Object(V["getThreadKey"])(a,r)+": "+o);this.props.markThread({channelId:a,ts:r,lastRead:o,reason:"mark-thread-as-read-from-flexpane"})}}},{key:"requestHistory",value:function e(t){var a=this;var r=t.oldest,n=t.latest;var i=this.props,s=i.channelId,o=i.threadTs,e=i.requestHistory,l=i.logError,c=i.logWarn;if(this.historyRateLimiter.isRequestPending({oldest:r,latest:n}))return false;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:r,latest:n})){var u=this.beaconedRateLimit?c:l;u(ya,"Rate-limited thread: "+Object(V["getThreadKey"])(s,o));return false}this.beaconedRateLimit=false;var d=e({oldest:r,latest:n,channelId:s,threadTs:o});d&&this.historyRateLimiter.logHistoryRequest({oldest:r,latest:n,promise:d});return d.then(function(e){a.setState(function(e){return m()({},e,{errored:false})});return e}).catch(function(e){a.setState(function(e){return m()({},e,{errored:true})});return Promise.reject(e)})}},{key:"tryAgain",value:function e(){this.setState(function(e){return m()({},e,{errored:false})})}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;if("loading"===r.type)return false;if("separator"===r.type)return false;if("input"===r.type)return false;return true}},{key:"isListScrollable",value:function e(){var t=this.listRef.current&&this.listRef.current.list;var a=t&&t.layout.getHeightValidity("input");return!a||t.getContentHeight()>t.getContainerHeight()}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props,i=n.channelId,s=n.threadTs,o=n.clogger;o.track(a,m()({parent_message_id:s,channel_id:i,is_threads_view:0,is_flexpane:1},r))}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.itemId;var s=this.props,o=s.channelId,l=s.highlightTs,c=s.threadTs,u=s.comments,d=s.fileId,p=s.focusInput,m=s.featureOfflineMode,h=s.isOffline;var v=this.state.commentsExpanded;var f=this.rows[t];if(!f)return null;var b=this.state.hasKeyboardFocus;switch(f.type){case"separator":return n.a.createElement(ia,{channelId:o,threadTs:c});case"root":return n.a.createElement(fa,{channelId:o,ts:f.ts,highlight:f.ts===l,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:b,itemId:i});case"reply":return n.a.createElement(ba,{channelId:o,ts:f.ts,highlight:f.ts===l,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:b,itemId:i});case"input":return n.a.createElement(Rt["a"],{channelId:o,threadTs:c,focusInputOnMount:p===Object(V["getThreadKey"])(o,c)&&!this.isListScrollable(),viewContext:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin});case"comments-toggle":return n.a.createElement(wt["a"],{commentCount:u.length,expanded:v,toggleList:this.toggleComments});case"comment":return n.a.createElement(It["a"],{comment:f.comment,fileId:d});case"loading":if(m&&h)return n.a.createElement(Ft["a"],null);return n.a.createElement("div",{className:"p-threads_flexpane__loading"},va.t("Loading messages..."));default:return null}}},{key:"renderList",value:function e(a){var r=this;var i=t.getRowsAndKeys(this.props,this.state),s=i.rows,o=i.keys;this.rows=s;this.keys=o;var l=this.state.degraded?Oe["a"]:Ce["a"];var c=this.props,u=c.reachedEnd,d=c.reachedStart,p=c.featureAriaApplicationMode,h=c.channel,v=c.channelId,f=c.channelIsYou,b=c.channelIsMuted,g=c.channelHasDraft,_=c.channelBadgeCount,y=c.threadTs,k=c.readOnly,O=c.featureAnnounceOnly,C=c.featureOfflineMode,E=c.isOffline;var S=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}];var w=Object(ue["a"])({type:Object(ae["getChannelType"])(h),displayName:Object(ae["getDisplayName"])(h),isShared:Object(ae["isExternallySharedChannel"])(h),isOrgShared:Object(ae["isOrgShared"])(h),hasUnreads:!!Object(ae["getUnreadCount"])(h),isArchived:Object(ae["isArchived"])(h),unreadCount:Object(ae["getUnreadCount"])(h),isYou:f,isMuted:b,hasDraft:g,badgeCount:_,isSelected:false,userActive:false,isTyping:false,isThread:true,canPost:!k,featureAnnounceOnly:O});var I=function(){if(!r.rows.length)return null;var e=r.rows.filter(function(e){return"reply"===e.type});var t=e[0];return t?t.ts:y}();var j=Object(V["makeIdForThreadList"])(Object(V["getThreadKey"])(v,y));return n.a.createElement(Qe["a"],null,function(e){var t=e.measureRef,i=e.width,s=e.height;return n.a.createElement("div",{className:"flex_one no_min_height",ref:t},n.a.createElement(l,m()({},a,{id:j,keys:o,width:i,height:s,rowRenderer:r.renderRow,isFocusableItem:r.isFocusableItem,initialActiveItem:I,onFocusEnter:r.onFocusEnter,onItemTabWithin:r.onItemTabWithin,onFocusLeave:r.onFocusLeave,reachedEnd:u,reachedStart:d,ariaLabel:w,getAriaLabelForRow:r.getAriaLabelForRow,persistentKeys:["input"],keyCommands:S,useAriaApplicationMode:p,featureOfflineMode:C,isOffline:E})))})}},{key:"renderMessageList",value:function e(){if(this.props.isChannelUnavailable){var t=this.props,a=t.unavailableTeamId,r=t.channelId;return n.a.createElement(xt["a"],{unavailableTeamId:a,channelId:r,isThread:true})}var i=this.props,s=i.channelId,o=i.threadTs,l=i.oldest,c=i.latest,u=i.timestamps,d=i.startTs,p=i.highlightTs,h=i.highlightKey,v=i.reachedStart,f=i.reachedEnd,b=i.comments,g=i.clientTheme;if(!s||!o)return null;var _=this.state.commentsExpanded;var y={comments:b,commentsExpanded:_,highlightTs:p,highlightKey:h};var k=this.initialScrollMark,O=k.mark,C=k.offset;return n.a.createElement(ke,m()({oldest:l,latest:c,timestamps:u,listRenderer:this.renderList,startTs:O||d,startTsOffset:C,highlightKey:h,requestHistory:this.requestHistory,reachedStart:v,reachedEnd:f,isFileExpanding:this.props.isFileExpanding,clientTheme:g,ref:this.listRef},y,{key:Object(V["getThreadKey"])(s,o),onVisibleRowsChanged:this.onVisibleRowsChanged}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.channelId,i=t.threadTs,s=t.timestamps,o=t.showDragOverlay,l=t.featureOfflineMode,c=t.isOffline,u=t.clientTheme;var d=this.state.errored;if(l&&c&&Object(C["isEmpty"])(s))return n.a.createElement("div",{className:"p-threads_flexpane"},n.a.createElement(Dt["a"],null));if(d)return n.a.createElement("div",{className:"p-threads_flexpane"},n.a.createElement(ma,{tryAgain:this.tryAgain}));var p=n.a.createElement(r["Fragment"],null,this.renderMessageList(),Object(C["isEmpty"])(s)&&n.a.createElement(Pt,{clientTheme:u}),o&&n.a.createElement(xe["a"],null));return Object(re["a"])()?n.a.createElement(Ke,{location:Ue.THREAD,channelId:a,threadTs:i,className:"p-threads_flexpane",viewContext:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},p):n.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},p)}},{key:"renderSubtitle",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;return n.a.createElement(Zt,{channelId:a,threadTs:r})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;if(!a||!r)return null;var i=Object(re["a"])()?C["noop"]:this.focus;var s=Object(re["a"])()?C["noop"]:this.blur;return n.a.createElement(ze["a"],{ref:this.flexpane,focus:this.focus,title:va.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,kbNavOrder:Object(re["a"])()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:i,onBlur:s})}}]);return t}(r["Component"]);ka.displayName="ThreadsFlexpane";ka.defaultProps=_a;var Oa=Object(he["a"])(ka,{getStateToSerialize:C["noop"],getDerivedProps:function e(t){var a=t.instance;if(!a.listRef||!a.listRef.current)return{};var r=a.listRef.current.getScrollmark(),n=r.mark,i=r.offset,s=r.stickToBottom;return{scrollMarkTs:s?"input":n,scrollMarkOffset:s?0:i}}});var Ca=function e(t,a){var r=Object(M["e"])(t)[0];var n=(r||"").split("-"),i=c()(n,2),s=i[0],o=i[1];var l=a.threadTs||o;var u=a.channelId||s;var d=Object(I["e"])(t,u);if(!l||!u)return{};var p=Object(R["getStartTs"])(t)||l;var h=Object(R["getHighlight"])(t),v=h.highlightTs,f=h.highlightKey;var b=Object(V["getThreadKey"])(u,l);var g=Object(w["getPotentiallyOutdatedTimestamps"])(t,b,p),_=g.start,y=g.end,k=g.timestamps,O=g.reachedStart,C=g.reachedEnd,L=g.prevReachedEnd;var B=Object(x["getSubscriptionState"])(t,{channelId:u,ts:l});var U=void 0;var q=void 0;var W=Object(A["a"])(t,u,l);if(W&&W.files&&1===W.files.length){q=W.files[0];var H=Object(T["getFileById"])(t,q);H&&(U=H.comments)}var G={};Object(re["a"])()?G.userAttention=Object(ee["c"])(t):G.windowFocused=Object(S["isWindowFocused"])(t);var K=Object(z["a"])({state:t});var Q=Object(se["a"])({state:t});var Y=Object(qt["isAnyFileExpanding"])(t);return m()({isFileExpanding:Y,threadTs:l,channelId:u,teamId:Object(E["b"])(t),channel:d,subscribed:B&&B.subscribed,lastRead:B&&B.lastRead,maxMarkableTs:Object(ha["a"])(t,u,k),oldest:_,latest:y,timestamps:k,reachedStart:O,reachedEnd:C,prevReachedEnd:L,userHasUnreadThreads:Object(N["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(F["hasUnreadThreads"])(t):Object(D["hasUnreadThreads"])(t),fileId:q,comments:U,messages:Object(A["b"])(t,u)||{},startTs:p,highlightTs:v,highlightKey:f,showDragOverlay:Object(R["getShowDragOverlay"])(t),primaryView:Object(P["a"])(t)},G,{featureAriaApplicationMode:Object(N["isFeatureEnabled"])(t,"feature_aria_application_mode"),logInfo:K.info,logWarn:K.warn,logError:K.error,clogger:Q,channelIsYou:Object(ae["isYou"])(t,d),channelIsMuted:Object(j["isChannelMutedById"])(t,u),channelHasDraft:Object(ae["getHasDraft"])(t,u),channelBadgeCount:Object(I["d"])(t,d),focusRequested:Object(R["getFocusRequested"])(t),focusInput:Object(R["getFocusInput"])(t),isChannelUnavailable:Object(ae["isUnavailable"])(t,d),unavailableTeamId:Object(ae["getUnavailableTeamId"])(t,d),readOnly:Object(ae["isReadOnly"])(t,d),featureAnnounceOnly:Object(N["isFeatureEnabled"])(t,"feature_announce_only"),featureOfflineMode:Object(N["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(J["c"])(t),clientTheme:Object(X["getClientTheme"])(t),impressionLoggingWebGroup:Object(Z["getGroupForUser"])(t,"impression_logging_web")})};function Ea(e){return{requestHistory:function t(){return e(R["requestReplies"].apply(void 0,arguments))},clearHighlight:function t(){return e(R["clearHighlight"].apply(void 0,arguments))},markThread:function t(){return e(x["markThread"].apply(void 0,arguments))},jumpToMessage:function t(){return e(W["a"].apply(void 0,arguments))},setFocusRequestedTs:function t(){return e(B["h"].apply(void 0,arguments))},setFocusRequested:function t(){return e(R["setFocusRequested"].apply(void 0,arguments))},setFocusInput:function t(){return e(R["setFocusInput"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(L["a"].apply(void 0,arguments))},maybeFocusThreadInAllThreads:function t(){return e(Y.apply(void 0,arguments))},maybeFocusThreadInAllUnreads:function t(){return e(U["c"].apply(void 0,arguments))},clearSerializedDataForKey:function t(){return e(q["clearSerializedDataForKey"].apply(void 0,arguments))},truncateThreadHistory:function t(){return e(R["truncateThreadHistory"].apply(void 0,arguments))}}}var Sa=Object(Se["a"])(Oa,{alwaysFetchOnMount:true});var wa=Object(i["connect"])(Ca,Ea)(Sa);var Ia=wa;var ja=a(161);var Ta=function e(t,a){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ja["a"],null,n.a.createElement(Ia,null))),a)};var Aa=Ta;var Na=a(46);Object(Na["a"])("interop.mountThreadsFlexpane",Aa)},4754:function(e,t,a){},4756:function(e,t,a){},4771:function(e,t,a){"use strict";var r=a(17);var n=a(242);var i=Object(r["b"])("Switches to the App Launcher view",function(e){e(Object(n["a"])({id:"Papps"}))});i.meta={name:"openAppLauncherView",key:"actionsOpenAppLauncherViewOpenAppLauncherView",description:"Switches to the App Launcher view"};t["a"]=i},4772:function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"fetchHighlightsListForChannel",function(){return pt});a.d(r,"fetchTopContributorsAndRelatedChannels",function(){return mt});var n={};a.r(n);a.d(n,"setPersistenceHashes",function(){return Ta["a"]});a.d(n,"default",function(){return Ma});a.d(n,"getPersistenceHashes",function(){return Na});var i=a(3);var s=a.n(i);var o=a(37);var l=a.n(o);var c=a(45);var u=a(4502);var d=a(103);var p=a(17);var m=a(22);var h=a(29);var v=a(39);var f=a(418);var b=a(32);var g={},_=g.dispatchActionToAllBootedTeams;var y=Object(p["b"])("Create a delegate object for interop with the desktop app",function(e,t){if(!Object(f["a"])())return;if(!c["isDesktop"]){var a=Object(v["a"])({state:t()});a.track("DESKTOP_SCRIPTS_MISSING");return}window.desktop.delegate||Object.defineProperty(window.desktop,"delegate",{get:function e(){var a=t();var r=Object(d["f"])(a)||Object(m["b"])(a);return window.desktop.delegates&&window.desktop.delegates[r]},configurable:true});k(e,t)});y.meta={name:"createDesktopDelegate",key:"desktopCreateDelegateCreateDesktopDelegate",description:"Create a delegate object for interop with the desktop app"};y.propTypes=null;function k(e,t){var a=Object(m["b"])(t());var r=O(e,t);window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[a]=r}function O(e,t){var a=u["a"].accessibilitySupportChanged,r=u["a"].canOpenURLInWindow,n=u["a"].focusNextWorkspace,i=u["a"].focusPreviousWorkspace,o=u["a"].getCurrentUserId,c=u["a"].getCurrentUserName,d=u["a"].getEnterpriseId,p=u["a"].getThemeValues,m=u["a"].getTokenFromBootData,v=u["a"].getUserPref,f=u["a"].getWebappVersionUid,g=u["a"].handleDeepLinkWithArgs,y=u["a"].handleDeepLinkFromDesktop,k=u["a"].maybeTickleMS,O=u["a"].notificationActivated,C=u["a"].notificationClicked,E=u["a"].openDialog,S=u["a"].openFromCmdF,w=u["a"].recentMessagesFromCurrentChannel,I=u["a"].replyToNotification,j=u["a"].setCurrentMemberPresence,T=u["a"].setFocusedWorkspace,A=u["a"].teamSelectionChanged,N=u["a"].updateState,M=l()(u["a"],["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]);var P=function t(a){return function(){return e(a.apply(void 0,arguments))}};var R=function e(t){return function(){return Object(h["a"])(t.apply(void 0,arguments))}};var x=function t(a){return function(){if(Object(b["a"])())return Object(h["a"])(_(a.apply(void 0,arguments)));return e(a.apply(void 0,arguments))}};var D=function t(a){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a.apply(void 0,[e].concat(r))}};var F=function e(a){return function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return a.apply(void 0,[t()].concat(r))}};var L=function a(r){return function(){for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];return r.apply(void 0,[e,t()].concat(n))}};return s()({accessibilitySupportChanged:P(a),canOpenURLInWindow:F(r),focusNextWorkspace:R(n),focusPreviousWorkspace:R(i),getCurrentUserId:F(o),getCurrentUserName:F(c),getEnterpriseId:F(d),getThemeValues:F(p),getTokenFromBootData:F(m),getUserPref:F(v),getWebappVersionUid:F(f),handleDeepLinkWithArgs:Object(b["a"])()?P(y):g,maybeTickleMS:x(k),notificationActivated:D(O),notificationActivationHandler:function e(t){var a=t.channelId,r=t.messageTs,n=t.threadTs,i=t.teamId;if(Object(b["a"])())return R(T)({teamId:i}).then(function(){return P(C)({channelId:a,messageTs:r,threadTs:n})});return P(C)({channelId:a,messageTs:r,threadTs:n})},openDialog:L(E),openFromCmdF:P(S),recentMessagesFromCurrentChannel:F(w),replyToNotification:P(I),setCurrentMemberPresence:P(j),setFocusedWorkspace:function e(t){return R(T)({teamId:t})},startSearch:P(S),teamSelectionChanged:D(A),updateState:function e(){Object(b["a"])()&&R(N).apply(void 0,arguments);return x(N).apply(void 0,arguments)}},M)}function C(e){var t=e.canOpenURLInWindow,a=e.getCurrentUserId,r=e.getSelectedInputText,n=e.getTokenFromBootData,i=e.notificationActivated,o=e.replyToNotification,c=e.openFromCmdF,u=l()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return s()({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:i,getAPIToken:n,getUserId:a,getSelectedInputTxt:r,searchForTxt:c,sendMsgFromUser:function e(t,a,r,n){return o(t,a,n)}},u)}var E=a(2086);var S=a(4742);var w=a(574);var I=a(545);var j=a(301);var T=a(1642);var A=a(1310);var N=a(581);var M=a(1183);var P=a(1315);var R=a(495);var x=a(914);var D=a(2063);var F=a(1286);var L=a(1700);var B=a(1459);var U=a(1636);var q=a(1677);var W=a(1930);var H=a(1564);var G=a(1407);var V=a(897);var K=a(1942);var z=a(1075);var Q=a(208);var Y=a(1316);var J=a(920);var X=a(1);var Z=a.n(X);var $=a(0);var ee=a(144);var te=a(35);var ae=a(28);var re=a(5);var ne=a.n(re);var ie=a(4);var se=a.n(ie);var oe=a(7);var le=a.n(oe);var ce=a(8);var ue=a.n(ce);var de=a(162);var pe=a(6);var me=new pe["b"]("unavailable_channel");var he={teamName:$["b"].string.isRequired};var ve=function(e){ue()(t,e);function t(){ne()(this,t);return le()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}se()(t,[{key:"render",value:function e(){var t=this.props,a=t.teamName,r=l()(t,["teamName"]);var n=me.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:a});return Z.a.createElement(de["b"],s()({fadeDelay:1e4,type:"error"},r),Z.a.createElement("span",null,n))}}]);return t}(X["PureComponent"]);ve.displayName="UnavailableMemberToast";var fe=ve;var be=Object(p["b"])("Show unavailable member toast",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId;var n=t();var i=Object(te["j"])(n,r);var s=Object(ae["getTeamDisplayName"])(i);return e(Object(ee["enqueueToast"])({element:Z.a.createElement(fe,{type:"error",teamName:s})}))});be.meta={name:"showUnavailableMemberToast",key:"actionsShowUnavailableMemberToastShowUnavailableMemberToast",description:"Show unavailable member toast"};var ge=be;var _e=a(813);var ye=a(2039);var ke=a(1684);var Oe=a(233);var Ce=a(2040);var Ee=a(1157);var Se=a(756);var we=a(46);var Ie=a(855);var je=a(1267);var Te=a(453);var Ae=a(460);var Ne=a(1937);var Me=a(1580);var Pe=a(1248);var Re=a(9);var xe=a(336);var De=a(893);var Fe=a(1447);var Le=a(604);var Be=a(1062);var Ue=a(899);var qe=a(338);var We=a(557);var He=a(851);var Ge=a(391);var Ve=a(1344);var Ke=a(1149);var ze=a(244);var Qe=a(203);var Ye=a(1650);var Je=a(1938);var Xe=a(1291);var Ze=a(318);var $e=a(372);var et=a(94);var tt=a(587);var at=a(304);var rt=a(787);var nt=a(1260);var it=a(1290);var st=a(879);var ot=a(2);var lt=a(14);var ct=a(384);var ut=a(167);var dt=a(1292);var pt=Object(p["b"])("Fetch highlights items list for channel",function(e,t,a){return e(Object(dt["c"])(a)).then(function(t){var r=Object(ot["get"])(t,"highlightMsgs.messages",[]);if(Object(ot["isEmpty"])(r))return[];var n=e(Object(ct["a"])({imsgs:r,channelId:a}));e(Object(ut["a"])(n));return n}).catch(function(e){Object(lt["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"});throw e})});pt.meta={name:"fetchHighlightsListForChannel",key:"highlightsStoreFetchHighlightsListForChannel",description:"Fetch highlights items list for channel"};pt.propTypes={channelId:$["b"].string};var mt=Object(p["b"])("Fetch highlights items list for channel",function(e,t,a){return e(Object(dt["d"])(a)).then(function(e){var t=Object(ot["get"])(e,"resp.top_contributors.users",[]);var a=Object(ot["get"])(e,"resp.similar_channels.channels",[]);return{topContributors:t,similarChannels:a}}).catch(function(e){Object(lt["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"});throw e})});mt.meta={name:"fetchTopContributorsAndRelatedChannels",key:"highlightsStoreFetchTopContributorsAndRelatedChannels",description:"Fetch highlights items list for channel"};mt.propTypes={channelId:$["b"].string};var ht=a(184);var vt=a(1187);var ft=a(1072);var bt=a(1077);var gt=a(1027);var _t=a(1412);var yt=a(1939);var kt=a(329);var Ot=a(582);var Ct=a(41);var Et=a(501);var St=a(1651);var wt=a(1032);var It=a(782);var jt=a(1438);var Tt=a(1263);var At=a(252);var Nt=a(292);var Mt=a(1429);var Pt=a(565);var Rt=a(243);var xt=a(1940);var Dt=a(880);var Ft=a(277);var Lt=a(202);var Bt=a(410);var Ut=a(70);var qt=a(926);var Wt=a(883);var Ht=a(237);var Gt=a(443);var Vt=a(424);var Kt=a(607);var zt=a(1246);var Qt=a(1653);var Yt=a(236);var Jt=a(769);var Xt=a(1941);var Zt=a(1579);var $t=a(183);var ea=a(159);var ta=a(1424);var aa=a(257);var ra=a(585);var na=a(580);var ia=a(213);var sa=a(916);var oa=a(221);var la=a(454);var ca=a(770);var ua=a(1685);var da=a(1427);var pa=a(1150);var ma=a(1648);var ha=a(317);var va=a(1581);var fa=a(283);var ba=a(422);var ga=a(1371);var _a=a(1391);var ya=a(337);var ka=a(1049);var Oa=a(331);var Ca=a(235);var Ea=a(141);var Sa=a(601);var wa=a(98);var Ia=a(4774);var ja=a(2041);var Ta=a(1652);var Aa=a(15);var Na=Object(Aa["b"])(function(e){return e&&e.persistenceHashes});Na.meta={name:"getPersistenceHashes",key:"persistenceHashesStorePersistenceHashesSelectorsGetPersistenceHashes"};var Ma=ja["a"];var Pa={accessibility:Ie,activity:je,allThreads:Te,allUnreads:Ae,appsBrowser:Ne,appsInChannels:Me,atMentionInviteWarningCoachmark:Pe,bootData:Re,canInteract:xe,cfm:De,channelBrowser:Fe,channelLoading:Le,channelPrefixes:Be,channelSidebarFolders:Ue,channelSidebar:qe,clientTheme:We,composerUi:He,consistency:Ge,customEmoji:Ve,deletedMessages:Ke,desktop:ze,dnd:Qe,ekmChanges:Ye,emailRender:Je,enablePopupsBanner:Xe,ephemeralMessages:Ze,expandables:$e,experiments:et,fileRefresh:tt,fileUpload:at,filesFlexpane:rt,flannelUrl:nt,globalNav:it,help:st,highlights:r,imports:ht,inbox:vt,incrementalBoot:ft,inlineFilePreviews:bt,invites:gt,lastUsedSlashCommand:_t,memberDirectoryFlexpane:yt,messageEdit:kt,messagePaneBanner:Ot,modal:Ct,navigationHistory:Et,noop:St,openPopoversCountUi:wt,pendingFiles:It,pendingOpenChannel:jt,persistedApiCalls:Tt,pins:At,presence:Nt,reactionsToast:Mt,recentlySharedFilesPicker:Pt,searchAutocomplete:Rt,searchChannelsUsers:xt,searchInProductEducation:Dt,searchInputBox:Ft,searchResults:Lt,searchSession:Bt,socket:Ut,stars:qt,tabs:Wt,teamCreation:Ht,threadSub:Gt,threadsFlexpane:Vt,toast:ee,typing:Kt,uiSerialization:zt,unfurls:Qt,unreadCounts:Yt,userGroupsFlexpane:Jt,usersCounts:Xt,whatsNew:Zt,checkoutFlow:$t,pricingPlans:ea,searchUi:ta,unreadsView:{refreshAllUnreads:J["b"]}};var Ra={adminMembers:aa,appPermissions:ra,appProfiles:na,apps:ia,blocks:sa,bots:oa,customizeEmoji:la,developerActions:ca,developerApps:ua,environment:da,idpGroups:pa,lastNetworkSend:ma,memberCounts:ha,membershipOrdered:va,membership:fa,messagesMeta:ba,notifications:ga,paidFeatures:_a,reactions:ya,telemetry:ka,userGroupMembership:Oa,window:Ca,channelHistory:Ea,persistenceHashes:n};Object(we["a"])("interop.redux",{configureStore:E["a"],defaultReducers:S,createDesktopDelegate:y,actions:{sendMessage:w["d"],prepareAndSendMessage:w["a"],saveMessageEdit:T["a"],removeMessageAndTimestamp:I["a"],openCustomStatusDialog:A["a"],openPrefsModal:N["a"],openChannelNotificationPrefsModal:P["a"],openRequestToJoinWorkspacePermalinkDialog:G["c"],openFileUploadDialog:R["a"],openShareDialog:x["a"],getChannelIdForSharing:F["a"],openRenameFileDialog:L["a"],openCreateGDocDialog:D["a"],openSnippetDialog:B["a"],universalSearchSetVisible:U["a"],clearSearchInput:q["a"],editLastUserMessageText:W["a"],maybeAnimateDeleteMessage:H["a"],loadEmoji:Y["loadEmoji"],showUnavailableMemberToast:ge,setEnterpriseId:z["a"],changeReactionFromUserAction:M["a"],openChannelBrowser:_e["a"]},features:Pa,getDelegateForLegacy:C,middleware:{socketManager:j},models:s()({},Ra,{channelsMeta:{channelNamesToIds:ye,inviters:ke,mutedChannels:Oe,needsApiMarking:Ce,needsCreatedMessage:Ee,prqMetrics:Se},files:s()({},Sa,wa,Ia),emoji:s()({},Ra.emoji,V,Q,Y,{reducer:K["a"]})}),selectors:{getCurrentModals:Ct["getCurrentModals"]}})},4773:function(e,t,a){"use strict";a.d(t,"d",function(){return h});a.d(t,"e",function(){return v});a.d(t,"c",function(){return f});a.d(t,"b",function(){return b});a.d(t,"a",function(){return g});var r=a(49);var n=a.n(r);var i=a(10);var s=a.n(i);var o=a(17);var l=a(0);var c=a(239);var u=a(1399);var d=a(21);var p=a(1262);var m=void 0;var h=Object(o["b"])("Updates the Orgs custom email preference",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a,n){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(r["resolve"])(t(Object(c["w"])({prefs:{custom_contact_email:n.email}})));case 2:t(Object(u["b"])({pref:"custom_contact_email",value:n.email||""}));case 3:case"end":return a.stop()}},e,m)}));return function(t,a,r){return e.apply(this,arguments)}}());h.meta={name:"setCustomEmailPref",key:"prefsStoreEnterpriseThunksSetCustomEmailPref",description:"Updates the Orgs custom email preference"};h.propTypes={newContactEmail:l["b"].string.isRequired};var v=Object(o["b"])("Updates the Orgs custom email preference",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.enabled;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(r["resolve"])(t(Object(c["w"])({prefs:{workflow_builder_enabled:i}})));case 2:t(Object(u["b"])({pref:"workflow_builder_enabled",value:i}));case 3:case"end":return a.stop()}},e,m)}));return function(t,a,r){return e.apply(this,arguments)}}());v.meta={name:"toggleWorkflowBuilderEnabled",key:"prefsStoreEnterpriseThunksToggleWorkflowBuilderEnabled",description:"Updates the Orgs custom email preference"};v.propTypes={enabled:l["b"].bool.isRequired};var f=Object(o["b"])("Sets and updates an enterprise org pref",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.pref,o=n.value;var l,d;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(r["resolve"])(t(Object(c["w"])({prefs:s()({},i,o)})));case 2:l=a.sent;d=l.prefs;t(Object(u["b"])({pref:i,value:d.org_prefs[i]}));return a.abrupt("return",Promise.resolve());case 6:case"end":return a.stop()}},e,m)}));return function(t,a,r){return e.apply(this,arguments)}}());f.meta={name:"setAndUpsertOrgPref",key:"prefsStoreEnterpriseThunksSetAndUpsertOrgPref",description:"Sets and updates an enterprise org pref"};f.propTypes={pref:l["b"].string.isRequired,value:l["b"].string.isRequired};var b=Object(o["b"])("Sets and updates an enterprise locked org pref",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.pref,o=n.value;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(r["resolve"])(t(Object(c["v"])({prefs:s()({},i,o)})));case 2:t(Object(u["a"])({pref:i,value:o}));case 3:case"end":return a.stop()}},e,m)}));return function(t,a,r){return e.apply(this,arguments)}}());b.meta={name:"setAndUpsertLockedOrgPref",key:"prefsStoreEnterpriseThunksSetAndUpsertLockedOrgPref",description:"Sets and updates an enterprise locked org pref"};b.propTypes={pref:l["b"].string.isRequired,value:l["b"].any};var g=Object(o["b"])("adds new default channel and updates the list",function(){var e=Object(r["method"])(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channel,n=a.isMandatory,i=a.prefs,s=a.reason;e(Object(c["a"])({channel:r,isMandatory:n,prefs:i,reason:s}));var o=Object(p["d"])(t());o=o.concat(Object(d["e"])(t(),r,false));e(Object(u["d"])({orgDefaultChannels:o}))});return function(t,a,r){return e.apply(this,arguments)}}());g.meta={name:"setAndUpsertDefaultChannel",key:"prefsStoreEnterpriseThunksSetAndUpsertDefaultChannel",description:"adds new default channel and updates the list"};g.propTypes={channel:l["b"].string.isRequired,isMandatory:l["b"].bool.isRequired,prefs:l["b"].object.isRequired,reason:l["b"].string.isRequired}},4782:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(39);var c=a(14);var u=a(559);var d=a(1667);var p=a(73);var m=a(2017);var h=a(545);var v=a(221);var f=a(25);var b=a(22);var g=a(35);var _=a(21);var y=a(98);var k=a(38);var O=a(411);var C=a(422);var E=a(815);var S=a(2014);var w=a(457);var I=a(329);var j=a(9);var T=a(252);var A=a(11);var N=a(42);var M=a(371);var P=a(1451);var R=a(1946);var x=a(32);var D=a(10);var F=a.n(D);var L=a(48);var B=a.n(L);var U=a(5);var q=a.n(U);var W=a(4);var H=a.n(W);var G=a(7);var V=a.n(G);var K=a(8);var z=a.n(K);var Q=a(0);var Y=a(1);var J=a.n(Y);var X=a(13);var Z=a.n(X);var $=a(652);var ee=a(527);var te=a(579);var ae=a(2018);var re=a(1830);var ne=a(62);var ie=a(20);var se=a(853);var oe=a(269);var le=a(560);var ce=a(209);var ue=a(540);var de=a(176);var pe=a(6);var me=a(2015);var he=a(1445);var ve=a(458);var fe=a(187);var be=a(2019);var ge=a(1295);var _e=a(27);var ye=a(763);var ke=a(191);var Oe=a(2070);var Ce=a(118);var Ee=a(54);var Se=a(433);var we=a(923);var Ie=a(1317);var je=a(2012);var Te=a(23);var Ae=a(4795);var Ne=a(1070);var Me=a(155);var Pe=a(552);var Re=a(2094);var xe=a(919);var De=a(2078);var Fe=a(913);var Le=a(1994);var Be=a(1993);var Ue=a(2066);var qe=a(4801);var We=a(2013);var He=a(2095);var Ge=a(2069);var Ve=a(1464);var Ke=a(97);var ze=a(2021);var Qe=a(2022);var Ye=a(456);var Je={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var Xe={isPinned:Q["b"].bool,isStarred:Q["b"].bool,isEphemeral:Q["b"].bool,isCustomResponse:Q["b"].bool,isSliHighlight:Q["b"].bool,isSelfIm:Q["b"].bool,isSlackbotIm:Q["b"].bool,primaryType:Q["b"].oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:Q["b"].shape({loading:Q["b"].bool,isHighlight:Q["b"].bool,feedbackOptions:Q["b"].object,justification:Q["b"].string,feedback:Q["b"].string}),isHovered:Q["b"].bool,channelId:Q["b"].string,ts:Q["b"].string,currentUserId:Q["b"].string,pinnedByMemberId:Q["b"].string,featureSonicInputs:Q["b"].bool.isRequired,showStarredItemsList:Q["b"].func};var Ze={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:s["noop"]};var $e=function(e){z()(t,e);function t(e){q()(this,t);var a=V()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderHighlight=a.renderHighlight.bind(a);a.renderStarButton=a.renderStarButton.bind(a);return a}H()(t,[{key:"renderHighlight",value:function e(){var t=this.props,a=t.sliHighlight,r=t.channelId,n=t.ts,i=t.isHovered;if(!Object(C["shouldShowHighlightsLabel"])(a))return null;return J.a.createElement(Qe["a"],{channelId:r,ts:n,isHovered:i,sliHighlight:a})}},{key:"renderPinnedBy",value:function e(t){return J.a.createElement(Ye["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var a=t.text;return J.a.createElement(_e["c"],{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},a)}},{key:"render",value:function e(){var t=this.props,a=t.primaryType,r=t.isPinned,n=t.isStarred,i=t.isEphemeral,s=t.isCustomResponse,o=t.isSliHighlight,l=t.isSelfIm,c=t.isSlackbotIm,u=t.currentUserId,d=t.pinnedByMemberId,p=t.featureSonicInputs;var m=Object(ze["a"])({isPinned:r,isStarred:n,isEphemeral:i,isCustomResponse:s,isSliHighlight:o,isSelfIm:l,isSlackbotIm:c,currentUserId:u,pinnedBy:d,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!m)return null;var h=Je[a];var v=Z()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":p});return J.a.createElement("div",{className:"c-message__label"},J.a.createElement("div",{className:v},h&&J.a.createElement(Te["b"],{type:h,className:"c-message__label__icon",size:"inherit",inline:true})),J.a.createElement("div",{className:"c-message__label__text"},m))}}]);return t}(Y["PureComponent"]);$e.displayName="MessageLabel";$e.defaultProps=Ze;var et=function e(t){return{featureSonicInputs:Object(j["isFeatureEnabled"])(t,"feature_sonic_inputs")}};var tt=function e(t){return{showStarredItemsList:function e(){return t(Ke["k"].apply(void 0,arguments))}}};var at=Object(i["connect"])(et,tt)($e);var rt=a(3610);var nt=new pe["b"]("message");var it=200;var st=20;var ot=10;var lt="theme_install_button";var ct={quote:true,pre:true};var ut={logger:Q["b"].object,message:Q["b"].object,ts:Q["b"].string,messageNotFound:Q["b"].bool,channelId:Q["b"].string,alertType:Q["b"].string,subtype:Q["b"].string,text:Q["b"].string,noSpecials:Q["b"].bool,theme:Q["b"].oneOf(["dense","light"]),userId:Q["b"].string,botId:Q["b"].string,appId:Q["b"].string,username:Q["b"].string,hasAdHocSender:Q["b"].bool,reactionKey:Q["b"].string,reactionKeyForInitialFileComment:Q["b"].string,replies:Q["b"].arrayOf(Q["b"].shape({ts:Q["b"].string,user:Q["b"].string})),replyCount:Q["b"].number,replyUsers:Q["b"].arrayOf(Q["b"].string),replyUsersCount:Q["b"].number,latestReply:Q["b"].string,threadsEverythingPref:Q["b"].bool,expandInlineImgsPref:Q["b"].bool,expandNonMediaAttachmentsPref:Q["b"].bool,threadTs:Q["b"].string,attachments:Q["b"].arrayOf(Q["b"].shape({color:Q["b"].string,fallback:Q["b"].string})),fileId:Q["b"].string,fileIds:Q["b"].arrayOf(Q["b"].string),comment:Q["b"].shape({id:Q["b"].string,user:Q["b"].string,comment:Q["b"].string,is_starred:Q["b"].bool}),isUpload:Q["b"].bool,showUser:Q["b"].bool,isFileFollowup:Q["b"].bool,isEditing:Q["b"].bool,isHovered:Q["b"].bool,maybeStartEditingMessage:Q["b"].func,edited:Q["b"].shape({ts:Q["b"].string,user:Q["b"].string}),isLast:Q["b"].bool,rollup:ne["a"].Rollup(),logMessage:Q["b"].func,setUnreadPoint:Q["b"].func,isStarred:Q["b"].bool,isStandalone:Q["b"].bool,isPinned:Q["b"].bool,currentUserId:Q["b"].string,pinnedByMemberId:Q["b"].string,sliHighlight:Q["b"].shape({loading:Q["b"].bool,isHighlight:Q["b"].bool,feedbackOptions:Q["b"].object,justification:Q["b"].string,feedback:Q["b"].string}),isEphemeral:Q["b"].bool,isRichTextMessage:Q["b"].bool,shouldRenderBlocks:Q["b"].bool,isDeleting:Q["b"].bool,icons:Q["b"].shape({emoji:Q["b"].string}),botProfile:Q["b"].object,slackbotFeels:Q["b"].string,fadeAwayHighlight:Q["b"].bool,doneHighlighting:Q["b"].func,isUnprocessed:Q["b"].bool,showResend:Q["b"].bool,showCancel:Q["b"].bool,sourceTeamId:Q["b"].string,resendMsg:Q["b"].func,removeMsg:Q["b"].func,shouldJumpToTimestamp:Q["b"].bool,isSelfIm:Q["b"].bool,isSlackbotIm:Q["b"].bool,isTombstonedMessage:Q["b"].bool,isEKMError:Q["b"].bool,teamDomain:Q["b"].string,featureTinyspeck:Q["b"].bool.isRequired,featureHideUnfurlUrls:Q["b"].bool.isRequired,featureAttachmentsV2:Q["b"].bool,featureBlockKitRefactor:Q["b"].bool,channelSessionId:Q["b"].string,previousMessageIsPinned:Q["b"].bool,previousMessageIsEphemeral:Q["b"].bool,previousMessageIsStarred:Q["b"].bool,previousMessageSubtype:Q["b"].string,previousMessageSliHighlight:Q["b"].object,previousMessagePinnedByMemberId:Q["b"].string,renderActions:Q["b"].bool,renderActionsOffscreen:Q["b"].bool,messageContainerType:Q["b"].string,ariaAssertive:Q["b"].bool,blocks:ne["a"].BlockKitBlocks,serviceTeamId:Q["b"].string,featureSonicInputs:Q["b"].bool,clogMessageClick:Q["b"].func,clogUserClick:Q["b"].func,isThreadExpanded:Q["b"].bool,threadListId:Q["b"].string,showThreadIfThreadable:Q["b"].func,blocksContainerContext:Q["b"].oneOf(Object(s["values"])(Me["a"])),itemId:Q["b"].string,hasKeyboardFocusWithin:Q["b"].bool,onFocus:Q["b"].func,onBlur:Q["b"].func};var dt={logger:{info:s["noop"],warn:s["noop"],error:s["noop"]},message:null,ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:s["noop"],edited:null,isLast:false,rollup:null,logMessage:s["noop"],setUnreadPoint:s["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isRichTextMessage:false,shouldRenderBlocks:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:s["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:s["noop"],removeMsg:s["noop"],shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,isTombstonedMessage:false,isEKMError:false,featureAttachmentsV2:false,teamDomain:void 0,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:false,clogMessageClick:s["noop"],clogUserClick:s["noop"],isThreadExpanded:false,threadListId:void 0,showThreadIfThreadable:s["noop"],blocksContainerContext:Me["a"].message,hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"],featureBlockKitRefactor:false,itemId:void 0};var pt=function(e){z()(t,e);function t(e){q()(this,t);var a=V()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.onContainerClick=a.onContainerClick.bind(a);a.onTimestampClick=a.onTimestampClick.bind(a);a.startEditing=a.startEditing.bind(a);a.onMouseEnter=a.onMouseEnter.bind(a);a.onMouseLeave=a.onMouseLeave.bind(a);a.onMenuToggle=a.onMenuToggle.bind(a);a.startHighlightingTimer=a.startHighlightingTimer.bind(a);a.onDoneHighlighting=a.onDoneHighlighting.bind(a);a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(a);a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(a);a.resendMsg=a.resendMsg.bind(a);a.removeMsg=a.removeMsg.bind(a);a.formatInlineAttachmentMaybe=a.formatInlineAttachmentMaybe.bind(a);a.formatThemeInstallButton=a.formatThemeInstallButton.bind(a);a.customFormatHandler=a.customFormatHandler.bind(a);a.customContentHandler=a.customContentHandler.bind(a);a.clogLinkClick=a.clogLinkClick.bind(a);a.clogUserClick=a.clogUserClick.bind(a);a.shouldShowAttachment=a.shouldShowAttachment.bind(a);a.messageRef=null;a.deleteAnimation=null;a.hasDisplayedContent=true;a.inlineAttachmentsKey=0;a.setAttachmentsSorted();a.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null};return a}H()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!a&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(ve["a"])(t)&&!Object(me["a"])(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var a=this;if(!t){setTimeout(function(){a.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:a}},r)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(fe["q"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=a.attachments,n=a.text;var i=Object(s["partition"])(Object(s["map"])(Object(s["filter"])(r,this.shouldShowAttachment),oe["b"]),function(e){return t.isInlineImage(e,n)}),o=B()(i,2),l=o[0],c=o[1];this.attachmentsInline&&l&&!Object(de["a"])(this.attachmentsInline,l,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=l;this.attachmentsBelow=c}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+lt+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,a=t.attachments,r=t.featureHideUnfurlUrls;if(!r)return[];return Object(s["compact"])(Object(s["map"])(Object(s["map"])(Object(s["filter"])(Object(s["map"])(Object(s["filter"])(a,this.shouldShowAttachment),oe["b"]),"isMsgUnfurl"),"fromUrl"),s["unescape"]))}},{key:"getResendText",value:function e(){var t=this.props.isEKMError;if(t)return nt.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return nt.t("Slack couldn\u2019t send this message")}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var a=t?t.message:"";var r=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;var s=n.logger;s.error("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+a);r&&s.error(r)}},{key:"clogLinkClick",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.ts,i=a.channelId,s=a.userId,o=a.botId;var l={ts:r,user:s,channel:i,bot_id:o};var c=n()({},t,{request_id:null});"user_link"===t.type?this.props.clogUserClick({msg:l,payload:c}):this.props.clogMessageClick({msg:l,payload:c})}},{key:"clogUserClick",value:function e(t){this.clogLinkClick(n()({type:"user_link"},t))}},{key:"isInlineImage",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return a&&-1!==o.a.unescape(a).indexOf(t.fromUrl)&&Object(Se["m"])(t)}},{key:"shouldShowAttachment",value:function e(t){var a=this.props,r=a.text,n=a.blocks,i=a.subtype,s=a.isStandalone,o=a.expandInlineImgsPref,l=a.expandNonMediaAttachmentsPref,c=a.isRichTextMessage;return Object(te["h"])({attachment:t,messageText:r,messageBlocks:n,messageSubtype:i,messageIsStandalone:s,expandInlineImgsPref:o,expandNonMediaAttachmentsPref:l,isRichTextMessage:c})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,a=t.isStandalone;return e&&!a}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(se["a"])({fromValue:t,toValue:0,duration:it,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,a=t.maybeStartEditingMessage,r=t.channelId,n=t.ts;a({channelId:r,ts:n,scroll:true})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var a=t.item,r=t.getDefaultOutput;var i=this.props,l=i.ts,c=i.channelId,u=i.sourceTeamId;var d=a.url;var p=Object(s["find"])(this.attachmentsInline,{fromUrl:o.a.unescape(d)});if(!p)return r();return J.a.createElement(Y["Fragment"],null,r(),J.a.createElement(ye["a"],n()({},p,{messageTs:l,activeChannelId:c,sourceTeamId:u,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var a=t.item;var r=a.contents[0].text.replace(/\s/g,"").split(",");return J.a.createElement("div",{className:"c-message__theme_button_container"},J.a.createElement(Ve["a"],{colors:r,clogLinkClick:this.clogLinkClick}))}},{key:"customContentHandler",value:function e(t){var a=this.props.edited;var r=t;var n=this.getUrlsToHide();n.length&&(r=Object(Re["a"])({content:t,urls:n}));if(a){var i=o.a.last(r)||{};r.push({type:"custom_edited_label",omitWhitespace:!!ct[i.type]})}this.hasDisplayedContent=!!r.length;return r}},{key:"customFormatHandler",value:function e(t){var a=t.item,r=t.getDefaultOutput;var n=void 0;"link"===a.type?n=a.url===lt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===a.type&&(n=this.renderEditedLabel({omitWhitespace:a.omitWhitespace}));return n||r()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(le["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(le["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,a=t.showResend,r=t.showCancel;return a||r}},{key:"resendMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId;this.props.resendMsg(r,a)}},{key:"removeMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:r,ts:a,broadcastDelete:s})}},{key:"shouldShowMessageLabel",value:function e(t){var a=t.labelTypes;var r=this.props,n=r.showUser,i=r.isFileFollowup,s=r.pinnedByMemberId,l=r.previousMessageIsStarred,c=r.previousMessageIsPinned,u=r.previousMessageIsEphemeral,d=r.previousMessageSubtype,p=r.previousMessageSliHighlight,m=r.previousMessagePinnedByMemberId;if(o.a.isEmpty(a))return false;if(a.sliHighlight)return true;if(!n||i){var h=Object(re["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(de["a"])(a,h))return a.isPinned&&h.isPinned&&m!==s}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isHiddenFromCopy,r=void 0!==a&&a;var i=this.props,s=i.teamDomain,o=i.channelId,l=i.ts,c=i.threadTs,u=i.isStandalone,d=i.isTombstonedMessage;if(!l||!o||d)return null;var p=void 0;var m=void 0;if(!u){p=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:s,channelId:o,ts:l,threadTs:c});m=this.onTimestampClick}var h={};r&&(h["data-stringify-text"]="");return J.a.createElement(Fe["b"],n()({timestamp:l,relative:false,full:false,link:p,onClick:m},h))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return J.a.createElement("div",{className:"c-message__tombstone_icon"},J.a.createElement(Te["a"],{type:"trash",align:"top"}));var a=this.props,r=a.userId,n=a.hasAdHocSender,i=a.botId,s=a.botProfile,o=a.isStandalone,l=a.icons,c=a.slackbotFeels,u=a.isTombstonedMessage;return J.a.createElement(ke["b"],{className:"c-message__avatar",userId:r,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:c,size:t,icons:l,isInteractive:!u&&!o,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){var t=Z()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return J.a.createElement("div",{className:Z()(t,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return J.a.createElement("div",{className:t},this.renderAvatar())}return J.a.createElement("div",{className:t},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.showUser,r=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;var o=Z()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return J.a.createElement("div",{className:o,"data-qa":"message_content"},a&&this.renderContentHeader(),"light"===r&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!n&&!this.isTombstone()&&this.renderReactions(i),!n&&!this.isTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.isUpload,o=t.isStandalone,l=t.isTombstonedMessage,c=t.botProfile;if(this.isTombstone())return null;var u=l?Object(he["a"])({upload:s}):void 0;return J.a.createElement("div",{className:"c-message__content_header"},J.a.createElement(xe["a"],{overrideNameText:u,userId:a,botId:r,username:n,isInteractive:!o&&!l,botProfile:c,clogLinkClick:this.clogUserClick})," ","light"===i&&this.renderTimestamp(),"dense"===i&&J.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),J.a.createElement("br",null)),"dense"===i&&"\xa0","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||s||"thread_broadcast"!==i)return null;return J.a.createElement(qe["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||!r||s||"thread_broadcast"!==i)return null;return J.a.createElement(We["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.omitWhitespace,r=void 0!==a&&a;var n=this.props.edited;var i=n.ts;var s=J.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!r&&"\xa0",nt.t("(edited)"),!r&&"\xa0");if(i){var o=nt.t("{date} at {time}",{date:Object(ue["a"])(i,{shortenMonth:true}),time:Object(ce["a"])(i)});return J.a.createElement(Ee["c"],{key:"edited",delay:Ee["a"],tip:o},s)}return s}},{key:"renderReplyBar",value:function e(){var t=this.props,a=t.replies,r=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,l=t.threadTs,c=t.isThreadExpanded,u=t.threadListId,d=t.showThreadIfThreadable;if(!o||!r)return null;return J.a.createElement(De["a"],{channelId:o,threadTs:l,replies:a,replyCount:r,replyUsers:n,replyUsersCount:i,latestReply:s,isThreadExpanded:c,threadListId:u,showThreadIfThreadable:d})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype)return null;if(!t)return null;return J.a.createElement(Oe["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,r=a.ts,i=a.channelId,o=a.blocks,l=a.text,c=a.blocksContainerContext,u=a.sourceTeamId;var d=this.attachmentsBelow;if(!d||!d.length)return null;var p=st;var m=Object(s["map"])(d,function(e,a){var s=e.id||a+1;var d=e.botId||t.props.botId;e.blocks&&(p=ot);return J.a.createElement(ye["a"],n()({},e,{service:d,messageTs:r,activeChannelId:i,sourceTeamId:u,key:s,clogLinkClick:t.clogLinkClick,botProfile:t.props.botProfile,isOnlyMessageContent:!t.hasDisplayedContent||!o&&!l,blocksContainerContext:c}))});var h=m.splice(p);return J.a.createElement("div",{className:"c-message__attachments"},m,this.renderAttachmentsOverLimitMaybe(h,p))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(ee["a"])("attachmentsOverLimit",this.props.ts,{limit:a})};return J.a.createElement("div",null,J.a.createElement(we["a"],r,t),J.a.createElement(Ie["a"],n()({},r,{render:function e(a,r){return J.a.createElement(je["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.subtype;if(!a)return null;if(r&&"file_comment"===n)return this.renderFileComment();return null}},{key:"renderFileComment",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!a||!r)return null;var l="file_comment"===s&&(!n||"dense"===i)&&J.a.createElement(Le["a"],{fileId:a,comment:r,followup:n,key:r.id+"-meta"});return[l||null,J.a.createElement(Ce["a"],{text:r.comment,memberId:o,className:"c-message__comment c-message__body",key:r.id+"-body",clogLinkClick:this.clogLinkClick})]}},{key:"renderFiles",value:function e(){var t=this.props,a=t.fileIds,r=t.channelId,n=t.subtype,i=t.text;if(!a||!a.length||!r)return null;if("file_comment"===n)return null;var s=J.a.createElement(Pe["b"],{msg:this.props.message});var o=Z()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!i});return J.a.createElement("div",{className:o},s)}},{key:"renderRollup",value:function e(){var t=this.props,a=t.rollup,r=t.channelId,n=t.userId;if(!a||!r)return null;return J.a.createElement(Be["a"],{rollup:a,channelId:r,user:n})}},{key:"renderAutomatedSubtype",value:function e(){return J.a.createElement(Ue["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.fileId,i=a.subtype,s=a.rollup,o=a.userId,l=a.edited,c=a.noSpecials,u=a.ariaAssertive,d=a.attachments,p=a.blocks,m=a.featureBlockKitRefactor,h=a.channelId,v=a.botId,f=a.isEphemeral,b=a.isRichTextMessage,g=a.shouldRenderBlocks,_=a.serviceTeamId,y=a.blocksContainerContext,k=a.sourceTeamId,O=a.theme,C=a.message;if(this.isTombstone())return J.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},nt.t("This message was deleted."));if(!r)return J.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(n||"file_comment"===i||"file_mention"===i)return null;if(s)return this.renderRollup();if(Object($["a"])(i))return this.renderAutomatedSubtype();var E=Z()("c-message__body",{"c-message__body--me":"me_message"===i});var S=Z()("c-message__message_blocks",{"c-message__message_blocks--rich_text":b&&g});if(p&&g){var w={serviceId:v,serviceTeamId:_,container:{type:Me["a"].message,messageTs:r,channelId:h,isEphemeral:f}};return m?J.a.createElement(Ae["a"],{msg:C,clogLinkClick:function e(){return t.clogLinkClick()}}):J.a.createElement("div",{className:S},J.a.createElement(Ne["a"],{containerActionsPayload:w,blocks:p,service:v,containerId:r,blocksContainerContext:y,clogLinkClick:function e(){return t.clogLinkClick()},inline:b&&"dense"===O}))}var I=parseInt(r,10)>ie["ADD_DIRECTION_ATTRIBUTE_TS"];return J.a.createElement(Ce["a"],{"data-qa":"message-text",className:E,text:this.getTextWithThemes(),memberId:o,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogLinkClick,noSpecials:c,ariaAssertive:u,ignoredPropEdited:l,ignoredPropAttachments:d,addDirectionAttr:I,sourceTeamId:k})}},{key:"renderActions",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.reactionKey,i=a.fileId,s=a.fileIds,o=a.comment,l=a.replies,c=a.replyCount,u=a.rollup,d=a.threadsEverythingPref,p=a.threadTs,m=a.channelId,h=a.subtype,v=a.isStarred,f=a.isPinned,b=a.isEphemeral,g=a.isDeleting,_=a.isStandalone,y=a.setUnreadPoint,k=a.theme,e=a.renderActions,O=a.renderActionsOffscreen,C=a.messageContainerType,E=a.hasKeyboardFocusWithin,S=a.itemId;var w=this.state,I=w.actionsMenuOpen,j=w.isHovered;if(!r||!m)return null;var T=O&&!E&&!j&&!e;if(!I&&!j&&!E&&!T&&!e)return null;if(g||_)return null;return J.a.createElement(He["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:l,replyCount:c,rollup:u,ts:r,threadsEverythingPref:d,threadTs:p,channelId:m,subtype:h,isStarred:v,isPinned:f,isEphemeral:b,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},onEmojiPickerOpen:function e(){return t.onMenuToggle(true)},onEmojiPickerClose:function e(){return t.onMenuToggle(false)},theme:k,renderOffscreen:T,messageContainerType:C,itemId:S})}},{key:"renderEdit",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.messageContainerType;if(!r||!a)return null;return J.a.createElement("div",{className:"c-message__content"},J.a.createElement(Ge["a"],{channelId:a,ts:r,messageContainerType:n}))}},{key:"renderResendControls",value:function e(){var t=this.props,a=t.isEKMError,r=t.showResend,n=t.showCancel;var i=null;r&&(i=J.a.createElement(_e["c"],{className:"c-message__resend",onClick:this.resendMsg},nt.t("Try again")));var s=null;n&&(s=J.a.createElement(_e["c"],{className:"c-message__cancel",onClick:this.removeMsg},a?nt.t("Clear"):nt.t("Cancel")));var o=null;r&&n&&(o=" | ");return J.a.createElement("div",{className:"c-message__resend_controls"},J.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),i,o,s)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,a=t.ts,r=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return J.a.createElement("div",{style:n},J.a.createElement("strong",null,"TS-ONLY: Message ",a," in ",r," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderMessageLabel",value:function e(t){var a=t.labelTypes,r=t.primaryLabelType;var i=this.props,s=i.sliHighlight,o=i.isSlackbotIm,l=i.isSelfIm,c=i.channelId,u=i.ts,d=i.currentUserId,p=i.pinnedByMemberId,m=i.sourceTeamId;var h=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:a}))return null;return J.a.createElement(at,n()({},a,{primaryType:r,channelId:c,ts:u,isHovered:h,isSlackbotIm:o,isSelfIm:l,sliHighlight:s,currentUserId:d,pinnedByMemberId:p,sourceTeamId:m}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var a=this.props,r=a.theme,n=a.isEditing,i=a.showUser,s=a.alertType,o=a.fadeAwayHighlight,l=a.isLast,c=a.isStandalone,u=a.isUnprocessed,d=a.subtype,p=a.rollup,m=a.sliHighlight,h=a.ts,v=a.isPinned,f=a.isEphemeral,b=a.isStarred,g=a.isTombstonedMessage,_=a.isEKMError,y=a.hasKeyboardFocusWithin;var k=this.state,O=k.isHovered,E=k.actionsMenuOpen,S=k.height;var w=Object(re["a"])({isPinned:v,isEphemeral:f,isStarred:b,subtype:d,sliHighlight:m});var I=Object(ae["a"])(w);var j=Z()("c-message",(t={},F()(t,"c-message--"+r,r),F()(t,"c-message--hover",O||E),F()(t,"c-message--focus-within",y),F()(t,"c-message--adjacent",!n&&!i&&!c),F()(t,"c-message--thread_broadcast","thread_broadcast"===d),F()(t,"c-message--highlight_yellow_bg","shared_channel_join"===s),F()(t,"c-message--highlight",!c&&n),F()(t,"c-message--fade_highlight",o&&!I),F()(t,"c-message--last",l),F()(t,"c-message--rollup",p),F()(t,"c-message--standalone",c),F()(t,"c-message--unprocessed",u),F()(t,"c-message--resend",this.shouldShowResendControls()),F()(t,"c-message--deleting",this.isDeleting()),F()(t,"c-message--editing",n),F()(t,"c-message--sli_highlight_negative",Object(C["isNegativeHighlightFeedback"])(m)),F()(t,"c-message--"+I,I),t));var T={};null!==S&&(T={height:S});return J.a.createElement("div",{ref:this.setRef,className:j,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:T,role:"document","data-qa":"message_container","data-qa-placeholder":Object(N["isTempTs"])(h)},this.renderMessageLabel({labelTypes:w,primaryLabelType:I}),this.renderGutter(),!c&&n&&this.renderEdit(),(c||!n)&&this.renderContent(),!g&&!_&&!c&&!n&&this.renderActions())}}]);return t}(Y["PureComponent"]);pt.displayName="Message";pt.defaultProps=dt;var mt=Object(ge["a"])(Object(be["a"])(pt));var ht=function e(t,a){var r=a.ts,i=a.channelId,o=a.previousMessageTs;var u=Object(p["a"])(t,i,r);var d=Object(O["a"])(t);var m=Object(k["h"])(t,"threads_everything");var h=Object(k["h"])(t,"expand_inline_imgs");var S=Object(k["h"])(t,"expand_non_media_attachments");var D=Object(_["e"])(t,i);var F=Object(j["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");var L=Object(j["isFeatureEnabled"])(t,"feature_attachments_v2");var B=Object(j["isFeatureEnabled"])(t,"feature_sonic_inputs");var U=Object(j["isFeatureEnabled"])(t,"feature_tinyspeck");var q=Object(j["isFeatureEnabled"])(t,"feature_message_history_cfm");var W=Object(j["isFeatureEnabled"])(t,"feature_block_kit_refactor");var H=Object(l["a"])({state:t});var G=Object(c["a"])({state:t});if(!u)return{channelId:i,clogger:H,logger:G,featureTinyspeck:U,featureHideUnfurlUrls:F,messageNotFound:true};if(q){var V=Object(b["b"])(t);r&&Object(E["d"])(V,i,r);o&&Object(E["d"])(V,i,o)}var K=u.files;var z=Object(y["getFileById"])(t,Object(s["first"])(K));var Q=Object(N["isFileComment"])(u)?z&&z.id:void 0;var Y=Object(p["a"])(t,i,o);var J=!Object(N["isAdjacentMessage"])(t,u,Y);var X=Object(R["a"])(u,Y);var Z=Object(M["b"])(u);var $=Object(N["getMsgSenderEntity"])(t,u);var ee=$.botId&&Object(v["getBotByMsg"])(t,u);var te=ee?ee.app_id:null;var ae=u.slackbot_feels||null;var re=u.comment&&z&&Object(y["getFileCommentById"])(t,z.id,u.comment.id)||u.comment;var ne=Object(C["getMessageMetaData"])(t,{channelId:i,ts:r}),ie=ne.isDeleting,se=ne.sliHighlight;var oe=!!Object(I["getMessageEditData"])(t,{channelId:i,ts:r});var le=Object(N["getMessagePinnedInfo"])(u);var ce=le?le.pinnedBy:null;var ue=void 0;if(Y){var de=Object(N["getMessagePinnedInfo"])(Y);var pe=de?de.pinnedBy:null;ue={previousMessageIsStarred:Object(N["isStarred"])(Y),previousMessageIsPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:o}),previousMessageIsEphemeral:Object(N["isEphemeral"])(Y),previousMessageSubtype:Y.subtype,previousMessageSliHighlight:Y.sliHighlight,previousMessagePinnedByMemberId:pe}}var me=u.thread_ts;var he=void 0;if(me){he={replyCount:u.reply_count};if(Object(x["a"])())if(u.reply_users){he.replyUsers=u.reply_users;he.replyUsersCount=u.reply_users_count;he.latestReply=u.latest_reply}else u.replies&&(he.replies=u.replies);else if(u.replies)he.replies=u.replies;else{he.replyUsers=u.reply_users;he.replyUsersCount=u.reply_users_count;he.latestReply=u.latest_reply}}var ve=Object(j["getCurrentUserId"])(t);var fe=Object(g["d"])(t);var be=Object(b["b"])(t);var ge=fe&&fe.domain;var _e=void 0;if(ee){var ye=Object(f["e"])(t,u.user);var ke=Object(w["getTeamIdFromBotOrUser"])({bot:ee,botProfile:u.bot_profile,member:ye,teamId:be});_e=Object(w["getTeamIdFromBotAppUser"])(ye,ke)}return n()({message:u,channelId:i,clogger:H,logger:G,blocks:u.blocks,alertType:u.alert_type,subtype:u.subtype,text:u.text,noSpecials:false===u.mrkdwn,theme:d},$,{appId:te,hasAdHocSender:Object(P["a"])(u)},he,{threadTs:me,threadsEverythingPref:m,expandInlineImgsPref:h,expandNonMediaAttachmentsPref:S,attachments:u.attachments,fileId:Q,fileIds:K,comment:re,isUpload:u.upload,reactionKey:Z,showUser:J,isFileFollowup:X,edited:u.edited,isStarred:Object(N["isStarred"])(u,z,"file_comment"===u.subtype&&re),isPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:r}),currentUserId:ve,pinnedByMemberId:ce,sliHighlight:se,botProfile:u.bot_profile,slackbotFeels:ae,icons:u.icons,isEditing:oe,isUnprocessed:Object(N["isTempMsg"])(u)&&!Object(N["isEphemeral"])(u),isEphemeral:Object(N["isEphemeral"])(u),isDeleting:ie,showResend:u.showResend,showCancel:u.showCancel,isSlackbotIm:Object(A["isSlackbot"])(D),isRichTextMessage:Object(N["isRichTextMessage"])(u),shouldRenderBlocks:Object(N["shouldRenderBlocksInsteadOfText"])(t,u),sourceTeamId:Object(N["getSourceTeamId"])(u)||Object(b["b"])(t),isSelfIm:Object(A["isYou"])(ve,D),isTombstonedMessage:Object(N["isEKMAccessDeniedMessage"])(u)||Object(N["isDLPTombstoneMessage"])(u),isEKMError:u.isEKMError,teamDomain:ge},ue,{featureTinyspeck:U,featureHideUnfurlUrls:F,featureAttachmentsV2:L,ariaAssertive:Object(N["isDisconnectedFeedback"])(u),serviceTeamId:_e,featureSonicInputs:B,featureBlockKitRefactor:W})};var vt={logMessage:function e(){return S["a"].apply(void 0,arguments)},clogMessageClick:function e(){return u["a"].apply(void 0,arguments)},clogUserClick:function e(){return d["a"].apply(void 0,arguments)},maybeStartEditingMessage:function e(){return I["maybeStartEditingMessage"].apply(void 0,arguments)},removeMsg:function e(){return h["a"].apply(void 0,arguments)},resendMsg:function e(){return m["a"].apply(void 0,arguments)}};var ft=t["a"]=Object(i["connect"])(ht,vt)(mt)},4783:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(4487);var p=a(5);var m=a.n(p);var h=a(4);var v=a.n(h);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(0);var k=a(6);var O=a(526);var C=a(3286);var E={title:y["b"].string,subtitle:y["b"].string,description:y["b"].node};var S={title:"",subtitle:"",description:null};var w=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return n.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return n.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return n.a.createElement("p",{className:"padding_top_50 margin_0 sk_foreground_max"},this.props.description)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(r["PureComponent"]);w.displayName="SettingsHeader";w.defaultProps=S;var I=w;var j=a(37);var T=a.n(j);var A=a(3);var N=a.n(A);var M=a(2);var P=a(31);var R=a(1643);var x=a(41);var D=a(166);var F=a(17);var L=a(9);var B=a(590);var U=a(1203);var q=a(117);var W=a(27);var H=a(10);var G=a.n(H);var V=a(13);var K=a.n(V);var z=a(23);var Q=a(52);var Y=a(44);var J=a(123);var X=a(150);var Z=a(441);var $=new k["b"]("enterprise_settings");var ee="members";var te="guests";var ae="text";var re="url";var ne="/custom_tos_view";var ie={guestsChecked:y["b"].bool,membersUrl:y["b"].string,membersUrlError:y["b"].string,membersText:y["b"].string,membersTextError:y["b"].string,membersContentType:y["b"].oneOf([ae,re]),onTextChange:y["b"].func,onCheckboxChange:y["b"].func,onUrlChange:y["b"].func,onMembersURLContentTypeChange:y["b"].func,onMembersTextContentTypeChange:y["b"].func};var se={guestsChecked:false,membersUrl:"",membersUrlError:"",membersText:"",membersTextError:"",membersContentType:"text",onTextChange:M["noop"],onCheckboxChange:M["noop"],onUrlChange:M["noop"],onMembersURLContentTypeChange:M["noop"],onMembersTextContentTypeChange:M["noop"]};var oe=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(Q["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(J["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};oe.displayName="renderCheckbox";var le=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={membersContentType:a.props.membersContentType,guestsChecked:a.props.guestsChecked};a.onMembersTextChange=a.onTextChange.bind(a,ee);a.onMembersUrlChange=a.onUrlChange.bind(a,ee);a.onMembersToggle=a.onToggle.bind(a,ee);a.onGuestsToggle=a.onToggle.bind(a,te);a.onCheckboxChange=a.onCheckboxChange.bind(a,te);return a}v()(t,[{key:"onToggle",value:function e(t){var a=t+"ContentType";this.setState(function(e){return G()({},a,e[a]===ae?re:ae)})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},G()(e,t+"Text",a),G()(e,t+"TextError",""),e});this.props.onTextChange(t,a)}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},G()(e,t+"Url",a),G()(e,t+"UrlError",""),e});this.props.onUrlChange(t,a)}},{key:"onCheckboxChange",value:function e(t,a){var r=a.target.checked;this.setState(function(){return{guestsChecked:r}});this.props.onCheckboxChange(t,r)}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==re)return null;var t={error:this.props.membersUrlError,url:this.props.membersUrl,type:ee,onChange:this.onMembersUrlChange};return this.renderInput(t)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==ae)return null;var t={error:this.props.membersTextError,text:this.props.membersText,type:ee,onChange:this.onMembersTextChange};return this.renderTextarea(t)}},{key:"renderMembersInputBar",value:function e(){var t=this.props,a=t.membersUrl,r=t.membersText,n=t.membersContentType;var i=!r&&n===ae||!a&&n===re;var s={previewIsDisabled:i,contentType:n,content:n===ae?r:a,type:ee,onToggle:this.onMembersToggle,onChange:this.onUrlChange};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var a=this;var r=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=$.t("Preview");var c=i===re;var u=c?function(){var e=window.open((Object(M["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return a["tos_preview_"+o].submit()};var d=K()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_foreground_max:r});var p=n.a.createElement(Y["a"],{disabled:r,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(z["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:ne,method:"POST",ref:function e(t){a["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderTextarea",value:function e(t){this.props.onMembersTextContentTypeChange();var a=t.error,r=t.text,i=t.type,s=t.onChange;var o=$.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_foreground_max cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,r=e.text;return"a"===t?n.a.createElement(Y["a"],{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},r):null});return n.a.createElement(Z["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:r,hintText:o,onChange:s,errorText:a,errorLevel:"error"})}},{key:"renderInput",value:function e(t){this.props.onMembersURLContentTypeChange();var a=t.error,r=t.url,i=t.type,s=t.onChange;var o=$.t("https://\u2026");return n.a.createElement(X["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:r,onChange:s,errorText:a,errorLevel:"error",placeholder:o})}},{key:"renderInputBar",value:function e(t){var a=t.contentType,r=t.onToggle;var i=$.t("Terms of Service");var s=a===ae?$.t("Enter URL"):$.t("Enter text");var o=K()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(Y["a"],{onClick:r},n.a.createElement("span",{className:o},s)))}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"members",value:this.state.guestsChecked,label:$.t("Use the same Terms of Service as Full Members"),onChange:this.onCheckboxChange};return oe(t)}},{key:"render",value:function e(){var t=$.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var a=$.t("Full Members");var r=$.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);le.displayName="CustomTOSModalInputForm";le.defaultProps=se;var ce=le;var ue=new k["b"]("enterprise_settings");var de={switchPane:y["b"].func,onTextChange:y["b"].func,membersText:y["b"].string,membersTextError:y["b"].string,membersUrlError:y["b"].string,membersUrl:y["b"].string,guestsChecked:y["b"].bool,onCheckboxChange:y["b"].func,onUrlChange:y["b"].func,membersContentType:y["b"].string,onMembersURLContentTypeChange:y["b"].func,onValidateNext:y["b"].func,isOkayToMoveNext:y["b"].bool.isRequired,onMembersTextContentTypeChange:y["b"].func};var pe={switchPane:M["noop"],guestsChecked:false,onCheckboxChange:M["noop"],onTextChange:M["noop"],membersText:"",membersTextError:"",membersUrlError:"",membersUrl:"",onUrlChange:M["noop"],membersContentType:"text",onMembersURLContentTypeChange:M["noop"],onValidateNext:M["noop"],onMembersTextContentTypeChange:M["noop"]};var me=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props,a=t.isOkayToMoveNext,i=t.switchPane;var s=ue.t("Custom Terms of Service");var o=ue.t("Next");var l=ue.t("Cancel");a&&i("accept");return n.a.createElement(r["Fragment"],null,n.a.createElement(q["g"],null,n.a.createElement(q["i"],{id:"customTOS__title-bar",title:s,"data-qa":"dialog_header"})),n.a.createElement(q["c"],null,n.a.createElement(q["d"],{"data-qa":"dialog_body"},n.a.createElement(ce,{membersText:this.props.membersText,membersTextError:this.props.membersTextError,onTextChange:this.props.onTextChange,membersUrl:this.props.membersUrl,membersUrlError:this.props.membersUrlError,onUrlChange:this.props.onUrlChange,guestsChecked:this.props.guestsChecked,onCheckboxChange:this.props.onCheckboxChange,membersContentType:this.props.membersContentType,onMembersURLContentTypeChange:this.props.onMembersURLContentTypeChange,onMembersTextContentTypeChange:this.props.onMembersTextContentTypeChange}))),n.a.createElement(q["e"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_foreground_max"},"Step 1 of 2"),n.a.createElement(q["f"],null,n.a.createElement(q["b"],{type:"outline"},l),n.a.createElement(W["d"],{type:"primary","data-qa":"validate_next_btn",onClick:this.props.onValidateNext},o))))}}]);return t}(r["PureComponent"]);me.displayName="CustomTOSInputPane";me.defaultProps=pe;var he=me;var ve=new k["b"]("enterprise_settings");var fe={membersShowAll:y["b"].bool,guestsShowAll:y["b"].bool,onMembersShowAllChange:y["b"].func,onGuestsShowAllChange:y["b"].func};var be={membersShowAll:true,guestsShowAll:true,onMembersShowAllChange:M["noop"],onGuestsShowAllChange:M["noop"]};var ge=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(Q["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(J["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};ge.displayName="renderCheckbox";var _e=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(P["a"])(a,["onMembersShowAllChange","onGuestsShowAllChange"]);return a}v()(t,[{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.props.onMembersShowAllChange(a)}},{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.props.onGuestsShowAllChange(a)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.props.membersShowAll,label:ve.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return ge(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.props.guestsShowAll,label:ve.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return ge(t)}},{key:"render",value:function e(){var t=ve.t("Require existing members to accept the new Terms of Service?");var a=ve.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);_e.displayName="CustomTOSModalAcceptForm";_e.defaultProps=be;var ye=_e;var ke=new k["b"]("enterprise_settings");var Oe={featureOrgModernSettingPage:y["b"].bool.isRequired,switchPane:y["b"].func,onBack:y["b"].func,membersShowAll:y["b"].bool,guestsShowAll:y["b"].bool,onMembersShowAllChange:y["b"].func,onGuestsShowAllChange:y["b"].func,onSubmit:y["b"].func,isSubmitted:y["b"].bool,closeModal:y["b"].func,showEdit:y["b"].bool};var Ce={membersShowAll:true,guestsShowAll:true,onMembersShowAllChange:M["noop"],onGuestsShowAllChange:M["noop"],switchPane:M["noop"],onBack:M["noop"],onSubmit:M["noop"],isSubmitted:false,closeModal:M["noop"],showEdit:false};var Ee=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this;var a=this.props.featureOrgModernSettingPage;if(!a)return null;var i=ke.t("Custom Terms of Service");var s=this.props,o=s.switchPane,l=s.isSubmitted;var c=ke.t("Enable");var u=ke.t("Save");var d=function e(){t.props.onBack(function(){o("input")})};l&&this.props.closeModal();return n.a.createElement(r["Fragment"],null,n.a.createElement(q["g"],null,n.a.createElement(q["i"],{id:"customTOS__title-bar",title:i,"data-qa":"dialog_header"})),n.a.createElement(q["c"],null,n.a.createElement(q["d"],{"data-qa":"dialog_body"},n.a.createElement(ye,{onMembersShowAllChange:this.props.onMembersShowAllChange,onGuestsShowAllChange:this.props.onGuestsShowAllChange,membersShowAll:this.props.membersShowAll,guestsShowAll:this.props.guestsShowAll}))),n.a.createElement(q["e"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_foreground_max"},"Step 2 of 2"),n.a.createElement(q["f"],null,n.a.createElement(W["d"],{type:"outline",onClick:d},"Back"),n.a.createElement(W["d"],{type:"primary","data-qa":"validate_enable_btn",onClick:this.props.onSubmit},this.props.showEdit?c:u))))}}]);return t}(r["PureComponent"]);Ee.displayName="CustomTOSAcceptPane";Ee.defaultProps=Ce;var Se={closeModal:x["closeModal"]};var we=function e(t){return{featureOrgModernSettingPage:Object(L["isFeatureEnabled"])(t,"feature_org_modern_setting_page")}};var Ie=Object(o["connect"])(we,Se)(Ee);var je=new k["b"]("enterprise_settings");var Te="text";var Ae="url";var Ne=16e3;var Me={switchPane:y["b"].func,closeModal:y["b"].func,membersContentType:y["b"].string,membersText:y["b"].string,membersUrl:y["b"].string,showEdit:y["b"].bool};var Pe={switchPane:M["noop"],closeModal:M["noop"],membersContentType:"text",membersText:"",membersUrl:"",showEdit:false};var Re=function e(t){if(!Object(B["d"])(t))return je.t("Please enter Terms of Service for Members.");if(t.length>=Ne)return je.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:Ne});return""};var xe=function e(t){if(!Object(B["d"])(t))return je.t("Please enter Terms of Service URL for Members.");if(!Object(B["b"])(t))return je.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var De=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={membersTextError:"",guestsChecked:false,membersUrlError:"",isOkayToMoveNext:false,membersShowAll:true,guestsShowAll:true,isSubmitted:false,membersText:a.props.membersText,membersUrl:a.props.membersUrl,membersContentType:a.props.membersContentType};a.onTextChange=a.onTextChange.bind(a);a.onCheckboxChange=a.onCheckboxChange.bind(a);a.onUrlChange=a.onUrlChange.bind(a);a.onMembersURLContentTypeChange=a.onMembersURLContentTypeChange.bind(a);a.onMembersTextContentTypeChange=a.onMembersTextContentTypeChange.bind(a);a.onValidateNext=a.onValidateNext.bind(a);a.onBack=a.onBack.bind(a);a.onMembersShowAllChange=a.onMembersShowAllChange.bind(a);a.onGuestsShowAllChange=a.onGuestsShowAllChange.bind(a);a.onSubmit=a.onSubmit.bind(a);return a}v()(t,[{key:"onTextChange",value:function e(t,a){this.setState(function(){return{membersText:a}})}},{key:"onCheckboxChange",value:function e(t,a){this.setState(function(){return{guestsChecked:a}})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){return{membersUrl:a}})}},{key:"onMembersURLContentTypeChange",value:function e(){this.setState(function(){return{membersContentType:"url"}})}},{key:"onMembersTextContentTypeChange",value:function e(){this.setState(function(){return{membersContentType:"text"}})}},{key:"onValidateNext",value:function e(t){var a=this.getTermOfServiceErrorText();if(a.membersTextError||a.membersUrlError)this.setState(function(){return a});else{var r=N()({isOkayToMoveNext:t},a);this.setState(function(){return r})}}},{key:"onMembersShowAllChange",value:function e(t){this.setState(function(){return{membersShowAll:t}})}},{key:"onGuestsShowAllChange",value:function e(t){this.setState(function(){return{guestsShowAll:t}})}},{key:"onBack",value:function e(t){this.setState(function(){return{isOkayToMoveNext:false}},t)}},{key:"onSubmit",value:function e(){var t=this.state.membersText;var a=this.state.guestsChecked;var r=this.state.membersUrl;var n=this.state.membersContentType;var i=this.state.membersShowAll;var s=this.state.guestsShowAll;var o=n===Te?t:r;var l={membersTos:o,guestsChecked:a,membersContentType:n,membersShowAll:i,guestsShowAll:s};Object(D["b"])(Object(D["a"])().settings.createOrgCustomTOSSettings(l));this.setState(function(){return{isSubmitted:true}})}},{key:"getPanes",value:function e(){var t=this;return{input:{render:function e(a){return n.a.createElement(he,N()({},a,{onTextChange:t.onTextChange,membersText:t.state.membersText,membersUrl:t.state.membersUrl,membersTextError:t.state.membersTextError,membersUrlError:t.state.membersUrlError,guestsChecked:t.state.guestsChecked,onCheckboxChange:t.onCheckboxChange,onUrlChange:t.onUrlChange,membersContentType:t.props.membersContentType,onMembersURLContentTypeChange:t.onMembersURLContentTypeChange,onMembersTextContentTypeChange:t.onMembersTextContentTypeChange,onValidateNext:t.onValidateNext,isOkayToMoveNext:t.state.isOkayToMoveNext}))}},accept:{render:function e(a){return n.a.createElement(Ie,N()({},a,{onBack:t.onBack,onMembersShowAllChange:t.onMembersShowAllChange,onGuestsShowAllChange:t.onGuestsShowAllChange,membersShowAll:t.state.membersShowAll,guestsShowAll:t.state.guestsShowAll,onSubmit:t.onSubmit,isSubmitted:t.state.isSubmitted,showEdit:t.props.showEdit}))}}}}},{key:"getTermOfServiceErrorText",value:function e(){var t=this.state,a=t.membersContentType,r=t.membersUrl,n=t.membersText;var i={membersTextError:"",membersUrlError:""};a===Te?i.membersTextError=Re(n):a===Ae&&(i.membersUrlError=xe(r));return i}},{key:"render",value:function e(){var t=this.props.closeModal;return n.a.createElement(U["b"],{closeModal:t,defaultPane:"input",panes:this.getPanes()})}}]);return t}(n.a.PureComponent);De.displayName="CustomTOSModal";De.defaultProps=Pe;var Fe={closeModal:function e(){return x["closeModal"].apply(void 0,arguments)}};var Le=Object(o["connect"])(null,Fe)(De);var Be=Object(F["b"])("Opens the custom-tos modal",function(e,t,a){var r=t();Object(L["isFeatureEnabled"])(r,"feature_org_modern_setting_page")&&e(Object(x["openModal"])({element:n.a.createElement(Le,a)}))});Be.meta={name:"openCustomTOSModal",key:"actionsOpenCustomTosModalOpenCustomTOSModal",description:"Opens the custom-tos modal"};Be.propTypes=null;var Ue=Be;var qe=new k["b"]("enterprise_settings");var We={membersShowAll:y["b"].bool.isRequired,guestsShowAll:y["b"].bool.isRequired,onSubmit:y["b"].func.isRequired};var He=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(Q["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(J["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};He.displayName="renderCheckbox";var Ge=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={membersShowAll:a.props.membersShowAll,guestsShowAll:a.props.guestsShowAll};Object(P["a"])(a,["onMembersShowAllChange","onGuestsShowAllChange"]);return a}v()(t,[{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{membersShowAll:a}})}},{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{guestsShowAll:a}})}},{key:"submit",value:function e(t){var a=this.state,r=a.membersShowAll,n=a.guestsShowAll;var i={membersShowAll:r,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:qe.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return He(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:qe.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return He(t)}},{key:"render",value:function e(){var t=qe.t("Require existing members to accept the new Terms of Service?");var a=qe.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);Ge.displayName="CustomTOSAcceptForm";var Ve=Ge;var Ke=a(170);var ze=a(295);var Qe=a(3290);var Ye=new k["b"]("enterprise_settings");var Je="members";var Xe="guests";var Ze="text";var $e="url";var et="all";var tt="not_all";var at="/custom_tos_view";var rt=16e3;var nt={membersUrl:y["b"].string,membersText:y["b"].string,membersContentType:y["b"].oneOf([Ze,$e]),guestsUrl:y["b"].string,guestsText:y["b"].string,guestsContentType:y["b"].oneOf([Ze,$e]),onSubmit:y["b"].func.isRequired};var it={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text"};var st=function e(t){var a=t.error,r=t.url,i=t.type,s=t.onChange;var o=Ye.t("https://\u2026");return n.a.createElement(X["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:r,onChange:s,errorText:a,errorLevel:"error",placeholder:o})};st.displayName="renderInput";var ot=function e(t,a){if(!Object(B["d"])(a)){if(t===Je)return Ye.t("Please enter Terms of Service for Members.");if(t===Xe)return Ye.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(a.length>=rt)return Ye.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:rt});return""};var lt=function e(t,a){if(!Object(B["d"])(a)){if(t===Je)return Ye.t("Please enter Terms of Service URL for Members.");if(t===Xe)return Ye.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(B["b"])(a))return Ye.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var ct=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={all:a.props.guestsText||a.props.guestsUrl?tt:et,membersUrl:a.props.membersUrl,membersText:a.props.membersText,membersContentType:a.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:a.props.guestsUrl,guestsText:a.props.guestsText,guestsContentType:a.props.guestsContentType,guestsUrlError:"",guestsTextError:""};a.onAllChange=a.onAllChange.bind(a);a.onMembersTextChange=a.onTextChange.bind(a,Je);a.onGuestsTextChange=a.onTextChange.bind(a,Xe);a.onMembersUrlChange=a.onUrlChange.bind(a,Je);a.onGuestsUrlChange=a.onUrlChange.bind(a,Xe);a.onMembersToggle=a.onToggle.bind(a,Je);a.onGuestsToggle=a.onToggle.bind(a,Xe);return a}v()(t,[{key:"onAllChange",value:function e(t){var a=t.target.value;this.setState(function(){return{all:a}})}},{key:"onToggle",value:function e(t){var a=t+"ContentType";this.setState(function(e){return G()({},a,e[a]===Ze?$e:Ze)})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},G()(e,t+"Text",a),G()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},G()(e,t+"Url",a),G()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var a=this.state,r=a.all,n=a.membersUrl,i=a.membersText,s=a.membersContentType,o=a.guestsUrl,l=a.guestsText,c=a.guestsContentType;var u={};s===Ze&&(u.membersTextError=ot(Je,i));s===$e&&(u.membersUrlError=lt(Je,n));if(r!==et){c===Ze&&(u.guestsTextError=ot(Xe,l));c===$e&&(u.guestsUrlError=lt(Xe,o))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var a=this.state,r=a.all,n=T()(a,["all"]);var i=N()({all:r===et},n);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var m=i===Ze&&n&&!o||i===$e&&r&&!s;if(a===et||!m)return m;var h=u===Ze&&c&&!p||u===$e&&l&&!d;return h}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==$e)return null;var t=this.state,a=t.membersUrl,r=t.membersUrlError;var n={error:r,url:a,type:Je,onChange:this.onMembersUrlChange};return st(n)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===et)return null;if(this.state.guestsContentType!==$e)return null;var t=this.state,a=t.guestsUrl,r=t.guestsUrlError;var n={error:r,url:a,type:Xe,onChange:this.onGuestsUrlChange};return st(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==Ze)return null;var t=this.state,a=t.membersText,r=t.membersTextError;var n={error:r,text:a,type:Je,onChange:this.onMembersTextChange};return this.renderTextarea(n)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===et)return null;if(this.state.guestsContentType!==Ze)return null;var t=this.state,a=t.guestsText,r=t.guestsTextError;var n={error:r,text:a,type:Xe,onChange:this.onGuestsTextChange};return this.renderTextarea(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,a=t.all,r=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(a===et)return null;var s=!n&&i===Ze||!r&&i===$e;var o={previewIsDisabled:s,contentType:i,content:i===Ze?n:r,type:Xe,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"renderTextarea",value:function e(t){var a=t.error,r=t.text,i=t.type,s=t.onChange;var o=Ye.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_foreground_max cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,r=e.text;return"a"===t?n.a.createElement(Y["a"],{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},r):null});return n.a.createElement(Z["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:r,hintText:o,onChange:s,errorText:a,errorLevel:"error"})}},{key:"renderMembersInputBar",value:function e(){var t=this.state,a=t.membersUrl,r=t.membersText,n=t.membersContentType;var i=!r&&n===Ze||!a&&n===$e;var s={previewIsDisabled:i,contentType:n,content:n===Ze?r:a,type:Je,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var a=this;var r=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=Ye.t("Preview");var c=i===$e;var u=c?function(){var e=window.open((Object(M["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return a["tos_preview_"+o].submit()};var d=K()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_foreground_max:r});var p=n.a.createElement(Y["a"],{disabled:r,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(z["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:at,method:"POST",ref:function e(t){a["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderInputBar",value:function e(t){var a=t.contentType,r=t.onToggle;var i=Ye.t("Terms of Service");var s=a===Ze?Ye.t("Enter URL"):Ye.t("Enter text");var o=K()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(Y["a"],{onClick:r},n.a.createElement("span",{className:o},s)))}},{key:"renderRadio",value:function e(t){var a=this.state.all;var r=t.value,i=t.label;return n.a.createElement("div",{key:"tos_type_"+r},n.a.createElement(Q["a"],{id:"tos_type_"+r+"_label",htmlFor:"tos_type_"+r+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},n.a.createElement(Ke["a"],{id:"tos_type_"+r+"_radio",value:r,onChange:this.onAllChange,checked:r===a})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:et,label:Ye.t("Use the same Terms of Service as Full Members")},{value:tt,label:Ye.t("Use a different Terms of Service")}];return n.a.createElement(ze["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=Ye.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var a=Ye.t("Full Members");var r=Ye.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(r["PureComponent"]);ct.displayName="CustomTOSInputForm";ct.defaultProps=it;var ut=ct;var dt=a(1202);var pt=new k["b"]("enterprise_settings");var mt={closeModal:y["b"].func};var ht={closeModal:M["noop"]};var vt=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onConfirmDisable=a.onConfirmDisable.bind(a);return a}v()(t,[{key:"onConfirmDisable",value:function e(){Object(D["b"])(Object(D["a"])().settings.deactivateOrgCustomTOSSettings());this.props.closeModal()}},{key:"render",value:function e(){var t=pt.t("Disable");var a=pt.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var r=pt.t("Disable Custom Terms of Service");var i=this.props.closeModal;return n.a.createElement(q["a"],{closeModal:i,centered:true},n.a.createElement(q["g"],null,n.a.createElement(q["i"],{title:r})),n.a.createElement(q["c"],null,n.a.createElement(q["d"],null,a)),n.a.createElement(q["e"],null,n.a.createElement(q["f"],null,n.a.createElement(q["b"],{type:"outline"},"Cancel"),n.a.createElement(W["d"],{type:"danger",onClick:this.onConfirmDisable},t))))}}]);return t}(r["PureComponent"]);vt.displayName="CustomTOSDisableModal";vt.defaultProps=ht;var ft={closeModal:x["closeModal"]};var bt=Object(o["connect"])(null,ft)(vt);var gt=new k["b"]("enterprise_settings");var _t="text";var yt="url";var kt={featureOrgModernSettingPage:y["b"].bool.isRequired,saving:y["b"].bool,customTos:y["b"].bool,membersTos:y["b"].string,membersContentType:y["b"].string,guestsTos:y["b"].string,guestsContentType:y["b"].string,openModal:y["b"].func,openCustomTOSModal:y["b"].func};var Ot={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:M["noop"],openCustomTOSModal:M["noop"]};var Ct=function e(t){var a=t.customTos,r=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===yt?r:"",membersText:n===_t?r:"",membersShowAll:!a,membersContentType:n,guestsUrl:s===yt?i:"",guestsText:s===_t?i:"",guestsShowAll:!a,guestsContentType:s}};var Et=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=N()({},Ct(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(P["a"])(a,["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return a}v()(t,[{key:"componentDidUpdate",value:function e(t,a){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&a.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}});var a=this.props.featureOrgModernSettingPage;a&&this.maybeRenderEnable()}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}});this.maybeRenderEnable()}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}});this.maybeRenderEnable()}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=s===_t?n:r;var p=this.props.customTos;var m={customTos:p,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:c};if(!a){var h=u===_t?l:o;m.guestsTos=h;m.guestsContentType=u}Object(D["b"])(Object(D["a"])().settings.createOrgCustomTOSSettings(m))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M["noop"];this.setState(function(){return t},a)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var a=this;this.setState(function(){return N()({},Ct(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var a=this.renderInputForm();var r=this.renderAcceptForm();var n=function e(){return t.props.customTos?gt.t("Edit Custom Terms of Service"):gt.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?gt.t("Update Custom Terms of Service"):gt.t("Enable Custom Terms of Service")};var s=gt.t("Next");var o=gt.t("Cancel");var l=this.state.isPending;return[{children:a,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:r,goButtonText:i(),goButtonIsPending:l,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;var a=this.props.featureOrgModernSettingPage;a&&this.props.openCustomTOSModal(Ct(this.props));return n.a.createElement(R["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,position:"fixed",steps:this.buildEnableSteps(),ref:function e(a){t.settingsModalRef=a},onSubmit:M["noop"]})}},{key:"renderDisable",value:function e(){return n.a.createElement(bt,null)}},{key:"renderInputForm",value:function e(){var t=this;var a=this.state,r=a.all,i=a.isValid,s=a.isPending,o=a.showEnable,l=a.showEdit,c=T()(a,["all","isValid","isPending","showEnable","showEdit"]);var u=N()({},c,{onSubmit:this.setFormSettings});return n.a.createElement(ut,N()({},u,{ref:function e(a){t.inputForm=a}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var a=!this.props.customTos;var r={membersShowAll:a,guestsShowAll:a,onSubmit:this.setFormSettings};return n.a.createElement(Ve,N()({},r,{ref:function e(a){t.acceptForm=a}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var a={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var r=gt.t("Custom Terms of Service");var i=t?gt.t("Enabled"):gt.t("Disabled");var s=gt.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return n.a.createElement(dt["a"],{label:r,state:i,description:s,onClick:this.onClick,control:a,type:""})}},{key:"render",value:function e(){var t=this.props.featureOrgModernSettingPage;if(t)return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting());return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting()," ",this.maybeRenderEnable())}}]);return t}(r["PureComponent"]);Et.displayName="CustomTOSSetting";Et.defaultProps=Ot;var St=function e(t){return{featureOrgModernSettingPage:Object(L["isFeatureEnabled"])(t,"feature_org_modern_setting_page")}};var wt={openCustomTOSModal:function e(){return Ue.apply(void 0,arguments)},openModal:x["openModal"]};var It=Object(o["connect"])(St,wt)(Et);var jt=It;var Tt=a(144);var At=a(25);var Nt=a(1262);var Mt=a(4773);var Pt=a(91);var Rt=a(1181);var xt=new k["b"]("enterprise_settings");var Dt={onSelect:y["b"].func.isRequired,orgContactEmail:y["b"].string.isRequired,onEmailChange:y["b"].func.isRequired,selected:y["b"].bool.isRequired,emailIsValid:y["b"].bool};var Ft={emailIsValid:true};function Lt(e,t){if(!e&&t.length>0)return xt.t("This doesn\u2019t seem like an email address. Sorry!");return""}function Bt(e){var t=e.orgContactEmail,a=e.onSelect,r=e.onEmailChange,i=e.selected,s=e.emailIsValid;return n.a.createElement("div",null,n.a.createElement(Q["a"],{htmlFor:"org_email",text:xt.t("Send to a different email address:"),cursor:"pointer",type:"inline"},n.a.createElement(Ke["a"],{id:"org_email",onChange:a,checked:i})),n.a.createElement("div",{className:"p-org_help_email__input"},n.a.createElement(X["a"],{id:"org_email_text",ariaDescribedby:xt.t("Organization contact email"),name:"org_help_email",onChange:r,size:"medium",isDisabled:!i,value:i?t:"",placeholder:xt.t("name@example.com"),errorText:Lt(s,t)})))}Bt.displayName="CustomEmailRadio";Bt.defaultProps=Ft;var Ut=Bt;var qt=a(450);var Wt=new k["b"]("enterprise_settings");var Ht={selected:y["b"].bool.isRequired,onSelect:y["b"].func.isRequired,primaryOwner:y["b"].object};var Gt={primaryOwner:{}};function Vt(e){var t=e.onSelect,a=e.selected,r=e.primaryOwner;if(!r.profile)return null;return n.a.createElement("div",null,n.a.createElement(Q["a"],{htmlFor:"org_primary_owner",text:Wt.t("Send to the Org Primary Owner"),type:"inline",cursor:"pointer"},n.a.createElement(Ke["a"],{id:"org_primary_owner",onChange:t,checked:a})),n.a.createElement("div",{className:"p-org_help_email__primary_owner_info"},n.a.createElement(qt["a"],{entityType:"member",dimension:32,entityData:r,customClasses:"p-org_help_email__primary_owner__icon"}),n.a.createElement("div",{className:"p-org_help_email__primary_owner__text"},n.a.createElement("div",{className:"p-org_help_email__primary_owner__name"},r.name),n.a.createElement("div",{className:"p-org_help_email__primary_owner__domain"},r.profile.email))))}Vt.displayName="PrimaryOwnerRadio";Vt.defaultProps=Gt;var Kt=Vt;var zt=new k["b"]("enterprise_settings");var Qt={orgContactEmail:y["b"].string.isRequired,onSave:y["b"].func.isRequired,primaryOwner:y["b"].object};var Yt={primaryOwner:{}};var Jt="";var Xt=function(e){_()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.orgContactEmail;a.state={radioSelection:r===Jt?"primaryOwner":"custom",contactEmail:r,emailIsValid:true};a.onSave=a.onSave.bind(a);a.onSelectionChange=a.onSelectionChange.bind(a);a.onEmailChange=a.onEmailChange.bind(a);a.validateEmailOnChange=Object(M["debounce"])(a.validateEmailOnChange,500);return a}v()(t,[{key:"onSave",value:function e(){if(!this.state.emailIsValid)return;"primaryOwner"===this.state.radioSelection?this.props.onSave(Jt):this.props.onSave(this.state.contactEmail)}},{key:"onSelectionChange",value:function e(t){"primaryOwner"===t?this.setState(function(){return{radioSelection:t,emailIsValid:true}}):this.setState(function(e){var a=e.contactEmail;return{radioSelection:t,emailIsValid:Object(Rt["a"])(a)}})}},{key:"onEmailChange",value:function e(t){this.setState(function(){return{contactEmail:t}});this.validateEmailOnChange(t)}},{key:"validateEmailOnChange",value:function e(t){this.setState(function(){return{emailIsValid:Object(Rt["a"])(t)}})}},{key:"disableOnSave",value:function e(){var t=this.props.orgContactEmail===this.state.contactEmail;var a="custom"===this.state.radioSelection;if(!a&&this.props.orgContactEmail===Jt)return true;return a&&(t||!this.state.emailIsValid)}},{key:"isCustomEmailValid",value:function e(){var t="custom"===this.state.radioSelection;return!t||this.state.emailIsValid}},{key:"render",value:function e(){var t=this;var a=this.props.primaryOwner;var r=this.state,i=r.radioSelection,s=r.contactEmail;return n.a.createElement(Pt["a"],{cancelText:"Cancel",goButtonText:"Save",onGo:this.onSave,title:zt.t("Organization Contact Email"),titleAria:zt.t("Organization Contact Email"),useSlackScrollbar:false,goButtonIsDisabled:this.disableOnSave()},n.a.createElement("div",{className:"p-org_help_email_dialog__description"},zt.t("Choose where support requests that require contacting your organization get sent to.")),n.a.createElement(Kt,{selected:"primaryOwner"===i,onSelect:function e(){return t.onSelectionChange("primaryOwner")},primaryOwner:a}),n.a.createElement(Ut,{selected:"custom"===i,orgContactEmail:s,onSelect:function e(){return t.onSelectionChange("custom")},onEmailChange:this.onEmailChange,emailIsValid:this.isCustomEmailValid()}))}}]);return t}(n.a.Component);Xt.displayName="OrgHelpEmailDialog";Xt.defaultProps=Yt;var Zt=Xt;var $t=a(162);var ea=new k["b"]("enterprise_settings");var ta={emailStatus:y["b"].oneOf(["error","success"]).isRequired};var aa=function e(t){var a=t.emailStatus;var r="check-circle-o";var i="sk_lilypad_green";var s=ea.t("Organization contact email updated");if("error"===a){r="warning";i="sk_raspberry_red";s=ea.t("Something\u2019s gone wrong. Mind trying again in a moment?")}return n.a.createElement($t["b"],{position:"bottom-right",icon:r,iconClassName:i,shouldAutoFade:true},s)};aa.displayName="OrgHelpEmailToast";var ra=aa;var na=a(3292);var ia=new k["b"]("enterprise_settings");var sa={openModal:y["b"].func.isRequired,enqueueToast:y["b"].func.isRequired,setCustomEmailPref:y["b"].func.isRequired,orgContactEmail:y["b"].string.isRequired,primaryOwner:y["b"].object};var oa={primaryOwner:{}};var la="";function ca(e){if(e===la)return ia.t("Send to the Org Primary Owner");return ia.t("Send to {email}",{email:e})}function ua(e,t){if(e===la)return ia.t("Email inquiries and support requests for your org will be sent to {name} ({email})",{name:t.name,email:t.profile&&t.profile.email});return ia.t("Email inquiries and support requests for your org will be sent to this address.")}var da=function e(t){return{element:n.a.createElement(ra,{emailStatus:t})}};function pa(e){var t=e.primaryOwner,a=e.orgContactEmail;var r=function t(a){e.setCustomEmailPref({email:a===la?null:a}).then(function(){e.enqueueToast(da("success"))}).catch(function(){e.enqueueToast(da("error"))})};var i=function t(){e.openModal({element:n.a.createElement(Zt,{orgContactEmail:a,onSave:r,primaryOwner:e.primaryOwner})})};var s={type:"button",enabled:true,onEdit:i,editOnly:true};return n.a.createElement(dt["a"],{label:ia.t("Organization contact email"),state:ca(a),description:ua(a,t),onClick:i,control:s})}pa.displayName="OrgHelpEmailPane";pa.defaultProps=oa;var ma=function e(t,a){var r=a.primaryOwnerId;var n=r?Object(At["e"])(t,r):{};var i=Object(Nt["f"])(t,"custom_contact_email")||la;return{primaryOwner:n,orgContactEmail:i}};var ha={openModal:x["openModal"],enqueueToast:Tt["enqueueToast"],setCustomEmailPref:Mt["d"]};var va=Object(o["connect"])(ma,ha)(pa);var fa=a(48);var ba=a.n(fa);var ga=a(419);var _a=a(232);var ya=a(95);var ka=new k["b"]("enterprise_dashboard");var Oa=function e(t){var a=t.title,r=t.children,i=t.confirmButton,s=t.onClose;return n.a.createElement(q["a"],{closeModal:s,isOpen:true,centered:true},n.a.createElement(q["g"],null,n.a.createElement(q["i"],{title:a})),n.a.createElement(q["c"],null,n.a.createElement(q["d"],null,r)),n.a.createElement(q["e"],null,n.a.createElement(q["f"],null,n.a.createElement(q["b"],{type:"outline"},ka.t("Cancel")),i)))};Oa.displayName="WorkflowBuilderConfirmationModal";var Ca=Oa;var Ea=a(3735);var Sa=new k["b"]("enterprise_dashboard");var wa=function e(t){var a=t.defaultWorkflowBuilderEnabled,i=t.toggleWorkflowBuilderEnabled;var s=Object(_a["a"])(),o=s.featureBuilderCanAccess;var l=Object(r["useState"])(a),c=ba()(l,2),u=c[0],d=c[1];var p=Object(r["useState"])(false),m=ba()(p,2),h=m[0],v=m[1];var f=Object(r["useState"])(false),b=ba()(f,2),g=b[0],_=b[1];var y=Object(r["useState"])(false),k=ba()(y,2),O=k[0],C=k[1];var E=Object(r["useCallback"])(function(){v(true);var e=!u;i({enabled:e}).then(function(){d(e);v(false);C(false);_(false)})},[u,i]);var S=Object(r["useCallback"])(function(e){e.stopPropagation();e.preventDefault();Object(D["b"])(Object(D["a"])().router.navigateTo("/settings/org-policies"))},[]);var w=Object(r["useCallback"])(function(){return _(false)},[]);var I=Object(r["useCallback"])(function(){return C(false)},[]);if(!o)return null;return n.a.createElement("div",null,n.a.createElement(dt["a"],{label:Sa.t("Workflow Builder"),state:u?Sa.t("Enabled"):Sa.t("Disabled"),description:u?Sa.rt("Members can create workflows with Workflow Builder. Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. You can also <a>add a policy</a> to choose who can create workflows.",{fallbackHash:"41b4617925e29b3d9c156fc681b1f5da47ba3e55"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies",onClick:S},a)}):Sa.rt("Members cannot create workflows with Workflow Builder. Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. You can also <a>add a policy</a> to choose who can create workflows.",{fallbackHash:"b2a88043eb8b7da402470fd883bef05ffd6d845b"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies",onClick:S},a)}),onClick:u?function(){return C(true)}:function(){return _(true)},type:"button",control:{enabled:u,type:"button",toggleOnly:true,onEdit:M["noop"],onEnable:function e(){return _(true)},onDisable:function e(){return C(true)}}}),g&&n.a.createElement(Ca,{title:Sa.t("Enable Workflow Builder?"),confirmButton:n.a.createElement(ga["a"],{type:"primary",onClick:E,loading:h},Sa.t("Enable")),onClose:w},n.a.createElement(ya["a"],{level:"warning",icon:"warning",className:"p-workflow_builder_setting__enable_alert"},Sa.rt("Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. <a>Learn more</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/360019110974-Slack-Enterprise-Key-Management"},a)})),n.a.createElement("p",null,Sa.t("Members will be able to create workflows with Workflow Builder. You can also add a policy to choose who can create workflows.",{fallbackHash:"027fe784ed9b841be26a52d594a9c8fb7a20ca2f"}))),O&&n.a.createElement(Ca,{title:Sa.t("Disable Workflow Builder?"),confirmButton:n.a.createElement(ga["a"],{type:"danger",onClick:E,loading:h},Sa.t("Disable")),onClose:I},n.a.createElement("p",null,Sa.t("When you disable Workflow Builder, members can't create new workflows. Workflows that are currently running will still be available for members to use and for creators to update.",{fallbackHash:"183bc1ed9fb596c3c91996c1ec5d8b870c805e60"}))))};wa.displayName="WorkflowBuilderSetting";wa.defaultProps={defaultWorkflowBuilderEnabled:false};var Ia=function e(t){return{toggleWorkflowBuilderEnabled:function e(){return t(Mt["e"].apply(void 0,arguments))}}};var ja=Object(o["connect"])(null,Ia)(wa);var Ta=ja;var Aa=a(3294);var Na=new k["b"]("enterprise_settings");var Ma={loading:y["b"].bool,saving:y["b"].bool,customTos:y["b"].bool,membersTos:y["b"].string,guestsTos:y["b"].string,membersContentType:y["b"].string,guestsContentType:y["b"].string,primaryOwnerId:y["b"].string,workflowBuilderEnabled:y["b"].bool};var Pa={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text",primaryOwnerId:"",workflowBuilderEnabled:false};var Ra=function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};Ra.displayName="renderLoadingContainer";var xa=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,a=t.saving,r=t.customTos,i=t.membersTos,s=t.guestsTos,o=t.membersContentType,l=t.guestsContentType;var c={saving:a,customTos:r,membersTos:i,guestsTos:s,membersContentType:o,guestsContentType:l};return n.a.createElement(jt,c)}},{key:"maybeRenderWorkflowBuilder",value:function e(){var t=this.props,a=t.loading,r=t.workflowBuilderEnabled;if(a||null===r)return null;return n.a.createElement(Ta,{defaultWorkflowBuilderEnabled:this.props.workflowBuilderEnabled})}},{key:"render",value:function e(){var t=this.props.primaryOwnerId;return n.a.createElement("div",{className:"p-org_wide_settings_pane"},n.a.createElement(I,{title:Na.t("Organization Settings")}),Ra(),this.maybeRenderCustomTOS(),n.a.createElement(va,{primaryOwnerId:t}),this.maybeRenderWorkflowBuilder(),n.a.createElement(O["a"],null))}}]);return t}(r["PureComponent"]);xa.displayName="OrgWideSettingsPane";xa.defaultProps=Pa;var Da=xa;var Fa=xa;var La=Fa;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,a,r){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(d["a"],null,n.a.createElement(La,r)))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4785:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(48);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(2);var l=a.n(o);function c(e,t){var a=Object(i["useRef"])(e);var r=Object(i["useState"])(e),s=n()(r,2),l=s[0],c=s[1];Object(i["useEffect"])(function(){if(l!==a.current&&Object(o["isNumber"])(t)&&t>0){var e=setTimeout(function(){c(a.current)},t);return function(){clearTimeout(e)}}return o["noop"]},[t,l]);return[l,c]}},4786:function(e,t,a){},4793:function(e,t,a){},4800:function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(0);var c=a(38);var u=a(120);var d=a(269);var p=a(102);var m=a(1358);var h=a(1360);var v=a(1359);var f=a(1361);var b=a(456);var g=a(383);var _={richTextBlock:l["b"].object.isRequired,do24hrTime:l["b"].bool};var y={do24hrTime:false};function k(e){var t=e.richTextBlock,a=e.do24hrTime;if(!t||!t.elements||!t.elements.length)return null;var n=0;var o=function e(){n+=1;return n};var l=Object(r["first"])(t.elements);var c=void 0;if(l.type===u["a"].LIST){c="ordered"===l.style?s.a.createElement(i["Fragment"],null,"1. "):s.a.createElement(i["Fragment"],null,"\u2022 ");l=Object(r["first"])(l.elements)}if(!l||!l.elements||!l.elements.length)return null;var _=false;var y=Object(d["a"])(l).elements.map(function(e){if(_)return null;if(e.type===u["a"].EMOJI){var t=e.name;var n=e.skinTone;var l=n?":"+t+"::skin-tone-"+n+":":":"+t+":";return s.a.createElement(p["b"],{key:o(),text:l,emojiSize:p["a"].MEDIUM,isEmojiInlineWithText:true,showTooltip:true})}if(e.type===u["a"].CHANNEL)return s.a.createElement(m["a"],{key:o(),id:e.channelId,noLinking:true});if(e.type===u["a"].USER)return s.a.createElement(b["a"],{key:o(),id:e.userId,noLinking:true,noHighlights:true});if(e.type===u["a"].USERGROUP)return s.a.createElement(h["a"],{key:o(),id:e.usergroupId,noLinking:true,noHighlights:true});if(e.type===u["a"].BROADCAST)return s.a.createElement(v["a"],{key:o(),type:e.range,noLinking:true,noHighlights:true});if(e.type===u["a"].TEAM)return s.a.createElement(g["a"],{key:o(),id:e.teamId});if(e.type===u["a"].DATE){var c=e.timestamp,d=e.format,y=e.fallback;if(!c||!d)return null;return s.a.createElement(f["a"],{key:o(),ts:c.toString(),format:d,fallback:y,do24hrTime:a,noLinking:true})}if(e.type===u["a"].LINK)return s.a.createElement(i["Fragment"],{key:o()},e.text||e.url||"");if(e.type===u["a"].COLOR)return s.a.createElement(i["Fragment"],{key:o()},e.value||"");if(e.text){var k=e.text.split(/\n/);k.length>1&&(_=true);return s.a.createElement(i["Fragment"],{key:o()},Object(r["first"])(k)||"")}return null});return s.a.createElement(i["Fragment"],null,c,Object(r["compact"])(y),_&&s.a.createElement(i["Fragment"],null,"\u2026"))}k.displayName="RichTextPreamble";k.defaultProps=y;var O=function e(t){return{do24hrTime:Object(c["h"])(t,"time24")}};t["a"]=Object(o["connect"])(O)(k)},4801:function(e,t,a){"use strict";var r=a(12);var n=a(2);var i=a(411);var s=a(73);var o=a(98);var l=a(22);var c=a(35);var u=a(42);var d=a(28);var p=a(97);var m=a(200);var h=a(9);var v=a(5);var f=a.n(v);var b=a(4);var g=a.n(b);var _=a(7);var y=a.n(_);var k=a(8);var O=a.n(k);var C=a(13);var E=a.n(C);var S=a(0);var w=a(1);var I=a.n(w);var j=a(6);var T=a(118);var A=a(189);var N=a(1948);var M=a(4800);var P=a(38);var R=a(120);var x=a(269);var D=a(102);var F=a(1358);var L=a(1360);var B=a(1359);var U=a(1361);var q=a(456);var W=a(383);var H={richTextBlock:S["b"].object.isRequired,do24hrTime:S["b"].bool};var G={do24hrTime:false};function V(e){var t=e.richTextBlock,a=e.do24hrTime;if(!t||!t.elements||!t.elements.length)return null;var r=0;var i=function e(){r+=1;return r};var s=Object(n["first"])(t.elements);var o=void 0;if(s.type===R["a"].LIST){o="ordered"===s.style?I.a.createElement(w["Fragment"],null,"1. "):I.a.createElement(w["Fragment"],null,"\u2022 ");s=Object(n["first"])(s.elements)}if(!s||!s.elements||!s.elements.length)return null;var l=false;var c=Object(x["a"])(s).elements.map(function(e){if(l)return null;if(e.type===R["a"].EMOJI){var t=e.name;var r=e.skinTone;var s=r?":"+t+"::skin-tone-"+r+":":":"+t+":";return I.a.createElement(D["b"],{key:i(),text:s,emojiSize:D["a"].MEDIUM,isEmojiInlineWithText:true,showTooltip:true})}if(e.type===R["a"].CHANNEL)return I.a.createElement(F["a"],{key:i(),id:e.channelId,noLinking:true});if(e.type===R["a"].USER)return I.a.createElement(q["a"],{key:i(),id:e.userId,noLinking:true,noHighlights:true});if(e.type===R["a"].USERGROUP)return I.a.createElement(L["a"],{key:i(),id:e.usergroupId,noLinking:true,noHighlights:true});if(e.type===R["a"].BROADCAST)return I.a.createElement(B["a"],{key:i(),type:e.range,noLinking:true,noHighlights:true});if(e.type===R["a"].TEAM)return I.a.createElement(W["a"],{key:i(),id:e.teamId});if(e.type===R["a"].DATE){var o=e.timestamp,c=e.format,u=e.fallback;if(!o||!c)return null;return I.a.createElement(U["a"],{key:i(),ts:o.toString(),format:c,fallback:u,do24hrTime:a,noLinking:true})}if(e.type===R["a"].LINK)return I.a.createElement(w["Fragment"],{key:i()},e.text||e.url||"");if(e.type===R["a"].COLOR)return I.a.createElement(w["Fragment"],{key:i()},e.value||"");if(e.text){var d=e.text.split(/\n/);d.length>1&&(l=true);return I.a.createElement(w["Fragment"],{key:i()},Object(n["first"])(d)||"")}return null});return I.a.createElement(w["Fragment"],null,o,Object(n["compact"])(c),l&&I.a.createElement(w["Fragment"],null,"\u2026"))}V.displayName="RichTextPreamble";V.defaultProps=G;var K=function e(t){return{do24hrTime:Object(P["h"])(t,"time24")}};var z=Object(r["connect"])(K)(V);var Q=new j["b"]("threads");var Y={ts:S["b"].string.isRequired,threadTs:S["b"].string.isRequired,channelId:S["b"].string.isRequired,className:S["b"].string,theme:S["b"].string,rootMsg:S["b"].object.isRequired,rootFile:S["b"].object,teamDomain:S["b"].string.isRequired,showThread:S["b"].func,featureRichTextRendering:S["b"].bool,featureBlockKitRefactor:S["b"].bool};var J={className:null,theme:"light",showThread:n["noop"],rootFile:void 0,featureRichTextRendering:false,featureBlockKitRefactor:false};var X=function(e){O()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);return a}g()(t,[{key:"openThread",value:function e(t){var a=this.props,r=a.showThread,n=a.channelId,i=a.threadTs,s=a.ts;t.preventDefault();r({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRootText",value:function e(){var t=this.props,a=t.rootMsg,r=t.rootFile,n=t.featureRichTextRendering,i=t.featureBlockKitRefactor;if("tombstone"===Object(u["getMessageSubtype"])(a))return null;if(n&&Object(u["isRichTextMessage"])(a)&&!Object(u["isSimpleMessageUnfurl"])(a,n)){if(i)return I.a.createElement(z,{richTextBlock:a.blocks[0]});return I.a.createElement(M["a"],{richTextBlock:a.blocks[0]})}var s=Object(u["getMessageRootText"])(a,r);if(!s)return null;return I.a.createElement(T["a"],{text:s,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026",maxNewlines:1})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.rootMsg,n=a.teamDomain,i=a.channelId,s=a.ts,o=a.threadTs,l=a.theme;if(!r)return null;var c=Object(u["constructAbsoluteMsgPermalink"])({teamDomain:n,channelId:i,ts:s,threadTs:o});var d=E()("c-message__broadcast_preamble",this.props.className);var p=!!(r&&r.blocks&&r.blocks.length&&!Object(u["isRichTextMessage"])(r));var m=p?null:this.renderRootText();var h=void 0;if(m)h=I.a.createElement("div",{className:d},I.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(N["a"])()),I.a.createElement(A["a"],{className:"c-message__broadcast_preamble_link",href:c,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread,dir:"auto"},m));else{var v=Q.rt("replied to <a>a thread</a>",null,function(e){var a=e.key,r=e.text;return I.a.createElement(A["a"],{className:"c-message__broadcast_preamble_link",key:a,href:c,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},r)});h=I.a.createElement("div",{className:d},v)}if("light"===l)return I.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},h);return h}}]);return t}(w["PureComponent"]);X.displayName="ThreadBroadcastPreamble";X.defaultProps=J;var Z=X;function $(e,t){var a=t.threadTs,r=t.channelId;var p=Object(s["a"])(e,r,a);if(!p)return{};var v=void 0;if(p.files&&p.files.length){var f=Object(n["first"])(p.files);v=Object(o["getFileById"])(e,f)}var b=Object(u["getSourceTeamId"])(p)||Object(l["b"])(e);var g=Object(c["j"])(e,b);var _=Object(d["getTeamDomain"])(g);return{rootMsg:p,rootFile:v,teamDomain:_,theme:Object(i["a"])(e),featureRichTextRendering:Object(m["b"])(e),featureBlockKitRefactor:Object(h["isFeatureEnabled"])(e,"feature_block_kit_refactor")}}var ee={showThread:p["l"]};var te=t["a"]=Object(r["connect"])($,ee)(Z)},4813:function(e,t,a){},4815:function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(0);var o=a(483);var l=a(111);var c=a(762);var u=a(3);var d=a.n(u);var p=a(13);var m=a.n(p);var h=a(59);var v=a(11);var f=a(21);var b=a(320);var g=a(1285);var _=a(1903);var y=a(2105);var k=l["a"].small;var O={className:s["b"].string,id:s["b"].string,invert:s["b"].bool,isDeactivated:s["b"].bool,mpim:s["b"].object};var C={className:void 0,id:void 0,invert:false,isDeactivated:false,mpim:void 0};function E(e){var t=e.className,a=e.id,r=e.invert,i=e.isDeactivated,s=e.mpim;var o=Object(h["c"])(s);var c=Object(h["d"])(s);var u=Object(v["getMpimMemberCount"])(s);var p=r&&!i;var f=void 0;f=o||c?function e(t){return n.a.createElement(g["a"],d()({},t,{isNonExistent:o,size:k,invert:p}))}:function e(t){return n.a.createElement("span",{className:m()(t.className,"c-small_mpim_entity__count",{"c-small_mpim_entity__count--inverted":r}),style:{height:k,width:k}},u)};var y=i?l["c"].dim:null;p&&(y=l["c"].highlightDark);return n.a.createElement(b["d"],{avatar:f,className:t,size:"small",style:y,text:n.a.createElement(_["a"],{"data-qa":"name",id:a,invert:p})})}E.displayName="SmallMpimEntity";E.defaultProps=C;function S(e,t){var a=t.id;return{mpim:Object(f["e"])(e,a)}}var w=Object(i["connect"])(S)(E);var I=a(5);var j=a.n(I);var T=a(4);var A=a.n(T);var N=a(7);var M=a.n(N);var P=a(8);var R=a.n(P);var x=a(2);var D=a(31);var F=a(26);var L=a.n(F);var B=a(16);var U=a(9);function q(e){var t=e.state,a=e.mpim,r=e.matchData;var n=Object(U["getCurrentUserId"])(t);var i=Object(v["getMemberIdsFromMpim"])(a).filter(function(e){return n!==e});if(!r)return i;var s=false;var o=false;var l=[];r.forEach(function(e){var a=e.map(function(e){var a=Object(B["getPrefCompliantMemberNameById"])(t,e.id,s,o);return d()({name:a},e)}).sort(function(e,t){if(e.score<t.score)return 1;if(e.score>t.score)return-1;if(e.name>t.name)return 1;if(e.name<t.name)return-1;return 0}).filter(function(e){return isFinite(e.score)});a.forEach(function(e){if(i.includes(e.id)){l.push(e.id);i.splice(i.indexOf(e.id),1)}})});var c=i.map(function(e){return{id:e,name:Object(B["getPrefCompliantMemberNameById"])(t,e,s,o)}}).sort(function(e,t){if(e.name>t.name)return 1;if(e.name<t.name)return-1;return 0}).map(function(e){return e.id});return[].concat(l,L()(c))}var W=a(191);var H=a(4799);var G=a(54);var V=a(25);var K=a(1247);var z=20;var Q={id:s["b"].string.isRequired,invert:s["b"].bool,isDeactivated:s["b"].bool,isHidden:s["b"].bool,member:s["b"].object,memberPrimaryName:s["b"].string};var Y={member:void 0,memberPrimaryName:void 0,invert:false,isDeactivated:false,isHidden:false};var J=n.a.forwardRef(function(e,t){var a=e.id,r=e.invert,i=e.member,s=e.memberPrimaryName,o=e.isDeactivated,c=e.isHidden;var u=Object(B["isAppOrBot"])(i);var d=Object(B["isDeleted"])(i);var p=Object(h["c"])(i);var v=Object(h["d"])(i);var f=p||v;var b=r&&!o;var _=n.a.createElement(K["a"],{"data-qa":"mpim-entity__name",name:s,invert:b,isAppOrBot:u,isDeleted:d,isNonExistent:p,isUnknown:v});var y=void 0;y=f?n.a.createElement(g["a"],{isNonExistent:p,size:z}):n.a.createElement(W["b"],{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:l["a"].small,userId:a,tabIndex:-1,isInteractive:false});var k=m()("c-small_mpim_entity__member",{"c-small_mpim_entity__member--deleted":d,"c-small_mpim_entity__member--hidden":c});return n.a.createElement("div",{className:k,"data-id":a,ref:t},y,_)});J.defaultProps=Y;function X(e,t){var a=t.id,r=t.isUnknown;var n=Object(V["e"])(e,a);return{member:n,memberPrimaryName:Object(B["getPrefCompliantMemberName"])(e,n,false,false),isUnknown:Object(x["isBoolean"])(r)?r:Object(h["d"])(n)}}var Z=Object(i["connect"])(X,null,null,{withRef:true})(J);var $=l["a"].small;var ee={members:s["b"].array,mpim:s["b"].object,isActive:s["b"].bool};var te={members:[],mpim:void 0,isActive:false};var ae=function(e){R()(t,e);function t(e){j()(this,t);var a=M()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.ref=n.a.createRef();a.memberRefs={};a.state={memberVisibilityMap:e.members.reduce(function(e,t){e[t]=true;return e},{})};Object(D["a"])(a,["setupObserver","observerCallback"]);return a}A()(t,[{key:"componentDidMount",value:function e(){var t=this;this.setupObserver();this.listener=window.addEventListener("resize",function(){window.requestAnimationFrame(t.setupObserver)})}},{key:"componentWillUnmount",value:function e(){this.observer.disconnect();window.removeEventListener("resize",this.listener)}},{key:"getMemberRef",value:function e(t){this.memberRefs[t]||(this.memberRefs[t]=n.a.createRef());return this.memberRefs[t]}},{key:"setupObserver",value:function e(){var t=this;this.observer&&this.observer.disconnect();this.observer=new IntersectionObserver(this.observerCallback,{root:this.ref.current,rootMargin:"0px -32px 0px 0px",threshold:0});Object.values(this.memberRefs).forEach(function(e){var a=e&&e.current&&e.current.getWrappedInstance&&e.current.getWrappedInstance();a&&t.observer.observe(a)})}},{key:"observerCallback",value:function e(t){var a=d()({},this.state.memberVisibilityMap);t.forEach(function(e){1===e.intersectionRatio?a[e.target.dataset.id]=true:e.intersectionRatio<1&&e.boundingClientRect.width&&(a[e.target.dataset.id]=false)});Object(x["isEqual"])(this.state.memberVisibilityMap,a)||this.setState(function(){return{memberVisibilityMap:a}})}},{key:"renderTooltipContents",value:function e(t){return n.a.createElement(r["Fragment"],null,t.map(function(e){return n.a.createElement(Z,{id:e,key:e})}))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.members,i=a.mpim,s=a.isActive;var o=[];var c=[];r.forEach(function(e){t.state.memberVisibilityMap[e]?o.push(e):c.push(e)});var u=Object(v["isFrozen"])(i);var d=m()("c-small_mpim_entity",{"c-small_mpim_entity--frozen":u});return n.a.createElement("div",{className:d,ref:this.ref},u&&n.a.createElement(H["a"],{className:"c-small_channel_entity__icon",channel:i,size:$,forceSkBaseIcon:true}),o.map(function(e){return n.a.createElement(Z,{id:e,key:e,ref:t.getMemberRef(e)})}),c.length?n.a.createElement(G["c"],{tip:this.renderTooltipContents(c),offsetX:-4,tipClassName:"c-small_mpim_entity__tooltip",position:"top-right",shouldForceVisible:s},n.a.createElement("div",{className:"c-small_mpim_entity__additional_members"},n.a.createElement(W["b"],{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:l["a"].small,userId:c[0],tabIndex:-1,isInteractive:false,additionalOverlay:c.length}))):"",c.map(function(e){return n.a.createElement(Z,{id:e,key:e,ref:t.getMemberRef(e),isHidden:true})}))}}]);return t}(r["Component"]);ae.displayName="ExperimentalSmallMpimEntity";ae.defaultProps=te;function re(e,t){var a=t.id,r=t.matchData;var n=Object(f["e"])(e,a);var i=q({state:e,mpim:n,matchData:r});return{mpim:n,members:i}}var ne=Object(i["connect"])(re)(ae);ne.propTypes=d()({},ee,{matchData:s["b"].array});ne.defaultProps=d()({},te,{matchData:[]});var ie=ne;var se={className:s["b"].string,id:s["b"].string.isRequired,isActive:s["b"].bool,isDeactivated:s["b"].bool,isDisabled:s["b"].bool,secondaryContent:s["b"].node,matchData:s["b"].array,useCarpeMPDM:s["b"].bool};var oe={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0,matchData:[],useCarpeMPDM:false};function le(e){var t=e.className,a=e.id,r=e.isActive,i=e.isDeactivated,s=e.isDisabled,c=e.secondaryContent,u=e.matchData,d=e.useCarpeMPDM;var p=void 0;r?p=s||i?l["c"].highlightDim:l["c"].highlightDark:(s||i)&&(p=l["c"].dim);if(d&&IntersectionObserver)return n.a.createElement(o["a"],{className:t,style:p,primaryContent:n.a.createElement(ie,{id:a,matchData:u,isActive:r}),secondaryContent:c,size:"small"});return n.a.createElement(o["a"],{className:t,style:p,primaryContent:n.a.createElement(w,{id:a,invert:p===l["c"].highlightDark,isDeactivated:i}),secondaryContent:c,size:"small"})}le.displayName="SmallMpimListEntity";le.defaultProps=oe;function ce(e){return{useCarpeMPDM:Object(c["e"])(e)}}var ue=t["a"]=Object(i["connect"])(ce)(le)},4819:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(5);var c=a.n(l);var u=a(4);var d=a.n(u);var p=a(7);var m=a.n(p);var h=a(8);var v=a.n(h);var f=a(0);var b=a(2);var g=a(31);var _=a(238);var y=a(33);var k=a(6);var O=a(38);var C=a(63);var E=a(32);var S=a(3);var w=a.n(S);var I=a(37);var j=a.n(I);var T=a(45);var A=a(244);var N=a(14);var M={logger:f["b"].object.isRequired,WrappedComponent:f["b"].any.isRequired,keyboardPref:f["b"].string,keyboardLayout:f["b"].string};var P={keyboardPref:void 0,keyboardLayout:void 0};var R=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e.keyboardLayout){var r=function e(){if(Object(T["legacyCanAutoGetKeyboard"])()){var t=Object(T["legacyGetLocaleInformation"])().currentKeyboardLayout;return Object(_["e"])(t)}return null};a.state={legacyKeyboardLayout:r()};Object(T["legacyCanAutoGetKeyboard"])()&&(a.desktopKeyboardLayoutDisposable=Object(T["legacyOnDidChangeKeyboardLayout"])(function(){return a.setState(function(){return{legacyKeyboardLayout:r()}})}))}return a}d()(t,[{key:"componentWillUnmount",value:function e(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}},{key:"render",value:function e(){var t=this.props,a=t.keyboardLayout,r=t.WrappedComponent,i=t.keyboardPref,s=t.logger,o=j()(t,["keyboardLayout","WrappedComponent","keyboardPref","logger"]);var l=void 0!==a?a:this.state.legacyKeyboardLayout;var c=l||i;"en-US"===c&&(c="us");return n.a.createElement(r,w()({keyboardLocale:c},o))}}]);return t}(r["Component"]);R.displayName="WithKeyboardLocale";R.defaultProps=P;function x(e){function t(t){var a=Object(A["getDesktopSetting"])(t,"keyboardLayout");return{logger:Object(N["a"])({state:t}),keyboardPref:Object(O["h"])(t,"keyboard"),WrappedComponent:e,keyboardLayout:a&&Object(_["e"])(a)}}return Object(i["connect"])(t)(R)}var D=x;var F=a(1855);var L=a(1388);var B=a(200);var U=a(9);var q=a(55);var W=a(17);var H=a(1692);var G=a(1310);var V=a(1059);var K=a(813);var z=a(581);var Q=a(242);var Y=a(412);var J=Object(W["b"])("Switches to the All Threads view",function(e){e(Object(Q["a"])({id:Y["a"].allThreads}))});J.meta={name:"openThreadsView",key:"actionsOpenThreadsViewOpenThreadsView",description:"Switches to the All Threads view"};var X=J;var Z=a(82);var $=a(920);var ee=Object(W["b"])("Switches to the All Unreads view",function(e,t){var a="Punreads";var r=Object(Z["a"])(t());e(r===a?Object($["b"])():Object(Q["a"])({id:a}))});ee.meta={name:"openUnreadsView",key:"actionsOpenUnreadsViewOpenUnreadsView",description:"Switches to the All Unreads view"};var te=ee;var ae=a(24);var re=Object(ae["b"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var ne="browse_dms";var ie="browse_channels";var se="open_all_unreads";var oe="quick_switcher";var le="set_a_status";var ce="open_preferences";var ue="open_all_threads";var de=Object(W["b"])("Run a keyboard shortcut without the keyboard",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.id;var n=t();if(r===ne&&Object(U["isFeatureEnabled"])(n,"feature_sonic_dm_browser")){e(Object(V["a"])());return}if(r===ce){e(Object(z["a"])());return}if(r===ue){e(X());return}if(r===se){e(te());return}if(r===ie){e(Object(K["a"])());return}if(Object(q["a"])()){r===le?e(Object(G["a"])()):r===oe?e(Object(H["a"])()):r===se&&e(te());return}re(r)});de.meta={name:"executeKeyboardShortcut",key:"componentsFlexpaneKeyboardShortcutsUtilityExecuteKeyboardShortcutExecuteKeyboardShortcut",description:"Run a keyboard shortcut without the keyboard"};de.propTypes={id:f["b"].oneOf([se,le,ne,ie,oe,ce,ue]).isRequired};var pe=de;var me=new k["b"]("shortcuts_flexpane");var he=/key_(Cmd|Option|Ctrl|CtrlAlternative|ShiftAlternative)/;var ve=function e(t){var a=t.keyboardLocale,r=t.enableUnreadView;return function(e){var t=T["isDesktop"]?"":Object(y["getBrowser"])();var n=Object(y["getOperatingSystem"])();if(e.isSsbOnly&&!T["isDesktop"])return false;var i=e.browserBlackList||[];var s=Object(b["includes"])(i,t)||Object(b["includes"])(i,n);if(s)return false;if(Object(b["includes"])(e.localeBlackList,a))return false;if("open_all_unreads"===e.id&&!r)return false;return true}};var fe=function e(t,a){var r=Object(y["isWindows"])();var n=Object(y["isLinux"])();var i=r||n;if(("Cmd"===t||"Ctrl"===t)&&i&&"de"===a)return"Strg";if("Cmd"===t&&i)return"Ctrl";if("Option"===t&&i)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t};var be=function e(t){return function(e){if(!he.test(e))return e;var a=e.split("key_")[1];if(!a)return e;var r=fe(a,t);return e.replace(a,r)}};var ge=function e(t){return function(e){var a=e.keys,r=e.keysWin,n=e.keysLinux,i=j()(e,["keys","keysWin","keysLinux"]);if(Object(y["isWindows"])()&&r)return w()({},i,{keys:r});if(Object(y["isLinux"])()&&n)return w()({},i,{keys:n});var s=be(t);return w()({},i,{keys:a.map(s)})}};var _e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.keyboardLocale,r=t.enableUnreadView,n=t.featureWysiwygComposer,i=t.featureContextualMessageShortcuts,s=void 0!==i&&i;var o=[{title:me.t("Basics"),id:"basics",shortcuts:[{title:me.t("Quick Switcher"),keys:T["isDesktop"]?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:me.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:me.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:me.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:me.t("Edit last message (in empty text input)"),keys:s?["key_Cmd","key_\u2191"]:["key_\u2191"]},{title:me.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","fr"]},{title:me.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","fr"]},{title:me.t("Back in history"),keys:["key_Cmd","key_\u2190"],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["us","gb","es","ja"]},{title:me.t("Forward in history"),keys:["key_Cmd","key_\u2192"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["us","gb","es","ja"]},{title:me.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:me.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:me.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:me.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:me.t("Navigation"),id:"navigation",shortcuts:[{title:me.t("Move focus to the next element"),keys:["key_Tab"]},{title:me.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:me.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:me.t("Move focus to the next section"),keys:T["isDesktop"]?["key_F6"]:["key_Cmd","key_F6"]},{title:me.t("Move focus to the previous section"),keys:T["isDesktop"]?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:me.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:me.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:me.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:me.t("Scroll up"),keys:["key_\u2191","  or  ","key_Page Up"]},{title:me.t("Scroll down"),keys:["key_\u2193","  or  ","key_Page Down"]},{title:me.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:me.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:me.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:me.t("Close or re-open right pane",{fallbackHash:"1b790540b5c4590525e4706f1e3023888862a175"}),keys:["key_Cmd","key_"+Object(_["d"])(".",{kb:a})]},{title:me.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:me.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:me.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:me.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"],browserBlackList:["firefox"]},{title:me.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:me.t("Messaging"),id:"messaging",shortcuts:[{title:me.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:me.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:me.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:me.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(_["d"])("\\",{kb:a})]},{title:me.t("Autocomplete @username"),keys:["key_@"]},{title:me.t("Autocomplete channel"),keys:["key_#"]},{title:me.t("Autocomplete emoji"),keys:["key_:"]}]},{title:me.t("Mark Messages Read and Unread"),shortcuts:[{title:me.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:me.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:me.t("Mark a message as unread"),keys:["key_Option",me.t("  and click message")],keysWin:["key_Alt",me.t("  and click message")],keysLinux:["key_Alt",me.t("  and click message")]}]},{title:me.t("Channels & Direct Messages"),shortcuts:[{title:me.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:me.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:me.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:me.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:me.t("All Unreads"),id:"all_unreads",shortcuts:[{title:me.t("Expand channel"),keys:["key_\u2192"]},{title:me.t("Collapse channel"),keys:["key_\u2190"]},{title:me.t("Mark channel as read"),keys:["key_Esc"]},{title:me.t("Previous channel"),keys:["key_Shift","key_Page Up"]},{title:me.t("Next channel"),keys:["key_Shift","key_Page Down"]}]},{title:me.t("Files and Snippets"),shortcuts:[{title:me.t("Upload a file"),keys:["key_Cmd","key_U"],browserBlackList:["firefox"]},{title:me.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:me.t("Calls"),shortcuts:[{title:me.t("Toggle mute"),keys:["key_M"]},{title:me.t("Toggle video"),keys:["key_V"]},{title:me.t("Invite list"),keys:["key_+",me.t("  or  "),"key_A"]},{title:me.t("Emoji reactions"),keys:["key_E",me.t("  then 1-9")]}]},{title:me.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:me.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:me.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:me.t("A specific workspace"),keys:["key_Cmd",me.t("  and 1-9")]}]}];s&&o.push({title:me.t("When focusing on a message"),id:"message_shortcuts",shortcuts:[{title:me.t("Edit (your own message)"),keys:["key_E"]},{title:me.t("Delete (your own message)"),keys:["key_Delete"]},{title:me.t("Add an emoji reaction"),keys:["key_R"]},{title:me.t("Open a thread"),keys:["key_\u2192",me.t("or"),"key_T"]},{title:me.t("Pin / unpin"),keys:["key_P"]},{title:me.t("Share"),keys:["key_S"]},{title:me.t("Star / unstar"),keys:["key_A"]},{title:me.t("Mark as unread from this message"),keys:["key_U"]},{title:me.t("Remind me about this message"),keys:["key_M"]}]});var l=o[Object(b["findIndex"])(o,["id","basics"])].shortcuts;var c=o[Object(b["findIndex"])(o,["id","navigation"])].shortcuts;var u=o[Object(b["findIndex"])(o,["id","messaging"])].shortcuts;T["isDesktop"]&&c.push({title:me.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});u.push({title:me.t("Bold text"),keys:["key_Cmd","key_B"]});u.push({title:me.t("Italic text"),keys:["key_Cmd","key_I"]});u.push({title:me.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});u.push({title:me.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!T["isDesktop"]||Object(y["isSSBAndAtLeastVersion"])("3.0.0")){u.push({title:me.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});u.push({title:me.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}if(n){u.push({title:me.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_9"]});u.push({title:me.t("Format selection as code block"),keys:["key_Cmd","key_Shift","key_0"]})}else u.push({title:me.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]});l.push({title:me.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});var d=ve({keyboardLocale:a,enableUnreadView:r});var p=ge(a);return o.map(function(e){var t=e.shortcuts,a=j()(e,["shortcuts"]);return w()({},a,{shortcuts:t.filter(d).map(p)})})};var ye=a(812);var ke=a(26);var Oe=a.n(ke);var Ce=a(4647);var Ee=a(13);var Se=a.n(Ee);var we=a(1206);var Ie=a(54);var je=a(23);var Te=a(3704);var Ae=new k["b"]("keyboard_key");var Ne={"\u2191":true,"\u2193":true,"\u2190":true,"\u2192":true};var Me={"\u2191":"caret-up","\u2193":"caret-down","\u2190":"caret-left","\u2192":"caret-right",Cmd:"cmd-small"};var Pe=function e(t){var a={"\u2191":Ae.t("up arrow"),"\u2193":Ae.t("down arrow"),"\u2190":Ae.t("left arrow"),"\u2192":Ae.t("right arrow"),Ctrl:Ae.t("Control"),Cmd:Ae.t("Command"),".":Ae.t("period"),"[":Ae.t("left bracket"),"]":Ae.t("right bracket"),"+":Ae.t("plus"),"-":Ae.t("minus"),Esc:Ae.t("Escape"),Strg:"Steuerung"};return a[t]||t};var Re=function e(t){var a=t.label,r=t.className,i=t.slim;if(!a)return;var s=Ne[a];var o=Se()(r,{"c-keyboard_key":true,"c-keyboard_key__arrow_key":s,"c-keyboard_key--slim":i});var l=Pe(a);var c=Ae.t("{keyName} key",{keyName:l});return n.a.createElement("div",{role:"img","aria-label":c,className:o},Me[a]?n.a.createElement(je["b"],{type:Me[a]}):a)};Re.displayName="KeyboardKey";Re.defaultProps={className:void 0,slim:false};var xe=a(134);var De=a(420);var Fe=a(3702);var Le=new k["b"]("keyboard_shortcuts");var Be={title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object};var Ue={title:"",keys:[],hasInfoButton:false,infoButtonMessage:"",id:null,executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]}};var qe=function(e){v()(t,e);d()(t,null,[{key:"makeAriaLabel",value:function e(t){var a=t.title,r=t.keys;var n=(r||[]).map(function(e){var t=e.split("key_")[1];return t?Pe(t):e}).join(" ");return Le.t("{shortcutTitle}: {keyNames}",{shortcutTitle:a,keyNames:n})}}]);function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.execShortcut=e.execShortcut.bind(e);return e}d()(t,[{key:"execShortcut",value:function e(){this.props.executeKeyboardShortcut({id:this.props.id});this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderKeys",value:function e(){var t=this.props,a=t.keys,r=t.title;return a.map(function(e){var t=e.split("key_")[1];return t?n.a.createElement(Re,{label:t,key:r+" "+e+" "+Object(b["uniqueId"])()}):e})}},{key:"renderInfoButton",value:function e(){return n.a.createElement(Ie["c"],{tip:this.props.infoButtonMessage,delay:Ie["b"]},n.a.createElement(De["a"],{className:"p-shortcuts_flexpane__tip",icon:"question-circle"}))}},{key:"renderTitle",value:function e(){var t=this.props.hasInfoButton?this.renderInfoButton():null;var a=this.props.title;if(null==this.props.id)return n.a.createElement(r["Fragment"],null,a,t);return n.a.createElement(r["Fragment"],null,n.a.createElement(xe["a"],{type:"button",onClick:this.execShortcut},a),t)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut"},n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}]);return t}(n.a.PureComponent);qe.displayName="Shortcut";qe.defaultProps=Ue;var We=qe;var He=a(3706);var Ge=new k["b"]("shortcuts_flexpane");var Ve={items:f["b"].arrayOf(f["b"].object.isRequired),executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object,onItemTabWithin:f["b"].func,focusKey:f["b"].string,setFocusKey:f["b"].func};var Ke={items:[],executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]},onItemTabWithin:b["noop"],focusKey:null,setFocusKey:b["noop"]};var ze=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(a,["renderItem","isFocusableItem","focus","renderLabelForRow"]);a.list=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;if("keyboard_shortcuts"===a&&r.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.items;if("keyboard_shortcuts"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}if("keyboard_shortcuts"===n&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"setFocusOnFirstItem",value:function e(){var t=this.getItemKeys()[1];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"getItemKeys",value:function e(){return this.rows.map(function(e){return e.key})}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return r&&"shortcut"===r.type}},{key:"createRows",value:function e(){return this.props.items.reduce(function(e,t,a){var r=t.shortcuts.map(function(e,t){return w()({type:"shortcut",key:"shortcut-"+a+"-"+t},e)});return[].concat(Oe()(e),[{type:"header",key:"header-"+a,title:t.title,subtitle:t.subtitle}],Oe()(r))},[])}},{key:"renderItem",value:function e(t){var a=this.rows[t];if(!a||!a.type)return null;var i=this.props,s=i.executeKeyboardShortcut,o=i.telemeter;if("shortcut"===a.type)return n.a.createElement(We,{title:a.title,hasInfoButton:a.hasInfoButton,infoButtonMessage:a.infoButtonMessage,id:a.id,executeKeyboardShortcut:s,telemeter:o,keys:a.keys});var l=Se()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===t});if("header"===a.type)return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:l},a.title),a.subtitle&&n.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},a.subtitle));return null}},{key:"renderLabelForRow",value:function e(t){var a=this.rows[t];if(!a||!a.type)return null;if("shortcut"!==a.type)return null;return We.makeAriaLabel({title:a.title,keys:a.keys})}},{key:"render",value:function e(){var t=this;this.rows=this.createRows();var a=this.getItemKeys();return n.a.createElement(Ce["a"],null,function(e){var r=e.width,i=e.height;return n.a.createElement(we["a"],{className:"p-shortcuts_flexpane__list",ref:t.list,width:r,height:i,keys:a,rowRenderer:t.renderItem,getAriaLabelForRow:t.renderLabelForRow,animateOnScroll:false,ariaLabel:Ge.t("Keyboard Shortcuts"),isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin})})}}]);return t}(r["PureComponent"]);ze.displayName="KeyboardShortcutsList";ze.defaultProps=Ke;var Qe=ze;var Ye=a(3708);var Je={keyboardLocale:f["b"].string,sections:f["b"].arrayOf(f["b"].shape({title:f["b"].string,shortcuts:f["b"].arrayOf(f["b"].shape({os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,isSsbOnly:f["b"].bool,browserBlackList:f["b"].array}))})),enableUnreadView:f["b"].bool,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object,focusKey:f["b"].string,setFocusKey:f["b"].func,featureWysiwygComposer:f["b"].bool,featureContextualMessageShortcuts:f["b"].bool};var Xe={sections:void 0,keyboardLocale:null,enableUnreadView:false,executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]},focusKey:null,setFocusKey:b["noop"],featureWysiwygComposer:false,featureContextualMessageShortcuts:false};var Ze=new k["b"]("shortcuts_flexpane");var $e=Object(y["getOperatingSystem"])();var et=function(e){v()(t,e);function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(a,["renderBody","renderSubtitle","focus","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}d()(t,[{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderSubtitle",value:function e(){var t="mac"===$e?Ze.t("Cmd"):Ze.t("Ctrl");var a=Object(_["d"])("/",{kb:this.props.keyboardLocale});return Ze.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:a})}},{key:"renderBody",value:function e(){var t=this.props,a=t.keyboardLocale,r=t.enableUnreadView,i=t.featureWysiwygComposer,s=t.executeKeyboardShortcut,o=t.focusKey,l=t.setFocusKey,c=t.telemeter,u=t.featureContextualMessageShortcuts;var d=this.props.sections||_e({keyboardLocale:a,enableUnreadView:r,featureWysiwygComposer:i,featureContextualMessageShortcuts:u});return n.a.createElement(Qe,{ref:this.list,items:d,keyboardLocale:a,executeKeyboardShortcut:s,telemeter:c,onItemTabWithin:this.onItemTabWithin,focusKey:o,setFocusKey:l})}},{key:"render",value:function e(){var t=Ze.t("Keyboard Shortcuts");return n.a.createElement(ye["a"],{ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:t,kbNavOrder:Object(E["a"])()?void 0:4.6,viewId:"shortcuts"})}}]);return t}(n.a.PureComponent);et.displayName="KeyboardShortcutsFlexpane";et.defaultProps=Xe;function tt(e){return{enableUnreadView:Object(O["h"])(e,"enable_unread_view"),telemeter:Object(C["c"])({state:e}),focusKey:Object(F["a"])(e),featureWysiwygComposer:Object(B["a"])(e),featureContextualMessageShortcuts:Object(U["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts")}}var at=function e(t){return{executeKeyboardShortcut:function e(){return t(pe.apply(void 0,arguments))},setFocusKey:function e(a){return t(Object(L["a"])(a))}}};var rt=Object(i["connect"])(tt,at)(et);var nt=D(rt);var it=a(161);var st=function e(t,a,r){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["f"])(t);var c=r;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(it["a"],null,n.a.createElement(nt,c))),a)};var ot=st;var lt=a(46);Object(lt["a"])("interop.mountKeyboardShortcuts",ot)},4829:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(29);var c=a(46);var u=a(1874);var d=a(5);var p=a.n(d);var m=a(4);var h=a.n(m);var v=a(7);var f=a.n(v);var b=a(8);var g=a.n(b);var _=a(9);var y=a(0);var k=a(6);var O=a(388);var C=a(360);var E=a(3);var S=a.n(E);var w=a(25);var I=a(177);var j=a(1202);var T=a(41);var A=a(4773);var N=a(117);var M=a(27);var P=a(52);var R=a(170);var x=a(295);var D=y["b"].shape({value:y["b"].string,users:y["b"].array,userGroups:y["b"].array});var F={noOne:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.NO_ONE,allAdminsAndOwners:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.ORG_AND_WORKSPACE_ADMINS_OWNERS,orgAdminsAndOwners:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.ORG_ADMINS_AND_OWNERS,orgAdminsAndOwnersAndSelected:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.ORG_ADMINS_AND_OWNERS_AND_SELECTED,topLevelAdminsAndOwners:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.TOPLEVEL_ADMINS_AND_OWNERS,topLevelAdminsAndOwnersAndSelected:O["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED};var L=a(16);var B=a(87);var U=a(364);var q=a(908);var W=a(1820);var H=new k["b"]("enterprise_dashboard");var G={whoCanManageESC:D.isRequired,searchUserGroupsAndMembers:y["b"].func.isRequired,onSelectedItemsChange:y["b"].func.isRequired};var V={member:"member",userGroup:"user_group"};var K=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"getSelectedMembers",value:function e(){var t=this.props.whoCanManageESC;var a=t.users.filter(function(e){return!!e}).map(function(e){return{label:Object(L["getMemberRealName"])(e),value:e.id,type:"member",entity:e}});var r=t.userGroups.filter(function(e){return!!e}).map(function(e){return{label:Object(B["h"])(e),value:e.id,type:"user_group",entity:e}});return a.concat(r)}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case V.member:return n.a.createElement(q["a"],{size:"small",id:r,key:r});case V.userGroup:return n.a.createElement(W["a"],{size:"small",group:s,key:r});default:return i}}},{key:"render",value:function e(){var t=this.props,a=t.whoCanManageESC,r=t.searchUserGroupsAndMembers;if(a.value===F.orgAdminsAndOwnersAndSelected||a.value===F.topLevelAdminsAndOwnersAndSelected)return n.a.createElement(U["b"],{width:"100%",selectId:"enterprise_esc_filter_select",search:r,placeholderText:H.t("Search"),renderOption:this.renderEntity,selectedOptions:this.getSelectedMembers(),onSelectedItemsChange:this.props.onSelectedItemsChange});return null}}]);return t}(n.a.Component);K.displayName="SharedChannelSettingsMultiSelect";var z=K;var Q=a(123);var Y=new k["b"]("enterprise_dashboard");var J={featureEscGranularTeamPrefsClient:y["b"].bool.isRequired,whoCanManageESC:D.isRequired,canReceiveSharedChannelsInvites:y["b"].bool.isRequired,onInboundCheckboxChange:y["b"].func.isRequired};var X=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureEscGranularTeamPrefsClient,r=t.whoCanManageESC;var i=a&&r.value===F.noOne?"disabled":"";var s=false;a&&r.value===F.noOne?s=false:this.props.canReceiveSharedChannelsInvites&&(s=true);return n.a.createElement("div",{"data-qa":"inbound-checkbox"},n.a.createElement(P["a"],{text:Y.t("Allow in-bound shared channel invitations from external organizations"),subtext:Y.t("Choose whether or not your organization can receive shared channel requests from external organizations.",{fallbackHash:"6ad9902e4b56ec0cf014142d0afe1d2329e07017"}),type:"inline",cursor:"pointer"},n.a.createElement(Q["a"],{name:"can_receive_shared_channels_invites",value:"1",checked:s,onChange:this.props.onInboundCheckboxChange,disabled:i})))}}]);return t}(r["PureComponent"]);X.displayName="SharedChannelsSettingInbound";var Z=X;var $=new k["b"]("enterprise_dashboard");var ee={featureEscGranularTeamPrefsClient:y["b"].bool.isRequired,whoCanManageESC:D.isRequired,onRadioChange:y["b"].func.isRequired,searchUserGroupsAndMembers:y["b"].func.isRequired,canReceiveSharedChannelsInvites:y["b"].bool.isRequired,onInboundCheckboxChange:y["b"].func.isRequired,onSelectedItemsChange:y["b"].func.isRequired};var te=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"isRadioChecked",value:function e(t){return this.props.whoCanManageESC.value===t}},{key:"render",value:function e(){var t=this;return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"permissions_title_info"},$.rt("<b>Who can share channels with external organizations?</b>")),n.a.createElement("p",{className:"permissions_label"},$.t("Choose who can create, edit, disconnect, or archive channels shared with other organizations.")),n.a.createElement(x["a"],{className:"p-shared_channels_setting_radio-buttons"},this.props.featureEscGranularTeamPrefsClient&&n.a.createElement(P["a"],{text:$.t("No one"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:"who_can_manage_ext_shared_channels",value:F.noOne,checked:this.isRadioChecked(F.noOne),onChange:function e(){return t.props.onRadioChange({value:F.noOne})}})),n.a.createElement(P["a"],{text:$.t("Any admin or owner"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:"who_can_manage_ext_shared_channels",value:F.allAdminsAndOwners,checked:this.isRadioChecked(F.allAdminsAndOwners),onChange:function e(){return t.props.onRadioChange({value:F.allAdminsAndOwners})}})),n.a.createElement(P["a"],{text:$.t("Org Admins and Owners"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:"who_can_manage_ext_shared_channels",value:F.orgAdminsAndOwners,checked:this.isRadioChecked(F.orgAdminsAndOwners)||this.isRadioChecked(F.topLevelAdminsAndOwners),onChange:function e(){var a=t.props.featureEscGranularTeamPrefsClient?F.topLevelAdminsAndOwners:F.orgAdminsAndOwners;t.props.onRadioChange({value:a})}})),n.a.createElement(P["a"],{text:$.t("Org Admins and Owners, along with..."),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:"who_can_manage_ext_shared_channels",value:F.orgAdminsAndOwnersAndSelected,checked:this.isRadioChecked(F.orgAdminsAndOwnersAndSelected)||this.isRadioChecked(F.topLevelAdminsAndOwnersAndSelected),onChange:function e(){var a=t.props.featureEscGranularTeamPrefsClient?F.topLevelAdminsAndOwnersAndSelected:F.orgAdminsAndOwnersAndSelected;t.props.onRadioChange({value:a})}})),n.a.createElement(z,{whoCanManageESC:this.props.whoCanManageESC,searchUserGroupsAndMembers:this.props.searchUserGroupsAndMembers,onSelectedItemsChange:this.props.onSelectedItemsChange})),n.a.createElement(Z,{featureEscGranularTeamPrefsClient:this.props.featureEscGranularTeamPrefsClient,whoCanManageESC:this.props.whoCanManageESC,canReceiveSharedChannelsInvites:this.props.canReceiveSharedChannelsInvites,onInboundCheckboxChange:this.props.onInboundCheckboxChange}))}}]);return t}(n.a.Component);te.displayName="SharedChannelsSettingRadio";var ae=te;function re(e){var t="type:"+e.value;if(e.value===F.orgAdminsAndOwnersAndSelected||e.value===F.topLevelAdminsAndOwnersAndSelected){var a=e.users;var r=e.userGroups;a&&a.forEach(function(e){t+=",user:"+e.id});r&&r.forEach(function(e){t+=",subteam:"+e.id})}return t}var ne=new k["b"]("enterprise_dashboard");var ie={featureEscGranularTeamPrefsClient:y["b"].bool.isRequired,whoCanManageESC:D.isRequired,searchUserGroupsAndMembers:y["b"].func.isRequired,canReceiveSharedChannelsInvites:y["b"].bool.isRequired,closeModal:y["b"].func.isRequired,saveESCPrefs:y["b"].func.isRequired};var se=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={whoCanManageESC:e.whoCanManageESC,isSaving:false,selectionChanged:false,canReceiveSharedChannelsInvites:e.canReceiveSharedChannelsInvites};a.onSave=a.onSave.bind(a);a.onWhoCanManageESCRadioChange=a.onWhoCanManageESCRadioChange.bind(a);a.onInboundCheckboxChange=a.onInboundCheckboxChange.bind(a);a.onSelectedItemsChange=a.onSelectedItemsChange.bind(a);return a}h()(t,[{key:"onWhoCanManageESCRadioChange",value:function e(t){var a=t.value,r=t.users,n=t.userGroups;this.setState(function(e){var t=e.whoCanManageESC;return{whoCanManageESC:{value:a,users:r||t.users,userGroups:n||t.userGroups},selectionChanged:true}})}},{key:"onSelectedItemsChange",value:function e(t){var a=t.filter(function(e){return"member"===e.type}).map(function(e){return e.entity});var r=t.filter(function(e){return"user_group"===e.type}).map(function(e){return e.entity});this.onWhoCanManageESCRadioChange({value:F.topLevelAdminsAndOwnersAndSelected,users:a,userGroups:r})}},{key:"onInboundCheckboxChange",value:function e(){this.setState(function(e){return{canReceiveSharedChannelsInvites:!e.canReceiveSharedChannelsInvites}})}},{key:"onSave",value:function e(){var t=this;this.setState(function(){return{isSaving:true}});var a=re(this.state.whoCanManageESC);this.props.saveESCPrefs({pref:"who_can_manage_ext_shared_channels",value:a}).finally(function(){t.props.closeModal()});return false}},{key:"disableOnSave",value:function e(){return!this.state.selectionChanged||this.state.isSaving}},{key:"render",value:function e(){var t=this.props,a=t.featureEscGranularTeamPrefsClient,r=t.searchUserGroupsAndMembers;var i=this.state,s=i.whoCanManageESC,o=i.canReceiveSharedChannelsInvites;return n.a.createElement(N["a"],{closeModal:this.props.closeModal},n.a.createElement(N["g"],null,n.a.createElement(N["i"],{id:"story__title-bar",title:ne.t("Shared Channels")})),n.a.createElement(N["c"],null,n.a.createElement(N["d"],null,n.a.createElement(ae,{featureEscGranularTeamPrefsClient:a,whoCanManageESC:s,searchUserGroupsAndMembers:r,canReceiveSharedChannelsInvites:o,onRadioChange:this.onWhoCanManageESCRadioChange,onInboundCheckboxChange:this.onInboundCheckboxChange,onSelectedItemsChange:this.onSelectedItemsChange}))),n.a.createElement(N["e"],null,n.a.createElement(N["f"],null,n.a.createElement(N["b"],{type:"outline",onClick:this.props.closeModal},ne.t("Cancel")),n.a.createElement(M["b"],{onClick:this.onSave,disabled:this.disableOnSave(),loading:this.state.isSaving,"data-qa":"multi-workspace-channel-modal-go"},ne.t("Save Setting")))))}}]);return t}(n.a.Component);se.displayName="SharedChannelsSettingDialog";var oe=se;var le=a(59);var ce=a(151);var ue=a(444);var de=new k["b"]("enterprise_dashboard");var pe={optionIds:y["b"].arrayOf(y["b"].string),className:y["b"].string,optionsToDisplay:y["b"].arrayOf(y["b"].oneOfType([y["b"].object,y["b"].string])),featureOrgWideM11n:y["b"].bool};var me={optionIds:[],optionsToDisplay:[],className:void 0,featureOrgWideM11n:false};var he=function e(t){var a=t.option;if(!a)return null;if(Object(le["e"])(a))return n.a.createElement(ue["a"],null);if(Object(L["isMember"])(a))return Object(L["getMemberRealName"])(a);return Object(B["h"])(a)};function ve(e){var t=e.optionsToDisplay,a=e.className,r=e.featureOrgWideM11n;if(!r)return null;var i=void 0;switch(t.length){case 0:return de.t("Org Admins and Owners");case 1:i=de.rt("Org Owners/Admins, along with {name}",{name:n.a.createElement(he,{option:t[0]})});break;case 2:i=de.rt("Org Owners/Admins, along with {firstName} and {secondName}",{firstName:n.a.createElement(he,{option:t[0]}),secondName:n.a.createElement(he,{option:t[1]})});break;case 3:i=de.rt("Org Owners/Admins along, with {firstName}, {secondName}, and {thirdName}",{firstName:n.a.createElement(he,{option:t[0]}),secondName:n.a.createElement(he,{option:t[1]}),thirdName:n.a.createElement(he,{option:t[2]})});break;default:i=de.rt("Org Owners/Admins, along with {firstName}, {secondName}, and {numRemaining} others",{firstName:n.a.createElement(he,{option:t[0]}),secondName:n.a.createElement(he,{option:t[1]}),numRemaining:t.length-2})}return n.a.createElement("span",{className:a},i)}ve.displayName="SelectedOptionsText";ve.defaultProps=me;function fe(e,t){var a=t.optionIds||[];var r=a;var n=[];if(a.length>3){r=a.slice(0,2);n=a.slice(2)}var i=r.map(function(t){if(Object(ce["a"])(t))return Object(w["e"])(e,t);var a=false;return Object(I["e"])(e,t,a)});return{optionsToDisplay:i.concat(n),featureOrgWideM11n:Object(_["isFeatureEnabled"])(e,"feature_org_wide_m11n")}}var be=Object(o["connect"])(fe)(ve);var ge=a(4752);var _e=new k["b"]("enterprise_dashboard");var ye={featureOrgWideM11n:y["b"].bool.isRequired,featureEscGranularTeamPrefsClient:y["b"].bool.isRequired,whoCanManageESC:D.isRequired,canReceiveSharedChannelsInvites:y["b"].bool.isRequired,searchUserGroupsAndMembers:y["b"].func.isRequired,openModal:y["b"].func.isRequired,closeModal:y["b"].func.isRequired,saveESCPrefs:y["b"].func.isRequired};var ke=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openDialog=a.openDialog.bind(a);return a}h()(t,[{key:"getSettingsTitle",value:function e(){var t=this.props,a=t.whoCanManageESC,r=t.featureOrgWideM11n;var i=a.users||[];var s=a.userGroups||[];var o=i.concat(s);switch(a.value){case F.noOne:return _e.t("No one");case F.allAdminsAndOwners:return _e.t("Any admin or owner");case F.orgAdminsAndOwners:return _e.t("Org Admins and Owners");default:return n.a.createElement(ve,{optionsToDisplay:o,featureOrgWideM11n:r})}}},{key:"openDialog",value:function e(){this.props.openModal({element:n.a.createElement(oe,this.props)})}},{key:"renderHeader",value:function e(){return n.a.createElement("div",{className:"p-shared_channels__header"},n.a.createElement("h2",{className:"ent_header_secondary"},_e.t("Shared Channels")))}},{key:"renderLabel",value:function e(){return n.a.createElement("p",{className:"permissions_label"},_e.rt("In a shared channel, people from separate organizations can send messages, share files, and work together. <a>Learn more</a>",{fallbackHash:"eba06278a0bc0107d60cfe65c2ca152dc75bb00e",fallbackHashNs:"channel_options"},function(){return n.a.createElement("a",{href:"https://get.slack.help/hc/articles/115004152843",target:"_blank",rel:"noopener noreferrer"},"Learn more")}))}},{key:"render",value:function e(){if(!this.props.featureOrgWideM11n)return null;var t={type:"button",enabled:true,onEdit:this.openDialog,editOnly:true};return n.a.createElement("div",{className:"p-shared_channels_setting_esc"},this.renderHeader(),this.renderLabel(),n.a.createElement(j["a"],{label:_e.t("Who can share channels with external organizations?"),state:this.getSettingsTitle(),description:_e.t("Can create, edit, disconnect, or archive channels shared with other organizations."),onClick:this.openDialog,control:t,type:"button"}))}}]);return t}(r["PureComponent"]);ke.displayName="SharedChannelsSetting";function Oe(e,t){var a=t.users||[];var r=t.userGroups||[];return S()({},t,{users:a.map(function(t){return Object(w["e"])(e,t,false)}),userGroups:r.map(function(t){return Object(I["e"])(e,t,false)})})}var Ce=function e(t,a){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),featureEscGranularTeamPrefsClient:Object(_["isFeatureEnabled"])(t,"feature_esc_granular_team_prefs_client"),whoCanManageESC:Oe(t,a.whoCanManageESC),canReceiveSharedChannelsInvites:a.canReceiveSharedChannelsInvites}};var Ee=function e(t){return{searchUserGroupsAndMembers:function e(){return t(ge["b"].apply(void 0,arguments))},openModal:function e(){return t(T["openModal"].apply(void 0,arguments))},closeModal:function e(){return t(T["closeModal"].apply(void 0,arguments))},saveESCPrefs:function e(){return t(A["c"].apply(void 0,arguments))}}};var Se=Object(o["connect"])(Ce,Ee)(ke);var we=a(31);var Ie=a(1262);var je=a(49);var Te=a(2);var Ae=a(239);var Ne=a(11);var Me=a(1203);var Pe=a(35);var Re=a(561);var xe=a(95);var De=a(1061);var Fe=a(4713);var Le=new k["b"]("enterprise_dashboard");var Be={switchPane:y["b"].func,closeModal:y["b"].func.isRequired,featureOrgWideM11n:y["b"].bool.isRequired,orgName:y["b"].string,orgWideChannels:y["b"].array,defaultOrgWideChannels:y["b"].array,setSelectedChannel:y["b"].func,selectedChannel:y["b"].object};var Ue={switchPane:Te["noop"],orgName:null,orgWideChannels:[],defaultOrgWideChannels:[],setSelectedChannel:Te["noop"],selectedChannel:null};var qe=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(we["a"])(a,["renderChannel","renderSelectedOption","filterOutDefaultChannels"]);return a}h()(t,[{key:"onNext",value:function e(){this.props.switchPane("settings");this.selectLabelId="addChannelSelect"}},{key:"formatMutliSelectOptions",value:function e(t){return Object(Te["map"])(t,function(e){return{label:Object(Ne["getDisplayName"])(e),value:e.id}})}},{key:"filterOutDefaultChannels",value:function e(){return Object(Te["differenceBy"])(this.props.orgWideChannels,this.props.defaultOrgWideChannels,"id")}},{key:"renderChannel",value:function e(t){var a=Object(Te["find"])(this.props.orgWideChannels,{id:t.value});if(!a)return null;return n.a.createElement(De["a"],{channel:a})}},{key:"renderSelectedOption",value:function e(t){var a=Object(Te["find"])(this.props.orgWideChannels,{id:t.value});if(!a)return null;return n.a.createElement(Fe["a"],{channel:a})}},{key:"render",value:function e(){var t=this;if(!this.props.featureOrgWideM11n)return null;var a=Le.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46"});var i=Le.t("Next",{fallbackHash:"bc981983e7f547dc62e19a1e383acfe00782a6d5"});var s=Le.t("All full members of {org_name} will be automatically added to this channel. Guests will need to be invited manually.",{org_name:this.props.orgName,fallbackHash:"b3bd9e606ad0321b24065cc32f7f118de9c3dab5"});var o=Le.rt("Can\u2019t find the channel you\u2019re looking for? You\u2019ll need to make it an org-wide channel first. <a>Learn more</a>",{fallbackHash:"fc7e2aaee7e1a7a0e8dc089074fe681ac30d1fa5"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel",target:"_blank",rel:"noopener noreferrer",key:t},a)});var l=Le.t("Select a channel",{fallbackHash:"0e2b8f495c6ff19bc0b0d3aca6ced666c1dc61f8"});var c=Le.t("Select an org-wide channel...",{fallbackHash:"bc6f6a99830c6ae122f3fe7777b4e06da91a56cc"});return n.a.createElement(r["Fragment"],null,n.a.createElement(N["g"],{"data-qa-default-org-wide-channel-add-channel-pane-header":true},n.a.createElement(N["i"],{id:"customTOS__title-bar",title:Le.t("Add a default org-wide channel",{fallbackHash:"c22dc24715f7870569cab6605b6265bb2bfc0a83"})})),n.a.createElement(N["c"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("p",null,s),n.a.createElement("h3",{id:this.selectLabelId,className:"margin_bottom_75"},l),n.a.createElement(Re["a"],{width:"100%",className:"margin_bottom_150",selectId:this.selectLabelId,options:this.formatMutliSelectOptions(this.filterOutDefaultChannels()),labelId:this.selectLabelId,onOptionSelected:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value,n=a.label;return t.props.setSelectedChannel({value:r,label:n})},selectedOption:this.props.selectedChannel,renderOption:this.renderChannel,renderSelectedOption:this.renderSelectedOption,placeholderText:c}),n.a.createElement(xe["a"],{type:"boxed",level:"info",align:"left"},o))),n.a.createElement(N["e"],null,n.a.createElement(N["f"],null,n.a.createElement(M["d"],{type:"outline",onClick:this.props.closeModal,"data-qa":"dialog_cancel"},a),n.a.createElement(M["d"],{onClick:function e(){return t.onNext()},"data-qa":"add_channel_next",disabled:!this.props.selectedChannel},i))))}}]);return t}(r["PureComponent"]);qe.displayName="DefaultOrgWideChannelsAddChannelPane";qe.defaultProps=Ue;var We=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),orgName:Object(Pe["f"])(t),orgWideChannels:Object(Ie["g"])(t),defaultOrgWideChannels:Object(Ie["d"])(t)}};var He=function e(t){return{closeModal:function e(){return t(T["closeModal"].apply(void 0,arguments))}}};var Ge=Object(o["connect"])(We,He)(qe);var Ve=new k["b"]("enterprise_dashboard");var Ke={required:"required",optional:"optional"};var ze={owner:"owner",multi:"multi"};var Qe={member:"member",userGroup:"user_group"};var Ye={channelName:y["b"].string.isRequired,switchPane:y["b"].func,featureOrgWideM11n:y["b"].bool.isRequired,onMembershipTypeChange:y["b"].func,membershipType:y["b"].string,onPostingPermissionTypeChange:y["b"].func,postingPermissionType:y["b"].string,onMemberSelectorChange:y["b"].func,selectedEntities:y["b"].object,searchUserGroupsAndMembers:y["b"].func,onThreadsCheckboxChange:y["b"].func,allowThreads:y["b"].bool};var Je={switchPane:Te["noop"],onMembershipTypeChange:Te["noop"],membershipType:Ke.optional,onPostingPermissionTypeChange:Te["noop"],postingPermissionType:ze.owner,onMemberSelectorChange:Te["noop"],selectedEntities:{},searchUserGroupsAndMembers:Te["noop"],onThreadsCheckboxChange:Te["noop"],allowThreads:true};var Xe=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(we["a"])(a,["maybeRenderMemberSelector","renderThreadsCheckbox","getSelectedEntities"]);return a}h()(t,[{key:"onBack",value:function e(){this.props.switchPane("selectChannel")}},{key:"onNext",value:function e(){this.props.switchPane("confirm")}},{key:"getSelectedEntities",value:function e(){var t=this.props.selectedEntities;var a=t.users.filter(function(e){return!!e}).map(function(e){return{label:Object(L["getMemberRealName"])(e),value:e.id,type:"member",entity:e}});var r=t.userGroups.filter(function(e){return!!e}).map(function(e){return{label:Object(B["h"])(e),value:e.id,type:"user_group",entity:e}});return a.concat(r)}},{key:"maybeRenderMemberSelector",value:function e(){if(this.props.postingPermissionType===ze.owner)return false;var t="dowc-member-select";return n.a.createElement(U["b"],{className:"p-default_org_wide_channels_dialog__member_select",width:"100%",selectId:t,search:this.props.searchUserGroupsAndMembers,placeholderText:Ve.t("Search"),renderOption:this.renderEntity,selectedOptions:this.getSelectedEntities(),onSelectedItemsChange:this.props.onMemberSelectorChange})}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case Qe.member:return n.a.createElement(q["a"],{size:"small",id:r,key:r});case Qe.userGroup:return n.a.createElement(W["a"],{size:"small",group:s,key:r});default:return i}}},{key:"renderThreadsCheckbox",value:function e(){var t=this;return n.a.createElement(P["a"],{text:Ve.t("Allow threads",{fallbackHash:"809a7cba18ae3804f11707fb6f7a72f56d9b7a26"}),subtext:Ve.t("Everyone will be able to add replies to messages posted in this channel, regardless of overall posting permissions",{fallbackHash:"8315efee095dc4d3627f20b3dca7dc751578918c"}),htmlFor:"dowc-allow-threads",type:"inline"},n.a.createElement(Q["a"],{id:"dowc-allow-threads",className:"p-default_org_wide_channels_dialog__threads_checkbox","data-qa-dowc-allow-threads":true,checked:this.props.allowThreads,onChange:function e(){return t.props.onThreadsCheckboxChange(!t.props.allowThreads)}}))}},{key:"render",value:function e(){var t=this;if(!this.props.featureOrgWideM11n)return null;var a=Ve.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8"});var i=Ve.t("Next",{fallbackHash:"bc981983e7f547dc62e19a1e383acfe00782a6d5"});var s=Ve.t("Choose Settings for #{channelName}",{channelName:this.props.channelName,fallbackHash:"6d3b9e1601d474a9a5311f6e821ce86f252fca7f"});return n.a.createElement(r["Fragment"],null,n.a.createElement(N["g"],{"data-qa-default-org-wide-channel-settings-header":true},n.a.createElement(N["i"],{id:"customTOS__title-bar",title:s,"data-qa":"dialog_header"})),n.a.createElement(N["c"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_title"},Ve.t("Choose membership type",{fallbackHash:"fd2296ccec44f1146f8666854a29b77b74ae9572"})),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_subtitle"},Ve.t("Choose if you\u2019d like membership to be suggested or required for all members.",{fallbackHash:"2bb180f51f2255fd70565ee1b758c168f9a13560"})),n.a.createElement(x["a"],null,n.a.createElement(P["a"],{text:Ve.t("Optional",{fallbackHash:"0c6c4102d4dfec3b1aa41117e0e344046c58a151"}),subtext:Ve.t("Members can leave the channel.",{fallbackHash:"a567dd29813894b7d9f71339e450e9bbc21b5877"}),htmlFor:"dowc-optional",type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{id:"dowc-optional","data-qa-dowc-optional":true,name:"membership_type",value:Ke.optional,checked:this.props.membershipType===Ke.optional,onChange:function e(){return t.props.onMembershipTypeChange(Ke.optional)}})),n.a.createElement(P["a"],{text:Ve.t("Required",{fallbackHash:"eed6bfb41051ed5b74447340f3c2e29d11e99a7c"}),subtext:Ve.rt("Members will <strong>not</strong> be able to leave.",{fallbackHash:"0091dec17f757e29bb2d9d3a92a976352cf7c089"}),htmlFor:"dowc-required",type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{id:"dowc-required",name:"membership_type",value:Ke.required,"data-qa-dowc-required":true,checked:this.props.membershipType===Ke.required,onChange:function e(){return t.props.onMembershipTypeChange(Ke.required)}}))),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_title"},Ve.t("Posting permissions",{fallbackHash:"aec61a61412de92f7a358f3d4c3437a2c5bd9a16"})),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_subtitle"},Ve.t("Who can post in this channel?",{fallbackHash:"30b4a5f6c75379ff034d191f4c9b7199d2494180"})),n.a.createElement(x["a"],{className:"p-default_org_wide_channels_dialog__posting_permission_radio"},n.a.createElement(P["a"],{text:Ve.t("Org Admins only",{fallbackHash:"df8417ace6627d8ce26e65b18df785253db60faf"}),htmlFor:"dowc-posting-permissions-owner",type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{id:"dowc-posting-permissions-owner",name:"default_channels_who_can_post",value:ze.owner,"data-qa-dowc-posting-permissions-owner":true,checked:this.props.postingPermissionType===ze.owner,onChange:function e(){return t.props.onPostingPermissionTypeChange(ze.owner)}})),n.a.createElement(P["a"],{text:Ve.t("Org Admins, plus specific people",{fallbackHash:"d63d547e46a6abc08ab8e095c014cc64e7796ad6"}),htmlFor:"dowc-posting-permissions-multi",type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{id:"dowc-posting-permissions-multi",name:"default_channels_who_can_post",value:ze.multi,"data-qa-dowc-posting-permissions-multi":true,checked:this.props.postingPermissionType===ze.multi,onChange:function e(){return t.props.onPostingPermissionTypeChange(ze.multi)}}))),this.maybeRenderMemberSelector(),this.renderThreadsCheckbox())),n.a.createElement(N["e"],null,n.a.createElement(N["f"],null,n.a.createElement(M["d"],{type:"outline",onClick:function e(){return t.onBack()},"data-qa":"dialog_cancel"},a),n.a.createElement(M["d"],{onClick:function e(){return t.onNext()},"data-qa":"settings_pane_next"},i))))}}]);return t}(r["PureComponent"]);Xe.displayName="DefaultOrgWideChannelsSettingsPane";Xe.defaultProps=Je;var Ze=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n")}};var $e=function e(t){return{searchUserGroupsAndMembers:function e(){return t(ge["b"].apply(void 0,arguments))}}};var et=Object(o["connect"])(Ze,$e)(Xe);var tt=a(152);var at=a(21);var rt=a(23);var nt=new k["b"]("enterprise_dashboard");var it={switchPane:y["b"].func,closeModal:y["b"].func.isRequired,featureOrgWideM11n:y["b"].bool.isRequired,orgName:y["b"].string,channel:y["b"].object,membersCount:y["b"].number,allowThreads:y["b"].bool,selectedEntities:y["b"].object,getPrefCompliantMemberNameById:y["b"].func.isRequired,onDialogSubmit:y["b"].func};var st={switchPane:Te["noop"],orgName:null,channel:{},membersCount:null,allowThreads:false,selectedEntities:{},onDialogSubmit:Te["noop"]};function ot(e){if(!e)return{};if(Object(Ne["isPublicChannel"])(e))return e;return S()({},e,{is_channel:true})}ot.propTypes={channel:y["b"].object.isRequired};var lt=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"onBack",value:function e(){this.props.switchPane("settings")}},{key:"onSubmit",value:function e(){this.props.onDialogSubmit();this.props.closeModal()}},{key:"formatSelectedMemberNames",value:function e(t){var a=this;var r=Object(Te["map"])(t.users,function(e){return a.props.getPrefCompliantMemberNameById(e.id)});var n=Object(Te["map"])(t.userGroups,function(e){return Object(B["h"])(e)});return r.concat(n)}},{key:"formatPostingPermissionsString",value:function e(){var t=this.formatSelectedMemberNames(this.props.selectedEntities);var a=n.a.createElement("span",{"data-qa-posting-permissions-allow-threads-multi":true},nt.rt("Only Org Owners & Admins and {users} will be able to post in this channel. Anyone will be able to reply to messages using threads.",{users:Object(k["i"])(t),fallbackHash:"a624e2ef6fd99bb7a2d71b4b0be9f879af1c9981"}));var r=n.a.createElement("span",{"data-qa-posting-permissions-allow-threads-owners":true},nt.rt("Only Org Owners & Admins will be able to post in this channel. Anyone will be able to reply to messages using threads.",{fallbackHash:"a624e2ef6fd99bb7a2d71b4b0be9f879af1c9981"}));var i=n.a.createElement("span",{"data-qa-posting-permissions-multi":true},nt.rt("Only Org Owners & Admins and {users} will be able to post in this channel.",{users:Object(k["i"])(t),fallbackHash:"9702b21ef5d13f5e28686554f97e81d22da63b78"}));var s=n.a.createElement("span",{"data-qa-posting-permissions-owners":true},nt.rt("Only Org Owners & Admins will be able to post in this channel.",{fallbackHash:"9702b21ef5d13f5e28686554f97e81d22da63b78"}));if(this.props.allowThreads)return t.length?a:r;return t.length?i:s}},{key:"render",value:function e(){var t=this;if(!this.props.featureOrgWideM11n)return null;var a=300;var i=Math.ceil(this.props.membersCount/a);var s=nt.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8"});var o=nt.t("Save",{fallbackHash:"efc007a393f66cdb14d57d385822a3d9e36ef873"});var l=nt.rt("Make {channelName} a default channel for all members of {orgName}?",{channelName:n.a.createElement(tt["a"],{channel:ot(this.props.channel)}),orgName:this.props.orgName,fallbackHash:"8250b78edb23ae484002cfa0eefae57ea0b10673"});var c=nt.rt("<strong>{membersCount} members</strong> will be added to this channel. Future full members will be added to this channel automatically.",{membersCount:this.props.membersCount,fallbackHash:"0f8048fcbfb72fbe81793cef840f68ed69bf5046"});var u=nt.rt("It may take <strong>up to {timeToCompletionInMinutes} minutes</strong> for all members to be added to the channel. A message will be posted in the channel when this process is complete.",{timeToCompletionInMinutes:i,fallbackHash:"592a2affda7a997b274f8f5fa6b7e503f75ca706"});return n.a.createElement(r["Fragment"],null,n.a.createElement(N["g"],{"data-qa-default-org-wide-channel-confirm-pane-header":true},n.a.createElement(N["i"],{id:"customTOS__title-bar",title:nt.t("Add all organization members?",{fallbackHash:"5bdf5243ed6ea706718aa012a6da80448981310b"}),"data-qa":"dialog_header"})),n.a.createElement(N["c"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_description"},l),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(rt["b"],{type:"user",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_sky_blue"}),n.a.createElement("div",null,c)),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(rt["b"],{type:"clock-o",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_just_orange"}),n.a.createElement("div",null,u)),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(rt["b"],{type:"comment-alt",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_lilypad_green"}),n.a.createElement("div",{"data-qa-dowc-posting-permission-confirmation":true},this.formatPostingPermissionsString())))),n.a.createElement(N["e"],null,n.a.createElement(N["f"],null,n.a.createElement(M["d"],{type:"outline",onClick:function e(){return t.onBack()},"data-qa":"dialog_cancel"},s),n.a.createElement(M["d"],{onClick:function e(){return t.onSubmit()},"data-qa":"dialog_go"},o))))}}]);return t}(r["PureComponent"]);lt.displayName="DefaultOrgWideChannelsConfirmPane";lt.defaultProps=st;var ct=function e(t,a){var r=a.selectedChannelId;return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),orgName:Object(Pe["f"])(t),channel:Object(at["e"])(t,r,false),membersCount:Object(Ie["e"])(t),getPrefCompliantMemberNameById:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return L["getPrefCompliantMemberNameById"].apply(void 0,[t].concat(r))}}};var ut=function e(t){return{closeModal:function e(){return t(T["closeModal"].apply(void 0,arguments))}}};var dt=Object(o["connect"])(ct,ut)(lt);var pt={};Object.defineProperty(pt,"formatChannel",{get:function e(){return ot},set:function e(t){ot=t}});var mt=a(3121);var ht={featureOrgWideM11n:y["b"].bool.isRequired,closeModal:y["b"].func.isRequired,orgWideChannels:y["b"].array,setAndUpsertDefaultChannel:y["b"].func,getOrgDefaultChannelPrefsById:y["b"].func,getOrgDefaultChannelIsMandatoryById:y["b"].func,channel:y["b"].object};var vt={orgWideChannels:[],setAndUpsertDefaultChannel:Te["noop"],getOrgDefaultChannelPrefsById:Te["noop"],getOrgDefaultChannelIsMandatoryById:Te["noop"],channel:{}};var ft=function e(t,a,r){var n={who_can_post:"type:org_admin"};"multi"===t&&a&&a.users.length&&a.users.forEach(function(e){n.who_can_post+=",user:"+e.id});"multi"===t&&a&&a.userGroups.length&&a.userGroups.forEach(function(e){n.who_can_post+=",subteam:"+e.id});r&&(n.can_thread="type:all");return n};ft.propTypes={postingPermissionType:y["b"].string.isRequired,selectedEntities:y["b"].object.isRequired,allowThreads:y["b"].bool.isRequired};var bt={required:"required",optional:"optional"};var gt={owner:"owner",multi:"multi"};var _t={member:"member",userGroup:"user_group"};var yt=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedChannel:{},membershipType:bt.optional,postingPermissionType:gt.owner,selectedEntities:{users:[],userGroups:[]},allowThreads:true,defaultPane:Object(Te["isEmpty"])(a.props.channel)?"selectChannel":"settings"};Object(we["a"])(a,["getNewChannelPanes","getExistingChannelPanes","setSelectedChannel","onMembershipTypeChange","onMemberSelectorChange","onPostingPermissionTypeChange","onThreadsCheckboxChange","onDialogSubmit","formatChannelIdForSelectedChannelOption","renderSelectChannelPane","renderSettingsPane","renderConfirmPane","parseAndSetChannelState"]);return a}h()(t,[{key:"componentDidMount",value:function e(){this.props.channel&&this.parseAndSetChannelState(this.props.channel)}},{key:"onMembershipTypeChange",value:function e(t){this.setState(function(){return{membershipType:t}})}},{key:"onPostingPermissionTypeChange",value:function e(t){this.setState(function(){return{postingPermissionType:t}})}},{key:"onMemberSelectorChange",value:function e(t){var a=t.filter(function(e){return e.type===_t.member}).map(function(e){return e.entity});var r=t.filter(function(e){return e.type===_t.userGroup}).map(function(e){return e.entity});this.setState(function(){return{selectedEntities:{users:a,userGroups:r}}})}},{key:"onThreadsCheckboxChange",value:function e(t){this.setState(function(){return{allowThreads:t}})}},{key:"onDialogSubmit",value:function(){var e=Object(je["method"])(function(){var e=this.state,t=e.selectedChannel,a=e.membershipType,r=e.postingPermissionType,n=e.selectedEntities,i=e.allowThreads;var s=t.value;var o=a===bt.required;this.props.setAndUpsertDefaultChannel({channel:s,isMandatory:o,prefs:ft(r,n,i),reason:"onDialogSubmit"})});function t(){return e.apply(this,arguments)}return t}()},{key:"setSelectedChannel",value:function e(t){this.setState(function(){return{selectedChannel:t}})}},{key:"getNewChannelPanes",value:function e(){var t=this;return{selectChannel:{render:function e(a){return t.renderSelectChannelPane(a)}},settings:{render:function e(a){return t.renderSettingsPane(a)}},confirm:{render:function e(a){return t.renderConfirmPane(a)}}}}},{key:"getExistingChannelPanes",value:function e(){var t=this;return{settings:{render:function e(a){return t.renderSettingsPane(a)}},confirm:{render:function e(a){return t.renderConfirmPane(a)}}}}},{key:"parseAndSetChannelState",value:function e(t){if(!t)return;this.setSelectedChannel(this.formatChannelIdForSelectedChannelOption(t));var a=this.props.getOrgDefaultChannelPrefsById(t.id);var r=this.props.getOrgDefaultChannelIsMandatoryById(t.id);r?this.onMembershipTypeChange(bt.required):this.onMembershipTypeChange(bt.optional);if(a&&a.who_can_post&&a.who_can_post.user){this.onPostingPermissionTypeChange(gt.multi);var n=a.who_can_post.user.map(function(e){return{value:e,label:e}});this.onMemberSelectorChange(n)}this.onThreadsCheckboxChange(a&&a.can_thread&&"all"===!!a.can_thread.type[0])}},{key:"formatChannelIdForSelectedChannelOption",value:function e(t){if(!t)return{};return{label:Object(Ne["getDisplayName"])(t),value:t.id}}},{key:"renderSelectChannelPane",value:function e(t){return n.a.createElement(Ge,S()({},t,{setSelectedChannel:this.setSelectedChannel,selectedChannel:this.state.selectedChannel}))}},{key:"renderSettingsPane",value:function e(t){return n.a.createElement(et,S()({},t,{channelName:this.state.selectedChannel.label,onMembershipTypeChange:this.onMembershipTypeChange,membershipType:this.state.membershipType,onPostingPermissionTypeChange:this.onPostingPermissionTypeChange,postingPermissionType:this.state.postingPermissionType,onMemberSelectorChange:this.onMemberSelectorChange,selectedEntities:this.state.selectedEntities,allowThreads:this.state.allowThreads,onThreadsCheckboxChange:this.onThreadsCheckboxChange}))}},{key:"renderConfirmPane",value:function e(t){return n.a.createElement(dt,S()({},t,{selectedChannelId:this.state.selectedChannel.value,postingPermissionType:this.state.postingPermissionType,allowThreads:this.state.allowThreads,selectedEntities:this.state.selectedEntities,onDialogSubmit:this.onDialogSubmit}))}},{key:"render",value:function e(){if(!this.props.featureOrgWideM11n)return null;return n.a.createElement(Me["b"],{closeModal:this.props.closeModal,defaultPane:this.state.defaultPane,panes:Object(Te["isEmpty"])(this.props.channel)?this.getNewChannelPanes():this.getExistingChannelPanes()})}}]);return t}(r["PureComponent"]);yt.displayName="DefaultOrgWideChannelsAddChannelDialog";yt.defaultProps=vt;var kt=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),getOrgDefaultChannelPrefsById:function e(a){return Object(Ie["c"])(t,a)},getOrgDefaultChannelIsMandatoryById:function e(a){return Object(Ie["b"])(t,a)}}};var Ot=function e(t){return{closeModal:function e(){return t(T["closeModal"].apply(void 0,arguments))},addDefaultChannelApi:function e(){return t(Ae["a"].apply(void 0,arguments))},setAndUpsertDefaultChannel:function e(){return t(A["a"].apply(void 0,arguments))}}};var Ct=Object(o["connect"])(kt,Ot)(yt);var Et={};Object.defineProperty(Et,"formatApiPrefs",{get:function e(){return ft},set:function e(t){ft=t}});var St=a(921);var wt=new k["b"]("enterprise_dashboard");var It=function e(t){var a=t.id,r=t.colIdPrefix,i=t.name;return{id:r+"1",className:"p-channel_admin_table__item p-channel_admin_table__channel",value:n.a.createElement("div",{id:a,className:"p-channel_admin_table__channel_name_container"},n.a.createElement(rt["b"],{type:"channel",className:"p-channel_admin_table__channel-icon"}),n.a.createElement("span",{className:"p-channel_admin_table__channel-text"},i),n.a.createElement(rt["b"],{type:"org-shared-channel",className:"p-channel_admin_table__channel-icon"}))}};var jt=function e(t){var a=t.id,i=t.colIdPrefix,s=t.isRequired,o=void 0!==s&&s;var l=n.a.createElement("span",null,wt.t("Optional"));var c=n.a.createElement(r["Fragment"],null,n.a.createElement(rt["b"],{type:"lock",className:"p-channel_admin_table__required-membership-icon"}),n.a.createElement("span",{className:"p-channel_admin_table__membership-text__required"},wt.t("Required")));return{id:i+"2",className:"p-channel_admin_table__item p-channel_admin_table__membership",value:n.a.createElement("div",{id:a},o?c:l)}};var Tt=a(4514);var At=new k["b"]("enterprise_dashboard");var Nt={featureOrgWideM11n:y["b"].bool.isRequired,defaultOrgWideChannels:y["b"].arrayOf(y["b"].object)};var Mt={defaultOrgWideChannels:[]};var Pt=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"headerData",value:function e(){return[{id:"header_0",value:At.t("Channel")},{id:"header_1",value:At.t("Membership")}]}},{key:"makeRowData",value:function e(t,a){var r=t.id,n=t.is_mandatory;var i="row_channel"+(a+1);var s=i+"_col_";return{id:i,items:[It({id:r,name:Object(Ne["getDisplayName"])(t),colIdPrefix:s}),jt({id:r,isRequired:n,colIdPrefix:s})]}}},{key:"makeRows",value:function e(){var t=this.props.defaultOrgWideChannels;return t.map(this.makeRowData)}},{key:"render",value:function e(){return this.props.featureOrgWideM11n&&n.a.createElement("div",{className:"p-channel_admin_table"},n.a.createElement(St["b"],{autoHeight:true,headers:this.headerData(),rows:this.makeRows(),rowClassName:"p-channel_admin_table__row",rowHeaderItemClassName:"p-channel_admin_table__row_header c-table_view_hover_disabled",listClassName:"p-channel_admin_table__list",useKeyboardNavigableTable:true}))}}]);return t}(r["PureComponent"]);Pt.displayName="ChannelsAdminTable";Pt.defaultProps=Mt;var Rt=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),defaultOrgWideChannels:Object(Ie["d"])(t)}};var xt=Object(o["connect"])(Rt)(Pt);var Dt=new k["b"]("enterprise_dashboard");var Ft={featureOrgWideM11n:y["b"].bool.isRequired,openModal:y["b"].func.isRequired,defaultOrgWideChannels:y["b"].array,orgWideChannels:y["b"].array};var Lt={defaultOrgWideChannels:[],orgWideChannels:[]};var Bt=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(we["a"])(a,["openAddChannelModal","renderDialog"]);return a}h()(t,[{key:"openAddChannelModal",value:function e(){this.props.openModal({element:this.renderDialog()})}},{key:"renderDialog",value:function e(){return n.a.createElement(Ct,{orgWideChannels:this.props.orgWideChannels})}},{key:"renderHeader",value:function e(){if(!this.props.featureOrgWideM11n)return false;return n.a.createElement("div",{className:"p-shared_channels__header"},n.a.createElement("h2",{className:"ent_header_secondary margin_bottom_50"},Dt.t("Default Org-Wide Channels",{fallbackHash:"1d8ca9502e386336fbc73880ec17d91b01b18f26"})))}},{key:"renderDescription",value:function e(){return n.a.createElement("div",{className:"bottom_margin_25"},Dt.t("Default org-wide channels are the channels all organization members will be added to.",{fallbackHash:"4f87fb5595b85f836f00ed34b272039f3e19bfea"}))}},{key:"renderChannelCount",value:function e(){var t=this.props.defaultOrgWideChannels;var a=t&&t.length||0;return n.a.createElement("div",{className:"ent_header_tertiary"},Dt.t("{count, plural, =1 {# Channel} other {# Channels}}",{count:a,fallbackHash:"4f87fb5595b85f836f00ed34b272039f3e19bfea"}))}},{key:"renderAddChannelButton",value:function e(){return n.a.createElement("div",{"data-enterprise-settings-default-org-wide-channels-add-button":true},n.a.createElement(M["d"],{size:"small",onClick:this.openAddChannelModal},Dt.t("Add a channel",{fallbackHash:"83445b6f0ee7b0a0729a39829a26223028bdd9ba"})))}},{key:"render",value:function e(){return n.a.createElement("div",{"data-enterprise-settings-default-org-wide-channels-management":true},this.renderHeader(),this.renderDescription(),n.a.createElement("div",{className:"top_margin display_flex align_items_center justify_content_between"},this.renderChannelCount(),this.renderAddChannelButton()),n.a.createElement("div",{className:"top_margin display_flex align_items_center justify_content_between"},n.a.createElement(xt,null)))}}]);return t}(r["PureComponent"]);Bt.displayName="DefaultOrgWideChannelsSetting";Bt.defaultProps=Lt;var Ut=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n"),defaultOrgWideChannels:Object(Ie["d"])(t)}};var qt=function e(t){return{openModal:function e(){return t(T["openModal"].apply(void 0,arguments))}}};var Wt=Object(o["connect"])(Ut,qt)(Bt);var Ht=new k["b"]("enterprise_dashboard");var Gt={selectedPref:y["b"].oneOf(["owner","admin","regular","multi"]),selectedUsers:y["b"].arrayOf(y["b"].string),selectedUserGroups:y["b"].arrayOf(y["b"].string),closeModal:y["b"].func,searchUserGroupsAndMembers:y["b"].func,setAndUpsertLockedOrgPref:y["b"].func,featureOrgWideM11n:y["b"].bool};var Vt={selectedPref:void 0,closeModal:Te["noop"],searchUserGroupsAndMembers:Te["noop"],setAndUpsertLockedOrgPref:Te["noop"],featureOrgWideM11n:false,selectedUsers:[],selectedUserGroups:[]};var Kt={admin:"admin",owner:"owner",everyoneButGuests:"regular",selectedMembers:"multi"};var zt={member:"member",userGroup:"user_group"};var Qt="who_can_manage_shared_channels";var Yt=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(we["a"])(a,["handleUpdatePref","renderRadios","onRadioChange","onSelectedItemsChange"]);a.initialSelectedOptions=e.selectedUsers.concat(e.selectedUserGroups);a.state={prefValue:e.selectedPref,selectedOptions:a.initialSelectedOptions,isSaving:false};return a}h()(t,[{key:"onRadioChange",value:function e(t){var a=t.target.value;this.setPrefValue(a)}},{key:"onSelectedItemsChange",value:function e(t){var a=t.map(function(e){return e.value});this.setSelectedOptions(a)}},{key:"setPrefValue",value:function e(t){this.setState(function(){return{prefValue:t}})}},{key:"setSelectedOptions",value:function e(t){this.setState(function(){return{selectedOptions:t}})}},{key:"setIsSaving",value:function e(t){this.setState(function(){return{isSaving:t}})}},{key:"handleUpdatePref",value:function e(){var t=this;var a=this.props,r=a.closeModal,n=a.setAndUpsertLockedOrgPref;var i=this.formatPrefsForApi();this.setIsSaving(true);n({pref:"who_can_manage_shared_channels",value:i}).then(r).finally(function(){return t.setIsSaving(false)})}},{key:"formatSelectedOptions",value:function e(){var t=this.state.selectedOptions;return t.map(function(e){return{value:e,label:e}})}},{key:"formatPrefsForApi",value:function e(){var t=this.state,a=t.selectedOptions,r=t.prefValue;if(r===Kt.selectedMembers){var n=[];var i=[];a.forEach(function(e){Object(ce["a"])(e)?n.push(e):i.push(e)});return{subteam:i,user:n,type:["owner"]}}return{type:[r]}}},{key:"hasChanges",value:function e(){var t=this.state,a=t.selectedOptions,r=t.prefValue;var n=this.props.selectedPref;if(r===Kt.selectedMembers){if(Object(Te["isEmpty"])(a))return true;var i=Object(Te["xor"])(this.initialSelectedOptions,a);return Object(Te["isEmpty"])(i)}return n===r}},{key:"maybeRenderSelect",value:function e(){var t=this.props.searchUserGroupsAndMembers;var a=this.state.prefValue;if(a===Kt.selectedMembers)return n.a.createElement(U["b"],{selectId:"who_can_manage_shared_channels_select",search:t,placeholderText:Ht.t("Search"),renderOption:this.renderEntity,selectedOptions:this.formatSelectedOptions(),onSelectedItemsChange:this.onSelectedItemsChange});return null}},{key:"renderRadios",value:function e(){var t=this.state.prefValue;return n.a.createElement(x["a"],{className:"margin_bottom_100"},n.a.createElement(P["a"],{text:Ht.t("Everyone, except guests"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{"data-qa":"who-can-manage-shared-channels-regular",name:Qt,value:Kt.everyoneButGuests,checked:t===Kt.everyoneButGuests,onChange:this.onRadioChange})),n.a.createElement(P["a"],{text:Ht.t("Any admin or owner"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{"data-qa":"who-can-manage-shared-channels-admin",name:Qt,value:Kt.admin,checked:t===Kt.admin,onChange:this.onRadioChange})),n.a.createElement(P["a"],{text:Ht.t("Org Admins and Owners"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{"data-qa":"who-can-manage-shared-channels-owner",name:Qt,value:Kt.owner,checked:t===Kt.owner,onChange:this.onRadioChange})),n.a.createElement(P["a"],{text:Ht.t("Org Admins and Owners, along with..."),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{"data-qa":"who-can-manage-shared-channels-multi",name:Qt,value:Kt.selectedMembers,checked:t===Kt.selectedMembers,onChange:this.onRadioChange})))}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case zt.member:return n.a.createElement(q["a"],{size:"small",id:r,key:r});case zt.userGroup:return n.a.createElement(W["a"],{size:"small",group:s,key:r});default:return i}}},{key:"render",value:function e(){var t=this.props,a=t.featureOrgWideM11n,r=t.closeModal;var i=this.state.isSaving;if(!a)return null;return n.a.createElement(N["a"],{labelledby:"multiWorkspaceChannelModal__title-bar",centered:true,closeModal:r},n.a.createElement(N["g"],null,n.a.createElement(N["i"],{id:"multiWorkspaceChannelModal__title-bar",title:Ht.t("Who can manage multi-workspace channels?"),subtitle:Ht.t("Choose who can create, edit, or archive channels available to multiple workspaces"),"data-qa":"multi-workspace-channel-modal-header"})),n.a.createElement(N["c"],null,n.a.createElement(N["d"],{className:"margin_bottom_25","data-qa":"multi-workspace-channel-modal-body"},this.renderRadios(),this.maybeRenderSelect())),n.a.createElement(N["e"],{"data-qa":"multi-workspace-channel-modal-footer"},n.a.createElement(N["f"],null,n.a.createElement(N["b"],{type:"outline","data-qa":"multi-workspace-channel-modal-cancel"},"Cancel"),n.a.createElement(M["b"],{onClick:this.handleUpdatePref,loading:i,"data-qa":"multi-workspace-channel-modal-go",disabled:this.hasChanges()},Ht.t("Save Setting")))))}}]);return t}(r["PureComponent"]);Yt.displayName="MultiWorkspaceChannelsModal";Yt.defaultProps=Vt;var Jt=function e(t){return{featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n")}};var Xt=function e(t){return{closeModal:function e(){return t(T["closeModal"].apply(void 0,arguments))},searchUserGroupsAndMembers:function e(){return t(ge["b"].apply(void 0,arguments))},setAndUpsertLockedOrgPref:function e(){return t(A["b"].apply(void 0,arguments))}}};var Zt=Object(o["connect"])(Jt,Xt)(Yt);var $t=new k["b"]("enterprise_dashboard");var ea={whoCanManageSharedChannelsPref:y["b"].shape({type:y["b"].arrayOf(y["b"].string).isRequired,subteam:y["b"].arrayOf(y["b"].string),user:y["b"].arrayOf(y["b"].string)}),openModal:y["b"].func.isRequired,featureOrgWideM11n:y["b"].bool};var ta={featureOrgWideM11n:false,whoCanManageSharedChannelsPref:{type:[],subteam:[],user:[]}};var aa=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(we["a"])(a,["onEditSetting","renderSetting"]);return a}h()(t,[{key:"onEditSetting",value:function e(){var t=this.props,a=t.openModal,r=t.whoCanManageSharedChannelsPref;var i=r.type,s=r.user,o=r.subteam;var l=i[0];("owner"!==l||Object(Te["isEmpty"])(s))&&Object(Te["isEmpty"])(o)||(l="multi");a({element:n.a.createElement(Zt,{selectedPref:l,selectedUserGroups:o,selectedUsers:s})})}},{key:"getSettingText",value:function e(){var t=this.props.whoCanManageSharedChannelsPref,a=t.type,r=t.user,i=t.subteam;var s=a[0];switch(s){case"admin":return $t.t("Any admin or owner");case"owner":if(!Object(Te["isEmpty"])(r)||!Object(Te["isEmpty"])(i)){var o=r||[];var l=i||[];return n.a.createElement(be,{optionIds:o.concat(l)})}return $t.t("Org Admins and Owners");case"regular":return $t.t("Everyone, except guests");default:return $t.t("Any admin or owner")}}},{key:"renderSetting",value:function e(){var t=this.props.featureOrgWideM11n;if(!t)return null;var a={type:"button",enabled:true,onEdit:this.onEditSetting,editOnly:true};return n.a.createElement(j["a"],{label:$t.t("Who can manage multi-workspace channels?"),state:this.getSettingText(),description:$t.t("Can create, edit, and archive channels available to multiple workspaces"),onClick:this.onEditSetting,control:a})}},{key:"render",value:function e(){var t=this.props.featureOrgWideM11n;if(!t)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{"data-qa":"multi-workspace-section-header"},$t.t("Multi-Workspace Channels")),n.a.createElement("p",{className:"sk_foreground_max_solid"},$t.t("Settings for channels that are accessed by multiple workspaces in your organization")),this.renderSetting())}}]);return t}(r["PureComponent"]);aa.displayName="MultiWorkspaceChannelsSection";aa.defaultProps=ta;var ra=function e(t){return{whoCanManageSharedChannelsPref:Object(Ie["a"])(t,"who_can_manage_shared_channels"),featureOrgWideM11n:Object(_["isFeatureEnabled"])(t,"feature_org_wide_m11n")}};var na=function e(t){return{openModal:function e(){return t(T["openModal"].apply(void 0,arguments))}}};var ia=Object(o["connect"])(ra,na)(aa);var sa=new k["b"]("enterprise_dashboard");var oa={featureSharedChannelsBlockLargeOrgs:y["b"].bool.isRequired,whoCanManageESC:D.isRequired,canReceiveSharedChannelsInvites:y["b"].bool.isRequired};var la=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderSharedChannels",value:function e(){if(this.props.featureSharedChannelsBlockLargeOrgs)return null;return n.a.createElement(Se,{whoCanManageESC:this.props.whoCanManageESC,canReceiveSharedChannelsInvites:this.props.canReceiveSharedChannelsInvites})}},{key:"renderDefaultOrgWideChannels",value:function e(){return n.a.createElement(Wt,null)}},{key:"render",value:function e(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"ent_content_header ent_header ent_header_primary","data-qa":"admin-header"},sa.t("Channel Administration")),n.a.createElement("div",{className:"enterprise_fieldset"},this.renderSharedChannels()),n.a.createElement(ia,null),n.a.createElement("div",{className:"enterprise_fieldset"},this.renderDefaultOrgWideChannels()))}}]);return t}(r["PureComponent"]);la.displayName="ChannelAdmin";var ca=function e(t){return{featureSharedChannelsBlockLargeOrgs:Object(_["isFeatureEnabled"])(t,"feature_shared_channels_block_large_orgs"),whoCanManageESC:Object(O["getEnterpriseSharedChannelsPref"])(t),canReceiveSharedChannelsInvites:Object(C["c"])(t)}};var ua=Object(o["connect"])(ca)(la);Object(c["a"])("interop.channelsAdminSettings",{render:function e(t,a){if(!t)throw new Error("channelsAdminSettings render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(ua,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},4830:function(e,t,a){},4832:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(128);var o=a(29);var l=a(3);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(4);var m=a.n(p);var h=a(7);var v=a.n(h);var f=a(8);var b=a.n(f);var g=a(0);var _=a(2);var y=a(31);var k=a(6);var O=a(1927);var C=a(1928);var E=a(1815);var S=a(27);var w=a(134);var I=a(2080);var j=a(52);var T=a(1847);var A=a(1800);var N=a(1931);var M=a(170);var P=a(23);var R=a(44);var x=a(54);var D=a(1461);var F=a(39);var L=a(578);var B=a(4536);var U=a(3761);var q=new k["b"]("pages_oauth");var W=g["b"].arrayOf(L["a"]);var H={appIsReviewed:g["b"].bool,appIsInternalIntegration:g["b"].bool,authRowIdentifier:g["b"].string.isRequired,crumbKey:g["b"].string.isRequired,appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired,denyUrl:g["b"].string.isRequired,safeTeamScopeInfo:W,dangerousTeamScopeInfo:W,safeChannelScopeInfo:W,dangerousChannelScopeInfo:W,needSecondStep:g["b"].bool.isRequired,needTeamPicker:g["b"].bool.isRequired,singleChannel:g["b"].bool,appId:g["b"].string,appType:g["b"].string,appIsInstalled:g["b"].bool,initialSelectedTeamID:g["b"].string,teamsList:g["b"].arrayOf(g["b"].shape({href:g["b"].string.required,teamId:g["b"].string.required,teamImg:g["b"].string.required,teamName:g["b"].string.required})),signInUrl:g["b"].string,switchTeamUrlPathAndQuery:g["b"].string,onTeamSelected:g["b"].func,orgName:g["b"].string,appDevelopmentTeamName:g["b"].string,teamId:g["b"].string,enterpriseId:g["b"].string,userId:g["b"].string,channelTypes:g["b"].shape({channels:g["b"].bool,group_channels:g["b"].bool,im_channels:g["b"].bool,mpim_channels:g["b"].bool}),loadIms:g["b"].func,loadMpims:g["b"].func,dispatchSearchChannelsForService:g["b"].func};var G={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:_["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,orgName:void 0,appDevelopmentTeamName:void 0,teamId:void 0,userId:void 0,enterpriseId:void 0,channelTypes:{},loadIms:_["noop"],loadMpims:_["noop"],dispatchSearchChannelsForService:_["noop"]};var V=300;var K=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var z=function e(t,a,r,n){var i=Object(_["compact"])(t.concat(a,r,n));return Object(_["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var Q=function(e){b()(t,e);function t(e){d()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,n=r.appId,i=r.appName,s=r.safeTeamScopeInfo,o=r.dangerousTeamScopeInfo,l=r.safeChannelScopeInfo,c=r.dangerousChannelScopeInfo,u=r.userId,p=r.teamId,m=r.enterpriseId;a.trackingProps={app_scopes:z(s,o,l,c),app_name:i,app_id:n};a.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:""};a.clogger=Object(F["a"])({userId:u,teamId:p,enterpriseId:m,locale:Object(k["s"])()});Object(y["a"])(a,["onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef","searchForChannelsAsync"]);return a}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appId,n=t.appType,i=t.channelTypes,s=t.loadIms,o=t.loadMpims;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:a,app_id:r,app_type:n});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps);i.im_channels&&s();i.mpim_channels&&o()}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onInputKeyUp",value:function e(){var t=Object(_["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"getSearchConfiguration",value:function e(){var t=this.props.channelTypes;if(!t)return;var a={channels:{canPost:true,includeArchived:false,includeFromAnotherTeam:false,includePrivate:!!t.group_channels,includePublic:!!t.channels,includeMpims:!!t.mpim_channels},members:{includeSelf:true}};t.im_channels||delete a.members;return a}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"changeRadioButtonCheck",value:function e(t){var a=t.target.id;this.setState(function(){return{selectedRadioValue:a}})}},{key:"searchForChannelsAsync",value:function e(t){return this.props.dispatchSearchChannelsForService({query:t,entitiesConfiguration:this.getSearchConfiguration()}).then(function(e){var t=e.options;return{items:t.map(function(e){return c()({},e,{id:e.value})}),replace_all_items:true}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,a=t.dangerousTeamScopeInfo,r=t.safeTeamScopeInfo;return Object(_["isEmpty"])(a)&&Object(_["isEmpty"])(r)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,a=t.dangerousChannelScopeInfo,r=t.safeChannelScopeInfo;return Object(_["isEmpty"])(a)&&Object(_["isEmpty"])(r)}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep;if(this.noChannelScopesUsed())return false;if(1===t&&!n&&r)return false;if(0===t&&i&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var a=this.state,r=a.selectedChannelValues,n=a.selectedRadioValue,i=a.lfsInputValue;var s=this.props.singleChannel;this.isChannelInputRequired()&&(s?t=0===r.length:"specific-channels"===n&&(t=0===r.length||i.length>0));return t}},{key:"isLastStep",value:function e(){var t=this.state.step;var a=this.props.needSecondStep;if(this.noWorkspaceScopesUsed())return true;return!a||1===t}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var a=this.state.step;if(t&&1===a)return n.a.createElement(w["a"],{className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},n.a.createElement(P["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,a=t.needTeamPicker,r=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(a&&0===l){var u=i;o&&(u=Object(_["map"])(i,function(e){return c()({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return n.a.createElement("div",{"data-qa":"team_switcher",className:"p-oauth_flow__team_switcher position_relative"},n.a.createElement(D["a"],{initialSelectedTeamID:r,teamsList:u,signInUrl:s}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,a=t.appDevelopmentTeamName,r=t.appIsInternalIntegration,i=t.appIsReviewed,s=t.orgName,o=t.teamName;if(i)return null;var l=void 0;l=r?a?q.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(k["q"])(s),teamName:Object(k["q"])(a)}):q.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(k["q"])(o)}):q.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(R["a"],{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",rel:"noopener noreferrer"},a)});return n.a.createElement(I["a"],{type:r?"neutral":"warning",showCloseButton:false,isFixedPosition:false},l)}},{key:"renderConfirmTitle",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appName,n=t.needSecondStep,i=t.singleChannel,s=t.teamName;var o=this.state.step;var l=void 0;l=1===o?i?q.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:r}):a?q.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:r}):q.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:r}):a?this.noWorkspaceScopesUsed()?n?i?q.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:r,teamName:s}):q.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:r,teamName:s}):this.noChannelScopesUsed()?q.t("{appName} is already installed on {teamName}.",{teamName:Object(k["q"])(s),appName:Object(k["q"])(r)}):q.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(k["q"])(s),appName:Object(k["q"])(r)}):q.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(k["q"])(s),appName:Object(k["q"])(r)}):q.t("On {teamName}, {appName} would like to:",{teamName:Object(k["q"])(s),appName:Object(k["q"])(r)});return l}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var a=this.props,r=a.needSecondStep,i=a.appIsInstalled,s=a.appId,o=a.appType,l=a.singleChannel;var c=this.isRequiredChannelMissing();var u=void 0;var d=void 0;var p=void 0;var m=void 0;var h=q.t("Allow");var v=q.t("Continue");var f=q.t("Install");if(0===t&&r&&!this.noWorkspaceScopesUsed()){u=v;d=this.onContinueClick;p="button"}else{u=i?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?v:h:f;d=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:i,app_id:s,app_type:o})};p="submit"}c&&(m=l?q.t("Select channel"):q.t("Select channels"));return n.a.createElement(S["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:p,onClick:d,disabled:c},u,m&&n.a.createElement(x["c"],{tip:m},n.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,a=t.selectedChannelValues,r=t.selectedRadioValue;var i=this.props.appName;var s=q.t("Select channels");var o=q.t("All Public Channels");var l=q.t("Any channel accessible to full members of your team.");var c=q.t("Specific channels");var u=q.t("Search for channels");var d=q.t("No channels");var p=q.t("{app_name} will still be able to access a private conversation with you",{app_name:i});var m=a.map(function(e){return'"'+e.id+'"'}).join(",");return n.a.createElement("div",{className:"margin_auto no_right_padding"},n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},s),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(j["a"],{text:o,htmlFor:"all-channels",type:"inline",subtext:l,cursor:"pointer"},n.a.createElement(M["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===r,onChange:this.changeRadioButtonCheck}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},n.a.createElement("div",{className:"c-label__text full_width"},n.a.createElement("span",{className:"bold"},c)),n.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+m+"]",checked:"specific-channels"===r,onChange:this.changeRadioButtonCheck})),n.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},n.a.createElement(A["a"],{ref:this.setLfsRef,dataPromise:this.searchForChannelsAsync,scrollThreshold:V,placeholderText:u,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:K}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(j["a"],{text:d,htmlFor:"no-channels",type:"inline",subtext:p,cursor:"pointer"},n.a.createElement(M["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===r,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props.needSecondStep;var a=this.state.selectedChannelValues;var r=a.map(function(e){return e.id});var i=q.t("Post to");var s=q.t("Select Channel");var o=n.a.createElement(A["a"],{ref:this.setLfsRef,scrollThreshold:V,placeholderText:s,onValueChange:this.updateSpecificChannelsValues,listItemClass:K,single:true,dataPromise:this.searchForChannelsAsync});return t?n.a.createElement("div",{className:"margin_top_200"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},q.t("Select a channel")),n.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},o),n.a.createElement("input",{type:"hidden",name:"channel",value:r})):n.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},n.a.createElement("span",{className:"margin_right_50"},i),n.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},o),n.a.createElement("input",{type:"hidden",name:"channel",value:r}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep;if(this.noChannelScopesUsed())return null;if(1===t){if(!n&&r)return null}else if(i&&!this.noWorkspaceScopesUsed())return null;return n?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"render",value:function e(){var t=this.state.step;var a=this.props,r=a.appIcon,i=a.appName,s=a.teamIcon,o=a.teamName,l=a.safeTeamScopeInfo,c=a.dangerousTeamScopeInfo,u=a.safeChannelScopeInfo,d=a.dangerousChannelScopeInfo,p=a.authRowIdentifier,m=a.crumbKey,h=a.denyUrl,v=a.needSecondStep;var f={appIcon:r,appName:i,teamIcon:s,teamName:o};var b=void 0;b=0!==t||this.noWorkspaceScopesUsed()&&v?u.concat(d):Object(_["compact"])(l.concat(c));var g=q.t("Cancel");return n.a.createElement("div",null,this.renderAlert(),n.a.createElement("header",{className:"p-oauth_flow__nav"},n.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),n.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),n.a.createElement("section",{className:"p-oauth_flow__header align_center"},n.a.createElement(B["a"],f),n.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),n.a.createElement("section",{className:"p-oauth_flow__body"},n.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},n.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),n.a.createElement("input",{type:"hidden",name:"crumb",value:m}),n.a.createElement("div",{className:"p-oauth_flow__scopes_container"},n.a.createElement(N["a"],{scopeInfo:b}),this.renderSingleChannelOrChannelSelections(),n.a.createElement("div",{className:"p-oauth_flow__buttons_container"},n.a.createElement(S["d"],{type:"outline",onClick:this.onDenyClick,href:h,className:"p-oauth_flow__button",target:"_self"},g),this.renderContinueOrInstallButton())))))}}]);return t}(r["PureComponent"]);Q.displayName="OAuthConfirm";Q.defaultProps=G;Q.displayName="OAuthConfirm";var Y=Q;var J=function e(t){return{dispatchSearchChannelsForService:function e(){return t(E["a"].apply(void 0,arguments))},loadIms:function e(){return t(Object(O["a"])({latest:false,reason:"oauth_channel_picker"}))},loadMpims:function e(){return t(Object(C["a"])({latest:false,reason:"oauth_channel_picker"}))}}};var X=Object(i["connect"])(null,J)(Q);var Z=a(161);var $=function e(t,a,r){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(Z["a"],null,n.a.createElement(X,r))),a)};var ee=$;var te=a(46);Object(te["a"])("interop.mountOAuthConfirm",ee)},4947:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(2);var v=a(31);var f=a(13);var b=a.n(f);var g=a(3);var _=a.n(g);var y=a(12);var k=a(1186);var O=a(1604);var C=a(59);var E=a(213);var S=a(1691);var w=a(330);var I=a(1597);var j=a(774);var T=a(1285);var A=a(320);var N=a(23);var M=a(111);var P=a(62);var R=a(4793);var x=M["a"].small;var D={className:d["b"].string,isDeactivated:d["b"].bool,invert:d["b"].bool,app:P["a"].maybeUnknown(P["a"].App.isRequired).isRequired,action:P["a"].maybeUnknown(P["a"].AppGlobalAction.isRequired).isRequired};var F={className:void 0,isDeactivated:false,invert:false};function L(e){var t=e.className,a=e.app,r=e.action,n=e.isDeactivated,i=e.invert;var s=i&&!n;var o=void 0;var l=void 0;var c=Object(C["b"])(r)?Object(O["a"])(r):null;if(Object(C["b"])(a)&&Object(C["b"])(r)){o=Object(k["b"])(a);var u=Object(w["b"])(a,x);l=function e(t){return m.a.createElement(j["a"],_()({},t,{classes:t.className,image:u,ariaHidden:true}))}}else{o=m.a.createElement(I["a"],{type:Object(C["d"])(a)?"unknown":"non-existent",invert:s});l=function e(t){return m.a.createElement(T["a"],_()({},t,{isNonExistent:Object(C["c"])(a),size:x,subtler:n,invert:s}))}}var d=function e(t){return m.a.createElement("span",{className:"c-app_action_entity__avatar_container"},l(t),m.a.createElement(N["b"],{type:"bolt-filled",className:"c-app_action_entity__bolt_icon",size:"inherit"}))};var p=n&&!i?M["c"].dim:null;return m.a.createElement(A["d"],{avatar:d,className:t,size:"small",style:p,text:m.a.createElement("span",null,m.a.createElement("span",{className:"c-app_action_entity__app_label","data-qa":"action_entity_app_label"},o),c?m.a.createElement("span",{className:"c-app_action_entity__action_label","data-qa":"action_entity_action_label"},c):null)})}L.displayName="SmallAppActionEntity";L.defaultProps=F;var B=function e(t,a){var r=a.app,n=a.appId,i=a.action,s=a.actionId;return{app:r||Object(E["getAppById"])(t,n),action:i||Object(S["b"])(t,{appId:n,actionId:s})}};var U=Object(y["connect"])(B)(L);var q={id:d["b"].string.isRequired,index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onDelete:d["b"].func,onMouseUp:d["b"].func.isRequired,onMouseMove:d["b"].func.isRequired};var W={onDelete:h["noop"]};var H=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.app_action;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-action":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(U,{actionId:d.id,appId:d.app_id,className:"c-search_autocomplete__app_action",isActive:n}))});H.defaultProps=W;var G=H;var V=a(152);var K=a(11);var z=a(16);var Q={unreadCount:d["b"].number};var Y={unreadCount:void 0};var J=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.unreadCount;if(!t)return null;var a=t<10?t:"9+";return m.a.createElement("span",{className:"c-search_autocomplete__unread_count"},a)}}]);return t}(p["PureComponent"]);J.displayName="UnreadCount";function X(e,t){var a=t.model;var r=void 0;r=Object(z["isMember"])(a)?Object(z["getImUnreadCountByMember"])(e,a):Object(K["getBadgeCountWithMuted"])(a);return{unreadCount:r}}J.defaultProps=Y;var Z=Object(y["connect"])(X)(J);var $=a(6);var ee=a(4815);var te=new $["b"]("jumper");var ae=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove,l=e.hasChannelNameCollision;var c=i.suggestion_replacement,u=i.exact_string,d=i.featureVector;var p=i.channel||i.mpim;var h=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match;var v=Object(K["isMemberOfChannel"])(i.channel);var f=i.channel&&!v&&!Object(K["isArchived"])(p);var g=Object(K["isMpim"])(p);var _=g&&Object(K["isArchived"])(p);var y=e.suggestion.display_context&&e.suggestion.display_context.subqueryScoresByMember;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":c,"data-exact-string":u,"data-feature-vector":d,"data-is-navigational":true,"data-id":p.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},g?m.a.createElement(ee["a"],{id:p.id,isActive:n,isDeactivated:_,matchData:y}):m.a.createElement(V["a"],{className:"c-search_autocomplete__channel",channel:p,channelId:p.id,showDraftIcon:v,inline:true,showTeamIconForXwsChannels:true,showTeamIconForLocalChannels:l,showArchived:true,previousName:h}),f&&m.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},te.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})),m.a.createElement(Z,{model:p}))});ae.defaultProps=W;var re=ae;var ne=a(118);var ie=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.file;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-id":d.id,"data-is-navigational":true,key:d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(N["b"],{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),m.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},m.a.createElement(ne["a"],{text:d.title,noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true})),m.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});ie.defaultProps=W;var se=ie;var oe=a(10);var le=a.n(oe);var ce=a(344);var ue=a(28);var de=a(35);var pe=a(557);var me=a(27);var he=a(322);var ve=a(410);var fe=new $["b"]("search");var be={queryHash:d["b"].string.isRequired,onDelete:d["b"].func,searchSessionId:d["b"].string.isRequired,querySessionId:d["b"].string.isRequired,searchDelete:d["b"].func.isRequired};var ge={onDelete:h["noop"]};var _e=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(v["a"])(a,["onClick"]);return a}s()(t,[{key:"onClick",value:function e(t){var a=this;t.stopPropagation();this.props.searchDelete({hash:this.props.queryHash,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){a.props.onDelete()})}},{key:"render",value:function e(){return m.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},m.a.createElement(me["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:fe.t("delete history result")},m.a.createElement(N["b"],{type:"times_small",inline:true})))}}]);return t}(p["PureComponent"]);_e.displayName="Delete";_e.defaultProps=ge;var ye=function e(t){return{searchDelete:function e(){return t(he["l"].apply(void 0,arguments))},querySessionId:t(Object(ve["getQuerySessionId"])()),searchSessionId:t(Object(ve["getSearchSessionId"])())}};var ke=Object(y["connect"])(null,ye)(_e);var Oe=a(33);var Ce=new $["b"]("search");var Ee=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.user,r=t.fullNameOrDisplayName,n=t.filter;var i=Object(z["isRestricted"])(a);var s=Object(z["isExternal"])(a);var o=Object(z["isDeleted"])(a);var l=Object(z["isBotUser"])(a);var c=Object(Oe["isHighResolutionScreen"])();var u=void 0;u="from"===n?Ce.t("from")+":":"to"===n?Ce.t("to")+":":null;var d={backgroundImage:"url("+(c?a.profile.image_48:a.profile.image_24)+")"};return m.a.createElement("span",{className:b()("token","member_token",{ra:i,external_member:s,deleted:o}),"data-member-id":a.id},m.a.createElement("span",{className:b()({bot:l,member_preview_link:!l},"member_image","thumb_24"),"data-member-id":a.id,"data-thumb-size":"24",style:d,"aria-hidden":"true"})," ",m.a.createElement("span",{className:"token_label"},u,m.a.createElement("b",null,"@",r)))}}]);return t}(p["PureComponent"]);Ee.displayName="SuggestionQueryUserFilterBase";Ee.defaultProps={filter:void 0};var Se=function e(t,a){var r=a.user;return{fullNameOrDisplayName:Object(z["getPrefCompliantMemberName"])(t,r)}};var we=Object(y["connect"])(Se)(Ee);var Ie=we;var je=a(315);var Te=a(25);var Ae=a(21);var Ne=new $["b"]("search");var Me=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.displayName,n=t.fallbackName,i=t.isUnknown,s=t.isNonExistent;var o=Ne.t("in:");if(i)return m.a.createElement(je["b"],{size:"random"});return m.a.createElement("span",{className:"token channel_token"},m.a.createElement("span",{className:"token_label"},s&&""+o+n,!s&&!r&&""+o+n,!s&&r&&m.a.createElement(p["Fragment"],null,o,Object(K["isPrivateChannel"])(a)&&m.a.createElement(N["b"],{type:"lock",size:"inherit"}),Object(K["isPublicChannel"])(a)&&m.a.createElement(N["b"],{type:"channel",size:"inherit"}),m.a.createElement("b",null,r))))}}]);return t}(p["PureComponent"]);Me.displayName="SuggestionQueryInFilterBase";Me.defaultProps={fallbackName:"",displayName:void 0,channel:void 0,isUnknown:false,isNonExistent:false};var Pe=function e(t,a){var r=a.member,n=a.channel,i=a.fallbackName;var s="";var o=false;var l=false;if(r){var c=Object(Te["e"])(t,r.id);o=Object(z["isUnknown"])(c);l=Object(z["isNonExistent"])(c);s=o||l?"":"@"+Object(z["getPrefCompliantMemberName"])(t,c)}else if(n){var u=Object(Ae["e"])(t,n.id);o=Object(K["isUnknown"])(u);l=Object(K["isNonExistent"])(u);s=o||l?"":Object(K["getDisplayNameForChannel"])(t,u,{publicChannelIncludeHashSign:false})}return{fallbackName:i,displayName:s,isUnknown:o,isNonExistent:l}};var Re=Object(y["connect"])(Pe)(Me);Re.propTypes={member:d["b"].object,fallbackName:d["b"].string};Re.defaultProps={member:void 0,fallbackName:""};var xe=Re;var De=a(556);var Fe=new $["b"]("search");var Le=function e(t){var a=t.theAttribute;return m.a.createElement("span",{className:"token has_token"},m.a.createElement("span",{className:"token_label"},Fe.t("has"),":",m.a.createElement("b",null,m.a.createElement(ne["a"],{text:Object(De["a"])(a),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true}))))};Le.displayName="SuggestionQueryHasFilter";var Be=Le;var Ue=new $["b"]("search");var qe=function e(t){var a=t.fileType;return m.a.createElement("span",{className:"token type_token"},m.a.createElement("span",{className:"token_label"},Ue.t("type"),":",m.a.createElement("b",null,a)))};qe.displayName="SuggestionQueryTypeFilter";var We=qe;var He=a(89);var Ge=function e(t){var a=t.modifierName,r=t.dateString;return m.a.createElement("span",{className:"token date_token"},m.a.createElement("span",{className:"token_label"},Object(He["f"])()[a],": ",r))};Ge.displayName="SuggestionQueryDateFilter";var Ve=Ge;var Ke=new $["b"]("search");function ze(e,t){return Object(h["flatten"])(e.map(function(e){return[t,e]})).slice(1)}var Qe=_()({},q,{getClnMessage:d["b"].func.isRequired,orgName:d["b"].string,teamName:d["b"].string,clientTheme:d["b"].oneOf(["light","dark"])});var Ye=_()({},W,{orgName:"",teamName:"",clientTheme:"light"});var Je=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onDelete,o=e.onMouseUp,l=e.onMouseMove,c=e.teamName,u=e.orgName,d=e.clientTheme;var p=i.suggestion_replacement,h=i.exact_string,v=i.hash,f=i.token_list,g=i.featureVector,_=i.isCustomDateFilter,y=i.deletable;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":p,"data-exact-string":h,"data-feature-vector":g,"data-is-custom-date-filter":_,"data-is-replacement-full":true,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:l,onClick:o,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(N["b"],{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),m.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},m.a.createElement("span",{className:b()("c-search_autocomplete__query_parts",le()({},"c-search_autocomplete__query_parts--"+d,"light"!==d))},ze(f.map(function(t,a){switch(true){case t.is_type_string:return m.a.createElement(ne["a"],{key:a,text:e.getClnMessage(t.string),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true});case t.is_type_phrase:return"\u201c"+t.phrase+"\u201d";case t.is_type_member_filter&&t.is_type_from_filter:return m.a.createElement(Ie,{key:a,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return m.a.createElement(Ie,{key:a,filter:"to",user:t.user});case t.is_type_member:return m.a.createElement(Ie,{key:a,user:t.user});case t.is_type_in_filter:return m.a.createElement(xe,{key:a,member:t.user,channel:t.channel,fallbackName:t.fallbackName});case t.is_type_has_filter:return m.a.createElement(Be,{key:a,theAttribute:t.thing});case t.is_type_type_filter:return m.a.createElement(We,{key:a,fileType:t.file_type});case t.is_type_date_filter:return m.a.createElement(Ve,{key:a,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}})," "))),m.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",Ke.rt("Search {teamName}",{teamName:u||c||""})," "),y&&m.a.createElement(ke,{queryHash:v,onDelete:s}))});Je.defaultProps=Ye;var Xe=function e(t){return{getClnMessage:function e(a){return Object(ce["b"])(t,a,{isInternalMessage:false})},orgName:Object(de["f"])(t)||"",teamName:Object(ue["getTeamDisplayName"])(Object(de["d"])(t)),clientTheme:Object(pe["getClientTheme"])(t)}};var Ze=Object(y["connect"])(Xe,null,null,{withRef:true})(Je);var $e=a(429);var et=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.user;var p=d&&d.profile&&d.profile.bot_id;var h=Object(z["isDeleted"])(d);return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-bot-id":p,"data-id":d.id,"data-is-navigational":true,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement("span",{className:b()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":h})},m.a.createElement($e["b"],{id:d.id,size:"small",showPresence:!h,newPresence:true,showAvatar:true,isDraftContext:true,showDeactivatedAnnotation:h})),m.a.createElement(Z,{model:d}))});et.defaultProps=W;var tt=et;var at=a(230);var rt=a(3666);var nt={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var it={className:void 0,inline:false};var st=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.displayName,r=t.id,n=t.inline,i=t.className;return m.a.createElement("span",{className:b()("c-team_name",i)},m.a.createElement(at["b"],{id:r,className:"c-team_name__icon"}),m.a.createElement("span",{className:b()("c-team_name__text",{"c-team_name__text--inline":!n})},a))}}]);return t}(p["PureComponent"]);st.displayName="TeamName";var ot=st;st.defaultProps=it;st.displayName="TeamName";var lt=ot;var ct=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.team;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(lt,{className:"c-search_autocomplete__team",id:d.id,displayName:d.name,inline:true}))});ct.defaultProps=W;var ut=ct;var dt=a(3668);var pt={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var mt={className:void 0,inline:false};var ht=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.displayName,r=t.id,n=t.className,i=t.inline;var s="list";"Vall_threads"===r?s="small-reply":"Vall_unreads"===this.props.id&&(s="list");return m.a.createElement("span",{className:b()("c-view_name",n)},m.a.createElement(N["b"],{className:"c-view_name__icon",type:s}),m.a.createElement("span",{className:b()("c-view_name__text",{"c-view_name__text--inline":!i})},a))}}]);return t}(p["PureComponent"]);ht.displayName="ViewName";var vt=ht;ht.defaultProps=mt;ht.displayName="ViewName";var ft=vt;var bt=m.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.view;return m.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(ft,{displayName:d.name,id:d.id,className:"c-search_autocomplete__view",inline:true}))});bt.defaultProps=W;var gt=bt;a.d(t,"b",function(){return kt});var _t={index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onSelected:d["b"].func,onAccept:d["b"].func,onDelete:d["b"].func,hasChannelNameCollision:d["b"].bool,listItemRef:d["b"].any};var yt={onAccept:h["noop"],onSelected:h["noop"],onDelete:h["noop"],hasChannelNameCollision:false,listItemRef:void 0};var kt=function e(t){return"c-search_autcomplete__suggestion_"+t};var Ot=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(v["a"])(a,["onMouseUp","onMouseMove","onDelete"]);return a}s()(t,[{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"onMouseMove",value:function e(){if(this.props.isSelected)return;this.props.onSelected(this.props.index,true)}},{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"componentClassForSuggestion",value:function e(t){if(t.is_type_query_completion)return Ze;if(t.is_type_user)return tt;if(t.is_type_channel||t.is_type_mpim)return re;if(t.is_type_file)return se;if(t.is_type_view)return gt;if(t.is_type_team)return ut;if(t.is_type_app_action)return G;return null}},{key:"render",value:function e(){var t=kt(this.props.index);var a=this.componentClassForSuggestion(this.props.suggestion);return m.a.createElement(a,{ref:this.props.listItemRef,id:t,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}]);return t}(p["PureComponent"]);Ot.displayName="Suggestion";Ot.defaultProps=yt;var Ct=t["a"]=Ot},4948:function(e,t,a){"use strict";a.r(t);var r=a(46);var n=a(131);var i=a(151);var s=a(124);var o=a(648);var l=a(459);var c=a(1241);var u=a(451);var d=a(525);var p=a(517);var m=a(1793);var h=a(1644);var v=a(560);var f=a(2);var b=a(58);function g(e){var t=e.bot_id?[e.bot_id]:[];Object(f["values"])(e).forEach(function(e){if(Object(f["isObject"])(e)){t.push(g(e));return}if(!Object(f["isString"])(e))return;var a=Object(f["compact"])(Object(b["findUrlsInString"])(e).map(d["a"]));t.push(a)});return Object(f["uniq"])(Object(f["flatten"])(t))}var _=a(64);var y=a.n(_);var k=a(556);function O(e){var t=[];var a=[];function r(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function n(e){if(!Object(f["isObject"])(e))return;a.push(e);var s=void 0;Object.keys(e).forEach(function(a){s=e[a];if("string"!==typeof s)return;if(!r(a)){Object(k["b"])(s).m_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)});return}if(!Object(i["a"])(s))return;if(Object(f["includes"])(t,s))return;t.push(s)});Object.keys(e).forEach(function(r){s=e[r];if("object"!==("undefined"===typeof s?"undefined":y()(s)))return;if(-1!==a.indexOf(s))return;if(!Object(f["isArray"])(s)||"members"!==r&&"users"!==r){n(s);return}s.forEach(function(e){if(!Object(i["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":y()(e))&&e.id){Object(i["a"])(e.id)&&!Object(f["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(i["a"])(e))return;if(Object(f["includes"])(t,e))return;t.push(e)})})}n(e);return Object(f["uniq"])(t)}function C(e){var t=[];var a=[];function r(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function i(e,s){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;a.push(e);Object(f["forOwn"])(e,function(e,a){if("string"!==typeof e)return;r(a,s)?Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e):Object(k["b"])(e).c_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)})});Object(f["forOwn"])(e,function(e,r){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;if("previous_message"===r)return;if(-1!==a.indexOf(e))return;!Object(f["isArray"])(e)||"string"!==typeof e[0]||"channels"!==r&&"ims"!==r&&"groups"!==r?i(e,r):e.forEach(function(e){Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e)})})}i(e);return t}function E(e){var t=[];Object(f["forOwn"])(e,function(e,a){Object(f["isArray"])(e)?"messages"!==a&&"teams"!==a&&"users"!==a&&"channels"!==a||e.forEach(function(e){t.push(E(e))}):Object(f["isObject"])(e)?t.push(E(e)):Object(f["isString"])(e)&&("team"!==a&&"source_team"!==a&&"user_team"!==a&&"team_id"!==a||Object(s["a"])(e)&&t.push(e))});return Object(f["uniq"])(Object(f["flatten"])(t))}var S=a(1207);function w(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var I=a(1995);var j=a(1402);var T=a(69);var A=a(91);var N=a(768);var M=a(369);var P=a(925);var R=a(1634);var x=a(3);var D=a.n(x);var F="_GA";var L=function e(t){return""+F+t};var B=function e(t){return D()({},t,{is_app_action:true,originalId:t.id,id:L(t.id)})};var U=function e(t){return t.startsWith(F)};var q=function e(t){if(!U(t))return null;return t.slice(F.length)};var W=a(234);var H=a(759);var G=a(547);var V=a(291);var K=a(179);var z=a(208);var Q=function e(t){if(!Object(f["isString"])(t))return null;var a=Object(K["e"])();return t.replace(a,function(e){var t=Object(K["a"])(e);var a=Object(z["getEmojiNameFromUnicodeString"])(t);if(a)return":"+a+":";return e})};var Y=Q;var J=a(458);var X=a(228);var Z=a(842);var $=a(1872);var ee=a(515);var te=a(254);var ae=a(1887);var re=a(20);function ne(e){if(!e)return Promise.resolve();return new Promise(function(t,a){e.then(t).catch(a)})}var ie=a(14);var se=a(1445);var oe=a(412);var le=a(558);var ce=a(225);var ue=a(53);var de=a(758);Object(r["a"])("interop.utility",{addJitter:H["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeEnterpriseTeamId:s["b"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:U,extractAllBotIds:g,extractAllMemberIds:O,extractAllModelObIds:C,extractAllTeamIds:E,formatThemeColorsArray:function e(t){return Object(Z["b"])(t)},getGlobalNavTheme:X["a"],getStringLength:c["a"],getIconSizeToFit:u["a"],getBotIdFromUrl:d["a"],getTombstonedMessageTitle:se["a"],getHelpCenterUrl:ce["b"],getZendeskLocale:ue["a"],getLogger:ie["a"],looksLikeBotId:p["a"],looksLikeUserGroupId:l["a"],isVisible:m["a"],ipsum:w,isFileSubtype:N["b"],inTabFlow:h["a"],firstFocusableChild:v["b"],lastFocusableChild:v["c"],snakeCaseKeys:S["a"],isMenuVisible:T["g"],isDialogVisible:A["b"],isFSModalVisible:M["b"],normalize:j["a"],cleanChannelName:ae["a"],convertFilesize:P["a"],getSystemTextPreferences:R["a"],decodeGlobalActionFrecencyId:q,getGlobalActionForFrecency:B,FILE_SUBTYPES:N["a"],PRIMARY_VIEWS:oe["a"],uuidv4:W["a"],formatNumberWithAbbreviation:G["a"],isCmdKey:J["a"],getColonsRx:K["c"],getEmoticonsRx:K["d"],getNativeEmojiRx:K["e"],emojiTranslation:{addTranslationMap:te["b"],getLocalizedEmojiName:te["g"],getCanonicalEmojiName:te["e"],convertEmojiInStringToLocalized:te["d"],convertEmojiInStringToCanonical:te["c"],testEmojiTranslations:te["j"]},replaceEmoticonsWithColons:K["h"],replaceTextEmojiWithNative:function e(t){return Object(V["a"])(TS.redux.getState(),{messageText:t,teamId:TS.model.team.id})},replaceNativeEmojiWithText:function e(t){return Y(t)},getEmoticonMap:function e(){return re["EMOTICON_MAP"]},setCachedRefererPolicy:de["d"],getRefererHidingWhiteList:de["a"],getRefererPolicy:de["b"],urlNeedsRefererHiding:de["e"],isInputElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(ee["a"])(a)},isContentEditableElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object($["a"])(a)},getImgProxyUrl:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return le["a"].apply(void 0,[TS.redux.getState()].concat(a))},makeSafeForTimeout:ne,isModelObjectExternal:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return I["a"].apply(void 0,[TS.redux.getState()].concat(a))}})},4949:function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(128);var c=a(29);var u=a(10);var d=a.n(u);var p=a(3);var m=a.n(p);var h=a(26);var v=a.n(h);var f=a(5);var b=a.n(f);var g=a(4);var _=a.n(g);var y=a(7);var k=a.n(y);var O=a(8);var C=a.n(O);var E=a(0);var S=a(13);var w=a.n(S);var I=a(2);var j=a.n(I);var T=a(296);var A=a(38);var N=a(1600);var M=a(39);var P=a(1471);var R=a(330);var x=a(6);var D=a(1301);var F=a(82);var L=a(41);var B=a(27);var U=a(497);var q=a(86);var W=a(44);var H=a(152);var G=a(213);var V=a(283);var K=a(1190);var z=a(2002);var Q=a(9);var Y=a(1689);var J=a(35);var X=a(28);var Z=a(557);var $=a(1828);var ee=a(2003);var te=a(2469);var ae=50;var re=new x["b"]("apps_browser");var ne={channelId:E["b"].string,hasSeenAppSpaceTutorial:E["b"].bool,isInternetExplorer:E["b"].bool,isFirefoxAndWindows:E["b"].bool,isFirefoxAndMac:E["b"].bool,isMacSsbBuild:E["b"].bool,scrollThreshold:E["b"].number,addAppsVariant:E["b"].bool,isUnpaid:E["b"].bool,fetchAppsIndexList:E["b"].func,submitAppsIndexSearch:E["b"].func,clogger:E["b"].object.isRequired,defaultAppIcon:E["b"].string.isRequired,openAboutApp:E["b"].func,featureM11nAppsBrowser:E["b"].bool,getChannelMembershipInfoForUsers:E["b"].func,addAppToChannelByMemberId:E["b"].func,closeModal:E["b"].func,openAppsTutorialModal:E["b"].func,team:E["b"].object,clientTheme:E["b"].string};var ie={channelId:void 0,hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:j.a.noop,submitAppsIndexSearch:j.a.noop,openAboutApp:j.a.noop,featureM11nAppsBrowser:false,getChannelMembershipInfoForUsers:j.a.noop,addAppToChannelByMemberId:j.a.noop,closeModal:j.a.noop,openAppsTutorialModal:j.a.noop,team:void 0,clientTheme:"light"};var se={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var oe=function e(){return{id:"tutorial_category",name:"",display_name:"",apps:[{name:re.t("What are apps?"),short_description:re.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]}};var le=function(e){C()(t,e);function t(e){b()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.lastRequestId=0;a.currentDisplayedId=0;a.isMouseMoveEnabled=true;a.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;a.runningAppIndex=0;a.showLimitMeter=false;a.appsForLimitMeter=null;a.cloggedLimitMeterImpression=false;a.LimitMeterClogId=null;a.appLimitMeterClogPayload={};a.isPaginating=false;a.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};a.handleKeydown=a.handleKeydown.bind(a);a.handleMouseMove=a.handleMouseMove.bind(a);a.handleAppsListScroll=a.handleAppsListScroll.bind(a);a.handleAppDirectoryButtonClick=a.handleAppDirectoryButtonClick.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleAppClick=a.handleAppClick.bind(a);a.handleAppMouseLeave=a.handleAppMouseLeave.bind(a);a.handleAppLimitMeterClickClog=a.handleAppLimitMeterClickClog.bind(a);a.fillDefaultAppsList=a.fillDefaultAppsList.bind(a);a.searchApps=a.searchApps.bind(a);a.completeRequest=a.completeRequest.bind(a);a.enableMouseMove=a.enableMouseMove.bind(a);a.throttledSearchApps=j.a.throttle(a.searchApps,500,{leading:false});a.debouncedEnableMouseMove=j.a.debounce(a.enableMouseMove,200);return a}_()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var a=this.props.fetchAppsIndexList({limit:ae}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[oe()].concat(v()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(a,se.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=this.getSelectedApp();"tutorial_app"===j.a.get(r,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){a.firstSelectableAppIndex=a.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,a){this.state.isShowingDefaultAppCategories!==a.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=a.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){var a=this.props.defaultAppIcon;return Object(R["b"])(t,72,a)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var a=0;a<this.state.appCategories.length;a++)t+=j.a.get(this.state.appCategories[a],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var a=this;var r=0;for(var n=0;n<this.state.appCategories.length;n++)r+=this.state.appCategories[n].apps.length;if(0===r)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===r-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var r=void 0;r=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===a.firstSelectableAppIndex?a.firstSelectableAppIndex:t.getModifierState("Shift")?a.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:r}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var a=document.querySelector("[data-apps_list]");var r=document.querySelector("[data-category_header]");var n=r?r.offsetHeight:0;t.offsetTop<a.scrollTop?a.scrollTop=t.offsetTop-n:t.offsetTop+t.offsetHeight>a.scrollTop+a.offsetHeight&&(a.scrollTop=t.offsetTop+t.offsetHeight-a.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var a=this.props,r=a.clogger,n=a.channelId;var i={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===t.app_id){var s=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){Object(X["openAuthenticatedUrlInBrowser"])(this.props.team,"/pricing?ui_step=280&ui_element=5");r.track("GROWTH_PRICING",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{Object(X["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps");r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)if(this.props.featureM11nAppsBrowser){this.props.closeModal();this.props.addAppToChannelByMemberId({memberId:t.bot_user_id,channelId:n})}else Object(P["a"])(t);else if("true"===t.is_installed){this.openAboutApp(t);r.track("APP_INDEX_VIEW_CLICK",i)}else{Object(X["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");r.track("APP_INDEX_INSTALL_CLICK",i);r.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",m()({},i,{contexts:m()({},i.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var a=t.target.closest("[data-app]");a&&this.setState(function(){return{selectedAppIndex:parseInt(a.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var a=t.currentTarget;var r=a.offsetHeight+a.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&r>a.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],se.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;Object(X["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}});this.throttledSearchApps(a)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,se.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,a,r){var n=this;if(this.isPaginating)return;if(!t.next_cursor)return;var i={category:t.id,cursor:t.next_cursor,limit:ae};a===se.searchEndpoint&&(i.query=this.state.searchTerm);var s=setTimeout(function(){n.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var o=this.lastRequestId;var l=a===se.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;l(i).then(function(e){if(o<n.lastRequestId)return;var i=e.categories[0];if(!i)return;n.setState(function(e){if(o<n.lastRequestId)return{};for(var r=0;r<e.appCategories.length;r++)if(e.appCategories[r].id===t.id){var s=[].concat(v()(e.appCategories[r].apps),v()(i.apps));var l=m()({},e.appCategories[r]);l.apps=s;l.next_cursor=i.next_cursor;var c=[].concat(v()(e.appCategories));c[r]=l;a===se.listEnpoint&&(n.defaultAppCategories=c);return{appCategories:c,showPaginationIndicator:false}}return{}},function(){n.isPaginating=false;clearTimeout(s);r&&"function"===typeof r&&r()})})}},{key:"searchApps",value:function e(t){var a=this;var r=this.props.clogger;if(t){var n=setTimeout(function(){a.setState(function(){return{isSearching:true}})},300);var i=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(n);a.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e});this.completeRequest(i,se.searchEndpoint,true);r.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:a.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,a,r,n){var i=this;this.lastRequestId+=1;var s=this.lastRequestId;t.then(function(e){if(s>i.currentDisplayedId){i.currentDisplayedId=s;var t={appCategories:e.categories,selectedAppIndex:j.a.get(e,"categories[0].apps",[]).length&&a===se.searchEndpoint?0:null};r&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var o=j.a.map(j.a.filter(j.a.flatMap(e.categories,"apps"),"bot_user_id"),"bot_user_id");i.props.featureM11nAppsBrowser?i.props.getChannelMembershipInfoForUsers({channelId:i.props.channelId,userIds:o}).then(function(){i.updateAfterRequest(t,n)}):Object(P["c"])(o).then(function(){i.updateAfterRequest(t,n)})}else i.updateAfterRequest(t,n)}}).catch(j.a.noop)}},{key:"updateAfterRequest",value:function e(t,a){this.setState(function(){return t},function(){a&&"function"===typeof a&&a()})}},{key:"createAppCategoryMarkup",value:function e(t,a){var r=this;return t.apps.map(function(e,t){var i=a+t;var s=w()("p-apps_browser__app",{"p-apps_browser__app--selected":i===r.state.selectedAppIndex});var o="app-"+e.app_id+"-"+e.bot_id;var l=r.getAppIcon(e);if(r.props.featureM11nAppsBrowser)return n.a.createElement($["a"],{key:o,addAppsVariant:r.props.addAppsVariant,app:e,channelId:r.props.channelId,className:s,onClick:r.handleAppClick,onMouseLeave:r.handleAppMouseLeave,"data-app_index":i});var c=r.props.addAppsVariant&&e.is_installed&&Object(P["b"])(e.bot_user_id);var u=re.t("Install");"tutorial_app"===e.app_id?u=re.t("Start"):c?u=re.t("Add"):e.is_installed&&(u=re.t("View"));return n.a.createElement("div",{key:o,className:s,onClick:r.handleAppClick,onMouseLeave:r.handleAppMouseLeave,"data-app":true,"data-app_index":i,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":c||null,"data-qa":"apps_browser_row",role:"presentation"},n.a.createElement("img",{className:"p-apps_browser__app_icon",src:l,alt:"App icon"}),n.a.createElement("div",{className:"p-apps_browser__app_info"},n.a.createElement("div",{className:"p-apps_browser__app_name"},n.a.createElement("strong",null,e.name)),n.a.createElement("div",{className:"p-apps_browser__app_description"},Object(D["a"])(e.short_description,function(e,t){return n.a.createElement("strong",{key:t},e)}))),n.a.createElement(B["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline"},u))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!j.a.get(e,"apps",[]).length)return null;var a="category-"+e.id;var r=w()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var i=w()("p-apps_browser__category_header");var s=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return n.a.createElement("section",{key:a,className:r},n.a.createElement("div",{className:i,"data-category_header":true,"data-qa":"apps_browser__category_header"},e.display_name),s)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var a="color-meter-"+t;var r=w()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return n.a.createElement("li",{className:r,key:a})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var a=this;if(!j.a.get(t,"apps",[]).length)return null;var r=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var i=r-t.apps.length;while(i>0){var s={app_id:i,name:this.props.featureM11nAppsBrowser?re.t("Try a new app"):"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(s);i-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[r-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var r="limit-apps-"+t;var i=w()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:a.props.isFirefoxAndWindows,is_ff_and_mac:a.props.isFirefoxAndMac,is_ie:a.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var s=w()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var o="blank_box"===e.short_description?null:a.getAppIcon(e);return n.a.createElement("div",{className:i,key:r},n.a.createElement("img",{className:"align_top",src:o,alt:""}),n.a.createElement("span",{className:s},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var a=10;var r=j.a.get(e,"apps",[]).length;var i=t.props,s=i.isUnpaid,o=i.isFirefoxAndWindows,l=i.isFirefoxAndMac,c=i.isInternetExplorer,u=i.clogger,d=i.featureM11nAppsBrowser;if(!r||r>a||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var p="num_of_apps="+r;var m=!!r;var h="limit-meter-"+e.id;t.showLimitMeter=m&&s;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var v=void 0;var f=void 0;var b=void 0;var g=void 0;var _=void 0;var y=w()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:o});var k=w()("p-apps_browser__app_limit_meter",{is_ff_and_mac:l});if(r<6){v=re.t("Add apps to get things done");b="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";g="link_app_directory";f=re.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return n.a.createElement(W["a"],{href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}else if(r<10){v=re.t("Upgrade for unlimited apps");b="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";g="pricing_link";_=w()({hidden:t.props.isMacSsbBuild});f=re.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:r},function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return n.a.createElement(W["a"],{className:_,href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}else{v=re.t("Upgrade to add more apps");b="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";g="pricing_link";_=w()({hidden:t.props.isMacSsbBuild});f=re.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return n.a.createElement(W["a"],{className:_,href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},r)})}t.appLimitMeterClogPayload={num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:g}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){u.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);u.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else{u.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);u.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}t.cloggedLimitMeterImpression=true}var O=t.createAppsForLimitMeterMarkup(e);var C=t.createColorLimitMeterMarkup();return n.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:h},n.a.createElement("div",{className:k,"data-qa":"apps_browser_app_limit_meter"},n.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},n.a.createElement("b",null,v)),n.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},f),d?n.a.createElement(ee["a"],{apps:e.apps,isFirefoxAndWindows:o,isFirefoxAndMac:l,isInternetExplorer:c,featureM11nAppsBrowser:d}):n.a.createElement("div",null,n.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},O),n.a.createElement("ul",{className:y},C))))})}},{key:"render",value:function e(){var t;var a=this.props,r=a.addAppsVariant,i=a.channelId,s=a.clientTheme;var o=void 0;var l=w()("p-apps_browser__apps_list",(t={"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator},d()(t,"p-apps_browser__apps_list--loading--"+s,this.state.showLoadingIndicator&&"light"!==s),d()(t,"p-apps_browser__apps_list--paginating",this.state.showPaginationIndicator),t));var c=void 0;c=r&&i?n.a.createElement("h2",{className:"overflow_hidden"},re.rt("Add apps to {channelName}",{channelName:n.a.createElement(H["a"],{channelId:i,inline:true,className:"overflow_ellipsis"})})):n.a.createElement("h2",null,re.t("Browse Apps"));o=!this.getTotalAppsCount()&&this.state.searchTerm?n.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},re.t("There are no apps matching"),"\xa0",n.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var u=this.createAppLimitMeterMarkup();return n.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},n.a.createElement("div",{className:"p-apps_browser__filter_container"},n.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},c,n.a.createElement(B["d"],{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},re.t("View App Directory"))),n.a.createElement("div",null,n.a.createElement(U["a"],{"data-qa":"apps_browser__filter_input",placeholder:re.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),n.a.createElement("div",{className:l,onScroll:this.handleAppsListScroll,"data-apps_list":true,"data-qa":"apps_browser__results_list"},u,o,n.a.createElement(q["a"],{className:"p-apps_browser__spinner",size:"jumbo"})))}}]);return t}(r["Component"]);le.displayName="AppsBrowser";le.defaultProps=ie;var ce=function e(t){var a=Object(A["h"])(t,"seen_app_space_tutorial");var r=Object(F["a"])(t);var n=Object(J["d"])(t);return{channelId:r,hasSeenAppSpaceTutorial:a,clogger:Object(M["a"])({state:t}),defaultAppIcon:Object(G["getDefaultAppIcon"])(t),featureM11nAppsBrowser:Object(Q["isFeatureEnabled"])(t,"feature_m11n_apps_browser"),team:n,clientTheme:Object(Z["getClientTheme"])(t)}};var ue=function e(t){return Object(T["bindActionCreators"])({fetchAppsIndexList:N["a"],submitAppsIndexSearch:N["b"],openAboutApp:K["b"],openAppsTutorialModal:Y["a"],getChannelMembershipInfoForUsers:V["getChannelMembershipInfoForUsers"],addAppToChannelByMemberId:z["a"],closeModal:L["closeModal"]},t)};var de=Object(o["connect"])(ce,ue)(le);var pe=a(161);var me=function e(t,a,r){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(pe["a"],null,n.a.createElement(de,r))),a)};var he=function e(t){s.a.unmountComponentAtNode(t)};var ve={mountAppsBrowser:me};var fe=a(46);Object(fe["a"])("interop.mountAppsBrowser",me);Object(fe["a"])("interop.unmountAppsBrowser",he)},495:function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(17);var c=a(14);var u=a(41);var d=a(782);var p=a(1460);var m=a(82);var h=a(5);var v=a.n(h);var f=a(4);var b=a.n(f);var g=a(7);var _=a.n(g);var y=a(8);var k=a.n(y);var O=a(2);var C=a(31);var E=a(12);var S=a(13);var w=a.n(S);var I=a(62);var j=a(9);var T=a(137);var A=a(94);var N=a(6);var M=a(751);var P=a(39);var R=a(18);var x=a(442);var D=a(1286);var F=a(1442);var L=a(20);var B=a(486);var U=a(1039);var q=a(61);var W=a(1329);var H=a(1649);function G(e){return new Promise(function(t,a){var r=Object(c["b"])();try{var n=new FileReader;n.onload=function(e){var a=Object(H["readFromBinaryFile"])(e.target.result);a&&"number"===typeof a.Orientation?t(a.Orientation):t(null)};n.readAsArrayBuffer(e)}catch(e){r.warn("Error reading exif data");r.warn(e);a(e)}})}var V=a(35);var K=a(28);var z=a(234);var Q=a(210);var Y=a(922);var J=a(145);var X=a(91);var Z=a(27);var $=a(150);var ee=a(52);var te=a(189);var ae=a(123);var re=a(44);var ne=a(3401);var ie=ne["a"];var se=a(1420);var oe=a(1422);var le=a(1211);var ce=a(1456);var ue=a(1680);var de=a(1681);var pe=a(2478);var me=new N["b"]("file-upload");var he="file-upload-name";var ve="file-upload-share-with";var fe={files:o["b"].array.isRequired,selectedChannelId:o["b"].string,setSelectedChannel:o["b"].func,canPostInSelectedChannel:o["b"].bool,canThread:o["b"].bool,closeModal:o["b"].func,switchToChannel:o["b"].func,getShareableChannelId:o["b"].func,msgText:o["b"].string,setMsgText:o["b"].func,msgOps:o["b"].array,setMsgOps:o["b"].func,initialContents:o["b"].object,converMsgOpsToRichTextMessage:o["b"].func,disallowedKeywordInMsgText:o["b"].string,initialText:o["b"].string,initialBroadcast:o["b"].bool,retentionDuration:o["b"].number,threadTs:o["b"].string,overStorageLimit:o["b"].bool.isRequired,isStdPlan:o["b"].bool,isPlusPlan:o["b"].bool,isEnterprisePlan:o["b"].bool,channelType:o["b"].string,selectedChannelName:o["b"].string,fromPaste:o["b"].bool,teamId:o["b"].string,inputProxy:o["b"].object,isOffline:o["b"].bool,featureOfflineMode:o["b"].bool,featureSonicInputs:o["b"].bool,featureWysiwygComposer:o["b"].bool,clientToolBar:o["b"].bool,currentChannelId:o["b"].string,metadata:o["b"].object,clogger:o["b"].object.isRequired,pendingFiles:o["b"].arrayOf(I["a"].File()),clearPendingFilesForDialog:o["b"].func,isLegacyDropboxPicker:o["b"].bool};var be={selectedChannelId:null,setSelectedChannel:O["noop"],canPostInSelectedChannel:false,canThread:false,closeModal:O["noop"],switchToChannel:O["noop"],getShareableChannelId:O["noop"],msgText:"",setMsgText:O["noop"],msgOps:void 0,setMsgOps:O["noop"],initialContents:void 0,converMsgOpsToRichTextMessage:O["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false,teamId:void 0,inputProxy:void 0,isOffline:false,featureOfflineMode:false,featureSonicInputs:false,featureWysiwygComposer:false,clientToolBar:false,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:O["noop"],metadata:void 0,isLegacyDropboxPicker:false};var ge=function(e){k()(t,e);function t(e){v()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(a,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]);a.fileNameInput=null;a.initialText=a.props.initialText;a.initialContents=a.props.initialContents;a.logger=Object(c["b"])();a.msgInputRef=s.a.createRef();a.state=n()({confirmClose:false,confirmCancelAll:false,submitting:false},a.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.files,r=t.clogger;var n=this.state||0,i=n.fileIndex;this.shouldShowStorageWarning()&&r.track(R["l"].GROWTH_PRICING,{contexts:{ui_context:{action:R["w"].IMPRESSION,step:R["A"].FILE_UPLOAD,ui_component:R["x"].FILE_STORAGE_LIMIT_BANNER}}});if(this.isMultiFileUpload())return;a&&this.maybeLoadImagePreview(a[i])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props,r=a.initialText,n=a.msgText;var i=this.state,s=i.confirmClose,o=i.confirmCancelAll;if(!s&&n&&n.length>L["CONFIRM_DISCARD_TEXT_LENGTH"]&&n!==r){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||o?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var a=this.state,r=a.shareWith,n=a.fileName,i=a.fileIndex,s=a.confirmClose,o=a.broadcast;var l=this.props,c=l.selectedChannelId,u=l.msgText,d=l.threadTs,p=l.teamId,m=l.pendingFiles,h=l.featureWysiwygComposer;if(this.isGoDisabled())return false;if(s)return this.onCancel();this.initialText=null;this.initialContents=null;var v=this.props,f=v.switchToChannel,b=v.files,g=v.getShareableChannelId,_=v.metadata;var y=r?Object(z["a"])():void 0;var k=r?g({channelOrMemberId:c}):Promise.resolve(null);var O=void 0;if(h){var C=this.msgInputRef&&this.msgInputRef.current&&this.msgInputRef.current.getWrappedInstance();O=C?C.getTextContents():this.props.msgOps}k.then(function(e){var a=void 0;h&&(a=t.props.converMsgOpsToRichTextMessage({msgOps:O,channelId:e,inThread:!!d}));if(t.isMultiFileUpload()){t.closeDialog();var s=Object(Y["a"])(p);s.uploadFiles({files:m,shareData:{channelId:e,clientMsgId:y,introMessage:r?u:null,blocks:h&&r?a:null,threadTs:e?d:null,broadcast:e&&d?o:null,metadata:_}}).then(function(){t.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: "+y)}).catch(function(e){t.logger.warn("Multi-file upload failed for: "+y+"; with error "+e)});t.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: "+y)}else{t.hasMoreFiles()||t.closeDialog();var l=b[i];var c=Object(Y["a"])(p);c.uploadFiles({files:[l],shareData:{channelId:e,clientMsgId:y,title:n||t.initialFileName(l),link:l.link,introMessage:r?u:null,blocks:h&&r?a:null,threadTs:e?d:null,broadcast:e&&d?o:null,isBox:l.is_box,isDropbox:l.is_dropbox,metadata:_}})}t.hasMoreFiles()?t.goToNextFile():e&&!d&&f({id:e});t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var a=t.text,r=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(r):this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>L["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"onBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var a=this.props.files;var r=a[t];var n=r&&Object(O["includes"])(r.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(r),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this;var a=this.props,r=a.isStdPlan,n=a.isPlusPlan,i=a.isEnterprisePlan;if(!this.shouldShowStorageWarning())return null;var o=function e(a){var r=a.text;return s.a.createElement(re["a"],{href:"/pricing?ui_step="+R["A"].FILE_UPLOAD+"&ui_element="+R["z"].PRICING_LINK,target:"_blank",rel:"noopener noreferrer",onClick:t.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},r)};if(r)return me.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,o);if(n)return me.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,o);if(i)return me.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return s.a.createElement(te["a"],{href:"/help/requests/new",target:"_blank"},t)});return me.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,o)}},{key:"shouldShowStorageWarning",value:function e(){var t=this.props,a=t.overStorageLimit,r=t.files;var n=this.state.fileIndex;var i=r[n];return a&&!i.is_dropbox&&!i.is_box&&!i.is_external}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(R["l"].GROWTH_PRICING,{contexts:{ui_context:{action:R["w"].CLICK,step:R["A"].FILE_UPLOAD,ui_element:R["z"].PRICING_LINK,ui_component:R["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isMultiFileUpload",value:function e(){var t=this.props.files;return!Object(O["some"])(t,function(e){return e.is_box||e.is_dropbox})}},{key:"isMultipleFiles",value:function e(){if(this.isMultiFileUpload())return false;return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var a=this.state.fileIndex;return t.length>a+1}},{key:"goToNextFile",value:function e(){var t=this;var a=this.props,r=a.files,i=a.setMsgText;var s=this.state.fileIndex;this.setState(function(){return n()({confirmClose:false},t.getStateForFileAtIndex(s+1))},function(){t.maybeLoadImagePreview(r[s+1])});i("")}},{key:"closeDialog",value:function e(){var t=this.props,a=t.initialBroadcast,r=t.threadTs,n=t.featureSonicInputs,i=t.currentChannelId,s=t.featureWysiwygComposer;var o=this.props.inputProxy;this.props.closeModal();this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog();if(s&&this.initialContents){o||(o=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i}));if(!o)return;o.setContents(this.initialContents);o.focus();return}if(this.initialText){var l=this.initialText;setTimeout(function(){if(o){o.setText(l);o.setBroadcast(a);o.focus()}else if(r)Object(U["f"])(l,a);else if(n){var e=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i});e&&e.setText(l)}else Object(B["e"])(l)},10)}}},{key:"initialFileName",value:function e(t){if(!t.name||this.props.fromPaste)return me.t("Pasted image at {date}",{date:Object(M["a"])(Date.now()/1e3)});return t.name}},{key:"isUsingNewDropboxApp",value:function e(){var t=this.props,a=t.isLegacyDropboxPicker,r=t.files;return Object(O["some"])(r,function(e){return e.is_dropbox})&&a}},{key:"isGoDisabled",value:function e(){var t=this.state,a=t.submitting,r=t.shareWith,n=t.overMsgLengthLimit,i=t.overFileNameLimit;var s=this.props,o=s.canPostInSelectedChannel,l=s.threadTs,c=s.canThread,u=s.disallowedKeywordInMsgText,d=s.isOffline,p=s.featureOfflineMode;return a||r&&!o&&!l||r&&l&&!c||r&&!!u||n||i||p&&d}},{key:"maybeLoadImagePreview",value:function e(t){var a=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var r=new FileReader;r.onload=function(e){var r=e.target.result;if(!Object(O["startsWith"])(r,"data:image/"))return;a.loadImagePreviewWithOrientation(t,r)};r.onloadstart=function(e){if(e.total>33554432){a.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);r.abort()}};r.readAsDataURL(t)}catch(e){this.logger.warn("Error loading upload preview");this.logger.warn(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,a){var r=this;G(t).then(function(e){if(!e||1===e){r.setState(function(){return{previewDataUrl:a,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var n=t.width;var i=t.height;var s=i/n;r.setState(function(){return{previewDataUrl:a,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:true}})};t.src=a})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var o=this.state.broadcast;if(!a||!r)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},s.a.createElement(de["a"],{channelType:n,selectedChannelName:i,value:o,onChange:this.onBroadcastChange}))}},{key:"renderImagePreview",value:function e(){var t=this.state,a=t.previewDataUrl,r=t.previewImageDimensionsRatio,n=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var o=me.t("Preview of {fileName}",{fileName:i});var l=void 0;2===n?l="scaleX(-1)":3===n?l="rotate(180deg)":4===n?l="rotate(180deg) scaleX(-1)":5===n?l="rotate(90deg) scale("+r+", -"+r+")":6===n?l="rotate(90deg) scale("+r+")":7===n?l="rotate(90deg) scale(-"+r+", "+r+")":8===n&&(l="rotate(-90deg) scale("+r+", "+r+")");var c={};l&&(c.transform=l);return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement("div",{className:"p-file_upload_dialog__preview"},s.a.createElement("div",{style:c},s.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:a,alt:o}))))}},{key:"renderShareWith",value:function e(){var t=this.props,a=t.threadTs,r=t.selectedChannelId;var n=this.state.shareWith;if(a)return s.a.createElement(ue["a"],{channelId:r,threadTs:a});return s.a.createElement(ee["a"],{text:me.t("Share with:"),htmlFor:ve,type:"inline"},s.a.createElement(ae["a"],{id:ve,defaultChecked:n,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.setSelectedChannel,n=t.threadTs;var i=this.state.shareWith;if(n)return null;return s.a.createElement(oe["a"],{initialChannelId:a,onChange:r,isDisabled:!i,optionsListOffsetBottom:window.innerHeight})}},{key:"renderCancelAllButton",value:function e(){return s.a.createElement(Z["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},me.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return s.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var a=Object(ce["a"])(this.props);if(!a&&!t)return null;var r=this.props.overStorageLimit?"info":"warning";return s.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},s.a.createElement(J["d"],{type:"inline",level:r},t?s.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,a))}},{key:"renderCollapsedFileName",value:function e(){var t=this.state,a=t.defaultFileName,r=t.collapseFileNameInput;var n=w()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!r});var i=me.rt("edit");var o=me.rt("Edit file name: {fileName}",{fileName:a});return s.a.createElement("div",{className:n},s.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},a),s.a.createElement(re["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:r?null:"-1","aria-label":o},i))}},{key:"renderExpandedFileNameInput",value:function e(){if(this.isUsingNewDropboxApp())return null;var t=this.state,a=t.fileName,r=t.defaultFileName,n=t.collapseFileNameInput;var i=w()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return s.a.createElement(ee["a"],{text:me.t("File name"),htmlFor:he,className:i},s.a.createElement($["a"],{id:he,name:he,value:a,maxCharacterLimit:L["MAX_FILENAME_LENGTH"],counterMinimumCharacters:L["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:r,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderMultiFileUpload",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(ie,{channelId:d["DIALOG_PENDING_FILES_ID"]}))}},{key:"renderRetentionWarning",value:function e(){var t=this.props.retentionDuration;if(!t)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},s.a.createElement("span",null,me.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(W["a"])(t)})))}},{key:"render",value:function e(){var t=this.props,a=t.files,r=t.msgText,n=t.selectedChannelId,i=t.threadTs,o=t.featureOfflineMode,l=t.isOffline,c=t.clientToolBar,u=t.featureWysiwygComposer;var d=this.state,p=d.fileIndex,m=d.shareWith,h=d.confirmClose;var v=me.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var f=me.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(f=me.t("Upload a file ({number} of {total})",{number:p+1,total:a.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var b=w()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!h,"p-file_upload_dialog--client_toolbar":c||u});var g=o&&l?s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(J["d"],{icon:"cloud-offline",level:"info"},me.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return s.a.createElement(X["a"],{className:b,title:f,onClose:this.onCancel,onCancel:h?this.onCancelDiscard:this.onCancel,onGo:h?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,shouldCloseOnOverlayClick:!h,cancelText:h?me.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:h?me.t("Yes, discard the message"):me.t("Upload"),footerText:h?me.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:h?"danger":"primary",showCancelButton:h},this.renderWarning(),g,s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(se["a"],{channelId:n,threadTs:i,text:r,initialContents:this.initialContents,onTextChange:this.onTextChange,ariaLabel:v,placeholder:v,enabled:m,focusOnMount:true,onEnter:this.onGo,enableBroadcastKeywords:!i,maxLines:6,ref:this.msgInputRef})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():s.a.createElement(s.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}]);return t}(i["PureComponent"]);ge.displayName="FileUploadDialog";ge.defaultProps=be;function _e(e,t){var a=Object(V["d"])(e);var r={overStorageLimit:Object(K["isOverStorageLimit"])(a),isStdPlan:Object(K["isOnStandardPlan"])(a),isPlusPlan:Object(K["isOnPlusPlan"])(a),isEnterprisePlan:Object(K["isEnterpriseTeam"])(a)};return n()({},Object(le["b"])(e,t),r,{retentionDuration:parseInt(Object(q["a"])(e,"file_retention_type"),10)?Object(q["a"])(e,"file_retention_duration"):null,teamId:a.id,isOffline:!Object(T["c"])(e),featureOfflineMode:Object(j["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(j["isFeatureEnabled"])(e,"feature_sonic_inputs"),currentChannelId:Object(m["a"])(e),pendingFiles:Object(d["getPendingFilesforDialog"])(e),clogger:Object(P["a"])({state:e}),clientToolBar:"composer_toolbar"===Object(A["getGroupForUser"])(e,"composer_toolbar"),isLegacyDropboxPicker:Object(q["a"])(e,"dropbox_legacy_picker")})}function ye(e){return{closeModal:function t(){return e(u["closeModal"].apply(void 0,arguments))},switchToChannel:function t(){return e(x["a"].apply(void 0,arguments))},getShareableChannelId:function t(){return e(D["a"].apply(void 0,arguments))},clearPendingFilesForDialog:function t(){return e(d["clearPendingFilesForDialog"].apply(void 0,arguments))},converMsgOpsToRichTextMessage:function t(){return e(F["a"].apply(void 0,arguments))}}}var ke=Object(E["connect"])(_e,ye)(ge);var Oe=Object(le["a"])(ke);var Ce=a(200);var Ee=Object(l["b"])("Takes N files and opens the file upload dialog",function(e,t,a){var r=a.files,i=a.threadTs,o=a.inputProxy;if(!r||!r.length){Object(c["a"])({getState:t}).warn("No files passed to openFileUploadDialog");return null}var l=t();var h=function t(c){if(!c||!c.length)return null;var p=Object(j["isFeatureEnabled"])(l,"feature_sonic_inputs");var h=Object(Ce["a"])(l);var v=Object(m["a"])(l);var f=Ie(i,o);var b=h?null:Se(i,{inputProxy:o,featureSonicInputs:p,currentChannelId:v});var g=h?we({featureWysiwygComposer:h,currentChannelId:v,inputProxyProp:o}):null;e(Object(d["processAndAddPendingFilesForDialog"])({files:c}));return e(Object(u["openModal"])({element:s.a.createElement(Oe,n()({},a,{files:c,initialText:b,initialContents:g,initialBroadcast:f,fileSizeExceeded:c.length<r.length}))}))};return e(Object(p["a"])({selectedFiles:r})).then(function(e){return h(e)})});Ee.meta={name:"openFileUploadDialog",key:"actionsOpenFileUploadDialogOpenFileUploadDialog",description:"Takes N files and opens the file upload dialog"};function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.inputProxy,r=t.featureSonicInputs,n=t.currentChannelId;if(a){var i=a.getText();i&&a.clear();return i}if(e&&Object(U["a"])()===e){var s=Object(U["g"])();s&&Object(U["b"])();return s}if(r){var o=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:n});var l=o.getText();l&&o.clear();return l}var c=Object(B["d"])();c&&Object(B["e"])("");return c}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureWysiwygComposer,a=e.currentChannelId,r=e.inputProxyProp;if(!t)return null;var n=r||Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:a});if(!n)return null;var i=n.getContents();i&&n.clear();return i}function Ie(e,t){if(t){var a=t.getBroadcast();a&&t.setBroadcast(false);return a}if(!e||Object(U["a"])()!==e)return false;return Object(U["d"])()}var je=t["a"]=Ee},589:function(e,t,a){"use strict";a.d(t,"c",function(){return r});a.d(t,"b",function(){return n});a.d(t,"d",function(){return i});a.d(t,"e",function(){return s});a.d(t,"a",function(){return o});var r=3;var n={light:{profile:cdn_url+"/80588/img/tractor/steps/step_01.png",workspace:cdn_url+"/80588/img/tractor/steps/step_02.png",invites:cdn_url+"/80588/img/tractor/steps/step_03.png",completion:cdn_url+"/80588/img/tractor/steps/step_04.png"},dark:{profile:cdn_url+"/484c25/img/tractor/steps/step_01_dark.png",workspace:cdn_url+"/484c25/img/tractor/steps/step_02_dark.png",invites:cdn_url+"/484c25/img/tractor/steps/step_03_dark.png",completion:cdn_url+"/484c25/img/tractor/steps/step_04_dark.png"}};var i={profile:0,workspace:1,invites:2,completion:3};var s={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"};var o={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"}},656:function(e,t,a){"use strict";a.d(t,"c",function(){return v});a.d(t,"b",function(){return f});a.d(t,"a",function(){return b});a.d(t,"f",function(){return g});a.d(t,"g",function(){return _});a.d(t,"i",function(){return y});a.d(t,"j",function(){return k});a.d(t,"h",function(){return O});a.d(t,"d",function(){return S});a.d(t,"e",function(){return I});var r=a(3);var n=a.n(r);var i=a(39);var s=a(32);var o=a(45);var l=a(63);var c=a(29);var u=a(547);var d=a(57);var p=a(219);var m=a(18);var h=a(6);var v=0;var f=1;var b=2;function g(e,t,a,r,o,d,p,g){if(!I(o,d,m["l"].PRQ_CHANNEL_SWITCH_USABLE))return;var _=void 0;var y=void 0;switch(r){case v:default:_=m["v"].COMPLETED;y=false;break;case f:_=m["v"].ABANDONED;y=true;break;case b:_=m["v"].COMPLETED;y=true;break}var k=Object(u["b"])(1e3*e*1e3,0);var O=n()({elapsed_time:k,target_channel_id:a,required_sync:y,end_state:_},C(p,t,g));var E={userId:g,teamId:o,enterpriseId:d,locale:Object(h["s"])()};Object(i["a"])(E).track(m["l"].PRQ_CHANNEL_SWITCH_USABLE,O);var S=Object(c["f"])(o);var w=S&&S.getState();var j=Object(s["a"])()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(l["c"])({state:w}).store(j,Math.round(e))}function _(e,t,a,r,o,d,p,g){if(!I(o,d,m["l"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var _=void 0;var y=void 0;switch(r){case v:default:_=m["v"].COMPLETED;y=false;break;case f:_=m["v"].ABANDONED;y=true;break;case b:_=m["v"].COMPLETED;y=false;break}var k=Object(u["b"])(1e3*e*1e3,0);var O=n()({elapsed_time:k,target_channel_id:a,required_sync:y,end_state:_},C(p,t,g));var E={userId:g,teamId:o,enterpriseId:d,locale:Object(h["s"])()};Object(i["a"])(E).track(m["l"].PRQ_CHANNEL_SWITCH_VISIBLE,O);var S=Object(c["f"])(o);var w=S&&S.getState();var j=Object(s["a"])()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(l["c"])({state:w}).store(j,Math.round(e))}function y(e,t,a,r,s,o,l,c){if(!I(r,s,m["l"].PRQ_TIME_TO_USABLE))return;var d=Object(u["b"])(1e3*e*1e3,0);var p=E();var v=n()({elapsed_time:d+p,desktop_elapsed_time:p,required_sync:a,end_state:c,start_type:m["p"].COLD,target_type:m["q"].CHANNEL},C(o,t,l));var f={userId:l,teamId:r,enterpriseId:s,locale:Object(h["s"])()};Object(i["a"])(f).track(m["l"].PRQ_TIME_TO_USABLE,v)}function k(e,t,a,r,s,o,l){if(!I(r,s,m["l"].PRQ_TIME_TO_VISIBLE))return;var c=Object(u["b"])(1e3*e*1e3,0);var d=E();var p=n()({elapsed_time:c+d,desktop_elapsed_time:d,required_sync:a,end_state:m["v"].COMPLETED,start_type:m["p"].COLD,target_type:m["q"].CHANNEL},C(o,t,l));var v={userId:l,teamId:r,enterpriseId:s,locale:Object(h["s"])()};Object(i["a"])(v).track(m["l"].PRQ_TIME_TO_VISIBLE,p)}function O(e,t,a,r,s,o,l){if(!I(r,s,m["l"].PRQ_SESSION_FRAME_STATS))return;var c=n()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},C(o,void 0,l));var u={userId:l,teamId:r,enterpriseId:s,locale:Object(h["s"])()};Object(i["a"])(u).track(m["l"].PRQ_SESSION_FRAME_STATS,c)}function C(e,t,a){var r="string"===typeof a&&a.startsWith("W");var i={device:{id:"",make:navigator.platform,model:navigator.platform,os:o["isDesktop"]?"electron":"webapp",os_version:o["sessionId"]||""}};var l=void 0;if(t){i.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":l=m["r"].APP_ICON;break;case"MSG_PANE":l=m["r"].MSG_PANE;break;case"SIDE_BAR":l=m["r"].SIDE_BAR;break;case"QUICK_SWITCH":l=m["r"].QUICK_SWITCH;break;default:l=m["r"].UNKNOWN;break}}var c=n()({contexts:i,session_id:e,time:Date.now(),app_id:Object(s["a"])()?"web_sonic":"web",is_tablet:false,user_id:r?void 0:a,external_id:r?a:void 0},w());t&&(c.trigger=l);return c}function E(){if(o["isDesktop"]){var e=Object(o["getPerformanceRecord"])();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0&&e.isInitialTeamBooted){var t=e["BOOT"];var a=e["PRELOAD_READY"];var r=Object(o["calcHrTime"])(t,a);return r>0?1e6*r:0}}return 0}function S(){if(o["isDesktop"]){var e=Object(o["getPerformanceRecord"])();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0){var t=e.PRELOAD_STARTED;var a=e.PRELOAD_READY;var r=Object(o["calcHrTime"])(t,a);return Math.floor(r)}}return 0}function w(){if(o["isDesktop"]){var e=Object(o["getAppVersion"])();if(e){var t=e.prerelease?" ("+e.prerelease+")":"";var a="string"===typeof e.prerelease?e.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&e.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var r=void 0;switch(a){case"alpha":case"electron3":r=m["b"].ALPHA;break;case"beta":r=m["b"].BETA;break;default:r=m["b"].PRODUCTION;break}return{app_version:e.major+"."+e.minor+"."+e.patch+t,release_version:e.major+"."+e.minor+"."+e.patch,build_type:r}}}return{app_version:"",release_version:"",build_type:m["b"].PRODUCTION}}function I(e,t,a){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(p["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[m["l"].PRQ_TIME_TO_USABLE,m["l"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if([m["l"].PRQ_TIME_TO_USABLE,m["l"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if(a===m["l"].PRQ_SESSION_FRAME_STATS)return Object(p["a"])(10);return Object(p["a"])(10)}Object(d["exportToGlobalDebugger"])("prq",{getDesktopElapsedTime:E,getDesktopPreloadTime:S,getElectronInfo:w})},771:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var m=a(2);var h=a(40);var v=a.n(h);var f=a(0);var b=a(31);var g=a(6);var _=a(18);var y=a(16);var k=a(354);var O=a(908);var C=a(1061);var E=a(1583);var S=a(27);var w=a(1646);var I=a(44);var j=a(86);var T=a(52);var A=a(288);var N=a(3);var M=a.n(N);var P=a(857);var R=a(373);var x=a(131);var D=a(345);var F=a(135);var L=a(196);var B=a(2308);var U=new g["b"]("enterprise_dashboard");var q={featureAuditLogsView:f["b"].bool,auditLogResults:f["b"].array,isLoading:f["b"].bool,onRequestNextPage:f["b"].func.isRequired,newQuery:f["b"].bool};var W={featureAuditLogsView:false,auditLogResults:[],isLoading:true,newQuery:true};var H=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderAffects",value:function e(t){var a=t.entity,r=void 0===a?{}:a,n=t.context,i=void 0===n?{}:n,s=t.actor,o=void 0===s?{}:s;if(Object(m["isEmpty"])(r)||Object(m["isEqual"])(r,o))return"-";var l=r.type;var c=r[l];var u=c.name||"";Object(x["a"])(c.id)&&(u=p.a.createElement(R["a"],{channel:M()({},c,{is_private:"private"===c.privacy})}));var d=c.email;if(!d){var h=i.location||{};var v=c.id!==h.id&&h.name;d=v&&h.domain?v+" ("+h.domain+".slack.com)":h.domain&&h.domain+".slack.com"}return p.a.createElement("div",null,p.a.createElement("div",{className:"p-audit_logs__row_item_value_header p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_affected_title"},u),d&&p.a.createElement("div",{className:"p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_affected_subtitle",title:d},d))}},{key:"renderAction",value:function e(t){var a=t.action,r=void 0===a?"":a;var n=r.split("_").map(function(e,t){return p.a.createElement(d["Fragment"],{key:e},!!t&&p.a.createElement(d["Fragment"],null,"_",p.a.createElement("wbr",null)),e)});return p.a.createElement("span",{"data-qa":"audit_log_result_row_event"},n)}},{key:"renderTime",value:function e(t){var a=Object(F["a"])(t,{returnMoment:true});return p.a.createElement("div",{"data-qa":"audit_log_result_row_date"},p.a.createElement("div",null,Object(L["a"])(a,{shortenMonth:true,shortenDay:true})),p.a.createElement("div",null,Object(D["a"])(t,"{time}")))}},{key:"renderUser",value:function e(t,a){if(!this.props.featureAuditLogsView)return null;return p.a.createElement(d["Fragment"],null,p.a.createElement("div",{className:"p-audit_logs__row_item_value_header p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_actor_title"},t),p.a.createElement("div",{className:"p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_actor_subtitle",title:a},a))}},{key:"renderDetails",value:function e(t){var a=t.details,r=void 0===a?{}:a;if(!this.props.featureAuditLogsView)return null;var n=function e(){if(!Object(m["isUndefined"])(r.new_value)||!Object(m["isUndefined"])(r.previous_value))return p.a.createElement(d["Fragment"],null,!Object(m["isUndefined"])(r.previous_value)&&p.a.createElement("div",null,U.t("Was: {prev}",{prev:r.previous_value})),!Object(m["isUndefined"])(r.new_value)&&p.a.createElement("div",null,U.t("Now: {new}",{new:r.new_value})));var t=r.inviter;if(t)return p.a.createElement(d["Fragment"],null,t.name&&p.a.createElement("div",null,U.t("Invited by {name}",{name:t.name})),t.email&&p.a.createElement("div",null,t.email));return"-"};return p.a.createElement("div",{"data-qa":"audit_log_result_row_detail"},n(r))}},{key:"render",value:function e(){var t=this;if(!this.props.featureAuditLogsView)return null;var a=this.props,r=a.auditLogResults,n=a.isLoading,i=a.onRequestNextPage,s=a.newQuery;var o=[{value:U.t("Acting User"),id:"acting_user_header",className:"p-audit_logs__col_member",noHover:true,"data-qa":"audit_log_result_col_actor_title"},{value:U.t("Event"),id:"event_header",className:"p-audit_logs__col_event",noHover:true,"data-qa":"audit_log_result_col_event_title"},{value:U.t("Affects"),id:"affects_header",className:"p-audit_logs__col_affects",noHover:true,"data-qa":"audit_log_result_col_affected_title"},{value:U.t("Details"),id:"details_header",className:"p-audit_logs__col_details",noHover:true,"data-qa":"audit_log_result_col_detail_title"},{value:U.t("Date"),id:"date_header",className:"p-audit_logs__col_date",noHover:true,"data-qa":"audit_log_result_col_date_title"}];var l=Object(m["map"])(r,function(e){return{id:e.id,items:[{id:"acting_user",value:t.renderUser(Object(m["get"])(e,"actor.user.name",""),Object(m["get"])(e,"actor.user.email","")),className:"p-audit_logs__col_member  p-audit_logs__row_item--nowrap"},{id:"event",value:t.renderAction(e),className:"p-audit_logs__col_event"},{id:"affects",value:t.renderAffects(e),className:"p-audit_logs__col_affects p-audit_logs__row_item--nowrap"},{id:"details",value:t.renderDetails(e),className:"p-audit_logs__col_details"},{id:"date",value:t.renderTime(Object(m["get"])(e,"date_create",v()())),className:"p-audit_logs__col_date"}]}});return p.a.createElement(P["a"],{autoHeight:true,rows:l,headers:o,onRequestNextPage:i,isLoading:n,newQuery:s})}}]);return t}(d["Component"]);H.displayName="AuditLogsTable";H.defaultProps=W;var G=H;var V=new g["b"]("enterprise_dashboard");var K=50;var z={USER:"user",CHANNEL:"channel",WORKSPACE:"workspace"};var Q=function e(t){switch(t){case z.USER:return V.t("Users",{fallbackHash:"57f2b181d0a5e79a147ea1cdf41457f58dbbb3c9",fallbackHashNs:"migration_status_page"});case z.CHANNEL:return V.t("Channels");case z.WORKSPACE:return V.t("Workspaces");default:return""}};var Y={featureAuditLogsView:f["b"].bool,getAuditLogs:f["b"].func.isRequired,searchUsers:f["b"].func.isRequired,searchAffected:f["b"].func.isRequired,getAuditLogActions:f["b"].func.isRequired,currentUser:f["b"].object,pageImpressionEventId:f["b"].number,clogger:f["b"].object};var J={featureAuditLogsView:false,currentUser:null,clogger:null,pageImpressionEventId:null};function X(){return Object(m["once"])(function(e,t,a){if(!(e&&a))return;e.track(a,{is_admin:Object(y["isAdmin"])(t),is_owner:Object(y["isOwner"])(t),contexts:{ui_context:{action:_["w"].IMPRESSION}}})})}var Z=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=v()().subtract(7,"d").startOf("day").unix();var i=v()().endOf("day").unix();a.state={selectedUserId:null,selectedAffectedId:null,selectedActionId:null,selectedStartDateTime:r,selectedEndDateTime:i,loading:true,auditLogResults:[],loadingFilterOptions:true,actions:[],newQuery:true,tempStartDateTime:r,tempEndDateTime:i};Object(b["a"])(a,["setSelectedUser","setSelectedAction","setSelectedAffected","mapActions","getAndSetAuditLogs","onRequestNextPage","onStartDateChange","onEndDateChange","onCalendarClose"]);a.logImpression=X();return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getAuditLogActions().then(function(e){var a=e.actions;t.setState(function(){return{loadingFilterOptions:false,actions:t.mapActions(a)}});t.getAndSetAuditLogs()})}},{key:"componentDidUpdate",value:function e(){var t=this.props,a=t.currentUser,r=t.clogger,n=t.pageImpressionEventId;a&&this.logImpression(r,a,n)}},{key:"onRequestNextPage",value:function e(){if(""===this.state.nextResultsCursor)return;this.getAndSetAuditLogs({appendResults:true})}},{key:"onStartDateChange",value:function e(t){var a=t.selectedStartDate;this.setState(function(){return{tempStartDateTime:v()(a).startOf("day").unix()}})}},{key:"onEndDateChange",value:function e(t){var a=t.selectedEndDate;this.setState(function(){return{tempEndDateTime:v()(a).endOf("day").unix()}})}},{key:"onCalendarClose",value:function e(){var t=this.state,a=t.selectedStartDateTime,r=t.selectedEndDateTime,n=t.tempStartDateTime,i=t.tempEndDateTime;a===n&&r===i||this.setState(function(){return{selectedStartDateTime:n,selectedEndDateTime:i}},this.getAndSetAuditLogs)}},{key:"setSelectedAction",value:function e(t){var a=t.value;if(this.state.selectedActionId===a)return;this.setState(function(){return{selectedActionId:a}},this.getAndSetAuditLogs)}},{key:"setSelectedUser",value:function e(t){var a=t.value;if(this.state.selectedUserId===a)return;this.setState(function(){return{selectedUserId:a}},this.getAndSetAuditLogs)}},{key:"setSelectedAffected",value:function e(t){var a=t.value;if(this.state.selectedAffectedId===a)return;this.setState(function(){return{selectedAffectedId:a}},this.getAndSetAuditLogs)}},{key:"getAndSetAuditLogs",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.appendResults,n=a.retry;var i=n?this.state.newQuery:!r;this.setState(function(){return{loading:true,newQuery:i}});this.currentSearch&&this.currentSearch.isPending()&&this.currentSearch.cancel();var s=this.state,o=s.selectedUserId,l=s.selectedActionId,c=s.selectedAffectedId,u=s.selectedStartDateTime,d=s.selectedEndDateTime,p=s.nextResultsCursor;this.currentSearch=this.props.getAuditLogs({limit:K,action:l,actor:o,entity:c,cursor:i?void 0:p,oldest:u,latest:d}).then(function(e){var a=e.entries,r=e.metadata,n=void 0===r?{}:r;t.setState(function(e){return{loading:false,auditLogResults:i?a:e.auditLogResults.concat(a),nextResultsCursor:n.next_cursor,error:false}})}).catch(function(){t.setState(function(){return{loading:false,error:true}})})}},{key:"mapActions",value:function e(t){return Object(m["map"])(t,function(e,t){return{label:t,options:Object(m["map"])(e,function(e){return{label:e,value:e}})}})}},{key:"renderTableOverlay",value:function e(t){return p.a.createElement("div",{className:"p-audit_logs__table_overlay"},t)}},{key:"renderError",value:function e(){var t=this;if(!this.props.featureAuditLogsView)return null;return this.renderTableOverlay(p.a.createElement(p.a.Fragment,null,p.a.createElement("h3",{className:"p-audit_logs__table_overlay__title"},V.t("Unable to load audit logs")),p.a.createElement("p",{className:"p-audit_logs__table_overlay__p"},V.rt("We're having trouble loading your audit logs at the moment.  If the problem persists, please <Link>contact support</Link>.",null,function(e){var t=e.key,a=e.text;return p.a.createElement(I["a"],{key:t,href:"mailto:feedback@slack.com"},a)})),p.a.createElement(S["d"],{className:"p-audit_logs__table_overlay__retry",type:"outline",size:"medium",onClick:function e(){return t.getAndSetAuditLogs({retry:true})}},V.t("Retry"))))}},{key:"renderNoResults",value:function e(){if(!this.props.featureAuditLogsView)return null;return this.renderTableOverlay(p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"p-audit_logs__table_overlay__p"},V.t("No matches found for these filters."))))}},{key:"renderResults",value:function e(){var t=!this.state.error&&!this.state.loading&&this.state.auditLogResults&&0===this.state.auditLogResults.length;var a=this.state.error;return p.a.createElement("div",{className:"p-audit_logs__table_container"},a&&this.renderError(),t&&this.renderNoResults(),p.a.createElement(G,{featureAuditLogsView:this.props.featureAuditLogsView,isLoading:this.state.loading,newQuery:this.state.newQuery,auditLogResults:this.state.auditLogResults,onRequestNextPage:this.onRequestNextPage}))}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,n=t.label,i=t.entity;switch(a){case z.USER:return p.a.createElement(O["a"],{id:r,size:"small",showStatus:false,showPresence:false});case z.CHANNEL:return p.a.createElement(C["a"],{channel:i,size:"small"});case z.WORKSPACE:return p.a.createElement(E["a"],{id:r,size:"small"});default:return n}}},{key:"renderFilters",value:function e(){var t=this.props,a=t.featureAuditLogsView,r=t.searchUsers,n=t.searchAffected;if(!a)return null;var i="p-audit_logs__filter";return p.a.createElement("div",{className:"p-audit_logs__filter_container"},p.a.createElement("div",{className:"p-audit_logs_left_filters"},p.a.createElement(T["a"],{text:V.t("User"),className:i},p.a.createElement(k["c"],{selectId:"audit_log_user_filter",classPrefix:i,placeholderText:V.t("Select a User..."),isRequired:false,renderOption:this.renderEntity,renderSelectedOption:this.renderEntity,onOptionSelected:this.setSelectedUser,search:r,size:A["f"].SMALL,ariaLabel:V.t("User / Actor filter"),width:"100%",minOptionsListWidth:300})),p.a.createElement(T["a"],{text:V.t("Event"),className:i},p.a.createElement(k["f"],{selectId:"audit_log_action_filter",classPrefix:i,placeholderText:V.t("Select an event..."),isRequired:false,options:this.state.actions,onOptionSelected:this.setSelectedAction,size:A["f"].SMALL,ariaLabel:V.t("Event filter"),width:"100%",minOptionsListWidth:300})),p.a.createElement(T["a"],{text:V.t("Affects"),className:i},p.a.createElement(k["c"],{selectId:"audit_log_affected_filter",classPrefix:i,placeholderText:V.t("Select what was affected..."),isRequired:false,renderOption:this.renderEntity,renderSelectedOption:this.renderEntity,onOptionSelected:this.setSelectedAffected,search:n,size:A["f"].SMALL,ariaLabel:V.t("Affected filter"),debounceWaitPeriod:200,width:"100%",minOptionsListWidth:300}))),p.a.createElement("div",{className:"p-audit_logs_right_filters"},p.a.createElement(T["a"],{text:V.t("Date range")},p.a.createElement(w["a"],{size:"small",showStartEndLabels:false,width:350,onStartDateChange:this.onStartDateChange,onEndDateChange:this.onEndDateChange,maxRange:7,showClearSelection:false,endDateRequired:true,onCalendarClose:this.onCalendarClose,disableDatesAfter:v()().format("YYYY-MM-DD"),selectedStartDate:v()().subtract(7,"d").format("YYYY-MM-DD"),selectedEndDate:v()().format("YYYY-MM-DD"),singleMonthMode:true,disableManualEdits:true,dataQa:"audit_log_date_range"}))))}},{key:"render",value:function e(){if(!this.props.featureAuditLogsView)return null;return p.a.createElement("div",{className:"p-audit_logs"},p.a.createElement("h1",{className:"p-audit_logs__title","data-qa":"audit_log_page_title"},V.t("Audit Logs")),this.state.loadingFilterOptions?p.a.createElement(j["a"],{color:"blue",size:"jumbo"}):p.a.createElement(p.a.Fragment,null,this.renderFilters(),this.renderResults()))}}]);return t}(d["PureComponent"]);Z.displayName="AuditLogs";Z.defaultProps=J;var $=Z;a.d(t,"a",function(){return z});a.d(t,"c",function(){return Q});var ee=t["b"]=$},812:function(e,t,a){"use strict";var r=a(37);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(13);var _=a.n(g);var y=a(2);var k=a.n(y);var O=a(31);var C=a(0);var E=a(137);var S=a(300);var w=a(1073);var I=a(86);var j=a(1980);var T=a(1659);var A=a(560);var N=a(421);var M=a(810);var P=a(32);var R=a(94);var x=a(851);var D=a(200);var F=a(1193);var L=a(1194);var B=a(557);var U=a(3343);var q=a.n(U);var W={offsetX:24,offsetY:134};var H=function e(t){var a=t&&t.current||t;if(!a)return;var r=Object(y["isFunction"])(a.getWrappedInstance)?a.getWrappedInstance():a;if(!r)return;if(Object(y["isFunction"])(r.focus))return r};var G={className:C["b"].string,bodyClassName:C["b"].string,flexOrigin:C["b"].string,isEmpty:C["b"].bool,isOffline:C["b"].bool,isLoading:C["b"].bool,onBlur:C["b"].func,onFocus:C["b"].func,renderBody:C["b"].func.isRequired,renderEmpty:C["b"].func,onOptionsClick:C["b"].func,renderControls:C["b"].func,renderSubtitle:C["b"].func,title:C["b"].node.isRequired,viewId:C["b"].string.isRequired,kbNavOrder:C["b"].number,dataQa:C["b"].string,headerProps:C["b"].object,userAttentionIsOnChat:C["b"].bool,composerVisible:C["b"].bool,focus:C["b"].func,clientTheme:C["b"].string,removeFromSectionNavigation:C["b"].func,addToSectionNavigation:C["b"].func,setInitialActiveSection:C["b"].func};var V={className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:false,isOffline:false,isLoading:false,onBlur:y["noop"],onFocus:y["noop"],renderEmpty:y["noop"],renderControls:y["noop"],renderSubtitle:y["noop"],onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:false,composerVisible:false,focus:void 0,removeFromSectionNavigation:y["noop"],addToSectionNavigation:y["noop"],setInitialActiveSection:y["noop"],clientTheme:"light"};var K=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(a,["focus","blur","setInitialActiveSection"]);a.flexpaneBodyRef=f.a.createRef();a.flexpaneHeaderRef=f.a.createRef();return a}u()(t,[{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(F["a"])(a)&&this.props.addToSectionNavigation();Object(L["a"])(a)&&this.props.removeFromSectionNavigation()}},{key:"setInitialActiveSection",value:function e(){this.props.setInitialActiveSection()}},{key:"focusCloseButton",value:function e(){var t=H(this.flexpaneHeaderRef);t&&t.focus()}},{key:"focusItemInBody",value:function e(){var t=H(this.flexpaneBodyRef);if(!t)return;var a=Object(A["a"])(t)[0];a&&a.focus()}},{key:"focus",value:function e(){var t=this.props,a=t.isEmpty,e=t.focus,r=t.onFocus;if(a){this.focusCloseButton();return}e?e():this.focusItemInBody();Object(P["a"])()||r()}},{key:"blur",value:function e(){document.activeElement.blur();Object(P["a"])()||this.props.onBlur()}},{key:"isLoading",value:function e(){var t=this.props,e=t.isLoading,a=t.isOffline;return e&&!a}},{key:"renderBody",value:function e(){var t=this.props,a=t.isEmpty,r=t.isOffline,e=t.renderBody,n=t.renderEmpty;if(a){if(this.isLoading())return null;return n({isOffline:r})}return e()}},{key:"renderSubtitle",value:function e(){var e=this.props.renderSubtitle;var t=e();if(!t)return null;return f.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t)}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.bodyClassName,n=t.flexOrigin,i=t.isEmpty,o=t.onOptionsClick,l=t.title,c=t.viewId,u=t.kbNavOrder,d=t.dataQa,p=t.renderControls,m=t.headerProps,h=t.clientTheme;var v=f.a.createElement(S["a"],{id:c},f.a.createElement("div",{"data-qa":d,className:_()("p-flexpane",a)},f.a.createElement(j["a"],s()({ref:this.flexpaneHeaderRef,onOptionsClick:o,renderSecondary:p,clientTheme:h},m),f.a.createElement(T["a"],{flexOrigin:n,size:"medium"}),f.a.createElement("div",{className:"p-flexpane__title_container"},l,this.renderSubtitle())),f.a.createElement("div",{ref:this.flexpaneBodyRef,className:_()("p-flexpane__body",r,"p-flexpane__body--"+h,{"p-flexpane__body--empty":i&&!this.isLoading(),"p-flexpane__body--empty_loading":i&&this.isLoading()})},this.isLoading()&&f.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},f.a.createElement(I["a"],{size:"medium",noMargin:true})),this.renderBody())));if(Object(P["a"])())return v;return f.a.createElement(w["a"],{component:this,order:u},v)}}]);return t}(f.a.Component);K.displayName="Flexpane";K.defaultProps=V;var z=function e(t){return{isOffline:!Object(E["c"])(t),userAttentionIsOnChat:Object(N["e"])(t),composerVisible:(Object(D["a"])(t)||"composer_toolbar"===Object(R["getGroupForUser"])(t,"composer_toolbar"))&&Object(x["isComposerVisible"])(t),clientTheme:Object(B["getClientTheme"])(t)}};var Q=Object(P["a"])()?Object(M["a"])(K,"Flexpane",{index:1}):K;var Y=Object(b["connect"])(z,null,null,{pure:false})(function(e){var t=e.forwardedRef,a=n()(e,["forwardedRef"]);return f.a.createElement(Q,s()({ref:t},a))});t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(Y,s()({forwardedRef:t},e))})},818:function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(4);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(0);var p=a(1);var m=a.n(p);var h=a(342);var v=a.n(h);var f=a(13);var b=a.n(f);var g=a(2);var _=a(420);var y=a(161);var k=a(3);var O=a.n(k);var C=a(37);var E=a.n(C);var S=a(367);var w={children:d["b"].node,onClick:d["b"].func};var I={children:void 0,onClick:g["noop"]};var j=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.buttonRef=m.a.createRef();a.focusOnButton=a.focusOnButton.bind(a);return a}s()(t,[{key:"componentDidMount",value:function e(){this.focusOnButton()}},{key:"focusOnButton",value:function e(){this.buttonRef.current.focus()}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.onClick,n=E()(t,["children","onClick"]);return m.a.createElement(S["c"],O()({ref:this.buttonRef,"data-qa":"coachmark_close_button",onClick:r},n),a)}}]);return t}(p["PureComponent"]);j.displayName="CoachmarkCloseButton";j.defaultProps=I;var T=j;var A=a(1069);var N=a(3398);var M=[10,20,30,40,50,60,70,80,90];var P={anchorElement:d["b"].instanceOf(Element),arrowPosition:d["b"].oneOf(M),children:d["b"].node.isRequired,coachmarkClassNames:d["b"].string,qa:d["b"].string,isOpen:d["b"].bool.isRequired,closeCoachmark:d["b"].func,offsetX:d["b"].number,offsetY:d["b"].number,onClickPrimaryButton:d["b"].func,onClickSecondaryButton:d["b"].func,primaryCallToActionText:d["b"].string,secondaryCallToActionText:d["b"].string,orientation:d["b"].oneOf(A["a"]).isRequired,centerOnArrow:d["b"].bool,style:d["b"].object};var R={anchorElement:null,arrowPosition:50,closeCoachmark:g["noop"],coachmarkClassNames:void 0,qa:"coachmark",offsetX:0,offsetY:0,onClickPrimaryButton:g["noop"],onClickSecondaryButton:g["noop"],primaryCallToActionText:void 0,secondaryCallToActionText:void 0,centerOnArrow:false,style:{}};var x=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.contentRef=m.a.createRef();return a}s()(t,[{key:"getComputedStyles",value:function e(t,a){var r=this.props,n=r.offsetX,i=r.offsetY,s=r.centerOnArrow;var o=window.scrollX||window.pageXOffset;var l=window.scrollY||window.pageYOffset;var c=20;var u={};switch(a){case"top":u.left=t.left+o+parseInt(n,10);u.top=t.top+l-t.height+parseInt(i,10);s&&(u.left+=t.width/2);break;case"bottom":u.left=t.left+o+parseInt(n,10);u.top=t.top+l+t.height+c+parseInt(i,10);s&&(u.left+=t.width/2);break;case"right":u.left=t.left+o+t.width+c+parseInt(n,10);u.top=t.top+l+t.height/2+parseInt(i,10);break;case"left":u.left=t.left+o+parseInt(n,10);u.top=t.top+l+t.height/2+parseInt(i,10);break;default:break}return u}},{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.arrowPosition,n=t.children,i=t.closeCoachmark,s=t.coachmarkClassNames,o=t.qa,l=t.isOpen,c=t.onClickPrimaryButton,u=t.onClickSecondaryButton,d=t.orientation,p=t.primaryCallToActionText,h=t.secondaryCallToActionText,f=t.centerOnArrow,k=t.style;if(!l||!a)return null;var O=b()("c-coachmark","c-coachmark--"+d,"c-coachmark--"+r,{"c-coachmark--center_on_arrow":f},s);var C=a.getBoundingClientRect?this.getComputedStyles(a.getBoundingClientRect(),d):{};var E=Object(g["merge"])({},C,k);var S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",zIndex:1e3};return m.a.createElement(v.a,{data:{qa:o},className:O,isOpen:l,onRequestClose:i,overlayClassName:"c-coachmark__overlay",ref:this.contentRef,shouldCloseOnEsc:true,style:{overlay:S,content:E}},m.a.createElement(y["a"],null,m.a.createElement(_["a"],{className:"c-coachmark__close",icon:"times",onClick:i,"aria-label":"Close Coachmark","data-qa":"close_coachmark_button"}),n,m.a.createElement("div",{className:"c-coachmark__footer"},h&&m.a.createElement(T,{onClick:u,type:"outline",className:"margin_right_75","data-action-type":"secondary"},h),p&&m.a.createElement(T,{onClick:c,type:"primary","data-action-type":"primary"},p))))}}]);return t}(p["PureComponent"]);x.displayName="Coachmark";x.defaultProps=R;var D=t["a"]=x},819:function(e,t,a){"use strict";a.d(t,"c",function(){return o});a.d(t,"i",function(){return l});a.d(t,"b",function(){return c});a.d(t,"d",function(){return u});a.d(t,"e",function(){return d});a.d(t,"f",function(){return p});a.d(t,"h",function(){return m});a.d(t,"a",function(){return h});a.d(t,"j",function(){return v});a.d(t,"g",function(){return f});a.d(t,"k",function(){return b});var r=a(0);var n=a(34);var i=a(30);var s=a(14);var o=Object(i["a"])("Get EKM Clear Cache timestamp",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.getClearCacheTs",reason:r})).catch(function(e){var a="failed to get clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});o.meta={name:"getClearCacheTs",key:"fetchersEkmApiGetClearCacheTs",description:"Get EKM Clear Cache timestamp"};o.propTypes={reason:r["b"].string};var l=Object(i["a"])("Set EKM Clear Cache timestamp",function(e,t,a){var r=a.timestamp,i=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.setClearCacheTs",args:{timestamp:r},reason:i})).catch(function(e){var a="failed to set clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});l.meta={name:"setClearCacheTs",key:"fetchersEkmApiSetClearCacheTs",description:"Set EKM Clear Cache timestamp"};l.propTypes={timestamp:r["b"].number,reason:r["b"].string};var c=Object(i["a"])("Get EKM Backfill info",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"ekm.backfill.info",reason:r})).catch(function(e){var a="failed to get EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});c.meta={name:"getBackfillInfo",key:"fetchersEkmApiGetBackfillInfo",description:"Get EKM Backfill info"};c.propTypes={reason:r["b"].string};var u=Object(i["a"])("Get Misson Control EKM Backfill info",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.info",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});u.meta={name:"getMCBackfillInfo",key:"fetchersEkmApiGetMCBackfillInfo",description:"Get Misson Control EKM Backfill info"};u.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var d=Object(i["a"])("Get EKM Status information for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.status",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM Status";Object(s["a"])({getState:t}).error("EKM",a);throw e})});d.meta={name:"getMCEKMStatus",key:"fetchersEkmApiGetMCEKMStatus",description:"Get EKM Status information for Mission Control"};d.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var p=Object(i["a"])("Pause EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.pause",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to pause MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});p.meta={name:"pauseMCEKMBackfill",key:"fetchersEkmApiPauseMCEKMBackfill",description:"Pause EKM Backfill for Mission Control"};p.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var m=Object(i["a"])("Resume EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.resume",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to resume MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});m.meta={name:"resumeMCEKMBackfill",key:"fetchersEkmApiResumeMCEKMBackfill",description:"Resume EKM Backfill for Mission Control"};m.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var h=Object(i["a"])("Enroll Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester,c=a.role,u=a.loggingGroupName;return e(Object(n["a"])({method:"mc.ekm.enroll",reason:r,args:{team_id:i,key_family:o,requester:l,role:c,log_group_name:u}})).catch(function(e){var a="failed to enroll org in EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});h.meta={name:"enrollMCEKM",key:"fetchersEkmApiEnrollMCEKM",description:"Enroll Org in EKM for Mission Control"};h.propTypes={teamId:r["b"].string.isRequired,keyFamily:r["b"].string.isRequired,requester:r["b"].string.isRequired,role:r["b"].string,loggingGroupName:r["b"].string,reason:r["b"].string};var v=Object(i["a"])("Unenroll Org from EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester;return e(Object(n["a"])({method:"mc.ekm.unenroll",reason:r,args:{team_id:i,requester:o}})).catch(function(e){var a="failed to unenroll org from EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});v.meta={name:"unenrollMCEKM",key:"fetchersEkmApiUnenrollMCEKM",description:"Unenroll Org from EKM for Mission Control"};v.propTypes={teamId:r["b"].string.isRequired,requester:r["b"].string.isRequired,reason:r["b"].string};var f=Object(i["a"])("Re-key Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester;return e(Object(n["a"])({method:"mc.ekm.rekey",reason:r,args:{team_id:i,key_family:o,requester:l}})).catch(function(e){var a="failed to re-key org in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});f.meta={name:"rekeyMCEKM",key:"fetchersEkmApiRekeyMCEKM",description:"Re-key Org in EKM for Mission Control"};f.propTypes={teamId:r["b"].string.isRequired,keyFamily:r["b"].string.isRequired,requester:r["b"].string.isRequired,reason:r["b"].string};var b=Object(i["a"])("Update EKM Logging for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester,l=a.loggingGroupName,c=a.role;return e(Object(n["a"])({method:"mc.ekm.updateLogging",reason:r,args:{team_id:i,requester:o,log_group_name:l,role:c}})).catch(function(e){var a="failed to update EKM logging in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});b.meta={name:"updateEKMLoggingMC",key:"fetchersEkmApiUpdateEKMLoggingMC",description:"Update EKM Logging for Mission Control"};b.propTypes={teamId:r["b"].string.isRequired,requester:r["b"].string.isRequired,loggingGroupName:r["b"].string.isRequired,role:r["b"].string.isRequired,reason:r["b"].string}},917:function(e,t,a){"use strict";a.d(t,"b",function(){return U});var r=a(10);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(5);var l=a.n(o);var c=a(4);var u=a.n(c);var d=a(7);var p=a.n(d);var m=a(8);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(13);var y=a.n(_);var k=a(2);var O=a.n(k);var C=a(2014);var E=a(545);var S=a(422);var w=a(42);var I=a(853);var j=a(458);var T=a(2015);var A=a(3556);var N=a.n(A);var M=Object(v["createContext"])(k["noop"]);var P=3e3;var R=200;var x={msg:b["b"].object,className:b["b"].string,hover:b["b"].bool,onClick:b["b"].func,highlight:b["b"].bool,clearHighlight:b["b"].func,children:b["b"].node,isDeleting:b["b"].bool,removeMessageAndTimestamp:b["b"].func,logMessage:b["b"].func};var D={msg:void 0,className:void 0,hover:true,onClick:k["noop"],highlight:void 0,clearHighlight:k["noop"],children:void 0,isDeleting:void 0,removeMessageAndTimestamp:k["noop"],logMessage:b["b"].func};var F=function(e){h()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setBackground=a.setBackground.bind(a);a.onClick=a.onClick.bind(a);a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(a);a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(a);a.highlightTimer=null;a.state={};a.ref=f.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.highlight&&this.startHighlightTimer();this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function e(t){!t.highlight&&this.props.highlight&&this.startHighlightTimer();!t.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.props.clearHighlight()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClick",value:function e(t){var a=this.props.msg;if(t.shiftKey&&Object(j["a"])(t)&&!Object(T["a"])(t.target)){t.preventDefault();this.props.logMessage({channelId:a.channel,ts:a.ts})}this.props.onClick(t)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.msg;this.props.removeMessageAndTimestamp({channelId:t.channel,ts:t.ts});this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{height:a}},r)}},{key:"setBackground",value:function e(t){this.setState(function(e){return s()({},e,t)})}},{key:"startDeleteAnimation",value:function e(){var t=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(I["a"])({fromValue:t,toValue:0,duration:R,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function e(){var t=this;this.highlightTimer&&clearTimeout(this.highlightTimer);this.highlightTimer=setTimeout(function(){t.highlightTimer=null;t.props.clearHighlight()},P)}},{key:"render",value:function e(){var t;var a=this.state.height;var r="number"===typeof a?{height:a}:null;var i=y()("c-message_kit__background",(t={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},n()(t,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),n()(t,"c-message_kit__background--editing",this.state.editing),n()(t,"c-message_kit__background--highlight",this.props.highlight),n()(t,"c-message_kit__background--deleting",this.props.isDeleting),t),this.props.className);return f.a.createElement(M.Provider,{value:this.setBackground},f.a.createElement("div",{role:"document",className:i,ref:this.ref,style:r,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(w["isUnprocessedMsg"])(this.props.msg)},this.props.children))}}]);return t}(v["PureComponent"]);F.displayName="MessageBackground";F.defaultProps=D;function L(e,t){var a=t.msg;var r=false;if(a){var n=Object(S["getMessageMetaData"])(e,{channelId:a.channel,ts:a.ts});r=n.isDeleting}return{isDeleting:r}}var B=function e(t){return{removeMessageAndTimestamp:function e(a){return t(Object(E["a"])(a))},logMessage:function e(a){return t(Object(C["a"])(a))}}};t["a"]=Object(g["connect"])(L,B)(F);function U(e){return function t(a){return f.a.createElement(M.Consumer,null,function(t){return f.a.createElement(e,s()({},a,{setBackground:t}))})}}},918:function(e,t,a){"use strict";a.d(t,"b",function(){return w});var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(4);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(13);var b=a.n(f);var g=a(2);var _=a.n(g);var y=a(1295);var k=a(917);var O=Object(m["createContext"])({hover:false,setHover:g["noop"]});var C={className:v["b"].string,children:v["b"].node,hovered:v["b"].bool,setBackground:v["b"].func,"data-qa":v["b"].string,hasKeyboardFocus:v["b"].bool,hasKeyboardFocusWithin:v["b"].bool,onFocus:v["b"].func,onBlur:v["b"].func};var E={className:null,children:void 0,hovered:false,setBackground:g["noop"],"data-qa":void 0,hasKeyboardFocus:false,hasKeyboardFocusWithin:false,onFocus:g["noop"],onBlur:g["noop"]};var S=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseOver=a.onMouseOver.bind(a);a.onMouseOut=a.onMouseOut.bind(a);a.onMutation=a.onMutation.bind(a);a.setHover=a.setHover.bind(a);a.hoveredElement=null;a.mutationObserver=null;a.state={hoverCount:0,hover:false};return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"componentWillUnmount",value:function e(){if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"onMouseOver",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!r.contains(n)){this.setHover(true);if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.onMutation);this.mutationObserver.observe(r,{childList:true,subtree:true})}}this.hoveredElement=a}},{key:"onMouseOut",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!this.hoveredElement)return;if(!r.contains(n)){this.setHover(false);this.hoveredElement=null;if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}}},{key:"onMutation",value:function e(t){var a=this;var r=t.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(a.hoveredElement)})});if(r){this.hoveredElement=null;this.setHover(false)}}},{key:"setHover",value:function e(t){this.setState(function(e){var a=Math.max(0,e.hoverCount+(t?1:-1));var r=a>0;return{hoverCount:a,hover:r}})}},{key:"setBackground",value:function e(){this.props.setBackground({hover:this.isHovered()})}},{key:"isHovered",value:function e(){var e=this.props.hovered||this.state.hover;var t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function e(){var t=this.isHovered();var a=b()("c-message_kit__hover",{"c-message_kit__hover--hovered":t},this.props.className);var r=this.props["data-qa"];return h.a.createElement(O.Provider,{value:{hover:t,setHover:this.setHover}},h.a.createElement("div",{role:"document",className:a,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":r},this.props.children))}}]);return t}(m["PureComponent"]);S.displayName="MessageHover";S.defaultProps=E;t["a"]=Object(k["b"])(Object(y["a"])(S));function w(e){return function t(a){return h.a.createElement(O.Consumer,null,function(t){var r=t.hover,i=t.setHover;return h.a.createElement(e,n()({},a,{hover:r,setHover:i}))})}}}},[[4507,0,2]]]);